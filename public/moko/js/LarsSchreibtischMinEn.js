Ext={version:"2.2.1"};window["undefined"]=window["undefined"];Ext.apply=function(j,h,c){if(c){Ext.apply(j,c)}if(j&&h&&typeof h=="object"){for(var g in h){j[g]=h[g]}}return j};(function(){var idSeed=0;var ua=navigator.userAgent.toLowerCase();var isStrict=document.compatMode=="CSS1Compat",isOpera=ua.indexOf("opera")>-1,isChrome=ua.indexOf("chrome")>-1,isSafari=!isChrome&&(/webkit|khtml/).test(ua),isSafari3=isSafari&&ua.indexOf("webkit/5")!=-1,isIE=!isOpera&&ua.indexOf("msie")>-1,isIE7=!isOpera&&ua.indexOf("msie 7")>-1,isIE8=!isOpera&&ua.indexOf("msie 8")>-1,isGecko=!isSafari&&!isChrome&&ua.indexOf("gecko")>-1,isGecko3=isGecko&&ua.indexOf("rv:1.9")>-1,isBorderBox=isIE&&!isStrict,isWindows=(ua.indexOf("windows")!=-1||ua.indexOf("win32")!=-1),isMac=(ua.indexOf("macintosh")!=-1||ua.indexOf("mac os x")!=-1),isAir=(ua.indexOf("adobeair")!=-1),isLinux=(ua.indexOf("linux")!=-1),isSecure=window.location.href.toLowerCase().indexOf("https")===0;if(isIE&&!isIE7){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}Ext.apply(Ext,{isStrict:isStrict,isSecure:isSecure,isReady:false,enableGarbageCollector:true,enableListenerCollection:false,SSL_SECURE_URL:"javascript:false",BLANK_IMAGE_URL:"http://extjs.com/s.gif",emptyFn:function(){},applyIf:function(o,c){if(o&&c){for(var p in c){if(typeof o[p]=="undefined"){o[p]=c[p]}}}return o},addBehaviors:function(o){if(!Ext.isReady){Ext.onReady(function(){Ext.addBehaviors(o)});return}var cache={};for(var b in o){var parts=b.split("@");if(parts[1]){var s=parts[0];if(!cache[s]){cache[s]=Ext.select(s)}cache[s].on(parts[1],o[b])}}cache=null},id:function(el,prefix){prefix=prefix||"ext-gen";el=Ext.getDom(el);var id=prefix+(++idSeed);return el?(el.id?el.id:(el.id=id)):id},extend:function(){var io=function(o){for(var m in o){this[m]=o[m]}};var oc=Object.prototype.constructor;return function(sb,sp,overrides){if(typeof sp=="object"){overrides=sp;sp=sb;sb=overrides.constructor!=oc?overrides.constructor:function(){sp.apply(this,arguments)}}var F=function(){},sbp,spp=sp.prototype;F.prototype=spp;sbp=sb.prototype=new F();sbp.constructor=sb;sb.superclass=spp;if(spp.constructor==oc){spp.constructor=sp}sb.override=function(o){Ext.override(sb,o)};sbp.override=io;Ext.override(sb,overrides);sb.extend=function(o){Ext.extend(sb,o)};return sb}}(),override:function(origclass,overrides){if(overrides){var p=origclass.prototype;for(var method in overrides){p[method]=overrides[method]}if(Ext.isIE&&overrides.toString!=origclass.toString){p.toString=overrides.toString}}},namespace:function(){var a=arguments,o=null,i,j,d,rt;for(i=0;i<a.length;++i){d=a[i].split(".");rt=d[0];eval("if (typeof "+rt+' == "undefined"){'+rt+" = {};} o = "+rt+";");for(j=1;j<d.length;++j){o[d[j]]=o[d[j]]||{};o=o[d[j]]}}},urlEncode:function(o){if(!o){return""}var buf=[];for(var key in o){var ov=o[key],k=encodeURIComponent(key);var type=typeof ov;if(type=="undefined"){buf.push(k,"=&")}else{if(type!="function"&&type!="object"){buf.push(k,"=",encodeURIComponent(ov),"&")}else{if(Ext.isDate(ov)){var s=Ext.encode(ov).replace(/"/g,"");buf.push(k,"=",s,"&")}else{if(Ext.isArray(ov)){if(ov.length){for(var i=0,len=ov.length;i<len;i++){buf.push(k,"=",encodeURIComponent(ov[i]===undefined?"":ov[i]),"&")}}else{buf.push(k,"=&")}}}}}}buf.pop();return buf.join("")},urlDecode:function(string,overwrite){if(!string||!string.length){return{}}var obj={};var pairs=string.split("&");var pair,name,value;for(var i=0,len=pairs.length;i<len;i++){pair=pairs[i].split("=");name=decodeURIComponent(pair[0]);value=decodeURIComponent(pair[1]);if(overwrite!==true){if(typeof obj[name]=="undefined"){obj[name]=value}else{if(typeof obj[name]=="string"){obj[name]=[obj[name]];obj[name].push(value)}else{obj[name].push(value)}}}else{obj[name]=value}}return obj},each:function(array,fn,scope){if(typeof array.length=="undefined"||typeof array=="string"){array=[array]}for(var i=0,len=array.length;i<len;i++){if(fn.call(scope||array[i],array[i],i,array)===false){return i}}},combine:function(){var as=arguments,l=as.length,r=[];for(var i=0;i<l;i++){var a=as[i];if(Ext.isArray(a)){r=r.concat(a)}else{if(a.length!==undefined&&!a.substr){r=r.concat(Array.prototype.slice.call(a,0))}else{r.push(a)}}}return r},escapeRe:function(s){return s.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},callback:function(cb,scope,args,delay){if(typeof cb=="function"){if(delay){cb.defer(delay,scope,args||[])}else{cb.apply(scope,args||[])}}},getDom:function(el){if(!el||!document){return null}return el.dom?el.dom:(typeof el=="string"?document.getElementById(el):el)},getDoc:function(){return Ext.get(document)},getBody:function(){return Ext.get(document.body||document.documentElement)},getCmp:function(id){return Ext.ComponentMgr.get(id)},num:function(v,defaultValue){if(typeof v!="number"||isNaN(v)){return defaultValue}return v},destroy:function(){for(var i=0,a=arguments,len=a.length;i<len;i++){var as=a[i];if(as){if(typeof as.destroy=="function"){as.destroy()}else{if(as.dom){as.removeAllListeners();as.remove()}}}}},removeNode:isIE?function(){var d;return function(n){if(n&&n.tagName!="BODY"){d=d||document.createElement("div");d.appendChild(n);d.innerHTML=""}}}():function(n){if(n&&n.parentNode&&n.tagName!="BODY"){n.parentNode.removeChild(n)}},type:function(o){if(o===undefined||o===null){return false}if(o.htmlElement){return"element"}var t=typeof o;if(t=="object"&&o.nodeName){switch(o.nodeType){case 1:return"element";case 3:return(/\S/).test(o.nodeValue)?"textnode":"whitespace"}}if(t=="object"||t=="function"){switch(o.constructor){case Array:return"array";case RegExp:return"regexp";case Date:return"date"}if(typeof o.length=="number"&&typeof o.item=="function"){return"nodelist"}}return t},isEmpty:function(v,allowBlank){return v===null||v===undefined||(!allowBlank?v==="":false)},value:function(v,defaultValue,allowBlank){return Ext.isEmpty(v,allowBlank)?defaultValue:v},isArray:function(v){return v&&typeof v.length=="number"&&typeof v.splice=="function"},isDate:function(v){return v&&typeof v.getFullYear=="function"},isOpera:isOpera,isChrome:isChrome,isSafari:isSafari,isSafari3:isSafari3,isSafari2:isSafari&&!isSafari3,isIE:isIE,isIE6:isIE&&!isIE7&&!isIE8,isIE7:isIE7,isIE8:isIE8,isGecko:isGecko,isGecko2:isGecko&&!isGecko3,isGecko3:isGecko3,isBorderBox:isBorderBox,isLinux:isLinux,isWindows:isWindows,isMac:isMac,isAir:isAir,useShims:((isIE&&!isIE7)||(isMac&&isGecko&&!isGecko3))});Ext.ns=Ext.namespace})();Ext.ns("Ext","Ext.util","Ext.grid","Ext.dd","Ext.tree","Ext.data","Ext.form","Ext.menu","Ext.state","Ext.lib","Ext.layout","Ext.app","Ext.ux");Ext.apply(Function.prototype,{createCallback:function(){var g=arguments;var c=this;return function(){return c.apply(window,g)}},createDelegate:function(k,g,h){var j=this;return function(){var a=g||arguments;if(h===true){a=Array.prototype.slice.call(arguments,0);a=a.concat(g)}else{if(typeof h=="number"){a=Array.prototype.slice.call(arguments,0);var c=[h,0].concat(g);Array.prototype.splice.apply(a,c)}}return j.apply(k||window,a)}},defer:function(l,j,g,h){var k=this.createDelegate(j,g,h);if(l){return setTimeout(k,l)}k();return 0},createSequence:function(g,h){if(typeof g!="function"){return this}var j=this;return function(){var a=j.apply(this||window,arguments);g.apply(h||this||window,arguments);return a}},createInterceptor:function(g,h){if(typeof g!="function"){return this}var j=this;return function(){g.target=this;g.method=j;if(g.apply(h||this||window,arguments)===false){return}return j.apply(this||window,arguments)}}});Ext.applyIf(String,{escape:function(c){return c.replace(/('|\\)/g,"\\$1")},leftPad:function(j,g,k){var h=new String(j);if(!k){k=" "}while(h.length<g){h=k+h}return h.toString()},format:function(c){var g=Array.prototype.slice.call(arguments,1);return c.replace(/\{(\d+)\}/g,function(h,a){return g[a]})}});String.prototype.toggle=function(c,g){return this==c?g:c};String.prototype.trim=function(){var c=/^\s+|\s+$/g;return function(){return this.replace(c,"")}}();Ext.applyIf(Number.prototype,{constrain:function(c,g){return Math.min(Math.max(this,c),g)}});Ext.applyIf(Array.prototype,{indexOf:function(j){for(var g=0,h=this.length;g<h;g++){if(this[g]==j){return g}}return -1},remove:function(c){var g=this.indexOf(c);if(g!=-1){this.splice(g,1)}return this}});Date.prototype.getElapsed=function(c){return Math.abs((c||new Date()).getTime()-this.getTime())};(function(){var g;Ext.lib.Dom={getViewWidth:function(a){return a?this.getDocumentWidth():this.getViewportWidth()},getViewHeight:function(a){return a?this.getDocumentHeight():this.getViewportHeight()},getDocumentHeight:function(){var a=(document.compatMode!="CSS1Compat")?document.body.scrollHeight:document.documentElement.scrollHeight;return Math.max(a,this.getViewportHeight())},getDocumentWidth:function(){var a=(document.compatMode!="CSS1Compat")?document.body.scrollWidth:document.documentElement.scrollWidth;return Math.max(a,this.getViewportWidth())},getViewportHeight:function(){if(Ext.isIE){return Ext.isStrict?document.documentElement.clientHeight:document.body.clientHeight}else{return self.innerHeight}},getViewportWidth:function(){if(Ext.isIE){return Ext.isStrict?document.documentElement.clientWidth:document.body.clientWidth}else{return self.innerWidth}},isAncestor:function(c,a){c=Ext.getDom(c);a=Ext.getDom(a);if(!c||!a){return false}if(c.contains&&!Ext.isSafari){return c.contains(a)}else{if(c.compareDocumentPosition){return !!(c.compareDocumentPosition(a)&16)}else{var l=a.parentNode;while(l){if(l==c){return true}else{if(!l.tagName||l.tagName.toUpperCase()=="HTML"){return false}}l=l.parentNode}return false}}},getRegion:function(a){return Ext.lib.Region.getRegion(a)},getY:function(a){return this.getXY(a)[1]},getX:function(a){return this.getXY(a)[0]},getXY:function(y){var z,t,r,p,v=(document.body||document.documentElement);y=Ext.getDom(y);if(y==v){return[0,0]}if(y.getBoundingClientRect){r=y.getBoundingClientRect();p=k(document).getScroll();return[r.left+p.left,r.top+p.top]}var c=0,s=0;z=y;var A=k(y).getStyle("position")=="absolute";while(z){c+=z.offsetLeft;s+=z.offsetTop;if(!A&&k(z).getStyle("position")=="absolute"){A=true}if(Ext.isGecko){t=k(z);var a=parseInt(t.getStyle("borderTopWidth"),10)||0;var x=parseInt(t.getStyle("borderLeftWidth"),10)||0;c+=x;s+=a;if(z!=y&&t.getStyle("overflow")!="visible"){c+=x;s+=a}}z=z.offsetParent}if(Ext.isSafari&&A){c-=v.offsetLeft;s-=v.offsetTop}if(Ext.isGecko&&!A){var w=k(v);c+=parseInt(w.getStyle("borderLeftWidth"),10)||0;s+=parseInt(w.getStyle("borderTopWidth"),10)||0}z=y.parentNode;while(z&&z!=v){if(!Ext.isOpera||(z.tagName!="TR"&&k(z).getStyle("display")!="inline")){c-=z.scrollLeft;s-=z.scrollTop}z=z.parentNode}return[c,s]},setXY:function(l,c){l=Ext.fly(l,"_setXY");l.position();var a=l.translatePoints(c);if(c[0]!==false){l.dom.style.left=a.left+"px"}if(c[1]!==false){l.dom.style.top=a.top+"px"}},setX:function(a,c){this.setXY(a,[c,false])},setY:function(c,a){this.setXY(c,[false,a])}};Ext.lib.Event=function(){var p=false;var o=[];var a=[];var l=0;var m=[];var q=0;var c=null;return{POLL_RETRYS:200,POLL_INTERVAL:20,EL:0,TYPE:1,FN:2,WFN:3,OBJ:3,ADJ_SCOPE:4,_interval:null,startInterval:function(){if(!this._interval){var s=this;var r=function(){s._tryPreloadAttach()};this._interval=setInterval(r,this.POLL_INTERVAL)}},onAvailable:function(v,s,t,r){m.push({id:v,fn:s,obj:t,override:r,checkReady:false});l=this.POLL_RETRYS;this.startInterval()},addListener:function(t,r,v){t=Ext.getDom(t);if(!t||!v){return false}if("unload"==r){a[a.length]=[t,r,v];return true}var w=function(y){return typeof Ext!="undefined"?v(Ext.lib.Event.getEvent(y)):false};var s=[t,r,v,w];var x=o.length;o[x]=s;this.doAdd(t,r,w,false);return true},removeListener:function(w,A,x){var y,B;w=Ext.getDom(w);if(!x){return this.purgeElement(w,false,A)}if("unload"==A){for(y=0,B=a.length;y<B;y++){var t=a[y];if(t&&t[0]==w&&t[1]==A&&t[2]==x){a.splice(y,1);return true}}return false}var v=null;var z=arguments[3];if("undefined"==typeof z){z=this._getCacheIndex(w,A,x)}if(z>=0){v=o[z]}if(!w||!v){return false}this.doRemove(w,A,v[this.WFN],false);delete o[z][this.WFN];delete o[z][this.FN];o.splice(z,1);return true},getTarget:function(t,r){t=t.browserEvent||t;var s=t.target||t.srcElement;return this.resolveTextNode(s)},resolveTextNode:function(r){if(Ext.isSafari&&r&&3==r.nodeType){return r.parentNode}else{return r}},getPageX:function(r){r=r.browserEvent||r;var s=r.pageX;if(!s&&0!==s){s=r.clientX||0;if(Ext.isIE){s+=this.getScroll()[1]}}return s},getPageY:function(s){s=s.browserEvent||s;var r=s.pageY;if(!r&&0!==r){r=s.clientY||0;if(Ext.isIE){r+=this.getScroll()[0]}}return r},getXY:function(r){r=r.browserEvent||r;return[this.getPageX(r),this.getPageY(r)]},getRelatedTarget:function(r){r=r.browserEvent||r;var s=r.relatedTarget;if(!s){if(r.type=="mouseout"){s=r.toElement}else{if(r.type=="mouseover"){s=r.fromElement}}}return this.resolveTextNode(s)},getTime:function(t){t=t.browserEvent||t;if(!t.time){var r=new Date().getTime();try{t.time=r}catch(s){this.lastError=s;return r}}return t.time},stopEvent:function(r){this.stopPropagation(r);this.preventDefault(r)},stopPropagation:function(r){r=r.browserEvent||r;if(r.stopPropagation){r.stopPropagation()}else{r.cancelBubble=true}},preventDefault:function(r){r=r.browserEvent||r;if(r.preventDefault){r.preventDefault()}else{r.returnValue=false}},getEvent:function(r){var s=r||window.event;if(!s){var t=this.getEvent.caller;while(t){s=t.arguments[0];if(s&&Event==s.constructor){break}t=t.caller}}return s},getCharCode:function(r){r=r.browserEvent||r;return r.charCode||r.keyCode||0},_getCacheIndex:function(t,x,v){for(var w=0,r=o.length;w<r;++w){var s=o[w];if(s&&s[this.FN]==v&&s[this.EL]==t&&s[this.TYPE]==x){return w}}return -1},elCache:{},getEl:function(r){return document.getElementById(r)},clearCache:function(){},_load:function(r){p=true;var s=Ext.lib.Event;if(Ext.isIE){s.doRemove(window,"load",s._load)}},_tryPreloadAttach:function(){if(this.locked){return false}this.locked=true;var v=!p;if(!v){v=(l>0)}var w=[];for(var s=0,t=m.length;s<t;++s){var x=m[s];if(x){var y=this.getEl(x.id);if(y){if(!x.checkReady||p||y.nextSibling||(document&&document.body)){var z=y;if(x.override){if(x.override===true){z=x.obj}else{z=x.override}}x.fn.call(z,x.obj);m[s]=null}}else{w.push(x)}}}l=(w.length===0)?0:l-1;if(v){this.startInterval()}else{clearInterval(this._interval);this._interval=null}this.locked=false;return true},purgeElement:function(x,w,z){var v=this.getListeners(x,z);if(v){for(var y=0,t=v.length;y<t;++y){var A=v[y];this.removeListener(x,A.type,A.fn)}}if(w&&x&&x.childNodes){for(y=0,t=x.childNodes.length;y<t;++y){this.purgeElement(x.childNodes[y],w,z)}}},getListeners:function(z,E){var w=[],A;if(!E){A=[o,a]}else{if(E=="unload"){A=[a]}else{A=[o]}}for(var x=0;x<A.length;++x){var B=A[x];if(B&&B.length>0){for(var v=0,D=B.length;v<D;++v){var y=B[v];if(y&&y[this.EL]===z&&(!E||E===y[this.TYPE])){w.push({type:y[this.TYPE],fn:y[this.FN],obj:y[this.OBJ],adjust:y[this.ADJ_SCOPE],index:v})}}}}return(w.length)?w:null},_unload:function(w){var x=Ext.lib.Event,z,A,D,v,B;for(z=0,v=a.length;z<v;++z){D=a[z];if(D){var y=window;if(D[x.ADJ_SCOPE]){if(D[x.ADJ_SCOPE]===true){y=D[x.OBJ]}else{y=D[x.ADJ_SCOPE]}}D[x.FN].call(y,x.getEvent(w),D[x.OBJ]);a[z]=null;D=null;y=null}}a=null;if(o&&o.length>0){A=o.length;while(A){B=A-1;D=o[B];if(D){x.removeListener(D[x.EL],D[x.TYPE],D[x.FN],B)}A=A-1}D=null;x.clearCache()}x.doRemove(window,"unload",x._unload)},getScroll:function(){var s=document.documentElement,r=document.body;if(s&&(s.scrollTop||s.scrollLeft)){return[s.scrollTop,s.scrollLeft]}else{if(r){return[r.scrollTop,r.scrollLeft]}else{return[0,0]}}},doAdd:function(){if(window.addEventListener){return function(t,r,v,s){t.addEventListener(r,v,(s))}}else{if(window.attachEvent){return function(t,r,v,s){t.attachEvent("on"+r,v)}}else{return function(){}}}}(),doRemove:function(){if(window.removeEventListener){return function(t,r,v,s){t.removeEventListener(r,v,(s))}}else{if(window.detachEvent){return function(t,s,r){t.detachEvent("on"+s,r)}}else{return function(){}}}}()}}();var j=Ext.lib.Event;j.on=j.addListener;j.un=j.removeListener;if(document&&document.body){j._load()}else{j.doAdd(window,"load",j._load)}j.doAdd(window,"unload",j._unload);j._tryPreloadAttach();Ext.lib.Ajax={request:function(a,m,r,c,q){if(q){var p=q.headers;if(p){for(var o in p){if(p.hasOwnProperty(o)){this.initHeader(o,p[o],false)}}}if(q.xmlData){if(!p||!p["Content-Type"]){this.initHeader("Content-Type","text/xml",false)}a=(a?a:(q.method?q.method:"POST"));c=q.xmlData}else{if(q.jsonData){if(!p||!p["Content-Type"]){this.initHeader("Content-Type","application/json",false)}a=(a?a:(q.method?q.method:"POST"));c=typeof q.jsonData=="object"?Ext.encode(q.jsonData):q.jsonData}}}return this.asyncRequest(a,m,r,c)},serializeForm:function(v){if(typeof v=="string"){v=(document.getElementById(v)||document.forms[v])}var t,w,s,q,p="",a=false;for(var c=0;c<v.elements.length;c++){t=v.elements[c];q=v.elements[c].disabled;w=v.elements[c].name;s=v.elements[c].value;if(!q&&w){switch(t.type){case"select-one":case"select-multiple":for(var r=0;r<t.options.length;r++){if(t.options[r].selected){if(Ext.isIE){p+=encodeURIComponent(w)+"="+encodeURIComponent(t.options[r].attributes.value.specified?t.options[r].value:t.options[r].text)+"&"}else{p+=encodeURIComponent(w)+"="+encodeURIComponent(t.options[r].hasAttribute("value")?t.options[r].value:t.options[r].text)+"&"}}}break;case"radio":case"checkbox":if(t.checked){p+=encodeURIComponent(w)+"="+encodeURIComponent(s)+"&"}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(a==false){p+=encodeURIComponent(w)+"="+encodeURIComponent(s)+"&";a=true}break;default:p+=encodeURIComponent(w)+"="+encodeURIComponent(s)+"&";break}}}p=p.substr(0,p.length-1);return p},headers:{},hasHeaders:false,useDefaultHeader:true,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest",hasDefaultHeaders:true,defaultHeaders:{},poll:{},timeout:{},pollInterval:50,transactionId:0,setProgId:function(a){this.activeX.unshift(a)},setDefaultPostHeader:function(a){this.useDefaultHeader=a},setDefaultXhrHeader:function(a){this.useDefaultXhrHeader=a},setPollingInterval:function(a){if(typeof a=="number"&&isFinite(a)){this.pollInterval=a}},createXhrObject:function(a){var c,o;try{o=new XMLHttpRequest();c={conn:o,tId:a}}catch(l){for(var m=0;m<this.activeX.length;++m){try{o=new ActiveXObject(this.activeX[m]);c={conn:o,tId:a};break}catch(l){}}}finally{return c}},getConnectionObject:function(){var c;var a=this.transactionId;try{c=this.createXhrObject(a);if(c){this.transactionId++}}catch(l){}finally{return c}},asyncRequest:function(a,m,c,o){var l=this.getConnectionObject();if(!l){return null}else{l.conn.open(a,m,true);if(this.useDefaultXhrHeader){if(!this.defaultHeaders["X-Requested-With"]){this.initHeader("X-Requested-With",this.defaultXhrHeader,true)}}if(o&&this.useDefaultHeader&&(!this.hasHeaders||!this.headers["Content-Type"])){this.initHeader("Content-Type",this.defaultPostHeader)}if(this.hasDefaultHeaders||this.hasHeaders){this.setHeader(l)}this.handleReadyState(l,c);l.conn.send(o||null);return l}},handleReadyState:function(c,a){var l=this;if(a&&a.timeout){this.timeout[c.tId]=window.setTimeout(function(){l.abort(c,a,true)},a.timeout)}this.poll[c.tId]=window.setInterval(function(){if(c.conn&&c.conn.readyState==4){window.clearInterval(l.poll[c.tId]);delete l.poll[c.tId];if(a&&a.timeout){window.clearTimeout(l.timeout[c.tId]);delete l.timeout[c.tId]}l.handleTransactionResponse(c,a)}},this.pollInterval)},handleTransactionResponse:function(c,a,p){if(!a){this.releaseObject(c);return}var m,o;try{if(c.conn.status!==undefined&&c.conn.status!=0){m=c.conn.status}else{m=13030}}catch(l){m=13030}if((m>=200&&m<300)||(Ext.isIE&&m==1223)){o=this.createResponseObject(c,a.argument);if(a.success){if(!a.scope){a.success(o)}else{a.success.apply(a.scope,[o])}}}else{switch(m){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:o=this.createExceptionObject(c.tId,a.argument,(p?p:false));if(a.failure){if(!a.scope){a.failure(o)}else{a.failure.apply(a.scope,[o])}}break;default:o=this.createResponseObject(c,a.argument);if(a.failure){if(!a.scope){a.failure(o)}else{a.failure.apply(a.scope,[o])}}}}this.releaseObject(c);o=null},createResponseObject:function(w,o){var s={};var a={};try{var t=w.conn.getAllResponseHeaders();var q=t.split("\n");for(var r=0;r<q.length;r++){var v=q[r].indexOf(":");if(v!=-1){a[q[r].substring(0,v)]=q[r].substring(v+2)}}}catch(c){}s.tId=w.tId;s.status=w.conn.status;s.statusText=w.conn.statusText;s.getResponseHeader=a;s.getAllResponseHeaders=t;s.responseText=w.conn.responseText;s.responseXML=w.conn.responseXML;if(typeof o!==undefined){s.argument=o}return s},createExceptionObject:function(a,p,s){var m=0;var c="communication failure";var q=-1;var r="transaction aborted";var o={};o.tId=a;if(s){o.status=q;o.statusText=r}else{o.status=m;o.statusText=c}if(p){o.argument=p}return o},initHeader:function(m,a,c){var l=(c)?this.defaultHeaders:this.headers;if(l[m]===undefined){l[m]=a}else{l[m]=a+","+l[m]}if(c){this.hasDefaultHeaders=true}else{this.hasHeaders=true}},setHeader:function(c){if(this.hasDefaultHeaders){for(var a in this.defaultHeaders){if(this.defaultHeaders.hasOwnProperty(a)){c.conn.setRequestHeader(a,this.defaultHeaders[a])}}}if(this.hasHeaders){for(var a in this.headers){if(this.headers.hasOwnProperty(a)){c.conn.setRequestHeader(a,this.headers[a])}}this.headers={};this.hasHeaders=false}},resetDefaultHeaders:function(){delete this.defaultHeaders;this.defaultHeaders={};this.hasDefaultHeaders=false},abort:function(c,a,l){if(this.isCallInProgress(c)){c.conn.abort();window.clearInterval(this.poll[c.tId]);delete this.poll[c.tId];if(l){delete this.timeout[c.tId]}this.handleTransactionResponse(c,a,true);return true}else{return false}},isCallInProgress:function(a){if(a.conn){return a.conn.readyState!=4&&a.conn.readyState!=0}else{return false}},releaseObject:function(a){a.conn=null;a=null},activeX:["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"]};Ext.lib.Region=function(c,a,m,l){this.top=c;this[1]=c;this.right=a;this.bottom=m;this.left=l;this[0]=l};Ext.lib.Region.prototype={contains:function(a){return(a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom)},getArea:function(){return((this.bottom-this.top)*(this.right-this.left))},intersect:function(a){var l=Math.max(this.top,a.top);var c=Math.min(this.right,a.right);var o=Math.min(this.bottom,a.bottom);var m=Math.max(this.left,a.left);if(o>=l&&c>=m){return new Ext.lib.Region(l,c,o,m)}else{return null}},union:function(a){var l=Math.min(this.top,a.top);var c=Math.max(this.right,a.right);var o=Math.max(this.bottom,a.bottom);var m=Math.min(this.left,a.left);return new Ext.lib.Region(l,c,o,m)},constrainTo:function(a){this.top=this.top.constrain(a.top,a.bottom);this.bottom=this.bottom.constrain(a.top,a.bottom);this.left=this.left.constrain(a.left,a.right);this.right=this.right.constrain(a.left,a.right);return this},adjust:function(c,l,m,a){this.top+=c;this.left+=l;this.right+=a;this.bottom+=m;return this}};Ext.lib.Region.getRegion=function(l){var a=Ext.lib.Dom.getXY(l);var m=a[1];var c=a[0]+l.offsetWidth;var p=a[1]+l.offsetHeight;var o=a[0];return new Ext.lib.Region(m,c,p,o)};Ext.lib.Point=function(c,a){if(Ext.isArray(c)){a=c[1];c=c[0]}this.x=this.right=this.left=this[0]=c;this.y=this.top=this.bottom=this[1]=a};Ext.lib.Point.prototype=new Ext.lib.Region();Ext.lib.Anim={scroll:function(l,o,c,a,p,m){return this.run(l,o,c,a,p,m,Ext.lib.Scroll)},motion:function(l,o,c,a,p,m){return this.run(l,o,c,a,p,m,Ext.lib.Motion)},color:function(l,o,c,a,p,m){return this.run(l,o,c,a,p,m,Ext.lib.ColorAnim)},run:function(o,r,c,a,s,p,q){q=q||Ext.lib.AnimBase;if(typeof a=="string"){a=Ext.lib.Easing[a]}var m=new q(o,r,c,a);m.animateX(function(){Ext.callback(s,p)});return m}};function k(a){if(!g){g=new Ext.Element.Flyweight()}g.dom=a;return g}if(Ext.isIE){function h(){var a=Function.prototype;delete a.createSequence;delete a.defer;delete a.createDelegate;delete a.createCallback;delete a.createInterceptor;window.detachEvent("onunload",h)}window.attachEvent("onunload",h)}Ext.lib.AnimBase=function(l,m,c,a){if(l){this.init(l,m,c,a)}};Ext.lib.AnimBase.prototype={toString:function(){var c=this.getEl();var a=c.id||c.tagName;return("Anim "+a)},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(l,a,c){return this.method(this.currentFrame,a,c-a,this.totalFrames)},setAttribute:function(l,a,c){if(this.patterns.noNegatives.test(l)){a=(a>0)?a:0}Ext.fly(this.getEl(),"_anim").setStyle(l,a+c)},getAttribute:function(p){var m=this.getEl();var c=k(m).getStyle(p);if(c!=="auto"&&!this.patterns.offsetUnit.test(c)){return parseFloat(c)}var o=this.patterns.offsetAttribute.exec(p)||[];var a=!!(o[3]);var l=!!(o[2]);if(l||(k(m).getStyle("position")=="absolute"&&a)){c=m["offset"+o[0].charAt(0).toUpperCase()+o[0].substr(1)]}else{c=0}return c},getDefaultUnit:function(a){if(this.patterns.defaultUnit.test(a)){return"px"}return""},animateX:function(a,l){var c=function(){this.onComplete.removeListener(c);if(typeof a=="function"){a.call(l||this,this)}};this.onComplete.addListener(c,this);this.animate()},setRuntimeAttribute:function(q){var a;var p;var o=this.attributes;this.runtimeAttributes[q]={};var c=function(l){return(typeof l!=="undefined")};if(!c(o[q]["to"])&&!c(o[q]["by"])){return false}a=(c(o[q]["from"]))?o[q]["from"]:this.getAttribute(q);if(c(o[q]["to"])){p=o[q]["to"]}else{if(c(o[q]["by"])){if(a.constructor==Array){p=[];for(var m=0,r=a.length;m<r;++m){p[m]=a[m]+o[q]["by"][m]}}else{p=a+o[q]["by"]}}}this.runtimeAttributes[q].start=a;this.runtimeAttributes[q].end=p;this.runtimeAttributes[q].unit=(c(o[q].unit))?o[q]["unit"]:this.getDefaultUnit(q)},init:function(t,o,p,w){var v=false;var s=null;var q=0;t=Ext.getDom(t);this.attributes=o||{};this.duration=p||1;this.method=w||Ext.lib.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=Ext.lib.AnimMgr.fps;this.getEl=function(){return t};this.isAnimated=function(){return v};this.getStartTime=function(){return s};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(Ext.lib.AnimMgr.fps*this.duration):this.duration;Ext.lib.AnimMgr.registerElement(this)};this.stop=function(l){if(l){this.currentFrame=this.totalFrames;this._onTween.fire()}Ext.lib.AnimMgr.stop(this)};var a=function(){this.onStart.fire();this.runtimeAttributes={};for(var l in this.attributes){this.setRuntimeAttribute(l)}v=true;q=0;s=new Date()};var c=function(){var l={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};l.toString=function(){return("duration: "+l.duration+", currentFrame: "+l.currentFrame)};this.onTween.fire(l);var m=this.runtimeAttributes;for(var x in m){this.setAttribute(x,this.doMethod(x,m[x].start,m[x].end),m[x].unit)}q+=1};var r=function(){var m=(new Date()-s)/1000;var l={duration:m,frames:q,fps:q/m};l.toString=function(){return("duration: "+l.duration+", frames: "+l.frames+", fps: "+l.fps)};v=false;q=0;this.onComplete.fire(l)};this._onStart=new Ext.util.Event(this);this.onStart=new Ext.util.Event(this);this.onTween=new Ext.util.Event(this);this._onTween=new Ext.util.Event(this);this.onComplete=new Ext.util.Event(this);this._onComplete=new Ext.util.Event(this);this._onStart.addListener(a);this._onTween.addListener(c);this._onComplete.addListener(r)}};Ext.lib.AnimMgr=new function(){var l=null;var m=[];var o=0;this.fps=1000;this.delay=1;this.registerElement=function(p){m[m.length]=p;o+=1;p._onStart.fire();this.start()};this.unRegister=function(p,q){p._onComplete.fire();q=q||a(p);if(q!=-1){m.splice(q,1)}o-=1;if(o<=0){this.stop()}};this.start=function(){if(l===null){l=setInterval(this.run,this.delay)}};this.stop=function(p){if(!p){clearInterval(l);for(var q=0,r=m.length;q<r;++q){if(m[0].isAnimated()){this.unRegister(m[0],0)}}m=[];l=null;o=0}else{this.unRegister(p)}};this.run=function(){for(var p=0,r=m.length;p<r;++p){var q=m[p];if(!q||!q.isAnimated()){continue}if(q.currentFrame<q.totalFrames||q.totalFrames===null){q.currentFrame+=1;if(q.useSeconds){c(q)}q._onTween.fire()}else{Ext.lib.AnimMgr.stop(q,p)}}};var a=function(p){for(var q=0,r=m.length;q<r;++q){if(m[q]==p){return q}}return -1};var c=function(r){var v=r.totalFrames;var p=r.currentFrame;var q=(r.currentFrame*r.duration*1000/r.totalFrames);var s=(new Date()-r.getStartTime());var t=0;if(s<r.duration*1000){t=Math.round((s/q-1)*r.currentFrame)}else{t=v-(p+1)}if(t>0&&isFinite(t)){if(r.currentFrame+t>=v){t=v-(p+1)}r.currentFrame+=t}}};Ext.lib.Bezier=new function(){this.getPosition=function(c,m){var a=c.length;var o=[];for(var p=0;p<a;++p){o[p]=[c[p][0],c[p][1]]}for(var q=1;q<a;++q){for(p=0;p<a-q;++p){o[p][0]=(1-m)*o[p][0]+m*o[parseInt(p+1,10)][0];o[p][1]=(1-m)*o[p][1]+m*o[parseInt(p+1,10)][1]}}return[o[0][0],o[0][1]]}};(function(){Ext.lib.ColorAnim=function(p,q,o,m){Ext.lib.ColorAnim.superclass.constructor.call(this,p,q,o,m)};Ext.extend(Ext.lib.ColorAnim,Ext.lib.AnimBase);var c=Ext.lib;var a=c.ColorAnim.superclass;var l=c.ColorAnim.prototype;l.toString=function(){var o=this.getEl();var m=o.id||o.tagName;return("ColorAnim "+m)};l.patterns.color=/color$/i;l.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;l.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;l.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;l.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;l.parseColor=function(o){if(o.length==3){return o}var m=this.patterns.hex.exec(o);if(m&&m.length==4){return[parseInt(m[1],16),parseInt(m[2],16),parseInt(m[3],16)]}m=this.patterns.rgb.exec(o);if(m&&m.length==4){return[parseInt(m[1],10),parseInt(m[2],10),parseInt(m[3],10)]}m=this.patterns.hex3.exec(o);if(m&&m.length==4){return[parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16),parseInt(m[3]+m[3],16)]}return null};l.getAttribute=function(q){var o=this.getEl();if(this.patterns.color.test(q)){var m=k(o).getStyle(q);if(this.patterns.transparent.test(m)){var p=o.parentNode;m=k(p).getStyle(q);while(p&&this.patterns.transparent.test(m)){p=p.parentNode;m=k(p).getStyle(q);if(p.tagName.toUpperCase()=="HTML"){m="#fff"}}}}else{m=a.getAttribute.call(this,q)}return m};l.doMethod=function(r,t,q){var o;if(this.patterns.color.test(r)){o=[];for(var p=0,s=t.length;p<s;++p){o[p]=a.doMethod.call(this,r,t[p],q[p])}o="rgb("+Math.floor(o[0])+","+Math.floor(o[1])+","+Math.floor(o[2])+")"}else{o=a.doMethod.call(this,r,t,q)}return o};l.setRuntimeAttribute=function(r){a.setRuntimeAttribute.call(this,r);if(this.patterns.color.test(r)){var p=this.attributes;var t=this.parseColor(this.runtimeAttributes[r].start);var q=this.parseColor(this.runtimeAttributes[r].end);if(typeof p[r]["to"]==="undefined"&&typeof p[r]["by"]!=="undefined"){q=this.parseColor(p[r].by);for(var o=0,s=t.length;o<s;++o){q[o]=t[o]+q[o]}}this.runtimeAttributes[r].start=t;this.runtimeAttributes[r].end=q}}})();Ext.lib.Easing={easeNone:function(l,m,a,c){return a*l/c+m},easeIn:function(l,m,a,c){return a*(l/=c)*l+m},easeOut:function(l,m,a,c){return -a*(l/=c)*(l-2)+m},easeBoth:function(l,m,a,c){if((l/=c/2)<1){return a/2*l*l+m}return -a/2*((--l)*(l-2)-1)+m},easeInStrong:function(l,m,a,c){return a*(l/=c)*l*l*l+m},easeOutStrong:function(l,m,a,c){return -a*((l=l/c-1)*l*l*l-1)+m},easeBothStrong:function(l,m,a,c){if((l/=c/2)<1){return a/2*l*l*l*l+m}return -a/2*((l-=2)*l*l*l-2)+m},elasticIn:function(o,q,a,c,p,l){if(o==0){return q}if((o/=c)==1){return q+a}if(!l){l=c*0.3}if(!p||p<Math.abs(a)){p=a;var m=l/4}else{var m=l/(2*Math.PI)*Math.asin(a/p)}return -(p*Math.pow(2,10*(o-=1))*Math.sin((o*c-m)*(2*Math.PI)/l))+q},elasticOut:function(o,q,a,c,p,l){if(o==0){return q}if((o/=c)==1){return q+a}if(!l){l=c*0.3}if(!p||p<Math.abs(a)){p=a;var m=l/4}else{var m=l/(2*Math.PI)*Math.asin(a/p)}return p*Math.pow(2,-10*o)*Math.sin((o*c-m)*(2*Math.PI)/l)+a+q},elasticBoth:function(o,q,a,c,p,l){if(o==0){return q}if((o/=c/2)==2){return q+a}if(!l){l=c*(0.3*1.5)}if(!p||p<Math.abs(a)){p=a;var m=l/4}else{var m=l/(2*Math.PI)*Math.asin(a/p)}if(o<1){return -0.5*(p*Math.pow(2,10*(o-=1))*Math.sin((o*c-m)*(2*Math.PI)/l))+q}return p*Math.pow(2,-10*(o-=1))*Math.sin((o*c-m)*(2*Math.PI)/l)*0.5+a+q},backIn:function(m,o,a,c,l){if(typeof l=="undefined"){l=1.70158}return a*(m/=c)*m*((l+1)*m-l)+o},backOut:function(m,o,a,c,l){if(typeof l=="undefined"){l=1.70158}return a*((m=m/c-1)*m*((l+1)*m+l)+1)+o},backBoth:function(m,o,a,c,l){if(typeof l=="undefined"){l=1.70158}if((m/=c/2)<1){return a/2*(m*m*(((l*=(1.525))+1)*m-l))+o}return a/2*((m-=2)*m*(((l*=(1.525))+1)*m+l)+2)+o},bounceIn:function(l,m,a,c){return a-Ext.lib.Easing.bounceOut(c-l,0,a,c)+m},bounceOut:function(l,m,a,c){if((l/=c)<(1/2.75)){return a*(7.5625*l*l)+m}else{if(l<(2/2.75)){return a*(7.5625*(l-=(1.5/2.75))*l+0.75)+m}else{if(l<(2.5/2.75)){return a*(7.5625*(l-=(2.25/2.75))*l+0.9375)+m}}}return a*(7.5625*(l-=(2.625/2.75))*l+0.984375)+m},bounceBoth:function(l,m,a,c){if(l<c/2){return Ext.lib.Easing.bounceIn(l*2,0,a,c)*0.5+m}return Ext.lib.Easing.bounceOut(l*2-c,0,a,c)*0.5+a*0.5+m}};(function(){Ext.lib.Motion=function(r,s,q,p){if(r){Ext.lib.Motion.superclass.constructor.call(this,r,s,q,p)}};Ext.extend(Ext.lib.Motion,Ext.lib.ColorAnim);var c=Ext.lib;var a=c.Motion.superclass;var m=c.Motion.prototype;m.toString=function(){var q=this.getEl();var p=q.id||q.tagName;return("Motion "+p)};m.patterns.points=/^points$/i;m.setAttribute=function(r,p,q){if(this.patterns.points.test(r)){q=q||"px";a.setAttribute.call(this,"left",p[0],q);a.setAttribute.call(this,"top",p[1],q)}else{a.setAttribute.call(this,r,p,q)}};m.getAttribute=function(q){if(this.patterns.points.test(q)){var p=[a.getAttribute.call(this,"left"),a.getAttribute.call(this,"top")]}else{p=a.getAttribute.call(this,q)}return p};m.doMethod=function(s,t,r){var p=null;if(this.patterns.points.test(s)){var q=this.method(this.currentFrame,0,100,this.totalFrames)/100;p=c.Bezier.getPosition(this.runtimeAttributes[s],q)}else{p=a.doMethod.call(this,s,t,r)}return p};m.setRuntimeAttribute=function(E){if(this.patterns.points.test(E)){var B=this.getEl();var z=this.attributes;var D;var x=z.points.control||[];var A;var w,t;if(x.length>0&&!Ext.isArray(x[0])){x=[x]}else{var y=[];for(w=0,t=x.length;w<t;++w){y[w]=x[w]}x=y}Ext.fly(B,"_anim").position();if(l(z.points.from)){Ext.lib.Dom.setXY(B,z.points.from)}else{Ext.lib.Dom.setXY(B,Ext.lib.Dom.getXY(B))}D=this.getAttribute("points");if(l(z.points.to)){A=o.call(this,z.points.to,D);var v=Ext.lib.Dom.getXY(this.getEl());for(w=0,t=x.length;w<t;++w){x[w]=o.call(this,x[w],D)}}else{if(l(z.points.by)){A=[D[0]+z.points.by[0],D[1]+z.points.by[1]];for(w=0,t=x.length;w<t;++w){x[w]=[D[0]+x[w][0],D[1]+x[w][1]]}}}this.runtimeAttributes[E]=[D];if(x.length>0){this.runtimeAttributes[E]=this.runtimeAttributes[E].concat(x)}this.runtimeAttributes[E][this.runtimeAttributes[E].length]=A}else{a.setRuntimeAttribute.call(this,E)}};var o=function(r,p){var q=Ext.lib.Dom.getXY(this.getEl());r=[r[0]-q[0]+p[0],r[1]-q[1]+p[1]];return r};var l=function(p){return(typeof p!=="undefined")}})();(function(){Ext.lib.Scroll=function(p,q,o,m){if(p){Ext.lib.Scroll.superclass.constructor.call(this,p,q,o,m)}};Ext.extend(Ext.lib.Scroll,Ext.lib.ColorAnim);var c=Ext.lib;var a=c.Scroll.superclass;var l=c.Scroll.prototype;l.toString=function(){var o=this.getEl();var m=o.id||o.tagName;return("Scroll "+m)};l.doMethod=function(q,m,p){var o=null;if(q=="scroll"){o=[this.method(this.currentFrame,m[0],p[0]-m[0],this.totalFrames),this.method(this.currentFrame,m[1],p[1]-m[1],this.totalFrames)]}else{o=a.doMethod.call(this,q,m,p)}return o};l.getAttribute=function(p){var m=null;var o=this.getEl();if(p=="scroll"){m=[o.scrollLeft,o.scrollTop]}else{m=a.getAttribute.call(this,p)}return m};l.setAttribute=function(q,m,o){var p=this.getEl();if(q=="scroll"){p.scrollLeft=m[0];p.scrollTop=m[1]}else{a.setAttribute.call(this,q,m,o)}}})()})();Ext.DomHelper=function(){var r=null;var k=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i;var c=/^table|tbody|tr|td$/i;var a=function(A){if(typeof A=="string"){return A}var v="";if(Ext.isArray(A)){for(var y=0,w=A.length;y<w;y++){v+=a(A[y])}return v}if(!A.tag){A.tag="div"}v+="<"+A.tag;for(var t in A){if(t=="tag"||t=="children"||t=="cn"||t=="html"||typeof A[t]=="function"){continue}if(t=="style"){var z=A.style;if(typeof z=="function"){z=z.call()}if(typeof z=="string"){v+=' style="'+z+'"'}else{if(typeof z=="object"){v+=' style="';for(var x in z){if(typeof z[x]!="function"){v+=x+":"+z[x]+";"}}v+='"'}}}else{if(t=="cls"){v+=' class="'+A.cls+'"'}else{if(t=="htmlFor"){v+=' for="'+A.htmlFor+'"'}else{v+=" "+t+'="'+A[t]+'"'}}}}if(k.test(A.tag)){v+="/>"}else{v+=">";var B=A.children||A.cn;if(B){v+=a(B)}else{if(A.html){v+=A.html}}v+="</"+A.tag+">"}return v};var s=function(A,v){var z;if(Ext.isArray(A)){z=document.createDocumentFragment();for(var y=0,w=A.length;y<w;y++){s(A[y],z)}}else{if(typeof A=="string"){z=document.createTextNode(A)}else{z=document.createElement(A.tag||"div");var x=!!z.setAttribute;for(var t in A){if(t=="tag"||t=="children"||t=="cn"||t=="html"||t=="style"||typeof A[t]=="function"){continue}if(t=="cls"){z.className=A.cls}else{if(x){z.setAttribute(t,A[t])}else{z[t]=A[t]}}}Ext.DomHelper.applyStyles(z,A.style);var B=A.children||A.cn;if(B){s(B,z)}else{if(A.html){z.innerHTML=A.html}}}}if(v){v.appendChild(z)}return z};var o=function(z,x,w,y){r.innerHTML=[x,w,y].join("");var t=-1,v=r;while(++t<z){v=v.firstChild}return v};var p="<table>",j="</table>",g=p+"<tbody>",q="</tbody>"+j,m=g+"<tr>",h="</tr>"+q;var l=function(t,v,x,w){if(!r){r=document.createElement("div")}var y;var z=null;if(t=="td"){if(v=="afterbegin"||v=="beforeend"){return}if(v=="beforebegin"){z=x;x=x.parentNode}else{z=x.nextSibling;x=x.parentNode}y=o(4,m,w,h)}else{if(t=="tr"){if(v=="beforebegin"){z=x;x=x.parentNode;y=o(3,g,w,q)}else{if(v=="afterend"){z=x.nextSibling;x=x.parentNode;y=o(3,g,w,q)}else{if(v=="afterbegin"){z=x.firstChild}y=o(4,m,w,h)}}}else{if(t=="tbody"){if(v=="beforebegin"){z=x;x=x.parentNode;y=o(2,p,w,j)}else{if(v=="afterend"){z=x.nextSibling;x=x.parentNode;y=o(2,p,w,j)}else{if(v=="afterbegin"){z=x.firstChild}y=o(3,g,w,q)}}}else{if(v=="beforebegin"||v=="afterend"){return}if(v=="afterbegin"){z=x.firstChild}y=o(2,p,w,j)}}}x.insertBefore(y,z);return y};return{useDom:false,markup:function(t){return a(t)},applyStyles:function(w,x){if(x){w=Ext.fly(w);if(typeof x=="string"){var v=/\s?([a-z\-]*)\:\s?([^;]*);?/gi;var y;while((y=v.exec(x))!=null){w.setStyle(y[1],y[2])}}else{if(typeof x=="object"){for(var t in x){w.setStyle(t,x[t])}}else{if(typeof x=="function"){Ext.DomHelper.applyStyles(w,x.call())}}}}},insertHtml:function(w,y,x){w=w.toLowerCase();if(y.insertAdjacentHTML){if(c.test(y.tagName)){var v;if(v=l(y.tagName.toLowerCase(),w,y,x)){return v}}switch(w){case"beforebegin":y.insertAdjacentHTML("BeforeBegin",x);return y.previousSibling;case"afterbegin":y.insertAdjacentHTML("AfterBegin",x);return y.firstChild;case"beforeend":y.insertAdjacentHTML("BeforeEnd",x);return y.lastChild;case"afterend":y.insertAdjacentHTML("AfterEnd",x);return y.nextSibling}throw'Illegal insertion point -> "'+w+'"'}var t=y.ownerDocument.createRange();var z;switch(w){case"beforebegin":t.setStartBefore(y);z=t.createContextualFragment(x);y.parentNode.insertBefore(z,y);return y.previousSibling;case"afterbegin":if(y.firstChild){t.setStartBefore(y.firstChild);z=t.createContextualFragment(x);y.insertBefore(z,y.firstChild);return y.firstChild}else{y.innerHTML=x;return y.firstChild}case"beforeend":if(y.lastChild){t.setStartAfter(y.lastChild);z=t.createContextualFragment(x);y.appendChild(z);return y.lastChild}else{y.innerHTML=x;return y.lastChild}case"afterend":t.setStartAfter(y);z=t.createContextualFragment(x);y.parentNode.insertBefore(z,y.nextSibling);return y.nextSibling}throw'Illegal insertion point -> "'+w+'"'},insertBefore:function(t,w,v){return this.doInsert(t,w,v,"beforeBegin")},insertAfter:function(t,w,v){return this.doInsert(t,w,v,"afterEnd","nextSibling")},insertFirst:function(t,w,v){return this.doInsert(t,w,v,"afterBegin","firstChild")},doInsert:function(x,z,y,A,w){x=Ext.getDom(x);var v;if(this.useDom){v=s(z,null);(w==="firstChild"?x:x.parentNode).insertBefore(v,w?x[w]:x)}else{var t=a(z);v=this.insertHtml(A,x,t)}return y?Ext.get(v,true):v},append:function(w,y,x){w=Ext.getDom(w);var v;if(this.useDom){v=s(y,null);w.appendChild(v)}else{var t=a(y);v=this.insertHtml("beforeEnd",w,t)}return x?Ext.get(v,true):v},overwrite:function(t,w,v){t=Ext.getDom(t);t.innerHTML=a(w);return v?Ext.get(t.firstChild,true):t.firstChild},createTemplate:function(v){var t=a(v);return new Ext.Template(t)}}}();Ext.Template=function(k){var g=arguments;if(Ext.isArray(k)){k=k.join("")}else{if(g.length>1){var h=[];for(var j=0,c=g.length;j<c;j++){if(typeof g[j]=="object"){Ext.apply(this,g[j])}else{h[h.length]=g[j]}}k=h.join("")}}this.html=k;if(this.compiled){this.compile()}};Ext.Template.prototype={applyTemplate:function(c){if(this.compiled){return this.compiled(c)}var a=this.disableFormats!==true;var j=Ext.util.Format,g=this;var h=function(l,p,s,o){if(s&&a){if(s.substr(0,5)=="this."){return g.call(s.substr(5),c[p],c)}else{if(o){var r=/^\s*['"](.*)["']\s*$/;o=o.split(",");for(var q=0,k=o.length;q<k;q++){o[q]=o[q].replace(r,"$1")}o=[c[p]].concat(o)}else{o=[c[p]]}return j[s].apply(j,o)}}else{return c[p]!==undefined?c[p]:""}};return this.html.replace(this.re,h)},set:function(a,c){this.html=a;this.compiled=null;if(c){this.compile()}return this},disableFormats:false,re:/\{([\w-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,compile:function(){var fm=Ext.util.Format;var useF=this.disableFormats!==true;var sep=Ext.isGecko?"+":",";var fn=function(m,name,format,args){if(format&&useF){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"("}else{format='this.call("'+format.substr(5)+'", ';args=", values"}}else{args="";format="(values['"+name+"'] == undefined ? '' : "}return"'"+sep+format+"values['"+name+"']"+args+")"+sep+"'"};var body;if(Ext.isGecko){body="this.compiled = function(values){ return '"+this.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn)+"';};"}else{body=["this.compiled = function(values){ return ['"];body.push(this.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn));body.push("'].join('');};");body=body.join("")}eval(body);return this},call:function(g,c,a){return this[g](c,a)},insertFirst:function(c,a,g){return this.doInsert("afterBegin",c,a,g)},insertBefore:function(c,a,g){return this.doInsert("beforeBegin",c,a,g)},insertAfter:function(c,a,g){return this.doInsert("afterEnd",c,a,g)},append:function(c,a,g){return this.doInsert("beforeEnd",c,a,g)},doInsert:function(g,j,c,a){j=Ext.getDom(j);var h=Ext.DomHelper.insertHtml(g,j,this.applyTemplate(c));return a?Ext.get(h,true):h},overwrite:function(c,a,g){c=Ext.getDom(c);c.innerHTML=this.applyTemplate(a);return g?Ext.get(c.firstChild,true):c.firstChild}};Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.DomHelper.Template=Ext.Template;Ext.Template.from=function(c,a){c=Ext.getDom(c);return new Ext.Template(c.value||c.innerHTML,a||"")};Ext.DomQuery=function(){var cache={},simpleCache={},valueCache={};var nonSpace=/\S/;var trimRe=/^\s+|\s+$/g;var tplRe=/\{(\d+)\}/g;var modeRe=/^(\s?[\/>+~]\s?|\s|$)/;var tagTokenRe=/^(#)?([\w-\*]+)/;var nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/;var opera=Ext.isOpera;function child(p,index){var i=0;var n=p.firstChild;while(n){if(n.nodeType==1){if(++i==index){return n}}n=n.nextSibling}return null}function next(n){while((n=n.nextSibling)&&n.nodeType!=1){}return n}function prev(n){while((n=n.previousSibling)&&n.nodeType!=1){}return n}function children(d){var n=d.firstChild,ni=-1;while(n){var nx=n.nextSibling;if(n.nodeType==3&&!nonSpace.test(n.nodeValue)){d.removeChild(n)}else{n.nodeIndex=++ni}n=nx}return this}function byClassName(c,a,v){if(!v){return c}var r=[],ri=-1,cn;for(var i=0,ci;ci=c[i];i++){if((" "+ci.className+" ").indexOf(v)!=-1){r[++ri]=ci}}return r}function attrValue(n,attr){if(!n.tagName&&typeof n.length!="undefined"){n=n[0]}if(!n){return null}if(attr=="for"){return n.htmlFor}if(attr=="class"||attr=="className"){return n.className}return n.getAttribute(attr)||n[attr]}function getNodes(ns,mode,tagName){var result=[],ri=-1,cs;if(!ns){return result}tagName=tagName||"*";if(typeof ns.getElementsByTagName!="undefined"){ns=[ns]}if(!mode){for(var i=0,ni;ni=ns[i];i++){cs=ni.getElementsByTagName(tagName);for(var j=0,ci;ci=cs[j];j++){result[++ri]=ci}}}else{if(mode=="/"||mode==">"){var utag=tagName.toUpperCase();for(var i=0,ni,cn;ni=ns[i];i++){cn=opera?ni.childNodes:(ni.children||ni.childNodes);for(var j=0,cj;cj=cn[j];j++){if(cj.nodeName==utag||cj.nodeName==tagName||tagName=="*"){result[++ri]=cj}}}}else{if(mode=="+"){var utag=tagName.toUpperCase();for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(n&&(n.nodeName==utag||n.nodeName==tagName||tagName=="*")){result[++ri]=n}}}else{if(mode=="~"){var utag=tagName.toUpperCase();for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)){if(n.nodeName==utag||n.nodeName==tagName||tagName=="*"){result[++ri]=n}}}}}}}return result}function concat(a,b){if(b.slice){return a.concat(b)}for(var i=0,l=b.length;i<l;i++){a[a.length]=b[i]}return a}function byTag(cs,tagName){if(cs.tagName||cs==document){cs=[cs]}if(!tagName){return cs}var r=[],ri=-1;tagName=tagName.toLowerCase();for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType==1&&ci.tagName.toLowerCase()==tagName){r[++ri]=ci}}return r}function byId(cs,attr,id){if(cs.tagName||cs==document){cs=[cs]}if(!id){return cs}var r=[],ri=-1;for(var i=0,ci;ci=cs[i];i++){if(ci&&ci.id==id){r[++ri]=ci;return r}}return r}function byAttribute(cs,attr,value,op,custom){var r=[],ri=-1,st=custom=="{";var f=Ext.DomQuery.operators[op];for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType!=1){continue}var a;if(st){a=Ext.DomQuery.getStyle(ci,attr)}else{if(attr=="class"||attr=="className"){a=ci.className}else{if(attr=="for"){a=ci.htmlFor}else{if(attr=="href"){a=ci.getAttribute("href",2)}else{a=ci.getAttribute(attr)}}}}if((f&&f(a,value))||(!f&&a)){r[++ri]=ci}}return r}function byPseudo(cs,name,value){return Ext.DomQuery.pseudos[name](cs,value)}var isIE=window.ActiveXObject?true:false;eval("var batch = 30803;");var key=30803;function nodupIEXml(cs){var d=++key;cs[0].setAttribute("_nodup",d);var r=[cs[0]];for(var i=1,len=cs.length;i<len;i++){var c=cs[i];if(!c.getAttribute("_nodup")!=d){c.setAttribute("_nodup",d);r[r.length]=c}}for(var i=0,len=cs.length;i<len;i++){cs[i].removeAttribute("_nodup")}return r}function nodup(cs){if(!cs){return[]}var len=cs.length,c,i,r=cs,cj,ri=-1;if(!len||typeof cs.nodeType!="undefined"||len==1){return cs}if(isIE&&typeof cs[0].selectSingleNode!="undefined"){return nodupIEXml(cs)}var d=++key;cs[0]._nodup=d;for(i=1;c=cs[i];i++){if(c._nodup!=d){c._nodup=d}else{r=[];for(var j=0;j<i;j++){r[++ri]=cs[j]}for(j=i+1;cj=cs[j];j++){if(cj._nodup!=d){cj._nodup=d;r[++ri]=cj}}return r}}return r}function quickDiffIEXml(c1,c2){var d=++key;for(var i=0,len=c1.length;i<len;i++){c1[i].setAttribute("_qdiff",d)}var r=[];for(var i=0,len=c2.length;i<len;i++){if(c2[i].getAttribute("_qdiff")!=d){r[r.length]=c2[i]}}for(var i=0,len=c1.length;i<len;i++){c1[i].removeAttribute("_qdiff")}return r}function quickDiff(c1,c2){var len1=c1.length;if(!len1){return c2}if(isIE&&c1[0].selectSingleNode){return quickDiffIEXml(c1,c2)}var d=++key;for(var i=0;i<len1;i++){c1[i]._qdiff=d}var r=[];for(var i=0,len=c2.length;i<len;i++){if(c2[i]._qdiff!=d){r[r.length]=c2[i]}}return r}function quickId(ns,mode,root,id){if(ns==root){var d=root.ownerDocument||root;return d.getElementById(id)}ns=getNodes(ns,mode,"*");return byId(ns,null,id)}return{getStyle:function(el,name){return Ext.fly(el).getStyle(name)},compile:function(path,type){type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"];var q=path,mode,lq;var tk=Ext.DomQuery.matchers;var tklen=tk.length;var mm;var lmode=q.match(modeRe);if(lmode&&lmode[1]){fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";';q=q.replace(lmode[1],"")}while(path.substr(0,1)=="/"){path=path.substr(1)}while(q&&lq!=q){lq=q;var tm=q.match(tagTokenRe);if(type=="select"){if(tm){if(tm[1]=="#"){fn[fn.length]='n = quickId(n, mode, root, "'+tm[2]+'");'}else{fn[fn.length]='n = getNodes(n, mode, "'+tm[2]+'");'}q=q.replace(tm[0],"")}else{if(q.substr(0,1)!="@"){fn[fn.length]='n = getNodes(n, mode, "*");'}}}else{if(tm){if(tm[1]=="#"){fn[fn.length]='n = byId(n, null, "'+tm[2]+'");'}else{fn[fn.length]='n = byTag(n, "'+tm[2]+'");'}q=q.replace(tm[0],"")}}while(!(mm=q.match(modeRe))){var matched=false;for(var j=0;j<tklen;j++){var t=tk[j];var m=q.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(x,i){return m[i]});q=q.replace(m[0],"");matched=true;break}}if(!matched){throw'Error parsing selector, parsing failed at "'+q+'"'}}if(mm[1]){fn[fn.length]='mode="'+mm[1].replace(trimRe,"")+'";';q=q.replace(mm[1],"")}}fn[fn.length]="return nodup(n);\n}";eval(fn.join(""));return f},select:function(path,root,type){if(!root||root==document){root=document}if(typeof root=="string"){root=document.getElementById(root)}var paths=path.split(",");var results=[];for(var i=0,len=paths.length;i<len;i++){var p=paths[i].replace(trimRe,"");if(!cache[p]){cache[p]=Ext.DomQuery.compile(p);if(!cache[p]){throw p+" is not a valid selector"}}var result=cache[p](root);if(result&&result!=document){results=results.concat(result)}}if(paths.length>1){return nodup(results)}return results},selectNode:function(path,root){return Ext.DomQuery.select(path,root)[0]},selectValue:function(path,root,defaultValue){path=path.replace(trimRe,"");if(!valueCache[path]){valueCache[path]=Ext.DomQuery.compile(path,"select")}var n=valueCache[path](root);n=n[0]?n[0]:n;var v=(n&&n.firstChild?n.firstChild.nodeValue:null);return((v===null||v===undefined||v==="")?defaultValue:v)},selectNumber:function(path,root,defaultValue){var v=Ext.DomQuery.selectValue(path,root,defaultValue||0);return parseFloat(v)},is:function(el,ss){if(typeof el=="string"){el=document.getElementById(el)}var isArray=Ext.isArray(el);var result=Ext.DomQuery.filter(isArray?el:[el],ss);return isArray?(result.length==el.length):(result.length>0)},filter:function(els,ss,nonMatches){ss=ss.replace(trimRe,"");if(!simpleCache[ss]){simpleCache[ss]=Ext.DomQuery.compile(ss,"simple")}var result=simpleCache[ss](els);return nonMatches?quickDiff(result,els):result},matchers:[{re:/^\.([\w-]+)/,select:'n = byClassName(n, null, " {1} ");'},{re:/^\:([\w-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w-]+)/,select:'n = byId(n, null, "{1}");'},{re:/^@([\w-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(a,v){return a==v},"!=":function(a,v){return a!=v},"^=":function(a,v){return a&&a.substr(0,v.length)==v},"$=":function(a,v){return a&&a.substr(a.length-v.length)==v},"*=":function(a,v){return a&&a.indexOf(v)!==-1},"%=":function(a,v){return(a%v)==0},"|=":function(a,v){return a&&(a==v||a.substr(0,v.length+1)==v+"-")},"~=":function(a,v){return a&&(" "+a+" ").indexOf(" "+v+" ")!=-1}},pseudos:{"first-child":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.previousSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},"last-child":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},"nth-child":function(c,a){var r=[],ri=-1;var m=nthRe.exec(a=="even"&&"2n"||a=="odd"&&"2n+1"||!nthRe2.test(a)&&"n+"+a||a);var f=(m[1]||1)-0,l=m[2]-0;for(var i=0,n;n=c[i];i++){var pn=n.parentNode;if(batch!=pn._batch){var j=0;for(var cn=pn.firstChild;cn;cn=cn.nextSibling){if(cn.nodeType==1){cn.nodeIndex=++j}}pn._batch=batch}if(f==1){if(l==0||n.nodeIndex==l){r[++ri]=n}}else{if((n.nodeIndex+l)%f==0){r[++ri]=n}}}return r},"only-child":function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(!prev(ci)&&!next(ci)){r[++ri]=ci}}return r},empty:function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var cns=ci.childNodes,j=0,cn,empty=true;while(cn=cns[j]){++j;if(cn.nodeType==1||cn.nodeType==3){empty=false;break}}if(empty){r[++ri]=ci}}return r},contains:function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if((ci.textContent||ci.innerText||"").indexOf(v)!=-1){r[++ri]=ci}}return r},nodeValue:function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.firstChild&&ci.firstChild.nodeValue==v){r[++ri]=ci}}return r},checked:function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.checked==true){r[++ri]=ci}}return r},not:function(c,ss){return Ext.DomQuery.filter(c,ss,true)},any:function(c,selectors){var ss=selectors.split("|");var r=[],ri=-1,s;for(var i=0,ci;ci=c[i];i++){for(var j=0;s=ss[j];j++){if(Ext.DomQuery.is(ci,s)){r[++ri]=ci;break}}}return r},odd:function(c){return this["nth-child"](c,"odd")},even:function(c){return this["nth-child"](c,"even")},nth:function(c,a){return c[a-1]||[]},first:function(c){return c[0]||[]},last:function(c){return c[c.length-1]||[]},has:function(c,ss){var s=Ext.DomQuery.select;var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(s(ss,ci).length>0){r[++ri]=ci}}return r},next:function(c,ss){var is=Ext.DomQuery.is;var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=next(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r},prev:function(c,ss){var is=Ext.DomQuery.is;var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=prev(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r}}}}();Ext.query=Ext.DomQuery.select;Ext.util.Observable=function(){if(this.listeners){this.on(this.listeners);delete this.listeners}};Ext.util.Observable.prototype={fireEvent:function(){if(this.eventsSuspended!==true){var a=this.events[arguments[0].toLowerCase()];if(typeof a=="object"){return a.fire.apply(a,Array.prototype.slice.call(arguments,1))}}return true},filterOptRe:/^(?:scope|delay|buffer|single)$/,addListener:function(a,g,c,k){if(typeof a=="object"){k=a;for(var j in k){if(this.filterOptRe.test(j)){continue}if(typeof k[j]=="function"){this.addListener(j,k[j],k.scope,k)}else{this.addListener(j,k[j].fn,k[j].scope,k[j])}}return}k=(!k||typeof k=="boolean")?{}:k;a=a.toLowerCase();var h=this.events[a]||true;if(typeof h=="boolean"){h=new Ext.util.Event(this,a);this.events[a]=h}h.addListener(g,c,k)},removeListener:function(a,g,c){var h=this.events[a.toLowerCase()];if(typeof h=="object"){h.removeListener(g,c)}},purgeListeners:function(){for(var a in this.events){if(typeof this.events[a]=="object"){this.events[a].clearListeners()}}},relayEvents:function(k,h){var j=function(l){return function(){return this.fireEvent.apply(this,Ext.combine(l,Array.prototype.slice.call(arguments,0)))}};for(var g=0,a=h.length;g<a;g++){var c=h[g];if(!this.events[c]){this.events[c]=true}k.on(c,j(c),this)}},addEvents:function(j){if(!this.events){this.events={}}if(typeof j=="string"){for(var h=0,c=arguments,g;g=c[h];h++){if(!this.events[c[h]]){this.events[c[h]]=true}}}else{Ext.applyIf(this.events,j)}},hasListener:function(a){var c=this.events[a];return typeof c=="object"&&c.listeners.length>0},suspendEvents:function(){this.eventsSuspended=true},resumeEvents:function(){this.eventsSuspended=false},getMethodEvent:function(l){if(!this.methodEvents){this.methodEvents={}}var k=this.methodEvents[l];if(!k){k={};this.methodEvents[l]=k;k.originalFn=this[l];k.methodName=l;k.before=[];k.after=[];var g,c,h;var j=this;var a=function(p,o,m){if((c=p.apply(o||j,m))!==undefined){if(typeof c==="object"){if(c.returnValue!==undefined){g=c.returnValue}else{g=c}if(c.cancel===true){h=true}}else{if(c===false){h=true}else{g=c}}}};this[l]=function(){g=c=undefined;h=false;var o=Array.prototype.slice.call(arguments,0);for(var p=0,m=k.before.length;p<m;p++){a(k.before[p].fn,k.before[p].scope,o);if(h){return g}}if((c=k.originalFn.apply(j,o))!==undefined){g=c}for(var p=0,m=k.after.length;p<m;p++){a(k.after[p].fn,k.after[p].scope,o);if(h){return g}}return g}}return k},beforeMethod:function(h,c,a){var g=this.getMethodEvent(h);g.before.push({fn:c,scope:a})},afterMethod:function(h,c,a){var g=this.getMethodEvent(h);g.after.push({fn:c,scope:a})},removeMethodListener:function(k,h,g){var j=this.getMethodEvent(k);for(var c=0,a=j.before.length;c<a;c++){if(j.before[c].fn==h&&j.before[c].scope==g){j.before.splice(c,1);return}}for(var c=0,a=j.after.length;c<a;c++){if(j.after[c].fn==h&&j.after[c].scope==g){j.after.splice(c,1);return}}}};Ext.util.Observable.prototype.on=Ext.util.Observable.prototype.addListener;Ext.util.Observable.prototype.un=Ext.util.Observable.prototype.removeListener;Ext.util.Observable.capture=function(g,c,a){g.fireEvent=g.fireEvent.createInterceptor(c,a)};Ext.util.Observable.releaseCapture=function(a){a.fireEvent=Ext.util.Observable.prototype.fireEvent};(function(){var c=function(l,m,k){var j=new Ext.util.DelayedTask();return function(){j.delay(m.buffer,l,k,Array.prototype.slice.call(arguments,0))}};var g=function(l,m,k,j){return function(){m.removeListener(k,j);return l.apply(j,arguments)}};var a=function(k,l,j){return function(){var h=Array.prototype.slice.call(arguments,0);setTimeout(function(){k.apply(j,h)},l.delay||10)}};Ext.util.Event=function(j,h){this.name=h;this.obj=j;this.listeners=[]};Ext.util.Event.prototype={addListener:function(m,k,j){k=k||this.obj;if(!this.isListening(m,k)){var h=this.createListener(m,k,j);if(!this.firing){this.listeners.push(h)}else{this.listeners=this.listeners.slice(0);this.listeners.push(h)}}},createListener:function(p,m,q){q=q||{};m=m||this.obj;var j={fn:p,scope:m,options:q};var k=p;if(q.delay){k=a(k,q,m)}if(q.single){k=g(k,this,p,m)}if(q.buffer){k=c(k,q,m)}j.fireFn=k;return j},findListener:function(p,o){o=o||this.obj;var k=this.listeners;for(var m=0,h=k.length;m<h;m++){var j=k[m];if(j.fn==p&&j.scope==o){return m}}return -1},isListening:function(j,h){return this.findListener(j,h)!=-1},removeListener:function(k,j){var h;if((h=this.findListener(k,j))!=-1){if(!this.firing){this.listeners.splice(h,1)}else{this.listeners=this.listeners.slice(0);this.listeners.splice(h,1)}return true}return false},clearListeners:function(){this.listeners=[]},fire:function(){var k=this.listeners,p,h=k.length;if(h>0){this.firing=true;var m=Array.prototype.slice.call(arguments,0);for(var o=0;o<h;o++){var j=k[o];if(j.fireFn.apply(j.scope||this.obj||window,arguments)===false){this.firing=false;return false}}this.firing=false}return true}}})();Ext.EventManager=function(){var H,w,r=false;var s,F,l,y;var v=Ext.lib.Event;var x=Ext.lib.Dom;var a="Ext";var o={};var t=function(L,E,K,J,I){var N=Ext.id(L);if(!o[N]){o[N]={}}var M=o[N];if(!M[E]){M[E]=[]}var D=M[E];D.push({id:N,ename:E,fn:K,wrap:J,scope:I});v.on(L,E,J);if(E=="mousewheel"&&L.addEventListener){L.addEventListener("DOMMouseScroll",J,false);v.on(window,"unload",function(){L.removeEventListener("DOMMouseScroll",J,false)})}if(E=="mousedown"&&L==document){Ext.EventManager.stoppedMouseDownEvent.addListener(J)}};var m=function(I,K,O,Q){I=Ext.getDom(I);var D=Ext.id(I),P=o[D],E;if(P){var M=P[K],J;if(M){for(var L=0,N=M.length;L<N;L++){J=M[L];if(J.fn==O&&(!Q||J.scope==Q)){E=J.wrap;v.un(I,K,E);M.splice(L,1);break}}}}if(K=="mousewheel"&&I.addEventListener&&E){I.removeEventListener("DOMMouseScroll",E,false)}if(K=="mousedown"&&I==document&&E){Ext.EventManager.stoppedMouseDownEvent.removeListener(E)}};var h=function(K){K=Ext.getDom(K);var M=Ext.id(K),L=o[M],E;if(L){for(var J in L){if(L.hasOwnProperty(J)){E=L[J];for(var I=0,D=E.length;I<D;I++){v.un(K,J,E[I].wrap);E[I]=null}}L[J]=null}delete o[M]}};var g=function(){if(!r){r=true;Ext.isReady=true;if(w){clearInterval(w)}if(Ext.isGecko||Ext.isOpera){document.removeEventListener("DOMContentLoaded",g,false)}if(Ext.isIE){var D=document.getElementById("ie-deferred-loader");if(D){D.onreadystatechange=null;D.parentNode.removeChild(D)}}if(H){H.fire();H.clearListeners()}}};var c=function(){H=new Ext.util.Event();if(Ext.isGecko||Ext.isOpera){document.addEventListener("DOMContentLoaded",g,false)}else{if(Ext.isIE){document.write('<script id="ie-deferred-loader" defer="defer" src="//:"><\/script>');var D=document.getElementById("ie-deferred-loader");D.onreadystatechange=function(){if(this.readyState=="complete"){g()}}}else{if(Ext.isWebKit){w=setInterval(function(){var E=document.readyState;if(E=="complete"){g()}},10)}}}v.on(window,"load",g)};var B=function(E,I){var D=new Ext.util.DelayedTask(E);return function(J){J=new Ext.EventObjectImpl(J);D.delay(I.buffer,E,null,[J])}};var z=function(K,J,D,I,E){return function(L){Ext.EventManager.removeListener(J,D,I,E);K(L)}};var k=function(D,E){return function(I){I=new Ext.EventObjectImpl(I);setTimeout(function(){D(I)},E.delay||10)}};var q=function(I,E,D,M,L){var N=(!D||typeof D=="boolean")?{}:D;M=M||N.fn;L=L||N.scope;var K=Ext.getDom(I);if(!K){throw'Error listening for "'+E+'". Element "'+I+"\" doesn't exist."}var J=function(P){if(!window[a]){return}P=Ext.EventObject.setEvent(P);var O;if(N.delegate){O=P.getTarget(N.delegate,K);if(!O){return}}else{O=P.target}if(N.stopEvent===true){P.stopEvent()}if(N.preventDefault===true){P.preventDefault()}if(N.stopPropagation===true){P.stopPropagation()}if(N.normalized===false){P=P.browserEvent}M.call(L||K,P,O,N)};if(N.delay){J=k(J,N)}if(N.single){J=z(J,K,E,M,L)}if(N.buffer){J=B(J,N)}t(K,E,M,J,L);return J};var p=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,G=0,j=0;var A={addListener:function(I,D,K,J,E){if(typeof D=="object"){var M=D;for(var L in M){if(p.test(L)){continue}if(typeof M[L]=="function"){q(I,L,M,M[L],M.scope)}else{q(I,L,M[L])}}return}return q(I,D,E,K,J)},removeListener:function(E,D,J,I){return m(E,D,J,I)},removeAll:function(D){return h(D)},onDocumentReady:function(I,E,D){if(r){H.addListener(I,E,D);H.fire();H.clearListeners();return}if(!H){c()}D=D||{};if(!D.delay){D.delay=1}H.addListener(I,E,D)},doResizeEvent:function(){var E=x.getViewHeight(),D=x.getViewWidth();if(j!=E||G!=D){s.fire(G=D,j=E)}},onWindowResize:function(I,E,D){if(!s){s=new Ext.util.Event();F=new Ext.util.DelayedTask(this.doResizeEvent);v.on(window,"resize",this.fireWindowResize,this)}s.addListener(I,E,D)},fireWindowResize:function(){if(s){if((Ext.isIE||Ext.isAir)&&F){F.delay(50)}else{s.fire(x.getViewWidth(),x.getViewHeight())}}},onTextResize:function(J,I,D){if(!l){l=new Ext.util.Event();var E=new Ext.Element(document.createElement("div"));E.dom.className="x-text-resize";E.dom.innerHTML="X";E.appendTo(document.body);y=E.dom.offsetHeight;setInterval(function(){if(E.dom.offsetHeight!=y){l.fire(y,y=E.dom.offsetHeight)}},this.textResizeInterval)}l.addListener(J,I,D)},removeResizeListener:function(E,D){if(s){s.removeListener(E,D)}},fireResize:function(){if(s){s.fire(x.getViewWidth(),x.getViewHeight())}},ieDeferSrc:false,textResizeInterval:50};A.on=A.addListener;A.un=A.removeListener;A.stoppedMouseDownEvent=new Ext.util.Event();return A}();Ext.onReady=Ext.EventManager.onDocumentReady;(function(){var a=function(){var g=document.body||document.getElementsByTagName("body")[0];if(!g){return false}var c=[" ",Ext.isIE?"ext-ie "+(Ext.isIE6?"ext-ie6":(Ext.isIE7?"ext-ie7":"ext-ie8")):Ext.isGecko?"ext-gecko "+(Ext.isGecko2?"ext-gecko2":"ext-gecko3"):Ext.isOpera?"ext-opera":Ext.isSafari?"ext-safari":Ext.isChrome?"ext-chrome":""];if(Ext.isMac){c.push("ext-mac")}if(Ext.isLinux){c.push("ext-linux")}if(Ext.isStrict||Ext.isBorderBox){var h=g.parentNode;if(h){h.className+=Ext.isStrict?" ext-strict":" ext-border-box"}}g.className+=c.join(" ");return true};if(!a()){Ext.onReady(a)}})();Ext.EventObject=function(){var c=Ext.lib.Event;var a={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35};var g=Ext.isIE?{1:0,4:1,2:2}:(Ext.isWebKit?{1:0,2:1,3:2}:{0:0,1:1,2:2});Ext.EventObjectImpl=function(h){if(h){this.setEvent(h.browserEvent||h)}};Ext.EventObjectImpl.prototype={browserEvent:null,button:-1,shiftKey:false,ctrlKey:false,altKey:false,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGEUP:33,PAGE_DOWN:34,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,setEvent:function(h){if(h==this||(h&&h.browserEvent)){return h}this.browserEvent=h;if(h){this.button=h.button?g[h.button]:(h.which?h.which-1:-1);if(h.type=="click"&&this.button==-1){this.button=0}this.type=h.type;this.shiftKey=h.shiftKey;this.ctrlKey=h.ctrlKey||h.metaKey;this.altKey=h.altKey;this.keyCode=h.keyCode;this.charCode=h.charCode;this.target=c.getTarget(h);this.xy=c.getXY(h)}else{this.button=-1;this.shiftKey=false;this.ctrlKey=false;this.altKey=false;this.keyCode=0;this.charCode=0;this.target=null;this.xy=[0,0]}return this},stopEvent:function(){if(this.browserEvent){if(this.browserEvent.type=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.fire(this)}c.stopEvent(this.browserEvent)}},preventDefault:function(){if(this.browserEvent){c.preventDefault(this.browserEvent)}},isNavKeyPress:function(){var h=this.keyCode;h=Ext.isSafari?(a[h]||h):h;return(h>=33&&h<=40)||h==this.RETURN||h==this.TAB||h==this.ESC},isSpecialKey:function(){var h=this.keyCode;h=Ext.isSafari?(a[h]||h):h;return(this.type=="keypress"&&this.ctrlKey)||this.isNavKeyPress()||(h==this.BACKSPACE)||(h>=16&&h<=20)||(h>=44&&h<=45)},stopPropagation:function(){if(this.browserEvent){if(this.browserEvent.type=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.fire(this)}c.stopPropagation(this.browserEvent)}},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){var h=this.keyCode||this.charCode;return Ext.isSafari?(a[h]||h):h},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getTime:function(){if(this.browserEvent){return c.getTime(this.browserEvent)}return null},getXY:function(){return this.xy},getTarget:function(j,k,h){return j?Ext.fly(this.target).findParent(j,k,h):(h?Ext.get(this.target):this.target)},getRelatedTarget:function(){if(this.browserEvent){return c.getRelatedTarget(this.browserEvent)}return null},getWheelDelta:function(){var h=this.browserEvent;var j=0;if(h.wheelDelta){j=h.wheelDelta/120}else{if(h.detail){j=-h.detail/3}}return j},hasModifier:function(){return((this.ctrlKey||this.altKey)||this.shiftKey)?true:false},within:function(k,l,h){var j=this[l?"getRelatedTarget":"getTarget"]();return j&&((h?(j===Ext.getDom(k)):false)||Ext.fly(k).contains(j))},getPoint:function(){return new Ext.lib.Point(this.xy[0],this.xy[1])}};return new Ext.EventObjectImpl()}();(function(){var D=Ext.lib.Dom;var E=Ext.lib.Event;var A=Ext.lib.Anim;var propCache={};var camelRe=/(-[a-z])/gi;var camelFn=function(m,a){return a.charAt(1).toUpperCase()};var view=document.defaultView;Ext.Element=function(element,forceNew){var dom=typeof element=="string"?document.getElementById(element):element;if(!dom){return null}var id=dom.id;if(forceNew!==true&&id&&Ext.Element.cache[id]){return Ext.Element.cache[id]}this.dom=dom;this.id=id||Ext.id(dom)};var El=Ext.Element;El.prototype={originalDisplay:"",visibilityMode:1,defaultUnit:"px",setVisibilityMode:function(visMode){this.visibilityMode=visMode;return this},enableDisplayMode:function(display){this.setVisibilityMode(El.DISPLAY);if(typeof display!="undefined"){this.originalDisplay=display}return this},findParent:function(simpleSelector,maxDepth,returnEl){var p=this.dom,b=document.body,depth=0,dq=Ext.DomQuery,stopEl;maxDepth=maxDepth||50;if(typeof maxDepth!="number"){stopEl=Ext.getDom(maxDepth);maxDepth=Number.MAX_VALUE}while(p&&p.nodeType==1&&depth<maxDepth&&p!=b&&p!=stopEl){if(dq.is(p,simpleSelector)){return returnEl?Ext.get(p):p}depth++;p=p.parentNode}return null},findParentNode:function(simpleSelector,maxDepth,returnEl){var p=Ext.fly(this.dom.parentNode,"_internal");return p?p.findParent(simpleSelector,maxDepth,returnEl):null},up:function(simpleSelector,maxDepth){return this.findParentNode(simpleSelector,maxDepth,true)},is:function(simpleSelector){return Ext.DomQuery.is(this.dom,simpleSelector)},animate:function(args,duration,onComplete,easing,animType){this.anim(args,{duration:duration,callback:onComplete,easing:easing},animType);return this},anim:function(args,opt,animType,defaultDur,defaultEase,cb){animType=animType||"run";opt=opt||{};var anim=Ext.lib.Anim[animType](this.dom,args,(opt.duration||defaultDur)||0.35,(opt.easing||defaultEase)||"easeOut",function(){Ext.callback(cb,this);Ext.callback(opt.callback,opt.scope||this,[this,opt])},this);opt.anim=anim;return anim},preanim:function(a,i){return !a[i]?false:(typeof a[i]=="object"?a[i]:{duration:a[i+1],callback:a[i+2],easing:a[i+3]})},clean:function(forceReclean){if(this.isCleaned&&forceReclean!==true){return this}var ns=/\S/;var d=this.dom,n=d.firstChild,ni=-1;while(n){var nx=n.nextSibling;if(n.nodeType==3&&!ns.test(n.nodeValue)){d.removeChild(n)}else{n.nodeIndex=++ni}n=nx}this.isCleaned=true;return this},scrollIntoView:function(container,hscroll){var c=Ext.getDom(container)||Ext.getBody().dom;var el=this.dom;var o=this.getOffsetsTo(c),l=o[0]+c.scrollLeft,t=o[1]+c.scrollTop,b=t+el.offsetHeight,r=l+el.offsetWidth;var ch=c.clientHeight;var ct=parseInt(c.scrollTop,10);var cl=parseInt(c.scrollLeft,10);var cb=ct+ch;var cr=cl+c.clientWidth;if(el.offsetHeight>ch||t<ct){c.scrollTop=t}else{if(b>cb){c.scrollTop=b-ch}}c.scrollTop=c.scrollTop;if(hscroll!==false){if(el.offsetWidth>c.clientWidth||l<cl){c.scrollLeft=l}else{if(r>cr){c.scrollLeft=r-c.clientWidth}}c.scrollLeft=c.scrollLeft}return this},scrollChildIntoView:function(child,hscroll){Ext.fly(child,"_scrollChildIntoView").scrollIntoView(this,hscroll)},autoHeight:function(animate,duration,onComplete,easing){var oldHeight=this.getHeight();this.clip();this.setHeight(1);setTimeout(function(){var height=parseInt(this.dom.scrollHeight,10);if(!animate){this.setHeight(height);this.unclip();if(typeof onComplete=="function"){onComplete()}}else{this.setHeight(oldHeight);this.setHeight(height,animate,duration,function(){this.unclip();if(typeof onComplete=="function"){onComplete()}}.createDelegate(this),easing)}}.createDelegate(this),0);return this},contains:function(el){if(!el){return false}return D.isAncestor(this.dom,el.dom?el.dom:el)},isVisible:function(deep){var vis=!(this.getStyle("visibility")=="hidden"||this.getStyle("display")=="none");if(deep!==true||!vis){return vis}var p=this.dom.parentNode;while(p&&p.tagName.toLowerCase()!="body"){if(!Ext.fly(p,"_isVisible").isVisible()){return false}p=p.parentNode}return true},select:function(selector,unique){return El.select(selector,unique,this.dom)},query:function(selector){return Ext.DomQuery.select(selector,this.dom)},child:function(selector,returnDom){var n=Ext.DomQuery.selectNode(selector,this.dom);return returnDom?n:Ext.get(n)},down:function(selector,returnDom){var n=Ext.DomQuery.selectNode(" > "+selector,this.dom);return returnDom?n:Ext.get(n)},initDD:function(group,config,overrides){var dd=new Ext.dd.DD(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},initDDProxy:function(group,config,overrides){var dd=new Ext.dd.DDProxy(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},initDDTarget:function(group,config,overrides){var dd=new Ext.dd.DDTarget(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},setVisible:function(visible,animate){if(!animate||!A){if(this.visibilityMode==El.DISPLAY){this.setDisplayed(visible)}else{this.fixDisplay();this.dom.style.visibility=visible?"visible":"hidden"}}else{var dom=this.dom;var visMode=this.visibilityMode;if(visible){this.setOpacity(0.01);this.setVisible(true)}this.anim({opacity:{to:(visible?1:0)}},this.preanim(arguments,1),null,0.35,"easeIn",function(){if(!visible){if(visMode==El.DISPLAY){dom.style.display="none"}else{dom.style.visibility="hidden"}Ext.get(dom).setOpacity(1)}})}return this},isDisplayed:function(){return this.getStyle("display")!="none"},toggle:function(animate){this.setVisible(!this.isVisible(),this.preanim(arguments,0));return this},setDisplayed:function(value){if(typeof value=="boolean"){value=value?this.originalDisplay:"none"}this.setStyle("display",value);return this},focus:function(){try{this.dom.focus()}catch(e){}return this},blur:function(){try{this.dom.blur()}catch(e){}return this},addClass:function(className){if(Ext.isArray(className)){for(var i=0,len=className.length;i<len;i++){this.addClass(className[i])}}else{if(className&&!this.hasClass(className)){this.dom.className=this.dom.className+" "+className}}return this},radioClass:function(className){var siblings=this.dom.parentNode.childNodes;for(var i=0;i<siblings.length;i++){var s=siblings[i];if(s.nodeType==1){Ext.get(s).removeClass(className)}}this.addClass(className);return this},removeClass:function(className){if(!className||!this.dom.className){return this}if(Ext.isArray(className)){for(var i=0,len=className.length;i<len;i++){this.removeClass(className[i])}}else{if(this.hasClass(className)){var re=this.classReCache[className];if(!re){re=new RegExp("(?:^|\\s+)"+className+"(?:\\s+|$)","g");this.classReCache[className]=re}this.dom.className=this.dom.className.replace(re," ")}}return this},classReCache:{},toggleClass:function(className){if(this.hasClass(className)){this.removeClass(className)}else{this.addClass(className)}return this},hasClass:function(className){return className&&(" "+this.dom.className+" ").indexOf(" "+className+" ")!=-1},replaceClass:function(oldClassName,newClassName){this.removeClass(oldClassName);this.addClass(newClassName);return this},getStyles:function(){var a=arguments,len=a.length,r={};for(var i=0;i<len;i++){r[a[i]]=this.getStyle(a[i])}return r},getStyle:function(){return view&&view.getComputedStyle?function(prop){var el=this.dom,v,cs,camel;if(prop=="float"){prop="cssFloat"}if(v=el.style[prop]){return v}if(cs=view.getComputedStyle(el,"")){if(!(camel=propCache[prop])){camel=propCache[prop]=prop.replace(camelRe,camelFn)}return cs[camel]}return null}:function(prop){var el=this.dom,v,cs,camel;if(prop=="opacity"){if(typeof el.style.filter=="string"){var m=el.style.filter.match(/alpha\(opacity=(.*)\)/i);if(m){var fv=parseFloat(m[1]);if(!isNaN(fv)){return fv?fv/100:0}}}return 1}else{if(prop=="float"){prop="styleFloat"}}if(!(camel=propCache[prop])){camel=propCache[prop]=prop.replace(camelRe,camelFn)}if(v=el.style[camel]){return v}if(cs=el.currentStyle){return cs[camel]}return null}}(),setStyle:function(prop,value){if(typeof prop=="string"){var camel;if(!(camel=propCache[prop])){camel=propCache[prop]=prop.replace(camelRe,camelFn)}if(camel=="opacity"){this.setOpacity(value)}else{this.dom.style[camel]=value}}else{for(var style in prop){if(typeof prop[style]!="function"){this.setStyle(style,prop[style])}}}return this},applyStyles:function(style){Ext.DomHelper.applyStyles(this.dom,style);return this},getX:function(){return D.getX(this.dom)},getY:function(){return D.getY(this.dom)},getXY:function(){return D.getXY(this.dom)},getOffsetsTo:function(el){var o=this.getXY();var e=Ext.fly(el,"_internal").getXY();return[o[0]-e[0],o[1]-e[1]]},setX:function(x,animate){if(!animate||!A){D.setX(this.dom,x)}else{this.setXY([x,this.getY()],this.preanim(arguments,1))}return this},setY:function(y,animate){if(!animate||!A){D.setY(this.dom,y)}else{this.setXY([this.getX(),y],this.preanim(arguments,1))}return this},setLeft:function(left){this.setStyle("left",this.addUnits(left));return this},setTop:function(top){this.setStyle("top",this.addUnits(top));return this},setRight:function(right){this.setStyle("right",this.addUnits(right));return this},setBottom:function(bottom){this.setStyle("bottom",this.addUnits(bottom));return this},setXY:function(pos,animate){if(!animate||!A){D.setXY(this.dom,pos)}else{this.anim({points:{to:pos}},this.preanim(arguments,1),"motion")}return this},setLocation:function(x,y,animate){this.setXY([x,y],this.preanim(arguments,2));return this},moveTo:function(x,y,animate){this.setXY([x,y],this.preanim(arguments,2));return this},getRegion:function(){return D.getRegion(this.dom)},getHeight:function(contentHeight){var h=Math.max(this.dom.offsetHeight,this.dom.clientHeight)||0;h=contentHeight!==true?h:h-this.getBorderWidth("tb")-this.getPadding("tb");return h<0?0:h},getWidth:function(contentWidth){var w=Math.max(this.dom.offsetWidth,this.dom.clientWidth)||0;w=contentWidth!==true?w:w-this.getBorderWidth("lr")-this.getPadding("lr");return w<0?0:w},getComputedHeight:function(){var h=Math.max(this.dom.offsetHeight,this.dom.clientHeight);if(!h){h=parseInt(this.getStyle("height"),10)||0;if(!this.isBorderBox()){h+=this.getFrameWidth("tb")}}return h},getComputedWidth:function(){var w=Math.max(this.dom.offsetWidth,this.dom.clientWidth);if(!w){w=parseInt(this.getStyle("width"),10)||0;if(!this.isBorderBox()){w+=this.getFrameWidth("lr")}}return w},getSize:function(contentSize){return{width:this.getWidth(contentSize),height:this.getHeight(contentSize)}},getStyleSize:function(){var w,h,d=this.dom,s=d.style;if(s.width&&s.width!="auto"){w=parseInt(s.width,10);if(Ext.isBorderBox){w-=this.getFrameWidth("lr")}}if(s.height&&s.height!="auto"){h=parseInt(s.height,10);if(Ext.isBorderBox){h-=this.getFrameWidth("tb")}}return{width:w||this.getWidth(true),height:h||this.getHeight(true)}},getViewSize:function(){var d=this.dom,doc=document,aw=0,ah=0;if(d==doc||d==doc.body){return{width:D.getViewWidth(),height:D.getViewHeight()}}else{return{width:d.clientWidth,height:d.clientHeight}}},getValue:function(asNumber){return asNumber?parseInt(this.dom.value,10):this.dom.value},adjustWidth:function(width){if(typeof width=="number"){if(this.autoBoxAdjust&&!this.isBorderBox()){width-=(this.getBorderWidth("lr")+this.getPadding("lr"))}if(width<0){width=0}}return width},adjustHeight:function(height){if(typeof height=="number"){if(this.autoBoxAdjust&&!this.isBorderBox()){height-=(this.getBorderWidth("tb")+this.getPadding("tb"))}if(height<0){height=0}}return height},setWidth:function(width,animate){width=this.adjustWidth(width);if(!animate||!A){this.dom.style.width=this.addUnits(width)}else{this.anim({width:{to:width}},this.preanim(arguments,1))}return this},setHeight:function(height,animate){height=this.adjustHeight(height);if(!animate||!A){this.dom.style.height=this.addUnits(height)}else{this.anim({height:{to:height}},this.preanim(arguments,1))}return this},setSize:function(width,height,animate){if(typeof width=="object"){height=width.height;width=width.width}width=this.adjustWidth(width);height=this.adjustHeight(height);if(!animate||!A){this.dom.style.width=this.addUnits(width);this.dom.style.height=this.addUnits(height)}else{this.anim({width:{to:width},height:{to:height}},this.preanim(arguments,2))}return this},setBounds:function(x,y,width,height,animate){if(!animate||!A){this.setSize(width,height);this.setLocation(x,y)}else{width=this.adjustWidth(width);height=this.adjustHeight(height);this.anim({points:{to:[x,y]},width:{to:width},height:{to:height}},this.preanim(arguments,4),"motion")}return this},setRegion:function(region,animate){this.setBounds(region.left,region.top,region.right-region.left,region.bottom-region.top,this.preanim(arguments,1));return this},addListener:function(eventName,fn,scope,options){Ext.EventManager.on(this.dom,eventName,fn,scope||this,options)},removeListener:function(eventName,fn,scope){Ext.EventManager.removeListener(this.dom,eventName,fn,scope||this);return this},removeAllListeners:function(){Ext.EventManager.removeAll(this.dom);return this},relayEvent:function(eventName,observable){this.on(eventName,function(e){observable.fireEvent(eventName,e)})},setOpacity:function(opacity,animate){if(!animate||!A){var s=this.dom.style;if(Ext.isIE){s.zoom=1;s.filter=(s.filter||"").replace(/alpha\([^\)]*\)/gi,"")+(opacity==1?"":" alpha(opacity="+opacity*100+")")}else{s.opacity=opacity}}else{this.anim({opacity:{to:opacity}},this.preanim(arguments,1),null,0.35,"easeIn")}return this},getLeft:function(local){if(!local){return this.getX()}else{return parseInt(this.getStyle("left"),10)||0}},getRight:function(local){if(!local){return this.getX()+this.getWidth()}else{return(this.getLeft(true)+this.getWidth())||0}},getTop:function(local){if(!local){return this.getY()}else{return parseInt(this.getStyle("top"),10)||0}},getBottom:function(local){if(!local){return this.getY()+this.getHeight()}else{return(this.getTop(true)+this.getHeight())||0}},position:function(pos,zIndex,x,y){if(!pos){if(this.getStyle("position")=="static"){this.setStyle("position","relative")}}else{this.setStyle("position",pos)}if(zIndex){this.setStyle("z-index",zIndex)}if(x!==undefined&&y!==undefined){this.setXY([x,y])}else{if(x!==undefined){this.setX(x)}else{if(y!==undefined){this.setY(y)}}}},clearPositioning:function(value){value=value||"";this.setStyle({left:value,right:value,top:value,bottom:value,"z-index":"",position:"static"});return this},getPositioning:function(){var l=this.getStyle("left");var t=this.getStyle("top");return{position:this.getStyle("position"),left:l,right:l?"":this.getStyle("right"),top:t,bottom:t?"":this.getStyle("bottom"),"z-index":this.getStyle("z-index")}},getBorderWidth:function(side){return this.addStyles(side,El.borders)},getPadding:function(side){return this.addStyles(side,El.paddings)},setPositioning:function(pc){this.applyStyles(pc);if(pc.right=="auto"){this.dom.style.right=""}if(pc.bottom=="auto"){this.dom.style.bottom=""}return this},fixDisplay:function(){if(this.getStyle("display")=="none"){this.setStyle("visibility","hidden");this.setStyle("display",this.originalDisplay);if(this.getStyle("display")=="none"){this.setStyle("display","block")}}},setOverflow:function(v){if(v=="auto"&&Ext.isMac&&Ext.isGecko2){this.dom.style.overflow="hidden";(function(){this.dom.style.overflow="auto"}).defer(1,this)}else{this.dom.style.overflow=v}},setLeftTop:function(left,top){this.dom.style.left=this.addUnits(left);this.dom.style.top=this.addUnits(top);return this},move:function(direction,distance,animate){var xy=this.getXY();direction=direction.toLowerCase();switch(direction){case"l":case"left":this.moveTo(xy[0]-distance,xy[1],this.preanim(arguments,2));break;case"r":case"right":this.moveTo(xy[0]+distance,xy[1],this.preanim(arguments,2));break;case"t":case"top":case"up":this.moveTo(xy[0],xy[1]-distance,this.preanim(arguments,2));break;case"b":case"bottom":case"down":this.moveTo(xy[0],xy[1]+distance,this.preanim(arguments,2));break}return this},clip:function(){if(!this.isClipped){this.isClipped=true;this.originalClip={o:this.getStyle("overflow"),x:this.getStyle("overflow-x"),y:this.getStyle("overflow-y")};this.setStyle("overflow","hidden");this.setStyle("overflow-x","hidden");this.setStyle("overflow-y","hidden")}return this},unclip:function(){if(this.isClipped){this.isClipped=false;var o=this.originalClip;if(o.o){this.setStyle("overflow",o.o)}if(o.x){this.setStyle("overflow-x",o.x)}if(o.y){this.setStyle("overflow-y",o.y)}}return this},getAnchorXY:function(anchor,local,s){var w,h,vp=false;if(!s){var d=this.dom;if(d==document.body||d==document){vp=true;w=D.getViewWidth();h=D.getViewHeight()}else{w=this.getWidth();h=this.getHeight()}}else{w=s.width;h=s.height}var x=0,y=0,r=Math.round;switch((anchor||"tl").toLowerCase()){case"c":x=r(w*0.5);y=r(h*0.5);break;case"t":x=r(w*0.5);y=0;break;case"l":x=0;y=r(h*0.5);break;case"r":x=w;y=r(h*0.5);break;case"b":x=r(w*0.5);y=h;break;case"tl":x=0;y=0;break;case"bl":x=0;y=h;break;case"br":x=w;y=h;break;case"tr":x=w;y=0;break}if(local===true){return[x,y]}if(vp){var sc=this.getScroll();return[x+sc.left,y+sc.top]}var o=this.getXY();return[x+o[0],y+o[1]]},getAlignToXY:function(el,p,o){el=Ext.get(el);if(!el||!el.dom){throw"Element.alignToXY with an element that doesn't exist"}var d=this.dom;var c=false;var p1="",p2="";o=o||[0,0];if(!p){p="tl-bl"}else{if(p=="?"){p="tl-bl?"}else{if(p.indexOf("-")==-1){p="tl-"+p}}}p=p.toLowerCase();var m=p.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!m){throw"Element.alignTo with an invalid alignment "+p}p1=m[1];p2=m[2];c=!!m[3];var a1=this.getAnchorXY(p1,true);var a2=el.getAnchorXY(p2,false);var x=a2[0]-a1[0]+o[0];var y=a2[1]-a1[1]+o[1];if(c){var w=this.getWidth(),h=this.getHeight(),r=el.getRegion();var dw=D.getViewWidth()-5,dh=D.getViewHeight()-5;var p1y=p1.charAt(0),p1x=p1.charAt(p1.length-1);var p2y=p2.charAt(0),p2x=p2.charAt(p2.length-1);var swapY=((p1y=="t"&&p2y=="b")||(p1y=="b"&&p2y=="t"));var swapX=((p1x=="r"&&p2x=="l")||(p1x=="l"&&p2x=="r"));var doc=document;var scrollX=(doc.documentElement.scrollLeft||doc.body.scrollLeft||0)+5;var scrollY=(doc.documentElement.scrollTop||doc.body.scrollTop||0)+5;if((x+w)>dw+scrollX){x=swapX?r.left-w:dw+scrollX-w}if(x<scrollX){x=swapX?r.right:scrollX}if((y+h)>dh+scrollY){y=swapY?r.top-h:dh+scrollY-h}if(y<scrollY){y=swapY?r.bottom:scrollY}}return[x,y]},getConstrainToXY:function(){var os={top:0,left:0,bottom:0,right:0};return function(el,local,offsets,proposedXY){el=Ext.get(el);offsets=offsets?Ext.applyIf(offsets,os):os;var vw,vh,vx=0,vy=0;if(el.dom==document.body||el.dom==document){vw=Ext.lib.Dom.getViewWidth();vh=Ext.lib.Dom.getViewHeight()}else{vw=el.dom.clientWidth;vh=el.dom.clientHeight;if(!local){var vxy=el.getXY();vx=vxy[0];vy=vxy[1]}}var s=el.getScroll();vx+=offsets.left+s.left;vy+=offsets.top+s.top;vw-=offsets.right;vh-=offsets.bottom;var vr=vx+vw;var vb=vy+vh;var xy=proposedXY||(!local?this.getXY():[this.getLeft(true),this.getTop(true)]);var x=xy[0],y=xy[1];var w=this.dom.offsetWidth,h=this.dom.offsetHeight;var moved=false;if((x+w)>vr){x=vr-w;moved=true}if((y+h)>vb){y=vb-h;moved=true}if(x<vx){x=vx;moved=true}if(y<vy){y=vy;moved=true}return moved?[x,y]:false}}(),adjustForConstraints:function(xy,parent,offsets){return this.getConstrainToXY(parent||document,false,offsets,xy)||xy},alignTo:function(element,position,offsets,animate){var xy=this.getAlignToXY(element,position,offsets);this.setXY(xy,this.preanim(arguments,3));return this},anchorTo:function(el,alignment,offsets,animate,monitorScroll,callback){var action=function(){this.alignTo(el,alignment,offsets,animate);Ext.callback(callback,this)};Ext.EventManager.onWindowResize(action,this);var tm=typeof monitorScroll;if(tm!="undefined"){Ext.EventManager.on(window,"scroll",action,this,{buffer:tm=="number"?monitorScroll:50})}action.call(this);return this},clearOpacity:function(){if(window.ActiveXObject){if(typeof this.dom.style.filter=="string"&&(/alpha/i).test(this.dom.style.filter)){this.dom.style.filter=""}}else{this.dom.style.opacity="";this.dom.style["-moz-opacity"]="";this.dom.style["-khtml-opacity"]=""}return this},hide:function(animate){this.setVisible(false,this.preanim(arguments,0));return this},show:function(animate){this.setVisible(true,this.preanim(arguments,0));return this},addUnits:function(size){return Ext.Element.addUnits(size,this.defaultUnit)},update:function(html,loadScripts,callback){if(typeof html=="undefined"){html=""}if(loadScripts!==true){this.dom.innerHTML=html;if(typeof callback=="function"){callback()}return this}var id=Ext.id();var dom=this.dom;html+='<span id="'+id+'"></span>';E.onAvailable(id,function(){var hd=document.getElementsByTagName("head")[0];var re=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig;var srcRe=/\ssrc=([\'\"])(.*?)\1/i;var typeRe=/\stype=([\'\"])(.*?)\1/i;var match;while(match=re.exec(html)){var attrs=match[1];var srcMatch=attrs?attrs.match(srcRe):false;if(srcMatch&&srcMatch[2]){var s=document.createElement("script");s.src=srcMatch[2];var typeMatch=attrs.match(typeRe);if(typeMatch&&typeMatch[2]){s.type=typeMatch[2]}hd.appendChild(s)}else{if(match[2]&&match[2].length>0){if(window.execScript){window.execScript(match[2])}else{window.eval(match[2])}}}}var el=document.getElementById(id);if(el){Ext.removeNode(el)}if(typeof callback=="function"){callback()}});dom.innerHTML=html.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,"");return this},load:function(){var um=this.getUpdater();um.update.apply(um,arguments);return this},getUpdater:function(){if(!this.updateManager){this.updateManager=new Ext.Updater(this)}return this.updateManager},unselectable:function(){this.dom.unselectable="on";this.swallowEvent("selectstart",true);this.applyStyles("-moz-user-select:none;-khtml-user-select:none;");this.addClass("x-unselectable");return this},getCenterXY:function(){return this.getAlignToXY(document,"c-c")},center:function(centerIn){this.alignTo(centerIn||document,"c-c");return this},isBorderBox:function(){return noBoxAdjust[this.dom.tagName.toLowerCase()]||Ext.isBorderBox},getBox:function(contentBox,local){var xy;if(!local){xy=this.getXY()}else{var left=parseInt(this.getStyle("left"),10)||0;var top=parseInt(this.getStyle("top"),10)||0;xy=[left,top]}var el=this.dom,w=el.offsetWidth,h=el.offsetHeight,bx;if(!contentBox){bx={x:xy[0],y:xy[1],0:xy[0],1:xy[1],width:w,height:h}}else{var l=this.getBorderWidth("l")+this.getPadding("l");var r=this.getBorderWidth("r")+this.getPadding("r");var t=this.getBorderWidth("t")+this.getPadding("t");var b=this.getBorderWidth("b")+this.getPadding("b");bx={x:xy[0]+l,y:xy[1]+t,0:xy[0]+l,1:xy[1]+t,width:w-(l+r),height:h-(t+b)}}bx.right=bx.x+bx.width;bx.bottom=bx.y+bx.height;return bx},getFrameWidth:function(sides,onlyContentBox){return onlyContentBox&&Ext.isBorderBox?0:(this.getPadding(sides)+this.getBorderWidth(sides))},setBox:function(box,adjust,animate){var w=box.width,h=box.height;if((adjust&&!this.autoBoxAdjust)&&!this.isBorderBox()){w-=(this.getBorderWidth("lr")+this.getPadding("lr"));h-=(this.getBorderWidth("tb")+this.getPadding("tb"))}this.setBounds(box.x,box.y,w,h,this.preanim(arguments,2));return this},repaint:function(){var dom=this.dom;this.addClass("x-repaint");setTimeout(function(){Ext.get(dom).removeClass("x-repaint")},1);return this},getMargins:function(side){if(!side){return{top:parseInt(this.getStyle("margin-top"),10)||0,left:parseInt(this.getStyle("margin-left"),10)||0,bottom:parseInt(this.getStyle("margin-bottom"),10)||0,right:parseInt(this.getStyle("margin-right"),10)||0}}else{return this.addStyles(side,El.margins)}},addStyles:function(sides,styles){var val=0,v,w;for(var i=0,len=sides.length;i<len;i++){v=this.getStyle(styles[sides.charAt(i)]);if(v){w=parseInt(v,10);if(w){val+=(w>=0?w:-1*w)}}}return val},createProxy:function(config,renderTo,matchBox){config=typeof config=="object"?config:{tag:"div",cls:config};var proxy;if(renderTo){proxy=Ext.DomHelper.append(renderTo,config,true)}else{proxy=Ext.DomHelper.insertBefore(this.dom,config,true)}if(matchBox){proxy.setBox(this.getBox())}return proxy},mask:function(msg,msgCls){if(this.getStyle("position")=="static"){this.addClass("x-masked-relative")}if(this._maskMsg){this._maskMsg.remove()}if(this._mask){this._mask.remove()}this._mask=Ext.DomHelper.append(this.dom,{cls:"ext-el-mask"},true);this.addClass("x-masked");this._mask.setDisplayed(true);if(typeof msg=="string"){this._maskMsg=Ext.DomHelper.append(this.dom,{cls:"ext-el-mask-msg",cn:{tag:"div"}},true);var mm=this._maskMsg;mm.dom.className=msgCls?"ext-el-mask-msg "+msgCls:"ext-el-mask-msg";mm.dom.firstChild.innerHTML=msg;mm.setDisplayed(true);mm.center(this)}if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&this.getStyle("height")=="auto"){this._mask.setSize(this.getWidth(),this.getHeight())}return this._mask},unmask:function(){if(this._mask){if(this._maskMsg){this._maskMsg.remove();delete this._maskMsg}this._mask.remove();delete this._mask}this.removeClass(["x-masked","x-masked-relative"])},isMasked:function(){return this._mask&&this._mask.isVisible()},createShim:function(){var el=document.createElement("iframe");el.frameBorder="0";el.className="ext-shim";if(Ext.isIE&&Ext.isSecure){el.src=Ext.SSL_SECURE_URL}var shim=Ext.get(this.dom.parentNode.insertBefore(el,this.dom));shim.autoBoxAdjust=false;return shim},remove:function(){Ext.removeNode(this.dom);delete El.cache[this.dom.id]},hover:function(overFn,outFn,scope){var preOverFn=function(e){if(!e.within(this,true)){overFn.apply(scope||this,arguments)}};var preOutFn=function(e){if(!e.within(this,true)){outFn.apply(scope||this,arguments)}};this.on("mouseover",preOverFn,this.dom);this.on("mouseout",preOutFn,this.dom);return this},addClassOnOver:function(className){this.hover(function(){Ext.fly(this,"_internal").addClass(className)},function(){Ext.fly(this,"_internal").removeClass(className)});return this},addClassOnFocus:function(className){this.on("focus",function(){Ext.fly(this,"_internal").addClass(className)},this.dom);this.on("blur",function(){Ext.fly(this,"_internal").removeClass(className)},this.dom);return this},addClassOnClick:function(className){var dom=this.dom;this.on("mousedown",function(){Ext.fly(dom,"_internal").addClass(className);var d=Ext.getDoc();var fn=function(){Ext.fly(dom,"_internal").removeClass(className);d.removeListener("mouseup",fn)};d.on("mouseup",fn)});return this},swallowEvent:function(eventName,preventDefault){var fn=function(e){e.stopPropagation();if(preventDefault){e.preventDefault()}};if(Ext.isArray(eventName)){for(var i=0,len=eventName.length;i<len;i++){this.on(eventName[i],fn)}return this}this.on(eventName,fn);return this},parent:function(selector,returnDom){return this.matchNode("parentNode","parentNode",selector,returnDom)},next:function(selector,returnDom){return this.matchNode("nextSibling","nextSibling",selector,returnDom)},prev:function(selector,returnDom){return this.matchNode("previousSibling","previousSibling",selector,returnDom)},first:function(selector,returnDom){return this.matchNode("nextSibling","firstChild",selector,returnDom)},last:function(selector,returnDom){return this.matchNode("previousSibling","lastChild",selector,returnDom)},matchNode:function(dir,start,selector,returnDom){var n=this.dom[start];while(n){if(n.nodeType==1&&(!selector||Ext.DomQuery.is(n,selector))){return !returnDom?Ext.get(n):n}n=n[dir]}return null},appendChild:function(el){el=Ext.get(el);el.appendTo(this);return this},createChild:function(config,insertBefore,returnDom){config=config||{tag:"div"};if(insertBefore){return Ext.DomHelper.insertBefore(insertBefore,config,returnDom!==true)}return Ext.DomHelper[!this.dom.firstChild?"overwrite":"append"](this.dom,config,returnDom!==true)},appendTo:function(el){el=Ext.getDom(el);el.appendChild(this.dom);return this},insertBefore:function(el){el=Ext.getDom(el);el.parentNode.insertBefore(this.dom,el);return this},insertAfter:function(el){el=Ext.getDom(el);el.parentNode.insertBefore(this.dom,el.nextSibling);return this},insertFirst:function(el,returnDom){el=el||{};if(el.nodeType||el.dom){el=Ext.getDom(el);this.dom.insertBefore(el,this.dom.firstChild);return !returnDom?Ext.get(el):el}else{return this.createChild(el,this.dom.firstChild,returnDom)}},insertSibling:function(el,where,returnDom){var rt;if(Ext.isArray(el)){for(var i=0,len=el.length;i<len;i++){rt=this.insertSibling(el[i],where,returnDom)}return rt}where=where?where.toLowerCase():"before";el=el||{};var refNode=where=="before"?this.dom:this.dom.nextSibling;if(el.nodeType||el.dom){rt=this.dom.parentNode.insertBefore(Ext.getDom(el),refNode);if(!returnDom){rt=Ext.get(rt)}}else{if(where=="after"&&!this.dom.nextSibling){rt=Ext.DomHelper.append(this.dom.parentNode,el,!returnDom)}else{rt=Ext.DomHelper[where=="after"?"insertAfter":"insertBefore"](this.dom,el,!returnDom)}}return rt},wrap:function(config,returnDom){if(!config){config={tag:"div"}}var newEl=Ext.DomHelper.insertBefore(this.dom,config,!returnDom);newEl.dom?newEl.dom.appendChild(this.dom):newEl.appendChild(this.dom);return newEl},replace:function(el){el=Ext.get(el);this.insertBefore(el);el.remove();return this},replaceWith:function(el){if(el.nodeType||el.dom){el=Ext.getDom(el);this.dom.parentNode.insertBefore(el,this.dom)}else{el=this.insertSibling(el,"before")}El.uncache(this.id);Ext.removeNode(this.dom);this.dom=el;this.id=Ext.id(el);El.cache[this.id]=this;return this},insertHtml:function(where,html,returnEl){var el=Ext.DomHelper.insertHtml(where,this.dom,html);return returnEl?Ext.get(el):el},set:function(o,useSet){var el=this.dom;useSet=typeof useSet=="undefined"?(el.setAttribute?true:false):useSet;for(var attr in o){if(attr=="style"||typeof o[attr]=="function"){continue}if(attr=="cls"){el.className=o.cls}else{if(o.hasOwnProperty(attr)){if(useSet){el.setAttribute(attr,o[attr])}else{el[attr]=o[attr]}}}}if(o.style){Ext.DomHelper.applyStyles(el,o.style)}return this},addKeyListener:function(key,fn,scope){var config;if(typeof key!="object"||Ext.isArray(key)){config={key:key,fn:fn,scope:scope}}else{config={key:key.key,shift:key.shift,ctrl:key.ctrl,alt:key.alt,fn:fn,scope:scope}}return new Ext.KeyMap(this,config)},addKeyMap:function(config){return new Ext.KeyMap(this,config)},isScrollable:function(){var dom=this.dom;return dom.scrollHeight>dom.clientHeight||dom.scrollWidth>dom.clientWidth},scrollTo:function(side,value,animate){var prop=side.toLowerCase()=="left"?"scrollLeft":"scrollTop";if(!animate||!A){this.dom[prop]=value}else{var to=prop=="scrollLeft"?[value,this.dom.scrollTop]:[this.dom.scrollLeft,value];this.anim({scroll:{to:to}},this.preanim(arguments,2),"scroll")}return this},scroll:function(direction,distance,animate){if(!this.isScrollable()){return}var el=this.dom;var l=el.scrollLeft,t=el.scrollTop;var w=el.scrollWidth,h=el.scrollHeight;var cw=el.clientWidth,ch=el.clientHeight;direction=direction.toLowerCase();var scrolled=false;var a=this.preanim(arguments,2);switch(direction){case"l":case"left":if(w-l>cw){var v=Math.min(l+distance,w-cw);this.scrollTo("left",v,a);scrolled=true}break;case"r":case"right":if(l>0){var v=Math.max(l-distance,0);this.scrollTo("left",v,a);scrolled=true}break;case"t":case"top":case"up":if(t>0){var v=Math.max(t-distance,0);this.scrollTo("top",v,a);scrolled=true}break;case"b":case"bottom":case"down":if(h-t>ch){var v=Math.min(t+distance,h-ch);this.scrollTo("top",v,a);scrolled=true}break}return scrolled},translatePoints:function(x,y){if(typeof x=="object"||Ext.isArray(x)){y=x[1];x=x[0]}var p=this.getStyle("position");var o=this.getXY();var l=parseInt(this.getStyle("left"),10);var t=parseInt(this.getStyle("top"),10);if(isNaN(l)){l=(p=="relative")?0:this.dom.offsetLeft}if(isNaN(t)){t=(p=="relative")?0:this.dom.offsetTop}return{left:(x-o[0]+l),top:(y-o[1]+t)}},getScroll:function(){var d=this.dom,doc=document;if(d==doc||d==doc.body){var l,t;if(Ext.isIE&&Ext.isStrict){l=doc.documentElement.scrollLeft||(doc.body.scrollLeft||0);t=doc.documentElement.scrollTop||(doc.body.scrollTop||0)}else{l=window.pageXOffset||(doc.body.scrollLeft||0);t=window.pageYOffset||(doc.body.scrollTop||0)}return{left:l,top:t}}else{return{left:d.scrollLeft,top:d.scrollTop}}},getColor:function(attr,defaultValue,prefix){var v=this.getStyle(attr);if(!v||v=="transparent"||v=="inherit"){return defaultValue}var color=typeof prefix=="undefined"?"#":prefix;if(v.substr(0,4)=="rgb("){var rvs=v.slice(4,v.length-1).split(",");for(var i=0;i<3;i++){var h=parseInt(rvs[i]);var s=h.toString(16);if(h<16){s="0"+s}color+=s}}else{if(v.substr(0,1)=="#"){if(v.length==4){for(var i=1;i<4;i++){var c=v.charAt(i);color+=c+c}}else{if(v.length==7){color+=v.substr(1)}}}}return(color.length>5?color.toLowerCase():defaultValue)},boxWrap:function(cls){cls=cls||"x-box";var el=Ext.get(this.insertHtml("beforeBegin",String.format('<div class="{0}">'+El.boxMarkup+"</div>",cls)));el.child("."+cls+"-mc").dom.appendChild(this.dom);return el},getAttributeNS:Ext.isIE?function(ns,name){var d=this.dom;var type=typeof d[ns+":"+name];if(type!="undefined"&&type!="unknown"){return d[ns+":"+name]}return d[name]}:function(ns,name){var d=this.dom;return d.getAttributeNS(ns,name)||d.getAttribute(ns+":"+name)||d.getAttribute(name)||d[name]},getTextWidth:function(text,min,max){return(Ext.util.TextMetrics.measure(this.dom,Ext.value(text,this.dom.innerHTML,true)).width).constrain(min||0,max||1000000)}};var ep=El.prototype;ep.on=ep.addListener;ep.mon=ep.addListener;ep.getUpdateManager=ep.getUpdater;ep.un=ep.removeListener;ep.autoBoxAdjust=true;El.unitPattern=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i;El.addUnits=function(v,defaultUnit){if(v===""||v=="auto"){return v}if(v===undefined){return""}if(typeof v=="number"||!El.unitPattern.test(v)){return v+(defaultUnit||"px")}return v};El.boxMarkup='<div class="{0}-tl"><div class="{0}-tr"><div class="{0}-tc"></div></div></div><div class="{0}-ml"><div class="{0}-mr"><div class="{0}-mc"></div></div></div><div class="{0}-bl"><div class="{0}-br"><div class="{0}-bc"></div></div></div>';El.VISIBILITY=1;El.DISPLAY=2;El.borders={l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"};El.paddings={l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"};El.margins={l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"};El.cache={};var docEl;El.get=function(el){var ex,elm,id;if(!el){return null}if(typeof el=="string"){if(!(elm=document.getElementById(el))){return null}if(ex=El.cache[el]){ex.dom=elm}else{ex=El.cache[el]=new El(elm)}return ex}else{if(el.tagName){if(!(id=el.id)){id=Ext.id(el)}if(ex=El.cache[id]){ex.dom=el}else{ex=El.cache[id]=new El(el)}return ex}else{if(el instanceof El){if(el!=docEl){el.dom=document.getElementById(el.id)||el.dom;El.cache[el.id]=el}return el}else{if(el.isComposite){return el}else{if(Ext.isArray(el)){return El.select(el)}else{if(el==document){if(!docEl){var f=function(){};f.prototype=El.prototype;docEl=new f();docEl.dom=document}return docEl}}}}}}return null};El.uncache=function(el){for(var i=0,a=arguments,len=a.length;i<len;i++){if(a[i]){delete El.cache[a[i].id||a[i]]}}};El.garbageCollect=function(){if(!Ext.enableGarbageCollector){clearInterval(El.collectorThread);return}for(var eid in El.cache){var el=El.cache[eid],d=el.dom;if(!d||!d.parentNode||(!d.offsetParent&&!document.getElementById(eid))){delete El.cache[eid];if(d&&Ext.enableListenerCollection){Ext.EventManager.removeAll(d)}}}};El.collectorThreadId=setInterval(El.garbageCollect,30000);var flyFn=function(){};flyFn.prototype=El.prototype;var _cls=new flyFn();El.Flyweight=function(dom){this.dom=dom};El.Flyweight.prototype=_cls;El.Flyweight.prototype.isFlyweight=true;El._flyweights={};El.fly=function(el,named){named=named||"_global";el=Ext.getDom(el);if(!el){return null}if(!El._flyweights[named]){El._flyweights[named]=new El.Flyweight()}El._flyweights[named].dom=el;return El._flyweights[named]};Ext.get=El.get;Ext.fly=El.fly;var noBoxAdjust=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};if(Ext.isIE||Ext.isGecko){noBoxAdjust.button=1}Ext.EventManager.on(window,"unload",function(){delete El.cache;delete El._flyweights})})();Ext.enableFx=true;Ext.Fx={slideIn:function(a,g){var c=this.getFxEl();g=g||{};c.queueFx(g,function(){a=a||"t";this.fixDisplay();var h=this.getFxRestore();var o=this.getBox();this.setSize(o);var k=this.fxWrap(h.pos,g,"hidden");var q=this.dom.style;q.visibility="visible";q.position="absolute";var j=function(){c.fxUnwrap(k,h.pos,g);q.width=h.width;q.height=h.height;c.afterFx(g)};var p,s={to:[o.x,o.y]},m={to:o.width},l={to:o.height};switch(a.toLowerCase()){case"t":k.setSize(o.width,0);q.left=q.bottom="0";p={height:l};break;case"l":k.setSize(0,o.height);q.right=q.top="0";p={width:m};break;case"r":k.setSize(0,o.height);k.setX(o.right);q.left=q.top="0";p={width:m,points:s};break;case"b":k.setSize(o.width,0);k.setY(o.bottom);q.left=q.top="0";p={height:l,points:s};break;case"tl":k.setSize(0,0);q.right=q.bottom="0";p={width:m,height:l};break;case"bl":k.setSize(0,0);k.setY(o.y+o.height);q.right=q.top="0";p={width:m,height:l,points:s};break;case"br":k.setSize(0,0);k.setXY([o.right,o.bottom]);q.left=q.top="0";p={width:m,height:l,points:s};break;case"tr":k.setSize(0,0);k.setX(o.x+o.width);q.left=q.bottom="0";p={width:m,height:l,points:s};break}this.dom.style.visibility="visible";k.show();arguments.callee.anim=k.fxanim(p,g,"motion",0.5,"easeOut",j)});return this},slideOut:function(a,g){var c=this.getFxEl();g=g||{};c.queueFx(g,function(){a=a||"t";var o=this.getFxRestore();var h=this.getBox();this.setSize(h);var l=this.fxWrap(o.pos,g,"visible");var k=this.dom.style;k.visibility="visible";k.position="absolute";l.setSize(h);var p=function(){if(g.useDisplay){c.setDisplayed(false)}else{c.hide()}c.fxUnwrap(l,o.pos,g);k.width=o.width;k.height=o.height;c.afterFx(g)};var j,m={to:0};switch(a.toLowerCase()){case"t":k.left=k.bottom="0";j={height:m};break;case"l":k.right=k.top="0";j={width:m};break;case"r":k.left=k.top="0";j={width:m,points:{to:[h.right,h.y]}};break;case"b":k.left=k.top="0";j={height:m,points:{to:[h.x,h.bottom]}};break;case"tl":k.right=k.bottom="0";j={width:m,height:m};break;case"bl":k.right=k.top="0";j={width:m,height:m,points:{to:[h.x,h.bottom]}};break;case"br":k.left=k.top="0";j={width:m,height:m,points:{to:[h.x+h.width,h.bottom]}};break;case"tr":k.left=k.bottom="0";j={width:m,height:m,points:{to:[h.right,h.y]}};break}arguments.callee.anim=l.fxanim(j,g,"motion",0.5,"easeOut",p)});return this},puff:function(c){var a=this.getFxEl();c=c||{};a.queueFx(c,function(){this.clearOpacity();this.show();var k=this.getFxRestore();var h=this.dom.style;var l=function(){if(c.useDisplay){a.setDisplayed(false)}else{a.hide()}a.clearOpacity();a.setPositioning(k.pos);h.width=k.width;h.height=k.height;h.fontSize="";a.afterFx(c)};var j=this.getWidth();var g=this.getHeight();arguments.callee.anim=this.fxanim({width:{to:this.adjustWidth(j*2)},height:{to:this.adjustHeight(g*2)},points:{by:[-(j*0.5),-(g*0.5)]},opacity:{to:0},fontSize:{to:200,unit:"%"}},c,"motion",0.5,"easeOut",l)});return this},switchOff:function(c){var a=this.getFxEl();c=c||{};a.queueFx(c,function(){this.clearOpacity();this.clip();var h=this.getFxRestore();var g=this.dom.style;var j=function(){if(c.useDisplay){a.setDisplayed(false)}else{a.hide()}a.clearOpacity();a.setPositioning(h.pos);g.width=h.width;g.height=h.height;a.afterFx(c)};this.fxanim({opacity:{to:0.3}},null,null,0.1,null,function(){this.clearOpacity();(function(){this.fxanim({height:{to:1},points:{by:[0,this.getHeight()*0.5]}},c,"motion",0.3,"easeIn",j)}).defer(100,this)})});return this},highlight:function(a,g){var c=this.getFxEl();g=g||{};c.queueFx(g,function(){a=a||"ffff9c";var h=g.attr||"backgroundColor";this.clearOpacity();this.show();var l=this.getColor(h);var m=this.dom.style[h];var k=(g.endColor||l)||"ffffff";var o=function(){c.dom.style[h]=m;c.afterFx(g)};var j={};j[h]={from:a,to:k};arguments.callee.anim=this.fxanim(j,g,"color",1,"easeIn",o)});return this},frame:function(a,h,k){var g=this.getFxEl(),c,j;k=k||{};g.queueFx(k,function(){a=a||"#C3DAF9";if(a.length==6){a="#"+a}h=h||1;this.show();var q=this.getXY(),r=this.dom,m={x:q[0],y:q[1],0:q[0],1:q[1],width:r.offsetWidth,height:r.offsetHeight},o,l=function(){o=Ext.get(document.body||document.documentElement).createChild({style:{visbility:"hidden",position:"absolute","z-index":35000,border:"0px solid "+a}});return o.queueFx({},p)};arguments.callee.anim={isAnimated:function(){return true},stop:function(){h=0;o.stopFx()}};function p(){var s=Ext.isBorderBox?2:1;j=o.anim({top:{from:m.y,to:m.y-20},left:{from:m.x,to:m.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:m.height,to:m.height+20*s},width:{from:m.width,to:m.width+20*s}},{duration:k.duration||1,callback:function(){o.remove();--h>0?l():g.afterFx(k)}});arguments.callee.anim={isAnimated:function(){return true},stop:function(){j.stop()}}}l()});return this},pause:function(g){var c=this.getFxEl(),a;c.queueFx({},function(){a=setTimeout(function(){c.afterFx({})},g*1000);arguments.callee.anim={isAnimated:function(){return true},stop:function(){clearTimeout(a);c.afterFx({})}}});return this},fadeIn:function(c){var a=this.getFxEl();c=c||{};a.queueFx(c,function(){this.setOpacity(0);this.fixDisplay();this.dom.style.visibility="visible";var g=c.endOpacity||1;arguments.callee.anim=this.fxanim({opacity:{to:g}},c,null,0.5,"easeOut",function(){if(g==1){this.clearOpacity()}a.afterFx(c)})});return this},fadeOut:function(c){var a=this.getFxEl();c=c||{};a.queueFx(c,function(){var g=c.endOpacity||0;arguments.callee.anim=this.fxanim({opacity:{to:g}},c,null,0.5,"easeOut",function(){if(g===0){if(this.visibilityMode==Ext.Element.DISPLAY||c.useDisplay){this.dom.style.display="none"}else{this.dom.style.visibility="hidden"}this.clearOpacity()}a.afterFx(c)})});return this},scale:function(a,c,g){this.shift(Ext.apply({},g,{width:a,height:c}));return this},shift:function(c){var a=this.getFxEl();c=c||{};a.queueFx(c,function(){var k={},j=c.width,l=c.height,g=c.x,o=c.y,m=c.opacity;if(j!==undefined){k.width={to:this.adjustWidth(j)}}if(l!==undefined){k.height={to:this.adjustHeight(l)}}if(c.left!==undefined){k.left={to:c.left}}if(c.top!==undefined){k.top={to:c.top}}if(c.right!==undefined){k.right={to:c.right}}if(c.bottom!==undefined){k.bottom={to:c.bottom}}if(g!==undefined||o!==undefined){k.points={to:[g!==undefined?g:this.getX(),o!==undefined?o:this.getY()]}}if(m!==undefined){k.opacity={to:m}}if(c.xy!==undefined){k.points={to:c.xy}}arguments.callee.anim=this.fxanim(k,c,"motion",0.35,"easeOut",function(){a.afterFx(c)})});return this},ghost:function(a,g){var c=this.getFxEl();g=g||{};c.queueFx(g,function(){a=a||"b";var o=this.getFxRestore();var k=this.getWidth(),m=this.getHeight();var l=this.dom.style;var q=function(){if(g.useDisplay){c.setDisplayed(false)}else{c.hide()}c.clearOpacity();c.setPositioning(o.pos);l.width=o.width;l.height=o.height;c.afterFx(g)};var j={opacity:{to:0},points:{}},p=j.points;switch(a.toLowerCase()){case"t":p.by=[0,-m];break;case"l":p.by=[-k,0];break;case"r":p.by=[k,0];break;case"b":p.by=[0,m];break;case"tl":p.by=[-k,-m];break;case"bl":p.by=[-k,m];break;case"br":p.by=[k,m];break;case"tr":p.by=[k,-m];break}arguments.callee.anim=this.fxanim(j,g,"motion",0.5,"easeOut",q)});return this},syncFx:function(){this.fxDefaults=Ext.apply(this.fxDefaults||{},{block:false,concurrent:true,stopFx:false});return this},sequenceFx:function(){this.fxDefaults=Ext.apply(this.fxDefaults||{},{block:false,concurrent:false,stopFx:false});return this},nextFx:function(){var a=this.fxQueue[0];if(a){a.call(this)}},hasActiveFx:function(){return this.fxQueue&&this.fxQueue[0]},stopFx:function(){if(this.hasActiveFx()){var a=this.fxQueue[0];if(a&&a.anim&&a.anim.isAnimated()){this.fxQueue=[a];a.anim.stop(true)}}return this},beforeFx:function(a){if(this.hasActiveFx()&&!a.concurrent){if(a.stopFx){this.stopFx();return true}return false}return true},hasFxBlock:function(){var a=this.fxQueue;return a&&a[0]&&a[0].block},queueFx:function(g,a){if(!this.fxQueue){this.fxQueue=[]}if(!this.hasFxBlock()){Ext.applyIf(g,this.fxDefaults);if(!g.concurrent){var c=this.beforeFx(g);a.block=g.block;this.fxQueue.push(a);if(c){this.nextFx()}}else{a.call(this)}}return this},fxWrap:function(k,h,g){var c;if(!h.wrap||!(c=Ext.get(h.wrap))){var a;if(h.fixPosition){a=this.getXY()}var j=document.createElement("div");j.style.visibility=g;c=Ext.get(this.dom.parentNode.insertBefore(j,this.dom));c.setPositioning(k);if(c.getStyle("position")=="static"){c.position("relative")}this.clearPositioning("auto");c.clip();c.dom.appendChild(this.dom);if(a){c.setXY(a)}}return c},fxUnwrap:function(a,g,c){this.clearPositioning();this.setPositioning(g);if(!c.wrap){a.dom.parentNode.insertBefore(this.dom,a.dom);a.remove()}},getFxRestore:function(){var a=this.dom.style;return{pos:this.getPositioning(),width:a.width,height:a.height}},afterFx:function(a){if(a.afterStyle){this.applyStyles(a.afterStyle)}if(a.afterCls){this.addClass(a.afterCls)}if(a.remove===true){this.remove()}if(!a.concurrent){this.fxQueue.shift()}Ext.callback(a.callback,a.scope,[this]);if(!a.concurrent){this.nextFx()}},getFxEl:function(){return Ext.get(this.dom)},fxanim:function(h,j,c,k,g,a){c=c||"run";j=j||{};var l=Ext.lib.Anim[c](this.dom,h,(j.duration||k)||0.35,(j.easing||g)||"easeOut",function(){Ext.callback(a,this)},this);j.anim=l;return l}};Ext.Fx.resize=Ext.Fx.scale;Ext.apply(Ext.Element.prototype,Ext.Fx);Ext.CompositeElement=function(a){this.elements=[];this.addElements(a)};Ext.CompositeElement.prototype={isComposite:true,addElements:function(j){if(!j){return this}if(typeof j=="string"){j=Ext.Element.selectorFunction(j)}var h=this.elements;var c=h.length-1;for(var g=0,a=j.length;g<a;g++){h[++c]=Ext.get(j[g])}return this},fill:function(a){this.elements=[];this.add(a);return this},filter:function(a){var c=[];this.each(function(g){if(g.is(a)){c[c.length]=g.dom}});this.fill(c);return this},invoke:function(j,c){var h=this.elements;for(var g=0,a=h.length;g<a;g++){Ext.Element.prototype[j].apply(h[g],c)}return this},add:function(a){if(typeof a=="string"){this.addElements(Ext.Element.selectorFunction(a))}else{if(a.length!==undefined){this.addElements(a)}else{this.addElements([a])}}return this},each:function(j,h){var g=this.elements;for(var c=0,a=g.length;c<a;c++){if(j.call(h||g[c],g[c],this,c)===false){break}}return this},item:function(a){return this.elements[a]||null},first:function(){return this.item(0)},last:function(){return this.item(this.elements.length-1)},getCount:function(){return this.elements.length},contains:function(a){return this.indexOf(a)!==-1},indexOf:function(a){return this.elements.indexOf(Ext.get(a))},removeElement:function(h,k){if(Ext.isArray(h)){for(var g=0,a=h.length;g<a;g++){this.removeElement(h[g])}return this}var c=typeof h=="number"?h:this.indexOf(h);if(c!==-1&&this.elements[c]){if(k){var j=this.elements[c];if(j.dom){j.remove()}else{Ext.removeNode(j)}}this.elements.splice(c,1)}return this},replaceElement:function(h,g,a){var c=typeof h=="number"?h:this.indexOf(h);if(c!==-1){if(a){this.elements[c].replaceWith(g)}else{this.elements.splice(c,1,Ext.get(g))}}return this},clear:function(){this.elements=[]}};(function(){Ext.CompositeElement.createCall=function(c,g){if(!c[g]){c[g]=function(){return this.invoke(g,arguments)}}};for(var a in Ext.Element.prototype){if(typeof Ext.Element.prototype[a]=="function"){Ext.CompositeElement.createCall(Ext.CompositeElement.prototype,a)}}})();Ext.CompositeElementLite=function(a){Ext.CompositeElementLite.superclass.constructor.call(this,a);this.el=new Ext.Element.Flyweight()};Ext.extend(Ext.CompositeElementLite,Ext.CompositeElement,{addElements:function(j){if(j){if(Ext.isArray(j)){this.elements=this.elements.concat(j)}else{var h=this.elements;var c=h.length-1;for(var g=0,a=j.length;g<a;g++){h[++c]=j[g]}}}return this},invoke:function(k,c){var h=this.elements;var j=this.el;for(var g=0,a=h.length;g<a;g++){j.dom=h[g];Ext.Element.prototype[k].apply(j,c)}return this},item:function(a){if(!this.elements[a]){return null}this.el.dom=this.elements[a];return this.el},addListener:function(c,l,k,j){var h=this.elements;for(var g=0,a=h.length;g<a;g++){Ext.EventManager.on(h[g],c,l,k||h[g],j)}return this},each:function(k,j){var g=this.elements;var h=this.el;for(var c=0,a=g.length;c<a;c++){h.dom=g[c];if(k.call(j||h,h,this,c)===false){break}}return this},indexOf:function(a){return this.elements.indexOf(Ext.getDom(a))},replaceElement:function(h,g,a){var c=typeof h=="number"?h:this.indexOf(h);if(c!==-1){g=Ext.getDom(g);if(a){var j=this.elements[c];j.parentNode.insertBefore(g,j);Ext.removeNode(j)}this.elements.splice(c,1,g)}return this}});Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener;if(Ext.DomQuery){Ext.Element.selectorFunction=Ext.DomQuery.select}Ext.Element.select=function(a,h,c){var g;if(typeof a=="string"){g=Ext.Element.selectorFunction(a,c)}else{if(a.length!==undefined){g=a}else{throw"Invalid selector"}}if(h===true){return new Ext.CompositeElement(g)}else{return new Ext.CompositeElementLite(g)}};Ext.select=Ext.Element.select;Ext.data.Connection=function(a){Ext.apply(this,a);this.addEvents("beforerequest","requestcomplete","requestexception");Ext.data.Connection.superclass.constructor.call(this)};Ext.extend(Ext.data.Connection,Ext.util.Observable,{timeout:30000,autoAbort:false,disableCaching:true,disableCachingParam:"_dc",request:function(j){if(this.fireEvent("beforerequest",this,j)!==false){var g=j.params;if(typeof g=="function"){g=g.call(j.scope||window,j)}if(typeof g=="object"){g=Ext.urlEncode(g)}if(this.extraParams){var l=Ext.urlEncode(this.extraParams);g=g?(g+"&"+l):l}var c=j.url||this.url;if(typeof c=="function"){c=c.call(j.scope||window,j)}if(j.form){var h=Ext.getDom(j.form);c=c||h.action;var r=h.getAttribute("enctype");if(j.isUpload||(r&&r.toLowerCase()=="multipart/form-data")){return this.doFormUpload(j,g,c)}var q=Ext.lib.Ajax.serializeForm(h);g=g?(g+"&"+q):q}var s=j.headers;if(this.defaultHeaders){s=Ext.apply(s||{},this.defaultHeaders);if(!j.headers){j.headers=s}}var k={success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{options:j},timeout:j.timeout||this.timeout};var a=j.method||this.method||((g||j.xmlData||j.jsonData)?"POST":"GET");if(a=="GET"&&(this.disableCaching&&j.disableCaching!==false)||j.disableCaching===true){var m=j.disableCachingParam||this.disableCachingParam;c+=(c.indexOf("?")!=-1?"&":"?")+m+"="+(new Date().getTime())}if(typeof j.autoAbort=="boolean"){if(j.autoAbort){this.abort()}}else{if(this.autoAbort!==false){this.abort()}}if((a=="GET"||j.xmlData||j.jsonData)&&g){c+=(c.indexOf("?")!=-1?"&":"?")+g;g=""}this.transId=Ext.lib.Ajax.request(a,c,k,g,j);return this.transId}else{Ext.callback(j.callback,j.scope,[j,null,null]);return null}},isLoading:function(a){if(a){return Ext.lib.Ajax.isCallInProgress(a)}else{return this.transId?true:false}},abort:function(a){if(a||this.isLoading()){Ext.lib.Ajax.abort(a||this.transId)}},handleResponse:function(a){this.transId=false;var c=a.argument.options;a.argument=c?c.argument:null;this.fireEvent("requestcomplete",this,a,c);Ext.callback(c.success,c.scope,[a,c]);Ext.callback(c.callback,c.scope,[c,true,a])},handleFailure:function(a,g){this.transId=false;var c=a.argument.options;a.argument=c?c.argument:null;this.fireEvent("requestexception",this,a,c,g);Ext.callback(c.failure,c.scope,[a,c]);Ext.callback(c.callback,c.scope,[c,false,a])},doFormUpload:function(j,a,c){var g=Ext.id();var l=document.createElement("iframe");l.id=g;l.name=g;l.className="x-hidden";if(Ext.isIE){l.src=Ext.SSL_SECURE_URL}document.body.appendChild(l);if(Ext.isIE){document.frames[g].name=g}var h=Ext.getDom(j.form),m={target:h.target,method:h.method,encoding:h.encoding,enctype:h.enctype,action:h.action};h.target=g;h.method="POST";h.enctype=h.encoding="multipart/form-data";if(c){h.action=c}var v,s;if(a){v=[];a=Ext.urlDecode(a,false);for(var q in a){if(a.hasOwnProperty(q)){s=document.createElement("input");s.type="hidden";s.name=q;s.value=a[q];h.appendChild(s);v.push(s)}}}function p(){var k={responseText:"",responseXML:null};k.argument=j?j.argument:null;try{var w;if(Ext.isIE){w=l.contentWindow.document}else{w=(l.contentDocument||window.frames[g].document)}if(w&&w.body){k.responseText=w.body.innerHTML}if(w&&w.XMLDocument){k.responseXML=w.XMLDocument}else{k.responseXML=w}}catch(o){}Ext.EventManager.removeListener(l,"load",p,this);this.fireEvent("requestcomplete",this,k,j);Ext.callback(j.success,j.scope,[k,j]);Ext.callback(j.callback,j.scope,[j,true,k]);setTimeout(function(){Ext.removeNode(l)},100)}Ext.EventManager.on(l,"load",p,this);h.submit();h.target=m.target;h.method=m.method;h.enctype=m.enctype;h.encoding=m.encoding;h.action=m.action;if(v){for(var r=0,t=v.length;r<t;r++){Ext.removeNode(v[r])}}}});Ext.Ajax=new Ext.data.Connection({autoAbort:false,serializeForm:function(a){return Ext.lib.Ajax.serializeForm(a)}});Ext.Updater=Ext.extend(Ext.util.Observable,{constructor:function(c,a){c=Ext.get(c);if(!a&&c.updateManager){return c.updateManager}this.el=c;this.defaultUrl=null;this.addEvents("beforeupdate","update","failure");var g=Ext.Updater.defaults;this.sslBlankUrl=g.sslBlankUrl;this.disableCaching=g.disableCaching;this.indicatorText=g.indicatorText;this.showLoadIndicator=g.showLoadIndicator;this.timeout=g.timeout;this.loadScripts=g.loadScripts;this.transaction=null;this.refreshDelegate=this.refresh.createDelegate(this);this.updateDelegate=this.update.createDelegate(this);this.formUpdateDelegate=this.formUpdate.createDelegate(this);if(!this.renderer){this.renderer=this.getDefaultRenderer()}Ext.Updater.superclass.constructor.call(this)},getDefaultRenderer:function(){return new Ext.Updater.BasicRenderer()},getEl:function(){return this.el},update:function(c,k,l,h){if(this.fireEvent("beforeupdate",this.el,c,k)!==false){var a,g;if(typeof c=="object"){a=c;c=a.url;k=k||a.params;l=l||a.callback;h=h||a.discardUrl;g=a.scope;if(typeof a.nocache!="undefined"){this.disableCaching=a.nocache}if(typeof a.text!="undefined"){this.indicatorText='<div class="loading-indicator">'+a.text+"</div>"}if(typeof a.scripts!="undefined"){this.loadScripts=a.scripts}if(typeof a.timeout!="undefined"){this.timeout=a.timeout}}this.showLoading();if(!h){this.defaultUrl=c}if(typeof c=="function"){c=c.call(this)}var j=Ext.apply({},{url:c,params:(typeof k=="function"&&g)?k.createDelegate(g):k,success:this.processSuccess,failure:this.processFailure,scope:this,callback:undefined,timeout:(this.timeout*1000),disableCaching:this.disableCaching,argument:{options:a,url:c,form:null,callback:l,scope:g||window,params:k}},a);this.transaction=Ext.Ajax.request(j)}},formUpdate:function(g,a,c,h){if(this.fireEvent("beforeupdate",this.el,g,a)!==false){if(typeof a=="function"){a=a.call(this)}g=Ext.getDom(g);this.transaction=Ext.Ajax.request({form:g,url:a,success:this.processSuccess,failure:this.processFailure,scope:this,timeout:(this.timeout*1000),argument:{url:a,form:g,callback:h,reset:c}});this.showLoading.defer(1,this)}},refresh:function(a){if(this.defaultUrl==null){return}this.update(this.defaultUrl,null,a,true)},startAutoRefresh:function(c,g,h,j,a){if(a){this.update(g||this.defaultUrl,h,j,true)}if(this.autoRefreshProcId){clearInterval(this.autoRefreshProcId)}this.autoRefreshProcId=setInterval(this.update.createDelegate(this,[g||this.defaultUrl,h,j,true]),c*1000)},stopAutoRefresh:function(){if(this.autoRefreshProcId){clearInterval(this.autoRefreshProcId);delete this.autoRefreshProcId}},isAutoRefreshing:function(){return this.autoRefreshProcId?true:false},showLoading:function(){if(this.showLoadIndicator){this.el.update(this.indicatorText)}},processSuccess:function(a){this.transaction=null;if(a.argument.form&&a.argument.reset){try{a.argument.form.reset()}catch(c){}}if(this.loadScripts){this.renderer.render(this.el,a,this,this.updateComplete.createDelegate(this,[a]))}else{this.renderer.render(this.el,a,this);this.updateComplete(a)}},updateComplete:function(a){this.fireEvent("update",this.el,a);if(typeof a.argument.callback=="function"){a.argument.callback.call(a.argument.scope,this.el,true,a,a.argument.options)}},processFailure:function(a){this.transaction=null;this.fireEvent("failure",this.el,a);if(typeof a.argument.callback=="function"){a.argument.callback.call(a.argument.scope,this.el,false,a,a.argument.options)}},setRenderer:function(a){this.renderer=a},getRenderer:function(){return this.renderer},setDefaultUrl:function(a){this.defaultUrl=a},abort:function(){if(this.transaction){Ext.Ajax.abort(this.transaction)}},isUpdating:function(){if(this.transaction){return Ext.Ajax.isLoading(this.transaction)}return false}});Ext.Updater.defaults={timeout:30,loadScripts:false,sslBlankUrl:(Ext.SSL_SECURE_URL||"javascript:false"),disableCaching:false,showLoadIndicator:true,indicatorText:'<div class="loading-indicator">Loading...</div>'};Ext.Updater.updateElement=function(h,g,j,c){var a=Ext.get(h).getUpdater();Ext.apply(a,c);a.update(g,j,c?c.callback:null)};Ext.Updater.BasicRenderer=function(){};Ext.Updater.BasicRenderer.prototype={render:function(g,a,c,h){g.update(a.responseText,c.loadScripts,h)}};Ext.UpdateManager=Ext.Updater;(function(){Date.useStrict=false;function c(h){var g=Array.prototype.slice.call(arguments,1);return h.replace(/\{(\d+)\}/g,function(j,k){return g[k]})}Date.formatCodeToRegex=function(h,g){var j=Date.parseCodes[h];if(j){j=typeof j=="function"?j():j;Date.parseCodes[h]=j}return j?Ext.applyIf({c:j.c?c(j.c,g||"{0}"):j.c},j):{g:0,c:null,s:Ext.escapeRe(h)}};var a=Date.formatCodeToRegex;Ext.apply(Date,{parseFunctions:{"M$":function(h,g){var j=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/");var k=(h||"").match(j);return k?new Date(((k[1]||"")+k[2])*1):null}},parseRegexes:[],formatFunctions:{"M$":function(){return"\\/Date("+this.getTime()+")\\/"}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},getShortMonthName:function(g){return Date.monthNames[g].substring(0,3)},getShortDayName:function(g){return Date.dayNames[g].substring(0,3)},getMonthNumber:function(g){return Date.monthNumbers[g.substring(0,1).toUpperCase()+g.substring(1,3).toLowerCase()]},formatCodes:{d:"String.leftPad(this.getDate(), 2, '0')",D:"Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"this.getSuffix()",w:"this.getDay()",z:"this.getDayOfYear()",W:"String.leftPad(this.getWeekOfYear(), 2, '0')",F:"Date.monthNames[this.getMonth()]",m:"String.leftPad(this.getMonth() + 1, 2, '0')",M:"Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"this.getDaysInMonth()",L:"(this.isLeapYear() ? 1 : 0)",o:"(this.getFullYear() + (this.getWeekOfYear() == 1 && this.getMonth() > 0 ? +1 : (this.getWeekOfYear() >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"this.getFullYear()",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"String.leftPad(this.getHours(), 2, '0')",i:"String.leftPad(this.getMinutes(), 2, '0')",s:"String.leftPad(this.getSeconds(), 2, '0')",u:"String.leftPad(this.getMilliseconds(), 3, '0')",O:"this.getGMTOffset()",P:"this.getGMTOffset(true)",T:"this.getTimezone()",Z:"(this.getTimezoneOffset() * -60)",c:function(){for(var m="Y-m-dTH:i:sP",j=[],h=0,g=m.length;h<g;++h){var k=m.charAt(h);j.push(k=="T"?"'T'":Date.getFormatCode(k))}return j.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(r,g,q,o,k,l,j){o=o||0;k=k||0;l=l||0;j=j||0;var p=new Date(r,g-1,q,o,k,l,j);return r==p.getFullYear()&&g==p.getMonth()+1&&q==p.getDate()&&o==p.getHours()&&k==p.getMinutes()&&l==p.getSeconds()&&j==p.getMilliseconds()},parseDate:function(h,k,g){var j=Date.parseFunctions;if(j[k]==null){Date.createParser(k)}return j[k](h,g===undefined?Date.useStrict:g)},getFormatCode:function(h){var g=Date.formatCodes[h];if(g){g=typeof g=="function"?g():g;Date.formatCodes[h]=g}return g||("'"+String.escape(h)+"'")},createFormat:function(l){var k=[],g=false,j="";for(var h=0;h<l.length;++h){j=l.charAt(h);if(!g&&j=="\\"){g=true}else{if(g){g=false;k.push("'"+String.escape(j)+"'")}else{k.push(Date.getFormatCode(j))}}}Date.formatFunctions[l]=new Function("return "+k.join("+"))},createParser:function(){var g=["var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,","def = Date.defaults,","results = String(input).match(Date.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = (new Date()).clearTime();","y = y >= 0? y : Ext.num(def.y, dt.getFullYear());","m = m >= 0? m : Ext.num(def.m - 1, dt.getMonth());","d = d >= 0? d : Ext.num(def.d, dt.getDate());","h  = h || Ext.num(def.h, dt.getHours());","i  = i || Ext.num(def.i, dt.getMinutes());","s  = s || Ext.num(def.s, dt.getSeconds());","ms = ms || Ext.num(def.ms, dt.getMilliseconds());","if(z >= 0 && y >= 0){","v = new Date(y, 0, 1, h, i, s, ms);","v = !strict? v : (strict === true && (z <= 364 || (v.isLeapYear() && z <= 365))? v.add(Date.DAY, z) : null);","}else if(strict === true && !Date.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","v = new Date(y, m, d, h, i, s, ms);","}","}","}","if(v){","if(zz != null){","v = v.add(Date.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = v.add(Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");return function(q){var j=Date.parseRegexes.length,r=1,k=[],p=[],o=false,h="";for(var m=0;m<q.length;++m){h=q.charAt(m);if(!o&&h=="\\"){o=true}else{if(o){o=false;p.push(String.escape(h))}else{var l=a(h,r);r+=l.g;p.push(l.s);if(l.g&&l.c){k.push(l.c)}}}}Date.parseRegexes[j]=new RegExp("^"+p.join("")+"$","i");Date.parseFunctions[q]=new Function("input","strict",c(g,j,k.join("")))}}(),parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},D:function(){for(var g=[],h=0;h<7;g.push(Date.getShortDayName(h)),++h){}return{g:0,c:null,s:"(?:"+g.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:0,c:null,s:"(?:\\d{2})"},F:function(){return{g:1,c:"m = parseInt(Date.getMonthNumber(results[{0}]), 10);\n",s:"("+Date.monthNames.join("|")+")"}},M:function(){for(var g=[],h=0;h<12;g.push(Date.getShortMonthName(h)),++h){}return Ext.applyIf({s:"("+g.join("|")+")"},a("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{2})"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{1,2})"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:function(){return a("Y")},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:{g:1,c:"if (results[{0}] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"},A:{g:1,c:"if (results[{0}] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"},g:function(){return a("G")},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},h:function(){return a("H")},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,4}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var j=[],g=[a("Y",1),a("m",2),a("d",3),a("h",4),a("i",5),a("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",a("P",8).c,"}else{",a("O",8).c,"}","}"].join("\n")}];for(var k=0,h=g.length;k<h;++k){j.push(g[k].c)}return{g:1,c:j.join(""),s:[g[0].s,"(?:","-",g[1].s,"(?:","-",g[2].s,"(?:","(?:T| )?",g[3].s,":",g[4].s,"(?::",g[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}}})}());Ext.apply(Date.prototype,{dateFormat:function(a){if(Date.formatFunctions[a]==null){Date.createFormat(a)}return Date.formatFunctions[a].call(this)},getTimezone:function(){return this.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(a){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+(a?":":"")+String.leftPad(Math.abs(this.getTimezoneOffset()%60),2,"0")},getDayOfYear:function(){var g=0,c=0,h=this.clone(),a=this.getMonth();for(g=0,h.setMonth(0);g<a;h.setMonth(++g)){c+=h.getDaysInMonth()}return c+this.getDate()-1},getWeekOfYear:function(){var a=86400000,c=7*a;return function(){var h=Date.UTC(this.getFullYear(),this.getMonth(),this.getDate()+3)/a,g=Math.floor(h/7),j=new Date(g*c).getUTCFullYear();return g-Math.floor(Date.UTC(j,0,7)/c)+1}}(),isLeapYear:function(){var a=this.getFullYear();return !!((a&3)==0&&(a%100||(a%400==0&&a)))},getFirstDayOfMonth:function(){var a=(this.getDay()-(this.getDate()-1))%7;return(a<0)?(a+7):a},getLastDayOfMonth:function(){return this.getLastDateOfMonth().getDay()},getFirstDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),1)},getLastDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),this.getDaysInMonth())},getDaysInMonth:function(){var a=[31,28,31,30,31,30,31,31,30,31,30,31];return function(){var c=this.getMonth();return c==1&&this.isLeapYear()?29:a[c]}}(),getSuffix:function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(){return new Date(this.getTime())},isDST:function(){return new Date(this.getFullYear(),0,1).getTimezoneOffset()!=this.getTimezoneOffset()},clearTime:function(j){if(j){return this.clone().clearTime()}var g=this.getDate();this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);if(this.getDate()!=g){for(var a=1,h=this.add(Date.HOUR,a);h.getDate()!=g;a++,h=this.add(Date.HOUR,a)){}this.setDate(g);this.setHours(h.getHours())}return this},add:function(c,g){var h=this.clone();if(!c||g===0){return h}switch(c.toLowerCase()){case Date.MILLI:h.setMilliseconds(this.getMilliseconds()+g);break;case Date.SECOND:h.setSeconds(this.getSeconds()+g);break;case Date.MINUTE:h.setMinutes(this.getMinutes()+g);break;case Date.HOUR:h.setHours(this.getHours()+g);break;case Date.DAY:h.setDate(this.getDate()+g);break;case Date.MONTH:var a=this.getDate();if(a>28){a=Math.min(a,this.getFirstDateOfMonth().add("mo",g).getLastDateOfMonth().getDate())}h.setDate(a);h.setMonth(this.getMonth()+g);break;case Date.YEAR:h.setFullYear(this.getFullYear()+g);break}return h},between:function(g,a){var c=this.getTime();return g.getTime()<=c&&c<=a.getTime()}});Date.prototype.format=Date.prototype.dateFormat;if(Ext.isSafari&&(navigator.userAgent.match(/WebKit\/(\d+)/)[1]||NaN)<420){Ext.apply(Date.prototype,{_xMonth:Date.prototype.setMonth,_xDate:Date.prototype.setDate,setMonth:function(a){if(a<=-1){var h=Math.ceil(-a),g=Math.ceil(h/12),c=(h%12)?12-h%12:0;this.setFullYear(this.getFullYear()-g);return this._xMonth(c)}else{return this._xMonth(a)}},setDate:function(a){return this.setTime(this.getTime()-(this.getDate()-a)*86400000)}})}Ext.util.DelayedTask=function(h,g,a){var j=null;var c=function(){j=null;h.apply(g,a||[])};this.delay=function(l,o,m,k){if(j){this.cancel()}h=o||h;g=m||g;a=k||a;if(!j){j=setTimeout(c,l)}};this.cancel=function(){if(j){clearTimeout(j);j=null}}};Ext.util.TaskRunner=function(j){j=j||10;var k=[],a=[];var c=0;var l=false;var h=function(){l=false;clearInterval(c);c=0};var m=function(){if(!l){l=true;c=setInterval(o,j)}};var g=function(p){a.push(p);if(p.onStop){p.onStop.apply(p.scope||p)}};var o=function(){if(a.length>0){for(var w=0,q=a.length;w<q;w++){k.remove(a[w])}a=[];if(k.length<1){h();return}}var x,s=new Date().getTime();for(var w=0,q=k.length;w<q;++w){var v=k[w];var p=s-v.taskRunTime;if(v.interval<=p){x=++v.taskRunCount;var r=v.run.apply(v.scope||v,v.args||[x]);v.taskRunTime=s;if(r===false||x===v.repeat){g(v);return}}if(v.duration&&v.duration<=(s-v.taskStartTime)){g(v)}}};this.start=function(p){k.push(p);p.taskStartTime=new Date().getTime();p.taskRunTime=0;p.taskRunCount=0;m();return p};this.stop=function(p){g(p);return p};this.stopAll=function(){h();for(var q=0,p=k.length;q<p;q++){if(k[q].onStop){k[q].onStop()}}k=[];a=[]}};Ext.TaskMgr=new Ext.util.TaskRunner();Ext.util.MixedCollection=function(c,a){this.items=[];this.map={};this.keys=[];this.length=0;this.addEvents("clear","add","replace","remove","sort");this.allowFunctions=c===true;if(a){this.getKey=a}Ext.util.MixedCollection.superclass.constructor.call(this)};Ext.extend(Ext.util.MixedCollection,Ext.util.Observable,{allowFunctions:false,add:function(c,g){if(arguments.length==1){g=arguments[0];c=this.getKey(g)}if(typeof c!="undefined"&&c!==null){var a=this.map[c];if(typeof a!="undefined"){return this.replace(c,g)}this.map[c]=g}this.length++;this.items.push(g);this.keys.push(c);this.fireEvent("add",this.length-1,g,c);return g},getKey:function(a){return a.id},replace:function(g,h){if(arguments.length==1){h=arguments[0];g=this.getKey(h)}var a=this.map[g];if(typeof g=="undefined"||g===null||typeof a=="undefined"){return this.add(g,h)}var c=this.indexOfKey(g);this.items[c]=h;this.map[g]=h;this.fireEvent("replace",g,a,h);return h},addAll:function(j){if(arguments.length>1||Ext.isArray(j)){var c=arguments.length>1?arguments:j;for(var h=0,a=c.length;h<a;h++){this.add(c[h])}}else{for(var g in j){if(this.allowFunctions||typeof j[g]!="function"){this.add(g,j[g])}}}},each:function(j,h){var c=[].concat(this.items);for(var g=0,a=c.length;g<a;g++){if(j.call(h||c[g],c[g],g,a)===false){break}}},eachKey:function(h,g){for(var c=0,a=this.keys.length;c<a;c++){h.call(g||window,this.keys[c],this.items[c],c,a)}},find:function(h,g){for(var c=0,a=this.items.length;c<a;c++){if(h.call(g||window,this.items[c],this.keys[c])){return this.items[c]}}return null},insert:function(a,c,g){if(arguments.length==2){g=arguments[1];c=this.getKey(g)}if(this.containsKey(c)){this.suspendEvents();this.removeKey(c);this.resumeEvents()}if(a>=this.length){return this.add(c,g)}this.length++;this.items.splice(a,0,g);if(typeof c!="undefined"&&c!=null){this.map[c]=g}this.keys.splice(a,0,c);this.fireEvent("add",a,g,c);return g},remove:function(a){return this.removeAt(this.indexOf(a))},removeAt:function(a){if(a<this.length&&a>=0){this.length--;var g=this.items[a];this.items.splice(a,1);var c=this.keys[a];if(typeof c!="undefined"){delete this.map[c]}this.keys.splice(a,1);this.fireEvent("remove",g,c);return g}return false},removeKey:function(a){return this.removeAt(this.indexOfKey(a))},getCount:function(){return this.length},indexOf:function(a){return this.items.indexOf(a)},indexOfKey:function(a){return this.keys.indexOf(a)},item:function(c){var a=this.map[c],g=a!==undefined?a:(typeof c=="number")?this.items[c]:undefined;return typeof g!="function"||this.allowFunctions?g:null},itemAt:function(a){return this.items[a]},key:function(a){return this.map[a]},contains:function(a){return this.indexOf(a)!=-1},containsKey:function(a){return typeof this.map[a]!="undefined"},clear:function(){this.length=0;this.items=[];this.keys=[];this.map={};this.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(q,a,p){var h=String(a).toUpperCase()=="DESC"?-1:1;p=p||function(k,c){return k-c};var o=[],g=this.keys,m=this.items;for(var j=0,l=m.length;j<l;j++){o[o.length]={key:g[j],value:m[j],index:j}}o.sort(function(k,c){var r=p(k[q],c[q])*h;if(r==0){r=(k.index<c.index?-1:1)}return r});for(var j=0,l=o.length;j<l;j++){m[j]=o[j].value;g[j]=o[j].key}this.fireEvent("sort",this)},sort:function(a,c){this._sort("value",a,c)},keySort:function(a,c){this._sort("key",a,c||function(h,g){var k=String(h).toUpperCase(),j=String(g).toUpperCase();return k>j?1:(k<j?-1:0)})},getRange:function(j,a){var c=this.items;if(c.length<1){return[]}j=j||0;a=Math.min(typeof a=="undefined"?this.length-1:a,this.length-1);var h=[];if(j<=a){for(var g=j;g<=a;g++){h[h.length]=c[g]}}else{for(var g=j;g>=a;g--){h[h.length]=c[g]}}return h},filter:function(g,c,h,a){if(Ext.isEmpty(c,false)){return this.clone()}c=this.createValueMatcher(c,h,a);return this.filterBy(function(j){return j&&c.test(j[g])})},filterBy:function(l,j){var m=new Ext.util.MixedCollection();m.getKey=this.getKey;var c=this.keys,h=this.items;for(var g=0,a=h.length;g<a;g++){if(l.call(j||this,h[g],c[g])){m.add(c[g],h[g])}}return m},findIndex:function(g,c,j,h,a){if(Ext.isEmpty(c,false)){return -1}c=this.createValueMatcher(c,h,a);return this.findIndexBy(function(k){return k&&c.test(k[g])},null,j)},findIndexBy:function(l,j,m){var c=this.keys,h=this.items;for(var g=(m||0),a=h.length;g<a;g++){if(l.call(j||this,h[g],c[g])){return g}}return -1},createValueMatcher:function(c,g,a){if(!c.exec){c=String(c);c=new RegExp((g===true?"":"^")+Ext.escapeRe(c),a?"":"i")}return c},clone:function(){var j=new Ext.util.MixedCollection();var c=this.keys,h=this.items;for(var g=0,a=h.length;g<a;g++){j.add(c[g],h[g])}j.getKey=this.getKey;return j}});Ext.util.MixedCollection.prototype.get=Ext.util.MixedCollection.prototype.item;Ext.util.JSON=new (function(){var useHasOwn=!!{}.hasOwnProperty;var pad=function(n){return n<10?"0"+n:n};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var encodeString=function(s){if(/["\\\x00-\x1f]/.test(s)){return'"'+s.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];if(c){return c}c=b.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+s+'"'};var encodeArray=function(o){var a=["["],b,i,l=o.length,v;for(i=0;i<l;i+=1){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;default:if(b){a.push(",")}a.push(v===null?"null":Ext.util.JSON.encode(v));b=true}}a.push("]");return a.join("")};this.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};this.encode=function(o){if(typeof o=="undefined"||o===null){return"null"}else{if(Ext.isArray(o)){return encodeArray(o)}else{if(Ext.isDate(o)){return Ext.util.JSON.encodeDate(o)}else{if(typeof o=="string"){return encodeString(o)}else{if(typeof o=="number"){return isFinite(o)?String(o):"null"}else{if(typeof o=="boolean"){return String(o)}else{var a=["{"],b,i,v;for(i in o){if(!useHasOwn||o.hasOwnProperty(i)){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;default:if(b){a.push(",")}a.push(this.encode(i),":",v===null?"null":this.encode(v));b=true}}}a.push("}");return a.join("")}}}}}}};this.decode=function(json){return eval("("+json+")")}})();Ext.encode=Ext.util.JSON.encode;Ext.decode=Ext.util.JSON.decode;Ext.util.Format=function(){var trimRe=/^\s+|\s+$/g;return{ellipsis:function(value,len){if(value&&value.length>len){return value.substr(0,len-3)+"..."}return value},undef:function(value){return value!==undefined?value:""},defaultValue:function(value,defaultValue){return value!==undefined&&value!==""?value:defaultValue},htmlEncode:function(value){return !value?value:String(value).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},htmlDecode:function(value){return !value?value:String(value).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},trim:function(value){return String(value).replace(trimRe,"")},substr:function(value,start,length){return String(value).substr(start,length)},lowercase:function(value){return String(value).toLowerCase()},uppercase:function(value){return String(value).toUpperCase()},capitalize:function(value){return !value?value:value.charAt(0).toUpperCase()+value.substr(1).toLowerCase()},call:function(value,fn){if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);args.unshift(value);return eval(fn).apply(window,args)}else{return eval(fn).call(window,value)}},usMoney:function(v){v=(Math.round((v-0)*100))/100;v=(v==Math.floor(v))?v+".00":((v*10==Math.floor(v*10))?v+"0":v);v=String(v);var ps=v.split(".");var whole=ps[0];var sub=ps[1]?"."+ps[1]:".00";var r=/(\d+)(\d{3})/;while(r.test(whole)){whole=whole.replace(r,"$1,$2")}v=whole+sub;if(v.charAt(0)=="-"){return"-$"+v.substr(1)}return"$"+v},date:function(v,format){if(!v){return""}if(!Ext.isDate(v)){v=new Date(Date.parse(v))}return v.dateFormat(format||"m/d/Y")},dateRenderer:function(format){return function(v){return Ext.util.Format.date(v,format)}},stripTagsRE:/<\/?[^>]+>/gi,stripTags:function(v){return !v?v:String(v).replace(this.stripTagsRE,"")},stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,stripScripts:function(v){return !v?v:String(v).replace(this.stripScriptsRe,"")},fileSize:function(size){if(size<1024){return size+" bytes"}else{if(size<1048576){return(Math.round(((size*10)/1024))/10)+" KB"}else{return(Math.round(((size*10)/1048576))/10)+" MB"}}},math:function(){var fns={};return function(v,a){if(!fns[a]){fns[a]=new Function("v","return v "+a+";")}return fns[a](v)}}(),nl2br:function(v){return v===undefined||v===null?"":v.replace(/\n/g,"<br/>")}}}();Ext.XTemplate=function(){Ext.XTemplate.superclass.constructor.apply(this,arguments);var y=this.html;y=["<tpl>",y,"</tpl>"].join("");var x=/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/;var w=/^<tpl\b[^>]*?for="(.*?)"/;var t=/^<tpl\b[^>]*?if="(.*?)"/;var q=/^<tpl\b[^>]*?exec="(.*?)"/;var g,c=0;var l=[];while(g=y.match(x)){var v=g[0].match(w);var r=g[0].match(t);var p=g[0].match(q);var j=null,o=null,h=null;var a=v&&v[1]?v[1]:"";if(r){j=r&&r[1]?r[1]:null;if(j){o=new Function("values","parent","xindex","xcount","with(values){ return "+(Ext.util.Format.htmlDecode(j))+"; }")}}if(p){j=p&&p[1]?p[1]:null;if(j){h=new Function("values","parent","xindex","xcount","with(values){ "+(Ext.util.Format.htmlDecode(j))+"; }")}}if(a){switch(a){case".":a=new Function("values","parent","with(values){ return values; }");break;case"..":a=new Function("values","parent","with(values){ return parent; }");break;default:a=new Function("values","parent","with(values){ return "+a+"; }")}}l.push({id:c,target:a,exec:h,test:o,body:g[1]||""});y=y.replace(g[0],"{xtpl"+c+"}");++c}for(var k=l.length-1;k>=0;--k){this.compileTpl(l[k])}this.master=l[l.length-1];this.tpls=l};Ext.extend(Ext.XTemplate,Ext.Template,{re:/\{([\w-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\\]\s?[\d\.\+\-\*\\\(\)]+)?\}/g,codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,applySubTemplate:function(a,m,l,h,g){var p=this.tpls[a];if(p.test&&!p.test.call(this,m,l,h,g)){return""}if(p.exec&&p.exec.call(this,m,l,h,g)){return""}var o=p.target?p.target.call(this,m,l):m;l=p.target?m:l;if(p.target&&Ext.isArray(o)){var c=[];for(var j=0,k=o.length;j<k;j++){c[c.length]=p.compiled.call(this,o[j],l,j+1,k)}return c.join("")}return p.compiled.call(this,o,l,h,g)},compileTpl:function(tpl){var fm=Ext.util.Format;var useF=this.disableFormats!==true;var sep=Ext.isGecko?"+":",";var fn=function(m,name,format,args,math){if(name.substr(0,4)=="xtpl"){return"'"+sep+"this.applySubTemplate("+name.substr(4)+", values, parent, xindex, xcount)"+sep+"'"}var v;if(name==="."){v="values"}else{if(name==="#"){v="xindex"}else{if(name.indexOf(".")!=-1){v=name}else{v="values['"+name+"']"}}}if(math){v="("+v+math+")"}if(format&&useF){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"("}else{format='this.call("'+format.substr(5)+'", ';args=", values"}}else{args="";format="("+v+" === undefined ? '' : "}return"'"+sep+format+v+args+")"+sep+"'"};var codeFn=function(m,code){return"'"+sep+"("+code+")"+sep+"'"};var body;if(Ext.isGecko){body="tpl.compiled = function(values, parent, xindex, xcount){ return '"+tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)+"';};"}else{body=["tpl.compiled = function(values, parent, xindex, xcount){ return ['"];body.push(tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn));body.push("'].join('');};");body=body.join("")}eval(body);return this},applyTemplate:function(a){return this.master.compiled.call(this,a,{},1,1)},compile:function(){return this}});Ext.XTemplate.prototype.apply=Ext.XTemplate.prototype.applyTemplate;Ext.XTemplate.from=function(a){a=Ext.getDom(a);return new Ext.XTemplate(a.value||a.innerHTML)};Ext.util.CSS=function(){var h=null;var g=document;var c=/(-[a-z])/gi;var a=function(j,k){return k.charAt(1).toUpperCase()};return{createStyleSheet:function(l,p){var k;var j=g.getElementsByTagName("head")[0];var o=g.createElement("style");o.setAttribute("type","text/css");if(p){o.setAttribute("id",p)}if(Ext.isIE){j.appendChild(o);k=o.styleSheet;k.cssText=l}else{try{o.appendChild(g.createTextNode(l))}catch(m){o.cssText=l}j.appendChild(o);k=o.styleSheet?o.styleSheet:(o.sheet||g.styleSheets[g.styleSheets.length-1])}this.cacheStyleSheet(k);return k},removeStyleSheet:function(k){var j=g.getElementById(k);if(j){j.parentNode.removeChild(j)}},swapStyleSheet:function(l,j){this.removeStyleSheet(l);var k=g.createElement("link");k.setAttribute("rel","stylesheet");k.setAttribute("type","text/css");k.setAttribute("id",l);k.setAttribute("href",j);g.getElementsByTagName("head")[0].appendChild(k)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(l){if(!h){h={}}try{var o=l.cssRules||l.rules;for(var k=o.length-1;k>=0;--k){h[o[k].selectorText]=o[k]}}catch(m){}},getRules:function(k){if(h==null||k){h={};var m=g.styleSheets;for(var l=0,j=m.length;l<j;l++){try{this.cacheStyleSheet(m[l])}catch(o){}}}return h},getRule:function(j,l){var k=this.getRules(l);if(!Ext.isArray(j)){return k[j]}for(var m=0;m<j.length;m++){if(k[j[m]]){return k[j[m]]}}return null},updateRule:function(j,m,l){if(!Ext.isArray(j)){var o=this.getRule(j);if(o){o.style[m.replace(c,a)]=l;return true}}else{for(var k=0;k<j.length;k++){if(this.updateRule(j[k],m,l)){return true}}}return false}}}();Ext.util.ClickRepeater=function(c,a){this.el=Ext.get(c);this.el.unselectable();Ext.apply(this,a);this.addEvents("mousedown","click","mouseup");if(!this.disabled){this.disabled=true;this.enable()}if(this.handler){this.on("click",this.handler,this.scope||this)}Ext.util.ClickRepeater.superclass.constructor.call(this)};Ext.extend(Ext.util.ClickRepeater,Ext.util.Observable,{interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(this.preventDefault||this.stopDefault){this.el.on("click",this.eventOptions,this)}}this.disabled=false},disable:function(a){if(a||!this.disabled){clearTimeout(this.timer);if(this.pressClass){this.el.removeClass(this.pressClass)}Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.removeAllListeners()}this.disabled=true},setDisabled:function(a){this[a?"disable":"enable"]()},eventOptions:function(a){if(this.preventDefault){a.preventDefault()}if(this.stopDefault){a.stopEvent()}},destroy:function(){this.disable(true);Ext.destroy(this.el);this.purgeListeners()},handleMouseDown:function(){clearTimeout(this.timer);this.el.blur();if(this.pressClass){this.el.addClass(this.pressClass)}this.mousedownTime=new Date();Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this);this.fireEvent("click",this);if(this.accelerate){this.delay=400}this.timer=this.click.defer(this.delay||this.interval,this)},click:function(){this.fireEvent("click",this);this.timer=this.click.defer(this.accelerate?this.easeOutExpo(this.mousedownTime.getElapsed(),400,-390,12000):this.interval,this)},easeOutExpo:function(g,a,j,h){return(g==h)?a+j:j*(-Math.pow(2,-10*g/h)+1)+a},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressClass){this.el.removeClass(this.pressClass)}this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn,this);if(this.pressClass){this.el.addClass(this.pressClass)}this.click()},handleMouseUp:function(){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.removeClass(this.pressClass);this.fireEvent("mouseup",this)}});Ext.KeyNav=function(c,a){this.el=Ext.get(c);Ext.apply(this,a);if(!this.disabled){this.disabled=true;this.enable()}};Ext.KeyNav.prototype={disabled:false,defaultEventAction:"stopEvent",forceKeyDown:false,prepareEvent:function(g){var a=g.getKey();var c=this.keyToHandler[a];if(Ext.isSafari2&&c&&a>=37&&a<=40){g.stopEvent()}},relay:function(g){var a=g.getKey();var c=this.keyToHandler[a];if(c&&this[c]){if(this.doRelay(g,this[c],c)!==true){g[this.defaultEventAction]()}}},doRelay:function(g,c,a){return c.call(this.scope||this,g)},enter:false,left:false,right:false,up:false,down:false,tab:false,esc:false,pageUp:false,pageDown:false,del:false,home:false,end:false,keyToHandler:{37:"left",39:"right",38:"up",40:"down",33:"pageUp",34:"pageDown",46:"del",36:"home",35:"end",13:"enter",27:"esc",9:"tab"},enable:function(){if(this.disabled){if(this.isKeyDown()){this.el.on("keydown",this.relay,this)}else{this.el.on("keydown",this.prepareEvent,this);this.el.on("keypress",this.relay,this)}this.disabled=false}},disable:function(){if(!this.disabled){if(this.isKeyDown()){this.el.un("keydown",this.relay,this)}else{this.el.un("keydown",this.prepareEvent,this);this.el.un("keypress",this.relay,this)}this.disabled=true}},isKeyDown:function(){return this.forceKeyDown||Ext.isIE||(Ext.isWebKit&&!Ext.isSafari2)||Ext.isAir}};Ext.KeyMap=function(g,c,a){this.el=Ext.get(g);this.eventName=a||"keydown";this.bindings=[];if(c){this.addBinding(c)}this.enable()};Ext.KeyMap.prototype={stopEvent:false,addBinding:function(h){if(Ext.isArray(h)){for(var l=0,o=h.length;l<o;l++){this.addBinding(h[l])}return}var v=h.key,g=h.shift,a=h.ctrl,m=h.alt,q=h.fn||h.handler,t=h.scope;if(h.stopEvent){this.stopEvent=h.stopEvent}if(typeof v=="string"){var r=[];var p=v.toUpperCase();for(var k=0,o=p.length;k<o;k++){r.push(p.charCodeAt(k))}v=r}var c=Ext.isArray(v);var s=function(y){if((!g||y.shiftKey)&&(!a||y.ctrlKey)&&(!m||y.altKey)){var w=y.getKey();if(c){for(var x=0,j=v.length;x<j;x++){if(v[x]==w){if(this.stopEvent){y.stopEvent()}q.call(t||window,w,y);return}}}else{if(w==v){if(this.stopEvent){y.stopEvent()}q.call(t||window,w,y)}}}};this.bindings.push(s)},on:function(c,h,g){var l,a,j,k;if(typeof c=="object"&&!Ext.isArray(c)){l=c.key;a=c.shift;j=c.ctrl;k=c.alt}else{l=c}this.addBinding({key:l,shift:a,ctrl:j,alt:k,fn:h,scope:g})},handleKeyDown:function(h){if(this.enabled){var c=this.bindings;for(var g=0,a=c.length;g<a;g++){c[g].call(this,h)}}},isEnabled:function(){return this.enabled},enable:function(){if(!this.enabled){this.el.on(this.eventName,this.handleKeyDown,this);this.enabled=true}},disable:function(){if(this.enabled){this.el.removeListener(this.eventName,this.handleKeyDown,this);this.enabled=false}}};Ext.util.TextMetrics=function(){var a;return{measure:function(c,g,h){if(!a){a=Ext.util.TextMetrics.Instance(c,h)}a.bind(c);a.setFixedWidth(h||"auto");return a.getSize(g)},createInstance:function(c,g){return Ext.util.TextMetrics.Instance(c,g)}}}();Ext.util.TextMetrics.Instance=function(c,h){var g=new Ext.Element(document.createElement("div"));document.body.appendChild(g.dom);g.position("absolute");g.setLeftTop(-1000,-1000);g.hide();if(h){g.setWidth(h)}var a={getSize:function(k){g.update(k);var j=g.getSize();g.update("");return j},bind:function(j){g.setStyle(Ext.fly(j).getStyles("font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"))},setFixedWidth:function(j){g.setWidth(j)},getWidth:function(j){g.dom.style.width="auto";return this.getSize(j).width},getHeight:function(j){return this.getSize(j).height}};a.bind(c);return a};Ext.Element.measureText=Ext.util.TextMetrics.measure;(function(){var a=Ext.EventManager;var c=Ext.lib.Dom;Ext.dd.DragDrop=function(j,g,h){if(j){this.init(j,g,h)}};Ext.dd.DragDrop.prototype={id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,b4StartDrag:function(g,h){},startDrag:function(g,h){},b4Drag:function(g){},onDrag:function(g){},onDragEnter:function(g,h){},b4DragOver:function(g){},onDragOver:function(g,h){},b4DragOut:function(g){},onDragOut:function(g,h){},b4DragDrop:function(g){},onDragDrop:function(g,h){},onInvalidDrop:function(g){},b4EndDrag:function(g){},endDrag:function(g){},b4MouseDown:function(g){},onMouseDown:function(g){},onMouseUp:function(g){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(m,k,t){if(typeof k=="number"){k={left:k,right:k,top:k,bottom:k}}k=k||this.defaultPadding;var p=Ext.get(this.getEl()).getBox();var g=Ext.get(m);var r=g.getScroll();var o,h=g.dom;if(h==document.body){o={x:r.left,y:r.top,width:Ext.lib.Dom.getViewWidth(),height:Ext.lib.Dom.getViewHeight()}}else{var q=g.getXY();o={x:q[0]+r.left,y:q[1]+r.top,width:h.clientWidth,height:h.clientHeight}}var l=p.y-o.y;var j=p.x-o.x;this.resetConstraints();this.setXConstraint(j-(k.left||0),o.width-j-p.width-(k.right||0),this.xTickSize);this.setYConstraint(l-(k.top||0),o.height-l-p.height-(k.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(j,g,h){this.initTarget(j,g,h);a.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(j,g,h){this.config=h||{};this.DDM=Ext.dd.DDM;this.groups={};if(typeof j!=="string"){j=Ext.id(j)}this.id=j;this.addToGroup((g)?g:"default");this.handleElId=j;this.setDragElId(j);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(j,g,k,h){if(!g&&0!==g){this.padding=[j,j,j,j]}else{if(!k&&0!==k){this.padding=[j,g,j,g]}else{this.padding=[j,g,k,h]}}},setInitPosition:function(k,j){var l=this.getEl();if(!this.DDM.verifyEl(l)){return}var h=k||0;var g=j||0;var m=c.getXY(l);this.initPageX=m[0]-h;this.initPageY=m[1]-g;this.lastPageX=m[0];this.lastPageY=m[1];this.setStartPosition(m)},setStartPosition:function(h){var g=h||c.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=g[0];this.startPageY=g[1]},addToGroup:function(g){this.groups[g]=true;this.DDM.regDragDrop(this,g)},removeFromGroup:function(g){if(this.groups[g]){delete this.groups[g]}this.DDM.removeDDFromGroup(this,g)},setDragElId:function(g){this.dragElId=g},setHandleElId:function(g){if(typeof g!=="string"){g=Ext.id(g)}this.handleElId=g;this.DDM.regHandle(this.id,g)},setOuterHandleElId:function(g){if(typeof g!=="string"){g=Ext.id(g)}a.on(g,"mousedown",this.handleMouseDown,this);this.setHandleElId(g);this.hasOuterHandles=true},unreg:function(){a.un(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return(this.DDM.isLocked()||this.locked)},handleMouseDown:function(j,h){if(this.primaryButtonOnly&&j.button!=0){return}if(this.isLocked()){return}this.DDM.refreshCache(this.groups);var g=new Ext.lib.Point(Ext.lib.Event.getPageX(j),Ext.lib.Event.getPageY(j));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(g,this)){}else{if(this.clickValidator(j)){this.setStartPosition();this.b4MouseDown(j);this.onMouseDown(j);this.DDM.handleMouseDown(j,this);this.DDM.stopEvent(j)}else{}}},clickValidator:function(h){var g=h.getTarget();return(this.isValidHandleChild(g)&&(this.id==this.handleElId||this.DDM.handleWasClicked(g,this.id)))},addInvalidHandleType:function(g){var h=g.toUpperCase();this.invalidHandleTypes[h]=h},addInvalidHandleId:function(g){if(typeof g!=="string"){g=Ext.id(g)}this.invalidHandleIds[g]=g},addInvalidHandleClass:function(g){this.invalidHandleClasses.push(g)},removeInvalidHandleType:function(g){var h=g.toUpperCase();delete this.invalidHandleTypes[h]},removeInvalidHandleId:function(g){if(typeof g!=="string"){g=Ext.id(g)}delete this.invalidHandleIds[g]},removeInvalidHandleClass:function(h){for(var j=0,g=this.invalidHandleClasses.length;j<g;++j){if(this.invalidHandleClasses[j]==h){delete this.invalidHandleClasses[j]}}},isValidHandleChild:function(k){var j=true;var m;try{m=k.nodeName.toUpperCase()}catch(l){m=k.nodeName}j=j&&!this.invalidHandleTypes[m];j=j&&!this.invalidHandleIds[k.id];for(var h=0,g=this.invalidHandleClasses.length;j&&h<g;++h){j=!Ext.fly(k).hasClass(this.invalidHandleClasses[h])}return j},setXTicks:function(k,g){this.xTicks=[];this.xTickSize=g;var j={};for(var h=this.initPageX;h>=this.minX;h=h-g){if(!j[h]){this.xTicks[this.xTicks.length]=h;j[h]=true}}for(h=this.initPageX;h<=this.maxX;h=h+g){if(!j[h]){this.xTicks[this.xTicks.length]=h;j[h]=true}}this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(k,g){this.yTicks=[];this.yTickSize=g;var j={};for(var h=this.initPageY;h>=this.minY;h=h-g){if(!j[h]){this.yTicks[this.yTicks.length]=h;j[h]=true}}for(h=this.initPageY;h<=this.maxY;h=h+g){if(!j[h]){this.yTicks[this.yTicks.length]=h;j[h]=true}}this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(j,h,g){this.leftConstraint=j;this.rightConstraint=h;this.minX=this.initPageX-j;this.maxX=this.initPageX+h;if(g){this.setXTicks(this.initPageX,g)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(g,j,h){this.topConstraint=g;this.bottomConstraint=j;this.minY=this.initPageY-g;this.maxY=this.initPageY+j;if(h){this.setYTicks(this.initPageY,h)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var h=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var g=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(h,g)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(o,k){if(!k){return o}else{if(k[0]>=o){return k[0]}else{for(var h=0,g=k.length;h<g;++h){var j=h+1;if(k[j]&&k[j]>=o){var m=o-k[h];var l=k[j]-o;return(l>m)?k[h]:k[j]}}return k[k.length-1]}}},toString:function(){return("DragDrop "+this.id)}}})();if(!Ext.dd.DragDropMgr){Ext.dd.DragDropMgr=function(){var a=Ext.EventManager;return{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,_execOnAll:function(h,g){for(var k in this.ids){for(var c in this.ids[k]){var l=this.ids[k][c];if(!this.isTypeOfDD(l)){continue}l[h].apply(l,g)}}},_onLoad:function(){this.init();a.on(document,"mouseup",this.handleMouseUp,this,true);a.on(document,"mousemove",this.handleMouseMove,this,true);a.on(window,"unload",this._onUnload,this,true);a.on(window,"resize",this._onResize,this,true)},_onResize:function(c){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(g,c){if(!this.initialized){this.init()}if(!this.ids[c]){this.ids[c]={}}this.ids[c][g.id]=g},removeDDFromGroup:function(h,c){if(!this.ids[c]){this.ids[c]={}}var g=this.ids[c];if(g&&g[h.id]){delete g[h.id]}},_remove:function(h){for(var c in h.groups){if(c&&this.ids[c]&&this.ids[c][h.id]){delete this.ids[c][h.id]}}delete this.handleIds[h.id]},regHandle:function(g,c){if(!this.handleIds[g]){this.handleIds[g]={}}this.handleIds[g][c]=c},isDragDrop:function(c){return(this.getDDById(c))?true:false},getRelated:function(m,g){var l=[];for(var k in m.groups){for(var h in this.ids[k]){var c=this.ids[k][h];if(!this.isTypeOfDD(c)){continue}if(!g||c.isTarget){l[l.length]=c}}}return l},isLegalTarget:function(k,j){var g=this.getRelated(k,true);for(var h=0,c=g.length;h<c;++h){if(g[h].id==j.id){return true}}return false},isTypeOfDD:function(c){return(c&&c.__ygDragDrop)},isHandle:function(g,c){return(this.handleIds[g]&&this.handleIds[g][c])},getDDById:function(g){for(var c in this.ids){if(this.ids[c][g]){return this.ids[c][g]}}return null},handleMouseDown:function(h,g){if(Ext.QuickTips){Ext.QuickTips.disable()}if(this.dragCurrent){this.handleMouseUp(h)}this.currentTarget=h.getTarget();this.dragCurrent=g;var c=g.getEl();this.startX=h.getPageX();this.startY=h.getPageY();this.deltaX=this.startX-c.offsetLeft;this.deltaY=this.startY-c.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var j=Ext.dd.DDM;j.startDrag(j.startX,j.startY)},this.clickTimeThresh)},startDrag:function(c,g){clearTimeout(this.clickTimeout);if(this.dragCurrent){this.dragCurrent.b4StartDrag(c,g);this.dragCurrent.startDrag(c,g)}this.dragThreshMet=true},handleMouseUp:function(c){if(Ext.QuickTips){Ext.QuickTips.enable()}if(!this.dragCurrent){return}clearTimeout(this.clickTimeout);if(this.dragThreshMet){this.fireEvents(c,true)}else{}this.stopDrag(c);this.stopEvent(c)},stopEvent:function(c){if(this.stopPropagation){c.stopPropagation()}if(this.preventDefault){c.preventDefault()}},stopDrag:function(c){if(this.dragCurrent){if(this.dragThreshMet){this.dragCurrent.b4EndDrag(c);this.dragCurrent.endDrag(c)}this.dragCurrent.onMouseUp(c)}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(h){if(!this.dragCurrent){return true}if(Ext.isIE&&(h.button!==0&&h.button!==1&&h.button!==2)){this.stopEvent(h);return this.handleMouseUp(h)}if(!this.dragThreshMet){var g=Math.abs(this.startX-h.getPageX());var c=Math.abs(this.startY-h.getPageY());if(g>this.clickPixelThresh||c>this.clickPixelThresh){this.startDrag(this.startX,this.startY)}}if(this.dragThreshMet){this.dragCurrent.b4Drag(h);this.dragCurrent.onDrag(h);if(!this.dragCurrent.moveOnly){this.fireEvents(h,false)}}this.stopEvent(h);return true},fireEvents:function(q,r){var t=this.dragCurrent;if(!t||t.isLocked()){return}var v=q.getPoint();var c=[];var j=[];var o=[];var l=[];var h=[];for(var k in this.dragOvers){var g=this.dragOvers[k];if(!this.isTypeOfDD(g)){continue}if(!this.isOverTarget(v,g,this.mode)){j.push(g)}c[k]=true;delete this.dragOvers[k]}for(var s in t.groups){if("string"!=typeof s){continue}for(k in this.ids[s]){var m=this.ids[s][k];if(!this.isTypeOfDD(m)){continue}if(m.isTarget&&!m.isLocked()&&m!=t){if(this.isOverTarget(v,m,this.mode)){if(r){l.push(m)}else{if(!c[m.id]){h.push(m)}else{o.push(m)}this.dragOvers[m.id]=m}}}}}if(this.mode){if(j.length){t.b4DragOut(q,j);t.onDragOut(q,j)}if(h.length){t.onDragEnter(q,h)}if(o.length){t.b4DragOver(q,o);t.onDragOver(q,o)}if(l.length){t.b4DragDrop(q,l);t.onDragDrop(q,l)}}else{var p=0;for(k=0,p=j.length;k<p;++k){t.b4DragOut(q,j[k].id);t.onDragOut(q,j[k].id)}for(k=0,p=h.length;k<p;++k){t.onDragEnter(q,h[k].id)}for(k=0,p=o.length;k<p;++k){t.b4DragOver(q,o[k].id);t.onDragOver(q,o[k].id)}for(k=0,p=l.length;k<p;++k){t.b4DragDrop(q,l[k].id);t.onDragDrop(q,l[k].id)}}if(r&&!l.length){t.onInvalidDrop(q)}},getBestMatch:function(h){var k=null;var g=h.length;if(g==1){k=h[0]}else{for(var j=0;j<g;++j){var c=h[j];if(c.cursorIsOver){k=c;break}else{if(!k||k.overlap.getArea()<c.overlap.getArea()){k=c}}}}return k},refreshCache:function(g){for(var c in g){if("string"!=typeof c){continue}for(var h in this.ids[c]){var j=this.ids[c][h];if(this.isTypeOfDD(j)){var k=this.getLocation(j);if(k){this.locationCache[j.id]=k}else{delete this.locationCache[j.id]}}}}},verifyEl:function(g){if(g){var c;if(Ext.isIE){try{c=g.offsetParent}catch(h){}}else{c=g.offsetParent}if(c){return true}}return false},getLocation:function(m){if(!this.isTypeOfDD(m)){return null}var j=m.getEl(),q,h,g,v,s,w,c,p,k;try{q=Ext.lib.Dom.getXY(j)}catch(o){}if(!q){return null}h=q[0];g=h+j.offsetWidth;v=q[1];s=v+j.offsetHeight;w=v-m.padding[0];c=g+m.padding[1];p=s+m.padding[2];k=h-m.padding[3];return new Ext.lib.Region(w,c,p,k)},isOverTarget:function(p,c,h){var k=this.locationCache[c.id];if(!k||!this.useCache){k=this.getLocation(c);this.locationCache[c.id]=k}if(!k){return false}c.cursorIsOver=k.contains(p);var o=this.dragCurrent;if(!o||!o.getTargetCoord||(!h&&!o.constrainX&&!o.constrainY)){return c.cursorIsOver}c.overlap=null;var l=o.getTargetCoord(p.x,p.y);var g=o.getDragEl();var j=new Ext.lib.Region(l.y,l.x+g.offsetWidth,l.y+g.offsetHeight,l.x);var m=j.intersect(k);if(m){c.overlap=m;return(h)?true:c.cursorIsOver}else{return false}},_onUnload:function(g,c){Ext.dd.DragDropMgr.unregAll()},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null}this._execOnAll("unreg",[]);for(var c in this.elementCache){delete this.elementCache[c]}this.elementCache={};this.ids={}},elementCache:{},getElWrapper:function(g){var c=this.elementCache[g];if(!c||!c.el){c=this.elementCache[g]=new this.ElementWrapper(Ext.getDom(g))}return c},getElement:function(c){return Ext.getDom(c)},getCss:function(g){var c=Ext.getDom(g);return(c)?c.style:null},ElementWrapper:function(c){this.el=c||null;this.id=this.el&&c.id;this.css=this.el&&c.style},getPosX:function(c){return Ext.lib.Dom.getX(c)},getPosY:function(c){return Ext.lib.Dom.getY(c)},swapNode:function(h,c){if(h.swapNode){h.swapNode(c)}else{var j=c.parentNode;var g=c.nextSibling;if(g==h){j.insertBefore(h,c)}else{if(c==h.nextSibling){j.insertBefore(c,h)}else{h.parentNode.replaceChild(c,h);j.insertBefore(h,g)}}}},getScroll:function(){var h,c,j=document.documentElement,g=document.body;if(j&&(j.scrollTop||j.scrollLeft)){h=j.scrollTop;c=j.scrollLeft}else{if(g){h=g.scrollTop;c=g.scrollLeft}else{}}return{top:h,left:c}},getStyle:function(g,c){return Ext.fly(g).getStyle(c)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(c,h){var g=Ext.lib.Dom.getXY(h);Ext.lib.Dom.setXY(c,g)},numericSort:function(g,c){return(g-c)},_timeoutCount:0,_addListeners:function(){var c=Ext.dd.DDM;if(Ext.lib.Event&&document){c._onLoad()}else{if(c._timeoutCount>2000){}else{setTimeout(c._addListeners,10);if(document&&document.body){c._timeoutCount+=1}}}},handleWasClicked:function(c,h){if(this.isHandle(h,c.id)){return true}else{var g=c.parentNode;while(g){if(this.isHandle(h,g.id)){return true}else{g=g.parentNode}}}return false}}}();Ext.dd.DDM=Ext.dd.DragDropMgr;Ext.dd.DDM._addListeners()}Ext.dd.DD=function(g,a,c){if(g){this.init(g,a,c)}};Ext.extend(Ext.dd.DD,Ext.dd.DragDrop,{scroll:true,autoOffset:function(g,c){var a=g-this.startPageX;var h=c-this.startPageY;this.setDelta(a,h)},setDelta:function(c,a){this.deltaX=c;this.deltaY=a},setDragElPos:function(g,c){var a=this.getDragEl();this.alignElWithMouse(a,g,c)},alignElWithMouse:function(g,l,k){var j=this.getTargetCoord(l,k);var c=g.dom?g:Ext.fly(g,"_dd");if(!this.deltaSetXY){var m=[j.x,j.y];c.setXY(m);var h=c.getLeft(true);var a=c.getTop(true);this.deltaSetXY=[h-j.x,a-j.y]}else{c.setLeftTop(j.x+this.deltaSetXY[0],j.y+this.deltaSetXY[1])}this.cachePosition(j.x,j.y);this.autoScroll(j.x,j.y,g.offsetHeight,g.offsetWidth);return j},cachePosition:function(c,a){if(c){this.lastPageX=c;this.lastPageY=a}else{var g=Ext.lib.Dom.getXY(this.getEl());this.lastPageX=g[0];this.lastPageY=g[1]}},autoScroll:function(q,p,k,r){if(this.scroll){var s=Ext.lib.Dom.getViewHeight();var c=Ext.lib.Dom.getViewWidth();var v=this.DDM.getScrollTop();var j=this.DDM.getScrollLeft();var o=k+p;var t=r+q;var m=(s+v-p-this.deltaY);var l=(c+j-q-this.deltaX);var g=40;var a=(document.all)?80:30;if(o>s&&m<g){window.scrollTo(j,v+a)}if(p<v&&v>0&&p-v<g){window.scrollTo(j,v-a)}if(t>c&&l<g){window.scrollTo(j+a,v)}if(q<j&&j>0&&q-j<g){window.scrollTo(j-a,v)}}},getTargetCoord:function(g,c){var a=g-this.deltaX;var h=c-this.deltaY;if(this.constrainX){if(a<this.minX){a=this.minX}if(a>this.maxX){a=this.maxX}}if(this.constrainY){if(h<this.minY){h=this.minY}if(h>this.maxY){h=this.maxY}}a=this.getTick(a,this.xTicks);h=this.getTick(h,this.yTicks);return{x:a,y:h}},applyConfig:function(){Ext.dd.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(a){this.autoOffset(a.getPageX(),a.getPageY())},b4Drag:function(a){this.setDragElPos(a.getPageX(),a.getPageY())},toString:function(){return("DD "+this.id)}});Ext.dd.DDProxy=function(g,a,c){if(g){this.init(g,a,c);this.initFrame()}};Ext.dd.DDProxy.dragElId="ygddfdiv";Ext.extend(Ext.dd.DDProxy,Ext.dd.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var c=this;var a=document.body;if(!a||!a.firstChild){setTimeout(function(){c.createFrame()},50);return}var h=this.getDragEl();if(!h){h=document.createElement("div");h.id=this.dragElId;var g=h.style;g.position="absolute";g.visibility="hidden";g.cursor="move";g.border="2px solid #aaa";g.zIndex=999;a.insertBefore(h,a.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(j,h){var g=this.getEl();var a=this.getDragEl();var c=a.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(c.width,10)/2),Math.round(parseInt(c.height,10)/2))}this.setDragElPos(j,h);Ext.fly(a).show()},_resizeProxy:function(){if(this.resizeFrame){var a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(c){var a=c.getPageX();var g=c.getPageY();this.autoOffset(a,g);this.setDragElPos(a,g)},b4StartDrag:function(a,c){this.showFrame(a,c)},b4EndDrag:function(a){Ext.fly(this.getDragEl()).hide()},endDrag:function(g){var c=this.getEl();var a=this.getDragEl();a.style.visibility="";this.beforeMove();c.style.visibility="hidden";Ext.dd.DDM.moveToEl(c,a);a.style.visibility="hidden";c.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return("DDProxy "+this.id)}});Ext.dd.DDTarget=function(g,a,c){if(g){this.initTarget(g,a,c)}};Ext.extend(Ext.dd.DDTarget,Ext.dd.DragDrop,{toString:function(){return("DDTarget "+this.id)}});Ext.dd.DragTracker=function(a){Ext.apply(this,a);this.addEvents("mousedown","mouseup","mousemove","dragstart","dragend","drag");this.dragRegion=new Ext.lib.Region(0,0,0,0);if(this.el){this.initEl(this.el)}};Ext.extend(Ext.dd.DragTracker,Ext.util.Observable,{active:false,tolerance:5,autoStart:false,initEl:function(a){this.el=Ext.get(a);a.on("mousedown",this.onMouseDown,this,this.delegate?{delegate:this.delegate}:undefined)},destroy:function(){this.el.un("mousedown",this.onMouseDown,this)},onMouseDown:function(g,c){if(this.fireEvent("mousedown",this,g)!==false&&this.onBeforeStart(g)!==false){this.startXY=this.lastXY=g.getXY();this.dragTarget=this.delegate?c:this.el.dom;g.preventDefault();var a=Ext.getDoc();a.on("mouseup",this.onMouseUp,this);a.on("mousemove",this.onMouseMove,this);a.on("selectstart",this.stopSelect,this);if(this.autoStart){this.timer=this.triggerStart.defer(this.autoStart===true?1000:this.autoStart,this)}}},onMouseMove:function(h,g){if(this.active&&Ext.isIE&&!h.browserEvent.button){h.preventDefault();this.onMouseUp(h);return}h.preventDefault();var c=h.getXY(),a=this.startXY;this.lastXY=c;if(!this.active){if(Math.abs(a[0]-c[0])>this.tolerance||Math.abs(a[1]-c[1])>this.tolerance){this.triggerStart()}else{return}}this.fireEvent("mousemove",this,h);this.onDrag(h);this.fireEvent("drag",this,h)},onMouseUp:function(c){var a=Ext.getDoc();a.un("mousemove",this.onMouseMove,this);a.un("mouseup",this.onMouseUp,this);a.un("selectstart",this.stopSelect,this);c.preventDefault();this.clearStart();this.active=false;delete this.elRegion;this.fireEvent("mouseup",this,c);this.onEnd(c);this.fireEvent("dragend",this,c)},triggerStart:function(a){this.clearStart();this.active=true;this.onStart(this.startXY);this.fireEvent("dragstart",this,this.startXY)},clearStart:function(){if(this.timer){clearTimeout(this.timer);delete this.timer}},stopSelect:function(a){a.stopEvent();return false},onBeforeStart:function(a){},onStart:function(a){},onDrag:function(a){},onEnd:function(a){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getXY:function(a){return a?this.constrainModes[a].call(this,this.lastXY):this.lastXY},getOffset:function(g){var c=this.getXY(g);var a=this.startXY;return[a[0]-c[0],a[1]-c[1]]},constrainModes:{point:function(c){if(!this.elRegion){this.elRegion=this.getDragCt().getRegion()}var a=this.dragRegion;a.left=c[0];a.top=c[1];a.right=c[0];a.bottom=c[1];a.constrainTo(this.elRegion);return[a.left,a.top]}}});Ext.dd.ScrollManager=function(){var g=Ext.dd.DragDropMgr;var j={};var c=null;var m={};var l=function(q){c=null;a()};var o=function(){if(g.dragCurrent){g.refreshCache(g.dragCurrent.groups)}};var h=function(){if(g.dragCurrent){var q=Ext.dd.ScrollManager;var r=m.el.ddScrollConfig?m.el.ddScrollConfig.increment:q.increment;if(!q.animate){if(m.el.scroll(m.dir,r)){o()}}else{m.el.scroll(m.dir,r,true,q.animDuration,o)}}};var a=function(){if(m.id){clearInterval(m.id)}m.id=0;m.el=null;m.dir=""};var k=function(r,q){a();m.el=r;m.dir=q;var s=(r.ddScrollConfig&&r.ddScrollConfig.frequency)?r.ddScrollConfig.frequency:Ext.dd.ScrollManager.frequency;m.id=setInterval(h,s)};var p=function(v,x){if(x||!g.dragCurrent){return}var y=Ext.dd.ScrollManager;if(!c||c!=g.dragCurrent){c=g.dragCurrent;y.refreshCache()}var z=Ext.lib.Event.getXY(v);var A=new Ext.lib.Point(z[0],z[1]);for(var s in j){var t=j[s],q=t._region;var w=t.ddScrollConfig?t.ddScrollConfig:y;if(q&&q.contains(A)&&t.isScrollable()){if(q.bottom-A.y<=w.vthresh){if(m.el!=t){k(t,"down")}return}else{if(q.right-A.x<=w.hthresh){if(m.el!=t){k(t,"left")}return}else{if(A.y-q.top<=w.vthresh){if(m.el!=t){k(t,"up")}return}else{if(A.x-q.left<=w.hthresh){if(m.el!=t){k(t,"right")}return}}}}}}a()};g.fireEvents=g.fireEvents.createSequence(p,g);g.stopDrag=g.stopDrag.createSequence(l,g);return{register:function(s){if(Ext.isArray(s)){for(var r=0,q=s.length;r<q;r++){this.register(s[r])}}else{s=Ext.get(s);j[s.id]=s}},unregister:function(s){if(Ext.isArray(s)){for(var r=0,q=s.length;r<q;r++){this.unregister(s[r])}}else{s=Ext.get(s);delete j[s.id]}},vthresh:25,hthresh:25,increment:100,frequency:500,animate:true,animDuration:0.4,refreshCache:function(){for(var q in j){if(typeof j[q]=="object"){j[q]._region=j[q].getRegion()}}}}}();Ext.dd.Registry=function(){var h={};var c={};var a=0;var g=function(k,j){if(typeof k=="string"){return k}var l=k.id;if(!l&&j!==false){l="extdd-"+(++a);k.id=l}return l};return{register:function(m,o){o=o||{};if(typeof m=="string"){m=document.getElementById(m)}o.ddel=m;h[g(m)]=o;if(o.isHandle!==false){c[o.ddel.id]=o}if(o.handles){var l=o.handles;for(var k=0,j=l.length;k<j;k++){c[g(l[k])]=o}}},unregister:function(m){var p=g(m,false);var o=h[p];if(o){delete h[p];if(o.handles){var l=o.handles;for(var k=0,j=l.length;k<j;k++){delete c[g(l[k],false)]}}}},getHandle:function(j){if(typeof j!="string"){j=j.id}return c[j]},getHandleFromEvent:function(k){var j=Ext.lib.Event.getTarget(k);return j?c[j.id]:null},getTarget:function(j){if(typeof j!="string"){j=j.id}return h[j]},getTargetFromEvent:function(k){var j=Ext.lib.Event.getTarget(k);return j?h[j.id]||c[j.id]:null}}}();Ext.dd.StatusProxy=function(a){Ext.apply(this,a);this.id=this.id||Ext.id();this.el=new Ext.Layer({dh:{id:this.id,tag:"div",cls:"x-dd-drag-proxy "+this.dropNotAllowed,children:[{tag:"div",cls:"x-dd-drop-icon"},{tag:"div",cls:"x-dd-drag-ghost"}]},shadow:!a||a.shadow!==false});this.ghost=Ext.get(this.el.dom.childNodes[1]);this.dropStatus=this.dropNotAllowed};Ext.dd.StatusProxy.prototype={dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(a){a=a||this.dropNotAllowed;if(this.dropStatus!=a){this.el.replaceClass(this.dropStatus,a);this.dropStatus=a}},reset:function(a){this.el.dom.className="x-dd-drag-proxy "+this.dropNotAllowed;this.dropStatus=this.dropNotAllowed;if(a){this.ghost.update("")}},update:function(a){if(typeof a=="string"){this.ghost.update(a)}else{this.ghost.update("");a.style.margin="0";this.ghost.dom.appendChild(a)}var c=this.ghost.dom.firstChild;if(c){Ext.fly(c).setStyle(Ext.isIE?"styleFloat":"cssFloat","none")}},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(a){this.el.hide();if(a){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},show:function(){this.el.show()},sync:function(){this.el.sync()},repair:function(c,g,a){this.callback=g;this.scope=a;if(c&&this.animRepair!==false){this.el.addClass("x-dd-drag-repair");this.el.hideUnders(true);this.anim=this.el.shift({duration:this.repairDuration||0.5,easing:"easeOut",xy:c,stopFx:true,callback:this.afterRepair,scope:this})}else{this.afterRepair()}},afterRepair:function(){this.hide(true);if(typeof this.callback=="function"){this.callback.call(this.scope||this)}this.callback=null;this.scope=null}};Ext.dd.DragSource=function(c,a){this.el=Ext.get(c);if(!this.dragData){this.dragData={}}Ext.apply(this,a);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy()}Ext.dd.DragSource.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false};Ext.extend(Ext.dd.DragSource,Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",getDragData:function(a){return this.dragData},onDragEnter:function(g,h){var c=Ext.dd.DragDropMgr.getDDById(h);this.cachedTarget=c;if(this.beforeDragEnter(c,g,h)!==false){if(c.isNotifyTarget){var a=c.notifyEnter(this,g,this.dragData);this.proxy.setStatus(a)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(c,g,h)}}},beforeDragEnter:function(c,a,g){return true},alignElWithMouse:function(){Ext.dd.DragSource.superclass.alignElWithMouse.apply(this,arguments);this.proxy.sync()},onDragOver:function(g,h){var c=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(h);if(this.beforeDragOver(c,g,h)!==false){if(c.isNotifyTarget){var a=c.notifyOver(this,g,this.dragData);this.proxy.setStatus(a)}if(this.afterDragOver){this.afterDragOver(c,g,h)}}},beforeDragOver:function(c,a,g){return true},onDragOut:function(c,g){var a=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(g);if(this.beforeDragOut(a,c,g)!==false){if(a.isNotifyTarget){a.notifyOut(this,c,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(a,c,g)}}this.cachedTarget=null},beforeDragOut:function(c,a,g){return true},onDragDrop:function(c,g){var a=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(g);if(this.beforeDragDrop(a,c,g)!==false){if(a.isNotifyTarget){if(a.notifyDrop(this,c,this.dragData)){this.onValidDrop(a,c,g)}else{this.onInvalidDrop(a,c,g)}}else{this.onValidDrop(a,c,g)}if(this.afterDragDrop){this.afterDragDrop(a,c,g)}}delete this.cachedTarget},beforeDragDrop:function(c,a,g){return true},onValidDrop:function(c,a,g){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(c,a,g)}},getRepairXY:function(c,a){return this.el.getXY()},onInvalidDrop:function(c,a,g){this.beforeInvalidDrop(c,a,g);if(this.cachedTarget){if(this.cachedTarget.isNotifyTarget){this.cachedTarget.notifyOut(this,a,this.dragData)}this.cacheTarget=null}this.proxy.repair(this.getRepairXY(a,this.dragData),this.afterRepair,this);if(this.afterInvalidDrop){this.afterInvalidDrop(a,g)}},afterRepair:function(){if(Ext.enableFx){this.el.highlight(this.hlColor||"c3daf9")}this.dragging=false},beforeInvalidDrop:function(c,a,g){return true},handleMouseDown:function(c){if(this.dragging){return}var a=this.getDragData(c);if(a&&this.onBeforeDrag(a,c)!==false){this.dragData=a;this.proxy.stop();Ext.dd.DragSource.superclass.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(a,c){return true},onStartDrag:Ext.emptyFn,startDrag:function(a,c){this.proxy.reset();this.dragging=true;this.proxy.update("");this.onInitDrag(a,c);this.proxy.show()},onInitDrag:function(a,g){var c=this.el.dom.cloneNode(true);c.id=Ext.id();this.proxy.update(c);this.onStartDrag(a,g);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(a){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(a,c){},autoOffset:function(a,c){this.setDelta(-12,-20)}});Ext.dd.DropTarget=function(c,a){this.el=Ext.get(c);Ext.apply(this,a);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}Ext.dd.DropTarget.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:true})};Ext.extend(Ext.dd.DropTarget,Ext.dd.DDTarget,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:true,isNotifyTarget:true,notifyEnter:function(a,g,c){if(this.overClass){this.el.addClass(this.overClass)}return this.dropAllowed},notifyOver:function(a,g,c){return this.dropAllowed},notifyOut:function(a,g,c){if(this.overClass){this.el.removeClass(this.overClass)}},notifyDrop:function(a,g,c){return false}});Ext.dd.DragZone=function(c,a){Ext.dd.DragZone.superclass.constructor.call(this,c,a);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}};Ext.extend(Ext.dd.DragZone,Ext.dd.DragSource,{getDragData:function(a){return Ext.dd.Registry.getHandleFromEvent(a)},onInitDrag:function(a,c){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(a,c);return true},afterRepair:function(){if(Ext.enableFx){Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9")}this.dragging=false},getRepairXY:function(a){return Ext.Element.fly(this.dragData.ddel).getXY()}});Ext.dd.DropZone=function(c,a){Ext.dd.DropZone.superclass.constructor.call(this,c,a)};Ext.extend(Ext.dd.DropZone,Ext.dd.DropTarget,{getTargetFromEvent:function(a){return Ext.dd.Registry.getTargetFromEvent(a)},onNodeEnter:function(h,a,g,c){},onNodeOver:function(h,a,g,c){return this.dropAllowed},onNodeOut:function(h,a,g,c){},onNodeDrop:function(h,a,g,c){return false},onContainerOver:function(a,g,c){return this.dropNotAllowed},onContainerDrop:function(a,g,c){return false},notifyEnter:function(a,g,c){return this.dropNotAllowed},notifyOver:function(a,g,c){var h=this.getTargetFromEvent(g);if(!h){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,g,c);this.lastOverNode=null}return this.onContainerOver(a,g,c)}if(this.lastOverNode!=h){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,g,c)}this.onNodeEnter(h,a,g,c);this.lastOverNode=h}return this.onNodeOver(h,a,g,c)},notifyOut:function(a,g,c){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,g,c);this.lastOverNode=null}},notifyDrop:function(a,g,c){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,g,c);this.lastOverNode=null}var h=this.getTargetFromEvent(g);return h?this.onNodeDrop(h,a,g,c):this.onContainerDrop(a,g,c)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}});Ext.data.SortTypes={none:function(a){return a},stripTagsRE:/<\/?[^>]+>/gi,asText:function(a){return String(a).replace(this.stripTagsRE,"")},asUCText:function(a){return String(a).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(a){return String(a).toUpperCase()},asDate:function(a){if(!a){return 0}if(Ext.isDate(a)){return a.getTime()}return Date.parse(String(a))},asFloat:function(a){var c=parseFloat(String(a).replace(/,/g,""));if(isNaN(c)){c=0}return c},asInt:function(a){var c=parseInt(String(a).replace(/,/g,""));if(isNaN(c)){c=0}return c}};Ext.data.Record=function(a,c){this.id=(c||c===0)?c:++Ext.data.Record.AUTO_ID;this.data=a||{}};Ext.data.Record.create=function(j){var g=Ext.extend(Ext.data.Record,{});var h=g.prototype;h.fields=new Ext.util.MixedCollection(false,function(k){return k.name});for(var c=0,a=j.length;c<a;c++){h.fields.add(new Ext.data.Field(j[c]))}g.getField=function(k){return h.fields.get(k)};return g};Ext.data.Record.AUTO_ID=1000;Ext.data.Record.EDIT="edit";Ext.data.Record.REJECT="reject";Ext.data.Record.COMMIT="commit";Ext.data.Record.prototype={dirty:false,editing:false,error:null,modified:null,join:function(a){this.store=a},set:function(a,c){if(String(this.data[a])==String(c)){return}this.dirty=true;if(!this.modified){this.modified={}}if(typeof this.modified[a]=="undefined"){this.modified[a]=this.data[a]}this.data[a]=c;if(!this.editing&&this.store){this.store.afterEdit(this)}},get:function(a){return this.data[a]},beginEdit:function(){this.editing=true;this.modified={}},cancelEdit:function(){this.editing=false;delete this.modified},endEdit:function(){this.editing=false;if(this.dirty&&this.store){this.store.afterEdit(this)}},reject:function(c){var a=this.modified;for(var g in a){if(typeof a[g]!="function"){this.data[g]=a[g]}}this.dirty=false;delete this.modified;this.editing=false;if(this.store&&c!==true){this.store.afterReject(this)}},commit:function(a){this.dirty=false;delete this.modified;this.editing=false;if(this.store&&a!==true){this.store.afterCommit(this)}},getChanges:function(){var a=this.modified,c={};for(var g in a){if(a.hasOwnProperty(g)){c[g]=this.data[g]}}return c},hasError:function(){return this.error!=null},clearError:function(){this.error=null},copy:function(a){return new this.constructor(Ext.apply({},this.data),a||this.id)},isModified:function(a){return !!(this.modified&&this.modified.hasOwnProperty(a))}};Ext.StoreMgr=Ext.apply(new Ext.util.MixedCollection(),{register:function(){for(var a=0,c;c=arguments[a];a++){this.add(c)}},unregister:function(){for(var a=0,c;c=arguments[a];a++){this.remove(this.lookup(c))}},lookup:function(a){return typeof a=="object"?a:this.get(a)},getKey:function(a){return a.storeId||a.id}});Ext.data.Store=function(a){this.data=new Ext.util.MixedCollection(false);this.data.getKey=function(c){return c.id};this.baseParams={};this.paramNames={start:"start",limit:"limit",sort:"sort",dir:"dir"};if(a&&a.data){this.inlineData=a.data;delete a.data}Ext.apply(this,a);if(this.url&&!this.proxy){this.proxy=new Ext.data.HttpProxy({url:this.url})}if(this.reader){if(!this.recordType){this.recordType=this.reader.recordType}if(this.reader.onMetaChange){this.reader.onMetaChange=this.onMetaChange.createDelegate(this)}}if(this.recordType){this.fields=this.recordType.prototype.fields}this.modified=[];this.addEvents("datachanged","metachange","add","remove","update","clear","beforeload","load","loadexception");if(this.proxy){this.relayEvents(this.proxy,["loadexception"])}this.sortToggle={};if(this.sortInfo){this.setDefaultSort(this.sortInfo.field,this.sortInfo.direction)}Ext.data.Store.superclass.constructor.call(this);if(this.storeId||this.id){Ext.StoreMgr.register(this)}if(this.inlineData){this.loadData(this.inlineData);delete this.inlineData}else{if(this.autoLoad){this.load.defer(10,this,[typeof this.autoLoad=="object"?this.autoLoad:undefined])}}};Ext.extend(Ext.data.Store,Ext.util.Observable,{remoteSort:false,pruneModifiedRecords:false,lastOptions:null,destroy:function(){if(this.storeId||this.id){Ext.StoreMgr.unregister(this)}this.data=null;Ext.destroy(this.proxy);this.reader=null;this.purgeListeners()},add:function(c){c=[].concat(c);if(c.length<1){return}for(var h=0,a=c.length;h<a;h++){c[h].join(this)}var g=this.data.length;this.data.addAll(c);if(this.snapshot){this.snapshot.addAll(c)}this.fireEvent("add",this,c,g)},addSorted:function(a){var c=this.findInsertIndex(a);this.insert(c,a)},remove:function(a){var c=this.data.indexOf(a);if(c>-1){this.data.removeAt(c);if(this.pruneModifiedRecords){this.modified.remove(a)}if(this.snapshot){this.snapshot.remove(a)}this.fireEvent("remove",this,a,c)}},removeAt:function(a){this.remove(this.getAt(a))},removeAll:function(){this.data.clear();if(this.snapshot){this.snapshot.clear()}if(this.pruneModifiedRecords){this.modified=[]}this.fireEvent("clear",this)},insert:function(g,c){c=[].concat(c);for(var h=0,a=c.length;h<a;h++){this.data.insert(g,c[h]);c[h].join(this)}this.fireEvent("add",this,c,g)},indexOf:function(a){return this.data.indexOf(a)},indexOfId:function(a){return this.data.indexOfKey(a)},getById:function(a){return this.data.key(a)},getAt:function(a){return this.data.itemAt(a)},getRange:function(c,a){return this.data.getRange(c,a)},storeOptions:function(a){a=Ext.apply({},a);delete a.callback;delete a.scope;this.lastOptions=a},load:function(c){c=c||{};if(this.fireEvent("beforeload",this,c)!==false){this.storeOptions(c);var g=Ext.apply(c.params||{},this.baseParams);if(this.sortInfo&&this.remoteSort){var a=this.paramNames;g[a.sort]=this.sortInfo.field;g[a.dir]=this.sortInfo.direction}this.proxy.load(g,this.reader,this.loadRecords,this,c);return true}else{return false}},reload:function(a){this.load(Ext.applyIf(a||{},this.lastOptions))},loadRecords:function(l,c,k){if(!l||k===false){if(k!==false){this.fireEvent("load",this,[],c)}if(c.callback){c.callback.call(c.scope||this,[],c,false)}return}var j=l.records,h=l.totalRecords||j.length;if(!c||c.add!==true){if(this.pruneModifiedRecords){this.modified=[]}for(var g=0,a=j.length;g<a;g++){j[g].join(this)}if(this.snapshot){this.data=this.snapshot;delete this.snapshot}this.data.clear();this.data.addAll(j);this.totalLength=h;this.applySort();this.fireEvent("datachanged",this)}else{this.totalLength=Math.max(h,this.data.length+j.length);this.add(j)}this.fireEvent("load",this,j,c);if(c.callback){c.callback.call(c.scope||this,j,c,true)}},loadData:function(g,a){var c=this.reader.readRecords(g);this.loadRecords(c,{add:a},true)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalLength||0},getSortState:function(){return this.sortInfo},applySort:function(){if(this.sortInfo&&!this.remoteSort){var a=this.sortInfo,c=a.field;this.sortData(c,a.direction)}},sortData:function(g,h){h=h||"ASC";var a=this.fields.get(g).sortType;var c=function(k,j){var m=a(k.data[g]),l=a(j.data[g]);return m>l?1:(m<l?-1:0)};this.data.sort(h,c);if(this.snapshot&&this.snapshot!=this.data){this.snapshot.sort(h,c)}},setDefaultSort:function(c,a){a=a?a.toUpperCase():"ASC";this.sortInfo={field:c,direction:a};this.sortToggle[c]=a},sort:function(j,g){var h=this.fields.get(j);if(!h){return false}if(!g){if(this.sortInfo&&this.sortInfo.field==h.name){g=(this.sortToggle[h.name]||"ASC").toggle("ASC","DESC")}else{g=h.sortDir}}var c=(this.sortToggle)?this.sortToggle[h.name]:null;var a=(this.sortInfo)?this.sortInfo:null;this.sortToggle[h.name]=g;this.sortInfo={field:h.name,direction:g};if(!this.remoteSort){this.applySort();this.fireEvent("datachanged",this)}else{if(!this.load(this.lastOptions)){if(c){this.sortToggle[h.name]=c}if(a){this.sortInfo=a}}}},each:function(c,a){this.data.each(c,a)},getModifiedRecords:function(){return this.modified},createFilterFn:function(g,c,h,a){if(Ext.isEmpty(c,false)){return false}c=this.data.createValueMatcher(c,h,a);return function(j){return c.test(j.data[g])}},sum:function(j,k,a){var g=this.data.items,c=0;k=k||0;a=(a||a===0)?a:g.length-1;for(var h=k;h<=a;h++){c+=(g[h].data[j]||0)}return c},filter:function(h,g,j,a){var c=this.createFilterFn(h,g,j,a);return c?this.filterBy(c):this.clearFilter()},filterBy:function(c,a){this.snapshot=this.snapshot||this.data;this.data=this.queryBy(c,a||this);this.fireEvent("datachanged",this)},query:function(h,g,j,a){var c=this.createFilterFn(h,g,j,a);return c?this.queryBy(c):this.data.clone()},queryBy:function(c,a){var g=this.snapshot||this.data;return g.filterBy(c,a||this)},find:function(h,g,k,j,a){var c=this.createFilterFn(h,g,j,a);return c?this.data.findIndexBy(c,null,k):-1},findBy:function(c,a,g){return this.data.findIndexBy(c,a,g)},collect:function(m,o,c){var k=(c===true&&this.snapshot)?this.snapshot.items:this.data.items;var p,q,a=[],g={};for(var h=0,j=k.length;h<j;h++){p=k[h].data[m];q=String(p);if((o||!Ext.isEmpty(p))&&!g[q]){g[q]=true;a[a.length]=p}}return a},clearFilter:function(a){if(this.isFiltered()){this.data=this.snapshot;delete this.snapshot;if(a!==true){this.fireEvent("datachanged",this)}}},isFiltered:function(){return this.snapshot&&this.snapshot!=this.data},afterEdit:function(a){if(this.modified.indexOf(a)==-1){this.modified.push(a)}this.fireEvent("update",this,a,Ext.data.Record.EDIT)},afterReject:function(a){this.modified.remove(a);this.fireEvent("update",this,a,Ext.data.Record.REJECT)},afterCommit:function(a){this.modified.remove(a);this.fireEvent("update",this,a,Ext.data.Record.COMMIT)},commitChanges:function(){var c=this.modified.slice(0);this.modified=[];for(var g=0,a=c.length;g<a;g++){c[g].commit()}},rejectChanges:function(){var c=this.modified.slice(0);this.modified=[];for(var g=0,a=c.length;g<a;g++){c[g].reject()}},onMetaChange:function(c,a,g){this.recordType=a;this.fields=a.prototype.fields;delete this.snapshot;if(c.sortInfo){this.sortInfo=c.sortInfo}else{if(this.sortInfo&&!this.fields.get(this.sortInfo.field)){delete this.sortInfo}}this.modified=[];this.fireEvent("metachange",this,this.reader.meta)},findInsertIndex:function(a){this.suspendEvents();var g=this.data.clone();this.data.add(a);this.applySort();var c=this.data.indexOf(a);this.data=g;this.resumeEvents();return c}});Ext.data.SimpleStore=function(a){Ext.data.SimpleStore.superclass.constructor.call(this,Ext.apply(a,{reader:new Ext.data.ArrayReader({id:a.id},Ext.data.Record.create(a.fields))}))};Ext.extend(Ext.data.SimpleStore,Ext.data.Store,{loadData:function(j,c){if(this.expandData===true){var h=[];for(var g=0,a=j.length;g<a;g++){h[h.length]=[j[g]]}j=h}Ext.data.SimpleStore.superclass.loadData.call(this,j,c)}});Ext.data.JsonStore=function(a){Ext.data.JsonStore.superclass.constructor.call(this,Ext.apply(a,{proxy:a.proxy||(!a.data?new Ext.data.HttpProxy({url:a.url}):undefined),reader:new Ext.data.JsonReader(a,a.fields)}))};Ext.extend(Ext.data.JsonStore,Ext.data.Store);Ext.data.Field=function(h){if(typeof h=="string"){h={name:h}}Ext.apply(this,h);if(!this.type){this.type="auto"}var g=Ext.data.SortTypes;if(typeof this.sortType=="string"){this.sortType=g[this.sortType]}if(!this.sortType){switch(this.type){case"string":this.sortType=g.asUCString;break;case"date":this.sortType=g.asDate;break;default:this.sortType=g.none}}var j=/[\$,%]/g;if(!this.convert){var c,a=this.dateFormat;switch(this.type){case"":case"auto":case undefined:c=function(k){return k};break;case"string":c=function(k){return(k===undefined||k===null)?"":String(k)};break;case"int":c=function(k){return k!==undefined&&k!==null&&k!==""?parseInt(String(k).replace(j,""),10):""};break;case"float":c=function(k){return k!==undefined&&k!==null&&k!==""?parseFloat(String(k).replace(j,""),10):""};break;case"bool":case"boolean":c=function(k){return k===true||k==="true"||k==1};break;case"date":c=function(l){if(!l){return""}if(Ext.isDate(l)){return l}if(a){if(a=="timestamp"){return new Date(l*1000)}if(a=="time"){return new Date(parseInt(l,10))}return Date.parseDate(l,a)}var k=Date.parse(l);return k?new Date(k):null};break}this.convert=c}};Ext.data.Field.prototype={dateFormat:null,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC"};Ext.data.DataReader=function(a,c){this.meta=a;this.recordType=Ext.isArray(c)?Ext.data.Record.create(c):c};Ext.data.DataReader.prototype={};Ext.data.DataProxy=function(){this.addEvents("beforeload","load");Ext.data.DataProxy.superclass.constructor.call(this)};Ext.extend(Ext.data.DataProxy,Ext.util.Observable,{destroy:function(){this.purgeListeners()}});Ext.data.MemoryProxy=function(a){Ext.data.MemoryProxy.superclass.constructor.call(this);this.data=a};Ext.extend(Ext.data.MemoryProxy,Ext.data.DataProxy,{load:function(k,g,l,h,c){k=k||{};var a;try{a=g.readRecords(this.data)}catch(j){this.fireEvent("loadexception",this,c,null,j);l.call(h,null,c,false);return}l.call(h,a,c,true)},update:function(c,a){}});Ext.data.HttpProxy=function(a){Ext.data.HttpProxy.superclass.constructor.call(this);this.conn=a;this.useAjax=!a||!a.events};Ext.extend(Ext.data.HttpProxy,Ext.data.DataProxy,{getConnection:function(){return this.useAjax?Ext.Ajax:this.conn},load:function(j,c,k,g,a){if(this.fireEvent("beforeload",this,j)!==false){var h={params:j||{},request:{callback:k,scope:g,arg:a},reader:c,callback:this.loadResponse,scope:this};if(this.useAjax){Ext.applyIf(h,this.conn);if(this.activeRequest){Ext.Ajax.abort(this.activeRequest)}this.activeRequest=Ext.Ajax.request(h)}else{this.conn.request(h)}}else{k.call(g||this,null,a,false)}},loadResponse:function(j,h,c){delete this.activeRequest;if(!h){this.fireEvent("loadexception",this,j,c);j.request.callback.call(j.request.scope,null,j.request.arg,false);return}var a;try{a=j.reader.read(c)}catch(g){this.fireEvent("loadexception",this,j,c,g);j.request.callback.call(j.request.scope,null,j.request.arg,false);return}this.fireEvent("load",this,j,j.request.arg);j.request.callback.call(j.request.scope,a,j.request.arg,true)},update:function(a){},updateResponse:function(a){},destroy:function(){if(!this.useAjax){this.conn.abort()}else{if(this.activeRequest){Ext.Ajax.abort(this.activeRequest)}}Ext.data.HttpProxy.superclass.destroy.call(this)}});Ext.data.ScriptTagProxy=function(a){Ext.data.ScriptTagProxy.superclass.constructor.call(this);Ext.apply(this,a);this.head=document.getElementsByTagName("head")[0]};Ext.data.ScriptTagProxy.TRANS_ID=1000;Ext.extend(Ext.data.ScriptTagProxy,Ext.data.DataProxy,{timeout:30000,callbackParam:"callback",nocache:true,load:function(j,k,m,o,q){if(this.fireEvent("beforeload",this,j)!==false){var g=Ext.urlEncode(Ext.apply(j,this.extraParams));var c=this.url;c+=(c.indexOf("?")!=-1?"&":"?")+g;if(this.nocache){c+="&_dc="+(new Date().getTime())}var a=++Ext.data.ScriptTagProxy.TRANS_ID;var r={id:a,cb:"stcCallback"+a,scriptId:"stcScript"+a,params:j,arg:q,url:c,callback:m,scope:o,reader:k};var h=this;window[r.cb]=function(p){h.handleResponse(p,r)};c+=String.format("&{0}={1}",this.callbackParam,r.cb);if(this.autoAbort!==false){this.abort()}r.timeoutId=this.handleFailure.defer(this.timeout,this,[r]);var l=document.createElement("script");l.setAttribute("src",c);l.setAttribute("type","text/javascript");l.setAttribute("id",r.scriptId);this.head.appendChild(l);this.trans=r}else{m.call(o||this,null,q,false)}},isLoading:function(){return this.trans?true:false},abort:function(){if(this.isLoading()){this.destroyTrans(this.trans)}},destroyTrans:function(c,a){this.head.removeChild(document.getElementById(c.scriptId));clearTimeout(c.timeoutId);if(a){window[c.cb]=undefined;try{delete window[c.cb]}catch(g){}}else{window[c.cb]=function(){window[c.cb]=undefined;try{delete window[c.cb]}catch(h){}}}},handleResponse:function(h,c){this.trans=false;this.destroyTrans(c,true);var a;try{a=c.reader.readRecords(h)}catch(g){this.fireEvent("loadexception",this,h,c.arg,g);c.callback.call(c.scope||window,null,c.arg,false);return}this.fireEvent("load",this,h,c.arg);c.callback.call(c.scope||window,a,c.arg,true)},handleFailure:function(a){this.trans=false;this.destroyTrans(a,false);this.fireEvent("loadexception",this,null,a.arg);a.callback.call(a.scope||window,null,a.arg,false)},destroy:function(){this.abort();Ext.data.ScriptTagProxy.superclass.destroy.call(this)}});Ext.data.JsonReader=function(a,c){a=a||{};Ext.data.JsonReader.superclass.constructor.call(this,a,c||a.fields)};Ext.extend(Ext.data.JsonReader,Ext.data.DataReader,{read:function(response){var json=response.responseText;var o=eval("("+json+")");if(!o){throw {message:"JsonReader.read: Json object not found"}}return this.readRecords(o)},onMetaChange:function(a,g,c){},simpleAccess:function(c,a){return c[a]},getJsonAccessor:function(){var a=/[\[\.]/;return function(g){try{return(a.test(g))?new Function("obj","return obj."+g):function(h){return h[g]}}catch(c){}return Ext.emptyFn}}(),readRecords:function(x){this.jsonData=x;if(x.metaData){delete this.ef;this.meta=x.metaData;this.recordType=Ext.data.Record.create(x.metaData.fields);this.onMetaChange(this.meta,this.recordType,x)}var r=this.meta,a=this.recordType,F=a.prototype.fields,p=F.items,m=F.length;if(!this.ef){if(r.totalProperty){this.getTotal=this.getJsonAccessor(r.totalProperty)}if(r.successProperty){this.getSuccess=this.getJsonAccessor(r.successProperty)}this.getRoot=r.root?this.getJsonAccessor(r.root):function(c){return c};if(r.id){var E=this.getJsonAccessor(r.id);this.getId=function(g){var c=E(g);return(c===undefined||c==="")?null:c}}else{this.getId=function(){return null}}this.ef=[];for(var B=0;B<m;B++){F=p[B];var H=(F.mapping!==undefined&&F.mapping!==null)?F.mapping:F.name;this.ef[B]=this.getJsonAccessor(H)}}var z=this.getRoot(x),G=z.length,t=G,l=true;if(r.totalProperty){var q=parseInt(this.getTotal(x),10);if(!isNaN(q)){t=q}}if(r.successProperty){var q=this.getSuccess(x);if(q===false||q==="false"){l=false}}var D=[];for(var B=0;B<G;B++){var y=z[B];var h={};var w=this.getId(y);for(var A=0;A<m;A++){F=p[A];var q=this.ef[A](y);h[F.name]=F.convert((q!==undefined)?q:F.defaultValue,y)}var k=new a(h,w);k.json=y;D[B]=k}return{success:l,records:D,totalRecords:t}}});Ext.data.XmlReader=function(a,c){a=a||{};Ext.data.XmlReader.superclass.constructor.call(this,a,c||a.fields)};Ext.extend(Ext.data.XmlReader,Ext.data.DataReader,{read:function(a){var c=a.responseXML;if(!c){throw {message:"XmlReader.read: XML Document not available"}}return this.readRecords(c)},readRecords:function(E){this.xmlData=E;var x=E.documentElement||E;var p=Ext.DomQuery;var c=this.recordType,t=c.prototype.fields;var h=this.meta.id;var m=0,k=true;if(this.meta.totalRecords){m=p.selectNumber(this.meta.totalRecords,x,0)}if(this.meta.success){var s=p.selectValue(this.meta.success,x,true);k=s!==false&&s!=="false"}var A=[];var F=p.select(this.meta.record,x);for(var z=0,B=F.length;z<B;z++){var w=F[z];var a={};var r=h?p.selectValue(h,w):undefined;for(var y=0,o=t.length;y<o;y++){var D=t.items[y];var l=p.selectValue(Ext.isEmpty(D.mapping,true)?D.name:D.mapping,w,D.defaultValue);l=D.convert(l,w);a[D.name]=l}var g=new c(a,r);g.node=w;A[A.length]=g}return{success:k,records:A,totalRecords:m||A.length}}});Ext.data.ArrayReader=Ext.extend(Ext.data.JsonReader,{readRecords:function(g){var c=this.meta?this.meta.id:null;var p=this.recordType,t=p.prototype.fields;var l=[];var x=g;for(var r=0;r<x.length;r++){var h=x[r];var z={};var a=((c||c===0)&&h[c]!==undefined&&h[c]!==""?h[c]:null);for(var q=0,A=t.length;q<A;q++){var w=t.items[q];var m=w.mapping!==undefined&&w.mapping!==null?w.mapping:q;var y=h[m]!==undefined?h[m]:w.defaultValue;y=w.convert(y,h);z[w.name]=y}var s=new p(z,a);s.json=h;l[l.length]=s}return{records:l,totalRecords:l.length}}});Ext.data.Tree=function(a){this.nodeHash={};this.root=null;if(a){this.setRootNode(a)}this.addEvents("append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert");Ext.data.Tree.superclass.constructor.call(this)};Ext.extend(Ext.data.Tree,Ext.util.Observable,{pathSeparator:"/",proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},setRootNode:function(a){this.root=a;a.ownerTree=this;a.isRoot=true;this.registerNode(a);return a},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(a){this.nodeHash[a.id]=a},unregisterNode:function(a){delete this.nodeHash[a.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"}});Ext.data.Node=function(a){this.attributes=a||{};this.leaf=this.attributes.leaf;this.id=this.attributes.id;if(!this.id){this.id=Ext.id(null,"ynode-");this.attributes.id=this.id}this.childNodes=[];if(!this.childNodes.indexOf){this.childNodes.indexOf=function(h){for(var g=0,c=this.length;g<c;g++){if(this[g]==h){return g}}return -1}}this.parentNode=null;this.firstChild=null;this.lastChild=null;this.previousSibling=null;this.nextSibling=null;this.addEvents({append:true,remove:true,move:true,insert:true,beforeappend:true,beforeremove:true,beforemove:true,beforeinsert:true});this.listeners=this.attributes.listeners;Ext.data.Node.superclass.constructor.call(this)};Ext.extend(Ext.data.Node,Ext.util.Observable,{fireEvent:function(c){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===false){return false}var a=this.getOwnerTree();if(a){if(a.proxyNodeEvent.apply(a,arguments)===false){return false}}return true},isLeaf:function(){return this.leaf===true},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},isLast:function(){return(!this.parentNode?true:this.parentNode.lastChild==this)},isFirst:function(){return(!this.parentNode?true:this.parentNode.firstChild==this)},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){return this.attributes.expandable||this.hasChildNodes()},appendChild:function(j){var k=false;if(Ext.isArray(j)){k=j}else{if(arguments.length>1){k=arguments}}if(k){for(var h=0,a=k.length;h<a;h++){this.appendChild(k[h])}}else{if(this.fireEvent("beforeappend",this.ownerTree,this,j)===false){return false}var c=this.childNodes.length;var g=j.parentNode;if(g){if(j.fireEvent("beforemove",j.getOwnerTree(),j,g,this,c)===false){return false}g.removeChild(j)}c=this.childNodes.length;if(c==0){this.setFirstChild(j)}this.childNodes.push(j);j.parentNode=this;var l=this.childNodes[c-1];if(l){j.previousSibling=l;l.nextSibling=j}else{j.previousSibling=null}j.nextSibling=null;this.setLastChild(j);j.setOwnerTree(this.getOwnerTree());this.fireEvent("append",this.ownerTree,this,j,c);if(g){j.fireEvent("move",this.ownerTree,j,g,this,c)}return j}},removeChild:function(c){var a=this.childNodes.indexOf(c);if(a==-1){return false}if(this.fireEvent("beforeremove",this.ownerTree,this,c)===false){return false}this.childNodes.splice(a,1);if(c.previousSibling){c.previousSibling.nextSibling=c.nextSibling}if(c.nextSibling){c.nextSibling.previousSibling=c.previousSibling}if(this.firstChild==c){this.setFirstChild(c.nextSibling)}if(this.lastChild==c){this.setLastChild(c.previousSibling)}c.setOwnerTree(null);c.parentNode=null;c.previousSibling=null;c.nextSibling=null;this.fireEvent("remove",this.ownerTree,this,c);return c},insertBefore:function(h,a){if(!a){return this.appendChild(h)}if(h==a){return false}if(this.fireEvent("beforeinsert",this.ownerTree,this,h,a)===false){return false}var c=this.childNodes.indexOf(a);var g=h.parentNode;var j=c;if(g==this&&this.childNodes.indexOf(h)<c){j--}if(g){if(h.fireEvent("beforemove",h.getOwnerTree(),h,g,this,c,a)===false){return false}g.removeChild(h)}if(j==0){this.setFirstChild(h)}this.childNodes.splice(j,0,h);h.parentNode=this;var k=this.childNodes[j-1];if(k){h.previousSibling=k;k.nextSibling=h}else{h.previousSibling=null}h.nextSibling=a;a.previousSibling=h;h.setOwnerTree(this.getOwnerTree());this.fireEvent("insert",this.ownerTree,this,h,a);if(g){h.fireEvent("move",this.ownerTree,h,g,this,j,a)}return h},remove:function(){this.parentNode.removeChild(this);return this},item:function(a){return this.childNodes[a]},replaceChild:function(a,g){var c=g?g.nextSibling:null;this.removeChild(g);this.insertBefore(a,c);return g},indexOf:function(a){return this.childNodes.indexOf(a)},getOwnerTree:function(){if(!this.ownerTree){var a=this;while(a){if(a.ownerTree){this.ownerTree=a.ownerTree;break}a=a.parentNode}}return this.ownerTree},getDepth:function(){var c=0;var a=this;while(a.parentNode){++c;a=a.parentNode}return c},setOwnerTree:function(c){if(c!=this.ownerTree){if(this.ownerTree){this.ownerTree.unregisterNode(this)}this.ownerTree=c;var h=this.childNodes;for(var g=0,a=h.length;g<a;g++){h[g].setOwnerTree(c)}if(c){c.registerNode(this)}}},getPath:function(c){c=c||"id";var h=this.parentNode;var a=[this.attributes[c]];while(h){a.unshift(h.attributes[c]);h=h.parentNode}var g=this.getOwnerTree().pathSeparator;return g+a.join(g)},bubble:function(g,c,a){var h=this;while(h){if(g.apply(c||h,a||[h])===false){break}h=h.parentNode}},cascade:function(k,j,c){if(k.apply(j||this,c||[this])!==false){var h=this.childNodes;for(var g=0,a=h.length;g<a;g++){h[g].cascade(k,j,c)}}},eachChild:function(k,j,c){var h=this.childNodes;for(var g=0,a=h.length;g<a;g++){if(k.apply(j||this,c||[h[g]])===false){break}}},findChild:function(h,j){var g=this.childNodes;for(var c=0,a=g.length;c<a;c++){if(g[c].attributes[h]==j){return g[c]}}return null},findChildBy:function(j,h){var g=this.childNodes;for(var c=0,a=g.length;c<a;c++){if(j.call(h||g[c],g[c])===true){return g[c]}}return null},sort:function(j,h){var g=this.childNodes;var a=g.length;if(a>0){var k=h?function(){j.apply(h,arguments)}:j;g.sort(k);for(var c=0;c<a;c++){var l=g[c];l.previousSibling=g[c-1];l.nextSibling=g[c+1];if(c==0){this.setFirstChild(l)}if(c==a-1){this.setLastChild(l)}}}},contains:function(a){return a.isAncestor(this)},isAncestor:function(a){var c=this.parentNode;while(c){if(c==a){return true}c=c.parentNode}return false},toString:function(){return"[Node"+(this.id?" "+this.id:"")+"]"}});Ext.data.GroupingStore=Ext.extend(Ext.data.Store,{constructor:function(a){Ext.data.GroupingStore.superclass.constructor.call(this,a);this.applyGroupField()},remoteGroup:false,groupOnSort:false,clearGrouping:function(){this.groupField=false;if(this.remoteGroup){if(this.baseParams){delete this.baseParams.groupBy}var a=this.lastOptions;if(a&&a.params){delete a.params.groupBy}this.reload()}else{this.applySort();this.fireEvent("datachanged",this)}},groupBy:function(g,c){if(this.groupField==g&&!c){return}this.groupField=g;this.applyGroupField();if(this.groupOnSort){this.sort(g);return}if(this.remoteGroup){this.reload()}else{var a=this.sortInfo||{};if(a.field!=g){this.applySort()}else{this.sortData(g)}this.fireEvent("datachanged",this)}},applyGroupField:function(){if(this.remoteGroup){if(!this.baseParams){this.baseParams={}}this.baseParams.groupBy=this.groupField}},applySort:function(){Ext.data.GroupingStore.superclass.applySort.call(this);if(!this.groupOnSort&&!this.remoteGroup){var a=this.getGroupState();if(a&&a!=this.sortInfo.field){this.sortData(this.groupField)}}},applyGrouping:function(a){if(this.groupField!==false){this.groupBy(this.groupField,true);return true}else{if(a===true){this.fireEvent("datachanged",this)}return false}},getGroupState:function(){return this.groupOnSort&&this.groupField!==false?(this.sortInfo?this.sortInfo.field:undefined):this.groupField}});Ext.ComponentMgr=function(){var c=new Ext.util.MixedCollection();var a={};return{register:function(g){c.add(g)},unregister:function(g){c.remove(g)},get:function(g){return c.get(g)},onAvailable:function(j,h,g){c.on("add",function(k,l){if(l.id==j){h.call(g||l,l);c.un("add",h,g)}})},all:c,registerType:function(h,g){a[h]=g;g.xtype=h},create:function(g,h){return new a[g.xtype||h](g)}}}();Ext.reg=Ext.ComponentMgr.registerType;Ext.Component=function(c){c=c||{};if(c.initialConfig){if(c.isAction){this.baseAction=c}c=c.initialConfig}else{if(c.tagName||c.dom||typeof c=="string"){c={applyTo:c,id:c.id||c}}}this.initialConfig=c;Ext.apply(this,c);this.addEvents("disable","enable","beforeshow","show","beforehide","hide","beforerender","render","beforedestroy","destroy","beforestaterestore","staterestore","beforestatesave","statesave");this.getId();Ext.ComponentMgr.register(this);Ext.Component.superclass.constructor.call(this);if(this.baseAction){this.baseAction.addComponent(this)}this.initComponent();if(this.plugins){if(Ext.isArray(this.plugins)){for(var g=0,a=this.plugins.length;g<a;g++){this.plugins[g]=this.initPlugin(this.plugins[g])}}else{this.plugins=this.initPlugin(this.plugins)}}if(this.stateful!==false){this.initState(c)}if(this.applyTo){this.applyToMarkup(this.applyTo);delete this.applyTo}else{if(this.renderTo){this.render(this.renderTo);delete this.renderTo}}};Ext.Component.AUTO_ID=1000;Ext.extend(Ext.Component,Ext.util.Observable,{disabledClass:"x-item-disabled",allowDomMove:true,autoShow:false,hideMode:"display",hideParent:false,hidden:false,disabled:false,rendered:false,ctype:"Ext.Component",actionMode:"el",getActionEl:function(){return this[this.actionMode]},initPlugin:function(a){a.init(this);return a},initComponent:Ext.emptyFn,render:function(c,a){if(!this.rendered&&this.fireEvent("beforerender",this)!==false){if(!c&&this.el){this.el=Ext.get(this.el);c=this.el.dom.parentNode;this.allowDomMove=false}this.container=Ext.get(c);if(this.ctCls){this.container.addClass(this.ctCls)}this.rendered=true;if(a!==undefined){if(typeof a=="number"){a=this.container.dom.childNodes[a]}else{a=Ext.getDom(a)}}this.onRender(this.container,a||null);if(this.autoShow){this.el.removeClass(["x-hidden","x-hide-"+this.hideMode])}if(this.cls){this.el.addClass(this.cls);delete this.cls}if(this.style){this.el.applyStyles(this.style);delete this.style}if(this.overCls){this.el.addClassOnOver(this.overCls)}this.fireEvent("render",this);this.afterRender(this.container);if(this.hidden){this.hide()}if(this.disabled){this.disable()}if(this.stateful!==false){this.initStateEvents()}}return this},initState:function(a){if(Ext.state.Manager){var g=this.getStateId();if(g){var c=Ext.state.Manager.get(g);if(c){if(this.fireEvent("beforestaterestore",this,c)!==false){this.applyState(c);this.fireEvent("staterestore",this,c)}}}}},getStateId:function(){return this.stateId||((this.id.indexOf("ext-comp-")==0||this.id.indexOf("ext-gen")==0)?null:this.id)},initStateEvents:function(){if(this.stateEvents){for(var a=0,c;c=this.stateEvents[a];a++){this.on(c,this.saveState,this,{delay:100})}}},applyState:function(c,a){if(c){Ext.apply(this,c)}},getState:function(){return null},saveState:function(){if(Ext.state.Manager&&this.stateful!==false){var c=this.getStateId();if(c){var a=this.getState();if(this.fireEvent("beforestatesave",this,a)!==false){Ext.state.Manager.set(c,a);this.fireEvent("statesave",this,a)}}}},applyToMarkup:function(a){this.allowDomMove=false;this.el=Ext.get(a);this.render(this.el.dom.parentNode)},addClass:function(a){if(this.el){this.el.addClass(a)}else{this.cls=this.cls?this.cls+" "+a:a}},removeClass:function(a){if(this.el){this.el.removeClass(a)}else{if(this.cls){this.cls=this.cls.split(" ").remove(a).join(" ")}}},onRender:function(c,a){if(this.autoEl){if(typeof this.autoEl=="string"){this.el=document.createElement(this.autoEl)}else{var g=document.createElement("div");Ext.DomHelper.overwrite(g,this.autoEl);this.el=g.firstChild}if(!this.el.id){this.el.id=this.getId()}}if(this.el){this.el=Ext.get(this.el);if(this.allowDomMove!==false){c.dom.insertBefore(this.el.dom,a)}}},getAutoCreate:function(){var a=typeof this.autoCreate=="object"?this.autoCreate:Ext.apply({},this.defaultAutoCreate);if(this.id&&!a.id){a.id=this.id}return a},afterRender:Ext.emptyFn,destroy:function(){if(this.fireEvent("beforedestroy",this)!==false){this.beforeDestroy();if(this.rendered){this.el.removeAllListeners();this.el.remove();if(this.actionMode=="container"){this.container.remove()}}this.onDestroy();Ext.ComponentMgr.unregister(this);this.fireEvent("destroy",this);this.purgeListeners()}},beforeDestroy:Ext.emptyFn,onDestroy:Ext.emptyFn,getEl:function(){return this.el},getId:function(){return this.id||(this.id="ext-comp-"+(++Ext.Component.AUTO_ID))},getItemId:function(){return this.itemId||this.getId()},focus:function(c,a){if(a){this.focus.defer(typeof a=="number"?a:10,this,[c,false]);return}if(this.rendered){this.el.focus();if(c===true){this.el.dom.select()}}return this},blur:function(){if(this.rendered){this.el.blur()}return this},disable:function(){if(this.rendered){this.onDisable()}this.disabled=true;this.fireEvent("disable",this);return this},onDisable:function(){this.getActionEl().addClass(this.disabledClass);this.el.dom.disabled=true},enable:function(){if(this.rendered){this.onEnable()}this.disabled=false;this.fireEvent("enable",this);return this},onEnable:function(){this.getActionEl().removeClass(this.disabledClass);this.el.dom.disabled=false},setDisabled:function(a){this[a?"disable":"enable"]()},show:function(){if(this.fireEvent("beforeshow",this)!==false){this.hidden=false;if(this.autoRender){this.render(typeof this.autoRender=="boolean"?Ext.getBody():this.autoRender)}if(this.rendered){this.onShow()}this.fireEvent("show",this)}return this},onShow:function(){if(this.hideParent){this.container.removeClass("x-hide-"+this.hideMode)}else{this.getActionEl().removeClass("x-hide-"+this.hideMode)}},hide:function(){if(this.fireEvent("beforehide",this)!==false){this.hidden=true;if(this.rendered){this.onHide()}this.fireEvent("hide",this)}return this},onHide:function(){if(this.hideParent){this.container.addClass("x-hide-"+this.hideMode)}else{this.getActionEl().addClass("x-hide-"+this.hideMode)}},setVisible:function(a){if(a){this.show()}else{this.hide()}return this},isVisible:function(){return this.rendered&&this.getActionEl().isVisible()},cloneConfig:function(c){c=c||{};var g=c.id||Ext.id();var a=Ext.applyIf(c,this.initialConfig);a.id=g;return new this.constructor(a)},getXType:function(){return this.constructor.xtype},isXType:function(c,a){if(typeof c=="function"){c=c.xtype}else{if(typeof c=="object"){c=c.constructor.xtype}}return !a?("/"+this.getXTypes()+"/").indexOf("/"+c+"/")!=-1:this.constructor.xtype==c},getXTypes:function(){var a=this.constructor;if(!a.xtypes){var h=[],g=this;while(g&&g.constructor.xtype){h.unshift(g.constructor.xtype);g=g.constructor.superclass}a.xtypeChain=h;a.xtypes=h.join("/")}return a.xtypes},findParentBy:function(a){for(var c=this.ownerCt;(c!=null)&&!a(c,this);c=c.ownerCt){}return c||null},findParentByType:function(a){return typeof a=="function"?this.findParentBy(function(c){return c.constructor===a}):this.findParentBy(function(c){return c.constructor.xtype===a})},mon:function(j,c,h,g,a){if(!this.mons){this.mons=[];this.on("beforedestroy",function(){for(var o=0,l=this.mons.length;o<l;o++){var k=this.mons[o];k.item.un(k.ename,k.fn,k.scope)}},this)}this.mons.push({item:j,ename:c,fn:h,scope:g});j.on(c,h,g,a)}});Ext.reg("component",Ext.Component);Ext.Action=function(a){this.initialConfig=a;this.items=[]};Ext.Action.prototype={isAction:true,setText:function(a){this.initialConfig.text=a;this.callEach("setText",[a])},getText:function(){return this.initialConfig.text},setIconClass:function(a){this.initialConfig.iconCls=a;this.callEach("setIconClass",[a])},getIconClass:function(){return this.initialConfig.iconCls},setDisabled:function(a){this.initialConfig.disabled=a;this.callEach("setDisabled",[a])},enable:function(){this.setDisabled(false)},disable:function(){this.setDisabled(true)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(a){this.initialConfig.hidden=a;this.callEach("setVisible",[!a])},show:function(){this.setHidden(false)},hide:function(){this.setHidden(true)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(c,a){this.initialConfig.handler=c;this.initialConfig.scope=a;this.callEach("setHandler",[c,a])},each:function(c,a){Ext.each(this.items,c,a)},callEach:function(j,c){var h=this.items;for(var g=0,a=h.length;g<a;g++){h[g][j].apply(h[g],c)}},addComponent:function(a){this.items.push(a);a.on("destroy",this.removeComponent,this)},removeComponent:function(a){this.items.remove(a)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||window,arguments)}};(function(){Ext.Layer=function(h,g){h=h||{};var j=Ext.DomHelper;var l=h.parentEl,k=l?Ext.getDom(l):document.body;if(g){this.dom=Ext.getDom(g)}if(!this.dom){var m=h.dh||{tag:"div",cls:"x-layer"};this.dom=j.append(k,m)}if(h.cls){this.addClass(h.cls)}this.constrain=h.constrain!==false;this.visibilityMode=Ext.Element.VISIBILITY;if(h.id){this.id=this.dom.id=h.id}else{this.id=Ext.id(this.dom)}this.zindex=h.zindex||this.getZIndex();this.position("absolute",this.zindex);if(h.shadow){this.shadowOffset=h.shadowOffset||4;this.shadow=new Ext.Shadow({offset:this.shadowOffset,mode:h.shadow})}else{this.shadowOffset=0}this.useShim=h.shim!==false&&Ext.useShims;this.useDisplay=h.useDisplay;this.hide()};var a=Ext.Element.prototype;var c=[];Ext.extend(Ext.Layer,Ext.Element,{getZIndex:function(){return this.zindex||parseInt((this.getShim()||this).getStyle("z-index"),10)||11000},getShim:function(){if(!this.useShim){return null}if(this.shim){return this.shim}var h=c.shift();if(!h){h=this.createShim();h.enableDisplayMode("block");h.dom.style.display="none";h.dom.style.visibility="visible"}var g=this.dom.parentNode;if(h.dom.parentNode!=g){g.insertBefore(h.dom,this.dom)}h.setStyle("z-index",this.getZIndex()-2);this.shim=h;return h},hideShim:function(){if(this.shim){this.shim.setDisplayed(false);c.push(this.shim);delete this.shim}},disableShadow:function(){if(this.shadow){this.shadowDisabled=true;this.shadow.hide();this.lastShadowOffset=this.shadowOffset;this.shadowOffset=0}},enableShadow:function(g){if(this.shadow){this.shadowDisabled=false;this.shadowOffset=this.lastShadowOffset;delete this.lastShadowOffset;if(g){this.sync(true)}}},sync:function(g){var q=this.shadow;if(!this.updating&&this.isVisible()&&(q||this.useShim)){var m=this.getShim();var p=this.getWidth(),k=this.getHeight();var j=this.getLeft(true),r=this.getTop(true);if(q&&!this.shadowDisabled){if(g&&!q.isVisible()){q.show(this)}else{q.realign(j,r,p,k)}if(m){if(g){m.show()}var o=q.adjusts,v=m.dom.style;v.left=(Math.min(j,j+o.l))+"px";v.top=(Math.min(r,r+o.t))+"px";v.width=(p+o.w)+"px";v.height=(k+o.h)+"px"}}else{if(m){if(g){m.show()}m.setSize(p,k);m.setLeftTop(j,r)}}}},destroy:function(){this.hideShim();if(this.shadow){this.shadow.hide()}this.removeAllListeners();Ext.removeNode(this.dom);Ext.Element.uncache(this.id)},remove:function(){this.destroy()},beginUpdate:function(){this.updating=true},endUpdate:function(){this.updating=false;this.sync(true)},hideUnders:function(g){if(this.shadow){this.shadow.hide()}this.hideShim()},constrainXY:function(){if(this.constrain){var m=Ext.lib.Dom.getViewWidth(),g=Ext.lib.Dom.getViewHeight();var t=Ext.getDoc().getScroll();var r=this.getXY();var o=r[0],l=r[1];var p=this.dom.offsetWidth+this.shadowOffset,j=this.dom.offsetHeight+this.shadowOffset;var k=false;if((o+p)>m+t.left){o=m-p-this.shadowOffset;k=true}if((l+j)>g+t.top){l=g-j-this.shadowOffset;k=true}if(o<t.left){o=t.left;k=true}if(l<t.top){l=t.top;k=true}if(k){if(this.avoidY){var q=this.avoidY;if(l<=q&&(l+j)>=q){l=q-j-5}}r=[o,l];this.storeXY(r);a.setXY.call(this,r);this.sync()}}},isVisible:function(){return this.visible},showAction:function(){this.visible=true;if(this.useDisplay===true){this.setDisplayed("")}else{if(this.lastXY){a.setXY.call(this,this.lastXY)}else{if(this.lastLT){a.setLeftTop.call(this,this.lastLT[0],this.lastLT[1])}}}},hideAction:function(){this.visible=false;if(this.useDisplay===true){this.setDisplayed(false)}else{this.setLeftTop(-10000,-10000)}},setVisible:function(j,h,l,m,k){if(j){this.showAction()}if(h&&j){var g=function(){this.sync(true);if(m){m()}}.createDelegate(this);a.setVisible.call(this,true,true,l,g,k)}else{if(!j){this.hideUnders(true)}var g=m;if(h){g=function(){this.hideAction();if(m){m()}}.createDelegate(this)}a.setVisible.call(this,j,h,l,g,k);if(j){this.sync(true)}else{if(!h){this.hideAction()}}}},storeXY:function(g){delete this.lastLT;this.lastXY=g},storeLeftTop:function(h,g){delete this.lastXY;this.lastLT=[h,g]},beforeFx:function(){this.beforeAction();return Ext.Layer.superclass.beforeFx.apply(this,arguments)},afterFx:function(){Ext.Layer.superclass.afterFx.apply(this,arguments);this.sync(this.isVisible())},beforeAction:function(){if(!this.updating&&this.shadow){this.shadow.hide()}},setLeft:function(g){this.storeLeftTop(g,this.getTop(true));a.setLeft.apply(this,arguments);this.sync()},setTop:function(g){this.storeLeftTop(this.getLeft(true),g);a.setTop.apply(this,arguments);this.sync()},setLeftTop:function(h,g){this.storeLeftTop(h,g);a.setLeftTop.apply(this,arguments);this.sync()},setXY:function(k,h,l,m,j){this.fixDisplay();this.beforeAction();this.storeXY(k);var g=this.createCB(m);a.setXY.call(this,k,h,l,g,j);if(!h){g()}},createCB:function(h){var g=this;return function(){g.constrainXY();g.sync(true);if(h){h()}}},setX:function(g,h,k,l,j){this.setXY([g,this.getY()],h,k,l,j)},setY:function(l,g,j,k,h){this.setXY([this.getX(),l],g,j,k,h)},setSize:function(k,l,j,o,p,m){this.beforeAction();var g=this.createCB(p);a.setSize.call(this,k,l,j,o,g,m);if(!j){g()}},setWidth:function(j,h,l,m,k){this.beforeAction();var g=this.createCB(m);a.setWidth.call(this,j,h,l,g,k);if(!h){g()}},setHeight:function(k,j,m,o,l){this.beforeAction();var g=this.createCB(o);a.setHeight.call(this,k,j,m,g,l);if(!j){g()}},setBounds:function(q,o,r,j,p,l,m,k){this.beforeAction();var g=this.createCB(m);if(!p){this.storeXY([q,o]);a.setXY.call(this,[q,o]);a.setSize.call(this,r,j,p,l,g,k);g()}else{a.setBounds.call(this,q,o,r,j,p,l,g,k)}return this},setZIndex:function(g){this.zindex=g;this.setStyle("z-index",g+2);if(this.shadow){this.shadow.setZIndex(g+1)}if(this.shim){this.shim.setStyle("z-index",g)}}})})();Ext.Shadow=function(h){Ext.apply(this,h);if(typeof this.mode!="string"){this.mode=this.defaultMode}var j=this.offset,g={h:0};var c=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case"drop":g.w=0;g.l=g.t=j;g.t-=1;if(Ext.isIE){g.l-=this.offset+c;g.t-=this.offset+c;g.w-=c;g.h-=c;g.t+=1}break;case"sides":g.w=(j*2);g.l=-j;g.t=j-1;if(Ext.isIE){g.l-=(this.offset-c);g.t-=this.offset+c;g.l+=1;g.w-=(this.offset-c)*2;g.w-=c+1;g.h-=1}break;case"frame":g.w=g.h=(j*2);g.l=g.t=-j;g.t+=1;g.h-=2;if(Ext.isIE){g.l-=(this.offset-c);g.t-=(this.offset-c);g.l+=1;g.w-=(this.offset+c+1);g.h-=(this.offset+c);g.h+=1}break}this.adjusts=g};Ext.Shadow.prototype={offset:4,defaultMode:"drop",show:function(a){a=Ext.get(a);if(!this.el){this.el=Ext.Shadow.Pool.pull();if(this.el.dom.nextSibling!=a.dom){this.el.insertBefore(a)}}this.el.setStyle("z-index",this.zIndex||parseInt(a.getStyle("z-index"),10)-1);if(Ext.isIE){this.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+(this.offset)+")"}this.realign(a.getLeft(true),a.getTop(true),a.getWidth(),a.getHeight());this.el.dom.style.display="block"},isVisible:function(){return this.el?true:false},realign:function(c,z,y,k){if(!this.el){return}var r=this.adjusts,p=this.el.dom,A=p.style;var m=0;A.left=(c+r.l)+"px";A.top=(z+r.t)+"px";var x=(y+r.w),j=(k+r.h),o=x+"px",v=j+"px";if(A.width!=o||A.height!=v){A.width=o;A.height=v;if(!Ext.isIE){var q=p.childNodes;var g=Math.max(0,(x-12))+"px";q[0].childNodes[1].style.width=g;q[1].childNodes[1].style.width=g;q[2].childNodes[1].style.width=g;q[1].style.height=Math.max(0,(j-12))+"px"}}},hide:function(){if(this.el){this.el.dom.style.display="none";Ext.Shadow.Pool.push(this.el);delete this.el}},setZIndex:function(a){this.zIndex=a;if(this.el){this.el.setStyle("z-index",a)}}};Ext.Shadow.Pool=function(){var c=[];var a=Ext.isIE?'<div class="x-ie-shadow"></div>':'<div class="x-shadow"><div class="xst"><div class="xstl"></div><div class="xstc"></div><div class="xstr"></div></div><div class="xsc"><div class="xsml"></div><div class="xsmc"></div><div class="xsmr"></div></div><div class="xsb"><div class="xsbl"></div><div class="xsbc"></div><div class="xsbr"></div></div></div>';return{pull:function(){var g=c.shift();if(!g){g=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,a));g.autoBoxAdjust=false}return g},push:function(g){c.push(g)}}}();Ext.BoxComponent=Ext.extend(Ext.Component,{initComponent:function(){Ext.BoxComponent.superclass.initComponent.call(this);this.addEvents("resize","move")},boxReady:false,deferHeight:false,setSize:function(c,j){if(typeof c=="object"){j=c.height;c=c.width}if(!this.boxReady){this.width=c;this.height=j;return this}if(this.lastSize&&this.lastSize.width==c&&this.lastSize.height==j){return this}this.lastSize={width:c,height:j};var g=this.adjustSize(c,j);var l=g.width,a=g.height;if(l!==undefined||a!==undefined){var k=this.getResizeEl();if(!this.deferHeight&&l!==undefined&&a!==undefined){k.setSize(l,a)}else{if(!this.deferHeight&&a!==undefined){k.setHeight(a)}else{if(l!==undefined){k.setWidth(l)}}}this.onResize(l,a,c,j);this.fireEvent("resize",this,l,a,c,j)}return this},setWidth:function(a){return this.setSize(a)},setHeight:function(a){return this.setSize(undefined,a)},getSize:function(){return this.el.getSize()},getPosition:function(a){if(a===true){return[this.el.getLeft(true),this.el.getTop(true)]}return this.xy||this.el.getXY()},getBox:function(a){var c=this.el.getSize();if(a===true){c.x=this.el.getLeft(true);c.y=this.el.getTop(true)}else{var g=this.xy||this.el.getXY();c.x=g[0];c.y=g[1]}return c},updateBox:function(a){this.setSize(a.width,a.height);this.setPagePosition(a.x,a.y);return this},getResizeEl:function(){return this.resizeEl||this.el},getPositionEl:function(){return this.positionEl||this.el},setPosition:function(a,k){if(a&&typeof a[1]=="number"){k=a[1];a=a[0]}this.x=a;this.y=k;if(!this.boxReady){return this}var c=this.adjustPosition(a,k);var j=c.x,h=c.y;var g=this.getPositionEl();if(j!==undefined||h!==undefined){if(j!==undefined&&h!==undefined){g.setLeftTop(j,h)}else{if(j!==undefined){g.setLeft(j)}else{if(h!==undefined){g.setTop(h)}}}this.onPosition(j,h);this.fireEvent("move",this,j,h)}return this},setPagePosition:function(a,g){if(a&&typeof a[1]=="number"){g=a[1];a=a[0]}this.pageX=a;this.pageY=g;if(!this.boxReady){return}if(a===undefined||g===undefined){return}var c=this.el.translatePoints(a,g);this.setPosition(c.left,c.top);return this},onRender:function(c,a){Ext.BoxComponent.superclass.onRender.call(this,c,a);if(this.resizeEl){this.resizeEl=Ext.get(this.resizeEl)}if(this.positionEl){this.positionEl=Ext.get(this.positionEl)}},afterRender:function(){Ext.BoxComponent.superclass.afterRender.call(this);this.boxReady=true;this.setSize(this.width,this.height);if(this.x||this.y){this.setPosition(this.x,this.y)}else{if(this.pageX||this.pageY){this.setPagePosition(this.pageX,this.pageY)}}},syncSize:function(){delete this.lastSize;this.setSize(this.autoWidth?undefined:this.el.getWidth(),this.autoHeight?undefined:this.el.getHeight());return this},onResize:function(h,c,a,g){},onPosition:function(a,c){},adjustSize:function(a,c){if(this.autoWidth){a="auto"}if(this.autoHeight){c="auto"}return{width:a,height:c}},adjustPosition:function(a,c){return{x:a,y:c}}});Ext.reg("box",Ext.BoxComponent);Ext.SplitBar=function(g,j,c,h,a){this.el=Ext.get(g,true);this.el.dom.unselectable="on";this.resizingEl=Ext.get(j,true);this.orientation=c||Ext.SplitBar.HORIZONTAL;this.minSize=0;this.maxSize=2000;this.animate=false;this.useShim=false;this.shim=null;if(!a){this.proxy=Ext.SplitBar.createProxy(this.orientation)}else{this.proxy=Ext.get(a).dom}this.dd=new Ext.dd.DDProxy(this.el.dom.id,"XSplitBars",{dragElId:this.proxy.id});this.dd.b4StartDrag=this.onStartProxyDrag.createDelegate(this);this.dd.endDrag=this.onEndProxyDrag.createDelegate(this);this.dragSpecs={};this.adapter=new Ext.SplitBar.BasicLayoutAdapter();this.adapter.init(this);if(this.orientation==Ext.SplitBar.HORIZONTAL){this.placement=h||(this.el.getX()>this.resizingEl.getX()?Ext.SplitBar.LEFT:Ext.SplitBar.RIGHT);this.el.addClass("x-splitbar-h")}else{this.placement=h||(this.el.getY()>this.resizingEl.getY()?Ext.SplitBar.TOP:Ext.SplitBar.BOTTOM);this.el.addClass("x-splitbar-v")}this.addEvents("resize","moved","beforeresize","beforeapply");Ext.SplitBar.superclass.constructor.call(this)};Ext.extend(Ext.SplitBar,Ext.util.Observable,{onStartProxyDrag:function(a,j){this.fireEvent("beforeresize",this);this.overlay=Ext.DomHelper.append(document.body,{cls:"x-drag-overlay",html:"&#160;"},true);this.overlay.unselectable();this.overlay.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.overlay.show();Ext.get(this.proxy).setDisplayed("block");var g=this.adapter.getElementSize(this);this.activeMinSize=this.getMinimumSize();this.activeMaxSize=this.getMaximumSize();var h=g-this.activeMinSize;var c=Math.max(this.activeMaxSize-g,0);if(this.orientation==Ext.SplitBar.HORIZONTAL){this.dd.resetConstraints();this.dd.setXConstraint(this.placement==Ext.SplitBar.LEFT?h:c,this.placement==Ext.SplitBar.LEFT?c:h);this.dd.setYConstraint(0,0)}else{this.dd.resetConstraints();this.dd.setXConstraint(0,0);this.dd.setYConstraint(this.placement==Ext.SplitBar.TOP?h:c,this.placement==Ext.SplitBar.TOP?c:h)}this.dragSpecs.startSize=g;this.dragSpecs.startPoint=[a,j];Ext.dd.DDProxy.prototype.b4StartDrag.call(this.dd,a,j)},onEndProxyDrag:function(g){Ext.get(this.proxy).setDisplayed(false);var c=Ext.lib.Event.getXY(g);if(this.overlay){Ext.destroy(this.overlay);delete this.overlay}var a;if(this.orientation==Ext.SplitBar.HORIZONTAL){a=this.dragSpecs.startSize+(this.placement==Ext.SplitBar.LEFT?c[0]-this.dragSpecs.startPoint[0]:this.dragSpecs.startPoint[0]-c[0])}else{a=this.dragSpecs.startSize+(this.placement==Ext.SplitBar.TOP?c[1]-this.dragSpecs.startPoint[1]:this.dragSpecs.startPoint[1]-c[1])}a=Math.min(Math.max(a,this.activeMinSize),this.activeMaxSize);if(a!=this.dragSpecs.startSize){if(this.fireEvent("beforeapply",this,a)!==false){this.adapter.setElementSize(this,a);this.fireEvent("moved",this,a);this.fireEvent("resize",this,a)}}},getAdapter:function(){return this.adapter},setAdapter:function(a){this.adapter=a;this.adapter.init(this)},getMinimumSize:function(){return this.minSize},setMinimumSize:function(a){this.minSize=a},getMaximumSize:function(){return this.maxSize},setMaximumSize:function(a){this.maxSize=a},setCurrentSize:function(c){var a=this.animate;this.animate=false;this.adapter.setElementSize(this,c);this.animate=a},destroy:function(a){if(this.shim){this.shim.remove()}this.dd.unreg();Ext.destroy(Ext.get(this.proxy));if(a){this.el.remove()}}});Ext.SplitBar.createProxy=function(c){var g=new Ext.Element(document.createElement("div"));g.unselectable();var a="x-splitbar-proxy";g.addClass(a+" "+(c==Ext.SplitBar.HORIZONTAL?a+"-h":a+"-v"));document.body.appendChild(g.dom);return g.dom};Ext.SplitBar.BasicLayoutAdapter=function(){};Ext.SplitBar.BasicLayoutAdapter.prototype={init:function(a){},getElementSize:function(a){if(a.orientation==Ext.SplitBar.HORIZONTAL){return a.resizingEl.getWidth()}else{return a.resizingEl.getHeight()}},setElementSize:function(c,a,g){if(c.orientation==Ext.SplitBar.HORIZONTAL){if(!c.animate){c.resizingEl.setWidth(a);if(g){g(c,a)}}else{c.resizingEl.setWidth(a,true,0.1,g,"easeOut")}}else{if(!c.animate){c.resizingEl.setHeight(a);if(g){g(c,a)}}else{c.resizingEl.setHeight(a,true,0.1,g,"easeOut")}}}};Ext.SplitBar.AbsoluteLayoutAdapter=function(a){this.basic=new Ext.SplitBar.BasicLayoutAdapter();this.container=Ext.get(a)};Ext.SplitBar.AbsoluteLayoutAdapter.prototype={init:function(a){this.basic.init(a)},getElementSize:function(a){return this.basic.getElementSize(a)},setElementSize:function(c,a,g){this.basic.setElementSize(c,a,this.moveSplitter.createDelegate(this,[c]))},moveSplitter:function(a){var c=Ext.SplitBar;switch(a.placement){case c.LEFT:a.el.setX(a.resizingEl.getRight());break;case c.RIGHT:a.el.setStyle("right",(this.container.getWidth()-a.resizingEl.getLeft())+"px");break;case c.TOP:a.el.setY(a.resizingEl.getBottom());break;case c.BOTTOM:a.el.setY(a.resizingEl.getTop()-a.el.getHeight());break}}};Ext.SplitBar.VERTICAL=1;Ext.SplitBar.HORIZONTAL=2;Ext.SplitBar.LEFT=1;Ext.SplitBar.RIGHT=2;Ext.SplitBar.TOP=3;Ext.SplitBar.BOTTOM=4;Ext.Container=Ext.extend(Ext.BoxComponent,{autoDestroy:true,defaultType:"panel",initComponent:function(){Ext.Container.superclass.initComponent.call(this);this.addEvents("afterlayout","beforeadd","beforeremove","add","remove");var a=this.items;if(a){delete this.items;if(Ext.isArray(a)){if(a.length>0){this.add.apply(this,a)}}else{this.add(a)}}},initItems:function(){if(!this.items){this.items=new Ext.util.MixedCollection(false,this.getComponentId);this.getLayout()}},setLayout:function(a){if(this.layout&&this.layout!=a){this.layout.setContainer(null)}this.initItems();this.layout=a;a.setContainer(this)},render:function(){Ext.Container.superclass.render.apply(this,arguments);if(this.layout){if(typeof this.layout=="string"){this.layout=new Ext.Container.LAYOUTS[this.layout.toLowerCase()](this.layoutConfig)}this.setLayout(this.layout);if(this.activeItem!==undefined){var a=this.activeItem;delete this.activeItem;this.layout.setActiveItem(a);return}}if(!this.ownerCt){this.doLayout()}if(this.monitorResize===true){Ext.EventManager.onWindowResize(this.doLayout,this,[false])}},getLayoutTarget:function(){return this.el},getComponentId:function(a){return a.itemId||a.id},add:function(j){this.initItems();var h=arguments,g=h.length;if(g>1){for(var k=0;k<g;k++){this.add(h[k])}return}var m=this.lookupComponent(this.applyDefaults(j));var l=this.items.length;if(this.fireEvent("beforeadd",this,m,l)!==false&&this.onBeforeAdd(m)!==false){this.items.add(m);m.ownerCt=this;this.fireEvent("add",this,m,l)}return m},insert:function(k,j){this.initItems();var h=arguments,g=h.length;if(g>2){for(var l=g-1;l>=1;--l){this.insert(k,h[l])}return}var m=this.lookupComponent(this.applyDefaults(j));if(m.ownerCt==this&&this.items.indexOf(m)<k){--k}if(this.fireEvent("beforeadd",this,m,k)!==false&&this.onBeforeAdd(m)!==false){this.items.insert(k,m);m.ownerCt=this;this.fireEvent("add",this,m,k)}return m},applyDefaults:function(a){if(this.defaults){if(typeof a=="string"){a=Ext.ComponentMgr.get(a);Ext.apply(a,this.defaults)}else{if(!a.events){Ext.applyIf(a,this.defaults)}else{Ext.apply(a,this.defaults)}}}return a},onBeforeAdd:function(a){if(a.ownerCt){a.ownerCt.remove(a,false)}if(this.hideBorders===true){a.border=(a.border===true)}},remove:function(a,g){this.initItems();var h=this.getComponent(a);if(h&&this.fireEvent("beforeremove",this,h)!==false){this.items.remove(h);delete h.ownerCt;if(g===true||(g!==false&&this.autoDestroy)){h.destroy()}if(this.layout&&this.layout.activeItem==h){delete this.layout.activeItem}this.fireEvent("remove",this,h)}return h},removeAll:function(c){this.initItems();var g,a=[];while((g=this.items.last())){a.unshift(this.remove(g,c))}return a},getComponent:function(a){if(typeof a=="object"){return a}return this.items.get(a)},lookupComponent:function(a){if(typeof a=="string"){return Ext.ComponentMgr.get(a)}else{if(!a.events){return this.createComponent(a)}}return a},createComponent:function(a){return Ext.ComponentMgr.create(a,this.defaultType)},doLayout:function(j){if(this.rendered&&this.layout){this.layout.layout()}if(j!==true&&this.items){var h=this.items.items;for(var g=0,a=h.length;g<a;g++){var k=h[g];if(k.doLayout){k.doLayout()}}}},getLayout:function(){if(!this.layout){var a=new Ext.layout.ContainerLayout(this.layoutConfig);this.setLayout(a)}return this.layout},beforeDestroy:function(){if(this.items){Ext.destroy.apply(Ext,this.items.items)}if(this.monitorResize){Ext.EventManager.removeResizeListener(this.doLayout,this)}if(this.layout&&this.layout.destroy){this.layout.destroy()}Ext.Container.superclass.beforeDestroy.call(this)},bubble:function(g,c,a){var h=this;while(h){if(g.apply(c||h,a||[h])===false){break}h=h.ownerCt}},cascade:function(k,j,c){if(k.apply(j||this,c||[this])!==false){if(this.items){var h=this.items.items;for(var g=0,a=h.length;g<a;g++){if(h[g].cascade){h[g].cascade(k,j,c)}else{k.apply(j||h[g],c||[h[g]])}}}}},findById:function(g){var a,c=this;this.cascade(function(h){if(c!=h&&h.id===g){a=h;return false}});return a||null},findByType:function(c,a){return this.findBy(function(g){return g.isXType(c,a)})},find:function(c,a){return this.findBy(function(g){return g[c]===a})},findBy:function(h,g){var a=[],c=this;this.cascade(function(j){if(c!=j&&h.call(g||j,j,c)===true){a.push(j)}});return a}});Ext.Container.LAYOUTS={};Ext.reg("container",Ext.Container);Ext.layout.ContainerLayout=function(a){Ext.apply(this,a)};Ext.layout.ContainerLayout.prototype={monitorResize:false,activeItem:null,layout:function(){var a=this.container.getLayoutTarget();this.onLayout(this.container,a);this.container.fireEvent("afterlayout",this.container,this)},onLayout:function(a,c){this.renderAll(a,c)},isValidParent:function(h,g){var a=h.getPositionEl?h.getPositionEl():h.getEl();return a.dom.parentNode==g.dom},renderAll:function(j,k){var g=j.items.items;for(var h=0,a=g.length;h<a;h++){var l=g[h];if(l&&(!l.rendered||!this.isValidParent(l,k))){this.renderItem(l,h,k)}}},renderItem:function(j,a,h){if(j&&!j.rendered){j.render(h,a);if(this.extraCls){var g=j.getPositionEl?j.getPositionEl():j;g.addClass(this.extraCls)}if(this.renderHidden&&j!=this.activeItem){j.hide()}}else{if(j&&!this.isValidParent(j,h)){if(this.extraCls){var g=j.getPositionEl?j.getPositionEl():j;g.addClass(this.extraCls)}if(typeof a=="number"){a=h.dom.childNodes[a]}h.dom.insertBefore(j.getEl().dom,a||null);if(this.renderHidden&&j!=this.activeItem){j.hide()}}}},onResize:function(){if(this.container.collapsed){return}var a=this.container.bufferResize;if(a){if(!this.resizeTask){this.resizeTask=new Ext.util.DelayedTask(this.layout,this);this.resizeBuffer=typeof a=="number"?a:100}this.resizeTask.delay(this.resizeBuffer)}else{this.layout()}},setContainer:function(a){if(this.monitorResize&&a!=this.container){if(this.container){this.container.un("resize",this.onResize,this)}if(a){a.on("resize",this.onResize,this)}}this.container=a},parseMargins:function(c){var g=c.split(" ");var a=g.length;if(a==1){g[1]=g[0];g[2]=g[0];g[3]=g[0]}if(a==2){g[2]=g[0];g[3]=g[1]}return{top:parseInt(g[0],10)||0,right:parseInt(g[1],10)||0,bottom:parseInt(g[2],10)||0,left:parseInt(g[3],10)||0}},destroy:Ext.emptyFn};Ext.Container.LAYOUTS.auto=Ext.layout.ContainerLayout;Ext.layout.FitLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,onLayout:function(a,g){Ext.layout.FitLayout.superclass.onLayout.call(this,a,g);if(!this.container.collapsed){var c=(Ext.isIE6&&Ext.isStrict&&g.dom==document.body)?g.getViewSize():g.getStyleSize();this.setItemSize(this.activeItem||a.items.itemAt(0),c)}},setItemSize:function(c,a){if(c&&a.height>0){c.setSize(a)}}});Ext.Container.LAYOUTS.fit=Ext.layout.FitLayout;Ext.layout.CardLayout=Ext.extend(Ext.layout.FitLayout,{deferredRender:false,renderHidden:true,setActiveItem:function(a){a=this.container.getComponent(a);if(this.activeItem!=a){if(this.activeItem){this.activeItem.hide()}this.activeItem=a;a.show();this.layout()}},renderAll:function(a,c){if(this.deferredRender){this.renderItem(this.activeItem,undefined,c)}else{Ext.layout.CardLayout.superclass.renderAll.call(this,a,c)}}});Ext.Container.LAYOUTS.card=Ext.layout.CardLayout;Ext.layout.AnchorLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,getAnchorViewSize:function(a,c){return c.dom==document.body?c.getViewSize():c.getStyleSize()},onLayout:function(o,r){Ext.layout.AnchorLayout.superclass.onLayout.call(this,o,r);var z=this.getAnchorViewSize(o,r);var x=z.width,m=z.height;if(x<20||m<20){return}var j,t;if(o.anchorSize){if(typeof o.anchorSize=="number"){j=o.anchorSize}else{j=o.anchorSize.width;t=o.anchorSize.height}}else{j=o.initialConfig.width;t=o.initialConfig.height}var q=o.items.items,p=q.length,l,s,v,k,g;for(l=0;l<p;l++){s=q[l];if(s.anchor){v=s.anchorSpec;if(!v){var y=s.anchor.split(" ");s.anchorSpec=v={right:this.parseAnchor(y[0],s.initialConfig.width,j),bottom:this.parseAnchor(y[1],s.initialConfig.height,t)}}k=v.right?this.adjustWidthAnchor(v.right(x),s):undefined;g=v.bottom?this.adjustHeightAnchor(v.bottom(m),s):undefined;if(k||g){s.setSize(k||undefined,g||undefined)}}}},parseAnchor:function(g,l,c){if(g&&g!="none"){var j;if(/^(r|right|b|bottom)$/i.test(g)){var k=c-l;return function(a){if(a!==j){j=a;return a-k}}}else{if(g.indexOf("%")!=-1){var h=parseFloat(g.replace("%",""))*0.01;return function(a){if(a!==j){j=a;return Math.floor(a*h)}}}else{g=parseInt(g,10);if(!isNaN(g)){return function(a){if(a!==j){j=a;return a+g}}}}}}return false},adjustWidthAnchor:function(c,a){return c},adjustHeightAnchor:function(c,a){return c}});Ext.Container.LAYOUTS.anchor=Ext.layout.AnchorLayout;Ext.layout.ColumnLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,extraCls:"x-column",scrollOffset:0,isValidParent:function(g,a){return(g.getPositionEl?g.getPositionEl():g.getEl()).dom.parentNode==this.innerCt.dom},onLayout:function(j,m){var k=j.items.items,l=k.length,o,a;if(!this.innerCt){m.addClass("x-column-layout-ct");this.innerCt=m.createChild({cls:"x-column-inner"});this.innerCt.createChild({cls:"x-clear"})}this.renderAll(j,this.innerCt);var r=Ext.isIE&&m.dom!=Ext.getBody().dom?m.getStyleSize():m.getViewSize();if(r.width<1&&r.height<1){return}var p=r.width-m.getPadding("lr")-this.scrollOffset,g=r.height-m.getPadding("tb"),q=p;this.innerCt.setWidth(p);for(a=0;a<l;a++){o=k[a];if(!o.columnWidth){q-=(o.getSize().width+o.getEl().getMargins("lr"))}}q=q<0?0:q;for(a=0;a<l;a++){o=k[a];if(o.columnWidth){o.setSize(Math.floor(o.columnWidth*q)-o.getEl().getMargins("lr"))}}}});Ext.Container.LAYOUTS.column=Ext.layout.ColumnLayout;Ext.layout.BorderLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,rendered:false,onLayout:function(g,K){var j;if(!this.rendered){K.addClass("x-border-layout-ct");var y=g.items.items;j=[];for(var D=0,E=y.length;D<E;D++){var H=y[D];var o=H.region;if(H.collapsed){j.push(H)}H.collapsed=false;if(!H.rendered){H.cls=H.cls?H.cls+" x-border-panel":"x-border-panel";H.render(K,D)}this[o]=o!="center"&&H.split?new Ext.layout.BorderLayout.SplitRegion(this,H.initialConfig,o):new Ext.layout.BorderLayout.Region(this,H.initialConfig,o);this[o].render(K,H)}this.rendered=true}var x=K.getViewSize();if(x.width<20||x.height<20){if(j){this.restoreCollapsed=j}return}else{if(this.restoreCollapsed){j=this.restoreCollapsed;delete this.restoreCollapsed}}var t=x.width,F=x.height;var r=t,B=F,p=0,q=0;var z=this.north,v=this.south,l=this.west,G=this.east,H=this.center;if(!H&&Ext.layout.BorderLayout.WARN!==false){throw"No center region defined in BorderLayout "+g.id}if(z&&z.isVisible()){var J=z.getSize();var A=z.getMargins();J.width=t-(A.left+A.right);J.x=A.left;J.y=A.top;p=J.height+J.y+A.bottom;B-=p;z.applyLayout(J)}if(v&&v.isVisible()){var J=v.getSize();var A=v.getMargins();J.width=t-(A.left+A.right);J.x=A.left;var I=(J.height+A.top+A.bottom);J.y=F-I+A.top;B-=I;v.applyLayout(J)}if(l&&l.isVisible()){var J=l.getSize();var A=l.getMargins();J.height=B-(A.top+A.bottom);J.x=A.left;J.y=p+A.top;var a=(J.width+A.left+A.right);q+=a;r-=a;l.applyLayout(J)}if(G&&G.isVisible()){var J=G.getSize();var A=G.getMargins();J.height=B-(A.top+A.bottom);var a=(J.width+A.left+A.right);J.x=t-a+A.left;J.y=p+A.top;r-=a;G.applyLayout(J)}if(H){var A=H.getMargins();var k={x:q+A.left,y:p+A.top,width:r-(A.left+A.right),height:B-(A.top+A.bottom)};H.applyLayout(k)}if(j){for(var D=0,E=j.length;D<E;D++){j[D].collapse(false)}}if(Ext.isIE&&Ext.isStrict){K.repaint()}},destroy:function(){var c=["north","south","east","west"];for(var a=0;a<c.length;a++){var g=this[c[a]];if(g){if(g.destroy){g.destroy()}else{if(g.split){g.split.destroy(true)}}}}Ext.layout.BorderLayout.superclass.destroy.call(this)}});Ext.layout.BorderLayout.Region=function(c,a,g){Ext.apply(this,a);this.layout=c;this.position=g;this.state={};if(typeof this.margins=="string"){this.margins=this.layout.parseMargins(this.margins)}this.margins=Ext.applyIf(this.margins||{},this.defaultMargins);if(this.collapsible){if(typeof this.cmargins=="string"){this.cmargins=this.layout.parseMargins(this.cmargins)}if(this.collapseMode=="mini"&&!this.cmargins){this.cmargins={left:0,top:0,right:0,bottom:0}}else{this.cmargins=Ext.applyIf(this.cmargins||{},g=="north"||g=="south"?this.defaultNSCMargins:this.defaultEWCMargins)}}};Ext.layout.BorderLayout.Region.prototype={collapsible:false,split:false,floatable:true,minWidth:50,minHeight:50,defaultMargins:{left:0,top:0,right:0,bottom:0},defaultNSCMargins:{left:5,top:5,right:5,bottom:5},defaultEWCMargins:{left:5,top:0,right:5,bottom:0},isCollapsed:false,render:function(c,g){this.panel=g;g.el.enableDisplayMode();this.targetEl=c;this.el=g.el;var a=g.getState,h=this.position;g.getState=function(){return Ext.apply(a.call(g)||{},this.state)}.createDelegate(this);if(h!="center"){g.allowQueuedExpand=false;g.on({beforecollapse:this.beforeCollapse,collapse:this.onCollapse,beforeexpand:this.beforeExpand,expand:this.onExpand,hide:this.onHide,show:this.onShow,scope:this});if(this.collapsible||this.floatable){g.collapseEl="el";g.slideAnchor=this.getSlideAnchor()}if(g.tools&&g.tools.toggle){g.tools.toggle.addClass("x-tool-collapse-"+h);g.tools.toggle.addClassOnOver("x-tool-collapse-"+h+"-over")}}},getCollapsedEl:function(){if(!this.collapsedEl){if(!this.toolTemplate){var c=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');c.disableFormats=true;c.compile();Ext.layout.BorderLayout.Region.prototype.toolTemplate=c}this.collapsedEl=this.targetEl.createChild({cls:"x-layout-collapsed x-layout-collapsed-"+this.position,id:this.panel.id+"-xcollapsed"});this.collapsedEl.enableDisplayMode("block");if(this.collapseMode=="mini"){this.collapsedEl.addClass("x-layout-cmini-"+this.position);this.miniCollapsedEl=this.collapsedEl.createChild({cls:"x-layout-mini x-layout-mini-"+this.position,html:"&#160;"});this.miniCollapsedEl.addClassOnOver("x-layout-mini-over");this.collapsedEl.addClassOnOver("x-layout-collapsed-over");this.collapsedEl.on("click",this.onExpandClick,this,{stopEvent:true})}else{if(this.collapsible!==false&&!this.hideCollapseTool){var a=this.toolTemplate.append(this.collapsedEl.dom,{id:"expand-"+this.position},true);a.addClassOnOver("x-tool-expand-"+this.position+"-over");a.on("click",this.onExpandClick,this,{stopEvent:true})}if(this.floatable!==false||this.titleCollapse){this.collapsedEl.addClassOnOver("x-layout-collapsed-over");this.collapsedEl.on("click",this[this.floatable?"collapseClick":"onExpandClick"],this)}}}return this.collapsedEl},onExpandClick:function(a){if(this.isSlid){this.afterSlideIn();this.panel.expand(false)}else{this.panel.expand()}},onCollapseClick:function(a){this.panel.collapse()},beforeCollapse:function(c,a){this.lastAnim=a;if(this.splitEl){this.splitEl.hide()}this.getCollapsedEl().show();this.panel.el.setStyle("z-index",100);this.isCollapsed=true;this.layout.layout()},onCollapse:function(a){this.panel.el.setStyle("z-index",1);if(this.lastAnim===false||this.panel.animCollapse===false){this.getCollapsedEl().dom.style.visibility="visible"}else{this.getCollapsedEl().slideIn(this.panel.slideAnchor,{duration:0.2})}this.state.collapsed=true;this.panel.saveState()},beforeExpand:function(a){var g=this.getCollapsedEl();this.el.show();if(this.position=="east"||this.position=="west"){this.panel.setSize(undefined,g.getHeight())}else{this.panel.setSize(g.getWidth(),undefined)}g.hide();g.dom.style.visibility="hidden";this.panel.el.setStyle("z-index",100)},onExpand:function(){this.isCollapsed=false;if(this.splitEl){this.splitEl.show()}this.layout.layout();this.panel.el.setStyle("z-index",1);this.state.collapsed=false;this.panel.saveState()},collapseClick:function(a){if(this.isSlid){a.stopPropagation();this.slideIn()}else{a.stopPropagation();this.slideOut()}},onHide:function(){if(this.isCollapsed){this.getCollapsedEl().hide()}else{if(this.splitEl){this.splitEl.hide()}}},onShow:function(){if(this.isCollapsed){this.getCollapsedEl().show()}else{if(this.splitEl){this.splitEl.show()}}},isVisible:function(){return !this.panel.hidden},getMargins:function(){return this.isCollapsed&&this.cmargins?this.cmargins:this.margins},getSize:function(){return this.isCollapsed?this.getCollapsedEl().getSize():this.panel.getSize()},setPanel:function(a){this.panel=a},getMinWidth:function(){return this.minWidth},getMinHeight:function(){return this.minHeight},applyLayoutCollapsed:function(a){var c=this.getCollapsedEl();c.setLeftTop(a.x,a.y);c.setSize(a.width,a.height)},applyLayout:function(a){if(this.isCollapsed){this.applyLayoutCollapsed(a)}else{this.panel.setPosition(a.x,a.y);this.panel.setSize(a.width,a.height)}},beforeSlide:function(){this.panel.beforeEffect()},afterSlide:function(){this.panel.afterEffect()},initAutoHide:function(){if(this.autoHide!==false){if(!this.autoHideHd){var a=new Ext.util.DelayedTask(this.slideIn,this);this.autoHideHd={mouseout:function(c){if(!c.within(this.el,true)){a.delay(500)}},mouseover:function(c){a.cancel()},scope:this}}this.el.on(this.autoHideHd)}},clearAutoHide:function(){if(this.autoHide!==false){this.el.un("mouseout",this.autoHideHd.mouseout);this.el.un("mouseover",this.autoHideHd.mouseover)}},clearMonitor:function(){Ext.getDoc().un("click",this.slideInIf,this)},slideOut:function(){if(this.isSlid||this.el.hasActiveFx()){return}this.isSlid=true;var a=this.panel.tools;if(a&&a.toggle){a.toggle.hide()}this.el.show();if(this.position=="east"||this.position=="west"){this.panel.setSize(undefined,this.collapsedEl.getHeight())}else{this.panel.setSize(this.collapsedEl.getWidth(),undefined)}this.restoreLT=[this.el.dom.style.left,this.el.dom.style.top];this.el.alignTo(this.collapsedEl,this.getCollapseAnchor());this.el.setStyle("z-index",102);this.panel.el.replaceClass("x-panel-collapsed","x-panel-floating");if(this.animFloat!==false){this.beforeSlide();this.el.slideIn(this.getSlideAnchor(),{callback:function(){this.afterSlide();this.initAutoHide();Ext.getDoc().on("click",this.slideInIf,this)},scope:this,block:true})}else{this.initAutoHide();Ext.getDoc().on("click",this.slideInIf,this)}},afterSlideIn:function(){this.clearAutoHide();this.isSlid=false;this.clearMonitor();this.el.setStyle("z-index","");this.panel.el.replaceClass("x-panel-floating","x-panel-collapsed");this.el.dom.style.left=this.restoreLT[0];this.el.dom.style.top=this.restoreLT[1];var a=this.panel.tools;if(a&&a.toggle){a.toggle.show()}},slideIn:function(a){if(!this.isSlid||this.el.hasActiveFx()){Ext.callback(a);return}this.isSlid=false;if(this.animFloat!==false){this.beforeSlide();this.el.slideOut(this.getSlideAnchor(),{callback:function(){this.el.hide();this.afterSlide();this.afterSlideIn();Ext.callback(a)},scope:this,block:true})}else{this.el.hide();this.afterSlideIn()}},slideInIf:function(a){if(!a.within(this.el)){this.slideIn()}},anchors:{west:"left",east:"right",north:"top",south:"bottom"},sanchors:{west:"l",east:"r",north:"t",south:"b"},canchors:{west:"tl-tr",east:"tr-tl",north:"tl-bl",south:"bl-tl"},getAnchor:function(){return this.anchors[this.position]},getCollapseAnchor:function(){return this.canchors[this.position]},getSlideAnchor:function(){return this.sanchors[this.position]},getAlignAdj:function(){var a=this.cmargins;switch(this.position){case"west":return[0,0];break;case"east":return[0,0];break;case"north":return[0,0];break;case"south":return[0,0];break}},getExpandAdj:function(){var g=this.collapsedEl,a=this.cmargins;switch(this.position){case"west":return[-(a.right+g.getWidth()+a.left),0];break;case"east":return[a.right+g.getWidth()+a.left,0];break;case"north":return[0,-(a.top+a.bottom+g.getHeight())];break;case"south":return[0,a.top+a.bottom+g.getHeight()];break}}};Ext.layout.BorderLayout.SplitRegion=function(c,a,g){Ext.layout.BorderLayout.SplitRegion.superclass.constructor.call(this,c,a,g);this.applyLayout=this.applyFns[g]};Ext.extend(Ext.layout.BorderLayout.SplitRegion,Ext.layout.BorderLayout.Region,{splitTip:"Drag to resize.",collapsibleSplitTip:"Drag to resize. Double click to hide.",useSplitTips:false,splitSettings:{north:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.TOP,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},south:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.BOTTOM,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},east:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.RIGHT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"},west:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.LEFT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"}},applyFns:{west:function(g){if(this.isCollapsed){return this.applyLayoutCollapsed(g)}var h=this.splitEl.dom,c=h.style;this.panel.setPosition(g.x,g.y);var a=h.offsetWidth;c.left=(g.x+g.width-a)+"px";c.top=(g.y)+"px";c.height=Math.max(0,g.height)+"px";this.panel.setSize(g.width-a,g.height)},east:function(g){if(this.isCollapsed){return this.applyLayoutCollapsed(g)}var h=this.splitEl.dom,c=h.style;var a=h.offsetWidth;this.panel.setPosition(g.x+a,g.y);c.left=(g.x)+"px";c.top=(g.y)+"px";c.height=Math.max(0,g.height)+"px";this.panel.setSize(g.width-a,g.height)},north:function(g){if(this.isCollapsed){return this.applyLayoutCollapsed(g)}var h=this.splitEl.dom,c=h.style;var a=h.offsetHeight;this.panel.setPosition(g.x,g.y);c.left=(g.x)+"px";c.top=(g.y+g.height-a)+"px";c.width=Math.max(0,g.width)+"px";this.panel.setSize(g.width,g.height-a)},south:function(g){if(this.isCollapsed){return this.applyLayoutCollapsed(g)}var h=this.splitEl.dom,c=h.style;var a=h.offsetHeight;this.panel.setPosition(g.x,g.y+a);c.left=(g.x)+"px";c.top=(g.y)+"px";c.width=Math.max(0,g.width)+"px";this.panel.setSize(g.width,g.height-a)}},render:function(a,g){Ext.layout.BorderLayout.SplitRegion.superclass.render.call(this,a,g);var h=this.position;this.splitEl=a.createChild({cls:"x-layout-split x-layout-split-"+h,html:"&#160;",id:this.panel.id+"-xsplit"});if(this.collapseMode=="mini"){this.miniSplitEl=this.splitEl.createChild({cls:"x-layout-mini x-layout-mini-"+h,html:"&#160;"});this.miniSplitEl.addClassOnOver("x-layout-mini-over");this.miniSplitEl.on("click",this.onCollapseClick,this,{stopEvent:true})}var c=this.splitSettings[h];this.split=new Ext.SplitBar(this.splitEl.dom,g.el,c.orientation);this.split.placement=c.placement;this.split.getMaximumSize=this[c.maxFn].createDelegate(this);this.split.minSize=this.minSize||this[c.minProp];this.split.on("beforeapply",this.onSplitMove,this);this.split.useShim=this.useShim===true;this.maxSize=this.maxSize||this[c.maxProp];if(g.hidden){this.splitEl.hide()}if(this.useSplitTips){this.splitEl.dom.title=this.collapsible?this.collapsibleSplitTip:this.splitTip}if(this.collapsible){this.splitEl.on("dblclick",this.onCollapseClick,this)}},getSize:function(){if(this.isCollapsed){return this.collapsedEl.getSize()}var a=this.panel.getSize();if(this.position=="north"||this.position=="south"){a.height+=this.splitEl.dom.offsetHeight}else{a.width+=this.splitEl.dom.offsetWidth}return a},getHMaxSize:function(){var c=this.maxSize||10000;var a=this.layout.center;return Math.min(c,(this.el.getWidth()+a.el.getWidth())-a.getMinWidth())},getVMaxSize:function(){var c=this.maxSize||10000;var a=this.layout.center;return Math.min(c,(this.el.getHeight()+a.el.getHeight())-a.getMinHeight())},onSplitMove:function(c,a){var g=this.panel.getSize();this.lastSplitSize=a;if(this.position=="north"||this.position=="south"){this.panel.setSize(g.width,a);this.state.height=a}else{this.panel.setSize(a,g.height);this.state.width=a}this.layout.layout();this.panel.saveState();return false},getSplitBar:function(){return this.split},destroy:function(){Ext.destroy(this.miniSplitEl,this.split,this.splitEl)}});Ext.Container.LAYOUTS.border=Ext.layout.BorderLayout;Ext.layout.FormLayout=Ext.extend(Ext.layout.AnchorLayout,{labelSeparator:":",getAnchorViewSize:function(a,c){return(a.body||a.el).getStyleSize()},setContainer:function(c){Ext.layout.FormLayout.superclass.setContainer.call(this,c);if(c.labelAlign){c.addClass("x-form-label-"+c.labelAlign)}if(c.hideLabels){this.labelStyle="display:none";this.elementStyle="padding-left:0;";this.labelAdjust=0}else{this.labelSeparator=c.labelSeparator||this.labelSeparator;c.labelWidth=c.labelWidth||100;if(typeof c.labelWidth=="number"){var g=(typeof c.labelPad=="number"?c.labelPad:5);this.labelAdjust=c.labelWidth+g;this.labelStyle="width:"+c.labelWidth+"px;";this.elementStyle="padding-left:"+(c.labelWidth+g)+"px"}if(c.labelAlign=="top"){this.labelStyle="width:auto;";this.labelAdjust=0;this.elementStyle="padding-left:0;"}}if(!this.fieldTpl){var a=new Ext.Template('<div class="x-form-item {5}" tabIndex="-1">','<label for="{0}" style="{2}" class="x-form-item-label">{1}{4}</label>','<div class="x-form-element" id="x-form-el-{0}" style="{3}">','</div><div class="{6}"></div>',"</div>");a.disableFormats=true;a.compile();Ext.layout.FormLayout.prototype.fieldTpl=a}},getLabelStyle:function(j){var c="",g=[this.labelStyle,j];for(var h=0,a=g.length;h<a;++h){if(g[h]){c+=g[h];if(c.substr(-1,1)!=";"){c+=";"}}}return c},renderItem:function(j,a,h){if(j&&!j.rendered&&j.isFormField&&j.inputType!="hidden"){var g=[j.id,j.fieldLabel,this.getLabelStyle(j.labelStyle),this.elementStyle||"",typeof j.labelSeparator=="undefined"?this.labelSeparator:j.labelSeparator,(j.itemCls||this.container.itemCls||"")+(j.hideLabel?" x-hide-label":""),j.clearCls||"x-form-clear-left"];if(typeof a=="number"){a=h.dom.childNodes[a]||null}if(a){this.fieldTpl.insertBefore(a,g)}else{this.fieldTpl.append(h,g)}j.render("x-form-el-"+j.id)}else{Ext.layout.FormLayout.superclass.renderItem.apply(this,arguments)}},adjustWidthAnchor:function(c,a){return c-(a.isFormField?(a.hideLabel?0:this.labelAdjust):0)},isValidParent:function(g,a){return true}});Ext.Container.LAYOUTS.form=Ext.layout.FormLayout;Ext.layout.Accordion=Ext.extend(Ext.layout.FitLayout,{fill:true,autoWidth:true,titleCollapse:true,hideCollapseTool:false,collapseFirst:false,animate:false,sequence:false,activeOnTop:false,setActiveItem:function(a){a=this.container.getComponent(a);this.activeItem=a;this.layout()},renderItem:function(a){if(this.animate===false){a.animCollapse=false}a.collapsible=true;if(this.autoWidth){a.autoWidth=true}if(this.titleCollapse){a.titleCollapse=true}if(this.hideCollapseTool){a.hideCollapseTool=true}if(this.collapseFirst!==undefined){a.collapseFirst=this.collapseFirst}if(!this.activeItem&&!a.collapsed){this.activeItem=a}else{if(this.activeItem&&this.activeItem!=a){a.collapsed=true}}Ext.layout.Accordion.superclass.renderItem.apply(this,arguments);a.header.addClass("x-accordion-hd");a.on("beforeexpand",this.beforeExpand,this)},beforeExpand:function(g,c){var a=this.activeItem;if(a){if(this.sequence){delete this.activeItem;if(!a.collapsed){a.collapse({callback:function(){g.expand(c||true)},scope:this});return false}}else{a.collapse(this.animate)}}this.activeItem=g;if(this.activeOnTop){g.el.dom.parentNode.insertBefore(g.el.dom,g.el.dom.parentNode.firstChild)}this.layout()},setItemSize:function(k,j){if(this.fill&&k){var c=this.container.items.items;var h=0;for(var g=0,a=c.length;g<a;g++){var l=c[g];if(l!=k){h+=(l.getSize().height-l.bwrap.getHeight())}}j.height-=h;k.setSize(j)}}});Ext.Container.LAYOUTS.accordion=Ext.layout.Accordion;Ext.layout.TableLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:false,setContainer:function(a){Ext.layout.TableLayout.superclass.setContainer.call(this,a);this.currentRow=0;this.currentColumn=0;this.cells=[]},onLayout:function(h,k){var j=h.items.items,a=j.length,l,g;if(!this.table){k.addClass("x-table-layout-ct");this.table=k.createChild({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},null,true)}this.renderAll(h,k)},getRow:function(a){var c=this.table.tBodies[0].childNodes[a];if(!c){c=document.createElement("tr");this.table.tBodies[0].appendChild(c)}return c},getNextCell:function(o){var a=this.getNextNonSpan(this.currentColumn,this.currentRow);var k=this.currentColumn=a[0],j=this.currentRow=a[1];for(var m=j;m<j+(o.rowspan||1);m++){if(!this.cells[m]){this.cells[m]=[]}for(var h=k;h<k+(o.colspan||1);h++){this.cells[m][h]=true}}var l=document.createElement("td");if(o.cellId){l.id=o.cellId}var g="x-table-layout-cell";if(o.cellCls){g+=" "+o.cellCls}l.className=g;if(o.colspan){l.colSpan=o.colspan}if(o.rowspan){l.rowSpan=o.rowspan}this.getRow(j).appendChild(l);return l},getNextNonSpan:function(a,g){var c=this.columns;while((c&&a>=c)||(this.cells[g]&&this.cells[g][a])){if(c&&a>=c){g++;a=0}else{a++}}return[a,g]},renderItem:function(j,a,h){if(j&&!j.rendered){j.render(this.getNextCell(j));if(this.extraCls){var g=j.getPositionEl?j.getPositionEl():j;g.addClass(this.extraCls)}}},isValidParent:function(g,a){return true}});Ext.Container.LAYOUTS.table=Ext.layout.TableLayout;Ext.layout.AbsoluteLayout=Ext.extend(Ext.layout.AnchorLayout,{extraCls:"x-abs-layout-item",isForm:false,setContainer:function(a){Ext.layout.AbsoluteLayout.superclass.setContainer.call(this,a);if(a.isXType("form")){this.isForm=true}},onLayout:function(a,c){if(this.isForm){a.body.position()}else{c.position()}Ext.layout.AbsoluteLayout.superclass.onLayout.call(this,a,c)},getAnchorViewSize:function(a,c){return this.isForm?a.body.getStyleSize():Ext.layout.AbsoluteLayout.superclass.getAnchorViewSize.call(this,a,c)},isValidParent:function(g,a){return this.isForm?true:Ext.layout.AbsoluteLayout.superclass.isValidParent.call(this,g,a)},adjustWidthAnchor:function(c,a){return c?c-a.getPosition(true)[0]:c},adjustHeightAnchor:function(c,a){return c?c-a.getPosition(true)[1]:c}});Ext.Container.LAYOUTS.absolute=Ext.layout.AbsoluteLayout;Ext.Viewport=Ext.extend(Ext.Container,{initComponent:function(){Ext.Viewport.superclass.initComponent.call(this);document.getElementsByTagName("html")[0].className+=" x-viewport";this.el=Ext.getBody();this.el.setHeight=Ext.emptyFn;this.el.setWidth=Ext.emptyFn;this.el.setSize=Ext.emptyFn;this.el.dom.scroll="no";this.allowDomMove=false;this.autoWidth=true;this.autoHeight=true;Ext.EventManager.onWindowResize(this.fireResize,this);this.renderTo=this.el},fireResize:function(a,c){this.fireEvent("resize",this,a,c,a,c)}});Ext.reg("viewport",Ext.Viewport);Ext.Panel=Ext.extend(Ext.Container,{baseCls:"x-panel",collapsedCls:"x-panel-collapsed",maskDisabled:true,animCollapse:Ext.enableFx,headerAsText:true,buttonAlign:"right",collapsed:false,collapseFirst:true,minButtonWidth:75,elements:"body",toolTarget:"header",collapseEl:"bwrap",slideAnchor:"t",disabledClass:"",deferHeight:true,expandDefaults:{duration:0.25},collapseDefaults:{duration:0.25},initComponent:function(){Ext.Panel.superclass.initComponent.call(this);this.addEvents("bodyresize","titlechange","iconchange","collapse","expand","beforecollapse","beforeexpand","beforeclose","close","activate","deactivate");if(this.tbar){this.elements+=",tbar";if(typeof this.tbar=="object"){this.topToolbar=this.tbar}delete this.tbar}if(this.bbar){this.elements+=",bbar";if(typeof this.bbar=="object"){this.bottomToolbar=this.bbar}delete this.bbar}if(this.header===true){this.elements+=",header";delete this.header}else{if(this.headerCfg||(this.title&&this.header!==false)){this.elements+=",header"}}if(this.footerCfg||this.footer===true){this.elements+=",footer";delete this.footer}if(this.buttons){var g=this.buttons;this.buttons=[];for(var c=0,a=g.length;c<a;c++){if(g[c].render){g[c].ownerCt=this;this.buttons.push(g[c])}else{this.addButton(g[c])}}}if(this.autoLoad){this.on("render",this.doAutoLoad,this,{delay:10})}},createElement:function(a,g){if(this[a]){g.appendChild(this[a].dom);return}if(a==="bwrap"||this.elements.indexOf(a)!=-1){if(this[a+"Cfg"]){this[a]=Ext.fly(g).createChild(this[a+"Cfg"])}else{var c=document.createElement("div");c.className=this[a+"Cls"];this[a]=Ext.get(g.appendChild(c))}if(this[a+"CssClass"]){this[a].addClass(this[a+"CssClass"])}if(this[a+"Style"]){this[a].applyStyles(this[a+"Style"])}}},onRender:function(m,l){Ext.Panel.superclass.onRender.call(this,m,l);this.createClasses();if(this.el){this.el.addClass(this.baseCls);this.header=this.el.down("."+this.headerCls);this.bwrap=this.el.down("."+this.bwrapCls);var s=this.bwrap?this.bwrap:this.el;this.tbar=s.down("."+this.tbarCls);this.body=s.down("."+this.bodyCls);this.bbar=s.down("."+this.bbarCls);this.footer=s.down("."+this.footerCls);this.fromMarkup=true}else{this.el=m.createChild({id:this.id,cls:this.baseCls},l)}var a=this.el,q=a.dom;if(this.cls){this.el.addClass(this.cls)}if(this.buttons){this.elements+=",footer"}if(this.frame){a.insertHtml("afterBegin",String.format(Ext.Element.boxMarkup,this.baseCls));this.createElement("header",q.firstChild.firstChild.firstChild);this.createElement("bwrap",q);var v=this.bwrap.dom;var j=q.childNodes[1],c=q.childNodes[2];v.appendChild(j);v.appendChild(c);var w=v.firstChild.firstChild.firstChild;this.createElement("tbar",w);this.createElement("body",w);this.createElement("bbar",w);this.createElement("footer",v.lastChild.firstChild.firstChild);if(!this.footer){this.bwrap.dom.lastChild.className+=" x-panel-nofooter"}}else{this.createElement("header",q);this.createElement("bwrap",q);var v=this.bwrap.dom;this.createElement("tbar",v);this.createElement("body",v);this.createElement("bbar",v);this.createElement("footer",v);if(!this.header){this.body.addClass(this.bodyCls+"-noheader");if(this.tbar){this.tbar.addClass(this.tbarCls+"-noheader")}}}if(this.border===false){this.el.addClass(this.baseCls+"-noborder");this.body.addClass(this.bodyCls+"-noborder");if(this.header){this.header.addClass(this.headerCls+"-noborder")}if(this.footer){this.footer.addClass(this.footerCls+"-noborder")}if(this.tbar){this.tbar.addClass(this.tbarCls+"-noborder")}if(this.bbar){this.bbar.addClass(this.bbarCls+"-noborder")}}if(this.bodyBorder===false){this.body.addClass(this.bodyCls+"-noborder")}this.bwrap.enableDisplayMode("block");if(this.header){this.header.unselectable();if(this.headerAsText){this.header.dom.innerHTML='<span class="'+this.headerTextCls+'">'+this.header.dom.innerHTML+"</span>";if(this.iconCls){this.setIconClass(this.iconCls)}}}if(this.floating){this.makeFloating(this.floating)}if(this.collapsible){this.tools=this.tools?this.tools.slice(0):[];if(!this.hideCollapseTool){this.tools[this.collapseFirst?"unshift":"push"]({id:"toggle",handler:this.toggleCollapse,scope:this})}if(this.titleCollapse&&this.header){this.header.on("click",this.toggleCollapse,this);this.header.setStyle("cursor","pointer")}}if(this.tools){var p=this.tools;this.tools={};this.addTool.apply(this,p)}else{this.tools={}}if(this.buttons&&this.buttons.length>0){var h=this.footer.createChild({cls:"x-panel-btns-ct",cn:{cls:"x-panel-btns x-panel-btns-"+this.buttonAlign,html:'<table cellspacing="0"><tbody><tr></tr></tbody></table><div class="x-clear"></div>'}},null,true);var r=h.getElementsByTagName("tr")[0];for(var k=0,o=this.buttons.length;k<o;k++){var t=this.buttons[k];var g=document.createElement("td");g.className="x-panel-btn-td";t.render(r.appendChild(g))}}if(this.tbar&&this.topToolbar){if(Ext.isArray(this.topToolbar)){this.topToolbar=new Ext.Toolbar(this.topToolbar)}this.topToolbar.render(this.tbar);this.topToolbar.ownerCt=this}if(this.bbar&&this.bottomToolbar){if(Ext.isArray(this.bottomToolbar)){this.bottomToolbar=new Ext.Toolbar(this.bottomToolbar)}this.bottomToolbar.render(this.bbar);this.bottomToolbar.ownerCt=this}},setIconClass:function(c){var a=this.iconCls;this.iconCls=c;if(this.rendered&&this.header){if(this.frame){this.header.addClass("x-panel-icon");this.header.replaceClass(a,this.iconCls)}else{var h=this.header.dom;var g=h.firstChild&&String(h.firstChild.tagName).toLowerCase()=="img"?h.firstChild:null;if(g){Ext.fly(g).replaceClass(a,this.iconCls)}else{Ext.DomHelper.insertBefore(h.firstChild,{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-panel-inline-icon "+this.iconCls})}}}this.fireEvent("iconchange",this,c,a)},makeFloating:function(a){this.floating=true;this.el=new Ext.Layer(typeof a=="object"?a:{shadow:this.shadow!==undefined?this.shadow:"sides",shadowOffset:this.shadowOffset,constrain:false,shim:this.shim===false?false:undefined},this.el)},getTopToolbar:function(){return this.topToolbar},getBottomToolbar:function(){return this.bottomToolbar},addButton:function(a,h,g){var j={handler:h,scope:g,minWidth:this.minButtonWidth,hideParent:true};if(typeof a=="string"){j.text=a}else{Ext.apply(j,a)}var c=new Ext.Button(j);c.ownerCt=this;if(!this.buttons){this.buttons=[]}this.buttons.push(c);return c},addTool:function(){if(!this[this.toolTarget]){return}if(!this.toolTemplate){var l=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');l.disableFormats=true;l.compile();Ext.Panel.prototype.toolTemplate=l}for(var k=0,h=arguments,g=h.length;k<g;k++){var c=h[k];if(!this.tools[c.id]){var m="x-tool-"+c.id+"-over";var j=this.toolTemplate.insertFirst((c.align!=="left")?this[this.toolTarget]:this[this.toolTarget].child("span"),c,true);this.tools[c.id]=j;j.enableDisplayMode("block");j.on("click",this.createToolHandler(j,c,m,this));if(c.on){j.on(c.on)}if(c.hidden){j.hide()}if(c.qtip){if(typeof c.qtip=="object"){Ext.QuickTips.register(Ext.apply({target:j.id},c.qtip))}else{j.dom.qtip=c.qtip}}j.addClassOnOver(m)}}},onShow:function(){if(this.floating){return this.el.show()}Ext.Panel.superclass.onShow.call(this)},onHide:function(){if(this.floating){return this.el.hide()}Ext.Panel.superclass.onHide.call(this)},createToolHandler:function(g,a,h,c){return function(j){g.removeClass(h);j.stopEvent();if(a.handler){a.handler.call(a.scope||g,j,g,c)}}},afterRender:function(){if(this.fromMarkup&&this.height===undefined&&!this.autoHeight){this.height=this.el.getHeight()}if(this.floating&&!this.hidden&&!this.initHidden){this.el.show()}if(this.title){this.setTitle(this.title)}this.setAutoScroll();if(this.html){this.body.update(typeof this.html=="object"?Ext.DomHelper.markup(this.html):this.html);delete this.html}if(this.contentEl){var a=Ext.getDom(this.contentEl);Ext.fly(a).removeClass(["x-hidden","x-hide-display"]);this.body.dom.appendChild(a)}if(this.collapsed){this.collapsed=false;this.collapse(false)}Ext.Panel.superclass.afterRender.call(this);this.initEvents()},setAutoScroll:function(){if(this.rendered&&this.autoScroll){var a=this.body||this.el;if(a){a.setOverflow("auto")}}},getKeyMap:function(){if(!this.keyMap){this.keyMap=new Ext.KeyMap(this.el,this.keys)}return this.keyMap},initEvents:function(){if(this.keys){this.getKeyMap()}if(this.draggable){this.initDraggable()}},initDraggable:function(){this.dd=new Ext.Panel.DD(this,typeof this.draggable=="boolean"?null:this.draggable)},beforeEffect:function(){if(this.floating){this.el.beforeAction()}this.el.addClass("x-panel-animated")},afterEffect:function(){this.syncShadow();this.el.removeClass("x-panel-animated")},createEffect:function(g,c,h){var j={scope:h,block:true};if(g===true){j.callback=c;return j}else{if(!g.callback){j.callback=c}else{j.callback=function(){c.call(h);Ext.callback(g.callback,g.scope)}}}return Ext.applyIf(j,g)},collapse:function(c){if(this.collapsed||this.el.hasFxBlock()||this.fireEvent("beforecollapse",this,c)===false){return}var a=c===true||(c!==false&&this.animCollapse);this.beforeEffect();this.onCollapse(a,c);return this},onCollapse:function(a,c){if(a){this[this.collapseEl].slideOut(this.slideAnchor,Ext.apply(this.createEffect(c||true,this.afterCollapse,this),this.collapseDefaults))}else{this[this.collapseEl].hide();this.afterCollapse()}},afterCollapse:function(){this.collapsed=true;this.el.addClass(this.collapsedCls);this.afterEffect();this.fireEvent("collapse",this)},expand:function(c){if(!this.collapsed||this.el.hasFxBlock()||this.fireEvent("beforeexpand",this,c)===false){return}var a=c===true||(c!==false&&this.animCollapse);this.el.removeClass(this.collapsedCls);this.beforeEffect();this.onExpand(a,c);return this},onExpand:function(a,c){if(a){this[this.collapseEl].slideIn(this.slideAnchor,Ext.apply(this.createEffect(c||true,this.afterExpand,this),this.expandDefaults))}else{this[this.collapseEl].show();this.afterExpand()}},afterExpand:function(){this.collapsed=false;this.afterEffect();this.fireEvent("expand",this)},toggleCollapse:function(a){this[this.collapsed?"expand":"collapse"](a);return this},onDisable:function(){if(this.rendered&&this.maskDisabled){this.el.mask()}Ext.Panel.superclass.onDisable.call(this)},onEnable:function(){if(this.rendered&&this.maskDisabled){this.el.unmask()}Ext.Panel.superclass.onEnable.call(this)},onResize:function(a,c){if(a!==undefined||c!==undefined){if(!this.collapsed){if(typeof a=="number"){this.body.setWidth(this.adjustBodyWidth(a-this.getFrameWidth()))}else{if(a=="auto"){this.body.setWidth(a)}}if(typeof c=="number"){this.body.setHeight(this.adjustBodyHeight(c-this.getFrameHeight()))}else{if(c=="auto"){this.body.setHeight(c)}}if(this.disabled&&this.el._mask){this.el._mask.setSize(this.el.dom.clientWidth,this.el.getHeight())}}else{this.queuedBodySize={width:a,height:c};if(!this.queuedExpand&&this.allowQueuedExpand!==false){this.queuedExpand=true;this.on("expand",function(){delete this.queuedExpand;this.onResize(this.queuedBodySize.width,this.queuedBodySize.height);this.doLayout()},this,{single:true})}}this.fireEvent("bodyresize",this,a,c)}this.syncShadow()},adjustBodyHeight:function(a){return a},adjustBodyWidth:function(a){return a},onPosition:function(){this.syncShadow()},getFrameWidth:function(){var c=this.el.getFrameWidth("lr");if(this.frame){var a=this.bwrap.dom.firstChild;c+=(Ext.fly(a).getFrameWidth("l")+Ext.fly(a.firstChild).getFrameWidth("r"));var g=this.bwrap.dom.firstChild.firstChild.firstChild;c+=Ext.fly(g).getFrameWidth("lr")}return c},getFrameHeight:function(){var a=this.el.getFrameWidth("tb");a+=(this.tbar?this.tbar.getHeight():0)+(this.bbar?this.bbar.getHeight():0);if(this.frame){var g=this.el.dom.firstChild;var j=this.bwrap.dom.lastChild;a+=(g.offsetHeight+j.offsetHeight);var c=this.bwrap.dom.firstChild.firstChild.firstChild;a+=Ext.fly(c).getFrameWidth("tb")}else{a+=(this.header?this.header.getHeight():0)+(this.footer?this.footer.getHeight():0)}return a},getInnerWidth:function(){return this.getSize().width-this.getFrameWidth()},getInnerHeight:function(){return this.getSize().height-this.getFrameHeight()},syncShadow:function(){if(this.floating){this.el.sync(true)}},getLayoutTarget:function(){return this.body},setTitle:function(c,a){this.title=c;if(this.header&&this.headerAsText){this.header.child("span").update(c)}if(a){this.setIconClass(a)}this.fireEvent("titlechange",this,c);return this},getUpdater:function(){return this.body.getUpdater()},load:function(){var a=this.body.getUpdater();a.update.apply(a,arguments);return this},beforeDestroy:function(){if(this.header){this.header.removeAllListeners();if(this.headerAsText){Ext.Element.uncache(this.header.child("span"))}}Ext.Element.uncache(this.header,this.tbar,this.bbar,this.footer,this.body,this.bwrap);if(this.tools){for(var c in this.tools){Ext.destroy(this.tools[c])}}if(this.buttons){for(var a in this.buttons){Ext.destroy(this.buttons[a])}}Ext.destroy(this.topToolbar,this.bottomToolbar);Ext.Panel.superclass.beforeDestroy.call(this)},createClasses:function(){this.headerCls=this.baseCls+"-header";this.headerTextCls=this.baseCls+"-header-text";this.bwrapCls=this.baseCls+"-bwrap";this.tbarCls=this.baseCls+"-tbar";this.bodyCls=this.baseCls+"-body";this.bbarCls=this.baseCls+"-bbar";this.footerCls=this.baseCls+"-footer"},createGhost:function(a,j,c){var h=document.createElement("div");h.className="x-panel-ghost "+(a?a:"");if(this.header){h.appendChild(this.el.dom.firstChild.cloneNode(true))}Ext.fly(h.appendChild(document.createElement("ul"))).setHeight(this.bwrap.getHeight());h.style.width=this.el.dom.offsetWidth+"px";if(!c){this.container.dom.appendChild(h)}else{Ext.getDom(c).appendChild(h)}if(j!==false&&this.el.useShim!==false){var g=new Ext.Layer({shadow:false,useDisplay:true,constrain:false},h);g.show();return g}else{return new Ext.Element(h)}},doAutoLoad:function(){var a=this.body.getUpdater();if(this.renderer){a.setRenderer(this.renderer)}a.update(typeof this.autoLoad=="object"?this.autoLoad:{url:this.autoLoad})},getTool:function(a){return this.tools[a]}});Ext.reg("panel",Ext.Panel);Ext.Window=Ext.extend(Ext.Panel,{baseCls:"x-window",resizable:true,draggable:true,closable:true,constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:100,minWidth:200,expandOnShow:true,closeAction:"close",elements:"header,body",collapsible:false,initHidden:true,monitorResize:true,frame:true,floating:true,initComponent:function(){Ext.Window.superclass.initComponent.call(this);this.addEvents("resize","maximize","minimize","restore")},getState:function(){return Ext.apply(Ext.Window.superclass.getState.call(this)||{},this.getBox(true))},onRender:function(c,a){Ext.Window.superclass.onRender.call(this,c,a);if(this.plain){this.el.addClass("x-window-plain")}this.focusEl=this.el.createChild({tag:"a",href:"#",cls:"x-dlg-focus",tabIndex:"-1",html:"&#160;"});this.focusEl.swallowEvent("click",true);this.proxy=this.el.createProxy("x-window-proxy");this.proxy.enableDisplayMode("block");if(this.modal){this.mask=this.container.createChild({cls:"ext-el-mask"},this.el.dom);this.mask.enableDisplayMode("block");this.mask.hide();this.mask.on("click",this.focus,this)}this.initTools()},initEvents:function(){Ext.Window.superclass.initEvents.call(this);if(this.animateTarget){this.setAnimateTarget(this.animateTarget)}if(this.resizable){this.resizer=new Ext.Resizable(this.el,{minWidth:this.minWidth,minHeight:this.minHeight,handles:this.resizeHandles||"all",pinned:true,resizeElement:this.resizerAction});this.resizer.window=this;this.resizer.on("beforeresize",this.beforeResize,this)}if(this.draggable){this.header.addClass("x-window-draggable")}this.el.on("mousedown",this.toFront,this);this.manager=this.manager||Ext.WindowMgr;this.manager.register(this);this.hidden=true;if(this.maximized){this.maximized=false;this.maximize()}if(this.closable){var a=this.getKeyMap();a.on(27,this.onEsc,this);a.disable()}},initDraggable:function(){this.dd=new Ext.Window.DD(this)},onEsc:function(){this[this.closeAction]()},beforeDestroy:function(){if(this.rendered){this.hide();if(this.doAnchor){Ext.EventManager.removeResizeListener(this.doAnchor,this);Ext.EventManager.un(window,"scroll",this.doAnchor,this)}Ext.destroy(this.focusEl,this.resizer,this.dd,this.proxy,this.mask)}Ext.Window.superclass.beforeDestroy.call(this)},onDestroy:function(){if(this.manager){this.manager.unregister(this)}Ext.Window.superclass.onDestroy.call(this)},initTools:function(){if(this.minimizable){this.addTool({id:"minimize",handler:this.minimize.createDelegate(this,[])})}if(this.maximizable){this.addTool({id:"maximize",handler:this.maximize.createDelegate(this,[])});this.addTool({id:"restore",handler:this.restore.createDelegate(this,[]),hidden:true});this.header.on("dblclick",this.toggleMaximize,this)}if(this.closable){this.addTool({id:"close",handler:this[this.closeAction].createDelegate(this,[])})}},resizerAction:function(){var a=this.proxy.getBox();this.proxy.hide();this.window.handleResize(a);return a},beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getFrameHeight()+40);this.resizer.minWidth=Math.max(this.minWidth,this.getFrameWidth()+40);this.resizeBox=this.el.getBox()},updateHandles:function(){if(Ext.isIE&&this.resizer){this.resizer.syncHandleHeight();this.el.repaint()}},handleResize:function(c){var a=this.resizeBox;if(a.x!=c.x||a.y!=c.y){this.updateBox(c)}else{this.setSize(c)}this.focus();this.updateHandles();this.saveState();if(this.layout){this.doLayout()}this.fireEvent("resize",this,c.width,c.height)},focus:function(){var g=this.focusEl,a=this.defaultButton,c=typeof a;if(c!="undefined"){if(c=="number"){g=this.buttons[a]}else{if(c=="string"){g=Ext.getCmp(a)}else{g=a}}}g.focus.defer(10,g)},setAnimateTarget:function(a){a=Ext.get(a);this.animateTarget=a},beforeShow:function(){delete this.el.lastXY;delete this.el.lastLT;if(this.x===undefined||this.y===undefined){var a=this.el.getAlignToXY(this.container,"c-c");var c=this.el.translatePoints(a[0],a[1]);this.x=this.x===undefined?c.left:this.x;this.y=this.y===undefined?c.top:this.y}this.el.setLeftTop(this.x,this.y);if(this.expandOnShow){this.expand(false)}if(this.modal){Ext.getBody().addClass("x-body-masked");this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.mask.show()}},show:function(g,a,c){if(!this.rendered){this.render(Ext.getBody())}if(this.hidden===false){this.toFront();return}if(this.fireEvent("beforeshow",this)===false){return}if(a){this.on("show",a,c,{single:true})}this.hidden=false;if(g!==undefined){this.setAnimateTarget(g)}this.beforeShow();if(this.animateTarget){this.animShow()}else{this.afterShow()}},afterShow:function(){this.proxy.hide();this.el.setStyle("display","block");this.el.show();if(this.maximized){this.fitContainer()}if(Ext.isMac&&Ext.isGecko){this.cascade(this.setAutoScroll)}if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){Ext.EventManager.onWindowResize(this.onWindowResize,this)}this.doConstrain();if(this.layout){this.doLayout()}if(this.keyMap){this.keyMap.enable()}this.toFront();this.updateHandles();this.fireEvent("show",this)},animShow:function(){this.proxy.show();this.proxy.setBox(this.animateTarget.getBox());this.proxy.setOpacity(0);var a=this.getBox(false);a.callback=this.afterShow;a.scope=this;a.duration=0.25;a.easing="easeNone";a.opacity=0.5;a.block=true;this.el.setStyle("display","none");this.proxy.shift(a)},hide:function(g,a,c){if(this.activeGhost){this.hide.defer(100,this,[g,a,c]);return}if(this.hidden||this.fireEvent("beforehide",this)===false){return}if(a){this.on("hide",a,c,{single:true})}this.hidden=true;if(g!==undefined){this.setAnimateTarget(g)}if(this.animateTarget){this.animHide()}else{this.el.hide();this.afterHide()}},afterHide:function(){this.proxy.hide();if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){Ext.EventManager.removeResizeListener(this.onWindowResize,this)}if(this.modal){this.mask.hide();Ext.getBody().removeClass("x-body-masked")}if(this.keyMap){this.keyMap.disable()}this.fireEvent("hide",this)},animHide:function(){this.proxy.setOpacity(0.5);this.proxy.show();var c=this.getBox(false);this.proxy.setBox(c);this.el.hide();var a=this.animateTarget.getBox();a.callback=this.afterHide;a.scope=this;a.duration=0.25;a.easing="easeNone";a.block=true;a.opacity=0;this.proxy.shift(a)},onWindowResize:function(){if(this.maximized){this.fitContainer()}if(this.modal){this.mask.setSize("100%","100%");var a=this.mask.dom.offsetHeight;this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true))}this.doConstrain()},doConstrain:function(){if(this.constrain||this.constrainHeader){var c;if(this.constrain){c={right:this.el.shadowOffset,left:this.el.shadowOffset,bottom:this.el.shadowOffset}}else{var a=this.getSize();c={right:-(a.width-100),bottom:-(a.height-25)}}var g=this.el.getConstrainToXY(this.container,true,c);if(g){this.setPosition(g[0],g[1])}}},ghost:function(a){var g=this.createGhost(a);var c=this.getBox(true);g.setLeftTop(c.x,c.y);g.setWidth(c.width);this.el.hide();this.activeGhost=g;return g},unghost:function(c,a){if(c!==false){this.el.show();this.focus();if(Ext.isMac&&Ext.isGecko){this.cascade(this.setAutoScroll)}}if(a!==false){this.setPosition(this.activeGhost.getLeft(true),this.activeGhost.getTop(true))}this.activeGhost.hide();this.activeGhost.remove();delete this.activeGhost},minimize:function(){this.fireEvent("minimize",this)},close:function(){if(this.fireEvent("beforeclose",this)!==false){this.hide(null,function(){this.fireEvent("close",this);this.destroy()},this)}},maximize:function(){if(!this.maximized){this.expand(false);this.restoreSize=this.getSize();this.restorePos=this.getPosition(true);if(this.maximizable){this.tools.maximize.hide();this.tools.restore.show()}this.maximized=true;this.el.disableShadow();if(this.dd){this.dd.lock()}if(this.collapsible){this.tools.toggle.hide()}this.el.addClass("x-window-maximized");this.container.addClass("x-window-maximized-ct");this.setPosition(0,0);this.fitContainer();this.fireEvent("maximize",this)}},restore:function(){if(this.maximized){this.el.removeClass("x-window-maximized");this.tools.restore.hide();this.tools.maximize.show();this.setPosition(this.restorePos[0],this.restorePos[1]);this.setSize(this.restoreSize.width,this.restoreSize.height);delete this.restorePos;delete this.restoreSize;this.maximized=false;this.el.enableShadow(true);if(this.dd){this.dd.unlock()}if(this.collapsible){this.tools.toggle.show()}this.container.removeClass("x-window-maximized-ct");this.doConstrain();this.fireEvent("restore",this)}},toggleMaximize:function(){this[this.maximized?"restore":"maximize"]()},fitContainer:function(){var a=this.container.getViewSize();this.setSize(a.width,a.height)},setZIndex:function(a){if(this.modal){this.mask.setStyle("z-index",a)}this.el.setZIndex(++a);a+=5;if(this.resizer){this.resizer.proxy.setStyle("z-index",++a)}this.lastZIndex=a},alignTo:function(c,a,g){var h=this.el.getAlignToXY(c,a,g);this.setPagePosition(h[0],h[1]);return this},anchorTo:function(g,j,h,c){if(this.doAnchor){Ext.EventManager.removeResizeListener(this.doAnchor,this);Ext.EventManager.un(window,"scroll",this.doAnchor,this)}this.doAnchor=function(){this.alignTo(g,j,h)};Ext.EventManager.onWindowResize(this.doAnchor,this);var a=typeof c;if(a!="undefined"){Ext.EventManager.on(window,"scroll",this.doAnchor,this,{buffer:a=="number"?c:50})}this.doAnchor();return this},toFront:function(a){if(this.manager.bringToFront(this)){if(!a||!a.getTarget().focus){this.focus()}}return this},setActive:function(a){if(a){if(!this.maximized){this.el.enableShadow(true)}this.fireEvent("activate",this)}else{this.el.disableShadow();this.fireEvent("deactivate",this)}},toBack:function(){this.manager.sendToBack(this);return this},center:function(){var a=this.el.getAlignToXY(this.container,"c-c");this.setPagePosition(a[0],a[1]);return this}});Ext.reg("window",Ext.Window);Ext.Window.DD=function(a){this.win=a;Ext.Window.DD.superclass.constructor.call(this,a.el.id,"WindowDD-"+a.id);this.setHandleElId(a.header.id);this.scroll=false};Ext.extend(Ext.Window.DD,Ext.dd.DD,{moveOnly:true,headerOffsets:[100,25],startDrag:function(){var a=this.win;this.proxy=a.ghost();if(a.constrain!==false){var g=a.el.shadowOffset;this.constrainTo(a.container,{right:g,left:g,bottom:g})}else{if(a.constrainHeader!==false){var c=this.proxy.getSize();this.constrainTo(a.container,{right:-(c.width-this.headerOffsets[0]),bottom:-(c.height-this.headerOffsets[1])})}}},b4Drag:Ext.emptyFn,onDrag:function(a){this.alignElWithMouse(this.proxy,a.getPageX(),a.getPageY())},endDrag:function(a){this.win.unghost();this.win.saveState()}});Ext.WindowGroup=function(){var k={};var h=[];var j=null;var g=function(o,m){return(!o._lastAccess||o._lastAccess<m._lastAccess)?-1:1};var l=function(){var p=h,m=p.length;if(m>0){p.sort(g);var o=p[0].manager.zseed;for(var q=0;q<m;q++){var r=p[q];if(r&&!r.hidden){r.setZIndex(o+(q*10))}}}a()};var c=function(m){if(m!=j){if(j){j.setActive(false)}j=m;if(m){m.setActive(true)}}};var a=function(){for(var m=h.length-1;m>=0;--m){if(!h[m].hidden){c(h[m]);return}}c(null)};return{zseed:9000,register:function(m){k[m.id]=m;h.push(m);m.on("hide",a)},unregister:function(m){delete k[m.id];m.un("hide",a);h.remove(m)},get:function(m){return typeof m=="object"?m:k[m]},bringToFront:function(m){m=this.get(m);if(m!=j){m._lastAccess=new Date().getTime();l();return true}return false},sendToBack:function(m){m=this.get(m);m._lastAccess=-(new Date().getTime());l();return m},hideAll:function(){for(var m in k){if(k[m]&&typeof k[m]!="function"&&k[m].isVisible()){k[m].hide()}}},getActive:function(){return j},getBy:function(p,o){var q=[];for(var m=h.length-1;m>=0;--m){var s=h[m];if(p.call(o||s,s)!==false){q.push(s)}}return q},each:function(o,m){for(var p in k){if(k[p]&&typeof k[p]!="function"){if(o.call(m||k[p],k[p])===false){return}}}}}};Ext.WindowMgr=new Ext.WindowGroup();Ext.dd.PanelProxy=function(a,c){this.panel=a;this.id=this.panel.id+"-ddproxy";Ext.apply(this,c)};Ext.dd.PanelProxy.prototype={insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){if(this.ghost){if(this.proxy){this.proxy.remove();delete this.proxy}this.panel.el.dom.style.display="";this.ghost.remove();delete this.ghost}},show:function(){if(!this.ghost){this.ghost=this.panel.createGhost(undefined,undefined,Ext.getBody());this.ghost.setXY(this.panel.el.getXY());if(this.insertProxy){this.proxy=this.panel.el.insertSibling({cls:"x-panel-dd-spacer"});this.proxy.setSize(this.panel.getSize())}this.panel.el.dom.style.display="none"}},repair:function(c,g,a){this.hide();if(typeof g=="function"){g.call(a||this)}},moveProxy:function(a,c){if(this.proxy){a.insertBefore(this.proxy.dom,c)}}};Ext.Panel.DD=function(c,a){this.panel=c;this.dragData={panel:c};this.proxy=new Ext.dd.PanelProxy(c,a);Ext.Panel.DD.superclass.constructor.call(this,c.el,a);var g=c.header;if(g){this.setHandleElId(g.id)}(g?g:this.panel.body).setStyle("cursor","move");this.scroll=false};Ext.extend(Ext.Panel.DD,Ext.dd.DragSource,{showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(a,c){this.proxy.show()},b4MouseDown:function(c){var a=c.getPageX();var g=c.getPageY();this.autoOffset(a,g)},onInitDrag:function(a,c){this.onStartDrag(a,c);return true},createFrame:Ext.emptyFn,getDragEl:function(a){return this.proxy.ghost.dom},endDrag:function(a){this.proxy.hide();this.panel.saveState()},autoOffset:function(a,c){a-=this.startPageX;c-=this.startPageY;this.setDelta(a,c)}});Ext.state.Provider=function(){this.addEvents("statechange");this.state={};Ext.state.Provider.superclass.constructor.call(this)};Ext.extend(Ext.state.Provider,Ext.util.Observable,{get:function(c,a){return typeof this.state[c]=="undefined"?a:this.state[c]},clear:function(a){delete this.state[a];this.fireEvent("statechange",this,a,null)},set:function(a,c){this.state[a]=c;this.fireEvent("statechange",this,a,c)},decodeValue:function(a){var p=/^(a|n|d|b|s|o)\:(.*)$/;var g=p.exec(unescape(a));if(!g||!g[1]){return}var k=g[1];var m=g[2];switch(k){case"n":return parseFloat(m);case"d":return new Date(Date.parse(m));case"b":return(m=="1");case"a":var l=[];var o=m.split("^");for(var c=0,h=o.length;c<h;c++){l.push(this.decodeValue(o[c]))}return l;case"o":var l={};var o=m.split("^");for(var c=0,h=o.length;c<h;c++){var j=o[c].split("=");l[j[0]]=this.decodeValue(j[1])}return l;default:return m}},encodeValue:function(g){var c;if(typeof g=="number"){c="n:"+g}else{if(typeof g=="boolean"){c="b:"+(g?"1":"0")}else{if(Ext.isDate(g)){c="d:"+g.toGMTString()}else{if(Ext.isArray(g)){var k="";for(var j=0,a=g.length;j<a;j++){k+=this.encodeValue(g[j]);if(j!=a-1){k+="^"}}c="a:"+k}else{if(typeof g=="object"){var k="";for(var h in g){if(typeof g[h]!="function"&&g[h]!==undefined){k+=h+"="+this.encodeValue(g[h])+"^"}}c="o:"+k.substring(0,k.length-1)}else{c="s:"+g}}}}}return escape(c)}});Ext.state.Manager=function(){var a=new Ext.state.Provider();return{setProvider:function(c){a=c},get:function(g,c){return a.get(g,c)},set:function(c,g){a.set(c,g)},clear:function(c){a.clear(c)},getProvider:function(){return a}}}();Ext.state.CookieProvider=function(a){Ext.state.CookieProvider.superclass.constructor.call(this);this.path="/";this.expires=new Date(new Date().getTime()+(1000*60*60*24*7));this.domain=null;this.secure=false;Ext.apply(this,a);this.state=this.readCookies()};Ext.extend(Ext.state.CookieProvider,Ext.state.Provider,{set:function(a,c){if(typeof c=="undefined"||c===null){this.clear(a);return}this.setCookie(a,c);Ext.state.CookieProvider.superclass.set.call(this,a,c)},clear:function(a){this.clearCookie(a);Ext.state.CookieProvider.superclass.clear.call(this,a)},readCookies:function(){var h={};var l=document.cookie+";";var g=/\s?(.*?)=(.*?);/g;var k;while((k=g.exec(l))!=null){var a=k[1];var j=k[2];if(a&&a.substring(0,3)=="ys-"){h[a.substr(3)]=this.decodeValue(j)}}return h},setCookie:function(a,c){document.cookie="ys-"+a+"="+this.encodeValue(c)+((this.expires==null)?"":("; expires="+this.expires.toGMTString()))+((this.path==null)?"":("; path="+this.path))+((this.domain==null)?"":("; domain="+this.domain))+((this.secure==true)?"; secure":"")},clearCookie:function(a){document.cookie="ys-"+a+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+((this.path==null)?"":("; path="+this.path))+((this.domain==null)?"":("; domain="+this.domain))+((this.secure==true)?"; secure":"")}});Ext.DataView=Ext.extend(Ext.BoxComponent,{selectedClass:"x-view-selected",emptyText:"",deferEmptyText:true,trackOver:false,last:false,initComponent:function(){Ext.DataView.superclass.initComponent.call(this);if(typeof this.tpl=="string"||Ext.isArray(this.tpl)){this.tpl=new Ext.XTemplate(this.tpl)}this.addEvents("beforeclick","click","mouseenter","mouseleave","containerclick","dblclick","contextmenu","selectionchange","beforeselect");this.all=new Ext.CompositeElementLite();this.selected=new Ext.CompositeElementLite()},onRender:function(){if(!this.el){this.el=document.createElement("div");this.el.id=this.id}Ext.DataView.superclass.onRender.apply(this,arguments)},afterRender:function(){Ext.DataView.superclass.afterRender.call(this);this.el.on({click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu,scope:this});if(this.overClass||this.trackOver){this.el.on({mouseover:this.onMouseOver,mouseout:this.onMouseOut,scope:this})}if(this.store){this.setStore(this.store,true)}},refresh:function(){this.clearSelections(false,true);this.el.update("");var a=this.store.getRange();if(a.length<1){if(!this.deferEmptyText||this.hasSkippedEmptyText){this.el.update(this.emptyText)}this.all.clear()}else{this.tpl.overwrite(this.el,this.collectData(a,0));this.all.fill(Ext.query(this.itemSelector,this.el.dom));this.updateIndexes(0)}this.hasSkippedEmptyText=true},prepareData:function(a){return a},collectData:function(c,j){var h=[];for(var g=0,a=c.length;g<a;g++){h[h.length]=this.prepareData(c[g].data,j+g,c[g])}return h},bufferRender:function(a){var c=document.createElement("div");this.tpl.overwrite(c,this.collectData(a));return Ext.query(this.itemSelector,c)},onUpdate:function(k,a){var c=this.store.indexOf(a);var j=this.isSelected(c);var g=this.all.elements[c];var h=this.bufferRender([a],c)[0];this.all.replaceElement(c,h,true);if(j){this.selected.replaceElement(g,h);this.all.item(c).addClass(this.selectedClass)}this.updateIndexes(c,c)},onAdd:function(k,h,j){if(this.all.getCount()==0){this.refresh();return}var g=this.bufferRender(h,j),l,c=this.all.elements;if(j<this.all.getCount()){l=this.all.item(j).insertSibling(g,"before",true);c.splice.apply(c,[j,0].concat(g))}else{l=this.all.last().insertSibling(g,"after",true);c.push.apply(c,g)}this.updateIndexes(j)},onRemove:function(g,a,c){this.deselect(c);this.all.removeElement(c,true);this.updateIndexes(c);if(this.store.getCount()==0){this.refresh()}},refreshNode:function(a){this.onUpdate(this.store,this.store.getAt(a))},updateIndexes:function(h,g){var c=this.all.elements;h=h||0;g=g||((g===0)?0:(c.length-1));for(var a=h;a<=g;a++){c[a].viewIndex=a}},getStore:function(){return this.store},setStore:function(a,c){if(!c&&this.store){this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("datachanged",this.refresh,this);this.store.un("add",this.onAdd,this);this.store.un("remove",this.onRemove,this);this.store.un("update",this.onUpdate,this);this.store.un("clear",this.refresh,this)}if(a){a=Ext.StoreMgr.lookup(a);a.on("beforeload",this.onBeforeLoad,this);a.on("datachanged",this.refresh,this);a.on("add",this.onAdd,this);a.on("remove",this.onRemove,this);a.on("update",this.onUpdate,this);a.on("clear",this.refresh,this)}this.store=a;if(a){this.refresh()}},findItemFromChild:function(a){return Ext.fly(a).findParent(this.itemSelector,this.el)},onClick:function(g){var c=g.getTarget(this.itemSelector,this.el);if(c){var a=this.indexOf(c);if(this.onItemClick(c,a,g)!==false){this.fireEvent("click",this,a,c,g)}}else{if(this.fireEvent("containerclick",this,g)!==false){this.clearSelections()}}},onContextMenu:function(c){var a=c.getTarget(this.itemSelector,this.el);if(a){this.fireEvent("contextmenu",this,this.indexOf(a),a,c)}},onDblClick:function(c){var a=c.getTarget(this.itemSelector,this.el);if(a){this.fireEvent("dblclick",this,this.indexOf(a),a,c)}},onMouseOver:function(c){var a=c.getTarget(this.itemSelector,this.el);if(a&&a!==this.lastItem){this.lastItem=a;Ext.fly(a).addClass(this.overClass);this.fireEvent("mouseenter",this,this.indexOf(a),a,c)}},onMouseOut:function(a){if(this.lastItem){if(!a.within(this.lastItem,true,true)){Ext.fly(this.lastItem).removeClass(this.overClass);this.fireEvent("mouseleave",this,this.indexOf(this.lastItem),this.lastItem,a);delete this.lastItem}}},onItemClick:function(c,a,g){if(this.fireEvent("beforeclick",this,a,c,g)===false){return false}if(this.multiSelect){this.doMultiSelection(c,a,g);g.preventDefault()}else{if(this.singleSelect){this.doSingleSelection(c,a,g);g.preventDefault()}}return true},doSingleSelection:function(c,a,g){if(g.ctrlKey&&this.isSelected(a)){this.deselect(a)}else{this.select(a,false)}},doMultiSelection:function(g,a,h){if(h.shiftKey&&this.last!==false){var c=this.last;this.selectRange(c,a,h.ctrlKey);this.last=c}else{if((h.ctrlKey||this.simpleSelect)&&this.isSelected(a)){this.deselect(a)}else{this.select(a,h.ctrlKey||h.shiftKey||this.simpleSelect)}}},getSelectionCount:function(){return this.selected.getCount()},getSelectedNodes:function(){return this.selected.elements},getSelectedIndexes:function(){var c=[],h=this.selected.elements;for(var g=0,a=h.length;g<a;g++){c.push(h[g].viewIndex)}return c},getSelectedRecords:function(){var h=[],g=this.selected.elements;for(var c=0,a=g.length;c<a;c++){h[h.length]=this.store.getAt(g[c].viewIndex)}return h},getRecords:function(c){var j=[],h=c;for(var g=0,a=h.length;g<a;g++){j[j.length]=this.store.getAt(h[g].viewIndex)}return j},getRecord:function(a){return this.store.getAt(a.viewIndex)},clearSelections:function(a,c){if((this.multiSelect||this.singleSelect)&&this.selected.getCount()>0){if(!c){this.selected.removeClass(this.selectedClass)}this.selected.clear();this.last=false;if(!a){this.fireEvent("selectionchange",this,this.selected.elements)}}},isSelected:function(a){return this.selected.contains(this.getNode(a))},deselect:function(a){if(this.isSelected(a)){a=this.getNode(a);this.selected.removeElement(a);if(this.last==a.viewIndex){this.last=false}Ext.fly(a).removeClass(this.selectedClass);this.fireEvent("selectionchange",this,this.selected.elements)}},select:function(h,k,c){if(Ext.isArray(h)){if(!k){this.clearSelections(true)}for(var g=0,a=h.length;g<a;g++){this.select(h[g],true,true)}if(!c){this.fireEvent("selectionchange",this,this.selected.elements)}}else{var j=this.getNode(h);if(!k){this.clearSelections(true)}if(j&&!this.isSelected(j)){if(this.fireEvent("beforeselect",this,j,this.selected.elements)!==false){Ext.fly(j).addClass(this.selectedClass);this.selected.add(j);this.last=j.viewIndex;if(!c){this.fireEvent("selectionchange",this,this.selected.elements)}}}}},selectRange:function(g,a,c){if(!c){this.clearSelections(true)}this.select(this.getNodes(g,a),true)},getNode:function(a){if(typeof a=="string"){return document.getElementById(a)}else{if(typeof a=="number"){return this.all.elements[a]}}return a},getNodes:function(j,a){var h=this.all.elements;j=j||0;a=typeof a=="undefined"?Math.max(h.length-1,0):a;var c=[],g;if(j<=a){for(g=j;g<=a&&h[g];g++){c.push(h[g])}}else{for(g=j;g>=a&&h[g];g--){c.push(h[g])}}return c},indexOf:function(a){a=this.getNode(a);if(typeof a.viewIndex=="number"){return a.viewIndex}return this.all.indexOf(a)},onBeforeLoad:function(){if(this.loadingText){this.clearSelections(false,true);this.el.update('<div class="loading-indicator">'+this.loadingText+"</div>");this.all.clear()}},onDestroy:function(){Ext.DataView.superclass.onDestroy.call(this);this.setStore(null)}});Ext.reg("dataview",Ext.DataView);Ext.ColorPalette=function(a){Ext.ColorPalette.superclass.constructor.call(this,a);this.addEvents("select");if(this.handler){this.on("select",this.handler,this.scope,true)}};Ext.extend(Ext.ColorPalette,Ext.Component,{itemCls:"x-color-palette",value:null,clickEvent:"click",ctype:"Ext.ColorPalette",allowReselect:false,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],onRender:function(c,a){var g=this.tpl||new Ext.XTemplate('<tpl for="."><a href="#" class="color-{.}" hidefocus="on"><em><span style="background:#{.}" unselectable="on">&#160;</span></em></a></tpl>');var h=document.createElement("div");h.id=this.getId();h.className=this.itemCls;g.overwrite(h,this.colors);c.dom.insertBefore(h,a);this.el=Ext.get(h);this.el.on(this.clickEvent,this.handleClick,this,{delegate:"a"});if(this.clickEvent!="click"){this.el.on("click",Ext.emptyFn,this,{delegate:"a",preventDefault:true})}},afterRender:function(){Ext.ColorPalette.superclass.afterRender.call(this);if(this.value){var a=this.value;this.value=null;this.select(a)}},handleClick:function(g,a){g.preventDefault();if(!this.disabled){var h=a.className.match(/(?:^|\s)color-(.{6})(?:\s|$)/)[1];this.select(h.toUpperCase())}},select:function(a){a=a.replace("#","");if(a!=this.value||this.allowReselect){var c=this.el;if(this.value){c.child("a.color-"+this.value).removeClass("x-color-palette-sel")}c.child("a.color-"+a).addClass("x-color-palette-sel");this.value=a;this.fireEvent("select",this,a)}}});Ext.reg("colorpalette",Ext.ColorPalette);Ext.DatePicker=Ext.extend(Ext.Component,{todayText:"Today",okText:"&#160;OK&#160;",cancelText:"Cancel",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",format:"m/d/y",disabledDaysText:"Disabled",disabledDatesText:"Disabled",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",startDay:0,showToday:true,initComponent:function(){Ext.DatePicker.superclass.initComponent.call(this);this.value=this.value?this.value.clearTime():new Date().clearTime();this.addEvents("select");if(this.handler){this.on("select",this.handler,this.scope||this)}this.initDisabledDays()},initDisabledDays:function(){if(!this.disabledDatesRE&&this.disabledDates){var a=this.disabledDates;var g="(?:";for(var c=0;c<a.length;c++){g+=a[c];if(c!=a.length-1){g+="|"}}this.disabledDatesRE=new RegExp(g+")")}},setDisabledDates:function(a){if(Ext.isArray(a)){this.disabledDates=a;this.disabledDatesRE=null}else{this.disabledDatesRE=a}this.initDisabledDays();this.update(this.value,true)},setDisabledDays:function(a){this.disabledDays=a;this.update(this.value,true)},setMinDate:function(a){this.minDate=a;this.update(this.value,true)},setMaxDate:function(a){this.maxDate=a;this.update(this.value,true)},setValue:function(c){var a=this.value;this.value=c.clearTime(true);if(this.el){this.update(this.value)}},getValue:function(){return this.value},focus:function(){if(this.el){this.update(this.activeDate)}},onEnable:function(a){Ext.DatePicker.superclass.onEnable.call(this);this.doDisabled(false);this.update(a?this.value:this.activeDate);if(Ext.isIE){this.el.repaint()}},onDisable:function(){Ext.DatePicker.superclass.onDisable.call(this);this.doDisabled(true);if(Ext.isIE&&!Ext.isIE8){Ext.each([].concat(this.textNodes,this.el.query("th span")),function(a){Ext.fly(a).repaint()})}},doDisabled:function(a){this.keyNav[a?"disable":"enable"](a);this.leftClickRpt.setDisabled(a);this.rightClickRpt.setDisabled(a);if(this.showToday){this.todayKeyListener[a?"disable":"enable"](a);this.todayBtn.setDisabled(a)}},onRender:function(h,c){var a=['<table cellspacing="0">','<tr><td class="x-date-left"><a href="#" title="',this.prevText,'">&#160;</a></td><td class="x-date-middle" align="center"></td><td class="x-date-right"><a href="#" title="',this.nextText,'">&#160;</a></td></tr>','<tr><td colspan="3"><table class="x-date-inner" cellspacing="0"><thead><tr>'];var g=this.dayNames;for(var k=0;k<7;k++){var o=this.startDay+k;if(o>6){o=o-7}a.push("<th><span>",g[o].substr(0,1),"</span></th>")}a[a.length]="</tr></thead><tbody><tr>";for(var k=0;k<42;k++){if(k%7==0&&k!=0){a[a.length]="</tr><tr>"}a[a.length]='<td><a href="#" hidefocus="on" class="x-date-date" tabIndex="1"><em><span></span></em></a></td>'}a.push("</tr></tbody></table></td></tr>",this.showToday?'<tr><td colspan="3" class="x-date-bottom" align="center"></td></tr>':"",'</table><div class="x-date-mp"></div>');var l=document.createElement("div");l.className="x-date-picker";l.innerHTML=a.join("");h.dom.insertBefore(l,c);this.el=Ext.get(l);this.eventEl=Ext.get(l.firstChild);this.leftClickRpt=new Ext.util.ClickRepeater(this.el.child("td.x-date-left a"),{handler:this.showPrevMonth,scope:this,preventDefault:true,stopDefault:true});this.rightClickRpt=new Ext.util.ClickRepeater(this.el.child("td.x-date-right a"),{handler:this.showNextMonth,scope:this,preventDefault:true,stopDefault:true});this.eventEl.on("mousewheel",this.handleMouseWheel,this);this.monthPicker=this.el.down("div.x-date-mp");this.monthPicker.enableDisplayMode("block");this.keyNav=new Ext.KeyNav(this.eventEl,{left:function(m){m.ctrlKey?this.showPrevMonth():this.update(this.activeDate.add("d",-1))},right:function(m){m.ctrlKey?this.showNextMonth():this.update(this.activeDate.add("d",1))},up:function(m){m.ctrlKey?this.showNextYear():this.update(this.activeDate.add("d",-7))},down:function(m){m.ctrlKey?this.showPrevYear():this.update(this.activeDate.add("d",7))},pageUp:function(m){this.showNextMonth()},pageDown:function(m){this.showPrevMonth()},enter:function(m){m.stopPropagation();return true},scope:this});this.eventEl.on("click",this.handleDateClick,this,{delegate:"a.x-date-date"});this.el.unselectable();this.cells=this.el.select("table.x-date-inner tbody td");this.textNodes=this.el.query("table.x-date-inner tbody span");this.mbtn=new Ext.Button({text:"&#160;",tooltip:this.monthYearText,renderTo:this.el.child("td.x-date-middle",true)});this.mbtn.on("click",this.showMonthPicker,this);this.mbtn.el.child(this.mbtn.menuClassTarget).addClass("x-btn-with-menu");if(this.showToday){this.todayKeyListener=this.eventEl.addKeyListener(Ext.EventObject.SPACE,this.selectToday,this);var j=(new Date()).dateFormat(this.format);this.todayBtn=new Ext.Button({renderTo:this.el.child("td.x-date-bottom",true),text:String.format(this.todayText,j),tooltip:String.format(this.todayTip,j),handler:this.selectToday,scope:this})}if(Ext.isIE){this.el.repaint()}this.onEnable(true)},createMonthPicker:function(){if(!this.monthPicker.dom.firstChild){var a=['<table border="0" cellspacing="0">'];for(var c=0;c<6;c++){a.push('<tr><td class="x-date-mp-month"><a href="#">',Date.getShortMonthName(c),"</a></td>",'<td class="x-date-mp-month x-date-mp-sep"><a href="#">',Date.getShortMonthName(c+6),"</a></td>",c==0?'<td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-prev"></a></td><td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-next"></a></td></tr>':'<td class="x-date-mp-year"><a href="#"></a></td><td class="x-date-mp-year"><a href="#"></a></td></tr>')}a.push('<tr class="x-date-mp-btns"><td colspan="4"><button type="button" class="x-date-mp-ok">',this.okText,'</button><button type="button" class="x-date-mp-cancel">',this.cancelText,"</button></td></tr>","</table>");this.monthPicker.update(a.join(""));this.monthPicker.on("click",this.onMonthClick,this);this.monthPicker.on("dblclick",this.onMonthDblClick,this);this.mpMonths=this.monthPicker.select("td.x-date-mp-month");this.mpYears=this.monthPicker.select("td.x-date-mp-year");this.mpMonths.each(function(g,h,j){j+=1;if((j%2)==0){g.dom.xmonth=5+Math.round(j*0.5)}else{g.dom.xmonth=Math.round((j-1)*0.5)}})}},showMonthPicker:function(){if(!this.disabled){this.createMonthPicker();var a=this.el.getSize();this.monthPicker.setSize(a);this.monthPicker.child("table").setSize(a);this.mpSelMonth=(this.activeDate||this.value).getMonth();this.updateMPMonth(this.mpSelMonth);this.mpSelYear=(this.activeDate||this.value).getFullYear();this.updateMPYear(this.mpSelYear);this.monthPicker.slideIn("t",{duration:0.2})}},updateMPYear:function(j){this.mpyear=j;var g=this.mpYears.elements;for(var c=1;c<=10;c++){var h=g[c-1],a;if((c%2)==0){a=j+Math.round(c*0.5);h.firstChild.innerHTML=a;h.xyear=a}else{a=j-(5-Math.round(c*0.5));h.firstChild.innerHTML=a;h.xyear=a}this.mpYears.item(c-1)[a==this.mpSelYear?"addClass":"removeClass"]("x-date-mp-sel")}},updateMPMonth:function(a){this.mpMonths.each(function(c,g,h){c[c.dom.xmonth==a?"addClass":"removeClass"]("x-date-mp-sel")})},selectMPMonth:function(a){},onMonthClick:function(h,c){h.stopEvent();var g=new Ext.Element(c),a;if(g.is("button.x-date-mp-cancel")){this.hideMonthPicker()}else{if(g.is("button.x-date-mp-ok")){var j=new Date(this.mpSelYear,this.mpSelMonth,(this.activeDate||this.value).getDate());if(j.getMonth()!=this.mpSelMonth){j=new Date(this.mpSelYear,this.mpSelMonth,1).getLastDateOfMonth()}this.update(j);this.hideMonthPicker()}else{if(a=g.up("td.x-date-mp-month",2)){this.mpMonths.removeClass("x-date-mp-sel");a.addClass("x-date-mp-sel");this.mpSelMonth=a.dom.xmonth}else{if(a=g.up("td.x-date-mp-year",2)){this.mpYears.removeClass("x-date-mp-sel");a.addClass("x-date-mp-sel");this.mpSelYear=a.dom.xyear}else{if(g.is("a.x-date-mp-prev")){this.updateMPYear(this.mpyear-10)}else{if(g.is("a.x-date-mp-next")){this.updateMPYear(this.mpyear+10)}}}}}}},onMonthDblClick:function(h,c){h.stopEvent();var g=new Ext.Element(c),a;if(a=g.up("td.x-date-mp-month",2)){this.update(new Date(this.mpSelYear,a.dom.xmonth,(this.activeDate||this.value).getDate()));this.hideMonthPicker()}else{if(a=g.up("td.x-date-mp-year",2)){this.update(new Date(a.dom.xyear,this.mpSelMonth,(this.activeDate||this.value).getDate()));this.hideMonthPicker()}}},hideMonthPicker:function(a){if(this.monthPicker){if(a===true){this.monthPicker.hide()}else{this.monthPicker.slideOut("t",{duration:0.2})}}},showPrevMonth:function(a){this.update(this.activeDate.add("mo",-1))},showNextMonth:function(a){this.update(this.activeDate.add("mo",1))},showPrevYear:function(){this.update(this.activeDate.add("y",-1))},showNextYear:function(){this.update(this.activeDate.add("y",1))},handleMouseWheel:function(a){a.stopEvent();if(!this.disabled){var c=a.getWheelDelta();if(c>0){this.showPrevMonth()}else{if(c<0){this.showNextMonth()}}}},handleDateClick:function(c,a){c.stopEvent();if(!this.disabled&&a.dateValue&&!Ext.fly(a.parentNode).hasClass("x-date-disabled")){this.setValue(new Date(a.dateValue));this.fireEvent("select",this,this.value)}},selectToday:function(){if(this.todayBtn&&!this.todayBtn.disabled){this.setValue(new Date().clearTime());this.fireEvent("select",this,this.value)}},update:function(M,G){var a=this.activeDate,s=this.isVisible();this.activeDate=M;if(!G&&a&&this.el){var r=M.getTime();if(a.getMonth()==M.getMonth()&&a.getFullYear()==M.getFullYear()){this.cells.removeClass("x-date-selected");this.cells.each(function(t){if(t.dom.firstChild.dateValue==r){t.addClass("x-date-selected");if(s){setTimeout(function(){try{t.dom.firstChild.focus()}catch(w){}},50)}return false}});return}}var m=M.getDaysInMonth();var v=M.getFirstDateOfMonth();var j=v.getDay()-this.startDay;if(j<0){j+=7}var H=M.add("mo",-1);var k=H.getDaysInMonth()-j;var h=this.cells.elements;var x=this.textNodes;m+=j;var E=86400000;var J=(new Date(H.getFullYear(),H.getMonth(),k)).clearTime();var I=new Date().clearTime().getTime();var A=M.clearTime().getTime();var z=this.minDate?this.minDate.clearTime():Number.NEGATIVE_INFINITY;var D=this.maxDate?this.maxDate.clearTime():Number.POSITIVE_INFINITY;var L=this.disabledDatesRE;var y=this.disabledDatesText;var O=this.disabledDays?this.disabledDays.join(""):false;var K=this.disabledDaysText;var F=this.format;if(this.showToday){var p=new Date().clearTime();var g=(p<z||p>D||(L&&F&&L.test(p.dateFormat(F)))||(O&&O.indexOf(p.getDay())!=-1));if(!this.disabled){this.todayBtn.setDisabled(g);this.todayKeyListener[g?"disable":"enable"]()}}var o=function(R,w){w.title="";var P=J.getTime();w.firstChild.dateValue=P;if(P==I){w.className+=" x-date-today";w.title=R.todayText}if(P==A){w.className+=" x-date-selected";if(s){setTimeout(function(){try{w.firstChild.focus()}catch(t){}},50)}}if(P<z){w.className=" x-date-disabled";w.title=R.minText;return}if(P>D){w.className=" x-date-disabled";w.title=R.maxText;return}if(O){if(O.indexOf(J.getDay())!=-1){w.title=K;w.className=" x-date-disabled"}}if(L&&F){var Q=J.dateFormat(F);if(L.test(Q)){w.title=y.replace("%0",Q);w.className=" x-date-disabled"}}};var B=0;for(;B<j;B++){x[B].innerHTML=(++k);J.setDate(J.getDate()+1);h[B].className="x-date-prevday";o(this,h[B])}for(;B<m;B++){var c=B-j+1;x[B].innerHTML=(c);J.setDate(J.getDate()+1);h[B].className="x-date-active";o(this,h[B])}var N=0;for(;B<42;B++){x[B].innerHTML=(++N);J.setDate(J.getDate()+1);h[B].className="x-date-nextday";o(this,h[B])}this.mbtn.setText(this.monthNames[M.getMonth()]+" "+M.getFullYear());if(!this.internalRender){var l=this.el.dom.firstChild;var q=l.offsetWidth;this.el.setWidth(q+this.el.getBorderWidth("lr"));Ext.fly(l).setWidth(q);this.internalRender=true;if(Ext.isOpera&&!this.secondPass){l.rows[0].cells[1].style.width=(q-(l.rows[0].cells[0].offsetWidth+l.rows[0].cells[2].offsetWidth))+"px";this.secondPass=true;this.update.defer(10,this,[M])}}},beforeDestroy:function(){if(this.rendered){this.keyNav.disable();this.keyNav=null;Ext.destroy(this.leftClickRpt,this.rightClickRpt,this.monthPicker,this.eventEl,this.mbtn,this.todayBtn)}}});Ext.reg("datepicker",Ext.DatePicker);Ext.TabPanel=Ext.extend(Ext.Panel,{monitorResize:true,deferredRender:true,tabWidth:120,minTabWidth:30,resizeTabs:false,enableTabScroll:false,scrollIncrement:0,scrollRepeatInterval:400,scrollDuration:0.35,animScroll:true,tabPosition:"top",baseCls:"x-tab-panel",autoTabs:false,autoTabSelector:"div.x-tab",activeTab:null,tabMargin:2,plain:false,wheelIncrement:20,idDelimiter:"__",itemCls:"x-tab-item",elements:"body",headerAsText:false,frame:false,hideBorders:true,initComponent:function(){this.frame=false;Ext.TabPanel.superclass.initComponent.call(this);this.addEvents("beforetabchange","tabchange","contextmenu");this.setLayout(new Ext.layout.CardLayout({deferredRender:this.deferredRender}));if(this.tabPosition=="top"){this.elements+=",header";this.stripTarget="header"}else{this.elements+=",footer";this.stripTarget="footer"}if(!this.stack){this.stack=Ext.TabPanel.AccessStack()}this.initItems()},render:function(){Ext.TabPanel.superclass.render.apply(this,arguments);if(this.activeTab!==undefined){var a=this.activeTab;delete this.activeTab;this.setActiveTab(a)}},onRender:function(g,a){Ext.TabPanel.superclass.onRender.call(this,g,a);if(this.plain){var k=this.tabPosition=="top"?"header":"footer";this[k].addClass("x-tab-panel-"+k+"-plain")}var c=this[this.stripTarget];this.stripWrap=c.createChild({cls:"x-tab-strip-wrap",cn:{tag:"ul",cls:"x-tab-strip x-tab-strip-"+this.tabPosition}});var j=(this.tabPosition=="bottom"?this.stripWrap:null);this.stripSpacer=c.createChild({cls:"x-tab-strip-spacer"},j);this.strip=new Ext.Element(this.stripWrap.dom.firstChild);this.edge=this.strip.createChild({tag:"li",cls:"x-tab-edge"});this.strip.createChild({cls:"x-clear"});this.body.addClass("x-tab-panel-body-"+this.tabPosition);if(!this.itemTpl){var h=new Ext.Template('<li class="{cls}" id="{id}"><a class="x-tab-strip-close" onclick="return false;"></a>','<a class="x-tab-right" href="#" onclick="return false;"><em class="x-tab-left">','<span class="x-tab-strip-inner"><span class="x-tab-strip-text {iconCls}">{text}</span></span>',"</em></a></li>");h.disableFormats=true;h.compile();Ext.TabPanel.prototype.itemTpl=h}this.items.each(this.initTab,this)},afterRender:function(){Ext.TabPanel.superclass.afterRender.call(this);if(this.autoTabs){this.readTabs(false)}},initEvents:function(){Ext.TabPanel.superclass.initEvents.call(this);this.on("add",this.onAdd,this);this.on("remove",this.onRemove,this);this.strip.on("mousedown",this.onStripMouseDown,this);this.strip.on("contextmenu",this.onStripContextMenu,this);if(this.enableTabScroll){this.strip.on("mousewheel",this.onWheel,this)}},findTargets:function(g){var c=null;var a=g.getTarget("li",this.strip);if(a){c=this.getComponent(a.id.split(this.idDelimiter)[1]);if(c.disabled){return{close:null,item:null,el:null}}}return{close:g.getTarget(".x-tab-strip-close",this.strip),item:c,el:a}},onStripMouseDown:function(c){if(c.button!=0){return}c.preventDefault();var a=this.findTargets(c);if(a.close){this.remove(a.item);return}if(a.item&&a.item!=this.activeTab){this.setActiveTab(a.item)}},onStripContextMenu:function(c){c.preventDefault();var a=this.findTargets(c);if(a.item){this.fireEvent("contextmenu",this,a.item,c)}},readTabs:function(h){if(h===true){this.items.each(function(l){this.remove(l)},this)}var g=this.el.query(this.autoTabSelector);for(var c=0,a=g.length;c<a;c++){var j=g[c];var k=j.getAttribute("title");j.removeAttribute("title");this.add({title:k,contentEl:j})}},initTab:function(h,c){var j=this.strip.dom.childNodes[c];var a=h.closable?"x-tab-strip-closable":"";if(h.disabled){a+=" x-item-disabled"}if(h.iconCls){a+=" x-tab-with-icon"}if(h.tabCls){a+=" "+h.tabCls}var k={id:this.id+this.idDelimiter+h.getItemId(),text:h.title,cls:a,iconCls:h.iconCls||""};var g=j?this.itemTpl.insertBefore(j,k):this.itemTpl.append(this.strip,k);Ext.fly(g).addClassOnOver("x-tab-strip-over");if(h.tabTip){Ext.fly(g).child("span.x-tab-strip-text",true).qtip=h.tabTip}h.tabEl=g;h.on("disable",this.onItemDisabled,this);h.on("enable",this.onItemEnabled,this);h.on("titlechange",this.onItemTitleChanged,this);h.on("iconchange",this.onItemIconChanged,this);h.on("beforeshow",this.onBeforeShowItem,this)},onAdd:function(g,c,a){this.initTab(c,a);if(this.items.getCount()==1){this.syncSize()}this.delegateUpdates()},onBeforeAdd:function(c){var a=c.events?(this.items.containsKey(c.getItemId())?c:null):this.items.get(c);if(a){this.setActiveTab(c);return false}Ext.TabPanel.superclass.onBeforeAdd.apply(this,arguments);var g=c.elements;c.elements=g?g.replace(",header",""):g;c.border=(c.border===true)},onRemove:function(g,c){Ext.destroy(Ext.get(this.getTabEl(c)));this.stack.remove(c);c.un("disable",this.onItemDisabled,this);c.un("enable",this.onItemEnabled,this);c.un("titlechange",this.onItemTitleChanged,this);c.un("iconchange",this.onItemIconChanged,this);c.un("beforeshow",this.onBeforeShowItem,this);if(c==this.activeTab){var a=this.stack.next();if(a){this.setActiveTab(a)}else{if(this.items.getCount()>0){this.setActiveTab(0)}else{this.activeTab=null}}}this.delegateUpdates()},onBeforeShowItem:function(a){if(a!=this.activeTab){this.setActiveTab(a);return false}},onItemDisabled:function(c){var a=this.getTabEl(c);if(a){Ext.fly(a).addClass("x-item-disabled")}this.stack.remove(c)},onItemEnabled:function(c){var a=this.getTabEl(c);if(a){Ext.fly(a).removeClass("x-item-disabled")}},onItemTitleChanged:function(c){var a=this.getTabEl(c);if(a){Ext.fly(a).child("span.x-tab-strip-text",true).innerHTML=c.title}},onItemIconChanged:function(h,a,g){var c=this.getTabEl(h);if(c){Ext.fly(c).child("span.x-tab-strip-text").replaceClass(g,a)}},getTabEl:function(a){var c=(typeof a==="number")?this.items.items[a].getItemId():a.getItemId();return document.getElementById(this.id+this.idDelimiter+c)},onResize:function(){Ext.TabPanel.superclass.onResize.apply(this,arguments);this.delegateUpdates()},beginUpdate:function(){this.suspendUpdates=true},endUpdate:function(){this.suspendUpdates=false;this.delegateUpdates()},hideTabStripItem:function(c){c=this.getComponent(c);var a=this.getTabEl(c);if(a){a.style.display="none";this.delegateUpdates()}this.stack.remove(c)},unhideTabStripItem:function(c){c=this.getComponent(c);var a=this.getTabEl(c);if(a){a.style.display="";this.delegateUpdates()}},delegateUpdates:function(){if(this.suspendUpdates){return}if(this.resizeTabs&&this.rendered){this.autoSizeTabs()}if(this.enableTabScroll&&this.rendered){this.autoScrollTabs()}},autoSizeTabs:function(){var l=this.items.length;var c=this.tabPosition!="bottom"?"header":"footer";var g=this[c].dom.offsetWidth;var a=this[c].dom.clientWidth;if(!this.resizeTabs||l<1||!a){return}var o=Math.max(Math.min(Math.floor((a-4)/l)-this.tabMargin,this.tabWidth),this.minTabWidth);this.lastTabWidth=o;var q=this.stripWrap.dom.getElementsByTagName("li");for(var j=0,m=q.length-1;j<m;j++){var p=q[j];var r=p.childNodes[1].firstChild.firstChild;var k=p.offsetWidth;var h=r.offsetWidth;r.style.width=(o-(k-h))+"px"}},adjustBodyWidth:function(a){if(this.header){this.header.setWidth(a)}if(this.footer){this.footer.setWidth(a)}return a},setActiveTab:function(g){g=this.getComponent(g);if(!g||this.fireEvent("beforetabchange",this,g,this.activeTab)===false){return}if(!this.rendered){this.activeTab=g;return}if(this.activeTab!=g){if(this.activeTab){var a=this.getTabEl(this.activeTab);if(a){Ext.fly(a).removeClass("x-tab-strip-active")}this.activeTab.fireEvent("deactivate",this.activeTab)}var c=this.getTabEl(g);Ext.fly(c).addClass("x-tab-strip-active");this.activeTab=g;this.stack.add(g);this.layout.setActiveItem(g);if(this.layoutOnTabChange&&g.doLayout){g.doLayout()}if(this.scrolling){this.scrollToTab(g,this.animScroll)}g.fireEvent("activate",g);this.fireEvent("tabchange",this,g)}},getActiveTab:function(){return this.activeTab||null},getItem:function(a){return this.getComponent(a)},autoScrollTabs:function(){this.pos=this.tabPosition=="bottom"?this.footer:this.header;var m=this.items.length;var h=this.pos.dom.offsetWidth;var g=this.pos.dom.clientWidth;var k=this.stripWrap;var j=k.dom;var c=j.offsetWidth;var o=this.getScrollPos();var a=this.edge.getOffsetsTo(this.stripWrap)[0]+o;if(!this.enableTabScroll||m<1||c<20){return}if(a<=g){j.scrollLeft=0;k.setWidth(g);if(this.scrolling){this.scrolling=false;this.pos.removeClass("x-tab-scrolling");this.scrollLeft.hide();this.scrollRight.hide();if(Ext.isAir||Ext.isWebKit){j.style.marginLeft="";j.style.marginRight=""}}}else{if(!this.scrolling){this.pos.addClass("x-tab-scrolling");if(Ext.isAir||Ext.isWebKit){j.style.marginLeft="18px";j.style.marginRight="18px"}}g-=k.getMargins("lr");k.setWidth(g>20?g:20);if(!this.scrolling){if(!this.scrollLeft){this.createScrollers()}else{this.scrollLeft.show();this.scrollRight.show()}}this.scrolling=true;if(o>(a-g)){j.scrollLeft=a-g}else{this.scrollToTab(this.activeTab,false)}this.updateScrollButtons()}},createScrollers:function(){this.pos.addClass("x-tab-scrolling-"+this.tabPosition);var g=this.stripWrap.dom.offsetHeight;var a=this.pos.insertFirst({cls:"x-tab-scroller-left"});a.setHeight(g);a.addClassOnOver("x-tab-scroller-left-over");this.leftRepeater=new Ext.util.ClickRepeater(a,{interval:this.scrollRepeatInterval,handler:this.onScrollLeft,scope:this});this.scrollLeft=a;var c=this.pos.insertFirst({cls:"x-tab-scroller-right"});c.setHeight(g);c.addClassOnOver("x-tab-scroller-right-over");this.rightRepeater=new Ext.util.ClickRepeater(c,{interval:this.scrollRepeatInterval,handler:this.onScrollRight,scope:this});this.scrollRight=c},getScrollWidth:function(){return this.edge.getOffsetsTo(this.stripWrap)[0]+this.getScrollPos()},getScrollPos:function(){return parseInt(this.stripWrap.dom.scrollLeft,10)||0},getScrollArea:function(){return parseInt(this.stripWrap.dom.clientWidth,10)||0},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},getScrollIncrement:function(){return this.scrollIncrement||(this.resizeTabs?this.lastTabWidth+2:100)},scrollToTab:function(j,a){if(!j){return}var g=this.getTabEl(j);var l=this.getScrollPos(),h=this.getScrollArea();var k=Ext.fly(g).getOffsetsTo(this.stripWrap)[0]+l;var c=k+g.offsetWidth;if(k<l){this.scrollTo(k,a)}else{if(c>(l+h)){this.scrollTo(c-h,a)}}},scrollTo:function(c,a){this.stripWrap.scrollTo("left",c,a?this.getScrollAnim():false);if(!a){this.updateScrollButtons()}},onWheel:function(h){var j=h.getWheelDelta()*this.wheelIncrement*-1;h.stopEvent();var k=this.getScrollPos();var g=k+j;var a=this.getScrollWidth()-this.getScrollArea();var c=Math.max(0,Math.min(a,g));if(c!=k){this.scrollTo(c,false)}},onScrollRight:function(){var a=this.getScrollWidth()-this.getScrollArea();var g=this.getScrollPos();var c=Math.min(a,g+this.getScrollIncrement());if(c!=g){this.scrollTo(c,this.animScroll)}},onScrollLeft:function(){var c=this.getScrollPos();var a=Math.max(0,c-this.getScrollIncrement());if(a!=c){this.scrollTo(a,this.animScroll)}},updateScrollButtons:function(){var a=this.getScrollPos();this.scrollLeft[a==0?"addClass":"removeClass"]("x-tab-scroller-left-disabled");this.scrollRight[a>=(this.getScrollWidth()-this.getScrollArea())?"addClass":"removeClass"]("x-tab-scroller-right-disabled")},beforeDestroy:function(){if(this.items){this.items.each(function(a){if(a&&a.tabEl){Ext.get(a.tabEl).removeAllListeners();a.tabEl=null}},this)}if(this.strip){this.strip.removeAllListeners()}Ext.TabPanel.superclass.beforeDestroy.apply(this)}});Ext.reg("tabpanel",Ext.TabPanel);Ext.TabPanel.prototype.activate=Ext.TabPanel.prototype.setActiveTab;Ext.TabPanel.AccessStack=function(){var a=[];return{add:function(c){a.push(c);if(a.length>10){a.shift()}},remove:function(j){var h=[];for(var g=0,c=a.length;g<c;g++){if(a[g]!=j){h.push(a[g])}}a=h},next:function(){return a.pop()}}};Ext.Button=Ext.extend(Ext.Component,{hidden:false,disabled:false,pressed:false,enableToggle:false,menuAlign:"tl-bl?",type:"button",menuClassTarget:"tr",clickEvent:"click",handleMouseEvents:true,tooltipType:"qtip",buttonSelector:"button:first-child",initComponent:function(){Ext.Button.superclass.initComponent.call(this);this.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout");if(this.menu){this.menu=Ext.menu.MenuMgr.get(this.menu)}if(typeof this.toggleGroup==="string"){this.enableToggle=true}},onRender:function(g,a){if(!this.template){if(!Ext.Button.buttonTemplate){Ext.Button.buttonTemplate=new Ext.Template('<table border="0" cellpadding="0" cellspacing="0" class="x-btn-wrap"><tbody><tr>','<td class="x-btn-left"><i>&#160;</i></td><td class="x-btn-center"><em unselectable="on"><button class="x-btn-text" type="{1}">{0}</button></em></td><td class="x-btn-right"><i>&#160;</i></td>',"</tr></tbody></table>")}this.template=Ext.Button.buttonTemplate}var c,j=[this.text||"&#160;",this.type];if(a){c=this.template.insertBefore(a,j,true)}else{c=this.template.append(g,j,true)}var h=this.btnEl=c.child(this.buttonSelector);h.on("focus",this.onFocus,this);h.on("blur",this.onBlur,this);this.initButtonEl(c,h);if(this.menu){this.el.child(this.menuClassTarget).addClass("x-btn-with-menu")}Ext.ButtonToggleMgr.register(this)},initButtonEl:function(g,h){this.el=g;g.addClass("x-btn");if(this.id){var j=this.el.dom,k=Ext.Element.cache;delete k[j.id];j.id=this.el.id=this.id;k[j.id]=this.el}if(this.icon){h.setStyle("background-image","url("+this.icon+")")}if(this.iconCls){h.addClass(this.iconCls);if(!this.cls){g.addClass(this.text?"x-btn-text-icon":"x-btn-icon")}}if(this.tabIndex!==undefined){h.dom.tabIndex=this.tabIndex}if(this.tooltip){if(typeof this.tooltip=="object"){Ext.QuickTips.register(Ext.apply({target:h.id},this.tooltip))}else{h.dom[this.tooltipType]=this.tooltip}}if(this.pressed){this.el.addClass("x-btn-pressed")}if(this.handleMouseEvents){g.on("mouseover",this.onMouseOver,this);g.on("mousedown",this.onMouseDown,this)}if(this.menu){this.menu.on("show",this.onMenuShow,this);this.menu.on("hide",this.onMenuHide,this)}if(this.repeat){var a=new Ext.util.ClickRepeater(g,typeof this.repeat=="object"?this.repeat:{});a.on("click",this.onClick,this)}g.on(this.clickEvent,this.onClick,this)},afterRender:function(){Ext.Button.superclass.afterRender.call(this);if(Ext.isIE6){this.autoWidth.defer(1,this)}else{this.autoWidth()}},setIconClass:function(a){if(this.el){this.btnEl.replaceClass(this.iconCls,a)}this.iconCls=a},beforeDestroy:function(){if(this.rendered){if(this.btnEl){if(typeof this.tooltip=="object"){Ext.QuickTips.unregister(this.btnEl)}Ext.destroy(this.btnEl)}}Ext.destroy(this.menu,this.repeater)},onDestroy:function(){var a=Ext.getDoc();a.un("mouseover",this.monitorMouseOver,this);a.un("mouseup",this.onMouseUp,this);if(this.rendered){Ext.ButtonToggleMgr.unregister(this)}},autoWidth:function(){if(this.el){this.el.setWidth("auto");if(Ext.isIE7&&Ext.isStrict){var a=this.btnEl;if(a&&a.getWidth()>20){a.clip();a.setWidth(Ext.util.TextMetrics.measure(a,this.text).width+a.getFrameWidth("lr"))}}if(this.minWidth){if(this.el.getWidth()<this.minWidth){this.el.setWidth(this.minWidth)}}}},setHandler:function(c,a){this.handler=c;this.scope=a},setText:function(a){this.text=a;if(this.el){this.el.child("td.x-btn-center "+this.buttonSelector).update(a)}this.autoWidth()},getText:function(){return this.text},toggle:function(c,a){c=c===undefined?!this.pressed:!!c;if(c!=this.pressed){if(this.rendered){this.el[c?"addClass":"removeClass"]("x-btn-pressed")}this.pressed=c;if(!a){this.fireEvent("toggle",this,c);if(this.toggleHandler){this.toggleHandler.call(this.scope||this,this,c)}}}},focus:function(){this.btnEl.focus()},onDisable:function(){this.onDisableChange(true)},onEnable:function(){this.onDisableChange(false)},onDisableChange:function(a){if(this.el){if(!Ext.isIE6||!this.text){this.el[a?"addClass":"removeClass"](this.disabledClass)}this.el.dom.disabled=a}this.disabled=a},showMenu:function(){if(this.menu){this.menu.show(this.el,this.menuAlign)}return this},hideMenu:function(){if(this.menu){this.menu.hide()}return this},hasVisibleMenu:function(){return this.menu&&this.menu.isVisible()},onClick:function(a){if(a){a.preventDefault()}if(a.button!=0){return}if(!this.disabled){if(this.enableToggle&&(this.allowDepress!==false||!this.pressed)){this.toggle()}if(this.menu&&!this.menu.isVisible()&&!this.ignoreNextClick){this.showMenu()}this.fireEvent("click",this,a);if(this.handler){this.handler.call(this.scope||this,this,a)}}},isMenuTriggerOver:function(c,a){return this.menu&&!a},isMenuTriggerOut:function(c,a){return this.menu&&!a},onMouseOver:function(c){if(!this.disabled){var a=c.within(this.el,true);if(!a){this.el.addClass("x-btn-over");if(!this.monitoringMouseOver){Ext.getDoc().on("mouseover",this.monitorMouseOver,this);this.monitoringMouseOver=true}this.fireEvent("mouseover",this,c)}if(this.isMenuTriggerOver(c,a)){this.fireEvent("menutriggerover",this,this.menu,c)}}},monitorMouseOver:function(a){if(a.target!=this.el.dom&&!a.within(this.el)){if(this.monitoringMouseOver){Ext.getDoc().un("mouseover",this.monitorMouseOver,this);this.monitoringMouseOver=false}this.onMouseOut(a)}},onMouseOut:function(c){var a=c.within(this.el)&&c.target!=this.el.dom;this.el.removeClass("x-btn-over");this.fireEvent("mouseout",this,c);if(this.isMenuTriggerOut(c,a)){this.fireEvent("menutriggerout",this,this.menu,c)}},onFocus:function(a){if(!this.disabled){this.el.addClass("x-btn-focus")}},onBlur:function(a){this.el.removeClass("x-btn-focus")},getClickEl:function(c,a){return this.el},onMouseDown:function(a){if(!this.disabled&&a.button==0){this.getClickEl(a).addClass("x-btn-click");Ext.getDoc().on("mouseup",this.onMouseUp,this)}},onMouseUp:function(a){if(a.button==0){this.getClickEl(a,true).removeClass("x-btn-click");Ext.getDoc().un("mouseup",this.onMouseUp,this)}},onMenuShow:function(a){this.ignoreNextClick=0;this.el.addClass("x-btn-menu-active");this.fireEvent("menushow",this,this.menu)},onMenuHide:function(a){this.el.removeClass("x-btn-menu-active");this.ignoreNextClick=this.restoreClick.defer(250,this);this.fireEvent("menuhide",this,this.menu)},restoreClick:function(){this.ignoreNextClick=0}});Ext.reg("button",Ext.Button);Ext.ButtonToggleMgr=function(){var a={};function c(k,o){if(o){var m=a[k.toggleGroup];for(var j=0,h=m.length;j<h;j++){if(m[j]!=k){m[j].toggle(false)}}}}return{register:function(h){if(!h.toggleGroup){return}var j=a[h.toggleGroup];if(!j){j=a[h.toggleGroup]=[]}j.push(h);h.on("toggle",c)},unregister:function(h){if(!h.toggleGroup){return}var j=a[h.toggleGroup];if(j){j.remove(h);h.un("toggle",c)}}}}();Ext.SplitButton=Ext.extend(Ext.Button,{arrowSelector:"button:last",initComponent:function(){Ext.SplitButton.superclass.initComponent.call(this);this.addEvents("arrowclick")},onRender:function(h,a){var c=new Ext.Template('<table cellspacing="0" class="x-btn-menu-wrap x-btn"><tr><td>','<table cellspacing="0" class="x-btn-wrap x-btn-menu-text-wrap"><tbody>','<tr><td class="x-btn-left"><i>&#160;</i></td><td class="x-btn-center"><button class="x-btn-text" type="{1}">{0}</button></td></tr>',"</tbody></table></td><td>",'<table cellspacing="0" class="x-btn-wrap x-btn-menu-arrow-wrap"><tbody>','<tr><td class="x-btn-center"><button class="x-btn-menu-arrow-el" type="button">&#160;</button></td><td class="x-btn-right"><i>&#160;</i></td></tr>',"</tbody></table></td></tr></table>");var g,k=[this.text||"&#160;",this.type];if(a){g=c.insertBefore(a,k,true)}else{g=c.append(h,k,true)}var j=this.btnEl=g.child(this.buttonSelector);this.initButtonEl(g,j);this.arrowBtnTable=g.child("table:last");this.arrowEl=g.child(this.arrowSelector);if(this.arrowTooltip){this.arrowEl.dom[this.tooltipType]=this.arrowTooltip}},autoWidth:function(){if(this.el){var g=this.el.child("table:first");var c=this.el.child("table:last");this.el.setWidth("auto");g.setWidth("auto");if(Ext.isIE7&&Ext.isStrict){var a=this.btnEl;if(a&&a.getWidth()>20){a.clip();a.setWidth(Ext.util.TextMetrics.measure(a,this.text).width+a.getFrameWidth("lr"))}}if(this.minWidth){if((g.getWidth()+c.getWidth())<this.minWidth){g.setWidth(this.minWidth-c.getWidth())}}this.el.setWidth(g.getWidth()+c.getWidth())}},setArrowHandler:function(c,a){this.arrowHandler=c;this.scope=a},onClick:function(a){a.preventDefault();if(!this.disabled){if(a.getTarget(".x-btn-menu-arrow-wrap")){if(this.menu&&!this.menu.isVisible()&&!this.ignoreNextClick){this.showMenu()}this.fireEvent("arrowclick",this,a);if(this.arrowHandler){this.arrowHandler.call(this.scope||this,this,a)}}else{if(this.enableToggle){this.toggle()}this.fireEvent("click",this,a);if(this.handler){this.handler.call(this.scope||this,this,a)}}}},getClickEl:function(c,a){if(!a){return(this.lastClickEl=c.getTarget("table",10,true))}return this.lastClickEl},onDisableChange:function(a){Ext.SplitButton.superclass.onDisableChange.call(this,a);if(this.arrowEl){this.arrowEl.dom.disabled=a}},isMenuTriggerOver:function(a){return this.menu&&a.within(this.arrowBtnTable)&&!a.within(this.arrowBtnTable,true)},isMenuTriggerOut:function(c,a){return this.menu&&!c.within(this.arrowBtnTable)},onDestroy:function(){Ext.destroy(this.arrowBtnTable);Ext.SplitButton.superclass.onDestroy.call(this)}});Ext.MenuButton=Ext.SplitButton;Ext.reg("splitbutton",Ext.SplitButton);Ext.CycleButton=Ext.extend(Ext.SplitButton,{getItemText:function(a){if(a&&this.showText===true){var c="";if(this.prependText){c+=this.prependText}c+=a.text;return c}return undefined},setActiveItem:function(g,a){if(typeof g!="object"){g=this.menu.items.get(g)}if(g){if(!this.rendered){this.text=this.getItemText(g);this.iconCls=g.iconCls}else{var c=this.getItemText(g);if(c){this.setText(c)}this.setIconClass(g.iconCls)}this.activeItem=g;if(!g.checked){g.setChecked(true,true)}if(this.forceIcon){this.setIconClass(this.forceIcon)}if(!a){this.fireEvent("change",this,g)}}},getActiveItem:function(){return this.activeItem},initComponent:function(){this.addEvents("change");if(this.changeHandler){this.on("change",this.changeHandler,this.scope||this);delete this.changeHandler}this.itemCount=this.items.length;this.menu={cls:"x-cycle-menu",items:[]};var h;for(var c=0,a=this.itemCount;c<a;c++){var g=this.items[c];g.group=g.group||this.id;g.itemIndex=c;g.checkHandler=this.checkHandler;g.scope=this;g.checked=g.checked||false;this.menu.items.push(g);if(g.checked){h=g}}this.setActiveItem(h,true);Ext.CycleButton.superclass.initComponent.call(this);this.on("click",this.toggleSelected,this)},checkHandler:function(a,c){if(c){this.setActiveItem(a)}},toggleSelected:function(){this.menu.render();var g,a;for(var c=1;c<this.itemCount;c++){g=(this.activeItem.itemIndex+c)%this.itemCount;a=this.menu.items.itemAt(g);if(!a.disabled){a.setChecked(true);break}}}});Ext.reg("cycle",Ext.CycleButton);Ext.Toolbar=function(a){if(Ext.isArray(a)){a={buttons:a}}Ext.Toolbar.superclass.constructor.call(this,a)};(function(){var a=Ext.Toolbar;Ext.extend(a,Ext.BoxComponent,{trackMenus:true,initComponent:function(){a.superclass.initComponent.call(this);if(this.items){this.buttons=this.items}this.items=new Ext.util.MixedCollection(false,function(c){return c.itemId||c.id||Ext.id()})},autoCreate:{cls:"x-toolbar x-small-editor",html:'<table cellspacing="0"><tr></tr></table>'},onRender:function(g,c){this.el=g.createChild(Ext.apply({id:this.id},this.autoCreate),c);this.tr=this.el.child("tr",true)},afterRender:function(){a.superclass.afterRender.call(this);if(this.buttons){this.add.apply(this,this.buttons);delete this.buttons}},add:function(){var g=arguments,c=g.length;for(var h=0;h<c;h++){var j=g[h];if(j.isFormField){this.addField(j)}else{if(j.render){this.addItem(j)}else{if(typeof j=="string"){if(j=="separator"||j=="-"){this.addSeparator()}else{if(j==" "){this.addSpacer()}else{if(j=="->"){this.addFill()}else{this.addText(j)}}}}else{if(j.tagName){this.addElement(j)}else{if(typeof j=="object"){if(j.xtype){this.addField(Ext.ComponentMgr.create(j,"button"))}else{this.addButton(j)}}}}}}}},addSeparator:function(){return this.addItem(new a.Separator())},addSpacer:function(){return this.addItem(new a.Spacer())},addFill:function(){return this.addItem(new a.Fill())},addElement:function(c){return this.addItem(new a.Item(c))},addItem:function(c){var g=this.nextBlock();this.initMenuTracking(c);c.render(g);this.items.add(c);return c},addButton:function(h){if(Ext.isArray(h)){var k=[];for(var j=0,g=h.length;j<g;j++){k.push(this.addButton(h[j]))}return k}var c=h;if(!(h instanceof a.Button)){c=h.split?new a.SplitButton(h):new a.Button(h)}var l=this.nextBlock();this.initMenuTracking(c);c.render(l);this.items.add(c);return c},initMenuTracking:function(c){if(this.trackMenus&&c.menu){c.on({menutriggerover:this.onButtonTriggerOver,menushow:this.onButtonMenuShow,menuhide:this.onButtonMenuHide,scope:this})}},addText:function(c){return this.addItem(new a.TextItem(c))},insertButton:function(g,k){if(Ext.isArray(k)){var j=[];for(var h=0,c=k.length;h<c;h++){j.push(this.insertButton(g+h,k[h]))}return j}if(!(k instanceof a.Button)){k=new a.Button(k)}var l=document.createElement("td");this.tr.insertBefore(l,this.tr.childNodes[g]);this.initMenuTracking(k);k.render(l);this.items.insert(g,k);return k},addDom:function(g,c){var j=this.nextBlock();Ext.DomHelper.overwrite(j,g);var h=new a.Item(j.firstChild);h.render(j);this.items.add(h);return h},addField:function(g){var h=this.nextBlock();g.render(h);var c=new a.Item(h.firstChild);c.render(h);this.items.add(g);return c},nextBlock:function(){var c=document.createElement("td");this.tr.appendChild(c);return c},onDestroy:function(){Ext.Toolbar.superclass.onDestroy.call(this);if(this.rendered){if(this.items){Ext.destroy.apply(Ext,this.items.items)}Ext.Element.uncache(this.tr)}},onDisable:function(){this.items.each(function(c){if(c.disable){c.disable()}})},onEnable:function(){this.items.each(function(c){if(c.enable){c.enable()}})},onButtonTriggerOver:function(c){if(this.activeMenuBtn&&this.activeMenuBtn!=c){this.activeMenuBtn.hideMenu();c.showMenu();this.activeMenuBtn=c}},onButtonMenuShow:function(c){this.activeMenuBtn=c},onButtonMenuHide:function(c){delete this.activeMenuBtn}});Ext.reg("toolbar",Ext.Toolbar);a.Item=function(c){this.el=Ext.getDom(c);this.id=Ext.id(this.el);this.hidden=false};a.Item.prototype={getEl:function(){return this.el},render:function(c){this.td=c;c.appendChild(this.el)},destroy:function(){if(this.el){var c=Ext.get(this.el);Ext.destroy(c)}Ext.removeNode(this.td)},show:function(){this.hidden=false;this.td.style.display=""},hide:function(){this.hidden=true;this.td.style.display="none"},setVisible:function(c){if(c){this.show()}else{this.hide()}},focus:function(){Ext.fly(this.el).focus()},disable:function(){Ext.fly(this.td).addClass("x-item-disabled");this.disabled=true;this.el.disabled=true},enable:function(){Ext.fly(this.td).removeClass("x-item-disabled");this.disabled=false;this.el.disabled=false}};Ext.reg("tbitem",a.Item);a.Separator=function(){var c=document.createElement("span");c.className="ytb-sep";a.Separator.superclass.constructor.call(this,c)};Ext.extend(a.Separator,a.Item,{enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbseparator",a.Separator);a.Spacer=function(){var c=document.createElement("div");c.className="ytb-spacer";a.Spacer.superclass.constructor.call(this,c)};Ext.extend(a.Spacer,a.Item,{enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbspacer",a.Spacer);a.Fill=Ext.extend(a.Spacer,{render:function(c){c.style.width="100%";a.Fill.superclass.render.call(this,c)}});Ext.reg("tbfill",a.Fill);a.TextItem=function(c){var g=document.createElement("span");g.className="ytb-text";g.innerHTML=c.text?c.text:c;a.TextItem.superclass.constructor.call(this,g)};Ext.extend(a.TextItem,a.Item,{enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbtext",a.TextItem);a.Button=Ext.extend(Ext.Button,{hideParent:true,onDestroy:function(){a.Button.superclass.onDestroy.call(this);if(this.container){this.container.remove()}}});Ext.reg("tbbutton",a.Button);a.SplitButton=Ext.extend(Ext.SplitButton,{hideParent:true,onDestroy:function(){a.SplitButton.superclass.onDestroy.call(this);if(this.container){this.container.remove()}}});Ext.reg("tbsplit",a.SplitButton);a.MenuButton=a.SplitButton})();Ext.PagingToolbar=Ext.extend(Ext.Toolbar,{pageSize:20,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",paramNames:{start:"start",limit:"limit"},initComponent:function(){this.addEvents("change","beforechange");Ext.PagingToolbar.superclass.initComponent.call(this);this.cursor=0;this.bind(this.store)},onRender:function(c,a){Ext.PagingToolbar.superclass.onRender.call(this,c,a);this.first=this.addButton({tooltip:this.firstText,iconCls:"x-tbar-page-first",disabled:true,handler:this.onClick.createDelegate(this,["first"])});this.prev=this.addButton({tooltip:this.prevText,iconCls:"x-tbar-page-prev",disabled:true,handler:this.onClick.createDelegate(this,["prev"])});this.addSeparator();this.add(this.beforePageText);this.field=Ext.get(this.addDom({tag:"input",type:"text",size:"3",value:"1",cls:"x-tbar-page-number"}).el);this.field.on("keydown",this.onPagingKeydown,this);this.field.on("focus",function(){this.dom.select()});this.field.on("blur",this.onPagingBlur,this);this.afterTextEl=this.addText(String.format(this.afterPageText,1));this.field.setHeight(18);this.addSeparator();this.next=this.addButton({tooltip:this.nextText,iconCls:"x-tbar-page-next",disabled:true,handler:this.onClick.createDelegate(this,["next"])});this.last=this.addButton({tooltip:this.lastText,iconCls:"x-tbar-page-last",disabled:true,handler:this.onClick.createDelegate(this,["last"])});this.addSeparator();this.loading=this.addButton({tooltip:this.refreshText,iconCls:"x-tbar-loading",handler:this.onClick.createDelegate(this,["refresh"])});if(this.displayInfo){this.displayEl=Ext.fly(this.el.dom).createChild({cls:"x-paging-info"})}if(this.dsLoaded){this.onLoad.apply(this,this.dsLoaded)}},updateInfo:function(){if(this.displayEl){var a=this.store.getCount();var c=a==0?this.emptyMsg:String.format(this.displayMsg,this.cursor+1,this.cursor+a,this.store.getTotalCount());this.displayEl.update(c)}},onLoad:function(a,g,k){if(!this.rendered){this.dsLoaded=[a,g,k];return}this.cursor=k.params?k.params[this.paramNames.start]:0;var j=this.getPageData(),c=j.activePage,h=j.pages;this.afterTextEl.el.innerHTML=String.format(this.afterPageText,j.pages);this.field.dom.value=c;this.first.setDisabled(c==1);this.prev.setDisabled(c==1);this.next.setDisabled(c==h);this.last.setDisabled(c==h);this.loading.enable();this.updateInfo();this.fireEvent("change",this,j)},getPageData:function(){var a=this.store.getTotalCount();return{total:a,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:a<this.pageSize?1:Math.ceil(a/this.pageSize)}},onLoadError:function(){if(!this.rendered){return}this.loading.enable()},readPage:function(g){var a=this.field.dom.value,c;if(!a||isNaN(c=parseInt(a,10))){this.field.dom.value=g.activePage;return false}return c},onPagingBlur:function(a){this.field.dom.value=this.getPageData().activePage},onPagingKeydown:function(h){var c=h.getKey(),j=this.getPageData(),g;if(c==h.RETURN){h.stopEvent();g=this.readPage(j);if(g!==false){g=Math.min(Math.max(1,g),j.pages)-1;this.doLoad(g*this.pageSize)}}else{if(c==h.HOME||c==h.END){h.stopEvent();g=c==h.HOME?1:j.pages;this.field.dom.value=g}else{if(c==h.UP||c==h.PAGEUP||c==h.DOWN||c==h.PAGEDOWN){h.stopEvent();if(g=this.readPage(j)){var a=h.shiftKey?10:1;if(c==h.DOWN||c==h.PAGEDOWN){a*=-1}g+=a;if(g>=1&g<=j.pages){this.field.dom.value=g}}}}}},beforeLoad:function(){if(this.rendered&&this.loading){this.loading.disable()}},doLoad:function(g){var c={},a=this.paramNames;c[a.start]=g;c[a.limit]=this.pageSize;if(this.fireEvent("beforechange",this,c)!==false){this.store.load({params:c})}},changePage:function(a){this.doLoad(((a-1)*this.pageSize).constrain(0,this.store.getTotalCount()))},onClick:function(j){var c=this.store;switch(j){case"first":this.doLoad(0);break;case"prev":this.doLoad(Math.max(0,this.cursor-this.pageSize));break;case"next":this.doLoad(this.cursor+this.pageSize);break;case"last":var h=c.getTotalCount();var a=h%this.pageSize;var g=a?(h-a):h-this.pageSize;this.doLoad(g);break;case"refresh":this.doLoad(this.cursor);break}},unbind:function(a){a=Ext.StoreMgr.lookup(a);a.un("beforeload",this.beforeLoad,this);a.un("load",this.onLoad,this);a.un("loadexception",this.onLoadError,this);this.store=undefined},bind:function(a){a=Ext.StoreMgr.lookup(a);a.on("beforeload",this.beforeLoad,this);a.on("load",this.onLoad,this);a.on("loadexception",this.onLoadError,this);this.store=a;if(a.getCount()>0){this.onLoad(a,null,{})}},onDestroy:function(){if(this.store){this.unbind(this.store)}Ext.PagingToolbar.superclass.onDestroy.call(this)}});Ext.reg("paging",Ext.PagingToolbar);Ext.Resizable=function(h,j){this.el=Ext.get(h);if(j&&j.wrap){j.resizeChild=this.el;this.el=this.el.wrap(typeof j.wrap=="object"?j.wrap:{cls:"xresizable-wrap"});this.el.id=this.el.dom.id=j.resizeChild.id+"-rzwrap";this.el.setStyle("overflow","hidden");this.el.setPositioning(j.resizeChild.getPositioning());j.resizeChild.clearPositioning();if(!j.width||!j.height){var k=j.resizeChild.getSize();this.el.setSize(k.width,k.height)}if(j.pinned&&!j.adjustments){j.adjustments="auto"}}this.proxy=this.el.createProxy({tag:"div",cls:"x-resizable-proxy",id:this.el.id+"-rzproxy"},Ext.getBody());this.proxy.unselectable();this.proxy.enableDisplayMode("block");Ext.apply(this,j);if(this.pinned){this.disableTrackOver=true;this.el.addClass("x-resizable-pinned")}var o=this.el.getStyle("position");if(o!="absolute"&&o!="fixed"){this.el.setStyle("position","relative")}if(!this.handles){this.handles="s,e,se";if(this.multiDirectional){this.handles+=",n,w"}}if(this.handles=="all"){this.handles="n s e w ne nw se sw"}var s=this.handles.split(/\s*?[,;]\s*?| /);var g=Ext.Resizable.positions;for(var m=0,p=s.length;m<p;m++){if(s[m]&&g[s[m]]){var r=g[s[m]];this[r]=new Ext.Resizable.Handle(this,r,this.disableTrackOver,this.transparent)}}this.corner=this.southeast;if(this.handles.indexOf("n")!=-1||this.handles.indexOf("w")!=-1){this.updateBox=true}this.activeHandle=null;if(this.resizeChild){if(typeof this.resizeChild=="boolean"){this.resizeChild=Ext.get(this.el.dom.firstChild,true)}else{this.resizeChild=Ext.get(this.resizeChild,true)}}if(this.adjustments=="auto"){var c=this.resizeChild;var q=this.west,l=this.east,a=this.north,s=this.south;if(c&&(q||a)){c.position("relative");c.setLeft(q?q.el.getWidth():0);c.setTop(a?a.el.getHeight():0)}this.adjustments=[(l?-l.el.getWidth():0)+(q?-q.el.getWidth():0),(a?-a.el.getHeight():0)+(s?-s.el.getHeight():0)-1]}if(this.draggable){this.dd=this.dynamic?this.el.initDD(null):this.el.initDDProxy(null,{dragElId:this.proxy.id});this.dd.setHandleElId(this.resizeChild?this.resizeChild.id:this.el.id)}this.addEvents("beforeresize","resize");if(this.width!==null&&this.height!==null){this.resizeTo(this.width,this.height)}else{this.updateChildSize()}if(Ext.isIE){this.el.dom.style.zoom=1}Ext.Resizable.superclass.constructor.call(this)};Ext.extend(Ext.Resizable,Ext.util.Observable,{resizeChild:false,adjustments:[0,0],minWidth:5,minHeight:5,maxWidth:10000,maxHeight:10000,enabled:true,animate:false,duration:0.35,dynamic:false,handles:false,multiDirectional:false,disableTrackOver:false,easing:"easeOutStrong",widthIncrement:0,heightIncrement:0,pinned:false,width:null,height:null,preserveRatio:false,transparent:false,minX:0,minY:0,draggable:false,resizeTo:function(c,a){this.el.setSize(c,a);this.updateChildSize();this.fireEvent("resize",this,c,a,null)},startSizing:function(g,c){this.fireEvent("beforeresize",this,g);if(this.enabled){if(!this.overlay){this.overlay=this.el.createProxy({tag:"div",cls:"x-resizable-overlay",html:"&#160;"},Ext.getBody());this.overlay.unselectable();this.overlay.enableDisplayMode("block");this.overlay.on("mousemove",this.onMouseMove,this);this.overlay.on("mouseup",this.onMouseUp,this)}this.overlay.setStyle("cursor",c.el.getStyle("cursor"));this.resizing=true;this.startBox=this.el.getBox();this.startPoint=g.getXY();this.offsets=[(this.startBox.x+this.startBox.width)-this.startPoint[0],(this.startBox.y+this.startBox.height)-this.startPoint[1]];this.overlay.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.overlay.show();if(this.constrainTo){var a=Ext.get(this.constrainTo);this.resizeRegion=a.getRegion().adjust(a.getFrameWidth("t"),a.getFrameWidth("l"),-a.getFrameWidth("b"),-a.getFrameWidth("r"))}this.proxy.setStyle("visibility","hidden");this.proxy.show();this.proxy.setBox(this.startBox);if(!this.dynamic){this.proxy.setStyle("visibility","visible")}}},onMouseDown:function(a,c){if(this.enabled){c.stopEvent();this.activeHandle=a;this.startSizing(c,a)}},onMouseUp:function(c){this.activeHandle=null;var a=this.resizeElement();this.resizing=false;this.handleOut();this.overlay.hide();this.proxy.hide();this.fireEvent("resize",this,a.width,a.height,c)},updateChildSize:function(){if(this.resizeChild){var g=this.el;var h=this.resizeChild;var c=this.adjustments;if(g.dom.offsetWidth){var a=g.getSize(true);h.setSize(a.width+c[0],a.height+c[1])}if(Ext.isIE){setTimeout(function(){if(g.dom.offsetWidth){var j=g.getSize(true);h.setSize(j.width+c[0],j.height+c[1])}},10)}}},snap:function(g,j,c){if(!j||!g){return g}var h=g;var a=g%j;if(a>0){if(a>(j/2)){h=g+(j-a)}else{h=g-a}}return Math.max(c,h)},resizeElement:function(){var a=this.proxy.getBox();if(this.updateBox){this.el.setBox(a,false,this.animate,this.duration,null,this.easing)}else{this.el.setSize(a.width,a.height,this.animate,this.duration,null,this.easing)}this.updateChildSize();if(!this.dynamic){this.proxy.hide()}return a},constrain:function(c,g,a,h){if(c-g<a){g=c-a}else{if(c-g>h){g=c-h}}return g},onMouseMove:function(E){if(this.enabled&&this.activeHandle){try{if(this.resizeRegion&&!this.resizeRegion.contains(E.getPoint())){return}var B=this.curSize||this.startBox;var p=this.startBox.x,o=this.startBox.y;var g=p,c=o;var q=B.width,D=B.height;var j=q,s=D;var r=this.minWidth,F=this.minHeight;var A=this.maxWidth,I=this.maxHeight;var l=this.widthIncrement;var a=this.heightIncrement;var G=E.getXY();var z=-(this.startPoint[0]-Math.max(this.minX,G[0]));var t=-(this.startPoint[1]-Math.max(this.minY,G[1]));var m=this.activeHandle.position;switch(m){case"east":q+=z;q=Math.min(Math.max(r,q),A);break;case"south":D+=t;D=Math.min(Math.max(F,D),I);break;case"southeast":q+=z;D+=t;q=Math.min(Math.max(r,q),A);D=Math.min(Math.max(F,D),I);break;case"north":t=this.constrain(D,t,F,I);o+=t;D-=t;break;case"west":z=this.constrain(q,z,r,A);p+=z;q-=z;break;case"northeast":q+=z;q=Math.min(Math.max(r,q),A);t=this.constrain(D,t,F,I);o+=t;D-=t;break;case"northwest":z=this.constrain(q,z,r,A);t=this.constrain(D,t,F,I);o+=t;D-=t;p+=z;q-=z;break;case"southwest":z=this.constrain(q,z,r,A);D+=t;D=Math.min(Math.max(F,D),I);p+=z;q-=z;break}var v=this.snap(q,l,r);var H=this.snap(D,a,F);if(v!=q||H!=D){switch(m){case"northeast":o-=H-D;break;case"north":o-=H-D;break;case"southwest":p-=v-q;break;case"west":p-=v-q;break;case"northwest":p-=v-q;o-=H-D;break}q=v;D=H}if(this.preserveRatio){switch(m){case"southeast":case"east":D=s*(q/j);D=Math.min(Math.max(F,D),I);q=j*(D/s);break;case"south":q=j*(D/s);q=Math.min(Math.max(r,q),A);D=s*(q/j);break;case"northeast":q=j*(D/s);q=Math.min(Math.max(r,q),A);D=s*(q/j);break;case"north":var J=q;q=j*(D/s);q=Math.min(Math.max(r,q),A);D=s*(q/j);p+=(J-q)/2;break;case"southwest":D=s*(q/j);D=Math.min(Math.max(F,D),I);var J=q;q=j*(D/s);p+=J-q;break;case"west":var k=D;D=s*(q/j);D=Math.min(Math.max(F,D),I);o+=(k-D)/2;var J=q;q=j*(D/s);p+=J-q;break;case"northwest":var J=q;var k=D;D=s*(q/j);D=Math.min(Math.max(F,D),I);q=j*(D/s);o+=k-D;p+=J-q;break}}this.proxy.setBounds(p,o,q,D);if(this.dynamic){this.resizeElement()}}catch(E){}}},handleOver:function(){if(this.enabled){this.el.addClass("x-resizable-over")}},handleOut:function(){if(!this.resizing){this.el.removeClass("x-resizable-over")}},getEl:function(){return this.el},getResizeChild:function(){return this.resizeChild},destroy:function(c){Ext.destroy(this.dd,this.overlay,this.proxy);this.overlay=null;this.proxy=null;var g=Ext.Resizable.positions;for(var a in g){if(typeof g[a]!="function"&&this[g[a]]){this[g[a]].destroy()}}if(c){this.el.update("");Ext.destroy(this.el);this.el=null}this.purgeListeners()},syncHandleHeight:function(){var a=this.el.getHeight(true);if(this.west){this.west.el.setHeight(a)}if(this.east){this.east.el.setHeight(a)}}});Ext.Resizable.positions={n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"};Ext.Resizable.Handle=function(g,j,c,h){if(!this.tpl){var a=Ext.DomHelper.createTemplate({tag:"div",cls:"x-resizable-handle x-resizable-handle-{0}"});a.compile();Ext.Resizable.Handle.prototype.tpl=a}this.position=j;this.rz=g;this.el=this.tpl.append(g.el.dom,[this.position],true);this.el.unselectable();if(h){this.el.setOpacity(0)}this.el.on("mousedown",this.onMouseDown,this);if(!c){this.el.on("mouseover",this.onMouseOver,this);this.el.on("mouseout",this.onMouseOut,this)}};Ext.Resizable.Handle.prototype={afterResize:function(a){},onMouseDown:function(a){this.rz.onMouseDown(this,a)},onMouseOver:function(a){this.rz.handleOver(this,a)},onMouseOut:function(a){this.rz.handleOut(this,a)},destroy:function(){Ext.destroy(this.el);this.el=null}};Ext.Editor=function(c,a){this.field=c;Ext.Editor.superclass.constructor.call(this,a)};Ext.extend(Ext.Editor,Ext.Component,{value:"",alignment:"c-c?",shadow:"frame",constrain:false,swallowKeys:true,completeOnEnter:false,cancelOnEsc:false,updateEl:false,initComponent:function(){Ext.Editor.superclass.initComponent.call(this);this.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onRender:function(c,a){this.el=new Ext.Layer({shadow:this.shadow,cls:"x-editor",parentEl:c,shim:this.shim,shadowOffset:4,id:this.id,constrain:this.constrain});this.el.setStyle("overflow",Ext.isGecko?"auto":"hidden");if(this.field.msgTarget!="title"){this.field.msgTarget="qtip"}this.field.inEditor=true;this.field.render(this.el);if(Ext.isGecko){this.field.el.dom.setAttribute("autocomplete","off")}this.field.on("specialkey",this.onSpecialKey,this);if(this.swallowKeys){this.field.el.swallowEvent(["keydown","keypress"])}this.field.show();this.field.on("blur",this.onBlur,this);if(this.field.grow){this.field.on("autosize",this.el.sync,this.el,{delay:1})}},onSpecialKey:function(g,c){var a=c.getKey();if(this.completeOnEnter&&a==c.ENTER){c.stopEvent();this.completeEdit()}else{if(this.cancelOnEsc&&a==c.ESC){this.cancelEdit()}else{this.fireEvent("specialkey",g,c)}}if(this.field.triggerBlur&&(a==c.ENTER||a==c.ESC||a==c.TAB)){this.field.triggerBlur()}},startEdit:function(c,g){if(this.editing){this.completeEdit()}this.boundEl=Ext.get(c);var a=g!==undefined?g:this.boundEl.dom.innerHTML;if(!this.rendered){this.render(this.parentEl||document.body)}if(this.fireEvent("beforestartedit",this,this.boundEl,a)===false){return}this.startValue=a;this.field.setValue(a);this.doAutoSize();this.el.alignTo(this.boundEl,this.alignment);this.editing=true;this.show()},doAutoSize:function(){if(this.autoSize){var a=this.boundEl.getSize();switch(this.autoSize){case"width":this.setSize(a.width,"");break;case"height":this.setSize("",a.height);break;default:this.setSize(a.width,a.height)}}},setSize:function(a,c){delete this.field.lastSize;this.field.setSize(a,c);if(this.el){if(Ext.isGecko2||Ext.isOpera){this.el.setSize(a,c)}this.el.sync()}},realign:function(){this.el.alignTo(this.boundEl,this.alignment)},completeEdit:function(a){if(!this.editing){return}var c=this.getValue();if(!this.field.isValid()){if(this.revertInvalid!==false){this.cancelEdit(a)}return}if(String(c)===String(this.startValue)&&this.ignoreNoChange){this.hideEdit(a);return}if(this.fireEvent("beforecomplete",this,c,this.startValue)!==false){c=this.getValue();if(this.updateEl&&this.boundEl){this.boundEl.update(c)}this.hideEdit(a);this.fireEvent("complete",this,c,this.startValue)}},onShow:function(){this.el.show();if(this.hideEl!==false){this.boundEl.hide()}this.field.show();if(Ext.isIE&&!this.fixIEFocus){this.fixIEFocus=true;this.deferredFocus.defer(50,this)}else{this.field.focus()}this.fireEvent("startedit",this.boundEl,this.startValue)},deferredFocus:function(){if(this.editing){this.field.focus()}},cancelEdit:function(a){if(this.editing){var c=this.getValue();this.setValue(this.startValue);this.hideEdit(a);this.fireEvent("canceledit",this,c,this.startValue)}},hideEdit:function(a){if(a!==true){this.editing=false;this.hide()}},onBlur:function(){if(this.allowBlur!==true&&this.editing){this.completeEdit()}},onHide:function(){if(this.editing){this.completeEdit();return}this.field.blur();if(this.field.collapse){this.field.collapse()}this.el.hide();if(this.hideEl!==false){this.boundEl.show()}},setValue:function(a){this.field.setValue(a)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){Ext.destroy(this.field);this.field=null}});Ext.reg("editor",Ext.Editor);Ext.MessageBox=function(){var y,c,t,x;var l,p,w,a,q,s,m,k;var v,z,r,g="";var h=function(B){if(y.isVisible()){y.hide();A();Ext.callback(c.fn,c.scope||window,[B,z.dom.value,c],1)}};var A=function(){if(c&&c.cls){y.el.removeClass(c.cls)}q.reset()};var j=function(E,B,D){if(c&&c.closable!==false){y.hide();A()}if(D){D.stopEvent()}};var o=function(B){var E=0;if(!B){v.ok.hide();v.cancel.hide();v.yes.hide();v.no.hide();return E}y.footer.dom.style.display="";for(var D in v){if(typeof v[D]!="function"){if(B[D]){v[D].show();v[D].setText(typeof B[D]=="string"?B[D]:Ext.MessageBox.buttonText[D]);E+=v[D].el.getWidth()+15}else{v[D].hide()}}}return E};return{getDialog:function(B){if(!y){y=new Ext.Window({autoCreate:true,title:B,resizable:false,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,modal:true,shim:true,buttonAlign:"center",width:400,height:100,minHeight:80,plain:true,footer:true,closable:true,close:function(){if(c&&c.buttons&&c.buttons.no&&!c.buttons.cancel){h("no")}else{h("cancel")}}});v={};var D=this.buttonText;v.ok=y.addButton(D.ok,h.createCallback("ok"));v.yes=y.addButton(D.yes,h.createCallback("yes"));v.no=y.addButton(D.no,h.createCallback("no"));v.cancel=y.addButton(D.cancel,h.createCallback("cancel"));v.ok.hideMode=v.yes.hideMode=v.no.hideMode=v.cancel.hideMode="offsets";y.render(document.body);y.getEl().addClass("x-window-dlg");t=y.mask;l=y.body.createChild({html:'<div class="ext-mb-icon"></div><div class="ext-mb-content"><span class="ext-mb-text"></span><br /><div class="ext-mb-fix-cursor"><input type="text" class="ext-mb-input" /><textarea class="ext-mb-textarea"></textarea></div></div>'});m=Ext.get(l.dom.firstChild);var E=l.dom.childNodes[1];p=Ext.get(E.firstChild);w=Ext.get(E.childNodes[2].firstChild);w.enableDisplayMode();w.addKeyListener([10,13],function(){if(y.isVisible()&&c&&c.buttons){if(c.buttons.ok){h("ok")}else{if(c.buttons.yes){h("yes")}}}});a=Ext.get(E.childNodes[2].childNodes[1]);a.enableDisplayMode();q=new Ext.ProgressBar({renderTo:l});l.createChild({cls:"x-clear"})}return y},updateText:function(F){if(!y.isVisible()&&!c.width){y.setSize(this.maxWidth,100)}p.update(F||"&#160;");var D=g!=""?(m.getWidth()+m.getMargins("lr")):0;var H=p.getWidth()+p.getMargins("lr");var E=y.getFrameWidth("lr");var G=y.body.getFrameWidth("lr");if(Ext.isIE&&D>0){D+=3}var B=Math.max(Math.min(c.width||D+H+E+G,this.maxWidth),Math.max(c.minWidth||this.minWidth,r||0));if(c.prompt===true){z.setWidth(B-D-E-G)}if(c.progress===true||c.wait===true){q.setSize(B-D-E-G)}if(Ext.isIE&&B==r){B+=4}y.setSize(B,"auto").center();return this},updateProgress:function(D,B,E){q.updateProgress(D,B);if(E){this.updateText(E)}return this},isVisible:function(){return y&&y.isVisible()},hide:function(){var B=y?y.activeGhost:null;if(this.isVisible()||B){y.hide();A();if(B){B.hide()}}return this},show:function(F){if(this.isVisible()){this.hide()}c=F;var G=this.getDialog(c.title||"&#160;");G.setTitle(c.title||"&#160;");var B=(c.closable!==false&&c.progress!==true&&c.wait!==true);G.tools.close.setDisplayed(B);z=w;c.prompt=c.prompt||(c.multiline?true:false);if(c.prompt){if(c.multiline){w.hide();a.show();a.setHeight(typeof c.multiline=="number"?c.multiline:this.defaultTextHeight);z=a}else{w.show();a.hide()}}else{w.hide();a.hide()}z.dom.value=c.value||"";if(c.prompt){G.focusEl=z}else{var E=c.buttons;var D=null;if(E&&E.ok){D=v.ok}else{if(E&&E.yes){D=v.yes}}if(D){G.focusEl=D}}if(c.iconCls){G.setIconClass(c.iconCls)}this.setIcon(c.icon);r=o(c.buttons);q.setVisible(c.progress===true||c.wait===true);this.updateProgress(0,c.progressText);this.updateText(c.msg);if(c.cls){G.el.addClass(c.cls)}G.proxyDrag=c.proxyDrag===true;G.modal=c.modal!==false;G.mask=c.modal!==false?t:false;if(!G.isVisible()){document.body.appendChild(y.el.dom);G.setAnimateTarget(c.animEl);G.show(c.animEl)}G.on("show",function(){if(B===true){G.keyMap.enable()}else{G.keyMap.disable()}},this,{single:true});if(c.wait===true){q.wait(c.waitConfig)}return this},setIcon:function(B){if(B&&B!=""){m.removeClass("x-hidden");m.replaceClass(g,B);l.addClass("x-dlg-icon");g=B}else{m.replaceClass(g,"x-hidden");l.removeClass("x-dlg-icon");g=""}return this},progress:function(E,D,B){this.show({title:E,msg:D,buttons:false,progress:true,closable:false,minWidth:this.minProgressWidth,progressText:B});return this},wait:function(E,D,B){this.show({title:D,msg:E,buttons:false,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:B});return this},alert:function(F,E,D,B){this.show({title:F,msg:E,buttons:this.OK,fn:D,scope:B});return this},confirm:function(F,E,D,B){this.show({title:F,msg:E,buttons:this.YESNO,fn:D,scope:B,icon:this.QUESTION});return this},prompt:function(H,G,E,D,B,F){this.show({title:H,msg:G,buttons:this.OKCANCEL,fn:E,minWidth:250,scope:D,prompt:true,multiline:B,value:F});return this},OK:{ok:true},CANCEL:{cancel:true},OKCANCEL:{ok:true,cancel:true},YESNO:{yes:true,no:true},YESNOCANCEL:{yes:true,no:true,cancel:true},INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,buttonText:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}}}();Ext.Msg=Ext.MessageBox;Ext.Tip=Ext.extend(Ext.Panel,{minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",autoRender:true,quickShowInterval:250,frame:true,hidden:true,baseCls:"x-tip",floating:{shadow:true,shim:true,useDisplay:true,constrain:false},autoHeight:true,initComponent:function(){Ext.Tip.superclass.initComponent.call(this);if(this.closable&&!this.title){this.elements+=",header"}},afterRender:function(){Ext.Tip.superclass.afterRender.call(this);if(this.closable){this.addTool({id:"close",handler:this.hide,scope:this})}},showAt:function(a){Ext.Tip.superclass.show.call(this);if(this.measureWidth!==false&&(!this.initialConfig||typeof this.initialConfig.width!="number")){this.doAutoWidth()}if(this.constrainPosition){a=this.el.adjustForConstraints(a)}this.setPagePosition(a[0],a[1])},doAutoWidth:function(){var a=this.body.getTextWidth();if(this.title){a=Math.max(a,this.header.child("span").getTextWidth(this.title))}a+=this.getFrameWidth()+(this.closable?20:0)+this.body.getPadding("lr");this.setWidth(a.constrain(this.minWidth,this.maxWidth));if(Ext.isIE7&&!this.repainted){this.el.repaint();this.repainted=true}},showBy:function(a,c){if(!this.rendered){this.render(Ext.getBody())}this.showAt(this.el.getAlignToXY(a,c||this.defaultAlign))},initDraggable:function(){this.dd=new Ext.Tip.DD(this,typeof this.draggable=="boolean"?null:this.draggable);this.header.addClass("x-tip-draggable")}});Ext.Tip.DD=function(c,a){Ext.apply(this,a);this.tip=c;Ext.Tip.DD.superclass.constructor.call(this,c.el.id,"WindowDD-"+c.id);this.setHandleElId(c.header.id);this.scroll=false};Ext.extend(Ext.Tip.DD,Ext.dd.DD,{moveOnly:true,scroll:false,headerOffsets:[100,25],startDrag:function(){this.tip.el.disableShadow()},endDrag:function(a){this.tip.el.enableShadow(true)}});Ext.ToolTip=Ext.extend(Ext.Tip,{showDelay:500,hideDelay:200,dismissDelay:5000,mouseOffset:[15,18],trackMouse:false,constrainPosition:true,initComponent:function(){Ext.ToolTip.superclass.initComponent.call(this);this.lastActive=new Date();this.initTarget()},initTarget:function(){if(this.target){this.target=Ext.get(this.target);this.target.on("mouseover",this.onTargetOver,this);this.target.on("mouseout",this.onTargetOut,this);this.target.on("mousemove",this.onMouseMove,this)}},onMouseMove:function(a){this.targetXY=a.getXY();if(!this.hidden&&this.trackMouse){this.setPagePosition(this.getTargetXY())}},getTargetXY:function(){return[this.targetXY[0]+this.mouseOffset[0],this.targetXY[1]+this.mouseOffset[1]]},onTargetOver:function(a){if(this.disabled||a.within(this.target.dom,true)){return}this.clearTimer("hide");this.targetXY=a.getXY();this.delayShow()},delayShow:function(){if(this.hidden&&!this.showTimer){if(this.lastActive.getElapsed()<this.quickShowInterval){this.show()}else{this.showTimer=this.show.defer(this.showDelay,this)}}else{if(!this.hidden&&this.autoHide!==false){this.show()}}},onTargetOut:function(a){if(this.disabled||a.within(this.target.dom,true)){return}this.clearTimer("show");if(this.autoHide!==false){this.delayHide()}},delayHide:function(){if(!this.hidden&&!this.hideTimer){this.hideTimer=this.hide.defer(this.hideDelay,this)}},hide:function(){this.clearTimer("dismiss");this.lastActive=new Date();Ext.ToolTip.superclass.hide.call(this)},show:function(){this.showAt(this.getTargetXY())},showAt:function(a){this.lastActive=new Date();this.clearTimers();Ext.ToolTip.superclass.showAt.call(this,a);if(this.dismissDelay&&this.autoHide!==false){this.dismissTimer=this.hide.defer(this.dismissDelay,this)}},clearTimer:function(a){a=a+"Timer";clearTimeout(this[a]);delete this[a]},clearTimers:function(){this.clearTimer("show");this.clearTimer("dismiss");this.clearTimer("hide")},onShow:function(){Ext.ToolTip.superclass.onShow.call(this);Ext.getDoc().on("mousedown",this.onDocMouseDown,this)},onHide:function(){Ext.ToolTip.superclass.onHide.call(this);Ext.getDoc().un("mousedown",this.onDocMouseDown,this)},onDocMouseDown:function(a){if(this.autoHide!==true&&!a.within(this.el.dom)){this.disable();this.enable.defer(100,this)}},onDisable:function(){this.clearTimers();this.hide()},adjustPosition:function(a,j){var g=this.targetXY[1],c=this.getSize().height;if(this.constrainPosition&&j<=g&&(j+c)>=g){j=g-c-5}return{x:a,y:j}},onDestroy:function(){Ext.ToolTip.superclass.onDestroy.call(this);Ext.getDoc().un("mousedown",this.onDocMouseDown,this);if(this.target){this.target.un("mouseover",this.onTargetOver,this);this.target.un("mouseout",this.onTargetOut,this);this.target.un("mousemove",this.onMouseMove,this)}}});Ext.QuickTip=Ext.extend(Ext.ToolTip,{interceptTitles:false,tagConfig:{namespace:"ext",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign"},initComponent:function(){this.target=this.target||Ext.getDoc();this.targets=this.targets||{};Ext.QuickTip.superclass.initComponent.call(this)},register:function(k){var m=Ext.isArray(k)?k:arguments;for(var l=0,a=m.length;l<a;l++){var p=m[l];var o=p.target;if(o){if(Ext.isArray(o)){for(var h=0,g=o.length;h<g;h++){this.targets[Ext.id(o[h])]=p}}else{this.targets[Ext.id(o)]=p}}}},unregister:function(a){delete this.targets[Ext.id(a)]},onTargetOver:function(l){if(this.disabled){return}this.targetXY=l.getXY();var g=l.getTarget();if(!g||g.nodeType!==1||g==document||g==document.body){return}if(this.activeTarget&&g==this.activeTarget.el){this.clearTimer("hide");this.show();return}if(g&&this.targets[g.id]){this.activeTarget=this.targets[g.id];this.activeTarget.el=g;this.delayShow();return}var j,k=Ext.fly(g),c=this.tagConfig;var h=c.namespace;if(this.interceptTitles&&g.title){j=g.title;g.qtip=j;g.removeAttribute("title");l.preventDefault()}else{j=g.qtip||k.getAttributeNS(h,c.attribute)}if(j){var a=k.getAttributeNS(h,c.hide);this.activeTarget={el:g,text:j,width:k.getAttributeNS(h,c.width),autoHide:a!="user"&&a!=="false",title:k.getAttributeNS(h,c.title),cls:k.getAttributeNS(h,c.cls),align:k.getAttributeNS(h,c.align)};this.delayShow()}},onTargetOut:function(a){this.clearTimer("show");if(this.autoHide!==false){this.delayHide()}},showAt:function(c){var a=this.activeTarget;if(a){if(!this.rendered){this.render(Ext.getBody());this.activeTarget=a}if(a.width){this.setWidth(a.width);this.body.setWidth(this.adjustBodyWidth(a.width-this.getFrameWidth()));this.measureWidth=false}else{this.measureWidth=true}this.setTitle(a.title||"");this.body.update(a.text);this.autoHide=a.autoHide;this.dismissDelay=a.dismissDelay||this.dismissDelay;if(this.lastCls){this.el.removeClass(this.lastCls);delete this.lastCls}if(a.cls){this.el.addClass(a.cls);this.lastCls=a.cls}if(a.align){c=this.el.getAlignToXY(a.el,a.align);this.constrainPosition=false}else{this.constrainPosition=true}}Ext.QuickTip.superclass.showAt.call(this,c)},hide:function(){delete this.activeTarget;Ext.QuickTip.superclass.hide.call(this)}});Ext.QuickTips=function(){var c,a=[];return{init:function(g){if(!c){if(!Ext.isReady){Ext.onReady(function(){Ext.QuickTips.init(g)});return}c=new Ext.QuickTip({elements:"header,body"});if(g!==false){c.render(Ext.getBody())}}},enable:function(){if(c){a.pop();if(a.length<1){c.enable()}}},disable:function(){if(c){c.disable()}a.push(1)},isEnabled:function(){return c!==undefined&&!c.disabled},getQuickTip:function(){return c},register:function(){c.register.apply(c,arguments)},unregister:function(){c.unregister.apply(c,arguments)},tips:function(){c.register.apply(c,arguments)}}}();Ext.tree.TreePanel=Ext.extend(Ext.Panel,{rootVisible:true,animate:Ext.enableFx,lines:true,enableDD:false,hlDrop:Ext.enableFx,pathSeparator:"/",initComponent:function(){Ext.tree.TreePanel.superclass.initComponent.call(this);if(!this.eventModel){this.eventModel=new Ext.tree.TreeEventModel(this)}var a=this.loader;if(!a){a=new Ext.tree.TreeLoader({dataUrl:this.dataUrl})}else{if(typeof a=="object"&&!a.load){a=new Ext.tree.TreeLoader(a)}}this.loader=a;this.nodeHash={};if(this.root){this.setRootNode(this.root)}this.addEvents("append","remove","movenode","insert","beforeappend","beforeremove","beforemovenode","beforeinsert","beforeload","load","textchange","beforeexpandnode","beforecollapsenode","expandnode","disabledchange","collapsenode","beforeclick","click","checkchange","dblclick","contextmenu","beforechildrenrendered","startdrag","enddrag","dragdrop","beforenodedrop","nodedrop","nodedragover");if(this.singleExpand){this.on("beforeexpandnode",this.restrictExpand,this)}},proxyNodeEvent:function(g,c,a,l,k,j,h){if(g=="collapse"||g=="expand"||g=="beforecollapse"||g=="beforeexpand"||g=="move"||g=="beforemove"){g=g+"node"}return this.fireEvent(g,c,a,l,k,j,h)},getRootNode:function(){return this.root},setRootNode:function(c){if(!c.render){c=this.loader.createNode(c)}this.root=c;c.ownerTree=this;c.isRoot=true;this.registerNode(c);if(!this.rootVisible){var a=c.attributes.uiProvider;c.ui=a?new a(c):new Ext.tree.RootTreeNodeUI(c)}return c},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(a){this.nodeHash[a.id]=a},unregisterNode:function(a){delete this.nodeHash[a.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"},restrictExpand:function(a){var c=a.parentNode;if(c){if(c.expandedChild&&c.expandedChild.parentNode==c){c.expandedChild.collapse()}c.expandedChild=a}},getChecked:function(c,g){g=g||this.root;var h=[];var j=function(){if(this.attributes.checked){h.push(!c?this:(c=="id"?this.id:this.attributes[c]))}};g.cascade(j);return h},getEl:function(){return this.el},getLoader:function(){return this.loader},expandAll:function(){this.root.expand(true)},collapseAll:function(){this.root.collapse(true)},getSelectionModel:function(){if(!this.selModel){this.selModel=new Ext.tree.DefaultSelectionModel()}return this.selModel},expandPath:function(k,a,l){a=a||"id";var h=k.split(this.pathSeparator);var g=this.root;if(g.attributes[a]!=h[1]){if(l){l(false,null)}return}var c=1;var j=function(){if(++c==h.length){if(l){l(true,g)}return}var m=g.findChild(a,h[c]);if(!m){if(l){l(false,g)}return}g=m;m.expand(false,false,j)};g.expand(false,false,j)},selectPath:function(j,a,k){a=a||"id";var g=j.split(this.pathSeparator);var c=g.pop();if(g.length>0){var h=function(m,l){if(m&&l){var o=l.findChild(a,c);if(o){o.select();if(k){k(true,o)}}else{if(k){k(false,o)}}}else{if(k){k(false,o)}}};this.expandPath(g.join(this.pathSeparator),a,h)}else{this.root.select();if(k){k(true,this.root)}}},getTreeEl:function(){return this.body},onRender:function(c,a){Ext.tree.TreePanel.superclass.onRender.call(this,c,a);this.el.addClass("x-tree");this.innerCt=this.body.createChild({tag:"ul",cls:"x-tree-root-ct "+(this.useArrows?"x-tree-arrows":this.lines?"x-tree-lines":"x-tree-no-lines")})},initEvents:function(){Ext.tree.TreePanel.superclass.initEvents.call(this);if(this.containerScroll){Ext.dd.ScrollManager.register(this.body)}if((this.enableDD||this.enableDrop)&&!this.dropZone){this.dropZone=new Ext.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||"TreeDD",appendOnly:this.ddAppendOnly===true})}if((this.enableDD||this.enableDrag)&&!this.dragZone){this.dragZone=new Ext.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||"TreeDD",scroll:this.ddScroll})}this.getSelectionModel().init(this)},afterRender:function(){Ext.tree.TreePanel.superclass.afterRender.call(this);this.root.render();if(!this.rootVisible){this.root.renderChildren()}},onDestroy:function(){if(this.rendered){this.body.removeAllListeners();Ext.dd.ScrollManager.unregister(this.body);if(this.dropZone){this.dropZone.unreg()}if(this.dragZone){this.dragZone.unreg()}}this.root.destroy();this.nodeHash=null;Ext.tree.TreePanel.superclass.onDestroy.call(this)}});Ext.tree.TreePanel.nodeTypes={};Ext.reg("treepanel",Ext.tree.TreePanel);Ext.tree.TreeEventModel=function(a){this.tree=a;this.tree.on("render",this.initEvents,this)};Ext.tree.TreeEventModel.prototype={initEvents:function(){var a=this.tree.getTreeEl();a.on("click",this.delegateClick,this);if(this.tree.trackMouseOver!==false){a.on("mouseover",this.delegateOver,this);a.on("mouseout",this.delegateOut,this)}a.on("dblclick",this.delegateDblClick,this);a.on("contextmenu",this.delegateContextMenu,this)},getNode:function(c){var a;if(a=c.getTarget(".x-tree-node-el",10)){var g=Ext.fly(a,"_treeEvents").getAttributeNS("ext","tree-node-id");if(g){return this.tree.getNodeById(g)}}return null},getNodeTarget:function(c){var a=c.getTarget(".x-tree-node-icon",1);if(!a){a=c.getTarget(".x-tree-node-el",6)}return a},delegateOut:function(c,a){if(!this.beforeEvent(c)){return}if(c.getTarget(".x-tree-ec-icon",1)){var g=this.getNode(c);this.onIconOut(c,g);if(g==this.lastEcOver){delete this.lastEcOver}}if((a=this.getNodeTarget(c))&&!c.within(a,true)){this.onNodeOut(c,this.getNode(c))}},delegateOver:function(c,a){if(!this.beforeEvent(c)){return}if(this.lastEcOver){this.onIconOut(c,this.lastEcOver);delete this.lastEcOver}if(c.getTarget(".x-tree-ec-icon",1)){this.lastEcOver=this.getNode(c);this.onIconOver(c,this.lastEcOver)}if(a=this.getNodeTarget(c)){this.onNodeOver(c,this.getNode(c))}},delegateClick:function(c,a){if(!this.beforeEvent(c)){return}if(c.getTarget("input[type=checkbox]",1)){this.onCheckboxClick(c,this.getNode(c))}else{if(c.getTarget(".x-tree-ec-icon",1)){this.onIconClick(c,this.getNode(c))}else{if(this.getNodeTarget(c)){this.onNodeClick(c,this.getNode(c))}}}},delegateDblClick:function(c,a){if(this.beforeEvent(c)&&this.getNodeTarget(c)){this.onNodeDblClick(c,this.getNode(c))}},delegateContextMenu:function(c,a){if(this.beforeEvent(c)&&this.getNodeTarget(c)){this.onNodeContextMenu(c,this.getNode(c))}},onNodeClick:function(c,a){a.ui.onClick(c)},onNodeOver:function(c,a){a.ui.onOver(c)},onNodeOut:function(c,a){a.ui.onOut(c)},onIconOver:function(c,a){a.ui.addClass("x-tree-ec-over")},onIconOut:function(c,a){a.ui.removeClass("x-tree-ec-over")},onIconClick:function(c,a){a.ui.ecClick(c)},onCheckboxClick:function(c,a){a.ui.onCheckChange(c)},onNodeDblClick:function(c,a){a.ui.onDblClick(c)},onNodeContextMenu:function(c,a){a.ui.onContextMenu(c)},beforeEvent:function(a){if(this.disabled){a.stopEvent();return false}return true},disable:function(){this.disabled=true},enable:function(){this.disabled=false}};Ext.tree.DefaultSelectionModel=function(a){this.selNode=null;this.addEvents("selectionchange","beforeselect");Ext.apply(this,a);Ext.tree.DefaultSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.tree.DefaultSelectionModel,Ext.util.Observable,{init:function(a){this.tree=a;a.getTreeEl().on("keydown",this.onKeyDown,this);a.on("click",this.onNodeClick,this)},onNodeClick:function(a,c){this.select(a)},select:function(c){var a=this.selNode;if(c==a){c.ui.onSelectedChange(true)}else{if(this.fireEvent("beforeselect",this,c,a)!==false){if(a){a.ui.onSelectedChange(false)}this.selNode=c;c.ui.onSelectedChange(true);this.fireEvent("selectionchange",this,c,a)}}return c},unselect:function(a){if(this.selNode==a){this.clearSelections()}},clearSelections:function(){var a=this.selNode;if(a){a.ui.onSelectedChange(false);this.selNode=null;this.fireEvent("selectionchange",this,null)}return a},getSelectedNode:function(){return this.selNode},isSelected:function(a){return this.selNode==a},selectPrevious:function(){var a=this.selNode||this.lastSelNode;if(!a){return null}var g=a.previousSibling;if(g){if(!g.isExpanded()||g.childNodes.length<1){return this.select(g)}else{var c=g.lastChild;while(c&&c.isExpanded()&&c.childNodes.length>0){c=c.lastChild}return this.select(c)}}else{if(a.parentNode&&(this.tree.rootVisible||!a.parentNode.isRoot)){return this.select(a.parentNode)}}return null},selectNext:function(){var c=this.selNode||this.lastSelNode;if(!c){return null}if(c.firstChild&&c.isExpanded()){return this.select(c.firstChild)}else{if(c.nextSibling){return this.select(c.nextSibling)}else{if(c.parentNode){var a=null;c.parentNode.bubble(function(){if(this.nextSibling){a=this.getOwnerTree().selModel.select(this.nextSibling);return false}});return a}}}return null},onKeyDown:function(g){var c=this.selNode||this.lastSelNode;var h=this;if(!c){return}var a=g.getKey();switch(a){case g.DOWN:g.stopEvent();this.selectNext();break;case g.UP:g.stopEvent();this.selectPrevious();break;case g.RIGHT:g.preventDefault();if(c.hasChildNodes()){if(!c.isExpanded()){c.expand()}else{if(c.firstChild){this.select(c.firstChild,g)}}}break;case g.LEFT:g.preventDefault();if(c.hasChildNodes()&&c.isExpanded()){c.collapse()}else{if(c.parentNode&&(this.tree.rootVisible||c.parentNode!=this.tree.getRootNode())){this.select(c.parentNode,g)}}break}}});Ext.tree.MultiSelectionModel=function(a){this.selNodes=[];this.selMap={};this.addEvents("selectionchange");Ext.apply(this,a);Ext.tree.MultiSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.tree.MultiSelectionModel,Ext.util.Observable,{init:function(a){this.tree=a;a.getTreeEl().on("keydown",this.onKeyDown,this);a.on("click",this.onNodeClick,this)},onNodeClick:function(a,c){if(c.ctrlKey&&this.isSelected(a)){this.unselect(a)}else{this.select(a,c,c.ctrlKey)}},select:function(a,g,c){if(c!==true){this.clearSelections(true)}if(this.isSelected(a)){this.lastSelNode=a;return a}this.selNodes.push(a);this.selMap[a.id]=a;this.lastSelNode=a;a.ui.onSelectedChange(true);this.fireEvent("selectionchange",this,this.selNodes);return a},unselect:function(c){if(this.selMap[c.id]){c.ui.onSelectedChange(false);var g=this.selNodes;var a=g.indexOf(c);if(a!=-1){this.selNodes.splice(a,1)}delete this.selMap[c.id];this.fireEvent("selectionchange",this,this.selNodes)}},clearSelections:function(c){var h=this.selNodes;if(h.length>0){for(var g=0,a=h.length;g<a;g++){h[g].ui.onSelectedChange(false)}this.selNodes=[];this.selMap={};if(c!==true){this.fireEvent("selectionchange",this,this.selNodes)}}},isSelected:function(a){return this.selMap[a.id]?true:false},getSelectedNodes:function(){return this.selNodes},onKeyDown:Ext.tree.DefaultSelectionModel.prototype.onKeyDown,selectNext:Ext.tree.DefaultSelectionModel.prototype.selectNext,selectPrevious:Ext.tree.DefaultSelectionModel.prototype.selectPrevious});Ext.tree.TreeNode=function(a){a=a||{};if(typeof a=="string"){a={text:a}}this.childrenRendered=false;this.rendered=false;Ext.tree.TreeNode.superclass.constructor.call(this,a);this.expanded=a.expanded===true;this.isTarget=a.isTarget!==false;this.draggable=a.draggable!==false&&a.allowDrag!==false;this.allowChildren=a.allowChildren!==false&&a.allowDrop!==false;this.text=a.text;this.disabled=a.disabled===true;this.hidden=a.hidden===true;this.addEvents("textchange","beforeexpand","beforecollapse","expand","disabledchange","collapse","beforeclick","click","checkchange","dblclick","contextmenu","beforechildrenrendered");var c=this.attributes.uiProvider||this.defaultUI||Ext.tree.TreeNodeUI;this.ui=new c(this)};Ext.extend(Ext.tree.TreeNode,Ext.data.Node,{preventHScroll:true,isExpanded:function(){return this.expanded},getUI:function(){return this.ui},getLoader:function(){var a;return this.loader||((a=this.getOwnerTree())&&a.loader?a.loader:new Ext.tree.TreeLoader())},setFirstChild:function(a){var c=this.firstChild;Ext.tree.TreeNode.superclass.setFirstChild.call(this,a);if(this.childrenRendered&&c&&a!=c){c.renderIndent(true,true)}if(this.rendered){this.renderIndent(true,true)}},setLastChild:function(c){var a=this.lastChild;Ext.tree.TreeNode.superclass.setLastChild.call(this,c);if(this.childrenRendered&&a&&c!=a){a.renderIndent(true,true)}if(this.rendered){this.renderIndent(true,true)}},appendChild:function(c){if(!c.render&&!Ext.isArray(c)){c=this.getLoader().createNode(c)}var a=Ext.tree.TreeNode.superclass.appendChild.call(this,c);if(a&&this.childrenRendered){a.render()}this.ui.updateExpandIcon();return a},removeChild:function(a){this.ownerTree.getSelectionModel().unselect(a);Ext.tree.TreeNode.superclass.removeChild.apply(this,arguments);if(this.childrenRendered){a.ui.remove()}if(this.childNodes.length<1){this.collapse(false,false)}else{this.ui.updateExpandIcon()}if(!this.firstChild&&!this.isHiddenRoot()){this.childrenRendered=false}return a},insertBefore:function(g,a){if(!g.render){g=this.getLoader().createNode(g)}var c=Ext.tree.TreeNode.superclass.insertBefore.apply(this,arguments);if(c&&a&&this.childrenRendered){g.render()}this.ui.updateExpandIcon();return c},setText:function(c){var a=this.text;this.text=c;this.attributes.text=c;if(this.rendered){this.ui.onTextChange(this,c,a)}this.fireEvent("textchange",this,c,a)},select:function(){this.getOwnerTree().getSelectionModel().select(this)},unselect:function(){this.getOwnerTree().getSelectionModel().unselect(this)},isSelected:function(){return this.getOwnerTree().getSelectionModel().isSelected(this)},expand:function(a,c,g){if(!this.expanded){if(this.fireEvent("beforeexpand",this,a,c)===false){return}if(!this.childrenRendered){this.renderChildren()}this.expanded=true;if(!this.isHiddenRoot()&&(this.getOwnerTree().animate&&c!==false)||c){this.ui.animExpand(function(){this.fireEvent("expand",this);if(typeof g=="function"){g(this)}if(a===true){this.expandChildNodes(true)}}.createDelegate(this));return}else{this.ui.expand();this.fireEvent("expand",this);if(typeof g=="function"){g(this)}}}else{if(typeof g=="function"){g(this)}}if(a===true){this.expandChildNodes(true)}},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible},collapse:function(c,j){if(this.expanded&&!this.isHiddenRoot()){if(this.fireEvent("beforecollapse",this,c,j)===false){return}this.expanded=false;if((this.getOwnerTree().animate&&j!==false)||j){this.ui.animCollapse(function(){this.fireEvent("collapse",this);if(c===true){this.collapseChildNodes(true)}}.createDelegate(this));return}else{this.ui.collapse();this.fireEvent("collapse",this)}}if(c===true){var h=this.childNodes;for(var g=0,a=h.length;g<a;g++){h[g].collapse(true,false)}}},delayedExpand:function(a){if(!this.expandProcId){this.expandProcId=this.expand.defer(a,this)}},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId)}this.expandProcId=false},toggle:function(){if(this.expanded){this.collapse()}else{this.expand()}},ensureVisible:function(c){var a=this.getOwnerTree();a.expandPath(this.parentNode?this.parentNode.getPath():this.getPath(),false,function(){var g=a.getNodeById(this.id);a.getTreeEl().scrollChildIntoView(g.ui.anchor);Ext.callback(c)}.createDelegate(this))},expandChildNodes:function(c){var h=this.childNodes;for(var g=0,a=h.length;g<a;g++){h[g].expand(c)}},collapseChildNodes:function(c){var h=this.childNodes;for(var g=0,a=h.length;g<a;g++){h[g].collapse(c)}},disable:function(){this.disabled=true;this.unselect();if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,true)}this.fireEvent("disabledchange",this,true)},enable:function(){this.disabled=false;if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,false)}this.fireEvent("disabledchange",this,false)},renderChildren:function(c){if(c!==false){this.fireEvent("beforechildrenrendered",this)}var h=this.childNodes;for(var g=0,a=h.length;g<a;g++){h[g].render(true)}this.childrenRendered=true},sort:function(j,h){Ext.tree.TreeNode.superclass.sort.apply(this,arguments);if(this.childrenRendered){var g=this.childNodes;for(var c=0,a=g.length;c<a;c++){g[c].render(true)}}},render:function(a){this.ui.render(a);if(!this.rendered){this.getOwnerTree().registerNode(this);this.rendered=true;if(this.expanded){this.expanded=false;this.expand(false,false)}}},renderIndent:function(c,j){if(j){this.ui.childIndent=null}this.ui.renderIndent();if(c===true&&this.childrenRendered){var h=this.childNodes;for(var g=0,a=h.length;g<a;g++){h[g].renderIndent(true,j)}}},beginUpdate:function(){this.childrenRendered=false},endUpdate:function(){if(this.expanded&&this.rendered){this.renderChildren()}},destroy:function(){if(this.childNodes){for(var c=0,a=this.childNodes.length;c<a;c++){this.childNodes[c].destroy()}this.childNodes=null}if(this.ui.destroy){this.ui.destroy()}}});Ext.tree.TreePanel.nodeTypes.node=Ext.tree.TreeNode;Ext.tree.AsyncTreeNode=function(a){this.loaded=a&&a.loaded===true;this.loading=false;Ext.tree.AsyncTreeNode.superclass.constructor.apply(this,arguments);this.addEvents("beforeload","load")};Ext.extend(Ext.tree.AsyncTreeNode,Ext.tree.TreeNode,{expand:function(c,h,k){if(this.loading){var j;var g=function(){if(!this.loading){clearInterval(j);this.expand(c,h,k)}}.createDelegate(this);j=setInterval(g,200);return}if(!this.loaded){if(this.fireEvent("beforeload",this)===false){return}this.loading=true;this.ui.beforeLoad(this);var a=this.loader||this.attributes.loader||this.getOwnerTree().getLoader();if(a){a.load(this,this.loadComplete.createDelegate(this,[c,h,k]));return}}Ext.tree.AsyncTreeNode.superclass.expand.call(this,c,h,k)},isLoading:function(){return this.loading},loadComplete:function(a,c,g){this.loading=false;this.loaded=true;this.ui.afterLoad(this);this.fireEvent("load",this);this.expand(a,c,g)},isLoaded:function(){return this.loaded},hasChildNodes:function(){if(!this.isLeaf()&&!this.loaded){return true}else{return Ext.tree.AsyncTreeNode.superclass.hasChildNodes.call(this)}},reload:function(a){this.collapse(false,false);while(this.firstChild){this.removeChild(this.firstChild).destroy()}this.childrenRendered=false;this.loaded=false;if(this.isHiddenRoot()){this.expanded=false}this.expand(false,false,a)}});Ext.tree.TreePanel.nodeTypes.async=Ext.tree.AsyncTreeNode;Ext.tree.TreeNodeUI=function(a){this.node=a;this.rendered=false;this.animating=false;this.wasLeaf=true;this.ecc="x-tree-ec-icon x-tree-elbow";this.emptyIcon=Ext.BLANK_IMAGE_URL};Ext.tree.TreeNodeUI.prototype={removeChild:function(a){if(this.rendered){this.ctNode.removeChild(a.ui.getEl())}},beforeLoad:function(){this.addClass("x-tree-node-loading")},afterLoad:function(){this.removeClass("x-tree-node-loading")},onTextChange:function(c,g,a){if(this.rendered){this.textNode.innerHTML=g}},onDisableChange:function(a,c){this.disabled=c;if(this.checkbox){this.checkbox.disabled=c}if(c){this.addClass("x-tree-node-disabled")}else{this.removeClass("x-tree-node-disabled")}},onSelectedChange:function(a){if(a){this.focus();this.addClass("x-tree-selected")}else{this.removeClass("x-tree-selected")}},onMove:function(a,l,j,k,h,c){this.childIndent=null;if(this.rendered){var m=k.ui.getContainer();if(!m){this.holder=document.createElement("div");this.holder.appendChild(this.wrap);return}var g=c?c.ui.getEl():null;if(g){m.insertBefore(this.wrap,g)}else{m.appendChild(this.wrap)}this.node.renderIndent(true,k!=j)}},addClass:function(a){if(this.elNode){Ext.fly(this.elNode).addClass(a)}},removeClass:function(a){if(this.elNode){Ext.fly(this.elNode).removeClass(a)}},remove:function(){if(this.rendered){this.holder=document.createElement("div");this.holder.appendChild(this.wrap)}},fireEvent:function(){return this.node.fireEvent.apply(this.node,arguments)},initEvents:function(){this.node.on("move",this.onMove,this);if(this.node.disabled){this.addClass("x-tree-node-disabled");if(this.checkbox){this.checkbox.disabled=true}}if(this.node.hidden){this.hide()}var c=this.node.getOwnerTree();var a=c.enableDD||c.enableDrag||c.enableDrop;if(a&&(!this.node.isRoot||c.rootVisible)){Ext.dd.Registry.register(this.elNode,{node:this.node,handles:this.getDDHandles(),isHandle:false})}},getDDHandles:function(){return[this.iconNode,this.textNode,this.elNode]},hide:function(){this.node.hidden=true;if(this.wrap){this.wrap.style.display="none"}},show:function(){this.node.hidden=false;if(this.wrap){this.wrap.style.display=""}},onContextMenu:function(a){if(this.node.hasListener("contextmenu")||this.node.getOwnerTree().hasListener("contextmenu")){a.preventDefault();this.focus();this.fireEvent("contextmenu",this.node,a)}},onClick:function(g){if(this.dropping){g.stopEvent();return}if(this.fireEvent("beforeclick",this.node,g)!==false){var c=g.getTarget("a");if(!this.disabled&&this.node.attributes.href&&c){this.fireEvent("click",this.node,g);return}else{if(c&&g.ctrlKey){g.stopEvent()}}g.preventDefault();if(this.disabled){return}if(this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()){this.node.toggle()}this.fireEvent("click",this.node,g)}else{g.stopEvent()}},onDblClick:function(a){a.preventDefault();if(this.disabled){return}if(this.checkbox){this.toggleCheck()}if(!this.animating&&this.node.isExpandable()){this.node.toggle()}this.fireEvent("dblclick",this.node,a)},onOver:function(a){this.addClass("x-tree-node-over")},onOut:function(a){this.removeClass("x-tree-node-over")},onCheckChange:function(){var a=this.checkbox.checked;this.checkbox.defaultChecked=a;this.node.attributes.checked=a;this.fireEvent("checkchange",this.node,a)},ecClick:function(a){if(!this.animating&&this.node.isExpandable()){this.node.toggle()}},startDrop:function(){this.dropping=true},endDrop:function(){setTimeout(function(){this.dropping=false}.createDelegate(this),50)},expand:function(){this.updateExpandIcon();this.ctNode.style.display=""},focus:function(){if(!this.node.preventHScroll){try{this.anchor.focus()}catch(g){}}else{try{var c=this.node.getOwnerTree().getTreeEl().dom;var a=c.scrollLeft;this.anchor.focus();c.scrollLeft=a}catch(g){}}},toggleCheck:function(c){var a=this.checkbox;if(a){a.checked=(c===undefined?!a.checked:c);this.onCheckChange()}},blur:function(){try{this.anchor.blur()}catch(a){}},animExpand:function(c){var a=Ext.get(this.ctNode);a.stopFx();if(!this.node.isExpandable()){this.updateExpandIcon();this.ctNode.style.display="";Ext.callback(c);return}this.animating=true;this.updateExpandIcon();a.slideIn("t",{callback:function(){this.animating=false;Ext.callback(c)},scope:this,duration:this.node.ownerTree.duration||0.25})},highlight:function(){var a=this.node.getOwnerTree();Ext.fly(this.wrap).highlight(a.hlColor||"C3DAF9",{endColor:a.hlBaseColor})},collapse:function(){this.updateExpandIcon();this.ctNode.style.display="none"},animCollapse:function(c){var a=Ext.get(this.ctNode);a.enableDisplayMode("block");a.stopFx();this.animating=true;this.updateExpandIcon();a.slideOut("t",{callback:function(){this.animating=false;Ext.callback(c)},scope:this,duration:this.node.ownerTree.duration||0.25})},getContainer:function(){return this.ctNode},getEl:function(){return this.wrap},appendDDGhost:function(a){a.appendChild(this.elNode.cloneNode(true))},getDDRepairXY:function(){return Ext.lib.Dom.getXY(this.iconNode)},onRender:function(){this.render()},render:function(g){var j=this.node,c=j.attributes;var h=j.parentNode?j.parentNode.ui.getContainer():j.ownerTree.innerCt.dom;if(!this.rendered){this.rendered=true;this.renderElements(j,c,h,g);if(c.qtip){if(this.textNode.setAttributeNS){this.textNode.setAttributeNS("ext","qtip",c.qtip);if(c.qtipTitle){this.textNode.setAttributeNS("ext","qtitle",c.qtipTitle)}}else{this.textNode.setAttribute("ext:qtip",c.qtip);if(c.qtipTitle){this.textNode.setAttribute("ext:qtitle",c.qtipTitle)}}}else{if(c.qtipCfg){c.qtipCfg.target=Ext.id(this.textNode);Ext.QuickTips.register(c.qtipCfg)}}this.initEvents();if(!this.node.expanded){this.updateExpandIcon(true)}}else{if(g===true){h.appendChild(this.wrap)}}},renderElements:function(j,p,o,q){this.indentMarkup=j.parentNode?j.parentNode.ui.getChildIndent():"";var k=typeof p.checked=="boolean";var g=p.href?p.href:Ext.isGecko?"":"#";var h=['<li class="x-tree-node"><div ext:tree-node-id="',j.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',p.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img src="',p.icon||this.emptyIcon,'" class="x-tree-node-icon',(p.icon?" x-tree-node-inline-icon":""),(p.iconCls?" "+p.iconCls:""),'" unselectable="on" />',k?('<input class="x-tree-node-cb" type="checkbox" '+(p.checked?'checked="checked" />':"/>")):"",'<a hidefocus="on" class="x-tree-node-anchor" href="',g,'" tabIndex="1" ',p.hrefTarget?' target="'+p.hrefTarget+'"':"",'><span unselectable="on">',j.text,"</span></a></div>",'<ul class="x-tree-node-ct" style="display:none;"></ul>',"</li>"].join("");var c;if(q!==true&&j.nextSibling&&(c=j.nextSibling.ui.getEl())){this.wrap=Ext.DomHelper.insertHtml("beforeBegin",c,h)}else{this.wrap=Ext.DomHelper.insertHtml("beforeEnd",o,h)}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];var m=this.elNode.childNodes;this.indentNode=m[0];this.ecNode=m[1];this.iconNode=m[2];var l=3;if(k){this.checkbox=m[3];this.checkbox.defaultChecked=this.checkbox.checked;l++}this.anchor=m[l];this.textNode=m[l].firstChild},getAnchor:function(){return this.anchor},getTextEl:function(){return this.textNode},getIconEl:function(){return this.iconNode},isChecked:function(){return this.checkbox?this.checkbox.checked:false},updateExpandIcon:function(){if(this.rendered){var j=this.node,h,g;var a=j.isLast()?"x-tree-elbow-end":"x-tree-elbow";if(j.isExpandable()){if(j.expanded){a+="-minus";h="x-tree-node-collapsed";g="x-tree-node-expanded"}else{a+="-plus";h="x-tree-node-expanded";g="x-tree-node-collapsed"}if(this.wasLeaf){this.removeClass("x-tree-node-leaf");this.wasLeaf=false}if(this.c1!=h||this.c2!=g){Ext.fly(this.elNode).replaceClass(h,g);this.c1=h;this.c2=g}}else{if(!this.wasLeaf){Ext.fly(this.elNode).replaceClass("x-tree-node-expanded","x-tree-node-leaf");delete this.c1;delete this.c2;this.wasLeaf=true}}var c="x-tree-ec-icon "+a;if(this.ecc!=c){this.ecNode.className=c;this.ecc=c}}},getChildIndent:function(){if(!this.childIndent){var a=[];var c=this.node;while(c){if(!c.isRoot||(c.isRoot&&c.ownerTree.rootVisible)){if(!c.isLast()){a.unshift('<img src="'+this.emptyIcon+'" class="x-tree-elbow-line" />')}else{a.unshift('<img src="'+this.emptyIcon+'" class="x-tree-icon" />')}}c=c.parentNode}this.childIndent=a.join("")}return this.childIndent},renderIndent:function(){if(this.rendered){var a="";var c=this.node.parentNode;if(c){a=c.ui.getChildIndent()}if(this.indentMarkup!=a){this.indentNode.innerHTML=a;this.indentMarkup=a}this.updateExpandIcon()}},destroy:function(){if(this.elNode){Ext.dd.Registry.unregister(this.elNode.id)}delete this.elNode;delete this.ctNode;delete this.indentNode;delete this.ecNode;delete this.iconNode;delete this.checkbox;delete this.anchor;delete this.textNode;if(this.holder){delete this.wrap;Ext.removeNode(this.holder);delete this.holder}else{Ext.removeNode(this.wrap);delete this.wrap}}};Ext.tree.RootTreeNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{render:function(){if(!this.rendered){var a=this.node.ownerTree.innerCt.dom;this.node.expanded=true;a.innerHTML='<div class="x-tree-root-node"></div>';this.wrap=this.ctNode=a.firstChild}},collapse:Ext.emptyFn,expand:Ext.emptyFn});Ext.tree.TreeLoader=function(a){this.baseParams={};Ext.apply(this,a);this.addEvents("beforeload","load","loadexception");Ext.tree.TreeLoader.superclass.constructor.call(this)};Ext.extend(Ext.tree.TreeLoader,Ext.util.Observable,{uiProviders:{},clearOnLoad:true,load:function(a,c){if(this.clearOnLoad){while(a.firstChild){a.removeChild(a.firstChild)}}if(this.doPreload(a)){if(typeof c=="function"){c()}}else{if(this.dataUrl||this.url){this.requestData(a,c)}}},doPreload:function(h){if(h.attributes.children){if(h.childNodes.length<1){var g=h.attributes.children;h.beginUpdate();for(var c=0,a=g.length;c<a;c++){var j=h.appendChild(this.createNode(g[c]));if(this.preloadChildren){this.doPreload(j)}}h.endUpdate()}return true}else{return false}},getParams:function(h){var a=[],g=this.baseParams;for(var c in g){if(typeof g[c]!="function"){a.push(encodeURIComponent(c),"=",encodeURIComponent(g[c]),"&")}}a.push("node=",encodeURIComponent(h.id));return a.join("")},requestData:function(a,c){if(this.fireEvent("beforeload",this,a,c)!==false){this.transId=Ext.Ajax.request({method:this.requestMethod,url:this.dataUrl||this.url,success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{callback:c,node:a},params:this.getParams(a)})}else{if(typeof c=="function"){c()}}},isLoading:function(){return !!this.transId},abort:function(){if(this.isLoading()){Ext.Ajax.abort(this.transId)}},createNode:function(attr){if(this.baseAttrs){Ext.applyIf(attr,this.baseAttrs)}if(this.applyLoader!==false){attr.loader=this}if(typeof attr.uiProvider=="string"){attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)}if(attr.nodeType){return new Ext.tree.TreePanel.nodeTypes[attr.nodeType](attr)}else{return attr.leaf?new Ext.tree.TreeNode(attr):new Ext.tree.AsyncTreeNode(attr)}},processResponse:function(response,node,callback){var json=response.responseText;try{var o=eval("("+json+")");node.beginUpdate();for(var i=0,len=o.length;i<len;i++){var n=this.createNode(o[i]);if(n){node.appendChild(n)}}node.endUpdate();if(typeof callback=="function"){callback(this,node)}}catch(e){this.handleFailure(response)}},handleResponse:function(g){this.transId=false;var c=g.argument;this.processResponse(g,c.node,c.callback);this.fireEvent("load",this,c.node,g)},handleFailure:function(g){this.transId=false;var c=g.argument;this.fireEvent("loadexception",this,c.node,g);if(typeof c.callback=="function"){c.callback(this,c.node)}}});Ext.tree.TreeFilter=function(a,c){this.tree=a;this.filtered={};Ext.apply(this,c)};Ext.tree.TreeFilter.prototype={clearBlank:false,reverse:false,autoClear:false,remove:false,filter:function(h,a,c){a=a||"text";var g;if(typeof h=="string"){var j=h.length;if(j==0&&this.clearBlank){this.clear();return}h=h.toLowerCase();g=function(k){return k.attributes[a].substr(0,j).toLowerCase()==h}}else{if(h.exec){g=function(k){return h.test(k.attributes[a])}}else{throw"Illegal filter type, must be string or regex"}}this.filterBy(g,null,c)},filterBy:function(h,g,c){c=c||this.tree.root;if(this.autoClear){this.clear()}var a=this.filtered,m=this.reverse;var j=function(p){if(p==c){return true}if(a[p.id]){return false}var o=h.call(g||p,p);if(!o||m){a[p.id]=p;p.ui.hide();return false}return true};c.cascade(j);if(this.remove){for(var l in a){if(typeof l!="function"){var k=a[l];if(k&&k.parentNode){k.parentNode.removeChild(k)}}}}},clear:function(){var c=this.tree;var a=this.filtered;for(var h in a){if(typeof h!="function"){var g=a[h];if(g){g.ui.show()}}}this.filtered={}}};Ext.tree.TreeSorter=function(c,g){Ext.apply(this,g);c.on("beforechildrenrendered",this.doSort,this);c.on("append",this.updateSort,this);c.on("insert",this.updateSort,this);c.on("textchange",this.updateSortParent,this);var j=this.dir&&this.dir.toLowerCase()=="desc";var k=this.property||"text";var l=this.sortType;var a=this.folderSort;var h=this.caseSensitive===true;var m=this.leafAttr||"leaf";this.sortFn=function(p,o){if(a){if(p.attributes[m]&&!o.attributes[m]){return 1}if(!p.attributes[m]&&o.attributes[m]){return -1}}var r=l?l(p):(h?p.attributes[k]:p.attributes[k].toUpperCase());var q=l?l(o):(h?o.attributes[k]:o.attributes[k].toUpperCase());if(r<q){return j?+1:-1}else{if(r>q){return j?-1:+1}else{return 0}}}};Ext.tree.TreeSorter.prototype={doSort:function(a){a.sort(this.sortFn)},compareNodes:function(c,a){return(c.text.toUpperCase()>a.text.toUpperCase()?1:-1)},updateSort:function(a,c){if(c.childrenRendered){this.doSort.defer(1,this,[c])}},updateSortParent:function(a){var c=a.parentNode;if(c&&c.childrenRendered){this.doSort.defer(1,this,[c])}}};if(Ext.dd.DropZone){Ext.tree.TreeDropZone=function(a,c){this.allowParentInsert=c.allowParentInsert||false;this.allowContainerDrop=c.allowContainerDrop||false;this.appendOnly=c.appendOnly||false;Ext.tree.TreeDropZone.superclass.constructor.call(this,a.getTreeEl(),c);this.tree=a;this.dragOverData={};this.lastInsertClass="x-tree-no-status"};Ext.extend(Ext.tree.TreeDropZone,Ext.dd.DropZone,{ddGroup:"TreeDD",expandDelay:1000,expandNode:function(a){if(a.hasChildNodes()&&!a.isExpanded()){a.expand(false,null,this.triggerCacheRefresh.createDelegate(this))}},queueExpand:function(a){this.expandProcId=this.expandNode.defer(this.expandDelay,this,[a])},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId);this.expandProcId=false}},isValidDropPoint:function(a,o,l,h,g){if(!a||!g){return false}var j=a.node;var k=g.node;if(!(j&&j.isTarget&&o)){return false}if(o=="append"&&j.allowChildren===false){return false}if((o=="above"||o=="below")&&(j.parentNode&&j.parentNode.allowChildren===false)){return false}if(k&&(j==k||k.contains(j))){return false}var c=this.dragOverData;c.tree=this.tree;c.target=j;c.data=g;c.point=o;c.source=l;c.rawEvent=h;c.dropNode=k;c.cancel=false;var m=this.tree.fireEvent("nodedragover",c);return c.cancel===false&&m!==false},getDropPoint:function(j,h,o){var p=h.node;if(p.isRoot){return p.allowChildren!==false?"append":false}var c=h.ddel;var r=Ext.lib.Dom.getY(c),l=r+c.offsetHeight;var k=Ext.lib.Event.getPageY(j);var m=p.allowChildren===false||p.isLeaf();if(this.appendOnly||p.parentNode.allowChildren===false){return m?false:"append"}var g=false;if(!this.allowParentInsert){g=p.hasChildNodes()&&p.isExpanded()}var a=(l-r)/(m?2:3);if(k>=r&&k<(r+a)){return"above"}else{if(!g&&(m||k>=l-a&&k<=l)){return"below"}else{return"append"}}},onNodeEnter:function(h,a,g,c){this.cancelExpand()},onContainerOver:function(a,g,c){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",a,g,c)){return this.dropAllowed}return this.dropNotAllowed},onNodeOver:function(c,l,k,j){var o=this.getDropPoint(k,c,l);var g=c.node;if(!this.expandProcId&&o=="append"&&g.hasChildNodes()&&!c.node.isExpanded()){this.queueExpand(g)}else{if(o!="append"){this.cancelExpand()}}var h=this.dropNotAllowed;if(this.isValidDropPoint(c,o,l,k,j)){if(o){var a=c.ddel;var m;if(o=="above"){h=c.node.isFirst()?"x-tree-drop-ok-above":"x-tree-drop-ok-between";m="x-tree-drag-insert-above"}else{if(o=="below"){h=c.node.isLast()?"x-tree-drop-ok-below":"x-tree-drop-ok-between";m="x-tree-drag-insert-below"}else{h="x-tree-drop-ok-append";m="x-tree-drag-append"}}if(this.lastInsertClass!=m){Ext.fly(a).replaceClass(this.lastInsertClass,m);this.lastInsertClass=m}}}return h},onNodeOut:function(h,a,g,c){this.cancelExpand();this.removeDropIndicators(h)},onNodeDrop:function(l,c,k,h){var a=this.getDropPoint(k,l,c);var j=l.node;j.ui.startDrop();if(!this.isValidDropPoint(l,a,c,k,h)){j.ui.endDrop();return false}var g=h.node||(c.getTreeNode?c.getTreeNode(h,j,a,k):null);return this.processDrop(j,h,a,c,k,g)},onContainerDrop:function(a,j,g){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",a,j,g)){var h=this.tree.getRootNode();h.ui.startDrop();var c=g.node||(a.getTreeNode?a.getTreeNode(g,h,"append",j):null);return this.processDrop(h,g,"append",a,j,c)}return false},processDrop:function(m,k,c,a,l,h){var j={tree:this.tree,target:m,data:k,point:c,source:a,rawEvent:l,dropNode:h,cancel:!h,dropStatus:false};var g=this.tree.fireEvent("beforenodedrop",j);if(g===false||j.cancel===true||!j.dropNode){m.ui.endDrop();return j.dropStatus}m=j.target;if(c=="append"&&!m.isExpanded()){m.expand(false,null,function(){this.completeDrop(j)}.createDelegate(this))}else{this.completeDrop(j)}return true},completeDrop:function(l){var h=l.dropNode,j=l.point,g=l.target;if(!Ext.isArray(h)){h=[h]}var k;for(var c=0,a=h.length;c<a;c++){k=h[c];if(j=="above"){g.parentNode.insertBefore(k,g)}else{if(j=="below"){g.parentNode.insertBefore(k,g.nextSibling)}else{g.appendChild(k)}}}k.ui.focus();if(Ext.enableFx&&this.tree.hlDrop){k.ui.highlight()}g.ui.endDrop();this.tree.fireEvent("nodedrop",l)},afterNodeMoved:function(a,g,j,h,c){if(Ext.enableFx&&this.tree.hlDrop){c.ui.focus();c.ui.highlight()}this.tree.fireEvent("nodedrop",this.tree,h,g,a,j)},getTree:function(){return this.tree},removeDropIndicators:function(c){if(c&&c.ddel){var a=c.ddel;Ext.fly(a).removeClass(["x-tree-drag-insert-above","x-tree-drag-insert-below","x-tree-drag-append"]);this.lastInsertClass="_noclass"}},beforeDragDrop:function(c,a,g){this.cancelExpand();return true},afterRepair:function(a){if(a&&Ext.enableFx){a.node.ui.highlight()}this.hideProxy()}})}if(Ext.dd.DragZone){Ext.tree.TreeDragZone=function(a,c){Ext.tree.TreeDragZone.superclass.constructor.call(this,a.innerCt,c);this.tree=a};Ext.extend(Ext.tree.TreeDragZone,Ext.dd.DragZone,{ddGroup:"TreeDD",onBeforeDrag:function(a,c){var g=a.node;return g&&g.draggable&&!g.disabled},onInitDrag:function(c){var a=this.dragData;this.tree.getSelectionModel().select(a.node);this.tree.eventModel.disable();this.proxy.update("");a.node.ui.appendDDGhost(this.proxy.ghost.dom);this.tree.fireEvent("startdrag",this.tree,a.node,c)},getRepairXY:function(c,a){return a.node.ui.getDDRepairXY()},onEndDrag:function(a,c){this.tree.eventModel.enable.defer(100,this.tree.eventModel);this.tree.fireEvent("enddrag",this.tree,a.node,c)},onValidDrop:function(a,c,g){this.tree.fireEvent("dragdrop",this.tree,this.dragData.node,a,c);this.hideProxy()},beforeInvalidDrop:function(a,g){var c=this.tree.getSelectionModel();c.clearSelections();c.select(this.dragData.node)},afterRepair:function(){if(Ext.enableFx&&this.tree.hlDrop){Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9")}this.dragging=false}})}Ext.tree.TreeEditor=function(a,g,c){g=g||{};var h=g.events?g:new Ext.form.TextField(g);Ext.tree.TreeEditor.superclass.constructor.call(this,h,c);this.tree=a;if(!a.rendered){a.on("render",this.initEditor,this)}else{this.initEditor(a)}};Ext.extend(Ext.tree.TreeEditor,Ext.Editor,{alignment:"l-l",autoSize:false,hideEl:false,cls:"x-small-editor x-tree-editor",shim:false,shadow:"frame",maxWidth:250,editDelay:350,initEditor:function(a){a.on("beforeclick",this.beforeNodeClick,this);a.on("dblclick",this.onNodeDblClick,this);this.on("complete",this.updateNode,this);this.on("beforestartedit",this.fitToTree,this);this.on("startedit",this.bindScroll,this,{delay:10});this.on("specialkey",this.onSpecialKey,this)},fitToTree:function(c,g){var j=this.tree.getTreeEl().dom,h=g.dom;if(j.scrollLeft>h.offsetLeft){j.scrollLeft=h.offsetLeft}var a=Math.min(this.maxWidth,(j.clientWidth>20?j.clientWidth:j.offsetWidth)-Math.max(0,h.offsetLeft-j.scrollLeft)-5);this.setSize(a,"")},triggerEdit:function(a,g){this.completeEdit();if(a.attributes.editable!==false){this.editNode=a;if(this.tree.autoScroll){Ext.fly(a.ui.getEl()).scrollIntoView(this.tree.body)}var c=a.text||"";if(!Ext.isGecko&&Ext.isEmpty(a.text)){a.setText("&nbsp;")}this.autoEditTimer=this.startEdit.defer(this.editDelay,this,[a.ui.textNode,c]);return false}},bindScroll:function(){this.tree.getTreeEl().on("scroll",this.cancelEdit,this)},beforeNodeClick:function(a,c){clearTimeout(this.autoEditTimer);if(this.tree.getSelectionModel().isSelected(a)){c.stopEvent();return this.triggerEdit(a)}},onNodeDblClick:function(a,c){clearTimeout(this.autoEditTimer)},updateNode:function(a,c){this.tree.getTreeEl().un("scroll",this.cancelEdit,this);this.editNode.setText(c)},onHide:function(){Ext.tree.TreeEditor.superclass.onHide.call(this);if(this.editNode){this.editNode.ui.focus.defer(50,this.editNode.ui)}},onSpecialKey:function(g,c){var a=c.getKey();if(a==c.ESC){c.stopEvent();this.cancelEdit()}else{if(a==c.ENTER&&!c.hasModifier()){c.stopEvent();this.completeEdit()}}}});Ext.menu.Menu=function(a){if(Ext.isArray(a)){a={items:a}}Ext.apply(this,a);this.id=this.id||Ext.id();this.addEvents("beforeshow","beforehide","show","hide","click","mouseover","mouseout","itemclick");Ext.menu.MenuMgr.register(this);Ext.menu.Menu.superclass.constructor.call(this);var c=this.items;this.items=new Ext.util.MixedCollection();if(c){this.add.apply(this,c)}};Ext.extend(Ext.menu.Menu,Ext.util.Observable,{minWidth:120,shadow:"sides",subMenuAlign:"tl-tr?",defaultAlign:"tl-bl?",allowOtherMenus:false,ignoreParentClicks:false,hidden:true,createEl:function(){return new Ext.Layer({cls:"x-menu",shadow:this.shadow,constrain:false,parentEl:this.parentEl||document.body,zindex:15000})},render:function(){if(this.el){return}var c=this.el=this.createEl();if(!this.keyNav){this.keyNav=new Ext.menu.MenuNav(this)}if(this.plain){c.addClass("x-menu-plain")}if(this.cls){c.addClass(this.cls)}this.focusEl=c.createChild({tag:"a",cls:"x-menu-focus",href:"#",onclick:"return false;",tabIndex:"-1"});var a=c.createChild({tag:"ul",cls:"x-menu-list"});a.on("click",this.onClick,this);a.on("mouseover",this.onMouseOver,this);a.on("mouseout",this.onMouseOut,this);this.items.each(function(h){var g=document.createElement("li");g.className="x-menu-list-item";a.dom.appendChild(g);h.render(g,this)},this);this.ul=a;this.autoWidth()},autoWidth:function(){var h=this.el,g=this.ul;if(!h){return}var a=this.width;if(a){h.setWidth(a)}else{if(Ext.isIE&&!Ext.isIE8){h.setWidth(this.minWidth);var c=h.dom.offsetWidth;h.setWidth(g.getWidth()+h.getFrameWidth("lr"))}}},delayAutoWidth:function(){if(this.el){if(!this.awTask){this.awTask=new Ext.util.DelayedTask(this.autoWidth,this)}this.awTask.delay(20)}},findTargetItem:function(c){var a=c.getTarget(".x-menu-list-item",this.ul,true);if(a&&a.menuItemId){return this.items.get(a.menuItemId)}},onClick:function(c){var a;if(a=this.findTargetItem(c)){if(a.menu&&this.ignoreParentClicks){a.expandMenu()}else{a.onClick(c);this.fireEvent("click",this,a,c)}}},setActiveItem:function(a,c){if(a!=this.activeItem){if(this.activeItem){this.activeItem.deactivate()}this.activeItem=a;a.activate(c)}else{if(c){a.expandMenu()}}},tryActivate:function(k,j){var c=this.items;for(var g=k,a=c.length;g>=0&&g<a;g+=j){var h=c.get(g);if(!h.disabled&&h.canActivate){this.setActiveItem(h,false);return h}}return false},onMouseOver:function(c){var a;if(a=this.findTargetItem(c)){if(a.canActivate&&!a.disabled){this.setActiveItem(a,true)}}this.over=true;this.fireEvent("mouseover",this,c,a)},onMouseOut:function(c){var a;if(a=this.findTargetItem(c)){if(a==this.activeItem&&a.shouldDeactivate(c)){this.activeItem.deactivate();delete this.activeItem}}this.over=false;this.fireEvent("mouseout",this,c,a)},isVisible:function(){return this.el&&!this.hidden},show:function(c,g,a){this.parentMenu=a;if(!this.el){this.render()}this.fireEvent("beforeshow",this);this.showAt(this.el.getAlignToXY(c,g||this.defaultAlign),a,false)},showAt:function(g,c,a){this.parentMenu=c;if(!this.el){this.render()}if(a!==false){this.fireEvent("beforeshow",this);g=this.el.adjustForConstraints(g)}this.el.setXY(g);this.el.show();this.hidden=false;this.focus();this.fireEvent("show",this)},focus:function(){if(!this.hidden){this.doFocus.defer(50,this)}},doFocus:function(){if(!this.hidden){this.focusEl.focus()}},hide:function(a){if(this.el&&this.isVisible()){this.fireEvent("beforehide",this);if(this.activeItem){this.activeItem.deactivate();this.activeItem=null}this.el.hide();this.hidden=true;this.fireEvent("hide",this)}if(a===true&&this.parentMenu){this.parentMenu.hide(true)}},add:function(){var g=arguments,c=g.length,k;for(var h=0;h<c;h++){var j=g[h];if(j.render){k=this.addItem(j)}else{if(typeof j=="string"){if(j=="separator"||j=="-"){k=this.addSeparator()}else{k=this.addText(j)}}else{if(j.tagName||j.el){k=this.addElement(j)}else{if(typeof j=="object"){Ext.applyIf(j,this.defaults);k=this.addMenuItem(j)}}}}}return k},getEl:function(){if(!this.el){this.render()}return this.el},addSeparator:function(){return this.addItem(new Ext.menu.Separator())},addElement:function(a){return this.addItem(new Ext.menu.BaseItem(a))},addItem:function(c){this.items.add(c);if(this.ul){var a=document.createElement("li");a.className="x-menu-list-item";this.ul.dom.appendChild(a);c.render(a,this);this.delayAutoWidth()}return c},addMenuItem:function(a){if(!(a instanceof Ext.menu.Item)){if(typeof a.checked=="boolean"){a=new Ext.menu.CheckItem(a)}else{a=new Ext.menu.Item(a)}}return this.addItem(a)},addText:function(a){return this.addItem(new Ext.menu.TextItem(a))},insert:function(c,g){this.items.insert(c,g);if(this.ul){var a=document.createElement("li");a.className="x-menu-list-item";this.ul.dom.insertBefore(a,this.ul.dom.childNodes[c]);g.render(a,this);this.delayAutoWidth()}return g},remove:function(a){this.items.removeKey(a.id);a.destroy()},removeAll:function(){if(this.items){var a;while(a=this.items.first()){this.remove(a)}}},destroy:function(){this.beforeDestroy();Ext.menu.MenuMgr.unregister(this);if(this.keyNav){this.keyNav.disable()}this.removeAll();if(this.ul){this.ul.removeAllListeners()}if(this.el){this.el.destroy()}},beforeDestroy:Ext.emptyFn});Ext.menu.MenuNav=function(a){Ext.menu.MenuNav.superclass.constructor.call(this,a.el);this.scope=this.menu=a};Ext.extend(Ext.menu.MenuNav,Ext.KeyNav,{doRelay:function(g,c){var a=g.getKey();if(!this.menu.activeItem&&g.isNavKeyPress()&&a!=g.SPACE&&a!=g.RETURN){this.menu.tryActivate(0,1);return false}return c.call(this.scope||this,g,this.menu)},up:function(c,a){if(!a.tryActivate(a.items.indexOf(a.activeItem)-1,-1)){a.tryActivate(a.items.length-1,-1)}},down:function(c,a){if(!a.tryActivate(a.items.indexOf(a.activeItem)+1,1)){a.tryActivate(0,1)}},right:function(c,a){if(a.activeItem){a.activeItem.expandMenu(true)}},left:function(c,a){a.hide();if(a.parentMenu&&a.parentMenu.activeItem){a.parentMenu.activeItem.activate()}},enter:function(c,a){if(a.activeItem){c.stopPropagation();a.activeItem.onClick(c);a.fireEvent("click",this,a.activeItem);return true}}});Ext.menu.MenuMgr=function(){var k,h,g={},a=false,q=new Date();function s(){k={};h=new Ext.util.MixedCollection();Ext.getDoc().addKeyListener(27,function(){if(h.length>0){m()}})}function m(){if(h&&h.length>0){var t=h.clone();t.each(function(v){v.hide()})}}function j(t){h.remove(t);if(h.length<1){Ext.getDoc().un("mousedown",r);a=false}}function p(t){var v=h.last();q=new Date();h.add(t);if(!a){Ext.getDoc().on("mousedown",r);a=true}if(t.parentMenu){t.getEl().setZIndex(parseInt(t.parentMenu.getEl().getStyle("z-index"),10)+3);t.parentMenu.activeChild=t}else{if(v&&v.isVisible()){t.getEl().setZIndex(parseInt(v.getEl().getStyle("z-index"),10)+3)}}}function c(t){if(t.activeChild){t.activeChild.hide()}if(t.autoHideTimer){clearTimeout(t.autoHideTimer);delete t.autoHideTimer}}function l(t){var v=t.parentMenu;if(!v&&!t.allowOtherMenus){m()}else{if(v&&v.activeChild){v.activeChild.hide()}}}function r(t){if(q.getElapsed()>50&&h.length>0&&!t.getTarget(".x-menu")){m()}}function o(v,y){if(y){var x=g[v.group];for(var w=0,t=x.length;w<t;w++){if(x[w]!=v){x[w].setChecked(false)}}}}return{hideAll:function(){m()},register:function(v){if(!k){s()}k[v.id]=v;v.on("beforehide",c);v.on("hide",j);v.on("beforeshow",l);v.on("show",p);var t=v.group;if(t&&v.events.checkchange){if(!g[t]){g[t]=[]}g[t].push(v);v.on("checkchange",onCheck)}},get:function(t){if(typeof t=="string"){if(!k){return null}return k[t]}else{if(t.events){return t}else{if(typeof t.length=="number"){return new Ext.menu.Menu({items:t})}else{return new Ext.menu.Menu(t)}}}},unregister:function(v){delete k[v.id];v.un("beforehide",c);v.un("hide",j);v.un("beforeshow",l);v.un("show",p);var t=v.group;if(t&&v.events.checkchange){g[t].remove(v);v.un("checkchange",onCheck)}},registerCheckable:function(t){var v=t.group;if(v){if(!g[v]){g[v]=[]}g[v].push(t);t.on("beforecheckchange",o)}},unregisterCheckable:function(t){var v=t.group;if(v){g[v].remove(t);t.un("beforecheckchange",o)}},getCheckedItem:function(w){var x=g[w];if(x){for(var v=0,t=x.length;v<t;v++){if(x[v].checked){return x[v]}}}return null},setCheckedItem:function(w,y){var x=g[w];if(x){for(var v=0,t=x.length;v<t;v++){if(x[v].id==y){x[v].setChecked(true)}}}return null}}}();Ext.menu.BaseItem=function(a){Ext.menu.BaseItem.superclass.constructor.call(this,a);this.addEvents("click","activate","deactivate");if(this.handler){this.on("click",this.handler,this.scope)}};Ext.extend(Ext.menu.BaseItem,Ext.Component,{canActivate:false,activeClass:"x-menu-item-active",hideOnClick:true,hideDelay:100,ctype:"Ext.menu.BaseItem",actionMode:"container",destroy:function(){if(this.menu){this.menu.destroy()}Ext.menu.BaseItem.superclass.destroy.call(this)},render:function(a,c){this.parentMenu=c;Ext.menu.BaseItem.superclass.render.call(this,a);this.container.menuItemId=this.id},onRender:function(c,a){this.el=Ext.get(this.el);if(this.id){this.el.id=this.id}c.dom.appendChild(this.el.dom)},setHandler:function(c,a){if(this.handler){this.un("click",this.handler,this.scope)}this.on("click",this.handler=c,this.scope=a)},onClick:function(a){if(!this.disabled&&this.fireEvent("click",this,a)!==false&&this.parentMenu.fireEvent("itemclick",this,a)!==false){this.handleClick(a)}else{a.stopEvent()}},activate:function(){if(this.disabled){return false}var a=this.container;a.addClass(this.activeClass);this.region=a.getRegion().adjust(2,2,-2,-2);this.fireEvent("activate",this);return true},deactivate:function(){this.container.removeClass(this.activeClass);this.fireEvent("deactivate",this)},shouldDeactivate:function(a){return !this.region||!this.region.contains(a.getPoint())},handleClick:function(a){if(this.hideOnClick){this.parentMenu.hide.defer(this.hideDelay,this.parentMenu,[true])}},expandMenu:function(a){},hideMenu:function(){}});Ext.menu.TextItem=function(a){if(typeof a=="string"){a={text:a}}Ext.menu.TextItem.superclass.constructor.call(this,a)};Ext.extend(Ext.menu.TextItem,Ext.menu.BaseItem,{hideOnClick:false,itemCls:"x-menu-text",onRender:function(){var a=document.createElement("span");a.className=this.itemCls;a.innerHTML=this.text;this.el=a;Ext.menu.TextItem.superclass.onRender.apply(this,arguments)}});Ext.menu.Separator=function(a){Ext.menu.Separator.superclass.constructor.call(this,a)};Ext.extend(Ext.menu.Separator,Ext.menu.BaseItem,{itemCls:"x-menu-sep",hideOnClick:false,onRender:function(a){var c=document.createElement("span");c.className=this.itemCls;c.innerHTML="&#160;";this.el=c;a.addClass("x-menu-sep-li");Ext.menu.Separator.superclass.onRender.apply(this,arguments)}});Ext.menu.Item=function(a){Ext.menu.Item.superclass.constructor.call(this,a);if(this.menu){this.menu=Ext.menu.MenuMgr.get(this.menu)}};Ext.extend(Ext.menu.Item,Ext.menu.BaseItem,{itemCls:"x-menu-item",canActivate:true,showDelay:200,hideDelay:200,ctype:"Ext.menu.Item",onRender:function(c,a){var g=document.createElement("a");g.hideFocus=true;g.unselectable="on";g.href=this.href||"#";if(this.hrefTarget){g.target=this.hrefTarget}g.className=this.itemCls+(this.menu?" x-menu-item-arrow":"")+(this.cls?" "+this.cls:"");g.innerHTML=String.format('<img src="{0}" class="x-menu-item-icon {2}" />{1}',this.icon||Ext.BLANK_IMAGE_URL,this.itemText||this.text,this.iconCls||"");this.el=g;Ext.menu.Item.superclass.onRender.call(this,c,a)},setText:function(a){this.text=a;if(this.rendered){this.el.update(String.format('<img src="{0}" class="x-menu-item-icon {2}">{1}',this.icon||Ext.BLANK_IMAGE_URL,this.text,this.iconCls||""));this.parentMenu.autoWidth()}},setIconClass:function(a){var c=this.iconCls;this.iconCls=a;if(this.rendered){this.el.child("img.x-menu-item-icon").replaceClass(c,this.iconCls)}},beforeDestroy:function(){if(this.menu){this.menu.destroy()}Ext.menu.Item.superclass.beforeDestroy.call(this)},handleClick:function(a){if(!this.href){a.stopEvent()}Ext.menu.Item.superclass.handleClick.apply(this,arguments)},activate:function(a){if(Ext.menu.Item.superclass.activate.apply(this,arguments)){this.focus();if(a){this.expandMenu()}}return true},shouldDeactivate:function(a){if(Ext.menu.Item.superclass.shouldDeactivate.call(this,a)){if(this.menu&&this.menu.isVisible()){return !this.menu.getEl().getRegion().contains(a.getPoint())}return true}return false},deactivate:function(){Ext.menu.Item.superclass.deactivate.apply(this,arguments);this.hideMenu()},expandMenu:function(a){if(!this.disabled&&this.menu){clearTimeout(this.hideTimer);delete this.hideTimer;if(!this.menu.isVisible()&&!this.showTimer){this.showTimer=this.deferExpand.defer(this.showDelay,this,[a])}else{if(this.menu.isVisible()&&a){this.menu.tryActivate(0,1)}}}},deferExpand:function(a){delete this.showTimer;this.menu.show(this.container,this.parentMenu.subMenuAlign||"tl-tr?",this.parentMenu);if(a){this.menu.tryActivate(0,1)}},hideMenu:function(){clearTimeout(this.showTimer);delete this.showTimer;if(!this.hideTimer&&this.menu&&this.menu.isVisible()){this.hideTimer=this.deferHide.defer(this.hideDelay,this)}},deferHide:function(){delete this.hideTimer;if(this.menu.over){this.parentMenu.setActiveItem(this,false)}else{this.menu.hide()}}});Ext.menu.CheckItem=function(a){Ext.menu.CheckItem.superclass.constructor.call(this,a);this.addEvents("beforecheckchange","checkchange");if(this.checkHandler){this.on("checkchange",this.checkHandler,this.scope)}Ext.menu.MenuMgr.registerCheckable(this)};Ext.extend(Ext.menu.CheckItem,Ext.menu.Item,{itemCls:"x-menu-item x-menu-check-item",groupClass:"x-menu-group-item",checked:false,ctype:"Ext.menu.CheckItem",onRender:function(a){Ext.menu.CheckItem.superclass.onRender.apply(this,arguments);if(this.group){this.el.addClass(this.groupClass)}if(this.checked){this.checked=false;this.setChecked(true,true)}},destroy:function(){Ext.menu.MenuMgr.unregisterCheckable(this);Ext.menu.CheckItem.superclass.destroy.apply(this,arguments)},setChecked:function(c,a){if(this.checked!=c&&this.fireEvent("beforecheckchange",this,c)!==false){if(this.container){this.container[c?"addClass":"removeClass"]("x-menu-item-checked")}this.checked=c;if(a!==true){this.fireEvent("checkchange",this,c)}}},handleClick:function(a){if(!this.disabled&&!(this.checked&&this.group)){this.setChecked(!this.checked)}Ext.menu.CheckItem.superclass.handleClick.apply(this,arguments)}});Ext.menu.Adapter=function(c,a){Ext.menu.Adapter.superclass.constructor.call(this,a);this.component=c};Ext.extend(Ext.menu.Adapter,Ext.menu.BaseItem,{canActivate:true,onRender:function(c,a){this.component.render(c);this.el=this.component.getEl()},activate:function(){if(this.disabled){return false}this.component.focus();this.fireEvent("activate",this);return true},deactivate:function(){this.fireEvent("deactivate",this)},disable:function(){this.component.disable();Ext.menu.Adapter.superclass.disable.call(this)},enable:function(){this.component.enable();Ext.menu.Adapter.superclass.enable.call(this)}});Ext.menu.DateItem=function(a){Ext.menu.DateItem.superclass.constructor.call(this,new Ext.DatePicker(a),a);this.picker=this.component;this.picker.purgeListeners();this.addEvents("select");this.picker.on("render",function(c){c.getEl().swallowEvent("click");c.container.addClass("x-menu-date-item")});this.picker.on("select",this.onSelect,this)};Ext.extend(Ext.menu.DateItem,Ext.menu.Adapter,{onSelect:function(c,a){this.fireEvent("select",this,a,c);Ext.menu.DateItem.superclass.handleClick.call(this)}});Ext.menu.ColorItem=function(a){Ext.menu.ColorItem.superclass.constructor.call(this,new Ext.ColorPalette(a),a);this.palette=this.component;this.palette.purgeListeners();this.relayEvents(this.palette,["select"]);if(this.selectHandler){this.on("select",this.selectHandler,this.scope)}};Ext.extend(Ext.menu.ColorItem,Ext.menu.Adapter);Ext.menu.DateMenu=function(a){Ext.menu.DateMenu.superclass.constructor.call(this,a);this.plain=true;var c=new Ext.menu.DateItem(a);this.add(c);this.picker=c.picker;this.relayEvents(c,["select"]);this.on("beforeshow",function(){if(this.picker){this.picker.hideMonthPicker(true)}},this)};Ext.extend(Ext.menu.DateMenu,Ext.menu.Menu,{cls:"x-date-menu",beforeDestroy:function(){this.picker.destroy()}});Ext.menu.ColorMenu=function(a){Ext.menu.ColorMenu.superclass.constructor.call(this,a);this.plain=true;var c=new Ext.menu.ColorItem(a);this.add(c);this.palette=c.palette;this.relayEvents(c,["select"])};Ext.extend(Ext.menu.ColorMenu,Ext.menu.Menu,{beforeDestroy:function(){this.palette.destroy()}});Ext.form.Field=Ext.extend(Ext.BoxComponent,{invalidClass:"x-form-invalid",invalidText:"The value in this field is invalid",focusClass:"x-form-focus",validationEvent:"keyup",validateOnBlur:true,validationDelay:250,defaultAutoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off"},fieldClass:"x-form-field",msgTarget:"qtip",msgFx:"normal",readOnly:false,disabled:false,isFormField:true,hasFocus:false,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this);this.addEvents("focus","blur","specialkey","change","invalid","valid")},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:this.name||this.id||""},onRender:function(g,a){Ext.form.Field.superclass.onRender.call(this,g,a);if(!this.el){var c=this.getAutoCreate();if(!c.name){c.name=this.name||this.id}if(this.inputType){c.type=this.inputType}this.el=g.createChild(c,a)}var h=this.el.dom.type;if(h){if(h=="password"){h="text"}this.el.addClass("x-form-"+h)}if(this.readOnly){this.el.dom.readOnly=true}if(this.tabIndex!==undefined){this.el.dom.setAttribute("tabIndex",this.tabIndex)}this.el.addClass([this.fieldClass,this.cls])},initValue:function(){if(this.value!==undefined){this.setValue(this.value)}else{if(!Ext.isEmpty(this.el.dom.value)&&this.el.dom.value!=this.emptyText){this.setValue(this.el.dom.value)}}this.originalValue=this.getValue()},isDirty:function(){if(this.disabled||!this.rendered){return false}return String(this.getValue())!==String(this.originalValue)},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this);this.initEvents();this.initValue()},fireKey:function(a){if(a.isSpecialKey()){this.fireEvent("specialkey",this,a)}},reset:function(){this.setValue(this.originalValue);this.clearInvalid()},initEvents:function(){this.el.on(Ext.isIE||(Ext.isWebKit&&!Ext.isSafari2)?"keydown":"keypress",this.fireKey,this);this.el.on("focus",this.onFocus,this);var a=this.inEditor&&Ext.isWindows&&Ext.isGecko?{buffer:10}:null;this.el.on("blur",this.onBlur,this,a)},onFocus:function(){if(this.focusClass){this.el.addClass(this.focusClass)}if(!this.hasFocus){this.hasFocus=true;this.startValue=this.getValue();this.fireEvent("focus",this)}},beforeBlur:Ext.emptyFn,onBlur:function(){this.beforeBlur();if(this.focusClass){this.el.removeClass(this.focusClass)}this.hasFocus=false;if(this.validationEvent!==false&&this.validateOnBlur&&this.validationEvent!="blur"){this.validate()}var a=this.getValue();if(String(a)!==String(this.startValue)){this.fireEvent("change",this,a,this.startValue)}this.fireEvent("blur",this)},isValid:function(a){if(this.disabled){return true}var g=this.preventMark;this.preventMark=a===true;var c=this.validateValue(this.processValue(this.getRawValue()));this.preventMark=g;return c},validate:function(){if(this.disabled||this.validateValue(this.processValue(this.getRawValue()))){this.clearInvalid();return true}return false},processValue:function(a){return a},validateValue:function(a){return true},markInvalid:function(g){if(!this.rendered||this.preventMark){return}this.el.addClass(this.invalidClass);g=g||this.invalidText;switch(this.msgTarget){case"qtip":this.el.dom.qtip=g;this.el.dom.qclass="x-form-invalid-tip";if(Ext.QuickTips){Ext.QuickTips.enable()}break;case"title":this.el.dom.title=g;break;case"under":if(!this.errorEl){var c=this.getErrorCt();if(!c){this.el.dom.title=g;break}this.errorEl=c.createChild({cls:"x-form-invalid-msg"});this.errorEl.setWidth(c.getWidth(true)-20)}this.errorEl.update(g);Ext.form.Field.msgFx[this.msgFx].show(this.errorEl,this);break;case"side":if(!this.errorIcon){var c=this.getErrorCt();if(!c){this.el.dom.title=g;break}this.errorIcon=c.createChild({cls:"x-form-invalid-icon"})}this.alignErrorIcon();this.errorIcon.dom.qtip=g;this.errorIcon.dom.qclass="x-form-invalid-tip";this.errorIcon.show();this.on("resize",this.alignErrorIcon,this);break;default:var a=Ext.getDom(this.msgTarget);a.innerHTML=g;a.style.display=this.msgDisplay;break}this.fireEvent("invalid",this,g)},getErrorCt:function(){return this.el.findParent(".x-form-element",5,true)||this.el.findParent(".x-form-field-wrap",5,true)},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,"tl-tr",[2,0])},clearInvalid:function(){if(!this.rendered||this.preventMark){return}this.el.removeClass(this.invalidClass);switch(this.msgTarget){case"qtip":this.el.dom.qtip="";break;case"title":this.el.dom.title="";break;case"under":if(this.errorEl){Ext.form.Field.msgFx[this.msgFx].hide(this.errorEl,this)}break;case"side":if(this.errorIcon){this.errorIcon.dom.qtip="";this.errorIcon.hide();this.un("resize",this.alignErrorIcon,this)}break;default:var a=Ext.getDom(this.msgTarget);a.innerHTML="";a.style.display="none";break}this.fireEvent("valid",this)},getRawValue:function(){var a=this.rendered?this.el.getValue():Ext.value(this.value,"");if(a===this.emptyText){a=""}return a},getValue:function(){if(!this.rendered){return this.value}var a=this.el.getValue();if(a===this.emptyText||a===undefined){a=""}return a},setRawValue:function(a){return this.el.dom.value=(a===null||a===undefined?"":a)},setValue:function(a){this.value=a;if(this.rendered){this.el.dom.value=(a===null||a===undefined?"":a);this.validate()}},adjustSize:function(a,g){var c=Ext.form.Field.superclass.adjustSize.call(this,a,g);c.width=this.adjustWidth(this.el.dom.tagName,c.width);return c},adjustWidth:function(a,c){a=a.toLowerCase();if(typeof c=="number"&&!Ext.isWebKit){if(Ext.isIE&&(a=="input"||a=="textarea")){if(a=="input"&&!Ext.isStrict){return this.inEditor?c:c-3}if(a=="input"&&Ext.isStrict){return c-(Ext.isIE6?4:1)}if(a=="textarea"&&Ext.isStrict){return c-2}}else{if(Ext.isOpera&&Ext.isStrict){if(a=="input"){return c+2}if(a=="textarea"){return c-2}}}}return c}});Ext.form.MessageTargets={qtip:{mark:function(a){this.el.dom.qtip=msg;this.el.dom.qclass="x-form-invalid-tip";if(Ext.QuickTips){Ext.QuickTips.enable()}},clear:function(a){this.el.dom.qtip=""}},title:{mark:function(a){this.el.dom.title=msg},clear:function(a){this.el.dom.title=""}},under:{mark:function(c){if(!this.errorEl){var a=this.getErrorCt();if(!a){this.el.dom.title=msg;return}this.errorEl=a.createChild({cls:"x-form-invalid-msg"});this.errorEl.setWidth(a.getWidth(true)-20)}this.errorEl.update(msg);Ext.form.Field.msgFx[this.msgFx].show(this.errorEl,this)},clear:function(a){if(this.errorEl){Ext.form.Field.msgFx[this.msgFx].hide(this.errorEl,this)}else{this.el.dom.title=""}}},side:{mark:function(c){if(!this.errorIcon){var a=this.getErrorCt();if(!a){this.el.dom.title=msg;return}this.errorIcon=a.createChild({cls:"x-form-invalid-icon"})}this.alignErrorIcon();this.errorIcon.dom.qtip=msg;this.errorIcon.dom.qclass="x-form-invalid-tip";this.errorIcon.show();this.on("resize",this.alignErrorIcon,this)},clear:function(a){if(this.errorIcon){this.errorIcon.dom.qtip="";this.errorIcon.hide();this.un("resize",this.alignErrorIcon,this)}else{this.el.dom.title=""}}},around:{mark:function(a){},clear:function(a){}}};Ext.form.Field.msgFx={normal:{show:function(a,c){a.setDisplayed("block")},hide:function(a,c){a.setDisplayed(false).update("")}},slide:{show:function(a,c){a.slideIn("t",{stopFx:true})},hide:function(a,c){a.slideOut("t",{stopFx:true,useDisplay:true})}},slideRight:{show:function(a,c){a.fixDisplay();a.alignTo(c.el,"tl-tr");a.slideIn("l",{stopFx:true})},hide:function(a,c){a.slideOut("l",{stopFx:true,useDisplay:true})}}};Ext.reg("field",Ext.form.Field);Ext.form.TextField=Ext.extend(Ext.form.Field,{grow:false,growMin:30,growMax:800,vtype:null,maskRe:null,disableKeyFilter:false,allowBlank:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",selectOnFocus:false,blankText:"This field is required",validator:null,regex:null,regexText:"",emptyText:null,emptyClass:"x-form-empty-field",initComponent:function(){Ext.form.TextField.superclass.initComponent.call(this);this.addEvents("autosize","keydown","keyup","keypress")},initEvents:function(){Ext.form.TextField.superclass.initEvents.call(this);if(this.validationEvent=="keyup"){this.validationTask=new Ext.util.DelayedTask(this.validate,this);this.el.on("keyup",this.filterValidation,this)}else{if(this.validationEvent!==false){this.el.on(this.validationEvent,this.validate,this,{buffer:this.validationDelay})}}if(this.selectOnFocus||this.emptyText){this.on("focus",this.preFocus,this);this.el.on("mousedown",function(){if(!this.hasFocus){this.el.on("mouseup",function(a){a.preventDefault()},this,{single:true})}},this);if(this.emptyText){this.on("blur",this.postBlur,this);this.applyEmptyText()}}if(this.maskRe||(this.vtype&&this.disableKeyFilter!==true&&(this.maskRe=Ext.form.VTypes[this.vtype+"Mask"]))){this.el.on("keypress",this.filterKeys,this)}if(this.grow){this.el.on("keyup",this.onKeyUpBuffered,this,{buffer:50});this.el.on("click",this.autoSize,this)}if(this.enableKeyEvents){this.el.on("keyup",this.onKeyUp,this);this.el.on("keydown",this.onKeyDown,this);this.el.on("keypress",this.onKeyPress,this)}},processValue:function(a){if(this.stripCharsRe){var c=a.replace(this.stripCharsRe,"");if(c!==a){this.setRawValue(c);return c}}return a},filterValidation:function(a){if(!a.isNavKeyPress()){this.validationTask.delay(this.validationDelay)}},onDisable:function(){Ext.form.TextField.superclass.onDisable.call(this);if(Ext.isIE){this.el.dom.unselectable="on"}},onEnable:function(){Ext.form.TextField.superclass.onEnable.call(this);if(Ext.isIE){this.el.dom.unselectable=""}},onKeyUpBuffered:function(a){if(!a.isNavKeyPress()){this.autoSize()}},onKeyUp:function(a){this.fireEvent("keyup",this,a)},onKeyDown:function(a){this.fireEvent("keydown",this,a)},onKeyPress:function(a){this.fireEvent("keypress",this,a)},reset:function(){Ext.form.TextField.superclass.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){if(this.rendered&&this.emptyText&&this.getRawValue().length<1&&!this.hasFocus){this.setRawValue(this.emptyText);this.el.addClass(this.emptyClass)}},preFocus:function(){var a=this.el;if(this.emptyText){if(a.dom.value==this.emptyText){this.setRawValue("")}a.removeClass(this.emptyClass)}if(this.selectOnFocus){(function(){a.dom.select()}).defer(this.inEditor&&Ext.isIE?50:0)}},postBlur:function(){this.applyEmptyText()},filterKeys:function(a){if(a.ctrlKey||a.isSpecialKey()){return}if(!this.maskRe.test(String.fromCharCode(a.getCharCode()))){a.stopEvent()}},setValue:function(a){if(this.emptyText&&this.el&&!Ext.isEmpty(a)){this.el.removeClass(this.emptyClass)}Ext.form.TextField.superclass.setValue.apply(this,arguments);this.applyEmptyText();this.autoSize()},validateValue:function(a){if(a.length<1||a===this.emptyText){if(this.allowBlank){this.clearInvalid();return true}else{this.markInvalid(this.blankText);return false}}if(a.length<this.minLength){this.markInvalid(String.format(this.minLengthText,this.minLength));return false}if(a.length>this.maxLength){this.markInvalid(String.format(this.maxLengthText,this.maxLength));return false}if(this.vtype){var g=Ext.form.VTypes;if(!g[this.vtype](a,this)){this.markInvalid(this.vtypeText||g[this.vtype+"Text"]);return false}}if(typeof this.validator=="function"){var c=this.validator(a);if(c!==true){this.markInvalid(c);return false}}if(this.regex&&!this.regex.test(a)){this.markInvalid(this.regexText);return false}return true},selectText:function(k,a){var g=this.getRawValue();var h=false;if(g.length>0){k=k===undefined?0:k;a=a===undefined?g.length:a;var j=this.el.dom;if(j.setSelectionRange){j.setSelectionRange(k,a)}else{if(j.createTextRange){var c=j.createTextRange();c.moveStart("character",k);c.moveEnd("character",a-g.length);c.select()}}h=Ext.isGecko||Ext.isOpera}else{h=true}if(h){this.focus()}},autoSize:function(){if(!this.grow||!this.rendered){return}if(!this.metrics){this.metrics=Ext.util.TextMetrics.createInstance(this.el)}var g=this.el;var c=g.dom.value;var h=document.createElement("div");h.appendChild(document.createTextNode(c));c=h.innerHTML;Ext.removeNode(h);h=null;c+="&#160;";var a=Math.min(this.growMax,Math.max(this.metrics.getWidth(c)+10,this.growMin));this.el.setWidth(a);this.fireEvent("autosize",this,a)}});Ext.reg("textfield",Ext.form.TextField);Ext.form.TriggerField=Ext.extend(Ext.form.TextField,{defaultAutoCreate:{tag:"input",type:"text",size:"16",autocomplete:"off"},hideTrigger:false,autoSize:Ext.emptyFn,monitorTab:true,deferHeight:true,mimicing:false,actionMode:"wrap",onResize:function(a,c){Ext.form.TriggerField.superclass.onResize.call(this,a,c);if(typeof a=="number"){this.el.setWidth(this.adjustWidth("input",a-this.trigger.getWidth()))}this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())},adjustSize:Ext.BoxComponent.prototype.adjustSize,getResizeEl:function(){return this.wrap},getPositionEl:function(){return this.wrap},alignErrorIcon:function(){if(this.wrap){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])}},onRender:function(c,a){Ext.form.TriggerField.superclass.onRender.call(this,c,a);this.wrap=this.el.wrap({cls:"x-form-field-wrap"});this.trigger=this.wrap.createChild(this.triggerConfig||{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.triggerClass});if(this.hideTrigger){this.trigger.setDisplayed(false)}this.initTrigger();if(!this.width){this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())}},afterRender:function(){Ext.form.TriggerField.superclass.afterRender.call(this);var a;if(Ext.isIE&&!this.hideTrigger&&this.el.getY()!=(a=this.trigger.getY())){this.el.position();this.el.setY(a)}},initTrigger:function(){this.trigger.on("click",this.onTriggerClick,this,{preventDefault:true});this.trigger.addClassOnOver("x-form-trigger-over");this.trigger.addClassOnClick("x-form-trigger-click")},onDestroy:function(){if(this.trigger){this.trigger.removeAllListeners();this.trigger.remove()}if(this.wrap){this.wrap.remove()}if(this.mimicing){Ext.get(Ext.isIE?document.body:document).un("mousedown",this.mimicBlur,this)}Ext.form.TriggerField.superclass.onDestroy.call(this)},onFocus:function(){Ext.form.TriggerField.superclass.onFocus.call(this);if(!this.mimicing){this.wrap.addClass("x-trigger-wrap-focus");this.mimicing=true;Ext.get(Ext.isIE?document.body:document).on("mousedown",this.mimicBlur,this,{delay:10});if(this.monitorTab){this.el.on("keydown",this.checkTab,this)}}},checkTab:function(a){if(a.getKey()==a.TAB){this.triggerBlur()}},onBlur:function(){},mimicBlur:function(a){if(!this.wrap.contains(a.target)&&this.validateBlur(a)){this.triggerBlur()}},triggerBlur:function(){this.mimicing=false;Ext.get(Ext.isIE?document.body:document).un("mousedown",this.mimicBlur,this);if(this.monitorTab&&this.el){this.el.un("keydown",this.checkTab,this)}Ext.form.TriggerField.superclass.onBlur.call(this);if(this.wrap){this.wrap.removeClass("x-trigger-wrap-focus")}},beforeBlur:Ext.emptyFn,validateBlur:function(a){return true},onTriggerClick:Ext.emptyFn});Ext.form.TwinTriggerField=Ext.extend(Ext.form.TriggerField,{initComponent:function(){Ext.form.TwinTriggerField.superclass.initComponent.call(this);this.triggerConfig={tag:"span",cls:"x-form-twin-triggers",cn:[{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.trigger1Class},{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.trigger2Class}]}},getTrigger:function(a){return this.triggers[a]},initTrigger:function(){var a=this.trigger.select(".x-form-trigger",true);this.wrap.setStyle("overflow","hidden");var c=this;a.each(function(h,k,g){h.hide=function(){var l=c.wrap.getWidth();this.dom.style.display="none";c.el.setWidth(l-c.trigger.getWidth())};h.show=function(){var l=c.wrap.getWidth();this.dom.style.display="";c.el.setWidth(l-c.trigger.getWidth())};var j="Trigger"+(g+1);if(this["hide"+j]){h.dom.style.display="none"}h.on("click",this["on"+j+"Click"],this,{preventDefault:true});h.addClassOnOver("x-form-trigger-over");h.addClassOnClick("x-form-trigger-click")},this);this.triggers=a.elements},onDestroy:function(){Ext.destroy.apply(this,this.triggers);Ext.form.TwinTriggerField.superclass.onDestroy.call(this)},onTrigger1Click:Ext.emptyFn,onTrigger2Click:Ext.emptyFn});Ext.reg("trigger",Ext.form.TriggerField);Ext.form.TextArea=Ext.extend(Ext.form.TextField,{growMin:60,growMax:1000,growAppend:"&#160;\n&#160;",growPad:Ext.isWebKit?-6:0,enterIsSpecial:false,preventScrollbars:false,onRender:function(c,a){if(!this.el){this.defaultAutoCreate={tag:"textarea",style:"width:100px;height:60px;",autocomplete:"off"}}Ext.form.TextArea.superclass.onRender.call(this,c,a);if(this.grow){this.textSizeEl=Ext.DomHelper.append(document.body,{tag:"pre",cls:"x-form-grow-sizer"});if(this.preventScrollbars){this.el.setStyle("overflow","hidden")}this.el.setHeight(this.growMin)}},onDestroy:function(){if(this.textSizeEl){Ext.removeNode(this.textSizeEl)}Ext.form.TextArea.superclass.onDestroy.call(this)},fireKey:function(a){if(a.isSpecialKey()&&(this.enterIsSpecial||(a.getKey()!=a.ENTER||a.hasModifier()))){this.fireEvent("specialkey",this,a)}},onKeyUp:function(a){if(!a.isNavKeyPress()||a.getKey()==a.ENTER){this.autoSize()}Ext.form.TextArea.superclass.onKeyUp.call(this,a)},autoSize:function(){if(!this.grow||!this.textSizeEl){return}var g=this.el;var a=g.dom.value;var j=this.textSizeEl;j.innerHTML="";j.appendChild(document.createTextNode(a));a=j.innerHTML;Ext.fly(j).setWidth(this.el.getWidth());if(a.length<1){a="&#160;&#160;"}else{a+=this.growAppend;if(Ext.isIE){a=a.replace(/\n/g,"<br />")}}j.innerHTML=a;var c=Math.min(this.growMax,Math.max(j.offsetHeight,this.growMin)+this.growPad);if(c!=this.lastHeight){this.lastHeight=c;this.el.setHeight(c);this.fireEvent("autosize",this,c)}}});Ext.reg("textarea",Ext.form.TextArea);Ext.form.NumberField=Ext.extend(Ext.form.TextField,{fieldClass:"x-form-field x-form-num-field",allowDecimals:true,decimalSeparator:".",decimalPrecision:2,allowNegative:true,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",baseChars:"0123456789",initEvents:function(){var a=this.baseChars+"";if(this.allowDecimals){a+=this.decimalSeparator}if(this.allowNegative){a+="-"}this.maskRe=new RegExp("["+Ext.escapeRe(a)+"]");Ext.form.NumberField.superclass.initEvents.call(this)},validateValue:function(c){if(!Ext.form.NumberField.superclass.validateValue.call(this,c)){return false}if(c.length<1){return true}c=String(c).replace(this.decimalSeparator,".");if(isNaN(c)){this.markInvalid(String.format(this.nanText,c));return false}var a=this.parseValue(c);if(a<this.minValue){this.markInvalid(String.format(this.minText,this.minValue));return false}if(a>this.maxValue){this.markInvalid(String.format(this.maxText,this.maxValue));return false}return true},getValue:function(){return this.fixPrecision(this.parseValue(Ext.form.NumberField.superclass.getValue.call(this)))},setValue:function(a){a=typeof a=="number"?a:parseFloat(String(a).replace(this.decimalSeparator,"."));a=isNaN(a)?"":String(a).replace(".",this.decimalSeparator);Ext.form.NumberField.superclass.setValue.call(this,a)},parseValue:function(a){a=parseFloat(String(a).replace(this.decimalSeparator,"."));return isNaN(a)?"":a},fixPrecision:function(c){var a=isNaN(c);if(!this.allowDecimals||this.decimalPrecision==-1||a||!c){return a?"":c}return parseFloat(parseFloat(c).toFixed(this.decimalPrecision))},beforeBlur:function(){var a=this.parseValue(this.getRawValue());if(!Ext.isEmpty(a)){this.setValue(this.fixPrecision(a))}}});Ext.reg("numberfield",Ext.form.NumberField);Ext.form.DateField=Ext.extend(Ext.form.TriggerField,{format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerClass:"x-form-date-trigger",showToday:true,defaultAutoCreate:{tag:"input",type:"text",size:"10",autocomplete:"off"},initComponent:function(){Ext.form.DateField.superclass.initComponent.call(this);this.addEvents("select");if(typeof this.minValue=="string"){this.minValue=this.parseDate(this.minValue)}if(typeof this.maxValue=="string"){this.maxValue=this.parseDate(this.maxValue)}this.disabledDatesRE=null;this.initDisabledDays()},initDisabledDays:function(){if(this.disabledDates){var a=this.disabledDates;var g="(?:";for(var c=0;c<a.length;c++){g+=a[c];if(c!=a.length-1){g+="|"}}this.disabledDatesRE=new RegExp(g+")")}},setDisabledDates:function(a){this.disabledDates=a;this.initDisabledDays();if(this.menu){this.menu.picker.setDisabledDates(this.disabledDatesRE)}},setDisabledDays:function(a){this.disabledDays=a;if(this.menu){this.menu.picker.setDisabledDays(a)}},setMinValue:function(a){this.minValue=(typeof a=="string"?this.parseDate(a):a);if(this.menu){this.menu.picker.setMinDate(this.minValue)}},setMaxValue:function(a){this.maxValue=(typeof a=="string"?this.parseDate(a):a);if(this.menu){this.menu.picker.setMaxDate(this.maxValue)}},validateValue:function(j){j=this.formatDate(j);if(!Ext.form.DateField.superclass.validateValue.call(this,j)){return false}if(j.length<1){return true}var g=j;j=this.parseDate(j);if(!j){this.markInvalid(String.format(this.invalidText,g,this.format));return false}var k=j.getTime();if(this.minValue&&k<this.minValue.getTime()){this.markInvalid(String.format(this.minText,this.formatDate(this.minValue)));return false}if(this.maxValue&&k>this.maxValue.getTime()){this.markInvalid(String.format(this.maxText,this.formatDate(this.maxValue)));return false}if(this.disabledDays){var a=j.getDay();for(var c=0;c<this.disabledDays.length;c++){if(a===this.disabledDays[c]){this.markInvalid(this.disabledDaysText);return false}}}var h=this.formatDate(j);if(this.disabledDatesRE&&this.disabledDatesRE.test(h)){this.markInvalid(String.format(this.disabledDatesText,h));return false}return true},validateBlur:function(){return !this.menu||!this.menu.isVisible()},getValue:function(){return this.parseDate(Ext.form.DateField.superclass.getValue.call(this))||""},setValue:function(a){Ext.form.DateField.superclass.setValue.call(this,this.formatDate(this.parseDate(a)))},parseDate:function(h){if(!h||Ext.isDate(h)){return h}var c=Date.parseDate(h,this.format);if(!c&&this.altFormats){if(!this.altFormatsArray){this.altFormatsArray=this.altFormats.split("|")}for(var g=0,a=this.altFormatsArray.length;g<a&&!c;g++){c=Date.parseDate(h,this.altFormatsArray[g])}}return c},onDestroy:function(){if(this.menu){this.menu.destroy()}Ext.form.DateField.superclass.onDestroy.call(this)},formatDate:function(a){return Ext.isDate(a)?a.dateFormat(this.format):a},menuListeners:{select:function(a,c){this.setValue(c);this.fireEvent("select",this,c)},show:function(){this.onFocus()},hide:function(){this.focus.defer(10,this);var a=this.menuListeners;this.menu.un("select",a.select,this);this.menu.un("show",a.show,this);this.menu.un("hide",a.hide,this)}},onTriggerClick:function(){if(this.disabled){return}if(this.menu==null){this.menu=new Ext.menu.DateMenu()}Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.disabledDatesRE,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,showToday:this.showToday,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,this.formatDate(this.maxValue))});this.menu.on(Ext.apply({},this.menuListeners,{scope:this}));this.menu.picker.setValue(this.getValue()||new Date());this.menu.show(this.el,"tl-bl?")},beforeBlur:function(){var a=this.parseDate(this.getRawValue());if(a){this.setValue(a)}}});Ext.reg("datefield",Ext.form.DateField);Ext.form.ComboBox=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"24",autocomplete:"off"},listClass:"",selectedClass:"x-combo-selected",triggerClass:"x-form-arrow-trigger",shadow:"sides",listAlign:"tl-bl?",maxHeight:300,minHeight:90,triggerAction:"query",minChars:4,typeAhead:false,queryDelay:500,pageSize:0,selectOnFocus:false,queryParam:"query",loadingText:"Loading...",resizable:false,handleHeight:8,editable:true,allQuery:"",mode:"remote",minListWidth:70,forceSelection:false,typeAheadDelay:250,lazyInit:true,initComponent:function(){Ext.form.ComboBox.superclass.initComponent.call(this);this.addEvents("expand","collapse","beforeselect","select","beforequery");if(this.transform){this.allowDomMove=false;var g=Ext.getDom(this.transform);if(!this.hiddenName){this.hiddenName=g.name}if(!this.store){this.mode="local";var l=[],h=g.options;for(var c=0,a=h.length;c<a;c++){var k=h[c],j=(k.hasAttribute?k.hasAttribute("value"):k.getAttributeNode("value").specified)?k.value:k.text;if(k.selected){this.value=j}l.push([j,k.text])}this.store=new Ext.data.SimpleStore({id:0,fields:["value","text"],data:l});this.valueField="value";this.displayField="text"}g.name=Ext.id();if(!this.lazyRender){this.target=true;this.el=Ext.DomHelper.insertBefore(g,this.autoCreate||this.defaultAutoCreate);Ext.removeNode(g);this.render(this.el.parentNode)}else{Ext.removeNode(g)}}else{if(Ext.isArray(this.store)){if(Ext.isArray(this.store[0])){this.store=new Ext.data.SimpleStore({fields:["value","text"],data:this.store});this.valueField="value"}else{this.store=new Ext.data.SimpleStore({fields:["text"],data:this.store,expandData:true});this.valueField="text"}this.displayField="text";this.mode="local"}}this.selectedIndex=-1;if(this.mode=="local"){if(this.initialConfig.queryDelay===undefined){this.queryDelay=10}if(this.initialConfig.minChars===undefined){this.minChars=0}}},onRender:function(c,a){Ext.form.ComboBox.superclass.onRender.call(this,c,a);if(this.hiddenName){this.hiddenField=this.el.insertSibling({tag:"input",type:"hidden",name:this.hiddenName,id:(this.hiddenId||this.hiddenName)},"before",true);this.el.dom.removeAttribute("name")}if(Ext.isGecko){this.el.dom.setAttribute("autocomplete","off")}if(!this.lazyInit){this.initList()}else{this.on("focus",this.initList,this,{single:true})}if(!this.editable){this.editable=true;this.setEditable(false)}},initValue:function(){Ext.form.ComboBox.superclass.initValue.call(this);if(this.hiddenField){this.hiddenField.value=this.hiddenValue!==undefined?this.hiddenValue:this.value!==undefined?this.value:""}},initList:function(){if(!this.list){var a="x-combo-list";this.list=new Ext.Layer({shadow:this.shadow,cls:[a,this.listClass].join(" "),constrain:false});var c=this.listWidth||Math.max(this.wrap.getWidth(),this.minListWidth);this.list.setWidth(c);this.list.swallowEvent("mousewheel");this.assetHeight=0;if(this.title){this.header=this.list.createChild({cls:a+"-hd",html:this.title});this.assetHeight+=this.header.getHeight()}this.innerList=this.list.createChild({cls:a+"-inner"});this.innerList.on("mouseover",this.onViewOver,this);this.innerList.on("mousemove",this.onViewMove,this);this.innerList.setWidth(c-this.list.getFrameWidth("lr"));if(this.pageSize){this.footer=this.list.createChild({cls:a+"-ft"});this.pageTb=new Ext.PagingToolbar({store:this.store,pageSize:this.pageSize,renderTo:this.footer});this.assetHeight+=this.footer.getHeight()}if(!this.tpl){this.tpl='<tpl for="."><div class="'+a+'-item">{'+this.displayField+"}</div></tpl>"}this.view=new Ext.DataView({applyTo:this.innerList,tpl:this.tpl,singleSelect:true,selectedClass:this.selectedClass,itemSelector:this.itemSelector||"."+a+"-item"});this.view.on("click",this.onViewClick,this);this.bindStore(this.store,true);if(this.resizable){this.resizer=new Ext.Resizable(this.list,{pinned:true,handles:"se"});this.resizer.on("resize",function(k,g,j){this.maxHeight=j-this.handleHeight-this.list.getFrameWidth("tb")-this.assetHeight;this.listWidth=g;this.innerList.setWidth(g-this.list.getFrameWidth("lr"));this.restrictHeight()},this);this[this.pageSize?"footer":"innerList"].setStyle("margin-bottom",this.handleHeight+"px")}}},getStore:function(){return this.store},bindStore:function(a,c){if(this.store&&!c){this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("loadexception",this.collapse,this);if(!a){this.store=null;if(this.view){this.view.setStore(null)}}}if(a){this.store=Ext.StoreMgr.lookup(a);this.store.on("beforeload",this.onBeforeLoad,this);this.store.on("load",this.onLoad,this);this.store.on("loadexception",this.collapse,this);if(this.view){this.view.setStore(a)}}},initEvents:function(){Ext.form.ComboBox.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{up:function(a){this.inKeyMode=true;this.selectPrev()},down:function(a){if(!this.isExpanded()){this.onTriggerClick()}else{this.inKeyMode=true;this.selectNext()}},enter:function(a){this.onViewClick();this.delayedCheck=true;this.unsetDelayCheck.defer(10,this)},esc:function(a){this.collapse()},tab:function(a){this.onViewClick(false);return true},scope:this,doRelay:function(g,c,a){if(a=="down"||this.scope.isExpanded()){return Ext.KeyNav.prototype.doRelay.apply(this,arguments)}return true},forceKeyDown:true});this.queryDelay=Math.max(this.queryDelay||10,this.mode=="local"?10:250);this.dqTask=new Ext.util.DelayedTask(this.initQuery,this);if(this.typeAhead){this.taTask=new Ext.util.DelayedTask(this.onTypeAhead,this)}if(this.editable!==false&&!this.enableKeyEvents){this.el.on("keyup",this.onKeyUp,this)}},onDestroy:function(){if(this.dqTask){this.dqTask.cancel();this.dqTask=null}this.bindStore(null);Ext.destroy(this.resizer,this.view,this.pageTb,this.innerList,this.list);Ext.form.ComboBox.superclass.onDestroy.call(this)},unsetDelayCheck:function(){delete this.delayedCheck},fireKey:function(c){var a=function(g){if(g.isNavKeyPress()&&!this.isExpanded()&&!this.delayedCheck){this.fireEvent("specialkey",this,g)}};if(this.inEditor&&Ext.isWebKit&&c.getKey()==c.TAB){a.defer(10,this,[new Ext.EventObjectImpl(c)])}else{a.call(this,c)}},onResize:function(a,c){Ext.form.ComboBox.superclass.onResize.apply(this,arguments);if(this.list&&this.listWidth===undefined){var g=Math.max(a,this.minListWidth);this.list.setWidth(g);this.innerList.setWidth(g-this.list.getFrameWidth("lr"))}},onEnable:function(){Ext.form.ComboBox.superclass.onEnable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=false}},onDisable:function(){Ext.form.ComboBox.superclass.onDisable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=true}},setEditable:function(a){if(a==this.editable){return}this.editable=a;if(!a){this.el.dom.setAttribute("readOnly",true);this.el.on("mousedown",this.onTriggerClick,this);this.el.addClass("x-combo-noedit")}else{this.el.dom.removeAttribute("readOnly");this.el.un("mousedown",this.onTriggerClick,this);this.el.removeClass("x-combo-noedit")}},onBeforeLoad:function(){if(!this.hasFocus){return}this.innerList.update(this.loadingText?'<div class="loading-indicator">'+this.loadingText+"</div>":"");this.restrictHeight();this.selectedIndex=-1},onLoad:function(){if(!this.hasFocus){return}if(this.store.getCount()>0){this.expand();this.restrictHeight();if(this.lastQuery==this.allQuery){if(this.editable){this.el.dom.select()}if(!this.selectByValue(this.value,true)){this.select(0,true)}}else{this.selectNext();if(this.typeAhead&&this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE){this.taTask.delay(this.typeAheadDelay)}}}else{this.onEmptyResults()}},onTypeAhead:function(){if(this.store.getCount()>0){var c=this.store.getAt(0);var g=c.data[this.displayField];var a=g.length;var h=this.getRawValue().length;if(h!=a){this.setRawValue(g);this.selectText(h,g.length)}}},onSelect:function(a,c){if(this.fireEvent("beforeselect",this,a,c)!==false){this.setValue(a.data[this.valueField||this.displayField]);this.collapse();this.fireEvent("select",this,a,c)}},getName:function(){var a=this.hiddenField;return a&&a.name?a.name:this.hiddenName||Ext.form.ComboBox.superclass.getName.call(this)},getValue:function(){if(this.valueField){return typeof this.value!="undefined"?this.value:""}else{return Ext.form.ComboBox.superclass.getValue.call(this)}},clearValue:function(){if(this.hiddenField){this.hiddenField.value=""}this.setRawValue("");this.lastSelectionText="";this.applyEmptyText();this.value=""},setValue:function(a){var g=a;if(this.valueField){var c=this.findRecord(this.valueField,a);if(c){g=c.data[this.displayField]}else{if(this.valueNotFoundText!==undefined){g=this.valueNotFoundText}}}this.lastSelectionText=g;if(this.hiddenField){this.hiddenField.value=a}Ext.form.ComboBox.superclass.setValue.call(this,g);this.value=a},findRecord:function(g,c){var a;if(this.store.getCount()>0){this.store.each(function(h){if(h.data[g]==c){a=h;return false}})}return a},onViewMove:function(c,a){this.inKeyMode=false},onViewOver:function(h,c){if(this.inKeyMode){return}var g=this.view.findItemFromChild(c);if(g){var a=this.view.indexOf(g);this.select(a,false)}},onViewClick:function(c){var a=this.view.getSelectedIndexes()[0];var g=this.store.getAt(a);if(g){this.onSelect(g,a)}if(c!==false){this.el.focus()}},restrictHeight:function(){this.innerList.dom.style.height="";var c=this.innerList.dom;var k=this.list.getFrameWidth("tb")+(this.resizable?this.handleHeight:0)+this.assetHeight;var g=Math.max(c.clientHeight,c.offsetHeight,c.scrollHeight);var a=this.getPosition()[1]-Ext.getBody().getScroll().top;var l=Ext.lib.Dom.getViewHeight()-a-this.getSize().height;var j=Math.max(a,l,this.minHeight||0)-this.list.shadowOffset-k-5;g=Math.min(g,j,this.maxHeight);this.innerList.setHeight(g);this.list.beginUpdate();this.list.setHeight(g+k);this.list.alignTo(this.wrap,this.listAlign);this.list.endUpdate()},onEmptyResults:function(){this.collapse()},isExpanded:function(){return this.list&&this.list.isVisible()},selectByValue:function(a,g){if(a!==undefined&&a!==null){var c=this.findRecord(this.valueField||this.displayField,a);if(c){this.select(this.store.indexOf(c),g);return true}}return false},select:function(a,g){this.selectedIndex=a;this.view.select(a);if(g!==false){var c=this.view.getNode(a);if(c){this.innerList.scrollChildIntoView(c,false)}}},selectNext:function(){var a=this.store.getCount();if(a>0){if(this.selectedIndex==-1){this.select(0)}else{if(this.selectedIndex<a-1){this.select(this.selectedIndex+1)}}}},selectPrev:function(){var a=this.store.getCount();if(a>0){if(this.selectedIndex==-1){this.select(0)}else{if(this.selectedIndex!=0){this.select(this.selectedIndex-1)}}}},onKeyUp:function(c){var a=c.getKey();if(this.editable!==false&&(a==c.BACKSPACE||!c.isSpecialKey())){this.lastKey=a;this.dqTask.delay(this.queryDelay)}Ext.form.ComboBox.superclass.onKeyUp.call(this,c)},validateBlur:function(){return !this.list||!this.list.isVisible()},initQuery:function(){this.doQuery(this.getRawValue())},beforeBlur:function(){var c=this.getRawValue();if(this.forceSelection){if(c.length>0&&c!=this.emptyText){this.el.dom.value=this.lastSelectionText===undefined?"":this.lastSelectionText;this.applyEmptyText()}else{this.clearValue()}}else{var a=this.findRecord(this.displayField,c);if(a){c=a.get(this.valueField||this.displayField)}this.setValue(c)}},doQuery:function(g,c){if(g===undefined||g===null){g=""}var a={query:g,forceAll:c,combo:this,cancel:false};if(this.fireEvent("beforequery",a)===false||a.cancel){return false}g=a.query;c=a.forceAll;if(c===true||(g.length>=this.minChars)){if(this.lastQuery!==g){this.lastQuery=g;if(this.mode=="local"){this.selectedIndex=-1;if(c){this.store.clearFilter()}else{this.store.filter(this.displayField,g)}this.onLoad()}else{this.store.baseParams[this.queryParam]=g;this.store.load({params:this.getParams(g)});this.expand()}}else{this.selectedIndex=-1;this.onLoad()}}},getParams:function(a){var c={};if(this.pageSize){c.start=0;c.limit=this.pageSize}return c},collapse:function(){if(!this.isExpanded()){return}this.list.hide();Ext.getDoc().un("mousewheel",this.collapseIf,this);Ext.getDoc().un("mousedown",this.collapseIf,this);this.fireEvent("collapse",this)},collapseIf:function(a){if(!a.within(this.wrap)&&!a.within(this.list)){this.collapse()}},expand:function(){if(this.isExpanded()||!this.hasFocus){return}this.list.alignTo(this.wrap,this.listAlign);this.list.show();if(Ext.isGecko2){this.innerList.setOverflow("auto")}Ext.getDoc().on("mousewheel",this.collapseIf,this);Ext.getDoc().on("mousedown",this.collapseIf,this);this.fireEvent("expand",this)},onTriggerClick:function(){if(this.disabled){return}if(this.isExpanded()){this.collapse();this.el.focus()}else{this.onFocus({});if(this.triggerAction=="all"){this.doQuery(this.allQuery,true)}else{this.doQuery(this.getRawValue())}this.el.focus()}}});Ext.reg("combo",Ext.form.ComboBox);Ext.form.Checkbox=Ext.extend(Ext.form.Field,{checkedCls:"x-form-check-checked",focusCls:"x-form-check-focus",overCls:"x-form-check-over",mouseDownCls:"x-form-check-down",tabIndex:0,checked:false,defaultAutoCreate:{tag:"input",type:"checkbox",autocomplete:"off"},actionMode:"wrap",baseCls:"x-form-check",initComponent:function(){Ext.form.Checkbox.superclass.initComponent.call(this);this.addEvents("check")},initEvents:function(){Ext.form.Checkbox.superclass.initEvents.call(this);this.initCheckEvents()},initCheckEvents:function(){this.innerWrap.removeAllListeners();this.innerWrap.addClassOnOver(this.overCls);this.innerWrap.addClassOnClick(this.mouseDownCls);this.innerWrap.on("click",this.onClick,this);this.innerWrap.on("keyup",this.onKeyUp,this)},onRender:function(c,a){Ext.form.Checkbox.superclass.onRender.call(this,c,a);if(this.inputValue!==undefined){this.el.dom.value=this.inputValue}this.el.addClass("x-hidden");this.innerWrap=this.el.wrap({tabIndex:this.tabIndex,cls:this.baseCls+"-wrap-inner"});this.wrap=this.innerWrap.wrap({cls:this.baseCls+"-wrap"});if(this.boxLabel){this.labelEl=this.innerWrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel})}this.imageEl=this.innerWrap.createChild({tag:"img",src:Ext.BLANK_IMAGE_URL,cls:this.baseCls},this.el);if(this.checked){this.setValue(true)}else{this.checked=this.el.dom.checked}this.originalValue=this.checked},afterRender:function(){Ext.form.Checkbox.superclass.afterRender.call(this);this.wrap[this.checked?"addClass":"removeClass"](this.checkedCls)},onDestroy:function(){if(this.rendered){Ext.destroy(this.imageEl,this.labelEl,this.innerWrap,this.wrap)}Ext.form.Checkbox.superclass.onDestroy.call(this)},onFocus:function(a){Ext.form.Checkbox.superclass.onFocus.call(this,a);this.el.addClass(this.focusCls)},onBlur:function(a){Ext.form.Checkbox.superclass.onBlur.call(this,a);this.el.removeClass(this.focusCls)},onResize:function(){Ext.form.Checkbox.superclass.onResize.apply(this,arguments);if(!this.boxLabel&&!this.fieldLabel){this.el.alignTo(this.wrap,"c-c")}},onKeyUp:function(a){if(a.getKey()==Ext.EventObject.SPACE){this.onClick(a)}},onClick:function(a){if(!this.disabled&&!this.readOnly){this.toggleValue()}a.stopEvent()},onEnable:function(){Ext.form.Checkbox.superclass.onEnable.call(this);this.initCheckEvents()},onDisable:function(){Ext.form.Checkbox.superclass.onDisable.call(this);this.innerWrap.removeAllListeners()},toggleValue:function(){this.setValue(!this.checked)},getResizeEl:function(){if(!this.resizeEl){this.resizeEl=Ext.isWebKit?this.wrap:(this.wrap.up(".x-form-element",5)||this.wrap)}return this.resizeEl},getPositionEl:function(){return this.wrap},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,initValue:function(){this.originalValue=this.getValue()},getValue:function(){if(this.rendered){return this.el.dom.checked}return this.checked},setValue:function(a){var c=this.checked;this.checked=(a===true||a==="true"||a=="1"||String(a).toLowerCase()=="on");if(this.rendered){this.el.dom.checked=this.checked;this.el.dom.defaultChecked=this.checked;this.wrap[this.checked?"addClass":"removeClass"](this.checkedCls)}if(c!=this.checked){this.fireEvent("check",this,this.checked);if(this.handler){this.handler.call(this.scope||this,this,this.checked)}}}});Ext.reg("checkbox",Ext.form.Checkbox);Ext.form.CheckboxGroup=Ext.extend(Ext.form.Field,{columns:"auto",vertical:false,allowBlank:true,blankText:"You must select at least one item in this group",defaultType:"checkbox",groupCls:"x-form-check-group",initComponent:function(){this.addEvents("change");Ext.form.CheckboxGroup.superclass.initComponent.call(this)},onRender:function(o,k){if(!this.el){var t={cls:this.groupCls,layout:"column",border:false,renderTo:o};var a={defaultType:this.defaultType,layout:"form",border:false,defaults:{hideLabel:true,anchor:"100%"}};if(this.items[0].items){Ext.apply(t,{layoutConfig:{columns:this.items.length},defaults:this.defaults,items:this.items});for(var j=0,q=this.items.length;j<q;j++){Ext.applyIf(this.items[j],a)}}else{var h,r=[];if(typeof this.columns=="string"){this.columns=this.items.length}if(!Ext.isArray(this.columns)){var p=[];for(var j=0;j<this.columns;j++){p.push((100/this.columns)*0.01)}this.columns=p}h=this.columns.length;for(var j=0;j<h;j++){var c=Ext.apply({items:[]},a);c[this.columns[j]<=1?"columnWidth":"width"]=this.columns[j];if(this.defaults){c.defaults=Ext.apply(c.defaults||{},this.defaults)}r.push(c)}if(this.vertical){var w=Math.ceil(this.items.length/h),s=0;for(var j=0,q=this.items.length;j<q;j++){if(j>0&&j%w==0){s++}if(this.items[j].fieldLabel){this.items[j].hideLabel=false}r[s].items.push(this.items[j])}}else{for(var j=0,q=this.items.length;j<q;j++){var v=j%h;if(this.items[j].fieldLabel){this.items[j].hideLabel=false}r[v].items.push(this.items[j])}}Ext.apply(t,{layoutConfig:{columns:h},items:r})}this.panel=new Ext.Panel(t);this.panel.ownerCt=this;this.el=this.panel.getEl();if(this.forId&&this.itemCls){var g=this.el.up(this.itemCls).child("label",true);if(g){g.setAttribute("htmlFor",this.forId)}}var m=this.panel.findBy(function(l){return l.isFormField},this);this.items=new Ext.util.MixedCollection();this.items.addAll(m)}Ext.form.CheckboxGroup.superclass.onRender.call(this,o,k)},afterRender:function(){Ext.form.CheckboxGroup.superclass.afterRender.call(this);this.items.each(function(a){a.on("check",this.fireChecked,this)},this)},fireChecked:function(){var a=[];this.items.each(function(c){if(c.checked){a.push(c)}});this.fireEvent("change",this,a)},validateValue:function(a){if(!this.allowBlank){var c=true;this.items.each(function(g){if(g.checked){return c=false}},this);if(c){this.markInvalid(this.blankText);return false}}return true},onDestroy:function(){Ext.destroy(this.panel);Ext.form.CheckboxGroup.superclass.onDestroy.call(this)},onDisable:function(){this.items.each(function(a){a.disable()})},onEnable:function(){this.items.each(function(a){a.enable()})},isDirty:function(){if(this.disabled||!this.rendered){return false}var a=false;this.items.each(function(c){if(c.isDirty()){a=true;return false}});return a},onResize:function(a,c){this.panel.setSize(a,c);this.panel.doLayout()},reset:function(){Ext.form.CheckboxGroup.superclass.reset.call(this);this.items.each(function(a){if(a.reset){a.reset()}},this)},initValue:Ext.emptyFn,getValue:Ext.emptyFn,getRawValue:Ext.emptyFn,setValue:Ext.emptyFn,setRawValue:Ext.emptyFn});Ext.reg("checkboxgroup",Ext.form.CheckboxGroup);Ext.form.Radio=Ext.extend(Ext.form.Checkbox,{inputType:"radio",baseCls:"x-form-radio",getGroupValue:function(){var a=this.getParent().child("input[name="+this.el.dom.name+"]:checked",true);return a?a.value:null},getParent:function(){return this.el.up("form")||Ext.getBody()},toggleValue:function(){if(!this.checked){var a=this.getParent().select("input[name="+this.el.dom.name+"]");a.each(function(c){if(c.dom.id==this.id){this.setValue(true)}else{Ext.getCmp(c.dom.id).setValue(false)}},this)}},setValue:function(a){if(typeof a=="boolean"){Ext.form.Radio.superclass.setValue.call(this,a)}else{var c=this.getParent().child("input[name="+this.el.dom.name+"][value="+a+"]",true);if(c&&!c.checked){Ext.getCmp(c.id).toggleValue()}}},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.reg("radio",Ext.form.Radio);Ext.form.RadioGroup=Ext.extend(Ext.form.CheckboxGroup,{allowBlank:true,blankText:"You must select one item in this group",defaultType:"radio",groupCls:"x-form-radio-group",initComponent:function(){this.addEvents("change");Ext.form.RadioGroup.superclass.initComponent.call(this)},fireChecked:function(){if(!this.checkTask){this.checkTask=new Ext.util.DelayedTask(this.bufferChecked,this)}this.checkTask.delay(10)},bufferChecked:function(){var a=null;this.items.each(function(c){if(c.checked){a=c;return false}});this.fireEvent("change",this,a)},onDestroy:function(){if(this.checkTask){this.checkTask.cancel();this.checkTask=null}Ext.form.RadioGroup.superclass.onDestroy.call(this)}});Ext.reg("radiogroup",Ext.form.RadioGroup);Ext.form.Hidden=Ext.extend(Ext.form.Field,{inputType:"hidden",onRender:function(){Ext.form.Hidden.superclass.onRender.apply(this,arguments)},initEvents:function(){this.originalValue=this.getValue()},setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.reg("hidden",Ext.form.Hidden);Ext.form.BasicForm=function(c,a){Ext.apply(this,a);this.items=new Ext.util.MixedCollection(false,function(g){return g.id||(g.id=Ext.id())});this.addEvents("beforeaction","actionfailed","actioncomplete");if(c){this.initEl(c)}Ext.form.BasicForm.superclass.constructor.call(this)};Ext.extend(Ext.form.BasicForm,Ext.util.Observable,{timeout:30,activeAction:null,trackResetOnLoad:false,initEl:function(a){this.el=Ext.get(a);this.id=this.el.id||Ext.id();if(!this.standardSubmit){this.el.on("submit",this.onSubmit,this)}this.el.addClass("x-form")},getEl:function(){return this.el},onSubmit:function(a){a.stopEvent()},destroy:function(){this.items.each(function(a){Ext.destroy(a)});if(this.el){this.el.removeAllListeners();this.el.remove()}this.purgeListeners()},isValid:function(){var a=true;this.items.each(function(c){if(!c.validate()){a=false}});return a},isDirty:function(){var a=false;this.items.each(function(c){if(c.isDirty()){a=true;return false}});return a},doAction:function(c,a){if(typeof c=="string"){c=new Ext.form.Action.ACTION_TYPES[c](this,a)}if(this.fireEvent("beforeaction",this,c)!==false){this.beforeAction(c);c.run.defer(100,c)}return this},submit:function(c){if(this.standardSubmit){var a=this.isValid();if(a){this.el.dom.submit()}return a}this.doAction("submit",c);return this},load:function(a){this.doAction("load",a);return this},updateRecord:function(c){c.beginEdit();var a=c.fields;a.each(function(g){var h=this.findField(g.name);if(h){c.set(g.name,h.getValue())}},this);c.endEdit();return this},loadRecord:function(a){this.setValues(a.data);return this},beforeAction:function(a){var c=a.options;if(c.waitMsg){if(this.waitMsgTarget===true){this.el.mask(c.waitMsg,"x-mask-loading")}else{if(this.waitMsgTarget){this.waitMsgTarget=Ext.get(this.waitMsgTarget);this.waitMsgTarget.mask(c.waitMsg,"x-mask-loading")}else{Ext.MessageBox.wait(c.waitMsg,c.waitTitle||this.waitTitle||"Please Wait...")}}}},afterAction:function(a,g){this.activeAction=null;var c=a.options;if(c.waitMsg){if(this.waitMsgTarget===true){this.el.unmask()}else{if(this.waitMsgTarget){this.waitMsgTarget.unmask()}else{Ext.MessageBox.updateProgress(1);Ext.MessageBox.hide()}}}if(g){if(c.reset){this.reset()}Ext.callback(c.success,c.scope,[this,a]);this.fireEvent("actioncomplete",this,a)}else{Ext.callback(c.failure,c.scope,[this,a]);this.fireEvent("actionfailed",this,a)}},findField:function(c){var a=this.items.get(c);if(!(a&&typeof a=="object")){this.items.each(function(g){if(g.isFormField&&(g.dataIndex==c||g.id==c||g.getName()==c)){a=g;return false}})}return a},markInvalid:function(l){if(Ext.isArray(l)){for(var g=0,a=l.length;g<a;g++){var c=l[g];var h=this.findField(c.id);if(h){h.markInvalid(c.msg)}}}else{var j,k;for(k in l){if(typeof l[k]!="function"&&(j=this.findField(k))){j.markInvalid(l[k])}}}return this},setValues:function(g){if(Ext.isArray(g)){for(var h=0,a=g.length;h<a;h++){var c=g[h];var j=this.findField(c.id);if(j){j.setValue(c.value);if(this.trackResetOnLoad){j.originalValue=j.getValue()}}}}else{var k,l;for(l in g){if(typeof g[l]!="function"&&(k=this.findField(l))){k.setValue(g[l]);if(this.trackResetOnLoad){k.originalValue=k.getValue()}}}}return this},getValues:function(c){var a=Ext.lib.Ajax.serializeForm(this.el.dom);if(c===true){return a}return Ext.urlDecode(a)},clearInvalid:function(){this.items.each(function(a){a.clearInvalid()});return this},reset:function(){this.items.each(function(a){a.reset()});return this},add:function(){this.items.addAll(Array.prototype.slice.call(arguments,0));return this},remove:function(a){this.items.remove(a);return this},render:function(){this.items.each(function(a){if(a.isFormField&&!a.rendered&&document.getElementById(a.id)){a.applyToMarkup(a.id)}});return this},applyToFields:function(a){this.items.each(function(c){Ext.apply(c,a)});return this},applyIfToFields:function(a){this.items.each(function(c){Ext.applyIf(c,a)});return this}});Ext.BasicForm=Ext.form.BasicForm;Ext.FormPanel=Ext.extend(Ext.Panel,{buttonAlign:"center",minButtonWidth:75,labelAlign:"left",monitorValid:false,monitorPoll:200,layout:"form",initComponent:function(){this.form=this.createForm();this.bodyCfg={tag:"form",cls:this.baseCls+"-body",method:this.method||"POST",id:this.formId||Ext.id()};if(this.fileUpload){this.bodyCfg.enctype="multipart/form-data"}Ext.FormPanel.superclass.initComponent.call(this);this.initItems();this.addEvents("clientvalidation");this.relayEvents(this.form,["beforeaction","actionfailed","actioncomplete"])},createForm:function(){var a=Ext.applyIf({listeners:{}},this.initialConfig);return new Ext.form.BasicForm(null,a)},initFields:function(){var g=this.form;var a=this;var c=function(h){if(h.isFormField){g.add(h)}else{if(h.doLayout&&h!=a){Ext.applyIf(h,{labelAlign:h.ownerCt.labelAlign,labelWidth:h.ownerCt.labelWidth,itemCls:h.ownerCt.itemCls});if(h.items){h.items.each(c)}}}};this.items.each(c)},getLayoutTarget:function(){return this.form.el},getForm:function(){return this.form},onRender:function(c,a){this.initFields();Ext.FormPanel.superclass.onRender.call(this,c,a);this.form.initEl(this.body)},beforeDestroy:function(){this.stopMonitoring();Ext.FormPanel.superclass.beforeDestroy.call(this);this.form.items.clear();Ext.destroy(this.form)},initEvents:function(){Ext.FormPanel.superclass.initEvents.call(this);this.items.on("remove",this.onRemove,this);this.items.on("add",this.onAdd,this);if(this.monitorValid){this.startMonitoring()}},onAdd:function(a,g){if(g.isFormField){this.form.add(g)}},onRemove:function(a){if(a.isFormField){Ext.destroy(a.container.up(".x-form-item"));this.form.remove(a)}},startMonitoring:function(){if(!this.validTask){this.validTask=new Ext.util.TaskRunner();this.validTask.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this})}},stopMonitoring:function(){if(this.validTask){this.validTask.stopAll();this.validTask=null}},load:function(){this.form.load.apply(this.form,arguments)},onDisable:function(){Ext.FormPanel.superclass.onDisable.call(this);if(this.form){this.form.items.each(function(){this.disable()})}},onEnable:function(){Ext.FormPanel.superclass.onEnable.call(this);if(this.form){this.form.items.each(function(){this.enable()})}},bindHandler:function(){var h=true;this.form.items.each(function(j){if(!j.isValid(true)){h=false;return false}});if(this.buttons){for(var g=0,a=this.buttons.length;g<a;g++){var c=this.buttons[g];if(c.formBind===true&&c.disabled===h){c.setDisabled(!h)}}}this.fireEvent("clientvalidation",this,h)}});Ext.reg("form",Ext.FormPanel);Ext.form.FormPanel=Ext.FormPanel;Ext.form.FieldSet=Ext.extend(Ext.Panel,{baseCls:"x-fieldset",layout:"form",animCollapse:false,onRender:function(c,a){if(!this.el){this.el=document.createElement("fieldset");this.el.id=this.id;if(this.title||this.header||this.checkboxToggle){this.el.appendChild(document.createElement("legend")).className="x-fieldset-header"}}Ext.form.FieldSet.superclass.onRender.call(this,c,a);if(this.checkboxToggle){var g=typeof this.checkboxToggle=="object"?this.checkboxToggle:{tag:"input",type:"checkbox",name:this.checkboxName||this.id+"-checkbox"};this.checkbox=this.header.insertFirst(g);this.checkbox.dom.checked=!this.collapsed;this.checkbox.on("click",this.onCheckClick,this)}},onCollapse:function(a,c){if(this.checkbox){this.checkbox.dom.checked=false}Ext.form.FieldSet.superclass.onCollapse.call(this,a,c)},onExpand:function(a,c){if(this.checkbox){this.checkbox.dom.checked=true}Ext.form.FieldSet.superclass.onExpand.call(this,a,c)},onCheckClick:function(){this[this.checkbox.dom.checked?"expand":"collapse"]()},beforeDestroy:function(){if(this.checkbox){this.checkbox.un("click",this.onCheckClick,this)}Ext.form.FieldSet.superclass.beforeDestroy.call(this)}});Ext.reg("fieldset",Ext.form.FieldSet);Ext.form.HtmlEditor=Ext.extend(Ext.form.Field,{enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",defaultValue:Ext.isOpera?"&nbsp;":"&#8203;",actionMode:"wrap",validationEvent:false,deferHeight:true,initialized:false,activated:false,sourceEditMode:false,onFocus:Ext.emptyFn,iframePad:3,hideMode:"offsets",defaultAutoCreate:{tag:"textarea",style:"width:500px;height:300px;",autocomplete:"off"},initComponent:function(){this.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange")},createFontOptions:function(){var h=[],c=this.fontFamilies,g,k;for(var j=0,a=c.length;j<a;j++){g=c[j];k=g.toLowerCase();h.push('<option value="',k,'" style="font-family:',g,';"',(this.defaultFont==k?' selected="true">':">"),g,"</option>")}return h.join("")},createToolbar:function(h){var a=Ext.QuickTips&&Ext.QuickTips.isEnabled();function g(l,j,k){return{itemId:l,cls:"x-btn-icon x-edit-"+l,enableToggle:j!==false,scope:h,handler:k||h.relayBtnCmd,clickEvent:"mousedown",tooltip:a?h.buttonTips[l]||undefined:undefined,tabIndex:-1}}var c=new Ext.Toolbar({renderTo:this.wrap.dom.firstChild});c.el.on("click",function(j){j.preventDefault()});if(this.enableFont&&!Ext.isSafari2){this.fontSelect=c.el.createChild({tag:"select",cls:"x-font-select",html:this.createFontOptions()});this.fontSelect.on("change",function(){var j=this.fontSelect.dom.value;this.relayCmd("fontname",j);this.deferFocus()},this);c.add(this.fontSelect.dom,"-")}if(this.enableFormat){c.add(g("bold"),g("italic"),g("underline"))}if(this.enableFontSize){c.add("-",g("increasefontsize",false,this.adjustFont),g("decreasefontsize",false,this.adjustFont))}if(this.enableColors){c.add("-",{itemId:"forecolor",cls:"x-btn-icon x-edit-forecolor",clickEvent:"mousedown",tooltip:a?h.buttonTips.forecolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,selectHandler:function(k,j){this.execCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+j:j);this.deferFocus()},scope:this,clickEvent:"mousedown"})},{itemId:"backcolor",cls:"x-btn-icon x-edit-backcolor",clickEvent:"mousedown",tooltip:a?h.buttonTips.backcolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({focus:Ext.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,selectHandler:function(k,j){if(Ext.isGecko){this.execCmd("useCSS",false);this.execCmd("hilitecolor",j);this.execCmd("useCSS",true);this.deferFocus()}else{this.execCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE?"#"+j:j);this.deferFocus()}},scope:this,clickEvent:"mousedown"})})}if(this.enableAlignments){c.add("-",g("justifyleft"),g("justifycenter"),g("justifyright"))}if(!Ext.isSafari2){if(this.enableLinks){c.add("-",g("createlink",false,this.createLink))}if(this.enableLists){c.add("-",g("insertorderedlist"),g("insertunorderedlist"))}if(this.enableSourceEdit){c.add("-",g("sourceedit",true,function(j){this.toggleSourceEdit(j.pressed)}))}}this.tb=c},getDocMarkup:function(){return'<html><head><style type="text/css">body{border:0;margin:0;padding:3px;height:98%;cursor:text;}</style></head><body></body></html>'},getEditorBody:function(){return this.doc.body||this.doc.documentElement},getDoc:function(){return Ext.isIE?this.getWin().document:(this.iframe.contentDocument||this.getWin().document)},getWin:function(){return Ext.isIE?this.iframe.contentWindow:window.frames[this.iframe.name]},onRender:function(c,a){Ext.form.HtmlEditor.superclass.onRender.call(this,c,a);this.el.dom.style.border="0 none";this.el.dom.setAttribute("tabIndex",-1);this.el.addClass("x-hidden");if(Ext.isIE){this.el.applyStyles("margin-top:-1px;margin-bottom:-1px;")}this.wrap=this.el.wrap({cls:"x-html-editor-wrap",cn:{cls:"x-html-editor-tb"}});this.createToolbar(this);this.tb.items.each(function(j){if(j.itemId!="sourceedit"){j.disable()}});var g=document.createElement("iframe");g.name=Ext.id();g.frameBorder="0";g.src=Ext.isIE?Ext.SSL_SECURE_URL:"javascript:;";this.wrap.dom.appendChild(g);this.iframe=g;this.monitorTask=Ext.TaskMgr.start({run:this.checkDesignMode,scope:this,interval:100});if(!this.width){var h=this.el.getSize();this.setSize(h.width,this.height||h.height)}},initFrame:function(){Ext.TaskMgr.stop(this.monitorTask);this.doc=this.getDoc();this.win=this.getWin();this.doc.open();this.doc.write(this.getDocMarkup());this.doc.close();var a={run:function(){if(this.doc.body||this.doc.readyState=="complete"){Ext.TaskMgr.stop(a);this.doc.designMode="on";this.initEditor.defer(10,this)}},interval:10,duration:10000,scope:this};Ext.TaskMgr.start(a)},checkDesignMode:function(){if(this.wrap&&this.wrap.dom.offsetWidth){var a=this.getDoc();if(!a){return}if(!a.editorInitialized||String(a.designMode).toLowerCase()!="on"){this.initFrame()}}},onResize:function(c,g){Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments);if(this.el&&this.iframe){if(typeof c=="number"){var j=c-this.wrap.getFrameWidth("lr");this.el.setWidth(this.adjustWidth("textarea",j));this.iframe.style.width=Math.max(j,0)+"px"}if(typeof g=="number"){var a=g-this.wrap.getFrameWidth("tb")-this.tb.el.getHeight();this.el.setHeight(this.adjustWidth("textarea",a));this.iframe.style.height=Math.max(a,0)+"px";if(this.doc){this.getEditorBody().style.height=Math.max((a-(this.iframePad*2)),0)+"px"}}}},toggleSourceEdit:function(a){if(a===undefined){a=!this.sourceEditMode}this.sourceEditMode=a===true;var g=this.tb.items.get("sourceedit");if(g.pressed!==this.sourceEditMode){g.toggle(this.sourceEditMode);return}if(this.sourceEditMode){this.tb.items.each(function(h){if(h.itemId!="sourceedit"){h.disable()}});this.syncValue();this.iframe.className="x-hidden";this.el.removeClass("x-hidden");this.el.dom.removeAttribute("tabIndex");this.el.focus()}else{if(this.initialized){this.tb.items.each(function(h){h.enable()})}this.pushValue();this.iframe.className="";this.el.addClass("x-hidden");this.el.dom.setAttribute("tabIndex",-1);this.deferFocus()}var c=this.lastSize;if(c){delete this.lastSize;this.setSize(c)}this.fireEvent("editmodechange",this,this.sourceEditMode)},createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);if(a&&a!="http://"){this.relayCmd("createlink",a)}},adjustSize:Ext.BoxComponent.prototype.adjustSize,getResizeEl:function(){return this.wrap},getPositionEl:function(){return this.wrap},initEvents:function(){this.originalValue=this.getValue()},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,setValue:function(a){Ext.form.HtmlEditor.superclass.setValue.call(this,a);this.pushValue()},cleanHtml:function(a){a=String(a);if(a.length>5){if(Ext.isWebKit){a=a.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,"")}}if(a==this.defaultValue){a=""}return a},syncValue:function(){if(this.initialized){var h=this.getEditorBody();var g=h.innerHTML;if(Ext.isWebKit){var c=h.getAttribute("style");var a=c.match(/text-align:(.*?);/i);if(a&&a[1]){g='<div style="'+a[0]+'">'+g+"</div>"}}g=this.cleanHtml(g);if(this.fireEvent("beforesync",this,g)!==false){this.el.dom.value=g;this.fireEvent("sync",this,g)}}},getValue:function(){this[this.sourceEditMode?"pushValue":"syncValue"]();return Ext.form.HtmlEditor.superclass.getValue.call(this)},pushValue:function(){if(this.initialized){var a=this.el.dom.value;if(!this.activated&&a.length<1){a=this.defaultValue}if(this.fireEvent("beforepush",this,a)!==false){this.getEditorBody().innerHTML=a;if(Ext.isGecko){var g=this.doc,c=g.designMode.toLowerCase();g.designMode=c.toggle("on","off");g.designMode=c}this.fireEvent("push",this,a)}}},deferFocus:function(){this.focus.defer(10,this)},focus:function(){if(this.win&&!this.sourceEditMode){this.win.focus()}else{this.el.focus()}},initEditor:function(){try{var c=this.getEditorBody();var a=this.el.getStyles("font-size","font-family","background-image","background-repeat");a["background-attachment"]="fixed";c.bgProperties="fixed";Ext.DomHelper.applyStyles(c,a);if(this.doc){try{Ext.EventManager.removeAll(this.doc)}catch(g){}}this.doc=this.getDoc();Ext.EventManager.on(this.doc,{mousedown:this.onEditorEvent,dblclick:this.onEditorEvent,click:this.onEditorEvent,keyup:this.onEditorEvent,buffer:100,scope:this});if(Ext.isGecko){Ext.EventManager.on(this.doc,"keypress",this.applyCommand,this)}if(Ext.isIE||Ext.isWebKit||Ext.isOpera){Ext.EventManager.on(this.doc,"keydown",this.fixKeys,this)}this.initialized=true;this.fireEvent("initialize",this);this.doc.editorInitialized=true;this.pushValue()}catch(g){}},onDestroy:function(){if(this.monitorTask){Ext.TaskMgr.stop(this.monitorTask)}if(this.rendered){Ext.destroy(this.tb);if(this.wrap){this.wrap.dom.innerHTML="";this.wrap.remove()}}if(this.el){this.el.removeAllListeners();this.el.remove()}if(this.doc){try{Ext.EventManager.removeAll(this.doc);for(var c in this.doc){delete this.doc[c]}}catch(a){}}this.purgeListeners()},onFirstFocus:function(){this.activated=true;this.tb.items.each(function(h){h.enable()});if(Ext.isGecko){this.win.focus();var a=this.win.getSelection();if(!a.focusNode||a.focusNode.nodeType!=3){var c=a.getRangeAt(0);c.selectNodeContents(this.getEditorBody());c.collapse(true);this.deferFocus()}try{this.execCmd("useCSS",true);this.execCmd("styleWithCSS",false)}catch(g){}}this.fireEvent("activate",this)},adjustFont:function(c){var g=c.itemId=="increasefontsize"?1:-1;var a=parseInt(this.doc.queryCommandValue("FontSize")||2,10);if((Ext.isWebKit&&!Ext.isSafari2)||Ext.isAir){if(a<=10){a=1+g}else{if(a<=13){a=2+g}else{if(a<=16){a=3+g}else{if(a<=18){a=4+g}else{if(a<=24){a=5+g}else{a=6+g}}}}}a=a.constrain(1,6)}else{if(Ext.isSafari){g*=2}a=Math.max(1,a+g)+(Ext.isSafari?"px":0)}this.execCmd("FontSize",a)},onEditorEvent:function(a){this.updateToolbar()},updateToolbar:function(){if(!this.activated){this.onFirstFocus();return}var c=this.tb.items.map,g=this.doc;if(this.enableFont&&!Ext.isSafari2){var a=(this.doc.queryCommandValue("FontName")||this.defaultFont).toLowerCase();if(a!=this.fontSelect.dom.value){this.fontSelect.dom.value=a}}if(this.enableFormat){c.bold.toggle(g.queryCommandState("bold"));c.italic.toggle(g.queryCommandState("italic"));c.underline.toggle(g.queryCommandState("underline"))}if(this.enableAlignments){c.justifyleft.toggle(g.queryCommandState("justifyleft"));c.justifycenter.toggle(g.queryCommandState("justifycenter"));c.justifyright.toggle(g.queryCommandState("justifyright"))}if(!Ext.isSafari2&&this.enableLists){c.insertorderedlist.toggle(g.queryCommandState("insertorderedlist"));c.insertunorderedlist.toggle(g.queryCommandState("insertunorderedlist"))}Ext.menu.MenuMgr.hideAll();this.syncValue()},relayBtnCmd:function(a){this.relayCmd(a.itemId)},relayCmd:function(c,a){(function(){this.focus();this.execCmd(c,a);this.updateToolbar()}).defer(10,this)},execCmd:function(c,a){this.doc.execCommand(c,false,a===undefined?null:a);this.syncValue()},applyCommand:function(g){if(g.ctrlKey){var h=g.getCharCode(),a;if(h>0){h=String.fromCharCode(h);switch(h){case"b":a="bold";break;case"i":a="italic";break;case"u":a="underline";break}if(a){this.win.focus();this.execCmd(a);this.deferFocus();g.preventDefault()}}}},insertAtCursor:function(c){if(!this.activated){return}if(Ext.isIE){this.win.focus();var a=this.doc.selection.createRange();if(a){a.collapse(true);a.pasteHTML(c);this.syncValue();this.deferFocus()}}else{if(Ext.isGecko||Ext.isOpera){this.win.focus();this.execCmd("InsertHTML",c);this.deferFocus()}else{if(Ext.isWebKit){this.execCmd("InsertText",c);this.deferFocus()}}}},fixKeys:function(){if(Ext.isIE){return function(h){var a=h.getKey(),c;if(a==h.TAB){h.stopEvent();c=this.doc.selection.createRange();if(c){c.collapse(true);c.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;");this.deferFocus()}}else{if(a==h.ENTER){c=this.doc.selection.createRange();if(c){var g=c.parentElement();if(!g||g.tagName.toLowerCase()!="li"){h.stopEvent();c.pasteHTML("<br />");c.collapse(false);c.select()}}}}}}else{if(Ext.isOpera){return function(c){var a=c.getKey();if(a==c.TAB){c.stopEvent();this.win.focus();this.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;");this.deferFocus()}}}else{if(Ext.isWebKit){return function(c){var a=c.getKey();if(a==c.TAB){c.stopEvent();this.execCmd("InsertText","\t");this.deferFocus()}}}}}}(),getToolbar:function(){return this.tb},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}}});Ext.reg("htmleditor",Ext.form.HtmlEditor);Ext.form.TimeField=Ext.extend(Ext.form.ComboBox,{minValue:null,maxValue:null,minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H",increment:15,mode:"local",triggerAction:"all",typeAhead:false,initDate:"1/1/2008",initComponent:function(){Ext.form.TimeField.superclass.initComponent.call(this);if(typeof this.minValue=="string"){this.minValue=this.parseDate(this.minValue)}if(typeof this.maxValue=="string"){this.maxValue=this.parseDate(this.maxValue)}if(!this.store){var c=this.parseDate(this.minValue);if(!c){c=new Date(this.initDate).clearTime()}var a=this.parseDate(this.maxValue);if(!a){a=new Date(this.initDate).clearTime().add("mi",(24*60)-1)}var g=[];while(c<=a){g.push([c.dateFormat(this.format)]);c=c.add("mi",this.increment)}this.store=new Ext.data.SimpleStore({fields:["text"],data:g});this.displayField="text"}},getValue:function(){var a=Ext.form.TimeField.superclass.getValue.call(this);return this.formatDate(this.parseDate(a))||""},setValue:function(a){Ext.form.TimeField.superclass.setValue.call(this,this.formatDate(this.parseDate(a)))},validateValue:Ext.form.DateField.prototype.validateValue,parseDate:Ext.form.DateField.prototype.parseDate,formatDate:Ext.form.DateField.prototype.formatDate,beforeBlur:function(){var a=this.parseDate(this.getRawValue());if(a){this.setValue(a.dateFormat(this.format))}Ext.form.TimeField.superclass.beforeBlur.call(this)}});Ext.reg("timefield",Ext.form.TimeField);Ext.form.Label=Ext.extend(Ext.BoxComponent,{onRender:function(c,a){if(!this.el){this.el=document.createElement("label");this.el.id=this.getId();this.el.innerHTML=this.text?Ext.util.Format.htmlEncode(this.text):(this.html||"");if(this.forId){this.el.setAttribute("for",this.forId)}}Ext.form.Label.superclass.onRender.call(this,c,a)},setText:function(a,c){var g=c===false;this[!g?"text":"html"]=a;delete this[g?"text":"html"];if(this.rendered){this.el.dom.innerHTML=c!==false?Ext.util.Format.htmlEncode(a):a}return this}});Ext.reg("label",Ext.form.Label);Ext.form.Action=function(c,a){this.form=c;this.options=a||{}};Ext.form.Action.CLIENT_INVALID="client";Ext.form.Action.SERVER_INVALID="server";Ext.form.Action.CONNECT_FAILURE="connect";Ext.form.Action.LOAD_FAILURE="load";Ext.form.Action.prototype={type:"default",run:function(a){},success:function(a){},handleResponse:function(a){},failure:function(a){this.response=a;this.failureType=Ext.form.Action.CONNECT_FAILURE;this.form.afterAction(this,false)},processResponse:function(a){this.response=a;if(!a.responseText&&!a.responseXML){return true}this.result=this.handleResponse(a);return this.result},getUrl:function(g){var a=this.options.url||this.form.url||this.form.el.dom.action;if(g){var c=this.getParams();if(c){a+=(a.indexOf("?")!=-1?"&":"?")+c}}return a},getMethod:function(){return(this.options.method||this.form.method||this.form.el.dom.method||"POST").toUpperCase()},getParams:function(){var a=this.form.baseParams;var c=this.options.params;if(c){if(typeof c=="object"){c=Ext.urlEncode(Ext.applyIf(c,a))}else{if(typeof c=="string"&&a){c+="&"+Ext.urlEncode(a)}}}else{if(a){c=Ext.urlEncode(a)}}return c},createCallback:function(a){var a=a||{};return{success:this.success,failure:this.failure,scope:this,timeout:(a.timeout*1000)||(this.form.timeout*1000),upload:this.form.fileUpload?this.success:undefined}}};Ext.form.Action.Submit=function(c,a){Ext.form.Action.Submit.superclass.constructor.call(this,c,a)};Ext.extend(Ext.form.Action.Submit,Ext.form.Action,{type:"submit",run:function(){var c=this.options;var g=this.getMethod();var a=g=="GET";if(c.clientValidation===false||this.form.isValid()){Ext.Ajax.request(Ext.apply(this.createCallback(c),{form:this.form.el.dom,url:this.getUrl(a),method:g,headers:c.headers,params:!a?this.getParams():null,isUpload:this.form.fileUpload}))}else{if(c.clientValidation!==false){this.failureType=Ext.form.Action.CLIENT_INVALID;this.form.afterAction(this,false)}}},success:function(c){var a=this.processResponse(c);if(a===true||a.success){this.form.afterAction(this,true);return}if(a.errors){this.form.markInvalid(a.errors);this.failureType=Ext.form.Action.SERVER_INVALID}this.form.afterAction(this,false)},handleResponse:function(g){if(this.form.errorReader){var c=this.form.errorReader.read(g);var k=[];if(c.records){for(var h=0,a=c.records.length;h<a;h++){var j=c.records[h];k[h]=j.data}}if(k.length<1){k=null}return{success:c.success,errors:k}}return Ext.decode(g.responseText)}});Ext.form.Action.Load=function(c,a){Ext.form.Action.Load.superclass.constructor.call(this,c,a);this.reader=this.form.reader};Ext.extend(Ext.form.Action.Load,Ext.form.Action,{type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(this.options),{method:this.getMethod(),url:this.getUrl(false),headers:this.options.headers,params:this.getParams()}))},success:function(c){var a=this.processResponse(c);if(a===true||!a.success||!a.data){this.failureType=Ext.form.Action.LOAD_FAILURE;this.form.afterAction(this,false);return}this.form.clearInvalid();this.form.setValues(a.data);this.form.afterAction(this,true)},handleResponse:function(c){if(this.form.reader){var a=this.form.reader.read(c);var g=a.records&&a.records[0]?a.records[0].data:null;return{success:a.success,data:g}}return Ext.decode(c.responseText)}});Ext.form.Action.ACTION_TYPES={load:Ext.form.Action.Load,submit:Ext.form.Action.Submit};Ext.form.VTypes=function(){var g=/^[a-zA-Z_]+$/;var h=/^[a-zA-Z0-9_]+$/;var c=/^(\w+)([-+.][\w]+)*@(\w[-\w]*\.){1,5}([A-Za-z]){2,4}$/;var a=/(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return{email:function(j){return c.test(j)},emailText:'This field should be an e-mail address in the format "user@domain.com"',emailMask:/[a-z0-9_\.\-@]/i,url:function(j){return a.test(j)},urlText:'This field should be a URL in the format "http://www.domain.com"',alpha:function(j){return g.test(j)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(j){return h.test(j)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}();Ext.grid.GridPanel=Ext.extend(Ext.Panel,{ddText:"{0} selected row{1}",minColumnWidth:25,trackMouseOver:true,enableDragDrop:false,enableColumnMove:true,enableColumnHide:true,enableHdMenu:true,stripeRows:false,autoExpandColumn:false,autoExpandMin:50,autoExpandMax:1000,view:null,loadMask:false,deferRowRender:true,rendered:false,viewReady:false,stateEvents:["columnmove","columnresize","sortchange"],initComponent:function(){Ext.grid.GridPanel.superclass.initComponent.call(this);this.autoScroll=false;this.autoWidth=false;if(Ext.isArray(this.columns)){this.colModel=new Ext.grid.ColumnModel(this.columns);delete this.columns}if(this.ds){this.store=this.ds;delete this.ds}if(this.cm){this.colModel=this.cm;delete this.cm}if(this.sm){this.selModel=this.sm;delete this.sm}this.store=Ext.StoreMgr.lookup(this.store);this.addEvents("click","dblclick","contextmenu","mousedown","mouseup","mouseover","mouseout","keypress","keydown","cellmousedown","rowmousedown","headermousedown","cellclick","celldblclick","rowclick","rowdblclick","headerclick","headerdblclick","rowcontextmenu","cellcontextmenu","headercontextmenu","bodyscroll","columnresize","columnmove","sortchange")},onRender:function(h,a){Ext.grid.GridPanel.superclass.onRender.apply(this,arguments);var j=this.body;this.el.addClass("x-grid-panel");var g=this.getView();g.init(this);j.on("mousedown",this.onMouseDown,this);j.on("click",this.onClick,this);j.on("dblclick",this.onDblClick,this);j.on("contextmenu",this.onContextMenu,this);j.on("keydown",this.onKeyDown,this);this.relayEvents(j,["mousedown","mouseup","mouseover","mouseout","keypress"]);this.getSelectionModel().init(this);this.view.render()},initEvents:function(){Ext.grid.GridPanel.superclass.initEvents.call(this);if(this.loadMask){this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({store:this.store},this.loadMask))}},initStateEvents:function(){Ext.grid.GridPanel.superclass.initStateEvents.call(this);this.colModel.on("hiddenchange",this.saveState,this,{delay:100})},applyState:function(l){var g=this.colModel;var k=l.columns;if(k){for(var h=0,a=k.length;h<a;h++){var j=k[h];var o=g.getColumnById(j.id);if(o){o.hidden=j.hidden;o.width=j.width;var m=g.getIndexById(j.id);if(m!=h){g.moveColumn(m,h)}}}}if(l.sort){this.store[this.store.remoteSort?"setDefaultSort":"sort"](l.sort.field,l.sort.direction)}delete l.columns;delete l.sort;Ext.grid.GridPanel.superclass.applyState.call(this,l)},getState:function(){var h={columns:[]};for(var g=0,j;j=this.colModel.config[g];g++){h.columns[g]={id:j.id,width:j.width};if(j.hidden){h.columns[g].hidden=true}}var a=this.store.getSortState();if(a){h.sort=a}return h},afterRender:function(){Ext.grid.GridPanel.superclass.afterRender.call(this);this.view.layout();if(this.deferRowRender){this.view.afterRender.defer(10,this.view)}else{this.view.afterRender()}this.viewReady=true},reconfigure:function(a,c){if(this.loadMask){this.loadMask.destroy();this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({},{store:a},this.initialConfig.loadMask))}this.view.bind(a,c);this.store=a;this.colModel=c;if(this.rendered){this.view.refresh(true)}},onKeyDown:function(a){this.fireEvent("keydown",a)},onDestroy:function(){if(this.rendered){var a=this.body;a.removeAllListeners();a.update("");Ext.destroy(this.view,this.loadMask)}Ext.destroy(this.colModel,this.selModel);Ext.grid.GridPanel.superclass.onDestroy.call(this)},processEvent:function(g,j){this.fireEvent(g,j);var h=j.getTarget();var c=this.view;var l=c.findHeaderIndex(h);if(l!==false){this.fireEvent("header"+g,this,l,j)}else{var k=c.findRowIndex(h);var a=c.findCellIndex(h);if(k!==false){this.fireEvent("row"+g,this,k,j);if(a!==false){this.fireEvent("cell"+g,this,k,a,j)}}}},onClick:function(a){this.processEvent("click",a)},onMouseDown:function(a){this.processEvent("mousedown",a)},onContextMenu:function(c,a){this.processEvent("contextmenu",c)},onDblClick:function(a){this.processEvent("dblclick",a)},walkCells:function(p,g,c,j,o){var m=this.colModel,k=m.getColumnCount();var a=this.store,l=a.getCount(),h=true;if(c<0){if(g<0){p--;h=false}while(p>=0){if(!h){g=k-1}h=false;while(g>=0){if(j.call(o||this,p,g,m)===true){return[p,g]}g--}p--}}else{if(g>=k){p++;h=false}while(p<l){if(!h){g=0}h=false;while(g<k){if(j.call(o||this,p,g,m)===true){return[p,g]}g++}p++}}return null},onResize:function(){Ext.grid.GridPanel.superclass.onResize.apply(this,arguments);if(this.viewReady){this.view.layout()}},getGridEl:function(){return this.body},stopEditing:Ext.emptyFn,getSelectionModel:function(){if(!this.selModel){this.selModel=new Ext.grid.RowSelectionModel(this.disableSelection?{selectRow:Ext.emptyFn}:null)}return this.selModel},getStore:function(){return this.store},getColumnModel:function(){return this.colModel},getView:function(){if(!this.view){this.view=new Ext.grid.GridView(this.viewConfig)}return this.view},getDragDropText:function(){var a=this.selModel.getCount();return String.format(this.ddText,a,a==1?"":"s")}});Ext.reg("grid",Ext.grid.GridPanel);Ext.grid.GridView=function(a){Ext.apply(this,a);this.addEvents("beforerowremoved","beforerowsinserted","beforerefresh","rowremoved","rowsinserted","rowupdated","refresh");Ext.grid.GridView.superclass.constructor.call(this)};Ext.extend(Ext.grid.GridView,Ext.util.Observable,{deferEmptyText:true,scrollOffset:19,autoFill:false,forceFit:false,sortClasses:["sort-asc","sort-desc"],sortAscText:"Sort Ascending",sortDescText:"Sort Descending",columnsText:"Columns",borderWidth:2,tdClass:"x-grid3-cell",hdCls:"x-grid3-hd",cellSelectorDepth:4,rowSelectorDepth:10,cellSelector:"td.x-grid3-cell",rowSelector:"div.x-grid3-row",firstRowCls:"x-grid3-row-first",lastRowCls:"x-grid3-row-last",rowClsRe:/(?:^|\s+)x-grid3-row-(first|last|alt)(?:\s+|$)/g,initTemplates:function(){var g=this.templates||{};if(!g.master){g.master=new Ext.Template('<div class="x-grid3" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header"><div class="x-grid3-header-inner"><div class="x-grid3-header-offset" style="{ostyle}">{header}</div></div><div class="x-clear"></div></div>','<div class="x-grid3-scroller"><div class="x-grid3-body" style="{bstyle}">{body}</div><a href="#" class="x-grid3-focus" tabIndex="-1"></a></div>',"</div>",'<div class="x-grid3-resize-marker">&#160;</div>','<div class="x-grid3-resize-proxy">&#160;</div>',"</div>")}if(!g.header){g.header=new Ext.Template('<table border="0" cellspacing="0" cellpadding="0" style="{tstyle}">','<thead><tr class="x-grid3-hd-row">{cells}</tr></thead>',"</table>")}if(!g.hcell){g.hcell=new Ext.Template('<td class="x-grid3-hd x-grid3-cell x-grid3-td-{id} {css}" style="{style}"><div {tooltip} {attr} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"",'{value}<img class="x-grid3-sort-icon" src="',Ext.BLANK_IMAGE_URL,'" />',"</div></td>")}if(!g.body){g.body=new Ext.Template("{rows}")}if(!g.row){g.row=new Ext.Template('<div class="x-grid3-row {alt}" style="{tstyle}"><table class="x-grid3-row-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody><tr>{cells}</tr>",(this.enableRowBody?'<tr class="x-grid3-row-body-tr" style="{bodyStyle}"><td colspan="{cols}" class="x-grid3-body-cell" tabIndex="0" hidefocus="on"><div class="x-grid3-row-body">{body}</div></td></tr>':""),"</tbody></table></div>")}if(!g.cell){g.cell=new Ext.Template('<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}" tabIndex="0" {cellAttr}>','<div class="x-grid3-cell-inner x-grid3-col-{id}" unselectable="on" {attr}>{value}</div>',"</td>")}for(var a in g){var c=g[a];if(c&&typeof c.compile=="function"&&!c.compiled){c.disableFormats=true;c.compile()}}this.templates=g;this.colRe=new RegExp("x-grid3-td-([^\\s]+)","")},fly:function(a){if(!this._flyweight){this._flyweight=new Ext.Element.Flyweight(document.body)}this._flyweight.dom=a;return this._flyweight},getEditorParent:function(){return this.scroller.dom},initElements:function(){var g=Ext.Element;var c=this.grid.getGridEl().dom.firstChild;var a=c.childNodes;this.el=new g(c);this.mainWrap=new g(a[0]);this.mainHd=new g(this.mainWrap.dom.firstChild);if(this.grid.hideHeaders){this.mainHd.setDisplayed(false)}this.innerHd=this.mainHd.dom.firstChild;this.scroller=new g(this.mainWrap.dom.childNodes[1]);if(this.forceFit){this.scroller.setStyle("overflow-x","hidden")}this.mainBody=new g(this.scroller.dom.firstChild);this.focusEl=new g(this.scroller.dom.childNodes[1]);this.focusEl.swallowEvent("click",true);this.resizeMarker=new g(a[1]);this.resizeProxy=new g(a[2])},getRows:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},findCell:function(a){if(!a){return false}return this.fly(a).findParent(this.cellSelector,this.cellSelectorDepth)},findCellIndex:function(g,c){var a=this.findCell(g);if(a&&(!c||this.fly(a).hasClass(c))){return this.getCellIndex(a)}return false},getCellIndex:function(c){if(c){var a=c.className.match(this.colRe);if(a&&a[1]){return this.cm.getIndexById(a[1])}}return false},findHeaderCell:function(c){var a=this.findCell(c);return a&&this.fly(a).hasClass(this.hdCls)?a:null},findHeaderIndex:function(a){return this.findCellIndex(a,this.hdCls)},findRow:function(a){if(!a){return false}return this.fly(a).findParent(this.rowSelector,this.rowSelectorDepth)},findRowIndex:function(a){var c=this.findRow(a);return c?c.rowIndex:false},getRow:function(a){return this.getRows()[a]},getCell:function(c,a){return this.getRow(c).getElementsByTagName("td")[a]},getHeaderCell:function(a){return this.mainHd.dom.getElementsByTagName("td")[a]},addRowClass:function(g,a){var c=this.getRow(g);if(c){this.fly(c).addClass(a)}},removeRowClass:function(g,a){var c=this.getRow(g);if(c){this.fly(c).removeClass(a)}},removeRow:function(a){Ext.removeNode(this.getRow(a));this.syncFocusEl(a)},removeRows:function(g,a){var c=this.mainBody.dom;for(var h=g;h<=a;h++){Ext.removeNode(c.childNodes[g])}this.syncFocusEl(g)},getScrollState:function(){var a=this.scroller.dom;return{left:a.scrollLeft,top:a.scrollTop}},restoreScroll:function(a){var c=this.scroller.dom;c.scrollLeft=a.left;c.scrollTop=a.top},scrollToTop:function(){this.scroller.dom.scrollTop=0;this.scroller.dom.scrollLeft=0},syncScroll:function(){this.syncHeaderScroll();var a=this.scroller.dom;this.grid.fireEvent("bodyscroll",a.scrollLeft,a.scrollTop)},syncHeaderScroll:function(){var a=this.scroller.dom;this.innerHd.scrollLeft=a.scrollLeft;this.innerHd.scrollLeft=a.scrollLeft},updateSortIcon:function(c,a){var h=this.sortClasses;var g=this.mainHd.select("td").removeClass(h);g.item(c).addClass(h[a=="DESC"?1:0])},updateAllColumnWidths:function(){var h=this.getTotalWidth();var p=this.cm.getColumnCount();var l=[];for(var c=0;c<p;c++){l[c]=this.getColumnWidth(c)}this.innerHd.firstChild.style.width=this.getOffsetWidth();this.innerHd.firstChild.firstChild.style.width=h;this.mainBody.dom.style.width=h;for(var c=0;c<p;c++){var g=this.getHeaderCell(c);g.style.width=l[c]}var m=this.getRows(),q,o;for(var c=0,k=m.length;c<k;c++){q=m[c];q.style.width=h;if(q.firstChild){q.firstChild.style.width=h;o=q.firstChild.rows[0];for(var a=0;a<p;a++){o.childNodes[a].style.width=l[a]}}}this.onAllColumnWidthsUpdated(l,h)},updateColumnWidth:function(c,a){var m=this.getColumnWidth(c);var j=this.getTotalWidth();this.innerHd.firstChild.style.width=this.getOffsetWidth();this.innerHd.firstChild.firstChild.style.width=j;this.mainBody.dom.style.width=j;var h=this.getHeaderCell(c);h.style.width=m;var l=this.getRows(),o;for(var g=0,k=l.length;g<k;g++){o=l[g];o.style.width=j;if(o.firstChild){o.firstChild.style.width=j;o.firstChild.rows[0].childNodes[c].style.width=m}}this.onColumnWidthUpdated(c,m,j)},updateColumnHidden:function(a,j){var h=this.getTotalWidth();this.innerHd.firstChild.style.width=this.getOffsetWidth();this.innerHd.firstChild.firstChild.style.width=h;this.mainBody.dom.style.width=h;var l=j?"none":"";var g=this.getHeaderCell(a);g.style.display=l;var m=this.getRows(),o;for(var c=0,k=m.length;c<k;c++){o=m[c];o.style.width=h;if(o.firstChild){o.firstChild.style.width=h;o.firstChild.rows[0].childNodes[a].style.display=l}}this.onColumnHiddenUpdated(a,j,h);delete this.lastViewWidth;this.layout()},doRender:function(l,o,x,a,w,B){var g=this.templates,k=g.cell,m=g.row,q=w-1;var h="width:"+this.getTotalWidth()+";";var F=[],y,G,z={},s={tstyle:h},v;for(var A=0,E=o.length;A<E;A++){v=o[A];y=[];var t=(A+a);for(var D=0;D<w;D++){G=l[D];z.id=G.id;z.css=D==0?"x-grid3-cell-first ":(D==q?"x-grid3-cell-last ":"");z.attr=z.cellAttr="";z.value=G.renderer(v.data[G.name],z,v,t,D,x);z.style=G.style;if(z.value==undefined||z.value===""){z.value="&#160;"}if(v.dirty&&typeof v.modified[G.name]!=="undefined"){z.css+=" x-grid3-dirty-cell"}y[y.length]=k.apply(z)}var H=[];if(B&&((t+1)%2==0)){H[0]="x-grid3-row-alt"}if(v.dirty){H[1]=" x-grid3-dirty-row"}s.cols=w;if(this.getRowClass){H[2]=this.getRowClass(v,t,s,x)}s.alt=H.join(" ");s.cells=y.join("");F[F.length]=m.apply(s)}return F.join("")},processRows:function(a,g){if(!this.ds||this.ds.getCount()<1){return}var c=this.getRows();g=g||!this.grid.stripeRows;a=a||0;Ext.each(c,function(j,h){j.rowIndex=h;j.className=j.className.replace(this.rowClsRe," ");if(!g&&(h+1)%2===0){j.className+=" x-grid3-row-alt"}});if(a===0){Ext.fly(c[0]).addClass(this.firstRowCls)}Ext.fly(c[c.length-1]).addClass(this.lastRowCls)},afterRender:function(){this.mainBody.dom.innerHTML=this.renderRows()||"&nbsp;";this.processRows(0,true);if(this.deferEmptyText!==true){this.applyEmptyText()}},renderUI:function(){var j=this.renderHeaders();var a=this.templates.body.apply({rows:"&nbsp;"});var c=this.templates.master.apply({body:a,header:j,ostyle:"width:"+this.getOffsetWidth()+";",bstyle:"width:"+this.getTotalWidth()+";"});var h=this.grid;h.getGridEl().dom.innerHTML=c;this.initElements();Ext.fly(this.innerHd).on("click",this.handleHdDown,this);this.mainHd.on("mouseover",this.handleHdOver,this);this.mainHd.on("mouseout",this.handleHdOut,this);this.mainHd.on("mousemove",this.handleHdMove,this);this.scroller.on("scroll",this.syncScroll,this);if(h.enableColumnResize!==false){this.splitZone=new Ext.grid.GridView.SplitDragZone(h,this.mainHd.dom)}if(h.enableColumnMove){this.columnDrag=new Ext.grid.GridView.ColumnDragZone(h,this.innerHd);this.columnDrop=new Ext.grid.HeaderDropZone(h,this.mainHd.dom)}if(h.enableHdMenu!==false){if(h.enableColumnHide!==false){this.colMenu=new Ext.menu.Menu({id:h.id+"-hcols-menu"});this.colMenu.on("beforeshow",this.beforeColMenuShow,this);this.colMenu.on("itemclick",this.handleHdMenuClick,this)}this.hmenu=new Ext.menu.Menu({id:h.id+"-hctx"});this.hmenu.add({id:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{id:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"});if(h.enableColumnHide!==false){this.hmenu.add("-",{id:"columns",hideOnClick:false,text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"})}this.hmenu.on("itemclick",this.handleHdMenuClick,this)}if(h.trackMouseOver){this.mainBody.on("mouseover",this.onRowOver,this);this.mainBody.on("mouseout",this.onRowOut,this)}if(h.enableDragDrop||h.enableDrag){this.dragZone=new Ext.grid.GridDragZone(h,{ddGroup:h.ddGroup||"GridDD"})}this.updateHeaderSortState()},layout:function(){if(!this.mainBody){return}var j=this.grid;var m=j.getGridEl();var a=m.getSize(true);var h=a.width;if(h<20||a.height<20){return}if(j.autoHeight){this.scroller.dom.style.overflow="visible";if(Ext.isWebKit){this.scroller.dom.style.position="static"}}else{this.el.setSize(a.width,a.height);var l=this.mainHd.getHeight();var k=a.height-(l);this.scroller.setSize(h,k);if(this.innerHd){this.innerHd.style.width=(h)+"px"}}if(this.forceFit){if(this.lastViewWidth!=h){this.fitColumns(false,false);this.lastViewWidth=h}}else{this.autoExpand();this.syncHeaderScroll()}this.onLayout(h,k)},onLayout:function(a,c){},onColumnWidthUpdated:function(g,a,c){},onAllColumnWidthsUpdated:function(a,c){},onColumnHiddenUpdated:function(c,g,a){},updateColumnText:function(a,c){},afterMove:function(a){},init:function(a){this.grid=a;this.initTemplates();this.initData(a.store,a.colModel);this.initUI(a)},getColumnId:function(a){return this.cm.getColumnId(a)},getOffsetWidth:function(){return(this.cm.getTotalWidth()+this.scrollOffset)+"px"},renderHeaders:function(){var m=this.cm,k=this.templates;var h=k.hcell;var c=[],l=[],a={};var j=m.getColumnCount();var o=j-1;for(var g=0;g<j;g++){a.id=m.getColumnId(g);a.value=m.getColumnHeader(g)||"";a.style=this.getColumnStyle(g,true);a.tooltip=this.getColumnTooltip(g);a.css=g==0?"x-grid3-cell-first ":(g==o?"x-grid3-cell-last ":"");if(m.config[g].align=="right"){a.istyle="padding-right:16px"}else{delete a.istyle}c[c.length]=h.apply(a)}return k.header.apply({cells:c.join(""),tstyle:"width:"+this.getTotalWidth()+";"})},getColumnTooltip:function(a){var c=this.cm.getColumnTooltip(a);if(c){if(Ext.QuickTips.isEnabled()){return'ext:qtip="'+c+'"'}else{return'title="'+c+'"'}}return""},beforeUpdate:function(){this.grid.stopEditing(true)},updateHeaders:function(){this.innerHd.firstChild.innerHTML=this.renderHeaders();this.innerHd.firstChild.style.width=this.getOffsetWidth();this.innerHd.firstChild.firstChild.style.width=this.getTotalWidth()},focusRow:function(a){this.focusCell(a,0,false)},focusCell:function(g,a,c){this.syncFocusEl(this.ensureVisible(g,a,c));if(Ext.isGecko){this.focusEl.focus()}else{this.focusEl.focus.defer(1,this.focusEl)}},resolveCell:function(l,h,k){if(typeof l!="number"){l=l.rowIndex}if(!this.ds){return null}if(l<0||l>=this.ds.getCount()){return null}h=(h!==undefined?h:0);var g=this.getRow(l),a=this.cm,j=a.getColumnCount(),c;if(!(k===false&&h===0)){while(h<j&&a.isHidden(h)){h++}c=this.getCell(l,h)}return{row:g,cell:c}},getResolvedXY:function(a){if(!a){return null}var g=this.scroller.dom,j=a.cell,h=a.row;return j?Ext.fly(j).getXY():[this.el.getX(),Ext.fly(h).getY()]},syncFocusEl:function(h,a,g){var c=h;if(!Ext.isArray(c)){h=Math.min(h,Math.max(0,this.getRows().length-1));c=this.getResolvedXY(this.resolveCell(h,a,g))}this.focusEl.setXY(c||this.scroller.getXY())},ensureVisible:function(z,k,j){var x=this.resolveCell(z,k,j);if(!x||!x.row){return}var q=x.row,l=x.cell;var t=this.scroller.dom;var y=0;var h=q,v=this.el.dom;while(h&&h!=v){y+=h.offsetTop;h=h.offsetParent}y-=this.mainHd.dom.offsetHeight;var w=y+q.offsetHeight;var a=t.clientHeight;var v=parseInt(t.scrollTop,10);var s=v+a;if(y<v){t.scrollTop=y}else{if(w>s){t.scrollTop=w-a}}if(j!==false){var r=parseInt(l.offsetLeft,10);var o=r+l.offsetWidth;var m=parseInt(t.scrollLeft,10);var g=m+t.clientWidth;if(r<m){t.scrollLeft=r}else{if(o>g){t.scrollLeft=o-t.clientWidth}}}return this.getResolvedXY(x)},insertRows:function(a,m,j,l){var h=a.getCount()-1;if(!l&&m===0&&j>=h){this.refresh()}else{if(!l){this.fireEvent("beforerowsinserted",this,m,j)}var c=this.renderRows(m,j);var k=this.getRow(m);if(k){if(m===0){Ext.fly(this.getRow(0)).removeClass(this.firstRowCls)}Ext.DomHelper.insertHtml("beforeBegin",k,c)}else{var g=this.getRow(h-1);if(g){Ext.fly(g).removeClass(this.lastRowCls)}Ext.DomHelper.insertHtml("beforeEnd",this.mainBody.dom,c)}if(!l){this.fireEvent("rowsinserted",this,m,j);this.processRows(m)}else{if(m===0||m>=h){Ext.fly(this.getRow(m)).addClass(m===0?this.firstRowCls:this.lastRowCls)}}}this.syncFocusEl(m)},deleteRows:function(a,g,c){if(a.getRowCount()<1){this.refresh()}else{this.fireEvent("beforerowsdeleted",this,g,c);this.removeRows(g,c);this.processRows(g);this.fireEvent("rowsdeleted",this,g,c)}},getColumnStyle:function(a,g){var c=!g?(this.cm.config[a].css||""):"";c+="width:"+this.getColumnWidth(a)+";";if(this.cm.isHidden(a)){c+="display:none;"}var h=this.cm.config[a].align;if(h){c+="text-align:"+h+";"}return c},getColumnWidth:function(c){var a=this.cm.getColumnWidth(c);if(typeof a=="number"){return(Ext.isBorderBox||(Ext.isWebKit&&!Ext.isSafari2)?a:(a-this.borderWidth>0?a-this.borderWidth:0))+"px"}return a},getTotalWidth:function(){return this.cm.getTotalWidth()+"px"},fitColumns:function(h,l,j){var k=this.cm,A,r,v;var z=k.getTotalWidth(false);var p=this.grid.getGridEl().getWidth(true)-this.scrollOffset;if(p<20){return}var c=p-z;if(c===0){return false}var a=k.getColumnCount(true);var x=a-(typeof j=="number"?1:0);if(x===0){x=1;j=undefined}var q=k.getColumnCount();var o=[];var t=0;var s=0;var m;for(v=0;v<q;v++){if(!k.isHidden(v)&&!k.isFixed(v)&&v!==j){m=k.getColumnWidth(v);o.push(v);t=v;o.push(m);s+=m}}var g=(p-k.getTotalWidth())/s;while(o.length){m=o.pop();v=o.pop();k.setColumnWidth(v,Math.max(this.grid.minColumnWidth,Math.floor(m+m*g)),true)}if((z=k.getTotalWidth(false))>p){var y=x!=a?j:t;k.setColumnWidth(y,Math.max(1,k.getColumnWidth(y)-(z-p)),true)}if(h!==true){this.updateAllColumnWidths()}return true},autoExpand:function(c){var m=this.grid,a=this.cm;if(!this.userResized&&m.autoExpandColumn){var j=a.getTotalWidth(false);var o=this.grid.getGridEl().getWidth(true)-this.scrollOffset;if(j!=o){var l=a.getIndexById(m.autoExpandColumn);var k=a.getColumnWidth(l);var h=Math.min(Math.max(((o-j)+k),m.autoExpandMin),m.autoExpandMax);if(h!=k){a.setColumnWidth(l,h,true);if(c!==true){this.updateColumnWidth(l,h)}}}}},getColumnData:function(){var h=[],a=this.cm,j=a.getColumnCount();for(var g=0;g<j;g++){var c=a.getDataIndex(g);h[g]={name:(typeof c=="undefined"?this.ds.fields.get(g).name:c),renderer:a.getRenderer(g),id:a.getColumnId(g),style:this.getColumnStyle(g)}}return h},renderRows:function(o,h){var j=this.grid,l=j.colModel,a=j.store,p=j.stripeRows;var m=l.getColumnCount();if(a.getCount()<1){return""}var k=this.getColumnData();o=o||0;h=typeof h=="undefined"?a.getCount()-1:h;var c=a.getRange(o,h);return this.doRender(k,c,a,o,m,p)},renderBody:function(){var a=this.renderRows()||"&nbsp;";return this.templates.body.apply({rows:a})},refreshRow:function(c){var h=this.ds,g;if(typeof c=="number"){g=c;c=h.getAt(g);if(!c){return}}else{g=h.indexOf(c);if(g<0){return}}var a=[];this.insertRows(h,g,g,true);this.getRow(g).rowIndex=g;this.onRemove(h,c,g+1,true);this.fireEvent("rowupdated",this,g,c)},refresh:function(c){this.fireEvent("beforerefresh",this);this.grid.stopEditing(true);var a=this.renderBody();this.mainBody.update(a).setWidth(this.getTotalWidth());if(c===true){this.updateHeaders();this.updateHeaderSortState()}this.processRows(0,true);this.layout();this.applyEmptyText();this.fireEvent("refresh",this)},applyEmptyText:function(){if(this.emptyText&&!this.hasRows()){this.mainBody.update('<div class="x-grid-empty">'+this.emptyText+"</div>")}},updateHeaderSortState:function(){var c=this.ds.getSortState();if(!c){return}if(!this.sortState||(this.sortState.field!=c.field||this.sortState.direction!=c.direction)){this.grid.fireEvent("sortchange",this.grid,c)}this.sortState=c;var g=this.cm.findColumnIndex(c.field);if(g!=-1){var a=c.direction;this.updateSortIcon(g,a)}},destroy:function(){if(this.colMenu){Ext.menu.MenuMgr.unregister(this.colMenu);this.colMenu.destroy();delete this.colMenu}if(this.hmenu){Ext.menu.MenuMgr.unregister(this.hmenu);this.hmenu.destroy();delete this.hmenu}if(this.grid.enableColumnMove){var g=Ext.dd.DDM.ids["gridHeader"+this.grid.getGridEl().id];if(g){for(var a in g){if(!g[a].config.isTarget&&g[a].dragElId){var c=g[a].dragElId;g[a].unreg();Ext.get(c).remove()}else{if(g[a].config.isTarget){g[a].proxyTop.remove();g[a].proxyBottom.remove();g[a].unreg()}}if(Ext.dd.DDM.locationCache[a]){delete Ext.dd.DDM.locationCache[a]}}delete Ext.dd.DDM.ids["gridHeader"+this.grid.getGridEl().id]}}if(this.dragZone){this.dragZone.unreg()}Ext.fly(this.innerHd).removeAllListeners();Ext.removeNode(this.innerHd);Ext.destroy(this.resizeMarker,this.resizeProxy,this.focusEl,this.mainBody,this.scroller,this.mainHd,this.mainWrap,this.dragZone,this.splitZone,this.columnDrag,this.columnDrop);this.initData(null,null);Ext.EventManager.removeResizeListener(this.onWindowResize,this);this.purgeListeners()},onDenyColumnHide:function(){},render:function(){if(this.autoFill){var a=this.grid.ownerCt;if(a&&a.getLayout()){a.on("afterlayout",function(){this.fitColumns(true,true);this.updateHeaders()},this,{single:true})}else{this.fitColumns(true,true)}}else{if(this.forceFit){this.fitColumns(true,false)}else{if(this.grid.autoExpandColumn){this.autoExpand(true)}}}this.renderUI()},initData:function(c,a){if(this.ds){this.ds.un("load",this.onLoad,this);this.ds.un("datachanged",this.onDataChange,this);this.ds.un("add",this.onAdd,this);this.ds.un("remove",this.onRemove,this);this.ds.un("update",this.onUpdate,this);this.ds.un("clear",this.onClear,this)}if(c){c.on("load",this.onLoad,this);c.on("datachanged",this.onDataChange,this);c.on("add",this.onAdd,this);c.on("remove",this.onRemove,this);c.on("update",this.onUpdate,this);c.on("clear",this.onClear,this)}this.ds=c;if(this.cm){this.cm.un("configchange",this.onColConfigChange,this);this.cm.un("widthchange",this.onColWidthChange,this);this.cm.un("headerchange",this.onHeaderChange,this);this.cm.un("hiddenchange",this.onHiddenChange,this);this.cm.un("columnmoved",this.onColumnMove,this);this.cm.un("columnlockchange",this.onColumnLock,this)}if(a){delete this.lastViewWidth;a.on("configchange",this.onColConfigChange,this);a.on("widthchange",this.onColWidthChange,this);a.on("headerchange",this.onHeaderChange,this);a.on("hiddenchange",this.onHiddenChange,this);a.on("columnmoved",this.onColumnMove,this);a.on("columnlockchange",this.onColumnLock,this)}this.cm=a},onDataChange:function(){this.refresh();this.updateHeaderSortState();this.syncFocusEl(0)},onClear:function(){this.refresh();this.syncFocusEl(0)},onUpdate:function(c,a){this.refreshRow(a)},onAdd:function(g,a,c){this.insertRows(g,c,c+(a.length-1))},onRemove:function(h,a,c,g){if(g!==true){this.fireEvent("beforerowremoved",this,c,a)}this.removeRow(c);if(g!==true){this.processRows(c);this.applyEmptyText();this.fireEvent("rowremoved",this,c,a)}},onLoad:function(){this.scrollToTop()},onColWidthChange:function(a,c,g){this.updateColumnWidth(c,g)},onHeaderChange:function(a,c,g){this.updateHeaders()},onHiddenChange:function(a,c,g){this.updateColumnHidden(c,g)},onColumnMove:function(a,h,c){this.indexMap=null;var g=this.getScrollState();this.refresh(true);this.restoreScroll(g);this.afterMove(c);this.grid.fireEvent("columnmove",h,c)},onColConfigChange:function(){delete this.lastViewWidth;this.indexMap=null;this.refresh(true)},initUI:function(a){a.on("headerclick",this.onHeaderClick,this)},initEvents:function(){},onHeaderClick:function(c,a){if(this.headersDisabled||!this.cm.isSortable(a)){return}c.stopEditing(true);c.store.sort(this.cm.getDataIndex(a))},onRowOver:function(c,a){var g;if((g=this.findRowIndex(a))!==false){this.addRowClass(g,"x-grid3-row-over")}},onRowOut:function(c,a){var g;if((g=this.findRowIndex(a))!==false&&!c.within(this.getRow(g),true)){this.removeRowClass(g,"x-grid3-row-over")}},handleWheel:function(a){a.stopPropagation()},onRowSelect:function(a){this.addRowClass(a,"x-grid3-row-selected")},onRowDeselect:function(a){this.removeRowClass(a,"x-grid3-row-selected")},onCellSelect:function(g,c){var a=this.getCell(g,c);if(a){this.fly(a).addClass("x-grid3-cell-selected")}},onCellDeselect:function(g,c){var a=this.getCell(g,c);if(a){this.fly(a).removeClass("x-grid3-cell-selected")}},onColumnSplitterMoved:function(g,c){this.userResized=true;var a=this.grid.colModel;a.setColumnWidth(g,c,true);if(this.forceFit){this.fitColumns(true,false,g);this.updateAllColumnWidths()}else{this.updateColumnWidth(g,c);this.syncHeaderScroll()}this.grid.fireEvent("columnresize",g,c)},handleHdMenuClick:function(g){var c=this.hdCtxIndex;var a=this.cm,h=this.ds;switch(g.id){case"asc":h.sort(a.getDataIndex(c),"ASC");break;case"desc":h.sort(a.getDataIndex(c),"DESC");break;default:c=a.getIndexById(g.id.substr(4));if(c!=-1){if(g.checked&&a.getColumnsBy(this.isHideableColumn,this).length<=1){this.onDenyColumnHide();return false}a.setHidden(c,g.checked)}}return true},isHideableColumn:function(a){return !a.hidden&&!a.fixed},beforeColMenuShow:function(){var a=this.cm,g=a.getColumnCount();this.colMenu.removeAll();for(var c=0;c<g;c++){if(a.config[c].fixed!==true&&a.config[c].hideable!==false){this.colMenu.add(new Ext.menu.CheckItem({id:"col-"+a.getColumnId(c),text:a.getColumnHeader(c),checked:!a.isHidden(c),hideOnClick:false,disabled:a.config[c].hideable===false}))}}},handleHdDown:function(k,h){if(Ext.fly(h).hasClass("x-grid3-hd-btn")){k.stopEvent();var j=this.findHeaderCell(h);Ext.fly(j).addClass("x-grid3-hd-menu-open");var g=this.getCellIndex(j);this.hdCtxIndex=g;var c=this.hmenu.items,a=this.cm;c.get("asc").setDisabled(!a.isSortable(g));c.get("desc").setDisabled(!a.isSortable(g));this.hmenu.on("hide",function(){Ext.fly(j).removeClass("x-grid3-hd-menu-open")},this,{single:true});this.hmenu.show(h,"tl-bl?")}},handleHdOver:function(h,a){var g=this.findHeaderCell(a);if(g&&!this.headersDisabled){this.activeHd=g;this.activeHdIndex=this.getCellIndex(g);var c=this.fly(g);this.activeHdRegion=c.getRegion();if(!this.cm.isMenuDisabled(this.activeHdIndex)){c.addClass("x-grid3-hd-over");this.activeHdBtn=c.child(".x-grid3-hd-btn");if(this.activeHdBtn){this.activeHdBtn.dom.style.height=(g.firstChild.offsetHeight-1)+"px"}}}},handleHdMove:function(k,h){if(this.activeHd&&!this.headersDisabled){var c=this.splitHandleWidth||5;var j=this.activeHdRegion;var a=k.getPageX();var g=this.activeHd.style;if(a-j.left<=c&&this.cm.isResizable(this.activeHdIndex-1)){g.cursor=Ext.isAir?"move":Ext.isWebKit?"e-resize":"col-resize"}else{if(j.right-a<=(!this.activeHdBtn?c:2)&&this.cm.isResizable(this.activeHdIndex)){g.cursor=Ext.isAir?"move":Ext.isWebKit?"w-resize":"col-resize"}else{g.cursor=""}}}},handleHdOut:function(g,a){var c=this.findHeaderCell(a);if(c&&(!Ext.isIE||!g.within(c,true))){this.activeHd=null;this.fly(c).removeClass("x-grid3-hd-over");c.style.cursor=""}},hasRows:function(){var a=this.mainBody.dom.firstChild;return a&&a.nodeType==1&&a.className!="x-grid-empty"},bind:function(a,g){this.initData(a,g)}});Ext.grid.GridView.SplitDragZone=function(a,c){this.grid=a;this.view=a.getView();this.marker=this.view.resizeMarker;this.proxy=this.view.resizeProxy;Ext.grid.GridView.SplitDragZone.superclass.constructor.call(this,c,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:false});this.scroll=false;this.hw=this.view.splitHandleWidth||5};Ext.extend(Ext.grid.GridView.SplitDragZone,Ext.dd.DDProxy,{b4StartDrag:function(a,k){this.view.headersDisabled=true;var j=this.view.mainWrap.getHeight();this.marker.setHeight(j);this.marker.show();this.marker.alignTo(this.view.getHeaderCell(this.cellIndex),"tl-tl",[-2,0]);this.proxy.setHeight(j);var c=this.cm.getColumnWidth(this.cellIndex);var g=Math.max(c-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(g,1000);this.setYConstraint(0,0);this.minX=a-g;this.maxX=a+1000;this.startPos=a;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,a,k)},handleMouseDown:function(a){var m=this.view.findHeaderCell(a.getTarget());if(m){var q=this.view.fly(m).getXY(),j=q[0],h=q[1];var o=a.getXY(),g=o[0],c=o[1];var l=m.offsetWidth,k=false;if((g-j)<=this.hw){k=-1}else{if((j+l)-g<=this.hw){k=0}}if(k!==false){this.cm=this.grid.colModel;var p=this.view.getCellIndex(m);if(k==-1){if(p+k<0){return}while(this.cm.isHidden(p+k)){--k;if(p+k<0){return}}}this.cellIndex=p+k;this.split=m.dom;if(this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)){Ext.grid.GridView.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}}else{if(this.view.columnDrag){this.view.columnDrag.callHandleMouseDown(a)}}}},endDrag:function(h){this.marker.hide();var a=this.view;var c=Math.max(this.minX,h.getPageX());var g=c-this.startPos;a.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+g);setTimeout(function(){a.headersDisabled=false},50)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.GroupingView=Ext.extend(Ext.grid.GridView,{hideGroupedColumn:false,showGroupName:true,startCollapsed:false,enableGrouping:true,enableGroupingMenu:true,enableNoGroups:true,emptyGroupText:"(None)",ignoreAdd:false,groupTextTpl:"{text}",gidSeed:1000,initTemplates:function(){Ext.grid.GroupingView.superclass.initTemplates.call(this);this.state={};var a=this.grid.getSelectionModel();a.on(a.selectRow?"beforerowselect":"beforecellselect",this.onBeforeRowSelect,this);if(!this.startGroup){this.startGroup=new Ext.XTemplate('<div id="{groupId}" class="x-grid-group {cls}">','<div id="{groupId}-hd" class="x-grid-group-hd" style="{style}"><div>',this.groupTextTpl,"</div></div>",'<div id="{groupId}-bd" class="x-grid-group-body">')}this.startGroup.compile();this.endGroup="</div></div>"},findGroup:function(a){return Ext.fly(a).up(".x-grid-group",this.mainBody.dom)},getGroups:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},onAdd:function(){if(this.enableGrouping&&!this.ignoreAdd){var a=this.getScrollState();this.refresh();this.restoreScroll(a)}else{if(!this.enableGrouping){Ext.grid.GroupingView.superclass.onAdd.apply(this,arguments)}}},onRemove:function(k,a,c,j){Ext.grid.GroupingView.superclass.onRemove.apply(this,arguments);var h=document.getElementById(a._groupId);if(h&&h.childNodes[1].childNodes.length<1){Ext.removeNode(h)}this.applyEmptyText()},refreshRow:function(a){if(this.ds.getCount()==1){this.refresh()}else{this.isUpdating=true;Ext.grid.GroupingView.superclass.refreshRow.apply(this,arguments);this.isUpdating=false}},beforeMenuShow:function(){var h=this.getGroupField();var c=this.hmenu.items.get("groupBy");if(c){c.setDisabled(this.cm.config[this.hdCtxIndex].groupable===false)}var a=this.hmenu.items.get("showGroups");if(a){a.setDisabled(!h&&this.cm.config[this.hdCtxIndex].groupable===false);a.setChecked(!!h,true)}},renderUI:function(){Ext.grid.GroupingView.superclass.renderUI.call(this);this.mainBody.on("mousedown",this.interceptMouse,this);if(this.enableGroupingMenu&&this.hmenu){this.hmenu.add("-",{id:"groupBy",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:"x-group-by-icon"});if(this.enableNoGroups){this.hmenu.add({id:"showGroups",text:this.showGroupsText,checked:true,checkHandler:this.onShowGroupsClick,scope:this})}this.hmenu.on("beforeshow",this.beforeMenuShow,this)}},onGroupByClick:function(){this.grid.store.groupBy(this.cm.getDataIndex(this.hdCtxIndex));this.beforeMenuShow()},onShowGroupsClick:function(a,c){if(c){this.onGroupByClick()}else{this.grid.store.clearGrouping()}},toggleGroup:function(g,c){this.grid.stopEditing(true);g=Ext.getDom(g);var a=Ext.fly(g);c=c!==undefined?c:a.hasClass("x-grid-group-collapsed");this.state[a.dom.id]=c;a[c?"removeClass":"addClass"]("x-grid-group-collapsed")},toggleAllGroups:function(g){var c=this.getGroups();for(var h=0,a=c.length;h<a;h++){this.toggleGroup(c[h],g)}},expandAllGroups:function(){this.toggleAllGroups(true)},collapseAllGroups:function(){this.toggleAllGroups(false)},interceptMouse:function(c){var a=c.getTarget(".x-grid-group-hd",this.mainBody);if(a){c.stopEvent();this.toggleGroup(a.parentNode)}},getGroup:function(a,j,l,m,c,k){var h=l?l(a,{},j,m,c,k):String(a);if(h===""){h=this.cm.config[c].emptyGroupText||this.emptyGroupText}return h},getGroupField:function(){return this.grid.store.getGroupState()},afterRender:function(){Ext.grid.GroupingView.superclass.afterRender.call(this);if(this.grid.deferRowRender){this.updateGroupWidths()}},renderRows:function(){var a=this.getGroupField();var h=!!a;if(this.hideGroupedColumn){var c=this.cm.findColumnIndex(a);if(!h&&this.lastGroupField!==undefined){this.mainBody.update("");this.cm.setHidden(this.cm.findColumnIndex(this.lastGroupField),false);delete this.lastGroupField}else{if(h&&this.lastGroupField===undefined){this.lastGroupField=a;this.cm.setHidden(c,true)}else{if(h&&this.lastGroupField!==undefined&&a!==this.lastGroupField){this.mainBody.update("");var g=this.cm.findColumnIndex(this.lastGroupField);this.cm.setHidden(g,false);this.lastGroupField=a;this.cm.setHidden(c,true)}}}}return Ext.grid.GroupingView.superclass.renderRows.apply(this,arguments)},doRender:function(j,m,y,a,x,A){if(m.length<1){return""}var I=this.getGroupField();var w=this.cm.findColumnIndex(I);this.enableGrouping=!!I;if(!this.enableGrouping||this.isUpdating){return Ext.grid.GroupingView.superclass.doRender.apply(this,arguments)}var o="width:"+this.getTotalWidth()+";";var z=this.grid.getGridEl().id;var l=this.cm.config[w];var c=l.groupRenderer||l.renderer;var B=this.showGroupName?(l.groupName||l.header)+": ":"";var H=[],s,D,E,v;for(D=0,E=m.length;D<E;D++){var q=a+D;var t=m[D],k=t.data[I],F=this.getGroup(k,t,c,q,w,y);if(!s||s.group!=F){v=z+"-gp-"+I+"-"+Ext.util.Format.htmlEncode(F);var h=typeof this.state[v]!=="undefined"?!this.state[v]:this.startCollapsed;var p=h?"x-grid-group-collapsed":"";s={group:F,gvalue:k,text:B+F,groupId:v,startRow:q,rs:[t],cls:p,style:o};H.push(s)}else{s.rs.push(t)}t._groupId=v}var G=[];for(D=0,E=H.length;D<E;D++){var F=H[D];this.doGroupStart(G,F,j,y,x);G[G.length]=Ext.grid.GroupingView.superclass.doRender.call(this,j,F.rs,y,F.startRow,x,A);this.doGroupEnd(G,F,j,y,x)}return G.join("")},getGroupId:function(k){var h=this.grid.getGridEl().id;var g=this.getGroupField();var j=this.cm.findColumnIndex(g);var c=this.cm.config[j];var l=c.groupRenderer||c.renderer;var a=this.getGroup(k,{data:{}},l,0,j,this.ds);return h+"-gp-"+g+"-"+Ext.util.Format.htmlEncode(k)},doGroupStart:function(a,j,c,k,h){a[a.length]=this.startGroup.apply(j)},doGroupEnd:function(a,j,c,k,h){a[a.length]=this.endGroup},getRows:function(){if(!this.enableGrouping){return Ext.grid.GroupingView.superclass.getRows.call(this)}var o=[];var m,h=this.getGroups();for(var l=0,a=h.length;l<a;l++){m=h[l].childNodes[1].childNodes;for(var k=0,c=m.length;k<c;k++){o[o.length]=m[k]}}return o},updateGroupWidths:function(){if(!this.enableGrouping||!this.hasRows()){return}var g=Math.max(this.cm.getTotalWidth(),this.el.dom.offsetWidth-this.scrollOffset)+"px";var c=this.getGroups();for(var h=0,a=c.length;h<a;h++){c[h].firstChild.style.width=g}},onColumnWidthUpdated:function(g,a,c){Ext.grid.GroupingView.superclass.onColumnWidthUpdated.call(this,g,a,c);this.updateGroupWidths()},onAllColumnWidthsUpdated:function(a,c){Ext.grid.GroupingView.superclass.onAllColumnWidthsUpdated.call(this,a,c);this.updateGroupWidths()},onColumnHiddenUpdated:function(c,g,a){Ext.grid.GroupingView.superclass.onColumnHiddenUpdated.call(this,c,g,a);this.updateGroupWidths()},onLayout:function(){this.updateGroupWidths()},onBeforeRowSelect:function(j,h){if(!this.enableGrouping){return}var c=this.getRow(h);if(c&&!c.offsetParent){var a=this.findGroup(c);this.toggleGroup(a,true)}},groupByText:"Group By This Field",showGroupsText:"Show in Groups"});Ext.grid.GroupingView.GROUP_ID=1000;Ext.grid.HeaderDragZone=function(a,g,c){this.grid=a;this.view=a.getView();this.ddGroup="gridHeader"+this.grid.getGridEl().id;Ext.grid.HeaderDragZone.superclass.constructor.call(this,g);if(c){this.setHandleElId(Ext.id(g));this.setOuterHandleElId(Ext.id(c))}this.scroll=false};Ext.extend(Ext.grid.HeaderDragZone,Ext.dd.DragZone,{maxDragWidth:120,getDragData:function(g){var a=Ext.lib.Event.getTarget(g);var c=this.view.findHeaderCell(a);if(c){return{ddel:c.firstChild,header:c}}return false},onInitDrag:function(a){this.view.headersDisabled=true;var c=this.dragData.ddel.cloneNode(true);c.id=Ext.id();c.style.width=Math.min(this.dragData.header.offsetWidth,this.maxDragWidth)+"px";this.proxy.update(c);return true},afterValidDrop:function(){var a=this.view;setTimeout(function(){a.headersDisabled=false},50)},afterInvalidDrop:function(){var a=this.view;setTimeout(function(){a.headersDisabled=false},50)}});Ext.grid.HeaderDropZone=function(a,g,c){this.grid=a;this.view=a.getView();this.proxyTop=Ext.DomHelper.append(document.body,{cls:"col-move-top",html:"&#160;"},true);this.proxyBottom=Ext.DomHelper.append(document.body,{cls:"col-move-bottom",html:"&#160;"},true);this.proxyTop.hide=this.proxyBottom.hide=function(){this.setLeftTop(-100,-100);this.setStyle("visibility","hidden")};this.ddGroup="gridHeader"+this.grid.getGridEl().id;Ext.grid.HeaderDropZone.superclass.constructor.call(this,a.getGridEl().dom)};Ext.extend(Ext.grid.HeaderDropZone,Ext.dd.DropZone,{proxyOffsets:[-4,-9],fly:Ext.Element.fly,getTargetFromEvent:function(g){var a=Ext.lib.Event.getTarget(g);var c=this.view.findCellIndex(a);if(c!==false){return this.view.getHeaderCell(c)}},nextVisible:function(g){var c=this.view,a=this.grid.colModel;g=g.nextSibling;while(g){if(!a.isHidden(c.getCellIndex(g))){return g}g=g.nextSibling}return null},prevVisible:function(g){var c=this.view,a=this.grid.colModel;g=g.prevSibling;while(g){if(!a.isHidden(c.getCellIndex(g))){return g}g=g.prevSibling}return null},positionIndicator:function(j,c,k){var o=Ext.lib.Event.getPageX(k);var a=Ext.lib.Dom.getRegion(c.firstChild);var p,s,m=a.top+this.proxyOffsets[1];if((a.right-o)<=(a.right-a.left)/2){p=a.right+this.view.borderWidth;s="after"}else{p=a.left;s="before"}var l=this.view.getCellIndex(j);var q=this.view.getCellIndex(c);if(this.grid.colModel.isFixed(q)){return false}var g=this.grid.colModel.isLocked(q);if(s=="after"){q++}if(l<q){q--}if(l==q&&(g==this.grid.colModel.isLocked(l))){return false}p+=this.proxyOffsets[0];this.proxyTop.setLeftTop(p,m);this.proxyTop.show();if(!this.bottomOffset){this.bottomOffset=this.view.mainHd.getHeight()}this.proxyBottom.setLeftTop(p,m+this.proxyTop.dom.offsetHeight+this.bottomOffset);this.proxyBottom.show();return s},onNodeEnter:function(h,a,g,c){if(c.header!=h){this.positionIndicator(c.header,h,g)}},onNodeOver:function(j,c,h,g){var a=false;if(g.header!=j){a=this.positionIndicator(g.header,j,h)}if(!a){this.proxyTop.hide();this.proxyBottom.hide()}return a?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(h,a,g,c){this.proxyTop.hide();this.proxyBottom.hide()},onNodeDrop:function(c,s,l,j){var k=j.header;if(k!=c){var p=this.grid.colModel;var o=Ext.lib.Event.getPageX(l);var a=Ext.lib.Dom.getRegion(c.firstChild);var t=(a.right-o)<=((a.right-a.left)/2)?"after":"before";var m=this.view.getCellIndex(k);var q=this.view.getCellIndex(c);var g=p.isLocked(q);if(t=="after"){q++}if(m<q){q--}if(m==q&&(g==p.isLocked(m))){return false}p.setLocked(m,g,true);p.moveColumn(m,q);this.grid.fireEvent("columnmove",m,q);return true}return false}});Ext.grid.GridView.ColumnDragZone=function(a,c){Ext.grid.GridView.ColumnDragZone.superclass.constructor.call(this,a,c,null);this.proxy.el.addClass("x-grid3-col-dd")};Ext.extend(Ext.grid.GridView.ColumnDragZone,Ext.grid.HeaderDragZone,{handleMouseDown:function(a){},callHandleMouseDown:function(a){Ext.grid.GridView.ColumnDragZone.superclass.handleMouseDown.call(this,a)}});Ext.grid.SplitDragZone=function(a,g,c){this.grid=a;this.view=a.getView();this.proxy=this.view.resizeProxy;Ext.grid.SplitDragZone.superclass.constructor.call(this,g,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:false});this.setHandleElId(Ext.id(g));this.setOuterHandleElId(Ext.id(c));this.scroll=false};Ext.extend(Ext.grid.SplitDragZone,Ext.dd.DDProxy,{fly:Ext.Element.fly,b4StartDrag:function(a,h){this.view.headersDisabled=true;this.proxy.setHeight(this.view.mainWrap.getHeight());var c=this.cm.getColumnWidth(this.cellIndex);var g=Math.max(c-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(g,1000);this.setYConstraint(0,0);this.minX=a-g;this.maxX=a+1000;this.startPos=a;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,a,h)},handleMouseDown:function(c){ev=Ext.EventObject.setEvent(c);var a=this.fly(ev.getTarget());if(a.hasClass("x-grid-split")){this.cellIndex=this.view.getCellIndex(a.dom);this.split=a.dom;this.cm=this.grid.colModel;if(this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)){Ext.grid.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}}},endDrag:function(g){this.view.headersDisabled=false;var a=Math.max(this.minX,Ext.lib.Event.getPageX(g));var c=a-this.startPos;this.view.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+c)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.GridDragZone=function(c,a){this.view=c.getView();Ext.grid.GridDragZone.superclass.constructor.call(this,this.view.mainBody.dom,a);if(this.view.lockedBody){this.setHandleElId(Ext.id(this.view.mainBody.dom));this.setOuterHandleElId(Ext.id(this.view.lockedBody.dom))}this.scroll=false;this.grid=c;this.ddel=document.createElement("div");this.ddel.className="x-grid-dd-wrap"};Ext.extend(Ext.grid.GridDragZone,Ext.dd.DragZone,{ddGroup:"GridDD",getDragData:function(c){var a=Ext.lib.Event.getTarget(c);var h=this.view.findRowIndex(a);if(h!==false){var g=this.grid.selModel;if(!g.isSelected(h)||c.hasModifier()){g.handleMouseDown(this.grid,h,c)}return{grid:this.grid,ddel:this.ddel,rowIndex:h,selections:g.getSelections()}}return false},onInitDrag:function(c){var a=this.dragData;this.ddel.innerHTML=this.grid.getDragDropText();this.proxy.update(this.ddel)},afterRepair:function(){this.dragging=false},getRepairXY:function(c,a){return false},onEndDrag:function(a,c){},onValidDrop:function(a,c,g){this.hideProxy()},beforeInvalidDrop:function(a,c){}});Ext.grid.ColumnModel=function(a){this.defaultWidth=100;this.defaultSortable=false;if(a.columns){Ext.apply(this,a);this.setConfig(a.columns,true)}else{this.setConfig(a,true)}this.addEvents("widthchange","headerchange","hiddenchange","columnmoved","columnlockchange","configchange");Ext.grid.ColumnModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.ColumnModel,Ext.util.Observable,{getColumnId:function(a){return this.config[a].id},setConfig:function(h,g){if(!g){delete this.totalWidth;for(var j=0,a=this.config.length;j<a;j++){var k=this.config[j];if(k.editor){k.editor.destroy()}}}this.config=h;this.lookup={};for(var j=0,a=h.length;j<a;j++){var k=h[j];if(typeof k.renderer=="string"){k.renderer=Ext.util.Format[k.renderer]}if(typeof k.id=="undefined"){k.id=j}if(k.editor&&k.editor.isFormField){k.editor=new Ext.grid.GridEditor(k.editor)}this.lookup[k.id]=k}if(!g){this.fireEvent("configchange",this)}},getColumnById:function(a){return this.lookup[a]},getIndexById:function(g){for(var c=0,a=this.config.length;c<a;c++){if(this.config[c].id==g){return c}}return -1},moveColumn:function(h,a){var g=this.config[h];this.config.splice(h,1);this.config.splice(a,0,g);this.dataMap=null;this.fireEvent("columnmoved",this,h,a)},isLocked:function(a){return this.config[a].locked===true},setLocked:function(c,g,a){if(this.isLocked(c)==g){return}this.config[c].locked=g;if(!a){this.fireEvent("columnlockchange",this,c,g)}},getTotalLockedWidth:function(){var a=0;for(var c=0;c<this.config.length;c++){if(this.isLocked(c)&&!this.isHidden(c)){this.totalWidth+=this.getColumnWidth(c)}}return a},getLockedCount:function(){for(var c=0,a=this.config.length;c<a;c++){if(!this.isLocked(c)){return c}}},getColumnCount:function(h){if(h===true){var j=0;for(var g=0,a=this.config.length;g<a;g++){if(!this.isHidden(g)){j++}}return j}return this.config.length},getColumnsBy:function(j,h){var k=[];for(var g=0,a=this.config.length;g<a;g++){var l=this.config[g];if(j.call(h||this,l,g)===true){k[k.length]=l}}return k},isSortable:function(a){if(typeof this.config[a].sortable=="undefined"){return this.defaultSortable}return this.config[a].sortable},isMenuDisabled:function(a){return !!this.config[a].menuDisabled},getRenderer:function(a){if(!this.config[a].renderer){return Ext.grid.ColumnModel.defaultRenderer}return this.config[a].renderer},setRenderer:function(a,c){this.config[a].renderer=c},getColumnWidth:function(a){return this.config[a].width||this.defaultWidth},setColumnWidth:function(c,g,a){this.config[c].width=g;this.totalWidth=null;if(!a){this.fireEvent("widthchange",this,c,g)}},getTotalWidth:function(c){if(!this.totalWidth){this.totalWidth=0;for(var g=0,a=this.config.length;g<a;g++){if(c||!this.isHidden(g)){this.totalWidth+=this.getColumnWidth(g)}}}return this.totalWidth},getColumnHeader:function(a){return this.config[a].header},setColumnHeader:function(a,c){this.config[a].header=c;this.fireEvent("headerchange",this,a,c)},getColumnTooltip:function(a){return this.config[a].tooltip},setColumnTooltip:function(a,c){this.config[a].tooltip=c},getDataIndex:function(a){return this.config[a].dataIndex},setDataIndex:function(a,c){this.config[a].dataIndex=c},findColumnIndex:function(h){var j=this.config;for(var g=0,a=j.length;g<a;g++){if(j[g].dataIndex==h){return g}}return -1},isCellEditable:function(a,c){return(this.config[a].editable||(typeof this.config[a].editable=="undefined"&&this.config[a].editor))?true:false},getCellEditor:function(a,c){return this.config[a].editor},setEditable:function(a,c){this.config[a].editable=c},isHidden:function(a){return this.config[a].hidden},isFixed:function(a){return this.config[a].fixed},isResizable:function(a){return a>=0&&this.config[a].resizable!==false&&this.config[a].fixed!==true},setHidden:function(a,g){var h=this.config[a];if(h.hidden!==g){h.hidden=g;this.totalWidth=null;this.fireEvent("hiddenchange",this,a,g)}},setEditor:function(a,c){Ext.destroy(this.config[a].editor);this.config[a].editor=c},destroy:function(){var h=this.config;for(var g=0,h=this.config,a=h.length;g<a;g++){Ext.destroy(h[g].editor)}this.purgeListeners()}});Ext.grid.ColumnModel.defaultRenderer=function(a){if(typeof a=="string"&&a.length<1){return"&#160;"}return a};Ext.grid.DefaultColumnModel=Ext.grid.ColumnModel;Ext.grid.AbstractSelectionModel=function(){this.locked=false;Ext.grid.AbstractSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.AbstractSelectionModel,Ext.util.Observable,{init:function(a){this.grid=a;this.initEvents()},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},destroy:function(){this.purgeListeners()}});Ext.grid.RowSelectionModel=function(a){Ext.apply(this,a);this.selections=new Ext.util.MixedCollection(false,function(c){return c.id});this.last=false;this.lastActive=false;this.addEvents("selectionchange","beforerowselect","rowselect","rowdeselect");Ext.grid.RowSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.RowSelectionModel,Ext.grid.AbstractSelectionModel,{singleSelect:false,initEvents:function(){if(!this.grid.enableDragDrop&&!this.grid.enableDrag){this.grid.on("rowmousedown",this.handleMouseDown,this)}this.rowNav=new Ext.KeyNav(this.grid.getGridEl(),{up:function(g){if(!g.shiftKey||this.singleSelect){this.selectPrevious(false)}else{if(this.last!==false&&this.lastActive!==false){var c=this.last;this.selectRange(this.last,this.lastActive-1);this.grid.getView().focusRow(this.lastActive);if(c!==false){this.last=c}}else{this.selectFirstRow()}}},down:function(g){if(!g.shiftKey||this.singleSelect){this.selectNext(false)}else{if(this.last!==false&&this.lastActive!==false){var c=this.last;this.selectRange(this.last,this.lastActive+1);this.grid.getView().focusRow(this.lastActive);if(c!==false){this.last=c}}else{this.selectFirstRow()}}},scope:this});var a=this.grid.view;a.on("refresh",this.onRefresh,this);a.on("rowupdated",this.onRowUpdated,this);a.on("rowremoved",this.onRemove,this)},onRefresh:function(){var k=this.grid.store,c;var h=this.getSelections();this.clearSelections(true);for(var g=0,a=h.length;g<a;g++){var j=h[g];if((c=k.indexOfId(j.id))!=-1){this.selectRow(c,true)}}if(h.length!=this.selections.getCount()){this.fireEvent("selectionchange",this)}},onRemove:function(a,c,g){if(this.selections.remove(g)!==false){this.fireEvent("selectionchange",this)}},onRowUpdated:function(a,c,g){if(this.isSelected(g)){a.onRowSelect(c)}},selectRecords:function(c,j){if(!j){this.clearSelections()}var h=this.grid.store;for(var g=0,a=c.length;g<a;g++){this.selectRow(h.indexOf(c[g]),true)}},getCount:function(){return this.selections.length},selectFirstRow:function(){this.selectRow(0)},selectLastRow:function(a){this.selectRow(this.grid.store.getCount()-1,a)},selectNext:function(a){if(this.hasNext()){this.selectRow(this.last+1,a);this.grid.getView().focusRow(this.last);return true}return false},selectPrevious:function(a){if(this.hasPrevious()){this.selectRow(this.last-1,a);this.grid.getView().focusRow(this.last);return true}return false},hasNext:function(){return this.last!==false&&(this.last+1)<this.grid.store.getCount()},hasPrevious:function(){return !!this.last},getSelections:function(){return[].concat(this.selections.items)},getSelected:function(){return this.selections.itemAt(0)},each:function(j,h){var g=this.getSelections();for(var c=0,a=g.length;c<a;c++){if(j.call(h||this,g[c],c)===false){return false}}return true},clearSelections:function(a){if(this.isLocked()){return}if(a!==true){var g=this.grid.store;var c=this.selections;c.each(function(h){this.deselectRow(g.indexOfId(h.id))},this);c.clear()}else{this.selections.clear()}this.last=false},selectAll:function(){if(this.isLocked()){return}this.selections.clear();for(var c=0,a=this.grid.store.getCount();c<a;c++){this.selectRow(c,true)}},hasSelection:function(){return this.selections.length>0},isSelected:function(a){var c=typeof a=="number"?this.grid.store.getAt(a):a;return(c&&this.selections.key(c.id)?true:false)},isIdSelected:function(a){return(this.selections.key(a)?true:false)},handleMouseDown:function(j,l,k){if(k.button!==0||this.isLocked()){return}var a=this.grid.getView();if(k.shiftKey&&!this.singleSelect&&this.last!==false){var h=this.last;this.selectRange(h,l,k.ctrlKey);this.last=h;a.focusRow(l)}else{var c=this.isSelected(l);if(k.ctrlKey&&c){this.deselectRow(l)}else{if(!c||this.getCount()>1){this.selectRow(l,k.ctrlKey||k.shiftKey);a.focusRow(l)}}}},selectRows:function(g,h){if(!h){this.clearSelections()}for(var c=0,a=g.length;c<a;c++){this.selectRow(g[c],true)}},selectRange:function(c,a,h){if(this.isLocked()){return}if(!h){this.clearSelections()}if(c<=a){for(var g=c;g<=a;g++){this.selectRow(g,true)}}else{for(var g=c;g>=a;g--){this.selectRow(g,true)}}},deselectRange:function(g,c,a){if(this.isLocked()){return}for(var h=g;h<=c;h++){this.deselectRow(h,a)}},selectRow:function(c,h,a){if(this.isLocked()||(c<0||c>=this.grid.store.getCount())||(h&&this.isSelected(c))){return}var g=this.grid.store.getAt(c);if(g&&this.fireEvent("beforerowselect",this,c,h,g)!==false){if(!h||this.singleSelect){this.clearSelections()}this.selections.add(g);this.last=this.lastActive=c;if(!a){this.grid.getView().onRowSelect(c)}this.fireEvent("rowselect",this,c,g);this.fireEvent("selectionchange",this)}},deselectRow:function(c,a){if(this.isLocked()){return}if(this.last==c){this.last=false}if(this.lastActive==c){this.lastActive=false}var g=this.grid.store.getAt(c);if(g){this.selections.remove(g);if(!a){this.grid.getView().onRowDeselect(c)}this.fireEvent("rowdeselect",this,c,g);this.fireEvent("selectionchange",this)}},restoreLast:function(){if(this._last){this.last=this._last}},acceptsNav:function(g,c,a){return !a.isHidden(c)&&a.isCellEditable(c,g)},onEditorKey:function(m,l){var h=l.getKey(),o,j=this.grid,c=j.activeEditor;var a=l.shiftKey;if(h==l.TAB){l.stopEvent();c.completeEdit();if(a){o=j.walkCells(c.row,c.col-1,-1,this.acceptsNav,this)}else{o=j.walkCells(c.row,c.col+1,1,this.acceptsNav,this)}}else{if(h==l.ENTER){l.stopEvent();c.completeEdit();if(this.moveEditorOnEnter!==false){if(a){o=j.walkCells(c.row-1,c.col,-1,this.acceptsNav,this)}else{o=j.walkCells(c.row+1,c.col,1,this.acceptsNav,this)}}}else{if(h==l.ESC){c.cancelEdit()}}}if(o){j.startEditing(o[0],o[1])}},destroy:function(){if(this.rowNav){this.rowNav.disable();this.rowNav=null}Ext.grid.RowSelectionModel.superclass.destroy.call(this)}});Ext.grid.CellSelectionModel=function(a){Ext.apply(this,a);this.selection=null;this.addEvents("beforecellselect","cellselect","selectionchange");Ext.grid.CellSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.CellSelectionModel,Ext.grid.AbstractSelectionModel,{initEvents:function(){this.grid.on("cellmousedown",this.handleMouseDown,this);this.grid.getGridEl().on(Ext.isIE||(Ext.isWebKit&&!Ext.isSafari2)?"keydown":"keypress",this.handleKeyDown,this);var a=this.grid.view;a.on("refresh",this.onViewChange,this);a.on("rowupdated",this.onRowUpdated,this);a.on("beforerowremoved",this.clearSelections,this);a.on("beforerowsinserted",this.clearSelections,this);if(this.grid.isEditor){this.grid.on("beforeedit",this.beforeEdit,this)}},beforeEdit:function(a){this.select(a.row,a.column,false,true,a.record)},onRowUpdated:function(a,c,g){if(this.selection&&this.selection.record==g){a.onCellSelect(c,this.selection.cell[1])}},onViewChange:function(){this.clearSelections(true)},getSelectedCell:function(){return this.selection?this.selection.cell:null},clearSelections:function(c){var a=this.selection;if(a){if(c!==true){this.grid.view.onCellDeselect(a.cell[0],a.cell[1])}this.selection=null;this.fireEvent("selectionchange",this,null)}},hasSelection:function(){return this.selection?true:false},handleMouseDown:function(c,j,a,h){if(h.button!==0||this.isLocked()){return}this.select(j,a)},select:function(k,g,c,j,h){if(this.fireEvent("beforecellselect",this,k,g)!==false){this.clearSelections();h=h||this.grid.store.getAt(k);this.selection={record:h,cell:[k,g]};if(!c){var a=this.grid.getView();a.onCellSelect(k,g);if(j!==true){a.focusCell(k,g)}}this.fireEvent("cellselect",this,k,g);this.fireEvent("selectionchange",this,this.selection)}},isSelectable:function(g,c,a){return !a.isHidden(c)},handleKeyDown:function(o){if(!o.isNavKeyPress()){return}var m=this.grid,v=this.selection;if(!v){o.stopEvent();var t=m.walkCells(0,0,1,this.isSelectable,this);if(t){this.select(t[0],t[1])}return}var h=this;var q=function(k,c,g){return m.walkCells(k,c,g,h.isSelectable,h)};var j=o.getKey(),a=v.cell[0],p=v.cell[1];var l;switch(j){case o.TAB:if(o.shiftKey){l=q(a,p-1,-1)}else{l=q(a,p+1,1)}break;case o.DOWN:l=q(a+1,p,1);break;case o.UP:l=q(a-1,p,-1);break;case o.RIGHT:l=q(a,p+1,1);break;case o.LEFT:l=q(a,p-1,-1);break;case o.ENTER:if(m.isEditor&&!m.editing){m.startEditing(a,p);o.stopEvent();return}break}if(l){this.select(l[0],l[1]);o.stopEvent()}},acceptsNav:function(g,c,a){return !a.isHidden(c)&&a.isCellEditable(c,g)},onEditorKey:function(l,j){var c=j.getKey(),m,h=this.grid,a=h.activeEditor;if(c==j.TAB){if(j.shiftKey){m=h.walkCells(a.row,a.col-1,-1,this.acceptsNav,this)}else{m=h.walkCells(a.row,a.col+1,1,this.acceptsNav,this)}j.stopEvent()}else{if(c==j.ENTER){a.completeEdit();j.stopEvent()}else{if(c==j.ESC){j.stopEvent();a.cancelEdit()}}}if(m){h.startEditing(m[0],m[1])}}});Ext.grid.EditorGridPanel=Ext.extend(Ext.grid.GridPanel,{clicksToEdit:2,isEditor:true,detectEdit:false,autoEncode:false,trackMouseOver:false,initComponent:function(){Ext.grid.EditorGridPanel.superclass.initComponent.call(this);if(!this.selModel){this.selModel=new Ext.grid.CellSelectionModel()}this.activeEditor=null;this.addEvents("beforeedit","afteredit","validateedit")},initEvents:function(){Ext.grid.EditorGridPanel.superclass.initEvents.call(this);this.on("bodyscroll",this.stopEditing,this,[true]);this.on("columnresize",this.stopEditing,this,[true]);if(this.clicksToEdit==1){this.on("cellclick",this.onCellDblClick,this)}else{if(this.clicksToEdit=="auto"&&this.view.mainBody){this.view.mainBody.on("mousedown",this.onAutoEditClick,this)}this.on("celldblclick",this.onCellDblClick,this)}},onCellDblClick:function(c,h,a){this.startEditing(h,a)},onAutoEditClick:function(g,c){if(g.button!==0){return}var j=this.view.findRowIndex(c);var a=this.view.findCellIndex(c);if(j!==false&&a!==false){this.stopEditing();if(this.selModel.getSelectedCell){var h=this.selModel.getSelectedCell();if(h&&h[0]===j&&h[1]===a){this.startEditing(j,a)}}else{if(this.selModel.isSelected(j)){this.startEditing(j,a)}}}},onEditComplete:function(c,h,a){this.editing=false;this.activeEditor=null;c.un("specialkey",this.selModel.onEditorKey,this.selModel);var g=c.record;var k=this.colModel.getDataIndex(c.col);h=this.postEditValue(h,a,g,k);if(String(h)!==String(a)){var j={grid:this,record:g,field:k,originalValue:a,value:h,row:c.row,column:c.col,cancel:false};if(this.fireEvent("validateedit",j)!==false&&!j.cancel){g.set(k,j.value);delete j.cancel;this.fireEvent("afteredit",j)}}this.view.focusCell(c.row,c.col)},startEditing:function(k,c){this.stopEditing();if(this.colModel.isCellEditable(c,k)){this.view.ensureVisible(k,c,true);var g=this.store.getAt(k);var j=this.colModel.getDataIndex(c);var h={grid:this,record:g,field:j,value:g.data[j],row:k,column:c,cancel:false};if(this.fireEvent("beforeedit",h)!==false&&!h.cancel){this.editing=true;var a=this.colModel.getCellEditor(c,k);if(!a.rendered){a.render(this.view.getEditorParent(a))}(function(){a.row=k;a.col=c;a.record=g;a.on("complete",this.onEditComplete,this,{single:true});a.on("specialkey",this.selModel.onEditorKey,this.selModel);this.activeEditor=a;var l=this.preEditValue(g,j);a.startEdit(this.view.getCell(k,c).firstChild,l===undefined?"":l)}).defer(50,this)}}},preEditValue:function(a,g){var c=a.data[g];return this.autoEncode&&typeof c=="string"?Ext.util.Format.htmlDecode(c):c},postEditValue:function(g,a,c,h){return this.autoEncode&&typeof g=="string"?Ext.util.Format.htmlEncode(g):g},stopEditing:function(a){if(this.activeEditor){this.activeEditor[a===true?"cancelEdit":"completeEdit"]()}this.activeEditor=null}});Ext.reg("editorgrid",Ext.grid.EditorGridPanel);Ext.grid.GridEditor=function(c,a){Ext.grid.GridEditor.superclass.constructor.call(this,c,a);c.monitorTab=false};Ext.extend(Ext.grid.GridEditor,Ext.Editor,{alignment:"tl-tl",autoSize:"width",hideEl:false,cls:"x-small-editor x-grid-editor",shim:false,shadow:false});Ext.grid.PropertyRecord=Ext.data.Record.create([{name:"name",type:"string"},"value"]);Ext.grid.PropertyStore=function(a,c){this.grid=a;this.store=new Ext.data.Store({recordType:Ext.grid.PropertyRecord});this.store.on("update",this.onUpdate,this);if(c){this.setSource(c)}Ext.grid.PropertyStore.superclass.constructor.call(this)};Ext.extend(Ext.grid.PropertyStore,Ext.util.Observable,{setSource:function(g){this.source=g;this.store.removeAll();var c=[];for(var a in g){if(this.isEditableValue(g[a])){c.push(new Ext.grid.PropertyRecord({name:a,value:g[a]},a))}}this.store.loadRecords({records:c},{},true)},onUpdate:function(j,a,h){if(h==Ext.data.Record.EDIT){var c=a.data.value;var g=a.modified.value;if(this.grid.fireEvent("beforepropertychange",this.source,a.id,c,g)!==false){this.source[a.id]=c;a.commit();this.grid.fireEvent("propertychange",this.source,a.id,c,g)}else{a.reject()}}},getProperty:function(a){return this.store.getAt(a)},isEditableValue:function(a){if(Ext.isDate(a)){return true}else{if(typeof a=="object"||typeof a=="function"){return false}}return true},setValue:function(c,a){this.source[c]=a;this.store.getById(c).set("value",a)},getSource:function(){return this.source}});Ext.grid.PropertyColumnModel=function(h,c){this.grid=h;var j=Ext.grid;j.PropertyColumnModel.superclass.constructor.call(this,[{header:this.nameText,width:50,sortable:true,dataIndex:"name",id:"name",menuDisabled:true},{header:this.valueText,width:50,resizable:false,dataIndex:"value",id:"value",menuDisabled:true}]);this.store=c;var k=Ext.form;var a=new k.Field({autoCreate:{tag:"select",children:[{tag:"option",value:"true",html:"true"},{tag:"option",value:"false",html:"false"}]},getValue:function(){return this.el.value=="true"}});this.editors={date:new j.GridEditor(new k.DateField({selectOnFocus:true})),string:new j.GridEditor(new k.TextField({selectOnFocus:true})),number:new j.GridEditor(new k.NumberField({selectOnFocus:true,style:"text-align:left;"})),"boolean":new j.GridEditor(a)};this.renderCellDelegate=this.renderCell.createDelegate(this);this.renderPropDelegate=this.renderProp.createDelegate(this)};Ext.extend(Ext.grid.PropertyColumnModel,Ext.grid.ColumnModel,{nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",renderDate:function(a){return a.dateFormat(this.dateFormat)},renderBool:function(a){return a?"true":"false"},isCellEditable:function(a,c){return a==1},getRenderer:function(a){return a==1?this.renderCellDelegate:this.renderPropDelegate},renderProp:function(a){return this.getPropertyName(a)},renderCell:function(a){var c=a;if(Ext.isDate(a)){c=this.renderDate(a)}else{if(typeof a=="boolean"){c=this.renderBool(a)}}return Ext.util.Format.htmlEncode(c)},getPropertyName:function(c){var a=this.grid.propertyNames;return a&&a[c]?a[c]:c},getCellEditor:function(a,j){var c=this.store.getProperty(j);var h=c.data.name,g=c.data.value;if(this.grid.customEditors[h]){return this.grid.customEditors[h]}if(Ext.isDate(g)){return this.editors.date}else{if(typeof g=="number"){return this.editors.number}else{if(typeof g=="boolean"){return this.editors["boolean"]}else{return this.editors.string}}}},destroy:function(){Ext.grid.PropertyColumnModel.superclass.destroy.call(this);for(var a in this.editors){Ext.destroy(a)}}});Ext.grid.PropertyGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:false,stripeRows:false,trackMouseOver:false,clicksToEdit:1,enableHdMenu:false,viewConfig:{forceFit:true},initComponent:function(){this.customEditors=this.customEditors||{};this.lastEditRow=null;var c=new Ext.grid.PropertyStore(this);this.propStore=c;var a=new Ext.grid.PropertyColumnModel(this,c);c.store.sort("name","ASC");this.addEvents("beforepropertychange","propertychange");this.cm=a;this.ds=c.store;Ext.grid.PropertyGrid.superclass.initComponent.call(this);this.selModel.on("beforecellselect",function(j,h,g){if(g===0){this.startEditing.defer(200,this,[h,1]);return false}},this)},onRender:function(){Ext.grid.PropertyGrid.superclass.onRender.apply(this,arguments);this.getGridEl().addClass("x-props-grid")},afterRender:function(){Ext.grid.PropertyGrid.superclass.afterRender.apply(this,arguments);if(this.source){this.setSource(this.source)}},setSource:function(a){this.propStore.setSource(a)},getSource:function(){return this.propStore.getSource()}});Ext.reg("propertygrid",Ext.grid.PropertyGrid);Ext.grid.RowNumberer=function(a){Ext.apply(this,a);if(this.rowspan){this.renderer=this.renderer.createDelegate(this)}};Ext.grid.RowNumberer.prototype={header:"",width:23,sortable:false,fixed:true,menuDisabled:true,dataIndex:"",id:"numberer",rowspan:undefined,renderer:function(c,g,a,h){if(this.rowspan){g.cellAttr='rowspan="'+this.rowspan+'"'}return h+1}};Ext.grid.CheckboxSelectionModel=Ext.extend(Ext.grid.RowSelectionModel,{header:'<div class="x-grid3-hd-checker">&#160;</div>',width:20,sortable:false,menuDisabled:true,fixed:true,dataIndex:"",id:"checker",initEvents:function(){Ext.grid.CheckboxSelectionModel.superclass.initEvents.call(this);this.grid.on("render",function(){var a=this.grid.getView();a.mainBody.on("mousedown",this.onMouseDown,this);Ext.fly(a.innerHd).on("mousedown",this.onHdMouseDown,this)},this)},onMouseDown:function(g,c){if(g.button===0&&c.className=="x-grid3-row-checker"){g.stopEvent();var h=g.getTarget(".x-grid3-row");if(h){var a=h.rowIndex;if(this.isSelected(a)){this.deselectRow(a)}else{this.selectRow(a,true)}}}},onHdMouseDown:function(g,a){if(a.className=="x-grid3-hd-checker"){g.stopEvent();var c=Ext.fly(a.parentNode);var h=c.hasClass("x-grid3-hd-checker-on");if(h){c.removeClass("x-grid3-hd-checker-on");this.clearSelections()}else{c.addClass("x-grid3-hd-checker-on");this.selectAll()}}},renderer:function(c,g,a){return'<div class="x-grid3-row-checker">&#160;</div>'}});Ext.LoadMask=function(g,c){this.el=Ext.get(g);Ext.apply(this,c);if(this.store){this.store.on("beforeload",this.onBeforeLoad,this);this.store.on("load",this.onLoad,this);this.store.on("loadexception",this.onLoad,this);this.removeMask=Ext.value(this.removeMask,false)}else{var a=this.el.getUpdater();a.showLoadIndicator=false;a.on("beforeupdate",this.onBeforeLoad,this);a.on("update",this.onLoad,this);a.on("failure",this.onLoad,this);this.removeMask=Ext.value(this.removeMask,true)}};Ext.LoadMask.prototype={msg:"Loading...",msgCls:"x-mask-loading",disabled:false,disable:function(){this.disabled=true},enable:function(){this.disabled=false},onLoad:function(){this.el.unmask(this.removeMask)},onBeforeLoad:function(){if(!this.disabled){this.el.mask(this.msg,this.msgCls)}},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){if(this.store){this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("loadexception",this.onLoad,this)}else{var a=this.el.getUpdater();a.un("beforeupdate",this.onBeforeLoad,this);a.un("update",this.onLoad,this);a.un("failure",this.onLoad,this)}}};Ext.ProgressBar=Ext.extend(Ext.BoxComponent,{baseCls:"x-progress",animate:false,waitTimer:null,initComponent:function(){Ext.ProgressBar.superclass.initComponent.call(this);this.addEvents("update")},onRender:function(h,a){Ext.ProgressBar.superclass.onRender.call(this,h,a);var g=new Ext.Template('<div class="{cls}-wrap">','<div class="{cls}-inner">','<div class="{cls}-bar">','<div class="{cls}-text">',"<div>&#160;</div>","</div>","</div>",'<div class="{cls}-text {cls}-text-back">',"<div>&#160;</div>","</div>","</div>","</div>");if(a){this.el=g.insertBefore(a,{cls:this.baseCls},true)}else{this.el=g.append(h,{cls:this.baseCls},true)}if(this.id){this.el.dom.id=this.id}var c=this.el.dom.firstChild;this.progressBar=Ext.get(c.firstChild);if(this.textEl){this.textEl=Ext.get(this.textEl);delete this.textTopEl}else{this.textTopEl=Ext.get(this.progressBar.dom.firstChild);var j=Ext.get(c.childNodes[1]);this.textTopEl.setStyle("z-index",99).addClass("x-hidden");this.textEl=new Ext.CompositeElement([this.textTopEl.dom.firstChild,j.dom.firstChild]);this.textEl.setWidth(c.offsetWidth)}this.progressBar.setHeight(c.offsetHeight)},afterRender:function(){Ext.ProgressBar.superclass.afterRender.call(this);if(this.value){this.updateProgress(this.value,this.text)}else{this.updateText(this.text)}},updateProgress:function(g,h,c){this.value=g||0;if(h){this.updateText(h)}if(this.rendered){var a=Math.floor(g*this.el.dom.firstChild.offsetWidth);this.progressBar.setWidth(a,c===true||(c!==false&&this.animate));if(this.textTopEl){this.textTopEl.removeClass("x-hidden").setWidth(a)}}this.fireEvent("update",this,g,h);return this},wait:function(c){if(!this.waitTimer){var a=this;c=c||{};this.updateText(c.text);this.waitTimer=Ext.TaskMgr.start({run:function(g){var h=c.increment||10;this.updateProgress(((((g+h)%h)+1)*(100/h))*0.01,null,c.animate)},interval:c.interval||1000,duration:c.duration,onStop:function(){if(c.fn){c.fn.apply(c.scope||this)}this.reset()},scope:a})}return this},isWaiting:function(){return this.waitTimer!=null},updateText:function(a){this.text=a||"&#160;";if(this.rendered){this.textEl.update(this.text)}return this},syncProgressBar:function(){if(this.value){this.updateProgress(this.value,this.text)}return this},setSize:function(a,g){Ext.ProgressBar.superclass.setSize.call(this,a,g);if(this.textTopEl){var c=this.el.dom.firstChild;this.textEl.setSize(c.offsetWidth,c.offsetHeight)}this.syncProgressBar();return this},reset:function(a){this.updateProgress(0);if(this.textTopEl){this.textTopEl.addClass("x-hidden")}if(this.waitTimer){this.waitTimer.onStop=null;Ext.TaskMgr.stop(this.waitTimer);this.waitTimer=null}if(a===true){this.hide()}return this}});Ext.reg("progress",Ext.ProgressBar);Ext.Slider=Ext.extend(Ext.BoxComponent,{vertical:false,minValue:0,maxValue:100,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:true,animate:true,dragging:false,initComponent:function(){if(this.value===undefined){this.value=this.minValue}Ext.Slider.superclass.initComponent.call(this);this.keyIncrement=Math.max(this.increment,this.keyIncrement);this.addEvents("beforechange","change","changecomplete","dragstart","drag","dragend");if(this.vertical){Ext.apply(this,Ext.Slider.Vertical)}},onRender:function(){this.autoEl={cls:"x-slider "+(this.vertical?"x-slider-vert":"x-slider-horz"),cn:{cls:"x-slider-end",cn:{cls:"x-slider-inner",cn:[{cls:"x-slider-thumb"},{tag:"a",cls:"x-slider-focus",href:"#",tabIndex:"-1",hidefocus:"on"}]}}};Ext.Slider.superclass.onRender.apply(this,arguments);this.endEl=this.el.first();this.innerEl=this.endEl.first();this.thumb=this.innerEl.first();this.halfThumb=(this.vertical?this.thumb.getHeight():this.thumb.getWidth())/2;this.focusEl=this.thumb.next();this.initEvents()},initEvents:function(){this.thumb.addClassOnOver("x-slider-thumb-over");this.el.on("mousedown",this.onMouseDown,this);this.el.on("keydown",this.onKeyDown,this);this.focusEl.swallowEvent("click",true);this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeDragStart.createDelegate(this),onStart:this.onDragStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onDragEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(this.thumb);this.on("beforedestroy",this.tracker.destroy,this.tracker)},onMouseDown:function(c){if(this.disabled){return}if(this.clickToChange&&c.target!=this.thumb.dom){var a=this.innerEl.translatePoints(c.getXY());this.onClickChange(a)}this.focus()},onClickChange:function(a){if(a.top>this.clickRange[0]&&a.top<this.clickRange[1]){this.setValue(Math.round(this.reverseValue(a.left)),undefined,true)}},onKeyDown:function(c){if(this.disabled){c.preventDefault();return}var a=c.getKey();switch(a){case c.UP:case c.RIGHT:c.stopEvent();if(c.ctrlKey){this.setValue(this.maxValue,undefined,true)}else{this.setValue(this.value+this.keyIncrement,undefined,true)}break;case c.DOWN:case c.LEFT:c.stopEvent();if(c.ctrlKey){this.setValue(this.minValue,undefined,true)}else{this.setValue(this.value-this.keyIncrement,undefined,true)}break;default:c.preventDefault()}},doSnap:function(c){if(!this.increment||this.increment==1||!c){return c}var h=c,g=this.increment;var a=c%g;if(a!=0){h-=a;if(a*2>g){h+=g}else{if(a*2<-g){h-=g}}}return h.constrain(this.minValue,this.maxValue)},afterRender:function(){Ext.Slider.superclass.afterRender.apply(this,arguments);if(this.value!==undefined){var a=this.normalizeValue(this.value);if(a!==this.value){delete this.value;this.setValue(a,false)}else{this.moveThumb(this.translateValue(a),false)}}},getRatio:function(){var a=this.innerEl.getWidth();var c=this.maxValue-this.minValue;return c==0?a:(a/c)},normalizeValue:function(a){if(typeof a!="number"){a=parseInt(a)}a=Math.round(a);a=this.doSnap(a);a=a.constrain(this.minValue,this.maxValue);return a},setValue:function(c,a,g){c=this.normalizeValue(c);if(c!==this.value&&this.fireEvent("beforechange",this,c,this.value)!==false){this.value=c;this.moveThumb(this.translateValue(c),a!==false);this.fireEvent("change",this,c);if(g){this.fireEvent("changecomplete",this,c)}}},translateValue:function(a){var c=this.getRatio();return(a*c)-(this.minValue*c)-this.halfThumb},reverseValue:function(c){var a=this.getRatio();return(c+this.halfThumb+(this.minValue*a))/a},moveThumb:function(c,a){if(!a||this.animate===false){this.thumb.setLeft(c)}else{this.thumb.shift({left:c,stopFx:true,duration:0.35})}},focus:function(){this.focusEl.focus(10)},onBeforeDragStart:function(a){return !this.disabled},onDragStart:function(a){this.thumb.addClass("x-slider-thumb-drag");this.dragging=true;this.dragStartValue=this.value;this.fireEvent("dragstart",this,a)},onDrag:function(a){var c=this.innerEl.translatePoints(this.tracker.getXY());this.setValue(Math.round(this.reverseValue(c.left)),false);this.fireEvent("drag",this,a)},onDragEnd:function(a){this.thumb.removeClass("x-slider-thumb-drag");this.dragging=false;this.fireEvent("dragend",this,a);if(this.dragStartValue!=this.value){this.fireEvent("changecomplete",this,this.value)}},onDisable:function(){Ext.Slider.superclass.onDisable.call(this);this.thumb.addClass(this.disabledClass);if(Ext.isIE){var a=this.thumb.getXY();this.thumb.hide();this.innerEl.addClass(this.disabledClass).dom.disabled=true;if(!this.thumbHolder){this.thumbHolder=this.endEl.createChild({cls:"x-slider-thumb "+this.disabledClass})}this.thumbHolder.show().setXY(a)}},onEnable:function(){Ext.Slider.superclass.onEnable.call(this);this.thumb.removeClass(this.disabledClass);if(Ext.isIE){this.innerEl.removeClass(this.disabledClass).dom.disabled=false;if(this.thumbHolder){this.thumbHolder.hide()}this.thumb.show();this.syncThumb()}},onResize:function(a,c){this.innerEl.setWidth(a-(this.el.getPadding("l")+this.endEl.getPadding("r")));this.syncThumb()},syncThumb:function(){if(this.rendered){this.moveThumb(this.translateValue(this.value))}},getValue:function(){return this.value}});Ext.reg("slider",Ext.Slider);Ext.Slider.Vertical={onResize:function(a,c){this.innerEl.setHeight(c-(this.el.getPadding("t")+this.endEl.getPadding("b")));this.syncThumb()},getRatio:function(){var c=this.innerEl.getHeight();var a=this.maxValue-this.minValue;return c/a},moveThumb:function(c,a){if(!a||this.animate===false){this.thumb.setBottom(c)}else{this.thumb.shift({bottom:c,stopFx:true,duration:0.35})}},onDrag:function(c){var g=this.innerEl.translatePoints(this.tracker.getXY());var a=this.innerEl.getHeight()-g.top;this.setValue(this.minValue+Math.round(a/this.getRatio()),false);this.fireEvent("drag",this,c)},onClickChange:function(c){if(c.left>this.clickRange[0]&&c.left<this.clickRange[1]){var a=this.innerEl.getHeight()-c.top;this.setValue(this.minValue+Math.round(a/this.getRatio()),undefined,true)}}};Ext.StatusBar=Ext.extend(Ext.Toolbar,{cls:"x-statusbar",busyIconCls:"x-status-busy",busyText:"Loading...",autoClear:5000,activeThreadId:0,initComponent:function(){if(this.statusAlign=="right"){this.cls+=" x-status-right"}Ext.StatusBar.superclass.initComponent.call(this)},afterRender:function(){Ext.StatusBar.superclass.afterRender.call(this);var a=this.statusAlign=="right",c=Ext.get(this.nextBlock());if(a){this.tr.appendChild(c.dom)}else{c.insertBefore(this.tr.firstChild)}this.statusEl=c.createChild({cls:"x-status-text "+(this.iconCls||this.defaultIconCls||""),html:this.text||this.defaultText||""});this.statusEl.unselectable();this.spacerEl=c.insertSibling({tag:"td",style:"width:100%",cn:[{cls:"ytb-spacer"}]},a?"before":"after")},setStatus:function(h){h=h||{};if(typeof h=="string"){h={text:h}}if(h.text!==undefined){this.setText(h.text)}if(h.iconCls!==undefined){this.setIcon(h.iconCls)}if(h.clear){var j=h.clear,g=this.autoClear,a={useDefaults:true,anim:true};if(typeof j=="object"){j=Ext.applyIf(j,a);if(j.wait){g=j.wait}}else{if(typeof j=="number"){g=j;j=a}else{if(typeof j=="boolean"){j=a}}}j.threadId=this.activeThreadId;this.clearStatus.defer(g,this,[j])}return this},clearStatus:function(g){g=g||{};if(g.threadId&&g.threadId!==this.activeThreadId){return this}var c=g.useDefaults?this.defaultText:"",a=g.useDefaults?(this.defaultIconCls?this.defaultIconCls:""):"";if(g.anim){this.statusEl.fadeOut({remove:false,useDisplay:true,scope:this,callback:function(){this.setStatus({text:c,iconCls:a});this.statusEl.show()}})}else{this.statusEl.hide();this.setStatus({text:c,iconCls:a});this.statusEl.show()}return this},setText:function(a){this.activeThreadId++;this.text=a||"";if(this.rendered){this.statusEl.update(this.text)}return this},getText:function(){return this.text},setIcon:function(a){this.activeThreadId++;a=a||"";if(this.rendered){if(this.currIconCls){this.statusEl.removeClass(this.currIconCls);this.currIconCls=null}if(a.length>0){this.statusEl.addClass(a);this.currIconCls=a}}else{this.currIconCls=a}return this},showBusy:function(a){if(typeof a=="string"){a={text:a}}a=Ext.applyIf(a||{},{text:this.busyText,iconCls:this.busyIconCls});return this.setStatus(a)}});Ext.reg("statusbar",Ext.StatusBar);Ext.History=(function(){var j,g;var p=false;var h;function k(){var q=top.location.href,r=q.indexOf("#");return r>=0?q.substr(r+1):null}function a(){g.value=h}function l(q){h=q;Ext.History.fireEvent("change",q)}function m(r){var q=['<html><body><div id="state">',r,"</div></body></html>"].join("");try{var t=j.contentWindow.document;t.open();t.write(q);t.close();return true}catch(s){return false}}function c(){if(!j.contentWindow||!j.contentWindow.document){setTimeout(c,10);return}var t=j.contentWindow.document;var r=t.getElementById("state");var q=r?r.innerText:null;var s=k();setInterval(function(){t=j.contentWindow.document;r=t.getElementById("state");var w=r?r.innerText:null;var v=k();if(w!==q){q=w;l(q);top.location.hash=q;s=q;a()}else{if(v!==s){s=v;m(v)}}},50);p=true;Ext.History.fireEvent("ready",Ext.History)}function o(){h=g.value?g.value:k();if(Ext.isIE){c()}else{var q=k();setInterval(function(){var r=k();if(r!==q){q=r;l(q);a()}},50);p=true;Ext.History.fireEvent("ready",Ext.History)}}return{fieldId:"x-history-field",iframeId:"x-history-frame",events:{},init:function(r,q){if(p){Ext.callback(r,q,[this]);return}if(!Ext.isReady){Ext.onReady(function(){Ext.History.init(r,q)});return}g=Ext.getDom(Ext.History.fieldId);if(Ext.isIE){j=Ext.getDom(Ext.History.iframeId)}this.addEvents("ready","change");if(r){this.on("ready",r,q,{single:true})}o()},add:function(q,r){if(r!==false){if(this.getToken()==q){return true}}if(Ext.isIE){return m(q)}else{top.location.hash=q;return true}},back:function(){history.go(-1)},forward:function(){history.go(1)},getToken:function(){return p?h:k()}}})();Ext.apply(Ext.History,new Ext.util.Observable());Ext.debug={};(function(){var c;function a(){var j=new Ext.debug.ScriptsPanel();var l=new Ext.debug.LogPanel();var g=new Ext.debug.DomTree();var h=new Ext.TabPanel({activeTab:0,border:false,tabPosition:"bottom",items:[{title:"Debug Console",layout:"border",items:[l,j]},{title:"DOM Inspector",layout:"border",items:[g]}]});c=new Ext.Panel({id:"x-debug-browser",title:"Console",collapsible:true,animCollapse:false,style:"position:absolute;left:0;bottom:0;",height:200,logView:l,layout:"fit",tools:[{id:"close",handler:function(){c.destroy();c=null;Ext.EventManager.removeResizeListener(k)}}],items:h});c.render(document.body);c.resizer=new Ext.Resizable(c.el,{minHeight:50,handles:"n",pinned:true,transparent:true,resizeElement:function(){var m=this.proxy.getBox();this.proxy.hide();c.setHeight(m.height);return m}});function k(){c.setWidth(Ext.getBody().getViewSize().width)}Ext.EventManager.onWindowResize(k);k()}Ext.apply(Ext,{log:function(){if(!c){a()}c.logView.log.apply(c.logView,arguments)},logf:function(k,j,g,h){Ext.log(String.format.apply(String,arguments))},dump:function(k){if(typeof k=="string"||typeof k=="number"||typeof k=="undefined"||Ext.isDate(k)){Ext.log(k)}else{if(!k){Ext.log("null")}else{if(typeof k!="object"){Ext.log("Unknown return type")}else{if(Ext.isArray(k)){Ext.log("["+k.join(",")+"]")}else{var g=["{\n"];for(var h in k){var l=typeof k[h];if(l!="function"&&l!="object"){g.push(String.format("  {0}: {1},\n",h,k[h]))}}var j=g.join("");if(j.length>3){j=j.substr(0,j.length-2)}Ext.log(j+"\n}")}}}}},_timers:{},time:function(g){g=g||"def";Ext._timers[g]=new Date().getTime()},timeEnd:function(h,k){var j=new Date().getTime();h=h||"def";var g=String.format("{0} ms",j-Ext._timers[h]);Ext._timers[h]=new Date().getTime();if(k!==false){Ext.log("Timer "+(h=="def"?g:h+": "+g))}return g}})})();Ext.debug.ScriptsPanel=Ext.extend(Ext.Panel,{id:"x-debug-scripts",region:"east",minWidth:200,split:true,width:350,border:false,layout:"anchor",style:"border-width:0 0 0 1px;",initComponent:function(){this.scriptField=new Ext.form.TextArea({anchor:"100% -26",style:"border-width:0;"});this.trapBox=new Ext.form.Checkbox({id:"console-trap",boxLabel:"Trap Errors",checked:true});this.toolbar=new Ext.Toolbar([{text:"Run",scope:this,handler:this.evalScript},{text:"Clear",scope:this,handler:this.clear},"->",this.trapBox," "," "]);this.items=[this.toolbar,this.scriptField];Ext.debug.ScriptsPanel.superclass.initComponent.call(this)},evalScript:function(){var s=this.scriptField.getValue();if(this.trapBox.getValue()){try{var rt=eval(s);Ext.dump(rt===undefined?"(no return)":rt)}catch(e){Ext.log(e.message||e.descript)}}else{var rt=eval(s);Ext.dump(rt===undefined?"(no return)":rt)}},clear:function(){this.scriptField.setValue("");this.scriptField.focus()}});Ext.debug.LogPanel=Ext.extend(Ext.Panel,{autoScroll:true,region:"center",border:false,style:"border-width:0 1px 0 0",log:function(){var a=['<div style="padding:5px !important;border-bottom:1px solid #ccc;">',Ext.util.Format.htmlEncode(Array.prototype.join.call(arguments,", ")).replace(/\n/g,"<br />").replace(/\s/g,"&#160;"),"</div>"].join("");this.body.insertHtml("beforeend",a);this.body.scrollTo("top",100000)},clear:function(){this.body.update("");this.body.dom.scrollTop=0}});Ext.debug.DomTree=Ext.extend(Ext.tree.TreePanel,{enableDD:false,lines:false,rootVisible:false,animate:false,hlColor:"ffff9c",autoScroll:true,region:"center",border:false,initComponent:function(){Ext.debug.DomTree.superclass.initComponent.call(this);var m=false,a;var o=/^\s*$/;var j=Ext.util.Format.htmlEncode;var l=Ext.util.Format.ellipsis;var h=/\s?([a-z\-]*)\:([^;]*)(?:[;\s\n\r]*)/gi;function c(x){if(!x||x.nodeType!=1||x==document.body||x==document){return false}var s=[x],v=x;while((v=v.parentNode)&&v.nodeType==1&&v.tagName.toUpperCase()!="HTML"){s.unshift(v)}var w=a;for(var t=0,q=s.length;t<q;t++){w.expand();w=w.findChild("htmlNode",s[t]);if(!w){return false}}w.select();var r=w.ui.anchor;treeEl.dom.scrollTop=Math.max(0,r.offsetTop-10);w.highlight();return true}function k(q){var p=q.tagName;if(q.id){p+="#"+q.id}else{if(q.className){p+="."+q.className}}return p}function g(G,p,D){return;if(D&&D.unframe){D.unframe()}var z={};if(p&&p.htmlNode){if(frameEl.pressed){p.frame()}if(inspecting){return}addStyle.enable();reload.setDisabled(p.leaf);var w=p.htmlNode;stylePanel.setTitle(k(w));if(m&&!showAll.pressed){var H=w.style?w.style.cssText:"";if(H){var q;while((q=h.exec(H))!=null){z[q[1].toLowerCase()]=q[2]}}}else{if(m){var E=Ext.debug.cssList;var H=w.style,r=Ext.fly(w);if(H){for(var x=0,y=E.length;x<y;x++){var F=E[x];var B=H[F]||r.getStyle(F);if(B!=undefined&&B!==null&&B!==""){z[F]=B}}}}else{for(var A in w){var B=w[A];if((isNaN(A+10))&&B!=undefined&&B!==null&&B!==""&&!(Ext.isGecko&&A[0]==A[0].toUpperCase())){z[A]=B}}}}}else{if(inspecting){return}addStyle.disable();reload.disabled()}stylesGrid.setSource(z);stylesGrid.treeNode=p;stylesGrid.view.fitColumns()}this.loader=new Ext.tree.TreeLoader();this.loader.load=function(v,p){var q=v.htmlNode==document.body;var t=v.htmlNode.childNodes;for(var r=0,s;s=t[r];r++){if(q&&s.id=="x-debug-browser"){continue}if(s.nodeType==1){v.appendChild(new Ext.debug.HtmlNode(s))}else{if(s.nodeType==3&&!o.test(s.nodeValue)){v.appendChild(new Ext.tree.TreeNode({text:"<em>"+l(j(String(s.nodeValue)),35)+"</em>",cls:"x-tree-noicon"}))}}}p()};this.root=this.setRootNode(new Ext.tree.TreeNode("Ext"));a=this.root.appendChild(new Ext.debug.HtmlNode(document.getElementsByTagName("html")[0]))}});Ext.debug.HtmlNode=function(){var h=Ext.util.Format.htmlEncode;var c=Ext.util.Format.ellipsis;var a=/^\s*$/;var g=[{n:"id",v:"id"},{n:"className",v:"class"},{n:"name",v:"name"},{n:"type",v:"type"},{n:"src",v:"src"},{n:"href",v:"href"}];function k(p){for(var m=0,o;o=p.childNodes[m];m++){if(o.nodeType==1){return true}}return false}function j(o,r){var y=o.tagName.toLowerCase();var x="&lt;"+y;for(var p=0,q=g.length;p<q;p++){var t=g[p];var w=o[t.n];if(w&&!a.test(w)){x+=" "+t.v+"=&quot;<i>"+h(w)+"</i>&quot;"}}var m=o.style?o.style.cssText:"";if(m){x+=" style=&quot;<i>"+h(m.toLowerCase())+"</i>&quot;"}if(r&&o.childNodes.length>0){x+="&gt;<em>"+c(h(String(o.innerHTML)),35)+"</em>&lt;/"+y+"&gt;"}else{if(r){x+=" /&gt;"}else{x+="&gt;"}}return x}var l=function(p){var o=!k(p);this.htmlNode=p;this.tagName=p.tagName.toLowerCase();var m={text:j(p,o),leaf:o,cls:"x-tree-noicon"};l.superclass.constructor.call(this,m);this.attributes.htmlNode=p;if(!o){this.on("expand",this.onExpand,this);this.on("collapse",this.onCollapse,this)}};Ext.extend(l,Ext.tree.AsyncTreeNode,{cls:"x-tree-noicon",preventHScroll:true,refresh:function(o){var m=!k(this.htmlNode);this.setText(j(this.htmlNode,m));if(o){Ext.fly(this.ui.textNode).highlight()}},onExpand:function(){if(!this.closeNode&&this.parentNode){this.closeNode=this.parentNode.insertBefore(new Ext.tree.TreeNode({text:"&lt;/"+this.tagName+"&gt;",cls:"x-tree-noicon"}),this.nextSibling)}else{if(this.closeNode){this.closeNode.ui.show()}}},onCollapse:function(){if(this.closeNode){this.closeNode.ui.hide()}},render:function(m){l.superclass.render.call(this,m)},highlightNode:function(){},highlight:function(){},frame:function(){this.htmlNode.style.border="1px solid #0000ff"},unframe:function(){this.htmlNode.style.border=""}});return l}();(function(){Ext.namespace("Ext.ux");var g=false;Ext.ux.TinyMCE=Ext.extend(function(h){var j={tinymceSettings:{accessibility_focus:false}};Ext.apply(j,h);this.addEvents({editorcreated:true});Ext.ux.TinyMCE.superclass.constructor.call(this,j)},Ext.form.Field,{tinymceSettings:null,defaultAutoCreate:{tag:"div",style:{overflow:"hidden"},children:[{tag:"textarea"}]},width:200,height:200,initComponent:function(){this.tinymceSettings=this.tinymceSettings||{};Ext.ux.TinyMCE.initTinyMCE({language:this.tinymceSettings.language})},onRender:function(l,h){Ext.ux.TinyMCE.superclass.onRender.call(this,l,h);var k=this;var m=this.getEl();if(Ext.type(this.width)=="number"){m.setWidth(this.width);this.tinymceSettings.width=this.width}if(Ext.type(this.height)=="number"){m.setHeight(this.height);this.tinymceSettings.height=this.height}var j=m.child("textarea");this.textareaEl=j;if(this.name){j.set({name:this.name})}var o=j.id;this.ed=new tinymce.Editor(o,this.tinymceSettings);this.ed.onBeforeRenderUI.add(function(q,p){q.controlManager=new a(this,q)}.createDelegate(this));this.ed.onPostRender.add(function(q,p){q.windowManager=new c(this.ed)}.createDelegate(this));this.ed.onInit.add(function(){var q=Ext.get(Ext.DomQuery.selectNode("#"+this.ed.id+"_tbl td.mceToolbar"));var p=q.select("> table.mceToolbar");Ext.DomHelper.append(q,{tag:"div",style:{overflow:"hidden"}},true).appendChild(p)}.createDelegate(this));this.ed.render();tinyMCE.add(this.ed);this.fireEvent("editorcreated")},getName:function(){return this.rendered&&this.textareaEl.dom.name?this.textareaEl.dom.name:(this.name||"")},initValue:function(){if(this.value!==undefined){this.setValue(this.value)}else{var h=this.getEl().child("textarea",true);if(h.value.length>0){this.setValue(h.value)}}},onDestroy:function(){if(this.ed){tinyMCE.remove(this.ed)}Ext.ux.TinyMCE.superclass.onDestroy.call(this)},getValue:function(){if(!this.rendered||!this.ed.initialized){return this.value}var h=this.ed.getContent();if(h===this.emptyText||h===undefined){h=""}return h},setValue:function(h){this.value=h;if(this.rendered){this.withEd(function(){this.ed.undoManager.clear();this.ed.setContent(h===null||h===undefined?"":h);this.ed.startContent=this.ed.getContent({format:"raw"});this.validate()})}},isDirty:function(){if(this.disabled||!this.rendered){return false}return this.ed.isDirty()},syncValue:function(){if(this.rendered&&this.ed.initialized){this.ed.save()}},getEd:function(){return this.ed},onResize:function(j,h){if(this.rendered){this.withEd(function(){if(Ext.type(j)!="number"){j=this.el.getWidth()}if(Ext.type(h)!="number"){h=this.el.getHeight()}this.ed.theme.resizeTo(j,h)})}},focus:function(j,h){Ext.ux.TinyMCE.superclass.focus.call(this,j,h)},onFocus:function(){if(!this.hasFocus){this.hasFocus=true;this.startValue=this.getValue();this.withEd(function(){this.ed.focus();this.fireEvent("focus",this)})}},withEd:function(h){if(!this.ed){this.on("editorcreated",function(){this.withEd(h)},this)}else{if(this.ed.initialized){h.call(this)}else{this.ed.onInit.add(function(){h.defer(10,this)}.createDelegate(this))}}}});Ext.apply(Ext.ux.TinyMCE,{tinymcePlugins:"safari,pagebreak,style,layer,table,advhr,advimage,advlink,emotions,iespell,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,noneditable,visualchars,nonbreaking,xhtmlxtras,template",initTinyMCE:function(j){if(!g){var h={mode:"none",plugins:Ext.ux.TinyMCE.tinymcePlugins,theme:"advanced"};Ext.apply(h,j);tinyMCE.init(h);g=true}}});Ext.ComponentMgr.registerType("tinymce",Ext.ux.TinyMCE);var c=Ext.extend(function(h){c.superclass.constructor.call(this,h)},tinymce.WindowManager,{alert:function(j,h,k){Ext.MessageBox.alert("",j,function(){h.call(this)},k)},confirm:function(j,h,k){Ext.MessageBox.confirm("",j,function(l){h.call(this,l=="yes")},k)},open:function(h,k){h=h||{};k=k||{};if(!h.type){this.bookmark=this.editor.selection.getBookmark("simple")}h.width=parseInt(h.width||320);h.height=parseInt(h.height||240)+(tinymce.isIE?8:0);h.min_width=parseInt(h.min_width||150);h.min_height=parseInt(h.min_height||100);h.max_width=parseInt(h.max_width||2000);h.max_height=parseInt(h.max_height||2000);h.movable=h.resizable=true;k.mce_width=h.width;k.mce_height=h.height;k.mce_inline=true;this.features=h;this.params=k;var j=new Ext.Window({title:h.name,width:h.width,height:h.height,minWidth:h.min_width,minHeight:h.min_height,resizable:true,maximizable:h.maximizable==true,minimizable:h.minimizable==true,modal:true,layout:"fit",items:[{xtype:"iframepanel",defaultSrc:h.url||h.file}]});k.mce_window_id=j.getId();j.show(null,function(){if(h.left&&h.top){j.setPagePosition(h.left,h.top)}var l=j.getPosition();h.left=l[0];h.top=l[1];this.onOpen.dispatch(this,h,k)},this);j.setZIndex(89999);return j},close:function(j){if(!j.tinyMCEPopup||!j.tinyMCEPopup.id){c.superclass.close.call(this,j);return}var h=Ext.getCmp(j.tinyMCEPopup.id);if(h){this.onClose.dispatch(this);h.close()}},setTitle:function(k,j){if(!k.tinyMCEPopup||!k.tinyMCEPopup.id){c.superclass.setTitle.call(this,k,j);return}var h=Ext.getCmp(k.tinyMCEPopup.id);if(h){h.setTitle(j)}},resizeBy:function(j,l,m){var h=Ext.getCmp(m);if(h){var k=h.getSize();h.setSize(k.width+j,k.height+l)}},focus:function(j){var h=Ext.getCmp(j);if(h){h.setActive(true)}}});var a=Ext.extend(function(k,h,j){this.control=k;a.superclass.constructor.call(this,h,j)},tinymce.ControlManager,{control:null,createDropMenu:function(l,j){var h=a.superclass.createDropMenu.call(this,l,j);var k=h.showMenu;h.showMenu=function(m,p,o){k.call(this,m,p,o);Ext.fly("menu_"+this.id).setStyle("z-index",200001)};return h},createColorSplitButton:function(l,j){var h=a.superclass.createColorSplitButton.call(this,l,j);var k=h.showMenu;h.showMenu=function(m,p,o){k.call(this,m,p,o);Ext.fly(this.id+"_menu").setStyle("z-index",200001)};return h}})}());Ext.ux.ToastLars=function(){var c;function a(g,h){return['<div class="msg">','<div class="x-box-tl"><div class="x-box-tr"><div class="x-box-tc"></div></div></div>','<div class="x-box-ml"><div class="x-box-mr"><div class="x-box-mc"><h3>',g,"</h3>",h,"</div></div></div>",'<div class="x-box-bl"><div class="x-box-br"><div class="x-box-bc"></div></div></div>',"</div>"].join("")}return{msg:function(o,k,l){var j=l||2;if(!c){c=Ext.DomHelper.insertFirst(document.body,{id:"msg-div",style:"position:absolute;z-index:100000"},true)}var h=String.format.apply(String,Array.prototype.slice.call(arguments,1));var g=Ext.DomHelper.append(c,{html:a(o,h)},true);c.alignTo(document,"br-br",[-50,-5]);g.slideIn("b").pause(j).ghost("",{remove:true})}}}();Ext.ux.ToastLarsDiscussion=function(){var c;function a(g,h,j){return['<div class="msg">','<div class="x-box-tl"><div class="x-box-tr"><div class="x-box-tc"></div></div></div>','<div class="x-box-ml"><div class="x-box-mr"><div class="x-box-mc-discussion">',g,"<h3>",h,"</h3>",j,"</div></div></div>",'<div class="x-box-bl"><div class="x-box-br"><div class="x-box-bc"></div></div></div>',"</div>"].join("")}return{msg:function(k,p,l,o){var j=o||2;if(!c){c=Ext.DomHelper.insertFirst(document.body,{id:"msg-div",style:"position:absolute;z-index:100000"},true)}var h=String.format.apply(String,Array.prototype.slice.call(arguments,2));var g=Ext.DomHelper.append(c,{html:a(k,p,h)},true);c.alignTo(document,"br-br",[-50,-5]);g.slideIn("b").pause(j);g.on("mouseover",function(){g.ghost("",{remove:true})},g.dom)}}}();(function(){var EV=Ext.lib.Event;Ext.ux.ManagedIFrame=function(){var args=Array.prototype.slice.call(arguments,0),el=Ext.get(args[0]),config=args[0];if(el&&el.dom&&el.dom.tagName=="IFRAME"){config=args[1]||{}}else{config=args[0]||args[1]||{};el=config.autoCreate?Ext.get(Ext.DomHelper.append(config.autoCreate.parent||document.body,Ext.apply({tag:"iframe",src:(Ext.isIE&&Ext.isSecure)?Ext.SSL_SECURE_URL:""},config.autoCreate))):null}if(!el||el.dom.tagName!="IFRAME"){return el}el.dom.name||(el.dom.name=el.dom.id);el.dom.mifId=el.dom.id;this.addEvents({focus:true,blur:true,unload:true,domready:true,documentloaded:true,exception:true,message:true});if(config.listeners){this.listeners=config.listeners;Ext.ux.ManagedIFrame.superclass.constructor.call(this)}Ext.apply(el,this);el.addClass("x-managed-iframe");if(config.style){el.applyStyles(config.style)}el._maskEl=el.parent(".x-managed-iframe-mask")||el.parent().addClass("x-managed-iframe-mask");Ext.apply(el,{disableMessaging:config.disableMessaging===true,loadMask:Ext.apply({msg:"Loading..",msgCls:"x-mask-loading",maskEl:el._maskEl,hideOnReady:true,disabled:!config.loadMask},config.loadMask),_eventName:Ext.isIE?"onreadystatechange":"onload",_windowContext:null,eventsFollowFrameLinks:typeof config.eventsFollowFrameLinks=="undefined"?true:config.eventsFollowFrameLinks});el.dom[el._eventName]=el.loadHandler.createDelegate(el);var um=el.updateManager=new Ext.UpdateManager(el,true);um.showLoadIndicator=config.showLoadIndicator||false;if(config.src){el.setSrc(config.src)}else{var content=config.html||config.content||false;if(content){el.update.defer(10,el,[content])}}return Ext.ux.ManagedIFrame.Manager.register(el)};var MIM=Ext.ux.ManagedIFrame.Manager=function(){var frames={};var readyHandler=function(e,target){try{var id=target?target.mifId:null,frame;if((frame=this.getFrameById(id||target.id))&&frame._frameAction){frame.loadHandler({type:"domready"})}}catch(rhEx){}};var implementation={shimCls:"x-frame-shim",register:function(frame){frame.manager=this;frames[frame.id]=frames[frame.dom.name]={ref:frame,elCache:{}};return frame},deRegister:function(frame){frame._unHook();delete frames[frame.id];delete frames[frame.dom.name]},hideShims:function(){if(!this.shimApplied){return}Ext.select("."+this.shimCls,true).removeClass(this.shimCls+"-on");this.shimApplied=false},showShims:function(){if(!this.shimApplied){this.shimApplied=true;Ext.select("."+this.shimCls,true).addClass(this.shimCls+"-on")}},getFrameById:function(id){return typeof id=="string"?(frames[id]?frames[id].ref||null:null):null},getFrameByName:function(name){return this.getFrameById(name)},getFrameHash:function(frame){return frame.id?frames[frame.id]:null},eventProxy:function(e){if(!e){return}e=Ext.EventObject.setEvent(e);var be=e.browserEvent||e;if(e.type=="unload"){this._unHook()}if(!be.eventPhase||(be.eventPhase==(be.AT_TARGET||2))){return this.fireEvent(e.type,e)}},_flyweights:{},destroy:function(){if(this._domreadySignature){Ext.EventManager.un.apply(Ext.EventManager,this._domreadySignature)}},removeNode:Ext.isIE?function(frame,n){frame=MIM.getFrameHash(frame);if(frame&&n&&n.tagName!="BODY"){d=frame.scratchDiv||(frame.scratchDiv=frame.getDocument().createElement("div"));d.appendChild(n);d.innerHTML=""}}:function(frame,n){if(n&&n.parentNode&&n.tagName!="BODY"){n.parentNode.removeChild(n)}}};if(document.addEventListener){Ext.EventManager.on.apply(Ext.EventManager,implementation._domreadySignature=[window,"DOMFrameContentLoaded",readyHandler,implementation])}Ext.EventManager.on(window,"beforeunload",implementation.destroy,implementation);return implementation}();MIM.showDragMask=MIM.showShims;MIM.hideDragMask=MIM.hideShims;MIM.El=function(frame,el,forceNew){var frameObj;frame=(frameObj=MIM.getFrameHash(frame))?frameObj.ref:null;if(!frame){return null}var elCache=frameObj.elCache||(frameObj.elCache={});var dom=frame.getDom(el);if(!dom){return null}var id=dom.id;if(forceNew!==true&&id&&elCache[id]){return elCache[id]}this.dom=dom;this.id=id||Ext.id(dom)};MIM.El.get=function(frame,el){var ex,elm,id,doc;if(!frame||!el){return null}var frameObj;frame=(frameObj=MIM.getFrameHash(frame))?frameObj.ref:null;if(!frame){return null}var elCache=frameObj.elCache||(frameObj.elCache={});if(!(doc=frame.getDocument())){return null}if(typeof el=="string"){if(!(elm=frame.getDom(el))){return null}if(ex=elCache[el]){ex.dom=elm}else{ex=elCache[el]=new MIM.El(frame,elm)}return ex}else{if(el.tagName){if(!(id=el.id)){id=Ext.id(el)}if(ex=elCache[id]){ex.dom=el}else{ex=elCache[id]=new MIM.El(frame,el)}return ex}else{if(el instanceof MIM.El){if(el!=frameObj.docEl){el.dom=frame.getDom(el.id)||el.dom;elCache[el.id]=el}return el}else{if(el.isComposite){return el}else{if(Ext.isArray(el)){return frame.select(el)}else{if(el==doc){if(!frameObj.docEl){var f=function(){};f.prototype=MIM.El.prototype;frameObj.docEl=new f();frameObj.docEl.dom=doc}return frameObj.docEl}}}}}}return null};Ext.apply(MIM.El.prototype,Ext.Element.prototype);Ext.extend(Ext.ux.ManagedIFrame,Ext.util.Observable,{src:null,resetUrl:Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:"about:blank",setSrc:function(url,discardUrl,callback){var src=url||this.src||this.resetUrl;this._windowContext=null;this._unHook();this._frameAction=this.frameInit=this._domReady=false;if(Ext.isOpera){this.reset()}this._callBack=callback||false;this.showMask();(function(){var s=typeof src=="function"?src()||"":src;try{this._frameAction=true;this.dom.src=s;this.frameInit=true;this.checkDOM()}catch(ex){this.fireEvent("exception",this,ex)}}).defer(100,this);if(discardUrl!==true){this.src=src}return this},reset:function(src,callback){this.dom.src=src||this.resetUrl;if(typeof callback=="function"){callback.defer(100)}return this},scriptRE:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,update:function(content,loadScripts,callback){loadScripts=loadScripts||this.getUpdateManager().loadScripts||false;content=Ext.DomHelper.markup(content||"");content=loadScripts===true?content:content.replace(this.scriptRE,"");var doc;if(doc=this.getDocument()){this._frameAction=!!content.length;this._windowContext=this.src=null;this._callBack=callback||false;this._unHook();this.showMask();doc.open();doc.write(content);doc.close();this.frameInit=true;if(this._frameAction){this.checkDOM()}else{this.hideMask(true);if(this._callBack){this._callBack()}}}else{this.hideMask(true);if(this._callBack){this._callBack()}}return this},disableMessaging:true,_XFrameMessaging:function(){var tagStack={"$":[]};var isEmpty=function(v,allowBlank){return v===null||v===undefined||(!allowBlank?v==="":false)};window.sendMessage=function(message,tag,origin){var MIF;if(MIF=arguments.callee.manager){if(message._fromHost){var fn,result;var compTag=message.tag||tag||null;var mstack=!isEmpty(compTag)?tagStack[compTag.toLowerCase()]||[]:tagStack["$"];for(var i=0,l=mstack.length;i<l;i++){if(fn=mstack[i]){result=fn.apply(fn.__scope,arguments)===false?false:result;if(fn.__single){mstack[i]=null}if(result===false){break}}}return result}else{message={type:isEmpty(tag)?"message":"message:"+tag.toLowerCase().replace(/^\s+|\s+$/g,""),data:message,domain:origin||document.domain,uri:document.documentURI,source:window,tag:isEmpty(tag)?null:tag.toLowerCase()};try{return MIF.disableMessaging!==true?MIF.fireEvent.call(MIF,message.type,MIF,message):null}catch(ex){}return null}}};window.onhostmessage=function(fn,scope,single,tag){if(typeof fn=="function"){if(!isEmpty(fn.__index)){throw"onhostmessage: duplicate handler definition"+(tag?" for tag:"+tag:"")}var k=isEmpty(tag)?"$":tag.toLowerCase();tagStack[k]||(tagStack[k]=[]);Ext.apply(fn,{__tag:k,__single:single||false,__scope:scope||window,__index:tagStack[k].length});tagStack[k].push(fn)}else{throw"onhostmessage: function required"}};window.unhostmessage=function(fn){if(typeof fn=="function"&&typeof fn.__index!="undefined"){var k=fn.__tag||"$";tagStack[k][fn.__index]=null}}},get:function(el){return MIM.El.get(this,el)},fly:function(el,named){named=named||"_global";el=this.getDom(el);if(!el){return null}if(!MIM._flyweights[named]){MIM._flyweights[named]=new Ext.Element.Flyweight()}MIM._flyweights[named].dom=el;return MIM._flyweights[named]},getDom:function(el){var d;if(!el||!(d=this.getDocument())){return null}return el.dom?el.dom:(typeof el=="string"?d.getElementById(el):el)},select:function(selector,unique){var d;return(d=this.getDocument())?Ext.Element.select(selector,unique,d):null},query:function(selector){var d;return(d=this.getDocument())?Ext.DomQuery.select(selector,d):null},getDoc:function(){return this.get(this.getDocument())},removeNode:function(node){MIM.removeNode(this,this.getDom(node))},_unHook:function(){var elcache,h=MIM.getFrameHash(this)||{};if(this._hooked&&h&&(elcache=h.elCache)){for(var id in elcache){var el=elcache[id];delete elcache[id];if(el.removeAllListeners){el.removeAllListeners()}}if(h.docEl){h.docEl.removeAllListeners();h.docEl=null;delete h.docEl}}this._hooked=this._domReady=this._domFired=false},_renderHook:function(){this._windowContext=this.CSS=null;this._hooked=false;try{if(this.writeScript('(function(){(window.hostMIF = parent.Ext.get("'+this.dom.id+'"))._windowContext='+(Ext.isIE?"window":"{eval:function(s){return eval(s);}}")+";})();")){this._frameProxy||(this._frameProxy=MIM.eventProxy.createDelegate(this));var w=this.getWindow();EV.doAdd(w,"focus",this._frameProxy);EV.doAdd(w,"blur",this._frameProxy);EV.doAdd(w,"unload",this._frameProxy);if(this.disableMessaging!==true){this.loadFunction({name:"XMessage",fn:this._XFrameMessaging},false,true);var sm;if(sm=w.sendMessage){sm.manager=this}}this.CSS=new CSSInterface(this.getDocument())}}catch(ex){}return this.domWritable()},sendMessage:function(message,tag,origin){var win;if(this.disableMessaging!==true&&(win=this.getWindow())){tag||(tag=message.tag||"");tag=tag.toLowerCase();message=Ext.applyIf(message.data?message:{data:message},{type:Ext.isEmpty(tag)?"message":"message:"+tag,domain:origin||document.domain,uri:document.documentURI,source:window,tag:tag||null,_fromHost:this});return win.sendMessage?win.sendMessage.call(null,message,tag,origin):null}return null},_windowContext:null,getDocument:function(){var win=this.getWindow(),doc=null;try{doc=(Ext.isIE&&win?win.document:null)||this.dom.contentDocument||window.frames[this.id].document||null}catch(gdEx){return false}return doc},getBody:function(){var d;return(d=this.getDocument())?d.body:null},getDocumentURI:function(){var URI,d;try{URI=this.src&&(d=this.getDocument())?d.location.href:null}catch(ex){}return URI||this.src},getWindow:function(){var dom=this.dom,win=null;try{win=dom.contentWindow||window.frames[dom.name]||null}catch(gwEx){}return win},print:function(){try{var win=this.getWindow();if(Ext.isIE){win.focus()}win.print()}catch(ex){throw"print exception: "+(ex.description||ex.message||ex)}},destroy:function(){this.removeAllListeners();if(this.dom){this.dom[this._eventName]=null;Ext.ux.ManagedIFrame.Manager.deRegister(this);this._windowContext=null;if(Ext.isIE&&this.dom.src){this.dom.src="javascript:false"}this._maskEl=null;this.remove()}if(this.loadMask){Ext.apply(this.loadMask,{masker:null,maskEl:null})}},domWritable:function(){return !!this._windowContext},execScript:function(block,useDOM){try{if(this.domWritable()){if(useDOM){this.writeScript(block)}else{return this._windowContext.eval(block)}}else{throw"execScript:non-secure context"}}catch(ex){this.fireEvent("exception",this,ex);return false}return true},writeScript:function(block,attributes){attributes=Ext.apply({},attributes||{},{type:"text/javascript",text:block});try{var head,script,doc=this.getDocument();if(doc&&typeof doc.getElementsByTagName!="undefined"){if(!(head=doc.getElementsByTagName("head")[0])){head=doc.createElement("head");doc.getElementsByTagName("html")[0].appendChild(head)}if(head&&(script=doc.createElement("script"))){for(var attrib in attributes){if(attributes.hasOwnProperty(attrib)&&attrib in script){script[attrib]=attributes[attrib]}}return !!head.appendChild(script)}}}catch(ex){this.fireEvent("exception",this,ex)}return false},loadFunction:function(fn,useDOM,invokeIt){var name=fn.name||fn;var fn=fn.fn||window[fn];this.execScript(name+"="+fn,useDOM);if(invokeIt){this.execScript(name+"()")}},showMask:function(msg,msgCls,forced){var lmask;if((lmask=this.loadMask)&&(!lmask.disabled||forced)){if(lmask._vis){return}lmask.masker||(lmask.masker=Ext.get(lmask.maskEl||this.dom.parentNode||this.wrap({tag:"div",style:{position:"relative"}})));lmask._vis=true;lmask.masker.mask.defer(lmask.delay||5,lmask.masker,[msg||lmask.msg,msgCls||lmask.msgCls])}},hideMask:function(forced){var tlm;if((tlm=this.loadMask)&&!tlm.disabled&&tlm.masker){if(!forced&&(tlm.hideOnReady!==true&&this._domReady)){return}tlm._vis=false;tlm.masker.unmask.defer(tlm.delay||5,tlm.masker)}},loadHandler:function(e,target){if(!this.frameInit||(!this._frameAction&&!this.eventsFollowFrameLinks)){return}target||(target={});var rstatus=(e&&typeof e.type!=="undefined"?e.type:this.dom.readyState);switch(rstatus){case"loading":case"interactive":break;case"domready":if(this._domReady){return}this._domReady=true;if(this._hooked=this._renderHook()){this._domFired=true;this.fireEvent("domready",this)}case"domfail":this._domReady=true;this.hideMask();break;case"load":case"complete":if(!this._domReady){this.loadHandler({type:"domready",id:this.id})}this.hideMask(true);if(this._frameAction||this.eventsFollowFrameLinks){this.fireEvent.defer(50,this,["documentloaded",this])}this._frameAction=this._frameInit=false;if(this.eventsFollowFrameLinks){this._domFired=this._domReady=false}if(this._callBack){this._callBack(this)}break;default:}this.frameState=rstatus},checkDOM:function(win){if(Ext.isOpera||Ext.isGecko||!this._frameAction){return}var n=0,win=win||this.getWindow(),manager=this,domReady=false,max=300;var poll=function(){try{var doc=manager.getDocument(),body=null;if(doc===false){throw"Document Access Denied"}if(!manager._domReady){domReady=!!(doc&&doc.getElementsByTagName);domReady=domReady&&(body=doc.getElementsByTagName("body")[0])&&!!body.innerHTML.length}}catch(ex){n=max}if(!manager._frameAction||manager._domReady){return}if((++n<max)&&!domReady){setTimeout(arguments.callee,10);return}manager.loadHandler({type:domReady?"domready":"domfail"})};setTimeout(poll,40)}});var styleCamelRe=/(-[a-z])/gi;var styleCamelFn=function(m,a){return a.charAt(1).toUpperCase()};var CSSInterface=function(hostDocument){var doc;if(hostDocument){doc=hostDocument;return{rules:null,createStyleSheet:function(cssText,id){var ss;if(!doc){return}var head=doc.getElementsByTagName("head")[0];var rules=doc.createElement("style");rules.setAttribute("type","text/css");if(id){rules.setAttribute("id",id)}if(Ext.isIE){head.appendChild(rules);ss=rules.styleSheet;ss.cssText=cssText}else{try{rules.appendChild(doc.createTextNode(cssText))}catch(e){rules.cssText=cssText}head.appendChild(rules);ss=rules.styleSheet?rules.styleSheet:(rules.sheet||doc.styleSheets[doc.styleSheets.length-1])}this.cacheStyleSheet(ss);return ss},removeStyleSheet:function(id){if(!doc){return}var existing=doc.getElementById(id);if(existing){existing.parentNode.removeChild(existing)}},swapStyleSheet:function(id,url){this.removeStyleSheet(id);if(!doc){return}var ss=doc.createElement("link");ss.setAttribute("rel","stylesheet");ss.setAttribute("type","text/css");ss.setAttribute("id",id);ss.setAttribute("href",url);doc.getElementsByTagName("head")[0].appendChild(ss)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(ss){if(this.rules){this.rules={}}try{var ssRules=ss.cssRules||ss.rules;for(var j=ssRules.length-1;j>=0;--j){this.rules[ssRules[j].selectorText]=ssRules[j]}}catch(e){}},getRules:function(refreshCache){if(this.rules==null||refreshCache){this.rules={};if(doc){var ds=doc.styleSheets;for(var i=0,len=ds.length;i<len;i++){try{this.cacheStyleSheet(ds[i])}catch(e){}}}}return this.rules},getRule:function(selector,refreshCache){var rs=this.getRules(refreshCache);if(!Ext.isArray(selector)){return rs[selector]}for(var i=0;i<selector.length;i++){if(rs[selector[i]]){return rs[selector[i]]}}return null},updateRule:function(selector,property,value){if(!Ext.isArray(selector)){var rule=this.getRule(selector);if(rule){rule.style[property.replace(styleCamelRe,styleCamelFn)]=value;return true}}else{for(var i=0;i<selector.length;i++){if(this.updateRule(selector[i],property,value)){return true}}}return false}}}};Ext.ux.ManagedIframePanel=Ext.extend(Ext.Panel,{defaultSrc:null,bodyStyle:{height:"100%",width:"100%",position:"relative"},frameStyle:{overflow:"auto"},frameConfig:null,hideMode:!Ext.isIE?"nosize":"display",shimCls:Ext.ux.ManagedIFrame.Manager.shimCls,shimUrl:null,loadMask:false,stateful:false,animCollapse:Ext.isIE&&Ext.enableFx,autoScroll:false,closable:true,ctype:"Ext.ux.ManagedIframePanel",showLoadIndicator:false,unsupportedText:"Inline frames are NOT enabled/supported by your browser.",initComponent:function(){this.bodyCfg||(this.bodyCfg={cls:"x-managed-iframe-mask",children:[Ext.apply({tag:"iframe",frameborder:0,cls:"x-managed-iframe",style:this.frameStyle||null,html:this.unsupportedText||null},this.frameConfig?this.frameConfig.autoCreate||{}:false,Ext.isIE&&Ext.isSecure?{src:Ext.SSL_SECURE_URL}:false),{tag:"img",src:this.shimUrl||Ext.BLANK_IMAGE_URL,cls:this.shimCls,galleryimg:"no"}]});this.autoScroll=false;this.items=null;if(this.stateful!==false){this.stateEvents||(this.stateEvents=["documentloaded"])}Ext.ux.ManagedIframePanel.superclass.initComponent.call(this);this.monitorResize||(this.monitorResize=this.fitToParent);this.addEvents({documentloaded:true,domready:true,message:true,exception:true});this.addListener=this.on},doLayout:function(){if(this.fitToParent&&!this.ownerCt){var pos=this.getPosition(),size=(Ext.get(this.fitToParent)||this.getEl().parent()).getViewSize();this.setSize(size.width-pos[0],size.height-pos[1])}Ext.ux.ManagedIframePanel.superclass.doLayout.apply(this,arguments)},beforeDestroy:function(){if(this.rendered){if(this.tools){for(var k in this.tools){Ext.destroy(this.tools[k])}}if(this.header&&this.headerAsText){var s;if(s=this.header.child("span")){s.remove()}this.header.update("")}Ext.each(["iframe","shim","header","topToolbar","bottomToolbar","footer","loadMask","body","bwrap"],function(elName){if(this[elName]){if(typeof this[elName].destroy=="function"){this[elName].destroy()}else{Ext.destroy(this[elName])}this[elName]=null;delete this[elName]}},this)}Ext.ux.ManagedIframePanel.superclass.beforeDestroy.call(this)},onDestroy:function(){Ext.Panel.superclass.onDestroy.call(this)},onRender:function(ct,position){Ext.ux.ManagedIframePanel.superclass.onRender.call(this,ct,position);if(this.iframe=this.body.child("iframe.x-managed-iframe")){this.iframe.ownerCt=this;var El=Ext.Element;var mode=El[this.hideMode.toUpperCase()]||"x-hide-nosize";Ext.each([this[this.collapseEl],this.floating?null:this.getActionEl(),this.iframe],function(el){if(el){el.setVisibilityMode(mode)}},this);if(this.loadMask){this.loadMask=Ext.apply({disabled:false,maskEl:this.body,hideOnReady:true},this.loadMask)}if(this.iframe=new Ext.ux.ManagedIFrame(this.iframe,{loadMask:this.loadMask,showLoadIndicator:this.showLoadIndicator,disableMessaging:this.disableMessaging,style:this.frameStyle})){this.loadMask=this.iframe.loadMask;this.relayEvents(this.iframe,["blur","focus","unload","documentloaded","domready","exception","message"].concat(this._msgTagHandlers||[]));delete this._msgTagHandlers}this.getUpdater().showLoadIndicator=this.showLoadIndicator||false;var ownerCt=this.ownerCt;while(ownerCt){ownerCt.on("afterlayout",function(container,layout){var MIM=Ext.ux.ManagedIFrame.Manager,st=false;Ext.each(["north","south","east","west"],function(region){var reg;if((reg=layout[region])&&reg.splitEl){st=true;if(!reg.split._splitTrapped){reg.split.on("beforeresize",MIM.showShims,MIM);reg.split._splitTrapped=true}}},this);if(st&&!this._splitTrapped){this.on("resize",MIM.hideShims,MIM);this._splitTrapped=true}},this,{single:true});ownerCt=ownerCt.ownerCt}}this.shim=Ext.get(this.body.child("."+this.shimCls))},toggleShim:function(){if(this.shim&&this.shimCls){this.shim.toggleClass(this.shimCls+"-on")}},afterRender:function(container){var html=this.html;delete this.html;Ext.ux.ManagedIframePanel.superclass.afterRender.call(this);if(this.iframe){if(this.defaultSrc){this.setSrc()}else{if(html){this.iframe.update(typeof html=="object"?Ext.DomHelper.markup(html):html)}}}},sendMessage:function(){if(this.iframe){this.iframe.sendMessage.apply(this.iframe,arguments)}},on:function(name){var tagRE=/^message\:/i,n=null;if(typeof name=="object"){for(var na in name){if(!this.filterOptRe.test(na)&&tagRE.test(na)){n||(n=[]);n.push(na.toLowerCase())}}}else{if(tagRE.test(name)){n=[name.toLowerCase()]}}if(this.getFrame()&&n){this.relayEvents(this.iframe,n)}else{this._msgTagHandlers||(this._msgTagHandlers=[]);if(n){this._msgTagHandlers=this._msgTagHandlers.concat(n)}}Ext.ux.ManagedIframePanel.superclass.on.apply(this,arguments)},setSrc:function(url,discardUrl,callback){url=url||this.defaultSrc||false;if(!url){return this}if(url.url){callback=url.callback||false;discardUrl=url.discardUrl||false;url=url.url||false}var src=url||(Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:"");if(this.rendered&&this.iframe){this.iframe.setSrc(src,discardUrl,callback)}return this},getState:function(){var URI=this.iframe?this.iframe.getDocumentURI()||null:null;return Ext.apply(Ext.ux.ManagedIframePanel.superclass.getState.call(this)||{},URI?{defaultSrc:typeof URI=="function"?URI():URI}:null)},getUpdater:function(){return this.rendered?(this.iframe||this.body).getUpdater():null},getFrame:function(){return this.rendered?this.iframe:null},getFrameWindow:function(){return this.rendered&&this.iframe?this.iframe.getWindow():null},getFrameDocument:function(){return this.rendered&&this.iframe?this.iframe.getDocument():null},getFrameDoc:function(){return this.rendered&&this.iframe?this.iframe.getDoc():null},getFrameBody:function(){return this.rendered&&this.iframe?this.iframe.getBody():null},load:function(loadCfg){var um;if(um=this.getUpdater()){if(loadCfg&&loadCfg.renderer){um.setRenderer(loadCfg.renderer);delete loadCfg.renderer}um.update.apply(um,arguments)}return this},doAutoLoad:function(){this.load(typeof this.autoLoad=="object"?this.autoLoad:{url:this.autoLoad})}});Ext.reg("iframepanel",Ext.ux.ManagedIframePanel);Ext.ux.ManagedIframePortlet=Ext.extend(Ext.ux.ManagedIframePanel,{anchor:"100%",frame:true,collapseEl:"bwrap",collapsible:true,draggable:true,cls:"x-portlet"});Ext.reg("iframeportlet",Ext.ux.ManagedIframePortlet);Ext.apply(Ext.Element.prototype,{setVisible:function(visible,animate){if(!animate||!Ext.lib.Anim){if(this.visibilityMode==Ext.Element.DISPLAY){this.setDisplayed(visible)}else{if(this.visibilityMode==Ext.Element.VISIBILITY){this.fixDisplay();this.dom.style.visibility=visible?"visible":"hidden"}else{this[visible?"removeClass":"addClass"](String(this.visibilityMode))}}}else{var dom=this.dom;var visMode=this.visibilityMode;if(visible){this.setOpacity(0.01);this.setVisible(true)}this.anim({opacity:{to:(visible?1:0)}},this.preanim(arguments,1),null,0.35,"easeIn",function(){if(!visible){if(visMode==Ext.Element.DISPLAY){dom.style.display="none"}else{if(visMode==Ext.Element.VISIBILITY){dom.style.visibility="hidden"}else{Ext.get(dom).addClass(String(visMode))}}Ext.get(dom).setOpacity(1)}})}return this},isVisible:function(deep){var vis=!(this.getStyle("visibility")=="hidden"||this.getStyle("display")=="none"||this.hasClass(this.visibilityMode));if(deep!==true||!vis){return vis}var p=this.dom.parentNode;while(p&&p.tagName.toLowerCase()!="body"){if(!Ext.fly(p,"_isVisible").isVisible()){return false}p=p.parentNode}return true}});Ext.onReady(function(){var CSS=Ext.util.CSS,rules=[];CSS.getRule(".x-managed-iframe")||(rules.push(".x-managed-iframe {height:100%;width:100%;overflow:auto;}"));CSS.getRule(".x-managed-iframe-mask")||(rules.push(".x-managed-iframe-mask{width:100%;height:100%;position:relative;}"));if(!CSS.getRule(".x-frame-shim")){rules.push(".x-frame-shim {z-index:8500;position:absolute;top:0px;left:0px;background:transparent!important;overflow:hidden;display:none;}");rules.push(".x-frame-shim-on{width:100%;height:100%;display:block;zoom:1;}");rules.push(".ext-ie6 .x-frame-shim{margin-left:5px;margin-top:3px;}")}CSS.getRule(".x-hide-nosize")||(rules.push(".x-hide-nosize,.x-hide-nosize *{height:0px!important;width:0px!important;border:none;}"));if(!!rules.length){CSS.createStyleSheet(rules.join(" "))}})})();Ext.ux.TabCloseMenu=function(){var a,g,c;this.init=function(j){a=j;a.on("contextmenu",h)};function h(l,k,m){if(!g){g=new Ext.menu.Menu([{id:a.id+"-close",text:Lars.close_tab,handler:function(){a.remove(c)}},{id:a.id+"-close-others",text:Lars.close_tab_others,handler:function(){a.items.each(function(p){if(p.closable&&p!=c){a.remove(p)}})}}])}c=k;var j=g.items;j.get(a.id+"-close").setDisabled(!k.closable);var o=true;a.items.each(function(){if(this!=k&&this.closable){o=false;return false}});j.get(a.id+"-close-others").setDisabled(o);g.showAt(m.getPoint())}};(function(){Ext.ux.Media=function(k){Ext.apply(this,k||{});this.toString=this.mediaMarkup;this.initMedia()};var c=Ext.ux.Media;c.mediaTypes={PDF:Ext.apply({tag:"object",cls:"x-media x-media-pdf",type:"application/pdf",data:"@url",autoSize:true,params:{src:"@url"}},Ext.isIE?{classid:"CLSID:CA8A9780-280D-11CF-A24D-444553540000"}:false),PDFFRAME:{tag:"iframe",cls:"x-media x-media-pdf-frame",frameBorder:0,style:{overflow:"none",width:"100%",height:"100%"},src:"@url",autoSize:true},WMV:Ext.apply({tag:"object",cls:"x-media x-media-wmv",type:"application/x-mplayer2",data:"@url",autoSize:false,params:{filename:"@url",displaysize:0,autostart:"@start",showControls:"@controls",showStatusBar:"@status",showaudiocontrols:true,stretchToFit:true,Volume:"@volume",PlayCount:1}},Ext.isIE?{classid:"CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95",codebase:"http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701",type:"application/x-oleobject"}:{src:"@url"}),SWF:Ext.apply({tag:"object",cls:"x-media x-media-swf",type:"application/x-shockwave-flash",scripting:"sameDomain",standby:"Loading..",loop:true,start:false,unsupportedText:{cn:["The Adobe Flash Player is required.",{tag:"br"},{tag:"a",cn:[{tag:"img",src:"http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif"}],href:"http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash",target:"_flash"}]},params:{movie:"@url",menu:"@controls",play:"@start",quality:"high",allowscriptaccess:"@scripting",bgcolor:"#FFFFFF",wmode:"opaque",loop:"@loop"}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"}:{data:"@url"}),JWP:Ext.apply({tag:"object",cls:"x-media x-media-swf x-media-flv",type:"application/x-shockwave-flash",data:"@url",loop:false,start:false,params:{movie:"@url",flashVars:{autostart:"@start",repeat:"@loop",height:"@height",width:"@width",id:"@id"}}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0"}:false),QT:Ext.apply({tag:"object",cls:"x-media x-media-quicktime",type:"video/quicktime",style:{position:"relative","z-index":1,behavior:"url(#qt_event_source)"},scale:"aspect",unsupportedText:'<a href="http://www.apple.com/quicktime/download/">Get QuickTime</a>',scripting:true,volume:"50%",data:"@url",params:{src:Ext.isIE?"@url":null,href:"http://quicktime.com",target:"_blank",autoplay:"@start",targetcache:true,cache:true,wmode:"transparent",controller:"@controls",enablejavascript:"@scripting",loop:"@loop",scale:"@scale",volume:"@volume",QTSRC:"@url"}},Ext.isIE?{classid:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",codebase:"http://www.apple.com/qtactivex/qtplugin.cab#version=7,2,1,0"}:{PLUGINSPAGE:"http://www.apple.com/quicktime/download/"}),QTEVENTS:{tag:"object",id:"qt_event_source",cls:"x-media x-media-qtevents",type:"video/quicktime",params:{},classid:"clsid:CB927D12-4FF7-4a9e-A169-56E4B8A75598",codebase:"http://www.apple.com/qtactivex/qtplugin.cab#version=7,2,1,0"},WPMP3:Ext.apply({tag:"object",cls:"x-media x-media-audio x-media-wordpress",type:"application/x-shockwave-flash",data:"@url",start:true,loop:false,params:{movie:"@url",width:"@width",flashVars:{autostart:"@start",controller:"@controls",enablejavascript:"@scripting",loop:"@loop",scale:"@scale",initialvolume:"@volume",width:"@width",encode:"no",soundFile:""}}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"}:false),REAL:Ext.apply({tag:"object",cls:"x-media x-media-real",type:"audio/x-pn-realaudio",data:"@url",controls:"imagewindow,all",start:false,standby:"Loading Real Media Player components...",params:{src:"@url",autostart:"@start",center:false,maintainaspect:true,controller:"@controls",controls:"@controls",volume:"@volume",loop:"@loop",console:"_master",backgroundcolor:"#000000"}},Ext.isIE?{classid:"clsid:CFCDAA03-8BE4-11CF-B84B-0020AFBBCCFA"}:false),SVG:{tag:"object",cls:"x-media x-media-img x-media-svg",type:"image/svg+xml",data:"@url",params:{src:"@url"}},GIF:{tag:"img",cls:"x-media x-media-img x-media-gif",src:"@url"},JPEG:{tag:"img",cls:"x-media x-media-img x-media-jpeg",src:"@url"},JP2:{tag:"object",cls:"x-media x-media-img x-media-jp2",type:"image/jpeg2000-image",data:"@url"},PNG:{tag:"img",cls:"x-media x-media-img x-media-png",src:"@url"},HTM:{tag:"iframe",cls:"x-media x-media-html",frameBorder:0,style:{overflow:"auto",width:"100%",height:"100%"},src:"@url"},TXT:{tag:"object",cls:"x-media x-media-text",type:"text/plain",style:{overflow:"auto",width:"100%",height:"100%"},data:"@url"},RTF:{tag:"object",cls:"x-media x-media-rtf",type:"application/rtf",style:{overflow:"auto",width:"100%",height:"100%"},data:"@url"},JS:{tag:"object",cls:"x-media x-media-js",type:"text/javascript",style:{overflow:"auto",width:"100%",height:"100%"},data:"@url"},CSS:{tag:"object",cls:"x-media x-media-css",type:"text/css",style:{overflow:"auto",width:"100%",height:"100%"},data:"@url"},SILVERLIGHT:{tag:"object",cls:"x-media x-media-silverlight",type:"application/ag-plugin",data:"@url",params:{MinRuntimeVersion:"1.0",source:"@url"}},SILVERLIGHT2:{tag:"object",cls:"x-media x-media-silverlight",type:"application/x-silverlight-2-b2",data:"data:application/x-silverlight-2-b2,",params:{MinRuntimeVersion:"2.0"},unsupportedText:'<a href="http://go2.microsoft.com/fwlink/?LinkID=114576&v=2.0"><img style="border-width: 0pt;" alt="Get Microsoft Silverlight" src="http://go2.microsoft.com/fwlink/?LinkID=108181"/></a>'},DATAVIEW:{tag:"object",cls:"x-media x-media-dataview",classid:"CLSID:0ECD9B64-23AA-11D0-B351-00A0C9055D8E",type:"application/x-oleobject",unsupportedText:"MS Dataview Control is not installed"},"OWC:XLS":Ext.apply({tag:"object",cls:"x-media x-media-xls",type:"application/vnd.ms-excel",controltype:"excel",params:{DataType:"CSVURL",CSVURL:"@url",DisplayTitleBar:true,AutoFit:true}},Ext.isIE?{codebase:"file:msowc.cab",classid:"CLSID:0002E510-0000-0000-C000-000000000046"}:false),"OWC:CHART":Ext.apply({tag:"object",cls:"x-media x-media-xls",type:"application/vnd.ms-excel",data:"@url",params:{DataType:"CSVURL"}},Ext.isIE?{classid:"CLSID:0002E500-0000-0000-C000-000000000046"}:false),OFFICE:{tag:"object",cls:"x-media x-media-office",type:"application/x-msoffice",data:"@url"},POWERPOINT:Ext.apply({tag:"object",cls:"x-media x-media-ppt",type:"application/vnd.ms-powerpoint",file:"@url"},Ext.isIE?{classid:"CLSID:EFBD14F0-6BFB-11CF-9177-00805F8813FF"}:false),XML:{tag:"iframe",cls:"x-media x-media-xml",style:{overflow:"auto"},src:"@url"},VLC:{tag:"object",cls:"x-media x-media-vlc",type:"application/x-vlc-plugin",version:"VideoLAN.VLCPlugin.2",pluginspage:"http://www.videolan.org",data:"@url"},RDP:Ext.apply({tag:"object",cls:"x-media x-media-rdp",type:"application/rds",unsupportedText:'Remote Desktop Web Connection ActiveX control is required. <a target="_msd" href="http://go.microsoft.com/fwlink/?linkid=44333">Download it here</a>.',params:{Server:"@url",Fullscreen:false,StartConnected:false,DesktopWidth:"@width",DesktopHeight:"@height"}},Ext.isIE?{classid:"CLSID:9059f30f-4eb1-4bd2-9fdc-36f43a218f4a",CODEBASE:"msrdp.cab#version=5,2,3790,0"}:false)};var g=/4$/i;var h=function(m,k,l){if(m&&typeof m.readyState!="undefined"){(l||g).test(m.readyState)?k({type:"load"}):h.defer(10,null,[m,k])}};if(parseFloat(Ext.version)<2.1){throw"Ext.ux.Media and sub-classes are not License-Compatible with your Ext release."}Ext.extend(c,Object,{mediaObject:null,mediaCfg:null,mediaVersion:null,requiredVersion:null,unsupportedText:null,init:function(k){if(k&&this.getEl===undefined){Ext.applyIf(k,this)}},initMedia:function(){if(!Ext.isIE&&this.initialConfig){new c.VisibilityFix({mode:this.visibilityCls,hideMode:this.hideMode,elements:this.visModeTargets||null}).init(this)}if(this.events){this.addEvents("mediarender","mediaload")}},getMediaType:function(k){return c.mediaTypes[k]},assert:function(k,l){k=typeof k==="function"?k.call(k.scope||null):k;return Ext.value(k,l)},mediaMarkup:function(k,o,A,v){k=k||this.mediaCfg;if(!k){return""}var r=Ext.apply({url:false,autoSize:false},k);r.url=this.assert(r.url,false);if(r.mediaType){var y,l,s=Ext.Element;var q=Ext.apply({},this.getMediaType(this.assert(r.mediaType,false))||false);var t=Ext.apply(q.params||{},r.params||{});for(var z in t){if(t.hasOwnProperty(z)){r.children||(r.children=[]);l=this.assert(t[z],null);if(l!==null){r.children.push({tag:"param",name:z,value:typeof l==="object"?Ext.urlEncode(l):encodeURI(l)})}}}delete q.params;var w=this.assert(r.unsupportedText||this.unsupportedText||q.unsupportedText,null);if(w){r.children||(r.children=[]);r.children.push(w)}if(r.style&&typeof r.style!="object"){throw"Style must be JSON formatted"}r.style=this.assert(Ext.apply(q.style||{},r.style||{}),{});delete q.style;r.height=this.assert(A||r.height||q.height||r.style.height,null);r.width=this.assert(o||r.width||q.width||r.style.width,null);r=Ext.apply({tag:"object"},r,q);if(r.height||r.autoSize){Ext.apply(r.style,{height:s.addUnits(r.autoSize?"100%":r.height,s.prototype.defaultUnit)})}if(r.width||r.autoSize){Ext.apply(r.style,{width:s.addUnits(r.autoSize?"100%":r.width,s.prototype.defaultUnit)})}r.id||(r.id=Ext.id());r.name=this.assert(r.name,r.id);var x={url:r.url||"",height:(/%$/.test(r.height))?r.height:parseInt(r.height,10)||100,width:(/%$/.test(r.width))?r.width:parseInt(r.width,10)||100,scripting:this.assert(r.scripting,false),controls:this.assert(r.controls,false),scale:this.assert(r.scale,1),status:this.assert(r.status,false),start:this.assert(r.start,false),loop:this.assert(r.loop,false),volume:this.assert(r.volume,20),id:r.id};delete r.url;delete r.mediaType;delete r.controls;delete r.status;delete r.start;delete r.loop;delete r.scale;delete r.scripting;delete r.volume;delete r.autoSize;delete r.params;delete r.unsupportedText;delete r.renderOnResize;delete r.listeners;delete r.height;delete r.width;return Ext.DomHelper.markup(r).replace(/(%40url|@url)/g,x.url).replace(/(%40start|@start)/g,x.start+"").replace(/(%40controls|@controls)/g,x.controls+"").replace(/(%40scale|@scale)/g,x.scale+"").replace(/(%40status|@status)/g,x.status+"").replace(/(%40id|@id)/g,x.id+"").replace(/(%40loop|@loop)/g,x.loop+"").replace(/(%40volume|@volume)/g,x.volume+"").replace(/(%40scripting|@scripting)/g,x.scripting+"").replace(/(%40width|@width)/g,x.width+"").replace(/(%40height|@height)/g,x.height+"")}else{var w=this.assert(r.unsupportedText||this.unsupportedText||q.unsupportedText,null);w=w?Ext.DomHelper.markup(w):null;return String.format(w||"Media Configuration/Plugin Error"," "," ")}},setMask:function(k){if(this.mediaMask&&!this.mediaMask.enable){k=Ext.get(k);if(this.mediaMask=new Ext.ux.IntelliMask(k||this[this.mediaEl],Ext.apply({fixElementForMedia:true},this.mediaMask))){this.mediaMask.el.addClass("x-media-mask")}}},renderMedia:function(r,m,q,k,o){if(!Ext.isReady){Ext.onReady(this.renderMedia.createDelegate(this,Array.prototype.slice.call(arguments,0)));return}var p=(this.mediaCfg=r||this.mediaCfg);m=Ext.get(m||this.lastCt||(this.mediaObject?this.mediaObject.dom.parentNode:null));this.onBeforeMedia.call(this,p,m,q,k,o);if(m){this.lastCt=m;var l;if(p&&(l=this.mediaMarkup(p,k,o,m))){this.setMask(m);this.clearMedia();m.update(l);if(this.mediaMask&&this.autoMask){this.mediaMask.show()}}}this.onAfterMedia(m)},clearMedia:function(){if(Ext.isReady&&this.mediaObject){try{this.mediaObject.removeAllListeners();this.mediaObject.remove()}catch(k){}}this.mediaObject=null},onBeforeMedia:function(q,o,p){var k=q||this.mediaCfg,l;if(k&&(l=this.getMediaType(k.mediaType))){k.autoSize=k.autoSize||l.autoSize===true;if(k.autoSize&&(o=Ext.isReady?Ext.get(o||this.lastCt):null)){k.height=o.getHeight(true)||this.assert(k.height,"auto");k.width=o.getWidth(true)||this.assert(k.width,"auto")}}},onMediaLoad:function(k){if(k&&k.type=="load"){this.fireEvent("mediaload",this,this.mediaObject);if(this.mediaMask&&this.autoMask){this.mediaMask.hide()}}},onAfterMedia:function(l){if(this.mediaCfg&&l&&(this.mediaObject=l.child(".x-media"))){this.mediaObject.ownerCt=this;if(this.mediaCfg.tag!=="object"){this.mediaObject.on({load:this.onMediaLoad,scope:this,single:true})}h(this.mediaObject.dom,this.onMediaLoad.createDelegate(this));var k;if(k=this.mediaCfg.listeners||null){this.mediaObject.on(k)}this.fireEvent("mediarender",this,this.mediaObject)}},getInterface:function(){return this.mediaObject?this.mediaObject.dom||null:null},detectVersion:Ext.emptyFn,autoMask:Ext.isIE});var j=function(){};Ext.extend(j,Object,{hideMode:!Ext.isIE?"nosize":"display",animCollapse:false,visibilityCls:!Ext.isIE?"x-hide-nosize":null,autoScroll:true,shadow:false,bodyStyle:{position:"relative"},resizeMedia:function(l,k,m){var o=this.mediaCfg;if(o&&this.boxReady){if(arguments.length>3&&(!this.mediaObject||o.renderOnResize)){this.refreshMedia(this[this.mediaEl])}}},onAfterRender:function(k){if(this.mediaCfg.renderOnResize){this.on("resize",this.resizeMedia,this)}else{this.renderMedia(this.mediaCfg,this[this.mediaEl]||this.getEl())}},doAutoLoad:Ext.emptyFn,refreshMedia:function(k){if(this.mediaCfg){this.renderMedia(null,k)}},mediaMask:false});Ext.ux.MediaComponent=Ext.extend(Ext.BoxComponent,{ctype:"Ext.ux.MediaComponent",autoEl:"div",cls:"x-media-comp",mediaEl:"el",getId:function(){return this.id||(this.id="media-comp"+(++Ext.Component.AUTO_ID))},initComponent:function(){this.visModeTargets=[this.actionMode];this.initMedia();Ext.ux.MediaComponent.superclass.initComponent.apply(this,arguments)},onRender:function(){Ext.ux.MediaComponent.superclass.onRender.apply(this,arguments);this.onAfterRender()},afterRender:function(k){this.setAutoScroll();Ext.ux.MediaComponent.superclass.afterRender.apply(this,arguments)},beforeDestroy:function(){this.clearMedia();Ext.destroy(this.mediaMask,this.loadMask);Ext.ux.MediaComponent.superclass.beforeDestroy.call(this)},setAutoScroll:function(){if(this.rendered&&this.autoScroll){this.getEl().setOverflow("auto")}}});Ext.apply(Ext.ux.MediaComponent.prototype,Ext.ux.Media.prototype);Ext.apply(Ext.ux.MediaComponent.prototype,j.prototype);Ext.reg("media",Ext.ux.MediaComponent);c.Panel=Ext.extend(Ext.Panel,{ctype:"Ext.ux.Media.Panel",cls:"x-media-panel",mediaEl:"body",initComponent:function(){this.visModeTargets=[this.collapseEl,this.floating?null:this.actionMode];this.initMedia();this.html=this.contentEl=this.items=null;c.Panel.superclass.initComponent.call(this)},onRender:function(){c.Panel.superclass.onRender.apply(this,arguments);this.onAfterRender()},beforeDestroy:function(){this.clearMedia();c.Panel.superclass.beforeDestroy.call(this)}});Ext.apply(c.Panel.prototype,c.prototype);Ext.apply(c.Panel.prototype,j.prototype);Ext.reg("mediapanel",Ext.ux.MediaPanel=c.Panel);c.Window=Ext.extend(Ext.Window,{cls:"x-media-window",ctype:"Ext.ux.Media.Window",mediaEl:"body",initComponent:function(){this.visModeTargets=[this.collapseEl,this.floating?null:this.actionMode];this.initMedia();this.html=this.contentEl=this.items=null;c.Window.superclass.initComponent.call(this)},onRender:function(){c.Window.superclass.onRender.apply(this,arguments);this.onAfterRender()},beforeDestroy:function(){this.clearMedia();c.Window.superclass.beforeDestroy.call(this)}});Ext.apply(c.Window.prototype,c.prototype);Ext.apply(c.Window.prototype,j.prototype);Ext.reg("mediawindow",Ext.ux.MediaWindow=c.Window);Ext.onReady(function(){var k=Ext.util.CSS,l=[];k.getRule(".x-media")||(l.push(".x-media{width:100%;height:100%;display:block;overflow:none;outline:none;}"));k.getRule(".x-media-mask")||(l.push(".x-media-mask{width:100%;height:100%;position:relative;zoom:1;}"));k.getRule(".x-media-img")||(l.push(".x-media-img{background-color:transparent;width:auto;height:auto;zoom:1;}"));k.getRule(".x-hide-nosize")||(l.push(".x-hide-nosize,.x-hide-nosize *{height:0px!important;width:0px!important;border:none!important;}"));if(!!l.length){k.createStyleSheet(l.join(""))}});Ext.apply(Ext.Element.prototype,{setVisible:function(o,k){if(!k||!Ext.lib.Anim){if(this.visibilityMode===Ext.Element.DISPLAY){this.setDisplayed(o)}else{if(this.visibilityMode===Ext.Element.VISIBILITY){this.fixDisplay();this.dom.style.visibility=o?"visible":"hidden"}else{this[o?"removeClass":"addClass"](String(this.visibilityMode))}}}else{var m=this.dom;var l=this.visibilityMode;if(o){this.setOpacity(0.01);this.setVisible(true)}this.anim({opacity:{to:(o?1:0)}},this.preanim(arguments,1),null,0.35,"easeIn",function(){if(!o){if(l===Ext.Element.DISPLAY){m.style.display="none"}else{if(l===Ext.Element.VISIBILITY){m.style.visibility="hidden"}else{Ext.get(m).addClass(String(l))}}Ext.get(m).setOpacity(1)}})}return this},isVisible:function(k){var l=!(this.getStyle("visibility")==="hidden"||this.getStyle("display")==="none"||this.hasClass(this.visibilityMode));if(k!==true||!l){return l}var m=this.dom.parentNode;while(m&&m.tagName.toLowerCase()!=="body"){if(!Ext.fly(m,"_isVisible").isVisible()){return false}m=m.parentNode}return true}});var a={mask:function(p,m,l){if(this.getStyle("position")=="static"){this.setStyle("position","relative")}if(this._maskMsg){this._maskMsg.remove()}if(this._mask){}this._mask||(this._mask=Ext.DomHelper.append(this.dom,{cls:l||"ext-el-mask"},true));!Ext.isIE||this.addClass("x-masked");this._mask.setVisible(true);if(typeof p=="string"){var o=this._maskMsg=Ext.DomHelper.append(this.dom,{cls:"ext-el-mask-msg "+m||"",style:{visibility:"hidden"},cn:{tag:"div",html:p}},true);var k=this.dom;(function(){try{o.center(k).setVisible(true)}catch(q){}}).defer(4)}if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&this.getStyle("height")=="auto"){this._mask.setSize(this.dom.clientWidth,this.getHeight())}return this._mask},unmask:function(k){if(this._maskMsg){if(k){this._maskMsg.remove();delete this._maskMsg}else{this._maskMsg.setVisible.defer(4,this._maskMsg,[false])}}if(this._mask){if(k){this._mask.remove();delete this._mask}else{this._mask.setVisible(false)}}this.removeClass("x-masked")}};c.VisibilityFix=function(k){k||(k={});this.init=function(l){l.hideMode=k.hideMode||l.hideMode;l.on("render",function(q){var m=[q.collapseEl,(q.floating?null:q.actionMode)].concat(k.elements||[]);var o=Ext.Element;var p=k.mode||q.visibilityCls||o[q.hideMode.toUpperCase()]||o.VISIBILITY;Ext.each(m,function(r){var s=q[r]||r;if(s&&s.setVisibilityMode){s.setVisibilityMode(p)}})},l,{single:true})}};Ext.ux.IntelliMask=function(l,k){Ext.apply(this,k);this.el=Ext.get(l);this.removeMask=Ext.value(this.removeMask,true);if(l&&this.fixElementForMedia){Ext.apply(l,a)}};Ext.ux.IntelliMask.prototype={msg:"Loading Media...",msgCls:"x-mask-loading",zIndex:null,disabled:false,active:false,autoHide:false,disable:function(){this.disabled=true},enable:function(){this.disabled=false},show:function(r,q,p,m){if(this.disabled||!this.el){return null}var o={},k=this.autoHide;m=parseInt(m,10)||20;if(typeof r=="object"){o=r;r=o.msg;q=o.msgCls;p=o.fn;k=typeof o.autoHide!="undefined"?o.autoHide:k;m=o.fnDelay||m}var l=this.el.mask(r||this.msg,q||this.msgCls);this.active=!!this.el._mask;if(this.active){if(this.zIndex){this.el._mask.setStyle("z-index",this.zIndex);if(this.el._maskMsg){this.el._maskMsg.setStyle("z-index",this.zIndex+1)}}}if(typeof p==="function"){p.defer(m,o.scope||null)}else{m=0}if(k&&(k=parseInt(k,10)||2000)){this.hide.defer(k+(m||0),this)}return this.active?{mask:this.el._mask,maskMsg:this.el._maskMsg}:null},hide:function(k){if(this.el){this.el.unmask(k||this.removeMask)}this.active=false;return this},destroy:function(){this.hide(true);this.el=null}}})();(function(){var a=Ext.ux.Media;a.Flash=Ext.extend(a,{constructor:function(){a.Flash.superclass.constructor.apply(this,arguments)},SWFObject:null,varsName:"flashVars",hideMode:"nosize",mediaType:Ext.apply({tag:"object",cls:"x-media x-media-swf",type:"application/x-shockwave-flash",loop:null,scripting:"sameDomain",start:true,unsupportedText:{cn:["The Adobe Flash Player{0}is required.",{tag:"br"},{tag:"a",cn:[{tag:"img",src:"http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif"}],href:"http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash",target:"_flash"}]},params:{movie:"@url",play:"@start",loop:"@loop",quality:"high",bgcolor:"#FFFFFF",allowscriptaccess:"@scripting"}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"}:{data:"@url"}),getMediaType:function(){return this.mediaType},initMedia:function(){var p=Ext.apply({},this.mediaCfg||{});var m=(this.requiredVersion=p.requiredVersion||this.requiredVersion||false);var g=!!(this.playerVersion=this.detectVersion());var k=g&&(m?this.assertVersion(m):true);var j=this.assert(p.unsupportedText||this.unsupportedText||(this.getMediaType()||{}).unsupportedText,null);if(j){j=Ext.DomHelper.markup(j);j=p.unsupportedText=String.format(j,(m?" "+m+" ":" "),(this.playerVersion?" "+this.playerVersion+" ":" Not installed."))}if(!k){this.autoMask=false;var h=g&&this.assertVersion("6.0.65");if(h&&p.installUrl){p=p.installDescriptor||{tag:"object",cls:"x-media x-media-swf x-media-swfinstaller",id:"SWFInstaller",type:"application/x-shockwave-flash",data:"@url",url:p.installUrl,width:(/%$/.test(p.width))?p.width:((parseInt(p.width,10)||0)<310?310:p.width),height:(/%$/.test(p.height))?p.height:((parseInt(p.height,10)||0)<138?138:p.height),loop:false,start:true,unsupportedText:j,params:{quality:"high",movie:"@url",allowscriptacess:"always",align:"middle",bgcolor:"#3A6EA5",pluginspage:p.pluginsPage||this.pluginsPage||"http://www.adobe.com/go/getflashplayer"}};p.params[this.varsName]="MMredirectURL="+(p.installRedirect||window.location)+"&MMplayerType="+(Ext.isIE?"ActiveX":"Plugin")+"&MMdoctitle="+(document.title=document.title.slice(0,47)+" - Flash Player Installation")}else{p.mediaType=null}}if(p.eventSynch){p.params||(p.params={});var o=p.params[this.varsName]||(p.params[this.varsName]={});if(typeof o==="string"){o=Ext.urlDecode(o,true)}var l=(p.eventSynch===true?{allowedDomain:o.allowedDomain||document.location.hostname,elementID:p.id||(p.id=Ext.id()),eventHandler:"Ext.ux.Media.Flash.eventSynch"}:p.eventSynch);Ext.apply(p.params,{allowscriptaccess:"always"})[this.varsName]=Ext.applyIf(o,l)}delete p.requiredVersion;delete p.installUrl;delete p.installRedirect;delete p.installDescriptor;delete p.eventSynch;p.mediaType="SWF";this.mediaCfg=p;if(this.events){this.addEvents("flashinit","fscommand")}a.Flash.superclass.initMedia.call(this)},assertVersion:function(j){var h;j||(j=[]);if(Ext.isArray(j)){h=j}else{h=String(j).split(".")}h=(h.concat([0,0,0,0])).slice(0,3);var g;if(!(g=this.playerVersion||(this.playerVersion=this.detectVersion()))){return false}if(g.major>parseFloat(h[0])){return true}else{if(g.major==parseFloat(h[0])){if(g.minor>parseFloat(h[1])){return true}else{if(g.minor==parseFloat(h[1])){if(g.rev>=parseFloat(h[2])){return true}}}}}return false},detectVersion:function(){if(this.mediaVersion){return this.mediaVersion}var g=false;var h=function(o){return o&&!!o.length?{major:o[0]!==null?parseInt(o[0],10):0,minor:o[1]!==null?parseInt(o[1],10):0,rev:o[2]!==null?parseInt(o[2],10):0,toString:function(){return this.major+"."+this.minor+"."+this.rev}}:false};var l=null;if(Ext.isIE){try{l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(m){try{l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");g=[6,0,21];l.allowscriptaccess="always"}catch(j){if(g&&g[0]===6){return h(g)}}try{l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(k){}}if(l){g=l.GetVariable("$version").split(" ")[1].split(",")}}else{if(navigator.plugins&&navigator.mimeTypes.length){l=navigator.plugins["Shockwave Flash"];if(l&&l.description){g=l.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".")}}}return(this.mediaVersion=h(g))},_applyFixes:function(){var h;if(Ext.isIE&&Ext.isWindows&&(h=this.SWFObject)){h.style.display="none";if(h.readyState==4){for(var g in h){if(typeof h[g]=="function"){h[g]=null}}}}},onAfterMedia:function(g){a.Flash.superclass.onAfterMedia.apply(this,arguments);this.SWFObject=this.getInterface();if(this.mediaObject){var h=this.mediaObject.id;if(Ext.isIE){if(!(Ext.query("script[for="+h+"]").length)){c('var c;if(c=Ext.getCmp("'+this.id+'")){c.onfsCommand.apply(c,arguments);}',{event:"FSCommand",htmlFor:h})}}else{window[h+"_DoFSCommand"]||(window[h+"_DoFSCommand"]=this.onfsCommand.createDelegate(this))}}},clearMedia:function(){if(this.mediaObject){var g=this.mediaObject.id;if(Ext.isIE){Ext.select("script[for="+g+"]",true).remove()}else{window[g+"_DoFSCommand"]=null;delete window[g+"_DoFSCommand"]}this._applyFixes()}a.Flash.superclass.clearMedia.call(this);this.SWFObject=null},getSWFObject:function(){return this.getInterface()},onfsCommand:function(h,g){if(this.events){this.fireEvent("fscommand",this,h,g)}},setVariable:function(h,j){var g=this.getInterface();if(g&&typeof g.SetVariable!="undefined"){g.SetVariable(h,j);return true}return false},getVariable:function(h){var g=this.getInterface();if(g&&typeof g.GetVariable!="undefined"){return g.GetVariable(h)}return undefined},onFlashInit:function(){if(this.mediaMask&&this.autoMask){this.mediaMask.hide()}this.fireEvent.defer(10,this,["flashinit",this,this.getInterface()])},_handleSWFEvent:function(h){var g=h.type||h||false;if(g){if(this.events&&!this.events[String(g)]){this.addEvents(String(g))}return this.fireEvent.apply(this,[String(g),this].concat(Array.prototype.slice.call(arguments,0)))}}});a.Flash.eventSynch=function(g,j){var h=Ext.get(g);if(h&&h.ownerCt){return h.ownerCt._handleSWFEvent.apply(h.ownerCt,Array.prototype.slice.call(arguments,1))}};Ext.ux.FlashComponent=Ext.extend(Ext.ux.MediaComponent,{ctype:"Ext.ux.FlashComponent",getId:function(){return this.id||(this.id="flash-comp"+(++Ext.Component.AUTO_ID))}});Ext.apply(Ext.ux.FlashComponent.prototype,a.Flash.prototype);Ext.reg("uxflash",Ext.ux.FlashComponent);a.Panel.Flash=Ext.extend(a.Panel,{ctype:"Ext.ux.Media.Panel.Flash"});Ext.apply(a.Panel.Flash.prototype,a.Flash.prototype);Ext.reg("flashpanel",Ext.ux.MediaPanel.Flash=Ext.ux.FlashPanel=a.Panel.Flash);Ext.reg("uxflashpanel",a.Panel.Flash);Ext.ux.FlashWindow=(a.Window.Flash=Ext.extend(a.Window,{ctype:"Ext.ux.FlashWindow",animCollpase:true}));Ext.apply(a.Window.Flash.prototype,a.Flash.prototype);var c=function(o,h){h=Ext.apply({},h||{},{type:"text/javascript",text:o});try{var k,g,m=document;if(m&&m.getElementsByTagName){if(!(k=m.getElementsByTagName("head")[0])){k=m.createElement("head");m.getElementsByTagName("html")[0].appendChild(k)}if(k&&(g=m.createElement("script"))){for(var l in h){if(h.hasOwnProperty(l)&&l in g){g[l]=h[l]}}return !!k.appendChild(g)}}}catch(j){}return false}})();var AMTcgiloc="http://www.imathas.com/cgi-bin/mimetex.cgi";var AScgiloc="http://www.imathas.com/imathas/filter/graph/svgimg.php";var mathcolor="blue";var mathfontsize="1em";var mathfontfamily="serif";var automathrecognize=false;var checkForMathML=true;var notifyIfNoMathML=false;var alertIfNoMathML=false;var translateOnLoad=true;var translateLaTeX=true;var translateLaTeXformatting=true;var translateASCIIMath=true;var translateASCIIsvg=true;var avoidinnerHTML=false;var displaystyle=true;var showasciiformulaonhover=true;var decimalsign=".";var AMdelimiter1="`",AMescape1="\\\\`";var AMdocumentId="wikitext";var checkforprocessasciimathinmoodle=false;var dsvglocation="";var isIE=document.createElementNS==null;var noMathML=false,translated=false;if(isIE){document.write('<object id="mathplayer"  classid="clsid:32F66A20-7614-11D4-BD11-00104BD3F987"></object>');document.write('<?import namespace="m" implementation="#mathplayer"?>')}function setStylesheet(a){var g="AMMLcustomStyleSheet";var c=document.getElementById(g);if(document.createStyleSheet){if(c){c.parentNode.removeChild(c)}document.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd","&nbsp;<style id='"+g+"'>"+a+"</style>")}else{if(c){c.replaceChild(document.createTextNode(a),c.firstChild)}else{c=document.createElement("style");c.type="text/css";c.id=g;c.appendChild(document.createTextNode(a));document.getElementsByTagName("head")[0].appendChild(c)}}}setStylesheet("#AMMLcloseDiv {font-size:0.8em; padding-top:1em; color:#014}\n#AMMLwarningBox {position:absolute; width:100%; top:0; left:0; z-index:200; text-align:center; font-size:1em; font-weight:bold; padding:0.5em 0 0.5em 0; color:#ffc; background:#c30}");function init(){var c,a=new Array();if(document.getElementById==null){alert("This webpage requires a recent browser such as Mozilla Firefox/Netscape 7+ or Internet Explorer 6+ with MathPlayer and Adobe SVGviewer");return null}if(checkForMathML&&(c=checkMathML())){a.push(c)}if(checkIfSVGavailable&&(c=checkSVG())){a.push(c)}if(a.length>0){displayWarnings(a)}initSymbols();return true}function checkMathML(){if(navigator.product&&navigator.product=="Gecko"){var h=navigator.userAgent.toLowerCase().match(/rv:\s*([\d\.]+)/);if(h!=null){h=h[1].split(".");if(h.length<3){h[2]=0}if(h.length<2){h[1]=0}}if(h!=null&&10000*h[0]+100*h[1]+1*h[2]>=10100){noMathML=null}else{noMathML=true}}else{if(navigator.appName.slice(0,9)=="Microsoft"){try{var g=new ActiveXObject("MathPlayer.Factory.1");noMathML=null}catch(a){noMathML=true}}else{noMathML=true}}if(noMathML&&notifyIfNoMathML){var c="To view the ASCIIMathML notation use Internet Explorer + MathPlayer or Mozilla Firefox 2.0 or later.";if(alertIfNoMathML){alert(c)}else{return c}}}function hideWarning(){var a=document.getElementsByTagName("body")[0];a.removeChild(document.getElementById("AMMLwarningBox"));a.onclick=null}function displayWarnings(c){var g,k,j=createElementXHTML("div");var a=document.getElementsByTagName("body")[0];a.onclick=hideWarning;j.id="AMMLwarningBox";for(g=0;g<c.length;g++){k=createElementXHTML("div");k.appendChild(document.createTextNode(c[g]));k.style.paddingBottom="1.0em";j.appendChild(k)}j.appendChild(createElementXHTML("p"));j.appendChild(document.createTextNode("For instructions see the "));var h=createElementXHTML("a");h.appendChild(document.createTextNode("ASCIIMathML"));h.setAttribute("href","http://www.chapman.edu/~jipsen/asciimath.html");j.appendChild(h);j.appendChild(document.createTextNode(" homepage"));h=createElementXHTML("div");h.id="AMMLcloseDiv";h.appendChild(document.createTextNode("(click anywhere to close this warning)"));j.appendChild(h);var a=document.getElementsByTagName("body")[0];a.insertBefore(j,a.childNodes[0])}function translate(c){if(!translated){translated=true;var a=document.getElementsByTagName("body")[0];var g=document.getElementById(AMdocumentId);if(translateLaTeX){LMprocessNode((g!=null?g:a))}if(translateASCIIMath){AMprocessNode((g!=null?g:a),false,c)}}}function createElementXHTML(a){if(isIE){return document.createElement(a)}else{return document.createElementNS("http://www.w3.org/1999/xhtml",a)}}function createMmlNode(a,g){if(isIE){var c=document.createElement("m:"+a)}else{var c=document.createElementNS("http://www.w3.org/1998/Math/MathML",a)}if(g){c.appendChild(g)}return c}var AMcal=[61237,8492,61238,61239,8496,8497,61240,8459,8464,61241,61242,8466,8499,61243,61244,61245,61246,8475,61247,61248,61249,61250,61251,61252,61253,61254];var AMfrk=[61277,61278,8493,61279,61280,61281,61282,8460,8465,61283,61284,61285,61286,61287,61288,61289,61290,8476,61291,61292,61293,61294,61295,61296,61297,8488];var AMbbb=[61324,61325,8450,61326,61327,61328,61329,8461,61330,61331,61332,61333,61334,8469,61335,8473,8474,8477,61336,61337,61338,61339,61340,61341,61342,8484];var CONST=0,UNARY=1,BINARY=2,INFIX=3,LEFTBRACKET=4,RIGHTBRACKET=5,SPACE=6,UNDEROVER=7,DEFINITION=8,LEFTRIGHT=9,TEXT=10,BIG=11,LONG=12,STRETCHY=13,MATRIX=14;var AMquote={input:'"',tag:"mtext",output:"mbox",tex:null,ttype:TEXT};var AMsymbols=[{input:"alpha",tag:"mi",output:"\u03B1",tex:null,ttype:CONST},{input:"beta",tag:"mi",output:"\u03B2",tex:null,ttype:CONST},{input:"chi",tag:"mi",output:"\u03C7",tex:null,ttype:CONST},{input:"delta",tag:"mi",output:"\u03B4",tex:null,ttype:CONST},{input:"Delta",tag:"mo",output:"\u0394",tex:null,ttype:CONST},{input:"epsi",tag:"mi",output:"\u03B5",tex:"epsilon",ttype:CONST},{input:"varepsilon",tag:"mi",output:"\u025B",tex:null,ttype:CONST},{input:"eta",tag:"mi",output:"\u03B7",tex:null,ttype:CONST},{input:"gamma",tag:"mi",output:"\u03B3",tex:null,ttype:CONST},{input:"Gamma",tag:"mo",output:"\u0393",tex:null,ttype:CONST},{input:"iota",tag:"mi",output:"\u03B9",tex:null,ttype:CONST},{input:"kappa",tag:"mi",output:"\u03BA",tex:null,ttype:CONST},{input:"lambda",tag:"mi",output:"\u03BB",tex:null,ttype:CONST},{input:"Lambda",tag:"mo",output:"\u039B",tex:null,ttype:CONST},{input:"mu",tag:"mi",output:"\u03BC",tex:null,ttype:CONST},{input:"nu",tag:"mi",output:"\u03BD",tex:null,ttype:CONST},{input:"omega",tag:"mi",output:"\u03C9",tex:null,ttype:CONST},{input:"Omega",tag:"mo",output:"\u03A9",tex:null,ttype:CONST},{input:"phi",tag:"mi",output:"\u03C6",tex:null,ttype:CONST},{input:"varphi",tag:"mi",output:"\u03D5",tex:null,ttype:CONST},{input:"Phi",tag:"mo",output:"\u03A6",tex:null,ttype:CONST},{input:"pi",tag:"mi",output:"\u03C0",tex:null,ttype:CONST},{input:"Pi",tag:"mo",output:"\u03A0",tex:null,ttype:CONST},{input:"psi",tag:"mi",output:"\u03C8",tex:null,ttype:CONST},{input:"Psi",tag:"mi",output:"\u03A8",tex:null,ttype:CONST},{input:"rho",tag:"mi",output:"\u03C1",tex:null,ttype:CONST},{input:"sigma",tag:"mi",output:"\u03C3",tex:null,ttype:CONST},{input:"Sigma",tag:"mo",output:"\u03A3",tex:null,ttype:CONST},{input:"tau",tag:"mi",output:"\u03C4",tex:null,ttype:CONST},{input:"theta",tag:"mi",output:"\u03B8",tex:null,ttype:CONST},{input:"vartheta",tag:"mi",output:"\u03D1",tex:null,ttype:CONST},{input:"Theta",tag:"mo",output:"\u0398",tex:null,ttype:CONST},{input:"upsilon",tag:"mi",output:"\u03C5",tex:null,ttype:CONST},{input:"xi",tag:"mi",output:"\u03BE",tex:null,ttype:CONST},{input:"Xi",tag:"mo",output:"\u039E",tex:null,ttype:CONST},{input:"zeta",tag:"mi",output:"\u03B6",tex:null,ttype:CONST},{input:"*",tag:"mo",output:"\u22C5",tex:"cdot",ttype:CONST},{input:"**",tag:"mo",output:"\u22C6",tex:"star",ttype:CONST},{input:"//",tag:"mo",output:"/",tex:null,ttype:CONST},{input:"\\\\",tag:"mo",output:"\\",tex:"backslash",ttype:CONST},{input:"setminus",tag:"mo",output:"\\",tex:null,ttype:CONST},{input:"xx",tag:"mo",output:"\u00D7",tex:"times",ttype:CONST},{input:"-:",tag:"mo",output:"\u00F7",tex:"divide",ttype:CONST},{input:"@",tag:"mo",output:"\u2218",tex:"circ",ttype:CONST},{input:"o+",tag:"mo",output:"\u2295",tex:"oplus",ttype:CONST},{input:"ox",tag:"mo",output:"\u2297",tex:"otimes",ttype:CONST},{input:"o.",tag:"mo",output:"\u2299",tex:"odot",ttype:CONST},{input:"sum",tag:"mo",output:"\u2211",tex:null,ttype:UNDEROVER},{input:"prod",tag:"mo",output:"\u220F",tex:null,ttype:UNDEROVER},{input:"^^",tag:"mo",output:"\u2227",tex:"wedge",ttype:CONST},{input:"^^^",tag:"mo",output:"\u22C0",tex:"bigwedge",ttype:UNDEROVER},{input:"vv",tag:"mo",output:"\u2228",tex:"vee",ttype:CONST},{input:"vvv",tag:"mo",output:"\u22C1",tex:"bigvee",ttype:UNDEROVER},{input:"nn",tag:"mo",output:"\u2229",tex:"cap",ttype:CONST},{input:"nnn",tag:"mo",output:"\u22C2",tex:"bigcap",ttype:UNDEROVER},{input:"uu",tag:"mo",output:"\u222A",tex:"cup",ttype:CONST},{input:"uuu",tag:"mo",output:"\u22C3",tex:"bigcup",ttype:UNDEROVER},{input:"!=",tag:"mo",output:"\u2260",tex:"ne",ttype:CONST},{input:":=",tag:"mo",output:":=",tex:null,ttype:CONST},{input:"lt",tag:"mo",output:"<",tex:null,ttype:CONST},{input:"<=",tag:"mo",output:"\u2264",tex:"le",ttype:CONST},{input:"lt=",tag:"mo",output:"\u2264",tex:"leq",ttype:CONST},{input:">=",tag:"mo",output:"\u2265",tex:"ge",ttype:CONST},{input:"geq",tag:"mo",output:"\u2265",tex:null,ttype:CONST},{input:"-<",tag:"mo",output:"\u227A",tex:"prec",ttype:CONST},{input:"-lt",tag:"mo",output:"\u227A",tex:null,ttype:CONST},{input:">-",tag:"mo",output:"\u227B",tex:"succ",ttype:CONST},{input:"-<=",tag:"mo",output:"\u2AAF",tex:"preceq",ttype:CONST},{input:">-=",tag:"mo",output:"\u2AB0",tex:"succeq",ttype:CONST},{input:"in",tag:"mo",output:"\u2208",tex:null,ttype:CONST},{input:"!in",tag:"mo",output:"\u2209",tex:"notin",ttype:CONST},{input:"sub",tag:"mo",output:"\u2282",tex:"subset",ttype:CONST},{input:"sup",tag:"mo",output:"\u2283",tex:"supset",ttype:CONST},{input:"sube",tag:"mo",output:"\u2286",tex:"subseteq",ttype:CONST},{input:"supe",tag:"mo",output:"\u2287",tex:"supseteq",ttype:CONST},{input:"-=",tag:"mo",output:"\u2261",tex:"equiv",ttype:CONST},{input:"~=",tag:"mo",output:"\u2245",tex:"cong",ttype:CONST},{input:"~~",tag:"mo",output:"\u2248",tex:"approx",ttype:CONST},{input:"prop",tag:"mo",output:"\u221D",tex:"propto",ttype:CONST},{input:"and",tag:"mtext",output:"and",tex:null,ttype:SPACE},{input:"or",tag:"mtext",output:"or",tex:null,ttype:SPACE},{input:"not",tag:"mo",output:"\u00AC",tex:"neg",ttype:CONST},{input:"=>",tag:"mo",output:"\u21D2",tex:"implies",ttype:CONST},{input:"if",tag:"mo",output:"if",tex:null,ttype:SPACE},{input:"<=>",tag:"mo",output:"\u21D4",tex:"iff",ttype:CONST},{input:"AA",tag:"mo",output:"\u2200",tex:"forall",ttype:CONST},{input:"EE",tag:"mo",output:"\u2203",tex:"exists",ttype:CONST},{input:"_|_",tag:"mo",output:"\u22A5",tex:"bot",ttype:CONST},{input:"TT",tag:"mo",output:"\u22A4",tex:"top",ttype:CONST},{input:"|--",tag:"mo",output:"\u22A2",tex:"vdash",ttype:CONST},{input:"|==",tag:"mo",output:"\u22A8",tex:"models",ttype:CONST},{input:"(",tag:"mo",output:"(",tex:null,ttype:LEFTBRACKET},{input:")",tag:"mo",output:")",tex:null,ttype:RIGHTBRACKET},{input:"[",tag:"mo",output:"[",tex:null,ttype:LEFTBRACKET},{input:"]",tag:"mo",output:"]",tex:null,ttype:RIGHTBRACKET},{input:"{",tag:"mo",output:"{",tex:null,ttype:LEFTBRACKET},{input:"}",tag:"mo",output:"}",tex:null,ttype:RIGHTBRACKET},{input:"|",tag:"mo",output:"|",tex:null,ttype:LEFTRIGHT},{input:"(:",tag:"mo",output:"\u2329",tex:"langle",ttype:LEFTBRACKET},{input:":)",tag:"mo",output:"\u232A",tex:"rangle",ttype:RIGHTBRACKET},{input:"<<",tag:"mo",output:"\u2329",tex:null,ttype:LEFTBRACKET},{input:">>",tag:"mo",output:"\u232A",tex:null,ttype:RIGHTBRACKET},{input:"{:",tag:"mo",output:"{:",tex:null,ttype:LEFTBRACKET,invisible:true},{input:":}",tag:"mo",output:":}",tex:null,ttype:RIGHTBRACKET,invisible:true},{input:"int",tag:"mo",output:"\u222B",tex:null,ttype:CONST},{input:"dx",tag:"mi",output:"{:d x:}",tex:null,ttype:DEFINITION},{input:"dy",tag:"mi",output:"{:d y:}",tex:null,ttype:DEFINITION},{input:"dz",tag:"mi",output:"{:d z:}",tex:null,ttype:DEFINITION},{input:"dt",tag:"mi",output:"{:d t:}",tex:null,ttype:DEFINITION},{input:"oint",tag:"mo",output:"\u222E",tex:null,ttype:CONST},{input:"del",tag:"mo",output:"\u2202",tex:"partial",ttype:CONST},{input:"grad",tag:"mo",output:"\u2207",tex:"nabla",ttype:CONST},{input:"+-",tag:"mo",output:"\u00B1",tex:"pm",ttype:CONST},{input:"O/",tag:"mo",output:"\u2205",tex:"emptyset",ttype:CONST},{input:"oo",tag:"mo",output:"\u221E",tex:"infty",ttype:CONST},{input:"aleph",tag:"mo",output:"\u2135",tex:null,ttype:CONST},{input:"...",tag:"mo",output:"...",tex:"ldots",ttype:CONST},{input:":.",tag:"mo",output:"\u2234",tex:"therefore",ttype:CONST},{input:"/_",tag:"mo",output:"\u2220",tex:"angle",ttype:CONST},{input:"\\ ",tag:"mo",output:"\u00A0",tex:null,ttype:CONST},{input:"quad",tag:"mo",output:"\u00A0\u00A0",tex:null,ttype:CONST},{input:"qquad",tag:"mo",output:"\u00A0\u00A0\u00A0\u00A0",tex:null,ttype:CONST},{input:"cdots",tag:"mo",output:"\u22EF",tex:null,ttype:CONST},{input:"vdots",tag:"mo",output:"\u22EE",tex:null,ttype:CONST},{input:"ddots",tag:"mo",output:"\u22F1",tex:null,ttype:CONST},{input:"diamond",tag:"mo",output:"\u22C4",tex:null,ttype:CONST},{input:"square",tag:"mo",output:"\u25A1",tex:null,ttype:CONST},{input:"|__",tag:"mo",output:"\u230A",tex:"lfloor",ttype:CONST},{input:"__|",tag:"mo",output:"\u230B",tex:"rfloor",ttype:CONST},{input:"|~",tag:"mo",output:"\u2308",tex:"lceiling",ttype:CONST},{input:"~|",tag:"mo",output:"\u2309",tex:"rceiling",ttype:CONST},{input:"CC",tag:"mo",output:"\u2102",tex:null,ttype:CONST},{input:"NN",tag:"mo",output:"\u2115",tex:null,ttype:CONST},{input:"QQ",tag:"mo",output:"\u211A",tex:null,ttype:CONST},{input:"RR",tag:"mo",output:"\u211D",tex:null,ttype:CONST},{input:"ZZ",tag:"mo",output:"\u2124",tex:null,ttype:CONST},{input:"f",tag:"mi",output:"f",tex:null,ttype:UNARY,func:true},{input:"g",tag:"mi",output:"g",tex:null,ttype:UNARY,func:true},{input:"lim",tag:"mo",output:"lim",tex:null,ttype:UNDEROVER},{input:"Lim",tag:"mo",output:"Lim",tex:null,ttype:UNDEROVER},{input:"sin",tag:"mo",output:"sin",tex:null,ttype:UNARY,func:true},{input:"cos",tag:"mo",output:"cos",tex:null,ttype:UNARY,func:true},{input:"tan",tag:"mo",output:"tan",tex:null,ttype:UNARY,func:true},{input:"sinh",tag:"mo",output:"sinh",tex:null,ttype:UNARY,func:true},{input:"cosh",tag:"mo",output:"cosh",tex:null,ttype:UNARY,func:true},{input:"tanh",tag:"mo",output:"tanh",tex:null,ttype:UNARY,func:true},{input:"cot",tag:"mo",output:"cot",tex:null,ttype:UNARY,func:true},{input:"sec",tag:"mo",output:"sec",tex:null,ttype:UNARY,func:true},{input:"csc",tag:"mo",output:"csc",tex:null,ttype:UNARY,func:true},{input:"log",tag:"mo",output:"log",tex:null,ttype:UNARY,func:true},{input:"ln",tag:"mo",output:"ln",tex:null,ttype:UNARY,func:true},{input:"det",tag:"mo",output:"det",tex:null,ttype:UNARY,func:true},{input:"dim",tag:"mo",output:"dim",tex:null,ttype:CONST},{input:"mod",tag:"mo",output:"mod",tex:null,ttype:CONST},{input:"gcd",tag:"mo",output:"gcd",tex:null,ttype:UNARY,func:true},{input:"lcm",tag:"mo",output:"lcm",tex:null,ttype:UNARY,func:true},{input:"lub",tag:"mo",output:"lub",tex:null,ttype:CONST},{input:"glb",tag:"mo",output:"glb",tex:null,ttype:CONST},{input:"min",tag:"mo",output:"min",tex:null,ttype:UNDEROVER},{input:"max",tag:"mo",output:"max",tex:null,ttype:UNDEROVER},{input:"uarr",tag:"mo",output:"\u2191",tex:"uparrow",ttype:CONST},{input:"darr",tag:"mo",output:"\u2193",tex:"downarrow",ttype:CONST},{input:"rarr",tag:"mo",output:"\u2192",tex:"rightarrow",ttype:CONST},{input:"->",tag:"mo",output:"\u2192",tex:"to",ttype:CONST},{input:">->",tag:"mo",output:"\u21A3",tex:"rightarrowtail",ttype:CONST},{input:"->>",tag:"mo",output:"\u21A0",tex:"twoheadrightarrow",ttype:CONST},{input:">->>",tag:"mo",output:"\u2916",tex:"twoheadrightarrowtail",ttype:CONST},{input:"|->",tag:"mo",output:"\u21A6",tex:"mapsto",ttype:CONST},{input:"larr",tag:"mo",output:"\u2190",tex:"leftarrow",ttype:CONST},{input:"harr",tag:"mo",output:"\u2194",tex:"leftrightarrow",ttype:CONST},{input:"rArr",tag:"mo",output:"\u21D2",tex:"Rightarrow",ttype:CONST},{input:"lArr",tag:"mo",output:"\u21D0",tex:"Leftarrow",ttype:CONST},{input:"hArr",tag:"mo",output:"\u21D4",tex:"Leftrightarrow",ttype:CONST},{input:"sqrt",tag:"msqrt",output:"sqrt",tex:null,ttype:UNARY},{input:"root",tag:"mroot",output:"root",tex:null,ttype:BINARY},{input:"frac",tag:"mfrac",output:"/",tex:null,ttype:BINARY},{input:"/",tag:"mfrac",output:"/",tex:null,ttype:INFIX},{input:"stackrel",tag:"mover",output:"stackrel",tex:null,ttype:BINARY},{input:"_",tag:"msub",output:"_",tex:null,ttype:INFIX},{input:"^",tag:"msup",output:"^",tex:null,ttype:INFIX},{input:"hat",tag:"mover",output:"\u005E",tex:null,ttype:UNARY,acc:true},{input:"bar",tag:"mover",output:"\u00AF",tex:"overline",ttype:UNARY,acc:true},{input:"vec",tag:"mover",output:"\u2192",tex:null,ttype:UNARY,acc:true},{input:"dot",tag:"mover",output:".",tex:null,ttype:UNARY,acc:true},{input:"ddot",tag:"mover",output:"..",tex:null,ttype:UNARY,acc:true},{input:"ul",tag:"munder",output:"\u0332",tex:"underline",ttype:UNARY,acc:true},{input:"text",tag:"mtext",output:"text",tex:null,ttype:TEXT},{input:"mbox",tag:"mtext",output:"mbox",tex:null,ttype:TEXT},AMquote,{input:"bb",tag:"mstyle",atname:"fontweight",atval:"bold",output:"bb",tex:null,ttype:UNARY},{input:"mathbf",tag:"mstyle",atname:"fontweight",atval:"bold",output:"mathbf",tex:null,ttype:UNARY},{input:"sf",tag:"mstyle",atname:"fontfamily",atval:"sans-serif",output:"sf",tex:null,ttype:UNARY},{input:"mathsf",tag:"mstyle",atname:"fontfamily",atval:"sans-serif",output:"mathsf",tex:null,ttype:UNARY},{input:"bbb",tag:"mstyle",atname:"mathvariant",atval:"double-struck",output:"bbb",tex:null,ttype:UNARY,codes:AMbbb},{input:"mathbb",tag:"mstyle",atname:"mathvariant",atval:"double-struck",output:"mathbb",tex:null,ttype:UNARY,codes:AMbbb},{input:"cc",tag:"mstyle",atname:"mathvariant",atval:"script",output:"cc",tex:null,ttype:UNARY,codes:AMcal},{input:"mathcal",tag:"mstyle",atname:"mathvariant",atval:"script",output:"mathcal",tex:null,ttype:UNARY,codes:AMcal},{input:"tt",tag:"mstyle",atname:"fontfamily",atval:"monospace",output:"tt",tex:null,ttype:UNARY},{input:"mathtt",tag:"mstyle",atname:"fontfamily",atval:"monospace",output:"mathtt",tex:null,ttype:UNARY},{input:"fr",tag:"mstyle",atname:"mathvariant",atval:"fraktur",output:"fr",tex:null,ttype:UNARY,codes:AMfrk},{input:"mathfrak",tag:"mstyle",atname:"mathvariant",atval:"fraktur",output:"mathfrak",tex:null,ttype:UNARY,codes:AMfrk}];function compareNames(c,a){if(c.input>a.input){return 1}else{return -1}}var AMnames=[];function initSymbols(){var c=[],a;for(a=0;a<AMsymbols.length;a++){if(AMsymbols[a].tex&&!(typeof AMsymbols[a].notexcopy=="boolean"&&AMsymbols[a].notexcopy)){c[c.length]={input:AMsymbols[a].tex,tag:AMsymbols[a].tag,output:AMsymbols[a].output,ttype:AMsymbols[a].ttype}}}AMsymbols=AMsymbols.concat(c);refreshSymbols()}function refreshSymbols(){var a;AMsymbols.sort(compareNames);for(a=0;a<AMsymbols.length;a++){AMnames[a]=AMsymbols[a].input}LMsymbols.sort(compareNames);for(a=0;a<LMsymbols.length;a++){LMnames[a]=LMsymbols[a].input}}function define(a,c){if(a.substr(0,1)=="\\"){LMsymbols=LMsymbols.concat([{input:a,tag:"mo",output:c,ttype:DEFINITION}])}else{AMsymbols=AMsymbols.concat([{input:a,tag:"mo",output:c,tex:null,ttype:DEFINITION}])}refreshSymbols()}function AMremoveCharsAndBlanks(g,h){var a;if(g.charAt(h)=="\\"&&g.charAt(h+1)!="\\"&&g.charAt(h+1)!=" "){a=g.slice(h+1)}else{a=g.slice(h)}for(var c=0;c<a.length&&a.charCodeAt(c)<=32;c=c+1){}return a.slice(c)}function position(c,k,l){if(l==0){var j,a;l=-1;j=c.length;while(l+1<j){a=(l+j)>>1;if(c[a]<k){l=a}else{j=a}}return j}else{for(var g=l;g<c.length&&c[g]<k;g++){}}return g}function AMgetSymbol(o){var a=0;var c=0;var h;var r;var q;var l="";var m=true;for(var g=1;g<=o.length&&m;g++){r=o.slice(0,g);c=a;a=position(AMnames,r,c);if(a<AMnames.length&&o.slice(0,AMnames[a].length)==AMnames[a]){l=AMnames[a];h=a;g=l.length}m=a<AMnames.length&&o.slice(0,AMnames[a].length)>=AMnames[a]}AMpreviousSymbol=AMcurrentSymbol;if(l!=""){AMcurrentSymbol=AMsymbols[h].ttype;return AMsymbols[h]}AMcurrentSymbol=CONST;a=1;r=o.slice(0,1);var p=true;while("0"<=r&&r<="9"&&a<=o.length){r=o.slice(a,a+1);a++}if(r==decimalsign){r=o.slice(a,a+1);if("0"<=r&&r<="9"){p=false;a++;while("0"<=r&&r<="9"&&a<=o.length){r=o.slice(a,a+1);a++}}}if((p&&a>1)||a>2){r=o.slice(0,a-1);q="mn"}else{a=2;r=o.slice(0,1);q=(("A">r||r>"Z")&&("a">r||r>"z")?"mo":"mi")}if(r=="-"&&AMpreviousSymbol==INFIX){AMcurrentSymbol=INFIX;return{input:r,tag:q,output:r,ttype:UNARY,func:true,val:true}}return{input:r,tag:q,output:r,ttype:CONST,val:true}}function AMremoveBrackets(c){var a;if(c.nodeName=="mrow"){a=c.firstChild.firstChild.nodeValue;if(a=="("||a=="["||a=="{"){c.removeChild(c.firstChild)}}if(c.nodeName=="mrow"){a=c.lastChild.firstChild.nodeValue;if(a==")"||a=="]"||a=="}"){c.removeChild(c.lastChild)}}}function AMTremoveBrackets(c){var a;if(c.charAt(0)=="{"&&c.charAt(c.length-1)=="}"){a=c.charAt(1);if(a=="("||a=="["){c="{"+c.substr(2)}a=c.substr(1,6);if(a=="\\left("||a=="\\left["||a=="\\left{"){c="{"+c.substr(7)}a=c.substr(1,12);if(a=="\\left\\lbrace"||a=="\\left\\langle"){c="{"+c.substr(13)}a=c.charAt(c.length-2);if(a==")"||a=="]"){c=c.substr(0,c.length-8)+"}"}a=c.substr(c.length-8,7);if(a=="\\rbrace"||a=="\\rangle"){c=c.substr(0,c.length-14)+"}"}}return c}var AMnestingDepth,AMpreviousSymbol,AMcurrentSymbol;function AMTgetTeXsymbol(a){if(typeof a.val=="boolean"&&a.val){pre=""}else{pre="\\"}if(a.tex==null){return(pre+a.input)}else{return(pre+a.tex)}}function AMTgetTeXbracket(a){if(a.tex==null){return(a.input)}else{return("\\"+a.tex)}}function AMTparseSexpr(l){var g,c,o,h,m,k="";l=AMremoveCharsAndBlanks(l,0);g=AMgetSymbol(l);if(g==null||g.ttype==RIGHTBRACKET&&AMnestingDepth>0){return[null,l]}if(g.ttype==DEFINITION){l=g.output+AMremoveCharsAndBlanks(l,g.input.length);g=AMgetSymbol(l)}switch(g.ttype){case UNDEROVER:case CONST:l=AMremoveCharsAndBlanks(l,g.input.length);var j=AMTgetTeXsymbol(g);if(j.charAt(0)=="\\"||g.tag=="mo"){return[j,l]}else{return["{"+j+"}",l]}case LEFTBRACKET:AMnestingDepth++;l=AMremoveCharsAndBlanks(l,g.input.length);o=AMTparseExpr(l,true);AMnestingDepth--;if(typeof g.invisible=="boolean"&&g.invisible){c="{\\left."+o[0]+"}"}else{c="{\\left"+AMTgetTeXbracket(g)+o[0]+"}"}return[c,o[1]];case TEXT:if(g!=AMquote){l=AMremoveCharsAndBlanks(l,g.input.length)}if(l.charAt(0)=="{"){h=l.indexOf("}")}else{if(l.charAt(0)=="("){h=l.indexOf(")")}else{if(l.charAt(0)=="["){h=l.indexOf("]")}else{if(g==AMquote){h=l.slice(1).indexOf('"')+1}else{h=0}}}}if(h==-1){h=l.length}m=l.slice(1,h);if(m.charAt(0)==" "){k="\\ "}k+="\\text{"+m+"}";if(m.charAt(m.length-1)==" "){k+="\\ "}l=AMremoveCharsAndBlanks(l,h+1);return[k,l];case UNARY:l=AMremoveCharsAndBlanks(l,g.input.length);o=AMTparseSexpr(l);if(o[0]==null){return["{"+AMTgetTeXsymbol(g)+"}",l]}if(typeof g.func=="boolean"&&g.func){m=l.charAt(0);if(m=="^"||m=="_"||m=="/"||m=="|"||m==","){return["{"+AMTgetTeXsymbol(g)+"}",l]}else{c="{"+AMTgetTeXsymbol(g)+"{"+o[0]+"}}";return[c,o[1]]}}o[0]=AMTremoveBrackets(o[0]);if(g.input=="sqrt"){return["\\sqrt{"+o[0]+"}",o[1]]}else{if(typeof g.acc=="boolean"&&g.acc){return["{"+AMTgetTeXsymbol(g)+"{"+o[0]+"}}",o[1]]}else{return["{"+AMTgetTeXsymbol(g)+"{"+o[0]+"}}",o[1]]}}case BINARY:l=AMremoveCharsAndBlanks(l,g.input.length);o=AMTparseSexpr(l);if(o[0]==null){return["{"+AMTgetTeXsymbol(g)+"}",l]}o[0]=AMTremoveBrackets(o[0]);var a=AMTparseSexpr(o[1]);if(a[0]==null){return["{"+AMTgetTeXsymbol(g)+"}",l]}a[0]=AMTremoveBrackets(a[0]);if(g.input=="root"||g.input=="stackrel"){if(g.input=="root"){k="{\\sqrt["+o[0]+"]{"+a[0]+"}}"}else{k="{"+AMTgetTeXsymbol(g)+"{"+o[0]+"}{"+a[0]+"}}"}}if(g.input=="frac"){k="{\\frac{"+o[0]+"}{"+a[0]+"}}"}return[k,a[1]];case INFIX:l=AMremoveCharsAndBlanks(l,g.input.length);return[g.output,l];case SPACE:l=AMremoveCharsAndBlanks(l,g.input.length);return["{\\quad\\text{"+g.input+"}\\quad}",l];case LEFTRIGHT:AMnestingDepth++;l=AMremoveCharsAndBlanks(l,g.input.length);o=AMTparseExpr(l,false);AMnestingDepth--;var m="";m=o[0].charAt(o[0].length-1);if(m=="|"){c="{\\left|"+o[0]+"}";return[c,o[1]]}else{c="{\\mid}";return[c,l]}default:l=AMremoveCharsAndBlanks(l,g.input.length);return["{"+AMTgetTeXsymbol(g)+"}",l]}}function AMTparseIexpr(l){var j,m,k,h,a,g;l=AMremoveCharsAndBlanks(l,0);m=AMgetSymbol(l);a=AMTparseSexpr(l);h=a[0];l=a[1];j=AMgetSymbol(l);if(j.ttype==INFIX&&j.input!="/"){l=AMremoveCharsAndBlanks(l,j.input.length);a=AMTparseSexpr(l);if(a[0]==null){a[0]="{}"}else{a[0]=AMTremoveBrackets(a[0])}l=a[1];if(j.input=="_"){k=AMgetSymbol(l);g=(m.ttype==UNDEROVER);if(k.input=="^"){l=AMremoveCharsAndBlanks(l,k.input.length);var c=AMTparseSexpr(l);c[0]=AMTremoveBrackets(c[0]);l=c[1];h="{"+h;h+="_{"+a[0]+"}";h+="^{"+c[0]+"}";h+="}"}else{h+="_{"+a[0]+"}"}}else{h="{"+h+"}^{"+a[0]+"}"}}return[h,l]}function AMTparseExpr(m,l){var p,o,h,r,x=[],k="";var g=false;do{m=AMremoveCharsAndBlanks(m,0);h=AMTparseIexpr(m);o=h[0];m=h[1];p=AMgetSymbol(m);if(p.ttype==INFIX&&p.input=="/"){m=AMremoveCharsAndBlanks(m,p.input.length);h=AMTparseIexpr(m);if(h[0]==null){h[0]="{}"}else{h[0]=AMTremoveBrackets(h[0])}m=h[1];o=AMTremoveBrackets(o);o="\\frac{"+o+"}";o+="{"+h[0]+"}";k+=o;p=AMgetSymbol(m)}else{if(o!=undefined){k+=o}}}while((p.ttype!=RIGHTBRACKET&&(p.ttype!=LEFTRIGHT||l)||AMnestingDepth==0)&&p!=null&&p.output!="");if(p.ttype==RIGHTBRACKET||p.ttype==LEFTRIGHT){var s=k.length;if(s>2&&k.charAt(0)=="{"&&k.indexOf(",")>0){var v=k.charAt(s-2);if(v==")"||v=="]"){var a=k.charAt(6);if((a=="("&&v==")"&&p.output!="}")||(a=="["&&v=="]")){var w="\\matrix{";var c=new Array();c.push(0);var q=true;var t=0;for(r=1;r<s-1;r++){if(k.charAt(r)==a){t++}if(k.charAt(r)==v){t--;if(t==0&&k.charAt(r+2)==","&&k.charAt(r+3)=="{"){c.push(r+2)}}}c.push(s);var j=-1;if(t==0&&c.length>0){for(r=0;r<c.length-1;r++){if(r>0){w+="\\\\"}if(r==0){var y=k.substr(c[r]+7,c[r+1]-c[r]-15).split(",")}else{var y=k.substr(c[r]+8,c[r+1]-c[r]-16).split(",")}if(j>0&&y.length!=j){q=false}else{if(j==-1){j=y.length}}w+=y.join("&")}}w+="}";if(q){k=w}}}}m=AMremoveCharsAndBlanks(m,p.input.length);if(typeof p.invisible!="boolean"||!p.invisible){o="\\right"+AMTgetTeXbracket(p);k+=o;g=true}else{k+="\\right.";g=true}}if(AMnestingDepth>0&&!g){k+="\\right."}return[k,m]}function AMTparseAMtoTeX(a){AMnestingDepth=0;a=a.replace(/&nbsp;/g,"");a=a.replace(/&gt;/g,">");a=a.replace(/&lt;/g,"<");return AMTparseExpr(a.replace(/^\s+/g,""),false)[0]}function AMTparseMath(h,a){if(a){var c=h}else{var c=AMTparseAMtoTeX(h)}if(mathcolor!=""){c="\\"+mathcolor+c}if(displaystyle){c="\\displaystyle"+c}else{c="\\textstyle"+c}var g=createElementXHTML("img");if(typeof encodeURIComponent=="function"){c=encodeURIComponent(c)}else{c=escape(c)}g.src=AMTcgiloc+"?"+c;g.style.verticalAlign="middle";if(showasciiformulaonhover){g.setAttribute("title",h.replace(/\s+/g," "))}return g}function AMparseSexpr(m){var g,c,q,k,p,l=document.createDocumentFragment();m=AMremoveCharsAndBlanks(m,0);g=AMgetSymbol(m);if(g==null||g.ttype==RIGHTBRACKET&&AMnestingDepth>0){return[null,m]}if(g.ttype==DEFINITION){m=g.output+AMremoveCharsAndBlanks(m,g.input.length);g=AMgetSymbol(m)}switch(g.ttype){case UNDEROVER:case CONST:m=AMremoveCharsAndBlanks(m,g.input.length);return[createMmlNode(g.tag,document.createTextNode(g.output)),m];case LEFTBRACKET:AMnestingDepth++;m=AMremoveCharsAndBlanks(m,g.input.length);q=AMparseExpr(m,true);AMnestingDepth--;if(typeof g.invisible=="boolean"&&g.invisible){c=createMmlNode("mrow",q[0])}else{c=createMmlNode("mo",document.createTextNode(g.output));c=createMmlNode("mrow",c);c.appendChild(q[0])}return[c,q[1]];case TEXT:if(g!=AMquote){m=AMremoveCharsAndBlanks(m,g.input.length)}if(m.charAt(0)=="{"){k=m.indexOf("}")}else{if(m.charAt(0)=="("){k=m.indexOf(")")}else{if(m.charAt(0)=="["){k=m.indexOf("]")}else{if(g==AMquote){k=m.slice(1).indexOf('"')+1}else{k=0}}}}if(k==-1){k=m.length}p=m.slice(1,k);if(p.charAt(0)==" "){c=createMmlNode("mspace");c.setAttribute("width","1ex");l.appendChild(c)}l.appendChild(createMmlNode(g.tag,document.createTextNode(p)));if(p.charAt(p.length-1)==" "){c=createMmlNode("mspace");c.setAttribute("width","1ex");l.appendChild(c)}m=AMremoveCharsAndBlanks(m,k+1);return[createMmlNode("mrow",l),m];case UNARY:m=AMremoveCharsAndBlanks(m,g.input.length);q=AMparseSexpr(m);if(q[0]==null){return[createMmlNode(g.tag,document.createTextNode(g.output)),m]}if(typeof g.func=="boolean"&&g.func){p=m.charAt(0);if(p=="^"||p=="_"||p=="/"||p=="|"||p==","){return[createMmlNode(g.tag,document.createTextNode(g.output)),m]}else{c=createMmlNode("mrow",createMmlNode(g.tag,document.createTextNode(g.output)));c.appendChild(q[0]);return[c,q[1]]}}AMremoveBrackets(q[0]);if(g.input=="sqrt"){return[createMmlNode(g.tag,q[0]),q[1]]}else{if(typeof g.acc=="boolean"&&g.acc){c=createMmlNode(g.tag,q[0]);c.appendChild(createMmlNode("mo",document.createTextNode(g.output)));return[c,q[1]]}else{if(!isIE&&typeof g.codes!="undefined"){for(k=0;k<q[0].childNodes.length;k++){if(q[0].childNodes[k].nodeName=="mi"||q[0].nodeName=="mi"){p=(q[0].nodeName=="mi"?q[0].firstChild.nodeValue:q[0].childNodes[k].firstChild.nodeValue);var o=[];for(var h=0;h<p.length;h++){if(p.charCodeAt(h)>64&&p.charCodeAt(h)<91){o=o+String.fromCharCode(g.codes[p.charCodeAt(h)-65])}else{o=o+p.charAt(h)}}if(q[0].nodeName=="mi"){q[0]=createMmlNode("mo").appendChild(document.createTextNode(o))}else{q[0].replaceChild(createMmlNode("mo").appendChild(document.createTextNode(o)),q[0].childNodes[k])}}}}c=createMmlNode(g.tag,q[0]);c.setAttribute(g.atname,g.atval);return[c,q[1]]}}case BINARY:m=AMremoveCharsAndBlanks(m,g.input.length);q=AMparseSexpr(m);if(q[0]==null){return[createMmlNode("mo",document.createTextNode(g.input)),m]}AMremoveBrackets(q[0]);var a=AMparseSexpr(q[1]);if(a[0]==null){return[createMmlNode("mo",document.createTextNode(g.input)),m]}AMremoveBrackets(a[0]);if(g.input=="root"||g.input=="stackrel"){l.appendChild(a[0])}l.appendChild(q[0]);if(g.input=="frac"){l.appendChild(a[0])}return[createMmlNode(g.tag,l),a[1]];case INFIX:m=AMremoveCharsAndBlanks(m,g.input.length);return[createMmlNode("mo",document.createTextNode(g.output)),m];case SPACE:m=AMremoveCharsAndBlanks(m,g.input.length);c=createMmlNode("mspace");c.setAttribute("width","1ex");l.appendChild(c);l.appendChild(createMmlNode(g.tag,document.createTextNode(g.output)));c=createMmlNode("mspace");c.setAttribute("width","1ex");l.appendChild(c);return[createMmlNode("mrow",l),m];case LEFTRIGHT:AMnestingDepth++;m=AMremoveCharsAndBlanks(m,g.input.length);q=AMparseExpr(m,false);AMnestingDepth--;var p="";if(q[0].lastChild!=null){p=q[0].lastChild.firstChild.nodeValue}if(p=="|"){c=createMmlNode("mo",document.createTextNode(g.output));c=createMmlNode("mrow",c);c.appendChild(q[0]);return[c,q[1]]}else{c=createMmlNode("mo",document.createTextNode("\u2223"));c=createMmlNode("mrow",c);return[c,m]}default:m=AMremoveCharsAndBlanks(m,g.input.length);return[createMmlNode(g.tag,document.createTextNode(g.output)),m]}}function AMparseIexpr(l){var j,m,k,h,a,g;l=AMremoveCharsAndBlanks(l,0);m=AMgetSymbol(l);a=AMparseSexpr(l);h=a[0];l=a[1];j=AMgetSymbol(l);if(j.ttype==INFIX&&j.input!="/"){l=AMremoveCharsAndBlanks(l,j.input.length);a=AMparseSexpr(l);if(a[0]==null){a[0]=createMmlNode("mo",document.createTextNode("\u25A1"))}else{AMremoveBrackets(a[0])}l=a[1];if(j.input=="_"){k=AMgetSymbol(l);g=(m.ttype==UNDEROVER);if(k.input=="^"){l=AMremoveCharsAndBlanks(l,k.input.length);var c=AMparseSexpr(l);AMremoveBrackets(c[0]);l=c[1];h=createMmlNode((g?"munderover":"msubsup"),h);h.appendChild(a[0]);h.appendChild(c[0]);h=createMmlNode("mrow",h)}else{h=createMmlNode((g?"munder":"msub"),h);h.appendChild(a[0])}}else{h=createMmlNode(j.tag,h);h.appendChild(a[0])}}return[h,l]}function AMparseExpr(r,q){var w,s,l,z,E=[],o=document.createDocumentFragment();do{r=AMremoveCharsAndBlanks(r,0);l=AMparseIexpr(r);s=l[0];r=l[1];w=AMgetSymbol(r);if(w.ttype==INFIX&&w.input=="/"){r=AMremoveCharsAndBlanks(r,w.input.length);l=AMparseIexpr(r);if(l[0]==null){l[0]=createMmlNode("mo",document.createTextNode("\u25A1"))}else{AMremoveBrackets(l[0])}r=l[1];AMremoveBrackets(s);s=createMmlNode(w.tag,s);s.appendChild(l[0]);o.appendChild(s);w=AMgetSymbol(r)}else{if(s!=undefined){o.appendChild(s)}}}while((w.ttype!=RIGHTBRACKET&&(w.ttype!=LEFTRIGHT||q)||AMnestingDepth==0)&&w!=null&&w.output!="");if(w.ttype==RIGHTBRACKET||w.ttype==LEFTRIGHT){var A=o.childNodes.length;if(A>0&&o.childNodes[A-1].nodeName=="mrow"&&A>1&&o.childNodes[A-2].nodeName=="mo"&&o.childNodes[A-2].firstChild.nodeValue==","){var D=o.childNodes[A-1].lastChild.firstChild.nodeValue;if(D==")"||D=="]"){var c=o.childNodes[A-1].firstChild.firstChild.nodeValue;if(c=="("&&D==")"&&w.output!="}"||c=="["&&D=="]"){var g=[];var x=true;var t=o.childNodes.length;for(z=0;x&&z<t;z=z+2){g[z]=[];s=o.childNodes[z];if(x){x=s.nodeName=="mrow"&&(z==t-1||s.nextSibling.nodeName=="mo"&&s.nextSibling.firstChild.nodeValue==",")&&s.firstChild.firstChild.nodeValue==c&&s.lastChild.firstChild.nodeValue==D}if(x){for(var y=0;y<s.childNodes.length;y++){if(s.childNodes[y].firstChild.nodeValue==","){g[z][g[z].length]=y}}}if(x&&z>1){x=g[z].length==g[z-2].length}}if(x){var h,a,p,v,B=document.createDocumentFragment();for(z=0;z<t;z=z+2){h=document.createDocumentFragment();a=document.createDocumentFragment();s=o.firstChild;p=s.childNodes.length;v=0;s.removeChild(s.firstChild);for(y=1;y<p-1;y++){if(typeof g[z][v]!="undefined"&&y==g[z][v]){s.removeChild(s.firstChild);h.appendChild(createMmlNode("mtd",a));v++}else{a.appendChild(s.firstChild)}}h.appendChild(createMmlNode("mtd",a));if(o.childNodes.length>2){o.removeChild(o.firstChild);o.removeChild(o.firstChild)}B.appendChild(createMmlNode("mtr",h))}s=createMmlNode("mtable",B);if(typeof w.invisible=="boolean"&&w.invisible){s.setAttribute("columnalign","left")}o.replaceChild(s,o.firstChild)}}}}r=AMremoveCharsAndBlanks(r,w.input.length);if(typeof w.invisible!="boolean"||!w.invisible){s=createMmlNode("mo",document.createTextNode(w.output));o.appendChild(s)}}return[o,r]}function parseMath(g,c){var h,a;AMnestingDepth=0;h=c?LMparseExpr(g.replace(/^\s+/g,""),false,false)[0]:AMparseExpr(g.replace(/^\s+/g,""),false)[0];a=createMmlNode("mstyle",h);a.setAttribute("mathcolor",mathcolor);a.setAttribute("fontfamily",mathfontfamily);a.setAttribute("mathsize",mathfontsize);if(displaystyle){a.setAttribute("displaystyle","true")}a=createMmlNode("math",a);if(showasciiformulaonhover){a.setAttribute("title",g.replace(/\s+/g," "))}return a}function strarr2docFrag(a,h,l){var o=document.createDocumentFragment();var m=false;for(var k=0;k<a.length;k++){if(m&&noMathML){o.appendChild(AMTparseMath(a[k],l))}else{if(m&&!noMathML){o.appendChild(parseMath(a[k],l))}else{var c=(h?a[k].split("\n\n"):[a[k]]);o.appendChild(createElementXHTML("span").appendChild(document.createTextNode(c[0])));for(var g=1;g<c.length;g++){o.appendChild(createElementXHTML("p"));o.appendChild(createElementXHTML("span").appendChild(document.createTextNode(c[g])))}}}m=!m}return o}function AMautomathrec(p){var g="\\\\[a-zA-Z]+|\\\\\\s|";var o="\\b(?:oo|lim|ln|int|oint|del|grad|aleph|prod|prop|sinh|cosh|tanh|cos|sec|pi|tt|fr|sf|sube|supe|sub|sup|det|mod|gcd|lcm|min|max|vec|ddot|ul|chi|eta|nu|mu)(?![a-z])|";var q="\\b(?:sum|ox|log|sin|tan|dim|hat|bar|dot)(?![a-z])|";var h="|\\bI\\b|\\bin\\b|\\btext\\b";var a="NN|ZZ|QQ|RR|CC|TT|AA|EE|sqrt|dx|dy|dz|dt|xx|vv|uu|nn|bb|cc|csc|cot|alpha|beta|delta|Delta|epsilon|gamma|Gamma|kappa|lambda|Lambda|omega|phi|Phi|Pi|psi|Psi|rho|sigma|Sigma|tau|theta|Theta|xi|Xi|zeta";var c="[a-zA-HJ-Z](?=(?:[^a-zA-Z]|$|"+o+q+a+"))|";var j=c+g+"\\d+|[-()[\\]{}+=*&^_%\\@/<>,\\|!:;'~]|\\.(?!(?:\x20|$))|"+o+q+a;var r=new RegExp("(^|\\s)((("+j+")\\s?)(("+j+h+")\\s?)+)([,.?]?(?=\\s|$))","g");p=p.replace(r," `$2`$7");var l=p.split(AMdelimiter1);var m=new RegExp("(^|\\s)([b-zB-HJ-Z+*<>]|"+g+o+a+")(\\s|\\n|$)","g");var k=new RegExp("(^|\\s)([a-z]|"+g+o+a+")([,.])","g");for(i=0;i<l.length;i++){if(i%2==0){l[i]=l[i].replace(m," `$2`$3");l[i]=l[i].replace(k," `$2`$3");l[i]=l[i].replace(/([{}[\]])/,"`$1`")}}p=l.join(AMdelimiter1);p=p.replace(/((^|\s)\([a-zA-Z]{2,}.*?)\)`/g,"$1`)");p=p.replace(/`(\((a\s|in\s))(.*?[a-zA-Z]{2,}\))/g,"$1`$3");p=p.replace(/\sin`/g,"` in");p=p.replace(/`(\(\w\)[,.]?(\s|\n|$))/g,"$1`");p=p.replace(/`([0-9.]+|e.g|i.e)`(\.?)/gi,"$1$2");p=p.replace(/`([0-9.]+:)`/g,"$1");return p}function processNodeR(g,l,c){var o,m,j,a,h;if(g.childNodes.length==0){if((g.nodeType!=8||l)&&g.parentNode.nodeName!="form"&&g.parentNode.nodeName!="FORM"&&g.parentNode.nodeName!="textarea"&&g.parentNode.nodeName!="TEXTAREA"){m=g.nodeValue;if(!(m==null)){m=m.replace(/\r\n\r\n/g,"\n\n");m=m.replace(/\x20+/g," ");m=m.replace(/\s*\r\n/g," ");if(c){o=(m.indexOf("$")==-1?false:true);m=m.replace(/([^\\])\$/g,"$1 $");m=m.replace(/^\$/," $");j=m.split(" $");for(h=0;h<j.length;h++){j[h]=j[h].replace(/\\\$/g,"$")}}else{o=false;m=m.replace(new RegExp(AMescape1,"g"),function(){o=true;return"AMescape1"});m=m.replace(/\\?end{?a?math}?/i,function(){automathrecognize=false;o=true;return""});m=m.replace(/amath\b|\\begin{a?math}/i,function(){automathrecognize=true;o=true;return""});j=m.split(AMdelimiter1);if(automathrecognize){for(h=0;h<j.length;h++){if(h%2==0){j[h]=AMautomathrec(j[h])}}}m=j.join(AMdelimiter1);j=m.split(AMdelimiter1);for(h=0;h<j.length;h++){j[h]=j[h].replace(/AMescape1/g,AMdelimiter1)}}if(j.length>1||o){a=strarr2docFrag(j,g.nodeType==8,c);var k=a.childNodes.length;g.parentNode.replaceChild(a,g);return k-1}}}else{return 0}}else{if(g.nodeName!="math"){for(h=0;h<g.childNodes.length;h++){h+=processNodeR(g.childNodes[h],l,c)}}}return 0}function AMprocessNode(l,c,j){var k,a;if(j!=null){k=document.getElementsByTagName("span");for(var g=0;g<k.length;g++){if(k[g].className=="AM"){processNodeR(k[g],c,false)}}}else{try{a=l.innerHTML}catch(h){}if(a==null||/amath\b|\\begin{a?math}/i.test(a)||a.indexOf(AMdelimiter1+" ")!=-1||a.slice(-1)==AMdelimiter1||a.indexOf(AMdelimiter1+"<")!=-1||a.indexOf(AMdelimiter1+"\n")!=-1){processNodeR(l,c,false)}}}var LMsymbols=[{input:"\\alpha",tag:"mi",output:"\u03B1",ttype:CONST},{input:"\\beta",tag:"mi",output:"\u03B2",ttype:CONST},{input:"\\gamma",tag:"mi",output:"\u03B3",ttype:CONST},{input:"\\delta",tag:"mi",output:"\u03B4",ttype:CONST},{input:"\\epsilon",tag:"mi",output:"\u03B5",ttype:CONST},{input:"\\varepsilon",tag:"mi",output:"\u025B",ttype:CONST},{input:"\\zeta",tag:"mi",output:"\u03B6",ttype:CONST},{input:"\\eta",tag:"mi",output:"\u03B7",ttype:CONST},{input:"\\theta",tag:"mi",output:"\u03B8",ttype:CONST},{input:"\\vartheta",tag:"mi",output:"\u03D1",ttype:CONST},{input:"\\iota",tag:"mi",output:"\u03B9",ttype:CONST},{input:"\\kappa",tag:"mi",output:"\u03BA",ttype:CONST},{input:"\\lambda",tag:"mi",output:"\u03BB",ttype:CONST},{input:"\\mu",tag:"mi",output:"\u03BC",ttype:CONST},{input:"\\nu",tag:"mi",output:"\u03BD",ttype:CONST},{input:"\\xi",tag:"mi",output:"\u03BE",ttype:CONST},{input:"\\pi",tag:"mi",output:"\u03C0",ttype:CONST},{input:"\\varpi",tag:"mi",output:"\u03D6",ttype:CONST},{input:"\\rho",tag:"mi",output:"\u03C1",ttype:CONST},{input:"\\varrho",tag:"mi",output:"\u03F1",ttype:CONST},{input:"\\varsigma",tag:"mi",output:"\u03C2",ttype:CONST},{input:"\\sigma",tag:"mi",output:"\u03C3",ttype:CONST},{input:"\\tau",tag:"mi",output:"\u03C4",ttype:CONST},{input:"\\upsilon",tag:"mi",output:"\u03C5",ttype:CONST},{input:"\\phi",tag:"mi",output:"\u03C6",ttype:CONST},{input:"\\varphi",tag:"mi",output:"\u03D5",ttype:CONST},{input:"\\chi",tag:"mi",output:"\u03C7",ttype:CONST},{input:"\\psi",tag:"mi",output:"\u03C8",ttype:CONST},{input:"\\omega",tag:"mi",output:"\u03C9",ttype:CONST},{input:"\\Gamma",tag:"mo",output:"\u0393",ttype:CONST},{input:"\\Delta",tag:"mo",output:"\u0394",ttype:CONST},{input:"\\Theta",tag:"mo",output:"\u0398",ttype:CONST},{input:"\\Lambda",tag:"mo",output:"\u039B",ttype:CONST},{input:"\\Xi",tag:"mo",output:"\u039E",ttype:CONST},{input:"\\Pi",tag:"mo",output:"\u03A0",ttype:CONST},{input:"\\Sigma",tag:"mo",output:"\u03A3",ttype:CONST},{input:"\\Upsilon",tag:"mo",output:"\u03A5",ttype:CONST},{input:"\\Phi",tag:"mo",output:"\u03A6",ttype:CONST},{input:"\\Psi",tag:"mo",output:"\u03A8",ttype:CONST},{input:"\\Omega",tag:"mo",output:"\u03A9",ttype:CONST},{input:"\\frac12",tag:"mo",output:"\u00BD",ttype:CONST},{input:"\\frac14",tag:"mo",output:"\u00BC",ttype:CONST},{input:"\\frac34",tag:"mo",output:"\u00BE",ttype:CONST},{input:"\\frac13",tag:"mo",output:"\u2153",ttype:CONST},{input:"\\frac23",tag:"mo",output:"\u2154",ttype:CONST},{input:"\\frac15",tag:"mo",output:"\u2155",ttype:CONST},{input:"\\frac25",tag:"mo",output:"\u2156",ttype:CONST},{input:"\\frac35",tag:"mo",output:"\u2157",ttype:CONST},{input:"\\frac45",tag:"mo",output:"\u2158",ttype:CONST},{input:"\\frac16",tag:"mo",output:"\u2159",ttype:CONST},{input:"\\frac56",tag:"mo",output:"\u215A",ttype:CONST},{input:"\\frac18",tag:"mo",output:"\u215B",ttype:CONST},{input:"\\frac38",tag:"mo",output:"\u215C",ttype:CONST},{input:"\\frac58",tag:"mo",output:"\u215D",ttype:CONST},{input:"\\frac78",tag:"mo",output:"\u215E",ttype:CONST},{input:"\\pm",tag:"mo",output:"\u00B1",ttype:CONST},{input:"\\mp",tag:"mo",output:"\u2213",ttype:CONST},{input:"\\triangleleft",tag:"mo",output:"\u22B2",ttype:CONST},{input:"\\triangleright",tag:"mo",output:"\u22B3",ttype:CONST},{input:"\\cdot",tag:"mo",output:"\u22C5",ttype:CONST},{input:"\\star",tag:"mo",output:"\u22C6",ttype:CONST},{input:"\\ast",tag:"mo",output:"\u002A",ttype:CONST},{input:"\\times",tag:"mo",output:"\u00D7",ttype:CONST},{input:"\\div",tag:"mo",output:"\u00F7",ttype:CONST},{input:"\\circ",tag:"mo",output:"\u2218",ttype:CONST},{input:"\\bullet",tag:"mo",output:"\u2022",ttype:CONST},{input:"\\oplus",tag:"mo",output:"\u2295",ttype:CONST},{input:"\\ominus",tag:"mo",output:"\u2296",ttype:CONST},{input:"\\otimes",tag:"mo",output:"\u2297",ttype:CONST},{input:"\\bigcirc",tag:"mo",output:"\u25CB",ttype:CONST},{input:"\\oslash",tag:"mo",output:"\u2298",ttype:CONST},{input:"\\odot",tag:"mo",output:"\u2299",ttype:CONST},{input:"\\land",tag:"mo",output:"\u2227",ttype:CONST},{input:"\\wedge",tag:"mo",output:"\u2227",ttype:CONST},{input:"\\lor",tag:"mo",output:"\u2228",ttype:CONST},{input:"\\vee",tag:"mo",output:"\u2228",ttype:CONST},{input:"\\cap",tag:"mo",output:"\u2229",ttype:CONST},{input:"\\cup",tag:"mo",output:"\u222A",ttype:CONST},{input:"\\sqcap",tag:"mo",output:"\u2293",ttype:CONST},{input:"\\sqcup",tag:"mo",output:"\u2294",ttype:CONST},{input:"\\uplus",tag:"mo",output:"\u228E",ttype:CONST},{input:"\\amalg",tag:"mo",output:"\u2210",ttype:CONST},{input:"\\bigtriangleup",tag:"mo",output:"\u25B3",ttype:CONST},{input:"\\bigtriangledown",tag:"mo",output:"\u25BD",ttype:CONST},{input:"\\dag",tag:"mo",output:"\u2020",ttype:CONST},{input:"\\dagger",tag:"mo",output:"\u2020",ttype:CONST},{input:"\\ddag",tag:"mo",output:"\u2021",ttype:CONST},{input:"\\ddagger",tag:"mo",output:"\u2021",ttype:CONST},{input:"\\lhd",tag:"mo",output:"\u22B2",ttype:CONST},{input:"\\rhd",tag:"mo",output:"\u22B3",ttype:CONST},{input:"\\unlhd",tag:"mo",output:"\u22B4",ttype:CONST},{input:"\\unrhd",tag:"mo",output:"\u22B5",ttype:CONST},{input:"\\sum",tag:"mo",output:"\u2211",ttype:UNDEROVER},{input:"\\prod",tag:"mo",output:"\u220F",ttype:UNDEROVER},{input:"\\bigcap",tag:"mo",output:"\u22C2",ttype:UNDEROVER},{input:"\\bigcup",tag:"mo",output:"\u22C3",ttype:UNDEROVER},{input:"\\bigwedge",tag:"mo",output:"\u22C0",ttype:UNDEROVER},{input:"\\bigvee",tag:"mo",output:"\u22C1",ttype:UNDEROVER},{input:"\\bigsqcap",tag:"mo",output:"\u2A05",ttype:UNDEROVER},{input:"\\bigsqcup",tag:"mo",output:"\u2A06",ttype:UNDEROVER},{input:"\\coprod",tag:"mo",output:"\u2210",ttype:UNDEROVER},{input:"\\bigoplus",tag:"mo",output:"\u2A01",ttype:UNDEROVER},{input:"\\bigotimes",tag:"mo",output:"\u2A02",ttype:UNDEROVER},{input:"\\bigodot",tag:"mo",output:"\u2A00",ttype:UNDEROVER},{input:"\\biguplus",tag:"mo",output:"\u2A04",ttype:UNDEROVER},{input:"\\int",tag:"mo",output:"\u222B",ttype:CONST},{input:"\\oint",tag:"mo",output:"\u222E",ttype:CONST},{input:":=",tag:"mo",output:":=",ttype:CONST},{input:"\\lt",tag:"mo",output:"<",ttype:CONST},{input:"\\gt",tag:"mo",output:">",ttype:CONST},{input:"\\ne",tag:"mo",output:"\u2260",ttype:CONST},{input:"\\neq",tag:"mo",output:"\u2260",ttype:CONST},{input:"\\le",tag:"mo",output:"\u2264",ttype:CONST},{input:"\\leq",tag:"mo",output:"\u2264",ttype:CONST},{input:"\\leqslant",tag:"mo",output:"\u2264",ttype:CONST},{input:"\\ge",tag:"mo",output:"\u2265",ttype:CONST},{input:"\\geq",tag:"mo",output:"\u2265",ttype:CONST},{input:"\\geqslant",tag:"mo",output:"\u2265",ttype:CONST},{input:"\\equiv",tag:"mo",output:"\u2261",ttype:CONST},{input:"\\ll",tag:"mo",output:"\u226A",ttype:CONST},{input:"\\gg",tag:"mo",output:"\u226B",ttype:CONST},{input:"\\doteq",tag:"mo",output:"\u2250",ttype:CONST},{input:"\\prec",tag:"mo",output:"\u227A",ttype:CONST},{input:"\\succ",tag:"mo",output:"\u227B",ttype:CONST},{input:"\\preceq",tag:"mo",output:"\u227C",ttype:CONST},{input:"\\succeq",tag:"mo",output:"\u227D",ttype:CONST},{input:"\\subset",tag:"mo",output:"\u2282",ttype:CONST},{input:"\\supset",tag:"mo",output:"\u2283",ttype:CONST},{input:"\\subseteq",tag:"mo",output:"\u2286",ttype:CONST},{input:"\\supseteq",tag:"mo",output:"\u2287",ttype:CONST},{input:"\\sqsubset",tag:"mo",output:"\u228F",ttype:CONST},{input:"\\sqsupset",tag:"mo",output:"\u2290",ttype:CONST},{input:"\\sqsubseteq",tag:"mo",output:"\u2291",ttype:CONST},{input:"\\sqsupseteq",tag:"mo",output:"\u2292",ttype:CONST},{input:"\\sim",tag:"mo",output:"\u223C",ttype:CONST},{input:"\\simeq",tag:"mo",output:"\u2243",ttype:CONST},{input:"\\approx",tag:"mo",output:"\u2248",ttype:CONST},{input:"\\cong",tag:"mo",output:"\u2245",ttype:CONST},{input:"\\Join",tag:"mo",output:"\u22C8",ttype:CONST},{input:"\\bowtie",tag:"mo",output:"\u22C8",ttype:CONST},{input:"\\in",tag:"mo",output:"\u2208",ttype:CONST},{input:"\\ni",tag:"mo",output:"\u220B",ttype:CONST},{input:"\\owns",tag:"mo",output:"\u220B",ttype:CONST},{input:"\\propto",tag:"mo",output:"\u221D",ttype:CONST},{input:"\\vdash",tag:"mo",output:"\u22A2",ttype:CONST},{input:"\\dashv",tag:"mo",output:"\u22A3",ttype:CONST},{input:"\\models",tag:"mo",output:"\u22A8",ttype:CONST},{input:"\\perp",tag:"mo",output:"\u22A5",ttype:CONST},{input:"\\smile",tag:"mo",output:"\u2323",ttype:CONST},{input:"\\frown",tag:"mo",output:"\u2322",ttype:CONST},{input:"\\asymp",tag:"mo",output:"\u224D",ttype:CONST},{input:"\\notin",tag:"mo",output:"\u2209",ttype:CONST},{input:"\\begin{eqnarray}",output:"X",ttype:MATRIX,invisible:true},{input:"\\begin{array}",output:"X",ttype:MATRIX,invisible:true},{input:"\\\\",output:"}&{",ttype:DEFINITION},{input:"\\end{eqnarray}",output:"}}",ttype:DEFINITION},{input:"\\end{array}",output:"}}",ttype:DEFINITION},{input:"\\big",tag:"mo",output:"X",atval:"1.2",ieval:"2.2",ttype:BIG},{input:"\\Big",tag:"mo",output:"X",atval:"1.6",ieval:"2.6",ttype:BIG},{input:"\\bigg",tag:"mo",output:"X",atval:"2.2",ieval:"3.2",ttype:BIG},{input:"\\Bigg",tag:"mo",output:"X",atval:"2.9",ieval:"3.9",ttype:BIG},{input:"\\left",tag:"mo",output:"X",ttype:LEFTBRACKET},{input:"\\right",tag:"mo",output:"X",ttype:RIGHTBRACKET},{input:"{",output:"{",ttype:LEFTBRACKET,invisible:true},{input:"}",output:"}",ttype:RIGHTBRACKET,invisible:true},{input:"(",tag:"mo",output:"(",atval:"1",ttype:STRETCHY},{input:"[",tag:"mo",output:"[",atval:"1",ttype:STRETCHY},{input:"\\lbrack",tag:"mo",output:"[",atval:"1",ttype:STRETCHY},{input:"\\{",tag:"mo",output:"{",atval:"1",ttype:STRETCHY},{input:"\\lbrace",tag:"mo",output:"{",atval:"1",ttype:STRETCHY},{input:"\\langle",tag:"mo",output:"\u2329",atval:"1",ttype:STRETCHY},{input:"\\lfloor",tag:"mo",output:"\u230A",atval:"1",ttype:STRETCHY},{input:"\\lceil",tag:"mo",output:"\u2308",atval:"1",ttype:STRETCHY},{input:")",tag:"mo",output:")",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"]",tag:"mo",output:"]",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\rbrack",tag:"mo",output:"]",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\}",tag:"mo",output:"}",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\rbrace",tag:"mo",output:"}",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\rangle",tag:"mo",output:"\u232A",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\rfloor",tag:"mo",output:"\u230B",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\rceil",tag:"mo",output:"\u2309",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"|",tag:"mo",output:"\u2223",atval:"1",ttype:STRETCHY},{input:"\\|",tag:"mo",output:"\u2225",atval:"1",ttype:STRETCHY},{input:"\\vert",tag:"mo",output:"\u2223",atval:"1",ttype:STRETCHY},{input:"\\Vert",tag:"mo",output:"\u2225",atval:"1",ttype:STRETCHY},{input:"\\mid",tag:"mo",output:"\u2223",atval:"1",ttype:STRETCHY},{input:"\\parallel",tag:"mo",output:"\u2225",atval:"1",ttype:STRETCHY},{input:"/",tag:"mo",output:"/",atval:"1.01",ttype:STRETCHY},{input:"\\backslash",tag:"mo",output:"\u2216",atval:"1",ttype:STRETCHY},{input:"\\setminus",tag:"mo",output:"\\",ttype:CONST},{input:"\\!",tag:"mspace",atname:"width",atval:"-0.167em",ttype:SPACE},{input:"\\,",tag:"mspace",atname:"width",atval:"0.167em",ttype:SPACE},{input:"\\>",tag:"mspace",atname:"width",atval:"0.222em",ttype:SPACE},{input:"\\:",tag:"mspace",atname:"width",atval:"0.222em",ttype:SPACE},{input:"\\;",tag:"mspace",atname:"width",atval:"0.278em",ttype:SPACE},{input:"~",tag:"mspace",atname:"width",atval:"0.333em",ttype:SPACE},{input:"\\quad",tag:"mspace",atname:"width",atval:"1em",ttype:SPACE},{input:"\\qquad",tag:"mspace",atname:"width",atval:"2em",ttype:SPACE},{input:"\\prime",tag:"mo",output:"\u2032",ttype:CONST},{input:"'",tag:"mo",output:"\u02B9",ttype:CONST},{input:"''",tag:"mo",output:"\u02BA",ttype:CONST},{input:"'''",tag:"mo",output:"\u2034",ttype:CONST},{input:"''''",tag:"mo",output:"\u2057",ttype:CONST},{input:"\\ldots",tag:"mo",output:"\u2026",ttype:CONST},{input:"\\cdots",tag:"mo",output:"\u22EF",ttype:CONST},{input:"\\vdots",tag:"mo",output:"\u22EE",ttype:CONST},{input:"\\ddots",tag:"mo",output:"\u22F1",ttype:CONST},{input:"\\forall",tag:"mo",output:"\u2200",ttype:CONST},{input:"\\exists",tag:"mo",output:"\u2203",ttype:CONST},{input:"\\Re",tag:"mo",output:"\u211C",ttype:CONST},{input:"\\Im",tag:"mo",output:"\u2111",ttype:CONST},{input:"\\aleph",tag:"mo",output:"\u2135",ttype:CONST},{input:"\\hbar",tag:"mo",output:"\u210F",ttype:CONST},{input:"\\ell",tag:"mo",output:"\u2113",ttype:CONST},{input:"\\wp",tag:"mo",output:"\u2118",ttype:CONST},{input:"\\emptyset",tag:"mo",output:"\u2205",ttype:CONST},{input:"\\infty",tag:"mo",output:"\u221E",ttype:CONST},{input:"\\surd",tag:"mo",output:"\\sqrt{}",ttype:DEFINITION},{input:"\\partial",tag:"mo",output:"\u2202",ttype:CONST},{input:"\\nabla",tag:"mo",output:"\u2207",ttype:CONST},{input:"\\triangle",tag:"mo",output:"\u25B3",ttype:CONST},{input:"\\therefore",tag:"mo",output:"\u2234",ttype:CONST},{input:"\\angle",tag:"mo",output:"\u2220",ttype:CONST},{input:"\\diamond",tag:"mo",output:"\u22C4",ttype:CONST},{input:"\\Diamond",tag:"mo",output:"\u25C7",ttype:CONST},{input:"\\neg",tag:"mo",output:"\u00AC",ttype:CONST},{input:"\\lnot",tag:"mo",output:"\u00AC",ttype:CONST},{input:"\\bot",tag:"mo",output:"\u22A5",ttype:CONST},{input:"\\top",tag:"mo",output:"\u22A4",ttype:CONST},{input:"\\square",tag:"mo",output:"\u25AB",ttype:CONST},{input:"\\Box",tag:"mo",output:"\u25A1",ttype:CONST},{input:"\\wr",tag:"mo",output:"\u2240",ttype:CONST},{input:"\\arccos",tag:"mi",output:"arccos",ttype:UNARY,func:true},{input:"\\arcsin",tag:"mi",output:"arcsin",ttype:UNARY,func:true},{input:"\\arctan",tag:"mi",output:"arctan",ttype:UNARY,func:true},{input:"\\arg",tag:"mi",output:"arg",ttype:UNARY,func:true},{input:"\\cos",tag:"mi",output:"cos",ttype:UNARY,func:true},{input:"\\cosh",tag:"mi",output:"cosh",ttype:UNARY,func:true},{input:"\\cot",tag:"mi",output:"cot",ttype:UNARY,func:true},{input:"\\coth",tag:"mi",output:"coth",ttype:UNARY,func:true},{input:"\\csc",tag:"mi",output:"csc",ttype:UNARY,func:true},{input:"\\deg",tag:"mi",output:"deg",ttype:UNARY,func:true},{input:"\\det",tag:"mi",output:"det",ttype:UNARY,func:true},{input:"\\dim",tag:"mi",output:"dim",ttype:UNARY,func:true},{input:"\\exp",tag:"mi",output:"exp",ttype:UNARY,func:true},{input:"\\gcd",tag:"mi",output:"gcd",ttype:UNARY,func:true},{input:"\\hom",tag:"mi",output:"hom",ttype:UNARY,func:true},{input:"\\inf",tag:"mo",output:"inf",ttype:UNDEROVER},{input:"\\ker",tag:"mi",output:"ker",ttype:UNARY,func:true},{input:"\\lg",tag:"mi",output:"lg",ttype:UNARY,func:true},{input:"\\lim",tag:"mo",output:"lim",ttype:UNDEROVER},{input:"\\liminf",tag:"mo",output:"liminf",ttype:UNDEROVER},{input:"\\limsup",tag:"mo",output:"limsup",ttype:UNDEROVER},{input:"\\ln",tag:"mi",output:"ln",ttype:UNARY,func:true},{input:"\\log",tag:"mi",output:"log",ttype:UNARY,func:true},{input:"\\max",tag:"mo",output:"max",ttype:UNDEROVER},{input:"\\min",tag:"mo",output:"min",ttype:UNDEROVER},{input:"\\Pr",tag:"mi",output:"Pr",ttype:UNARY,func:true},{input:"\\sec",tag:"mi",output:"sec",ttype:UNARY,func:true},{input:"\\sin",tag:"mi",output:"sin",ttype:UNARY,func:true},{input:"\\sinh",tag:"mi",output:"sinh",ttype:UNARY,func:true},{input:"\\sup",tag:"mo",output:"sup",ttype:UNDEROVER},{input:"\\tan",tag:"mi",output:"tan",ttype:UNARY,func:true},{input:"\\tanh",tag:"mi",output:"tanh",ttype:UNARY,func:true},{input:"\\gets",tag:"mo",output:"\u2190",ttype:CONST},{input:"\\leftarrow",tag:"mo",output:"\u2190",ttype:CONST},{input:"\\to",tag:"mo",output:"\u2192",ttype:CONST},{input:"\\rightarrow",tag:"mo",output:"\u2192",ttype:CONST},{input:"\\leftrightarrow",tag:"mo",output:"\u2194",ttype:CONST},{input:"\\uparrow",tag:"mo",output:"\u2191",ttype:CONST},{input:"\\downarrow",tag:"mo",output:"\u2193",ttype:CONST},{input:"\\updownarrow",tag:"mo",output:"\u2195",ttype:CONST},{input:"\\Leftarrow",tag:"mo",output:"\u21D0",ttype:CONST},{input:"\\Rightarrow",tag:"mo",output:"\u21D2",ttype:CONST},{input:"\\Leftrightarrow",tag:"mo",output:"\u21D4",ttype:CONST},{input:"\\iff",tag:"mo",output:"~\\Longleftrightarrow~",ttype:DEFINITION},{input:"\\Uparrow",tag:"mo",output:"\u21D1",ttype:CONST},{input:"\\Downarrow",tag:"mo",output:"\u21D3",ttype:CONST},{input:"\\Updownarrow",tag:"mo",output:"\u21D5",ttype:CONST},{input:"\\mapsto",tag:"mo",output:"\u21A6",ttype:CONST},{input:"\\longleftarrow",tag:"mo",output:"\u2190",ttype:LONG},{input:"\\longrightarrow",tag:"mo",output:"\u2192",ttype:LONG},{input:"\\longleftrightarrow",tag:"mo",output:"\u2194",ttype:LONG},{input:"\\Longleftarrow",tag:"mo",output:"\u21D0",ttype:LONG},{input:"\\Longrightarrow",tag:"mo",output:"\u21D2",ttype:LONG},{input:"\\implies",tag:"mo",output:"\u21D2",ttype:LONG},{input:"\\Longleftrightarrow",tag:"mo",output:"\u21D4",ttype:LONG},{input:"\\longmapsto",tag:"mo",output:"\u21A6",ttype:CONST},{input:"\\sqrt",tag:"msqrt",output:"sqrt",ttype:UNARY},{input:"\\root",tag:"mroot",output:"root",ttype:BINARY},{input:"\\frac",tag:"mfrac",output:"/",ttype:BINARY},{input:"\\stackrel",tag:"mover",output:"stackrel",ttype:BINARY},{input:"\\atop",tag:"mfrac",output:"",ttype:INFIX},{input:"\\choose",tag:"mfrac",output:"",ttype:INFIX},{input:"_",tag:"msub",output:"_",ttype:INFIX},{input:"^",tag:"msup",output:"^",ttype:INFIX},{input:"\\mathrm",tag:"mtext",output:"text",ttype:TEXT},{input:"\\mbox",tag:"mtext",output:"mbox",ttype:TEXT},{input:"\\acute",tag:"mover",output:"\u00B4",ttype:UNARY,acc:true},{input:"\\grave",tag:"mover",output:"\u0060",ttype:UNARY,acc:true},{input:"\\breve",tag:"mover",output:"\u02D8",ttype:UNARY,acc:true},{input:"\\check",tag:"mover",output:"\u02C7",ttype:UNARY,acc:true},{input:"\\dot",tag:"mover",output:".",ttype:UNARY,acc:true},{input:"\\ddot",tag:"mover",output:"..",ttype:UNARY,acc:true},{input:"\\mathring",tag:"mover",output:"\u00B0",ttype:UNARY,acc:true},{input:"\\vec",tag:"mover",output:"\u20D7",ttype:UNARY,acc:true},{input:"\\overrightarrow",tag:"mover",output:"\u20D7",ttype:UNARY,acc:true},{input:"\\overleftarrow",tag:"mover",output:"\u20D6",ttype:UNARY,acc:true},{input:"\\hat",tag:"mover",output:"\u005E",ttype:UNARY,acc:true},{input:"\\widehat",tag:"mover",output:"\u0302",ttype:UNARY,acc:true},{input:"\\tilde",tag:"mover",output:"~",ttype:UNARY,acc:true},{input:"\\widetilde",tag:"mover",output:"\u02DC",ttype:UNARY,acc:true},{input:"\\bar",tag:"mover",output:"\u203E",ttype:UNARY,acc:true},{input:"\\overbrace",tag:"mover",output:"\u23B4",ttype:UNARY,acc:true},{input:"\\overline",tag:"mover",output:"\u00AF",ttype:UNARY,acc:true},{input:"\\underbrace",tag:"munder",output:"\u23B5",ttype:UNARY,acc:true},{input:"\\underline",tag:"munder",output:"\u00AF",ttype:UNARY,acc:true},{input:"\\displaystyle",tag:"mstyle",atname:"displaystyle",atval:"true",ttype:UNARY},{input:"\\textstyle",tag:"mstyle",atname:"displaystyle",atval:"false",ttype:UNARY},{input:"\\scriptstyle",tag:"mstyle",atname:"scriptlevel",atval:"1",ttype:UNARY},{input:"\\scriptscriptstyle",tag:"mstyle",atname:"scriptlevel",atval:"2",ttype:UNARY},{input:"\\textrm",tag:"mstyle",output:"\\mathrm",ttype:DEFINITION},{input:"\\mathbf",tag:"mstyle",atname:"mathvariant",atval:"bold",ttype:UNARY},{input:"\\textbf",tag:"mstyle",atname:"mathvariant",atval:"bold",ttype:UNARY},{input:"\\mathit",tag:"mstyle",atname:"mathvariant",atval:"italic",ttype:UNARY},{input:"\\textit",tag:"mstyle",atname:"mathvariant",atval:"italic",ttype:UNARY},{input:"\\mathtt",tag:"mstyle",atname:"mathvariant",atval:"monospace",ttype:UNARY},{input:"\\texttt",tag:"mstyle",atname:"mathvariant",atval:"monospace",ttype:UNARY},{input:"\\mathsf",tag:"mstyle",atname:"mathvariant",atval:"sans-serif",ttype:UNARY},{input:"\\mathbb",tag:"mstyle",atname:"mathvariant",atval:"double-struck",ttype:UNARY,codes:AMbbb},{input:"\\mathcal",tag:"mstyle",atname:"mathvariant",atval:"script",ttype:UNARY,codes:AMcal},{input:"\\mathfrak",tag:"mstyle",atname:"mathvariant",atval:"fraktur",ttype:UNARY,codes:AMfrk}];var LMnames=[];function LMremoveCharsAndBlanks(g,h){var a;a=g.slice(h);for(var c=0;c<a.length&&a.charCodeAt(c)<=32;c=c+1){}return a.slice(c)}function LMgetSymbol(o){var a=0;var c=0;var h;var q;var p;var l="";var m=true;for(var g=1;g<=o.length&&m;g++){q=o.slice(0,g);c=a;a=position(LMnames,q,c);if(a<LMnames.length&&o.slice(0,LMnames[a].length)==LMnames[a]){l=LMnames[a];h=a;g=l.length}m=a<LMnames.length&&o.slice(0,LMnames[a].length)>=LMnames[a]}LMpreviousSymbol=LMcurrentSymbol;if(l!=""){LMcurrentSymbol=LMsymbols[h].ttype;return LMsymbols[h]}LMcurrentSymbol=CONST;a=1;q=o.slice(0,1);if("0"<=q&&q<="9"){p="mn"}else{p=(("A">q||q>"Z")&&("a">q||q>"z")?"mo":"mi")}return{input:q,tag:p,output:q,ttype:CONST}}var LMpreviousSymbol,LMcurrentSymbol;function LMparseSexpr(r){var t,s,o,a,x,q,p=document.createDocumentFragment();r=LMremoveCharsAndBlanks(r,0);t=LMgetSymbol(r);if(t==null||t.ttype==RIGHTBRACKET){return[null,r,null]}if(t.ttype==DEFINITION){r=t.output+LMremoveCharsAndBlanks(r,t.input.length);t=LMgetSymbol(r);if(t==null||t.ttype==RIGHTBRACKET){return[null,r,null]}}r=LMremoveCharsAndBlanks(r,t.input.length);switch(t.ttype){case SPACE:s=createMmlNode(t.tag);s.setAttribute(t.atname,t.atval);return[s,r,t.tag];case UNDEROVER:if(isIE){if(t.input.substr(0,4)=="\\big"){r="\\"+t.input.substr(4)+r;t=LMgetSymbol(r);t.ttype=UNDEROVER;r=LMremoveCharsAndBlanks(r,t.input.length)}}return[createMmlNode(t.tag,document.createTextNode(t.output)),r,t.tag];case CONST:var l=t.output;if(isIE){if(t.input=="'"){l="\u2032"}else{if(t.input=="''"){l="\u2033"}else{if(t.input=="'''"){l="\u2033\u2032"}else{if(t.input=="''''"){l="\u2033\u2033"}else{if(t.input=="\\square"){l="\u25A1"}else{if(t.input.substr(0,5)=="\\frac"){var g=t.input.substr(6,1);if(g=="5"||g=="6"){r=t.input.replace(/\\frac/,"\\frac ")+r;return[s,r,t.tag]}}}}}}}}s=createMmlNode(t.tag,document.createTextNode(l));return[s,r,t.tag];case LONG:s=createMmlNode(t.tag,document.createTextNode(t.output));s.setAttribute("minsize","1.5");s.setAttribute("maxsize","1.5");s=createMmlNode("mover",s);s.appendChild(createMmlNode("mspace"));return[s,r,t.tag];case STRETCHY:if(isIE&&t.input=="\\backslash"){t.output="\\"}s=createMmlNode(t.tag,document.createTextNode(t.output));if(t.input=="|"||t.input=="\\vert"||t.input=="\\|"||t.input=="\\Vert"){s.setAttribute("lspace","0em");s.setAttribute("rspace","0em")}s.setAttribute("maxsize",t.atval);if(t.rtag!=null){return[s,r,t.rtag]}else{return[s,r,t.tag]}case BIG:var k=t.atval;if(isIE){k=t.ieval}t=LMgetSymbol(r);if(t==null){return[null,r,null]}r=LMremoveCharsAndBlanks(r,t.input.length);s=createMmlNode(t.tag,document.createTextNode(t.output));if(isIE){var z=createMmlNode("mspace");z.setAttribute("height",k+"ex");s=createMmlNode("mrow",s);s.appendChild(z)}else{s.setAttribute("minsize",k);s.setAttribute("maxsize",k)}return[s,r,t.tag];case LEFTBRACKET:if(t.input=="\\left"){t=LMgetSymbol(r);if(t!=null){if(t.input=="."){t.invisible=true}r=LMremoveCharsAndBlanks(r,t.input.length)}}o=LMparseExpr(r,true,false);if(t==null||(typeof t.invisible=="boolean"&&t.invisible)){s=createMmlNode("mrow",o[0])}else{s=createMmlNode("mo",document.createTextNode(t.output));s=createMmlNode("mrow",s);s.appendChild(o[0])}return[s,o[1],o[2]];case MATRIX:if(t.input=="\\begin{array}"){var w="";t=LMgetSymbol(r);r=LMremoveCharsAndBlanks(r,0);if(t==null){w="l"}else{r=LMremoveCharsAndBlanks(r,t.input.length);if(t.input!="{"){w="l"}else{do{t=LMgetSymbol(r);if(t!=null){r=LMremoveCharsAndBlanks(r,t.input.length);if(t.input!="}"){w=w+t.input}}}while(t!=null&&t.input!=""&&t.input!="}")}}o=LMparseExpr("{"+r,true,true);s=createMmlNode("mtable",o[0]);w=w.replace(/l/g,"left ");w=w.replace(/r/g,"right ");w=w.replace(/c/g,"center ");s.setAttribute("columnalign",w);s.setAttribute("displaystyle","false");if(isIE){return[s,o[1],null]}var h=createMmlNode("mspace");h.setAttribute("width","0.167em");var y=createMmlNode("mspace");y.setAttribute("width","0.167em");var c=createMmlNode("mrow",h);c.appendChild(s);c.appendChild(y);return[c,o[1],null]}else{o=LMparseExpr("{"+r,true,true);s=createMmlNode("mtable",o[0]);if(isIE){s.setAttribute("columnspacing","0.25em")}else{s.setAttribute("columnspacing","0.167em")}s.setAttribute("columnalign","right center left");s.setAttribute("displaystyle","true");s=createMmlNode("mrow",s);return[s,o[1],null]}case TEXT:if(r.charAt(0)=="{"){x=r.indexOf("}")}else{x=0}if(x==-1){x=r.length}q=r.slice(1,x);if(q.charAt(0)==" "){s=createMmlNode("mspace");s.setAttribute("width","0.33em");p.appendChild(s)}p.appendChild(createMmlNode(t.tag,document.createTextNode(q)));if(q.charAt(q.length-1)==" "){s=createMmlNode("mspace");s.setAttribute("width","0.33em");p.appendChild(s)}r=LMremoveCharsAndBlanks(r,x+1);return[createMmlNode("mrow",p),r,null];case UNARY:o=LMparseSexpr(r);if(o[0]==null){return[createMmlNode(t.tag,document.createTextNode(t.output)),r]}if(typeof t.func=="boolean"&&t.func){q=r.charAt(0);if(q=="^"||q=="_"||q==","){return[createMmlNode(t.tag,document.createTextNode(t.output)),r,t.tag]}else{s=createMmlNode("mrow",createMmlNode(t.tag,document.createTextNode(t.output)));if(isIE){var z=createMmlNode("mspace");z.setAttribute("width","0.167em");s.appendChild(z)}s.appendChild(o[0]);return[s,o[1],t.tag]}}if(t.input=="\\sqrt"){if(isIE){var z=createMmlNode("mspace");z.setAttribute("height","1.2ex");z.setAttribute("width","0em");s=createMmlNode(t.tag,o[0]);s.appendChild(z);return[s,o[1],t.tag]}else{return[createMmlNode(t.tag,o[0]),o[1],t.tag]}}else{if(typeof t.acc=="boolean"&&t.acc){s=createMmlNode(t.tag,o[0]);var l=t.output;if(isIE){if(t.input=="\\hat"){l="\u0302"}else{if(t.input=="\\widehat"){l="\u005E"}else{if(t.input=="\\bar"){l="\u00AF"}else{if(t.input=="\\grave"){l="\u0300"}else{if(t.input=="\\tilde"){l="\u0303"}}}}}}var c=createMmlNode("mo",document.createTextNode(l));if(t.input=="\\vec"||t.input=="\\check"){c.setAttribute("maxsize","1.2")}if(isIE&&t.input=="\\bar"){c.setAttribute("maxsize","0.5")}if(t.input=="\\underbrace"||t.input=="\\underline"){c.setAttribute("accentunder","true")}else{c.setAttribute("accent","true")}s.appendChild(c);if(t.input=="\\overbrace"||t.input=="\\underbrace"){s.ttype=UNDEROVER}return[s,o[1],t.tag]}else{if(!isIE&&typeof t.codes!="undefined"){for(x=0;x<o[0].childNodes.length;x++){if(o[0].childNodes[x].nodeName=="mi"||o[0].nodeName=="mi"){q=(o[0].nodeName=="mi"?o[0].firstChild.nodeValue:o[0].childNodes[x].firstChild.nodeValue);var m=[];for(var v=0;v<q.length;v++){if(q.charCodeAt(v)>64&&q.charCodeAt(v)<91){m=m+String.fromCharCode(t.codes[q.charCodeAt(v)-65])}else{m=m+q.charAt(v)}}if(o[0].nodeName=="mi"){o[0]=createMmlNode("mo").appendChild(document.createTextNode(m))}else{o[0].replaceChild(createMmlNode("mo").appendChild(document.createTextNode(m)),o[0].childNodes[x])}}}}s=createMmlNode(t.tag,o[0]);s.setAttribute(t.atname,t.atval);if(t.input=="\\scriptstyle"||t.input=="\\scriptscriptstyle"){s.setAttribute("displaystyle","false")}return[s,o[1],t.tag]}}case BINARY:o=LMparseSexpr(r);if(o[0]==null){return[createMmlNode("mo",document.createTextNode(t.input)),r,null]}a=LMparseSexpr(o[1]);if(a[0]==null){return[createMmlNode("mo",document.createTextNode(t.input)),r,null]}if(t.input=="\\root"||t.input=="\\stackrel"){p.appendChild(a[0])}p.appendChild(o[0]);if(t.input=="\\frac"){p.appendChild(a[0])}return[createMmlNode(t.tag,p),a[1],t.tag];case INFIX:r=LMremoveCharsAndBlanks(r,t.input.length);return[createMmlNode("mo",document.createTextNode(t.output)),r,t.tag];default:return[createMmlNode(t.tag,document.createTextNode(t.output)),r,t.tag]}}function LMparseIexpr(k){var j,g,c,h,m,o,l;k=LMremoveCharsAndBlanks(k,0);g=LMgetSymbol(k);m=LMparseSexpr(k);h=m[0];k=m[1];o=m[2];j=LMgetSymbol(k);if(j.ttype==INFIX){k=LMremoveCharsAndBlanks(k,j.input.length);m=LMparseSexpr(k);if(m[0]==null){m[0]=createMmlNode("mo",document.createTextNode("\u25A1"))}k=m[1];o=m[2];if(j.input=="_"||j.input=="^"){c=LMgetSymbol(k);o=null;l=((g.ttype==UNDEROVER)||(h.ttype==UNDEROVER));if(j.input=="_"&&c.input=="^"){k=LMremoveCharsAndBlanks(k,c.input.length);var a=LMparseSexpr(k);k=a[1];o=a[2];h=createMmlNode((l?"munderover":"msubsup"),h);h.appendChild(m[0]);h.appendChild(a[0])}else{if(j.input=="_"){h=createMmlNode((l?"munder":"msub"),h);h.appendChild(m[0])}else{h=createMmlNode((l?"mover":"msup"),h);h.appendChild(m[0])}}h=createMmlNode("mrow",h)}else{h=createMmlNode(j.tag,h);if(j.input=="\\atop"||j.input=="\\choose"){h.setAttribute("linethickness","0ex")}h.appendChild(m[0]);if(j.input=="\\choose"){h=createMmlNode("mfenced",h)}}}return[h,k,o]}function LMparseExpr(q,p,w){var v,r,h,y,D,l=document.createDocumentFragment();do{q=LMremoveCharsAndBlanks(q,0);h=LMparseIexpr(q);r=h[0];q=h[1];D=h[2];v=LMgetSymbol(q);if(r!=undefined){if((D=="mn"||D=="mi")&&v!=null&&typeof v.func=="boolean"&&v.func){var B=createMmlNode("mspace");B.setAttribute("width","0.167em");r=createMmlNode("mrow",r);r.appendChild(B)}l.appendChild(r)}}while((v.ttype!=RIGHTBRACKET)&&v!=null&&v.output!="");D=null;if(v.ttype==RIGHTBRACKET){if(v.input=="\\right"){q=LMremoveCharsAndBlanks(q,v.input.length);v=LMgetSymbol(q);if(v!=null&&v.input=="."){v.invisible=true}if(v!=null){D=v.rtag}}if(v!=null){q=LMremoveCharsAndBlanks(q,v.input.length)}var z=l.childNodes.length;if(w&&z>0&&l.childNodes[z-1].nodeName=="mrow"&&z>1&&l.childNodes[z-2].nodeName=="mo"&&l.childNodes[z-2].firstChild.nodeValue=="&"){var c=[];var s=l.childNodes.length;for(y=0;w&&y<s;y=y+2){c[y]=[];r=l.childNodes[y];for(var x=0;x<r.childNodes.length;x++){if(r.childNodes[x].firstChild.nodeValue=="&"){c[y][c[y].length]=x}}}var g,a,o,t,A=document.createDocumentFragment();for(y=0;y<s;y=y+2){g=document.createDocumentFragment();a=document.createDocumentFragment();r=l.firstChild;o=r.childNodes.length;t=0;for(x=0;x<o;x++){if(typeof c[y][t]!="undefined"&&x==c[y][t]){r.removeChild(r.firstChild);g.appendChild(createMmlNode("mtd",a));t++}else{a.appendChild(r.firstChild)}}g.appendChild(createMmlNode("mtd",a));if(l.childNodes.length>2){l.removeChild(l.firstChild);l.removeChild(l.firstChild)}A.appendChild(createMmlNode("mtr",g))}return[A,q]}if(typeof v.invisible!="boolean"||!v.invisible){r=createMmlNode("mo",document.createTextNode(v.output));l.appendChild(r)}}return[l,q,D]}var tcnt=0,dcnt=0;function simpleLaTeXformatting(a){a=a.replace(/\$\$((.|\n)*?)\$\$/g,'<p align="center">$\\displaystyle{$1}$</p>');a=a.replace(/\\begin{(theorem|lemma|proposition|corollary)}((.|\n)*?)\\end{\1}/g,function(h,g,c){tcnt++;return"<b>"+g.charAt(0).toUpperCase()+g.slice(1)+" "+tcnt+".</b> <i>"+c.replace(/^\s*<\/?\w+\/?>|\s*<\/?\w+\/?>$/g,"")+"</i>"});a=a.replace(/\\begin{(definition|example|remark|problem|exercise|conjecture|solution)}((.|\n)*?)\\end{\1}/g,function(h,g,c){dcnt++;return"<b>"+g.charAt(0).toUpperCase()+g.slice(1)+" "+dcnt+".</b> "+c.replace(/^\s*<\/?\w+\/?>|\s*<\/?\w+\/?>$/g,"")});a=a.replace(/\\begin{proof}((.|\n)*?)\\end{proof}/g,function(g,c){return"<i>Proof:</i> "+c.replace(/^\s*<\/?\w+\/?>|\s*<\/?\w+\/?>$/g,"")+" &#x25A1;"});a=a.replace(/\\emph{(.*?)}/g,"<em>$1</em>");a=a.replace(/\\textbf{(.*?)}/g,"<b>$1</b>");a=a.replace(/\\cite{(.*?)}/g,"[$1]");a=a.replace(/\\chapter{(.*?)}/g,"<h2>$1</h2>");a=a.replace(/\\section{(.*?)}(\s*<\/?(br|p)\s?\/?>)?/g,"<h3>$1</h3>");a=a.replace(/\\subsection{((.|\n)*?)}/g,"<h4>$1</h4>");a=a.replace(/\\begin{itemize}(\s*<\/?(br|p)\s?\/?>)?/g,"<ul>");a=a.replace(/\\item\s((.|\n)*?)(?=(\\item|\\end))/g,"<li>$1</li>");a=a.replace(/\\end{itemize}(\s*<\/?(br|p)\s?\/?>)?/g,"</ul>");a=a.replace(/\\begin{enumerate}(\s*<\/?(br|p)\s?\/?>)?/g,"<ol>");a=a.replace(/\\end{enumerate}(\s*<\/?(br|p)\s?\/?>)?/g,"</ol>");a=a.replace(/\\item\[(.*?)]{(.*?)}/g,"<dt>$1</dt><dd>$2</dd>");a=a.replace(/\\begin{description}/g,"<dl>");a=a.replace(/\\end{description}/g,"</dl>");a=a.replace(/\\newline\b/g,"<br/>");a=a.replace(/\\newpage\b/g,'<br style="page-break-after:always;">');a=a.replace(/\\par\b/g,"<p>&nbsp;</p>");a=a.replace(/\\bigskip/g,'<p style="margin-bottom:0.5in">&nbsp;</p>');a=a.replace(/\\medskip/g,'<p style="margin-bottom:0.3in">&nbsp;</p>');a=a.replace(/\\smallskip/g,'<p style="margin-bottom:0.15in">&nbsp;</p>');a=a.replace(/\\begin{center}((.|\n)*?)\\end{center}/g,"<center>$1</center>");return a}function ASCIIandgraphformatting(a){a=a.replace(/<sup>(.*?)<\/sup>(\s|(\S))/gi,"^{$1} $3");a=a.replace(/(Proof:)/g,"<i>$1</i>");a=a.replace(/QED/g,"&nbsp; &nbsp; &#x25A1;");a=a.replace(/(\\?end{?a?math}?)/ig,"<span></span>$1");a=a.replace(/(\bamath\b|\\begin{a?math})/ig,"<span></span>$1");a=a.replace(/([>\n])(Theorem|Lemma|Proposition|Corollary|Definition|Example|Remark|Problem|Exercise|Conjecture|Solution)(:|\W\W?(\w|\s|-|\.)*?\W?:)/g,"$1<b>$2$3</b>");a=a.replace(/<embed\s+class\s?=\s?"?ASCIIsvg"?/gi,'<embed class="ASCIIsvg" src="'+dsvglocation+'d.svg" wmode="transparent"');a=a.replace(/(?:\\begin{a?graph}|\bagraph|\(:graph\s)((.|\n)*?)(?:\\end{a?graph}|enda?graph|:\))/g,function(g,c){return'<table><tr><td><div class="ASCIIsvg"><embed class="ASCIIsvg" src="'+dsvglocation+'d.svg" wmode="transparent" script=\''+c.replace(/<\/?(br|p|pre)\s?\/?>/gi,"\n")+"'/></div></td></tr></table>"});a=a.replace(/insertASCIIMathCalculator/g,'<div class="ASCIIMathCalculator"></div>');return a}function LMprocessNode(j){var h,a;try{a=j.innerHTML}catch(c){}var g=/amath\b|graph/i.test(a);if((a==null||a.indexOf("$ ")!=-1||a.indexOf("$<")!=-1||a.indexOf("\\begin")!=-1||g||a.slice(-1)=="$"||a.indexOf("$\n")!=-1)&&!/edit-content|HTMLArea|wikiedit|wpTextbox1/.test(a)){if(!avoidinnerHTML&&translateLaTeXformatting){a=simpleLaTeXformatting(a)}if(a!=null&&g&&!avoidinnerHTML){a=ASCIIandgraphformatting(a)}a=a.replace(/%7E/g,"~");if(!avoidinnerHTML){j.innerHTML=a}processNodeR(j,false,true)}}var checkIfSVGavailable=true;var notifyIfNoSVG=true;var alertIfNoSVG=false;var noSVG=false;var defaultwidth=300;defaultheight=200;var defaultxmin=-5.5;defaultxmax=5.5;var defaultborder=0;border=defaultborder;var defaultstrokewidth="1";var defaultstroke="blue";var defaultstrokeopacity=1;var defaultstrokedasharray=null;var defaultfill="none";var defaultfillopacity=1;var defaultfontstyle="normal";var defaultfontfamily="times";var defaultfontsize="16";var defaultfontweight="normal";var defaultfontstroke="none";var defaultfontfill="none";var defaultmarker="none";var defaultendpoints="";var showcoordinates=true;var markerstrokewidth="1";var markerstroke="black";var markerfill="yellow";var markersize=4;var arrowfill=stroke;var dotradius=4;var ticklength=4;var axesstroke="black";var gridstroke="grey";var backgroundstyle="fill-opacity:1; fill:white";var singlelettersitalic=true;var picturepos=null;var xunitlength;var yunitlength;var origin=[0,0];var above="above";var below="below";var left="left";var right="right";var aboveleft="aboveleft";var aboveright="aboveright";var belowleft="belowleft";var belowright="belowright";var xmin,xmax,ymin,ymax,xscl,yscl,xgrid,ygrid,xtick,ytick,initialized;var strokewidth,strokedasharray,stroke,fill,strokeopacity,fillopacity;var fontstyle,fontfamily,fontsize,fontweight,fontstroke,fontfill;var marker,endpoints,dynamic={};var picture,svgpicture,doc,width,height;var isIE=document.createElementNS==null;var cpi="\u03C0",ctheta="\u03B8";var log=function(a){return ln(a)/ln(10)};var pi=Math.PI,e=Math.E,ln=Math.log,sqrt=Math.sqrt;var floor=Math.floor,ceil=Math.ceil,abs=Math.abs;var sin=Math.sin,cos=Math.cos,tan=Math.tan;var arcsin=Math.asin,arccos=Math.acos,arctan=Math.atan;var sec=function(a){return 1/Math.cos(a)};var csc=function(a){return 1/Math.sin(a)};var cot=function(a){return 1/Math.tan(a)};var arcsec=function(a){return arccos(1/a)};var arccsc=function(a){return arcsin(1/a)};var arccot=function(a){return arctan(1/a)};var sinh=function(a){return(Math.exp(a)-Math.exp(-a))/2};var cosh=function(a){return(Math.exp(a)+Math.exp(-a))/2};var tanh=function(a){return(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))};var sech=function(a){return 1/cosh(a)};var csch=function(a){return 1/sinh(a)};var coth=function(a){return 1/tanh(a)};var arcsinh=function(a){return ln(a+Math.sqrt(a*a+1))};var arccosh=function(a){return ln(a+Math.sqrt(a*a-1))};var arctanh=function(a){return ln((1+a)/(1-a))/2};var sech=function(a){return 1/cosh(a)};var csch=function(a){return 1/sinh(a)};var coth=function(a){return 1/tanh(a)};var arcsech=function(a){return arccosh(1/a)};var arccsch=function(a){return arcsinh(1/a)};var arccoth=function(a){return arctanh(1/a)};var sign=function(a){return(a==0?0:(a<0?-1:1))};function factorial(a,g){if(g==null){g=1}if(Math.abs(a-Math.round(a*1000000)/1000000)<1e-15){a=Math.round(a*1000000)/1000000}if(a-Math.floor(a)!=0){return NaN}for(var c=a-g;c>0;c-=g){a*=c}return(a<0?NaN:(a==0?1:a))}function C(a,c){var h=1;for(var g=0;g<c;g++){h*=(a-g)/(c-g)}return h}function chop(a,c){if(c==null){c=0}return Math.floor(a*Math.pow(10,c))/Math.pow(10,c)}function ran(g,c,h){if(h==null){h=0}return chop((c+Math.pow(10,-h)-g)*Math.random()+g,h)}function myCreateElementSVG(a){if(isIE){return doc.createElement(a)}else{return doc.createElementNS("http://www.w3.org/2000/svg",a)}}function getElementsByClass(a,g,h){var j=new Array(0);var k=a.getElementsByTagName(g);for(var c=0;c<k.length;c++){if(k[c].className.slice(0,h.length)==h){j[j.length]=k[c]}}return j}function showobj(g){var a="",c;for(c in g){a+=(g.getAttribute(c)==null?"":" "+c+":"+g.getAttribute(c))}return a}function findPos(a){var c=curtop=0;if(a.offsetParent){c=a.offsetLeft;curtop=a.offsetTop;while(a=a.offsetParent){c+=a.offsetLeft;curtop+=a.offsetTop}}return[c,curtop]}function checkSVG(){if(navigator.appName.slice(0,8)=="Netscape"){if(window.SVGElement){noSVG=null}else{noSVG=true}}else{if(navigator.appName.slice(0,9)=="Microsoft"){try{var oSVG=eval("new ActiveXObject('Adobe.SVGCtl.3');");noSVG=null}catch(e){noSVG=true}}else{if(navigator.appName.slice(0,5)=="Opera"){noSVG=null}else{noSVG=true}}}if(noSVG&&notifyIfNoSVG){var msg="To view the ASCIIsvg images use Internet Explorer + Adobe SVGviewer or Mozilla Firefox 2.0 or later.";if(alertIfNoSVG){alert(msg)}else{return msg}}}function setText(a,g){var c=document.getElementById(g);if(c!=null){if(c.childNodes.length!=0){c.childNodes[0].nodeValue=a}else{c.appendChild(document.createTextNode(a))}}}function getX(a){var c=a.target.parentNode;pos=findPos(c.parentNode);return(a.clientX+(isIE?0:window.pageXOffset)-pos[0]-c.getAttribute("ox"))/parseFloat(c.getAttribute("xunitlength"))}function getY(a){var c=a.target.parentNode;pos=findPos(c.parentNode);return(c.getAttribute("height")-c.getAttribute("oy")-(a.clientY+(isIE?0:window.pageYOffset)-pos[1]))/parseFloat(c.getAttribute("yunitlength"))}function translateandeval(src){var errstr;src=src.replace(/plot\(\x20*([^\"f\[][^\n\r;]+?)\,/g,'plot("$1",');src=src.replace(/plot\(\x20*([^\"f\[][^\n\r;]+)\)/g,'plot("$1")');src=src.replace(/([=[(,]\x20*)\(([-a-z0-9./+*]+?),([-a-z0-9./+*]+?)\)/g,"$1[$2,$3]");src=src.replace(/([0-9])([a-df-zA-Z]|e^)/g,"$1*$2");src=src.replace(/\)([\(0-9a-zA-Z])/g,")*$1");try{with(Math){eval(src)}}catch(err){if(err!="wait"){if(typeof err=="object"){errstr=err.name+" "+err.message+" "+err.number+" "+err.description}else{errstr=err}alert(errstr+"\n"+src)}}}var lastSlot=0;function drawPictures(){var a,g,j,k,h,r,p,q,m,l,s;var c=document.getElementsByTagName("body")[0];pictures=getElementsByClass(c,"embed","ASCIIsvg");var o=pictures.length;if(o==0){return}for(p=lastSlot;p<o+lastSlot;p++){width=null;height=null;xmin=null;xmax=null;ymin=null;ymax=null;xscl=null;xgrid=null;yscl=null;ygrid=null;initialized=false;picture=pictures[p-lastSlot];a=picture.getAttribute("script");if(a==null){a=""}if(!/axes\b|initPicture/.test(a)){var l=0;while(/((yscl|ymax|ymin|xscl|xmax|xmin|\bwidth|\bheight)\s*=\s*-?\d*(\d\.|\.\d|\d)\d*\s*;?)/.test(a.slice(l))){l++}a=(l==0?"axes(); "+a:a.slice(0,l)+a.slice(l).replace(/((scl|max|min|idth|eight)\s*=\s*-?\d*(\d\.|\.\d|\d)\d*\s*;?)/,"$1\naxes();"))}r=picture.getAttribute("height");if(isIE){picture.setAttribute("wmode","transparent")}if(document.getElementById("picture"+(p+1)+"mml")==null){picture.parentNode.style.position="relative";h=createElementXHTML("div");h.style.position="absolute";h.style.top="0px";h.style.left="0px";h.setAttribute("id","picture"+(p+1)+"mml");picture.parentNode.insertBefore(h,picture.nextSibling)}if(r==null){r=""}if(r==""||a==""){if(document.getElementById("picture"+(p+1)+"input")==null){h=createElementXHTML("textarea");m=a.split("\n");q=0;for(l=0;l<m.length;l++){q=Math.max(q,m[l].length)}h.setAttribute("rows",Math.min(10,m.length)+1);h.setAttribute("cols",Math.max(Math.min(60,q),20)+5);if(isIE){a=a.replace(/([^\r])\n/g,"$1\r")}h.appendChild(document.createTextNode(a));if(a.indexOf("showcode()")==-1){h.style.display="none"}h.setAttribute("id","picture"+(p+1)+"input");picture.parentNode.insertBefore(h,picture.nextSibling);picture.parentNode.insertBefore(createElementXHTML("br"),h);s=createElementXHTML("button");s.setAttribute("id","picture"+(p+1)+"button");if(isIE){s.onclick=function(){updatePicture(this)}}else{s.setAttribute("onclick","updatePicture(this)")}s.appendChild(document.createTextNode("Update"));if(a.indexOf("showcode()")==-1){s.style.display="none"}picture.parentNode.insertBefore(s,h);picture.parentNode.insertBefore(createElementXHTML("br"),h)}else{a=document.getElementById("picture"+(p+1)+"input").value}}g=picture.getAttribute("id");j=picture.getAttribute("src");if(g==null||g==""){g="picture"+(p+1);picture.setAttribute("id",g)}translateandeval(a)}lastSlot+=o}function setdefaults(){strokewidth=defaultstrokewidth;stroke=defaultstroke;strokeopacity=defaultstrokeopacity;strokedasharray=defaultstrokedasharray;fill=defaultfill;fillopacity=defaultfillopacity;fontstyle=defaultfontstyle;fontfamily=defaultfontfamily;fontsize=defaultfontsize;fontweight=defaultfontweight;fontstroke=defaultfontstroke;fontfill=defaultfontfill;marker=defaultmarker;endpoints=defaultendpoints}function switchTo(c){if(c==undefined){return}var a=c;if(typeof a!="string"){a=c.target.parentNode.getAttribute("name")}picture=document.getElementById(a);width=picture.getAttribute("width")-0;height=picture.getAttribute("height")-0;setdefaults();if((picture.nodeName=="EMBED"||picture.nodeName=="embed")&&isIE){svgpicture=picture.getSVGDocument().getElementById("root");doc=picture.getSVGDocument()}else{svgpicture=picture;doc=document}xunitlength=parseFloat(svgpicture.getAttribute("xunitlength"));yunitlength=parseFloat(svgpicture.getAttribute("yunitlength"));xmin=parseFloat(svgpicture.getAttribute("xmin"));xmax=parseFloat(svgpicture.getAttribute("xmax"));ymin=parseFloat(svgpicture.getAttribute("ymin"));ymax=parseFloat(svgpicture.getAttribute("ymax"));origin=[svgpicture.getAttribute("ox")-0,svgpicture.getAttribute("oy")-0]}function updatePicture(h){var a,j,k,g,c;if(typeof h=="object"){k=h.id.slice(0,-6)}else{k=(typeof h=="string"?h:"picture"+(h+1))}j=document.getElementById(k+"input").value;xmin=null;xmax=null;ymin=null;ymax=null;xscl=null;xgrid=null;yscl=null;ygrid=null;initialized=false;picture=document.getElementById(k);translateandeval(j)}function changepicturesize(a,h){var j=a.target;var g=j.parentNode.getAttribute("name");var c=document.getElementById(g);var k=document.getElementById(g+"input").value;if(!/height/.test(k)){k="height=0; "+k}if(!/width/.test(k)){k="width=0; "+k}k=k.replace(/width\s*=\s*\d+/,"width="+(h*(c.getAttribute("width")-0)));k=k.replace(/height\s*=\s*\d+/,"height="+(h*(c.getAttribute("height")-0)));document.getElementById(g+"input").value=k;updatePicture(g)}function zoom(o,m){switchTo(o);var k=o.target;var g=k.parentNode.getAttribute("name");var l=document.getElementById(g);var c=document.getElementById(g+"input").value;var h=(xmax-xmin)/2;var p=(ymax-ymin)/2;var j=getX(o),a=getY(o);if(!/ymax/.test(c)){c="ymax=0; "+c}if(!/ymin/.test(c)){c="ymin=0; "+c}if(!/xmax/.test(c)){c="xmax=0; "+c}if(!/xmin/.test(c)){c="xmin=0; "+c}c=c.replace(/xmin\s*=\s*[-\d.e]+/,"xmin="+(j-m*h));c=c.replace(/xmax\s*=\s*[-\d.e]+/,"xmax="+(j+m*h));c=c.replace(/ymin\s*=\s*[-\d.e]+/,"ymin="+(a-m*p));c=c.replace(/ymax\s*=\s*[-\d.e]+/,"ymax="+(a+m*p));document.getElementById(g+"input").value=c;updatePicture(g)}var sinceFirstClick=0;var dblClkTimer;function timer(){if(sinceFirstClick<60){sinceFirstClick++;setTimeout("timer()",10)}else{clearTimeout(dblClkTimer);dblClkTimer=""}}function mClick(a){if(sinceFirstClick!=0){if(sinceFirstClick<=40){if(a.shiftKey){if(a.altKey){changepicturesize(a,2)}else{zoom(a,0.5)}}else{if(a.altKey){zoom(a,2)}else{showHideCode(a)}}clearTimeout(dblClkTimer);dblClkTimer=""}else{clearTimeout(dblClkTimer);sinceFirstClick=0;dblClkTimer=setTimeout("timer()",10)}}else{sinceFirstClick=0;dblClkTimer=setTimeout("timer()",10)}}function showHideCode(a){var h=a.target;var c=h.parentNode.getAttribute("name");var g=document.getElementById(c+"input");g.style.display=(g.style.display=="none"?"":"none");var g=document.getElementById(c+"button");g.style.display=(g.style.display=="none"?"":"none")}function showcode(){}function setBorder(a){border=a}function initPicture(l,j,g,a){if(!initialized){setdefaults();initialized=true;if(l!=null){xmin=l}if(j!=null){xmax=j}if(g!=null){ymin=g}if(a!=null){ymax=a}if(xmin==null){xmin=defaultxmin}if(xmax==null){xmax=defaultxmax}if(typeof xmin!="number"||typeof xmax!="number"||xmin>=xmax){alert("Picture requires at least two numbers: xmin < xmax")}else{if(a!=null&&(typeof g!="number"||typeof a!="number"||g>=a)){alert("initPicture(xmin,xmax,ymin,ymax) requires numbers ymin < ymax")}else{if(width==null){width=picture.getAttribute("width");if(width==null||width==""){width=defaultwidth}}picture.setAttribute("width",width);if(height==null){height=picture.getAttribute("height");if(height==null||height==""){height=defaultheight}}picture.setAttribute("height",height);xunitlength=(width-2*border)/(xmax-xmin);yunitlength=xunitlength;if(ymin==null){origin=[-xmin*xunitlength+border,height/2];ymin=-(height-2*border)/(2*yunitlength);ymax=-ymin}else{if(ymax!=null){yunitlength=(height-2*border)/(ymax-ymin)}else{ymax=(height-2*border)/yunitlength+ymin}origin=[-xmin*xunitlength+border,-ymin*yunitlength+border]}if(isIE){if(picture.FULLSCREEN==undefined){setTimeout("drawPictures()",50);throw"wait"}svgpicture=picture.getSVGDocument().getElementById("root");if(svgpicture==null){setTimeout("drawPictures()",50);throw"wait"}svgpicture=picture.getSVGDocument().getElementById("root");while(svgpicture.childNodes.length>0){svgpicture.removeChild(svgpicture.lastChild)}svgpicture.setAttribute("width",width);svgpicture.setAttribute("height",height);svgpicture.setAttribute("name",picture.getAttribute("id"));doc=picture.getSVGDocument()}else{var c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("id",picture.getAttribute("id"));c.setAttribute("name",picture.getAttribute("id"));c.setAttribute("width",picture.getAttribute("width"));c.setAttribute("height",picture.getAttribute("height"));picturepos=findPos(picture);if(picture.parentNode!=null){picture.parentNode.replaceChild(c,picture)}else{svgpicture.parentNode.replaceChild(c,svgpicture)}svgpicture=c;doc=document}var k=document.getElementById(picture.getAttribute("id")+"mml");if(k!=null){while(k.childNodes.length>0){k.removeChild(k.lastChild)}}svgpicture.setAttribute("xunitlength",xunitlength);svgpicture.setAttribute("yunitlength",yunitlength);svgpicture.setAttribute("xmin",xmin);svgpicture.setAttribute("xmax",xmax);svgpicture.setAttribute("ymin",ymin);svgpicture.setAttribute("ymax",ymax);svgpicture.setAttribute("ox",origin[0]);svgpicture.setAttribute("oy",origin[1]);var h=myCreateElementSVG("rect");h.setAttribute("x","0");h.setAttribute("y","0");h.setAttribute("width",width);h.setAttribute("height",height);h.setAttribute("style",backgroundstyle);svgpicture.appendChild(h);svgpicture.setAttribute("onmousemove","displayCoord(evt)");svgpicture.setAttribute("onmouseout","removeCoord(evt)");svgpicture.setAttribute("onclick","mClick(evt)");h=myCreateElementSVG("text");h.appendChild(doc.createTextNode(" "));h.setAttribute("id","coords");svgpicture.appendChild(h);h=myCreateElementSVG("text");h.appendChild(doc.createTextNode(" "));h.setAttribute("id","coords");svgpicture.appendChild(h);border=defaultborder}}}}function line(h,g,j,c){var a;if(j!=null){a=doc.getElementById(j)}if(a==null){a=myCreateElementSVG("path");a.setAttribute("id",j);svgpicture.appendChild(a)}a.setAttribute("d","M"+(h[0]*xunitlength+origin[0])+","+(height-h[1]*yunitlength-origin[1])+" "+(g[0]*xunitlength+origin[0])+","+(height-g[1]*yunitlength-origin[1]));a.setAttribute("stroke-width",strokewidth);if(strokedasharray!=null){a.setAttribute("stroke-dasharray",strokedasharray)}a.setAttribute("stroke",stroke);a.setAttribute("fill",fill);a.setAttribute("stroke-opacity",strokeopacity);a.setAttribute("fill-opacity",fillopacity);if(marker=="dot"||marker=="arrowdot"){ASdot(h,markersize,markerstroke,markerfill);if(marker=="arrowdot"){arrowhead(h,g)}ASdot(g,markersize,markerstroke,markerfill)}else{if(marker=="arrow"){arrowhead(h,g)}}if(c==null&&endpoints!=""){c=endpoints}if(c!=null){if(c.indexOf("<-")!=-1){arrowhead(g,h)}if(c.indexOf("o-")!=-1){dot(h,"open")}if(c.indexOf("*-")!=-1){dot(h,"closed")}if(c.indexOf("->")!=-1){arrowhead(h,g)}if(c.indexOf("-o")!=-1){dot(g,"open")}if(c.indexOf("-*")!=-1){dot(g,"closed")}}}function path(k,m,l,j){if(l==null){l=""}var h,a,g;if(m!=null){h=doc.getElementById(m)}if(h==null){h=myCreateElementSVG("path");h.setAttribute("id",m);svgpicture.appendChild(h)}if(typeof k=="string"){a=k}else{a="M";a+=(k[0][0]*xunitlength+origin[0])+","+(height-k[0][1]*yunitlength-origin[1])+" "+l;for(g=1;g<k.length;g++){a+=(k[g][0]*xunitlength+origin[0])+","+(height-k[g][1]*yunitlength-origin[1])+" "}}h.setAttribute("d",a);h.setAttribute("stroke-width",strokewidth);if(strokedasharray!=null){h.setAttribute("stroke-dasharray",strokedasharray)}h.setAttribute("stroke",stroke);h.setAttribute("fill",fill);h.setAttribute("stroke-opacity",strokeopacity);h.setAttribute("fill-opacity",fillopacity);if(marker=="dot"||marker=="arrowdot"){for(g=0;g<k.length;g++){if(l!="C"&&l!="T"||g!=1&&g!=2){ASdot(k[g],markersize,markerstroke,markerfill)}}}if(j==null&&endpoints!=""){j=endpoints}if(j!=null){if(j.indexOf("<-")!=-1){arrowhead(k[1],k[0])}if(j.indexOf("o-")!=-1){dot(k[0],"open")}if(j.indexOf("*-")!=-1){dot(k[0],"closed")}if(j.indexOf("->")!=-1){arrowhead(k[k.length-2],k[k.length-1])}if(j.indexOf("-o")!=-1){dot(k[k.length-1],"open")}if(j.indexOf("-*")!=-1){dot(k[k.length-1],"closed")}}}function curve(c,g,a){path(c,g,"T",a)}function vector(c,a,g){line(c,a,g,"","->")}function circle(c,a,h){var g;if(h!=null){g=doc.getElementById(h)}if(g==null){g=myCreateElementSVG("circle");g.setAttribute("id",h);svgpicture.appendChild(g)}g.setAttribute("cx",c[0]*xunitlength+origin[0]);g.setAttribute("cy",height-c[1]*yunitlength-origin[1]);g.setAttribute("r",a*xunitlength);g.setAttribute("stroke-width",strokewidth);g.setAttribute("stroke",stroke);g.setAttribute("fill",fill);g.setAttribute("stroke-opacity",strokeopacity);g.setAttribute("fill-opacity",fillopacity)}function loop(a,c,g){if(c==null){c=[1,0]}path([a,[a[0]+c[0],a[1]+c[1]],[a[0]-c[1],a[1]+c[0]],a],g,"C");if(marker=="arrow"||marker=="arrowdot"){arrowhead([a[0]+Math.cos(1.4)*c[0]-Math.sin(1.4)*c[1],a[1]+Math.sin(1.4)*c[0]+Math.cos(1.4)*c[1]],a)}}function arc(l,g,a,k,c){var j,h;if(k!=null){j=doc.getElementById(k)}if(c==null){c=0}if(a==null){h=[g[0]-l[0],g[1]-l[1]];a=Math.sqrt(h[0]*h[0]+h[1]*h[1])}if(j==null){j=myCreateElementSVG("path");j.setAttribute("id",k);svgpicture.appendChild(j)}j.setAttribute("d","M"+(l[0]*xunitlength+origin[0])+","+(height-l[1]*yunitlength-origin[1])+" A"+a*xunitlength+","+a*yunitlength+" 0 "+c+",0 "+(g[0]*xunitlength+origin[0])+","+(height-g[1]*yunitlength-origin[1]));j.setAttribute("stroke-width",strokewidth);j.setAttribute("stroke",stroke);j.setAttribute("fill",fill);j.setAttribute("stroke-opacity",strokeopacity);j.setAttribute("fill-opacity",fillopacity);if(marker=="arrow"||marker=="arrowdot"){u=[(g[1]-l[1])/4,(l[0]-g[0])/4];h=[(g[0]-l[0])/2,(g[1]-l[1])/2];h=[l[0]+h[0]+u[0],l[1]+h[1]+u[1]]}else{h=[l[0],l[1]]}if(marker=="dot"||marker=="arrowdot"){ASdot(l,markersize,markerstroke,markerfill);if(marker=="arrowdot"){arrowhead(h,g)}ASdot(g,markersize,markerstroke,markerfill)}else{if(marker=="arrow"){arrowhead(h,g)}}}function sector(a,k,c,j){var h=k[0]-a[0],g=k[1]-a[1];arc(k,c,Math.sqrt(h*h+g*g),j+"arc");path([c,a,k],j+"path")}function ellipse(a,h,g,j){var c;if(j!=null){c=doc.getElementById(j)}if(c==null){c=myCreateElementSVG("ellipse");c.setAttribute("id",j);svgpicture.appendChild(c)}c.setAttribute("cx",a[0]*xunitlength+origin[0]);c.setAttribute("cy",height-a[1]*yunitlength-origin[1]);c.setAttribute("rx",h*xunitlength);c.setAttribute("ry",g*yunitlength);c.setAttribute("stroke-width",strokewidth);c.setAttribute("stroke",stroke);c.setAttribute("fill",fill);c.setAttribute("stroke-opacity",strokeopacity);c.setAttribute("fill-opacity",fillopacity)}function triangle(g,c,a,h){path([g,c,a,g],h)}function rect(j,g,k,h,c){var a;if(k!=null){a=doc.getElementById(k)}if(a==null){a=myCreateElementSVG("rect");a.setAttribute("id",k);svgpicture.appendChild(a)}a.setAttribute("x",j[0]*xunitlength+origin[0]);a.setAttribute("y",height-g[1]*yunitlength-origin[1]);a.setAttribute("width",(g[0]-j[0])*xunitlength);a.setAttribute("height",(g[1]-j[1])*yunitlength);if(h!=null){a.setAttribute("rx",h*xunitlength)}if(c!=null){a.setAttribute("ry",c*yunitlength)}a.setAttribute("stroke-width",strokewidth);a.setAttribute("stroke",stroke);a.setAttribute("fill",fill);a.setAttribute("stroke-opacity",strokeopacity);a.setAttribute("fill-opacity",fillopacity)}function text(c,q,l,a,m){var j,h,r=0,o=fontsize/3,k=q.toString();if(/(`|\$)/.test(k)){j=document.getElementById(svgpicture.getAttribute("name")+"mml");if(j!=null){if(a!=null){h=document.getElementById(a)}if(h==null){h=createElementXHTML("div");h.setAttribute("id",a);h.style.position="absolute";j.appendChild(h)}while(h.childNodes.length>0){h.removeChild(h.lastChild)}h.appendChild(document.createTextNode(k));if(/`/.test(k)){AMprocessNode(h)}else{LMprocessNode(h)}r=-h.offsetWidth/2;o=-h.offsetHeight/2;if(l!=null){if(/above/.test(l)){o=-h.offsetHeight}if(/below/.test(l)){o=0}if(/right/.test(l)){r=0}if(/left/.test(l)){r=-h.offsetWidth}}h.style.left=""+(c[0]*xunitlength+origin[0]+r)+"px";h.style.top=""+(height-c[1]*yunitlength-origin[1]+o)+"px"}return c}var g="middle";if(l!=null){if(/above/.test(l)){o=-fontsize/2}if(/below/.test(l)){o=fontsize-0}if(/right/.test(l)){g="start";r=fontsize/4}if(/left/.test(l)){g="end";r=-fontsize/4}}if(a!=null){h=doc.getElementById(a)}if(h==null){h=myCreateElementSVG("text");h.setAttribute("id",a);svgpicture.appendChild(h);h.appendChild(doc.createTextNode(k))}while(h.childNodes.length>1){h.removeChild(h.lastChild)}h.lastChild.nodeValue="\xA0"+k+"\xA0";h.setAttribute("x",c[0]*xunitlength+origin[0]+r);h.setAttribute("y",height-c[1]*yunitlength-origin[1]+o);h.setAttribute("font-style",(m!=null?m:(k.search(/^[a-zA-Z]$/)!=-1?"italic":fontstyle)));h.setAttribute("font-family",fontfamily);h.setAttribute("font-size",fontsize);h.setAttribute("font-weight",fontweight);h.setAttribute("text-anchor",g);if(fontstroke!="none"){h.setAttribute("stroke",fontstroke)}if(fontfill!="none"){h.setAttribute("fill",fontfill)}return c}function mtext(a,l,h,k,j){var g="middle";var o=0;var m=fontsize/3;if(h!=null){if(h.slice(0,5)=="above"){m=-fontsize/2}if(h.slice(0,5)=="below"){m=fontsize-0}if(h.slice(0,5)=="right"||h.slice(5,10)=="right"){g="start";o=fontsize/2}if(h.slice(0,4)=="left"||h.slice(5,9)=="left"){g="end";o=-fontsize/2}}var c=this;if(this.nodeName=="svg"){c=myCreateElementSVG("text");this.appendChild(c);c.appendChild(doc.createTextNode(l))}c.lastChild.nodeValue=l;c.setAttribute("x",a[0]+o);c.setAttribute("y",a[1]+m);c.setAttribute("font-style",(k!=null?k:fontstyle));c.setAttribute("font-family",fontfamily);c.setAttribute("font-size",(j!=null?j:fontsize));c.setAttribute("font-weight",fontweight);c.setAttribute("text-anchor",g);if(fontstroke!="none"){c.setAttribute("stroke",fontstroke)}if(fontfill!="none"){c.setAttribute("fill",fontfill)}}function image(c,k,a,g,l){var j;if(l!=null){j=doc.getElementById(l)}if(j==null){j=myCreateElementSVG("image");j.setAttribute("id",l);svgpicture.appendChild(j)}j.setAttribute("x",k[0]*xunitlength+origin[0]);j.setAttribute("y",height-k[1]*yunitlength-origin[1]);j.setAttribute("width",a);j.setAttribute("height",g);j.setAttribute("xlink:href",c)}function ASdot(c,a,g,j){if(g==null){g=stroke}if(j==null){j=fill}var h=myCreateElementSVG("circle");h.setAttribute("cx",c[0]*xunitlength+origin[0]);h.setAttribute("cy",height-c[1]*yunitlength-origin[1]);h.setAttribute("r",a);h.setAttribute("stroke-width",strokewidth);h.setAttribute("stroke",g);h.setAttribute("fill",j);svgpicture.appendChild(h)}function dot(c,j,g,m,l){var h;var a=c[0]*xunitlength+origin[0];var k=height-c[1]*yunitlength-origin[1];if(l!=null){h=doc.getElementById(l)}if(j=="+"||j=="-"||j=="|"){if(h==null){h=myCreateElementSVG("path");h.setAttribute("id",l);svgpicture.appendChild(h)}if(j=="+"){h.setAttribute("d"," M "+(a-ticklength)+" "+k+" L "+(a+ticklength)+" "+k+" M "+a+" "+(k-ticklength)+" L "+a+" "+(k+ticklength));h.setAttribute("stroke-width",0.5);h.setAttribute("stroke",axesstroke)}else{if(j=="-"){h.setAttribute("d"," M "+(a-ticklength)+" "+k+" L "+(a+ticklength)+" "+k)}else{h.setAttribute("d"," M "+a+" "+(k-ticklength)+" L "+a+" "+(k+ticklength))}h.setAttribute("stroke-width",strokewidth);h.setAttribute("stroke",stroke)}}else{if(h==null){h=myCreateElementSVG("circle");h.setAttribute("id",l);svgpicture.appendChild(h)}h.setAttribute("cx",a);h.setAttribute("cy",k);h.setAttribute("r",dotradius);h.setAttribute("stroke-width",strokewidth);h.setAttribute("stroke",stroke);h.setAttribute("fill",(j=="open"?"white":(j=="closed"?stroke:markerfill)))}if(g!=null){text(c,g,(m==null?"below":m),(l==null?l:l+"label"))}}point=dot;function arrowhead(l,k){var a;var g=[l[0]*xunitlength+origin[0],height-l[1]*yunitlength-origin[1]];var c=[k[0]*xunitlength+origin[0],height-k[1]*yunitlength-origin[1]];var h=[c[0]-g[0],c[1]-g[1]];var m=Math.sqrt(h[0]*h[0]+h[1]*h[1]);if(m>1e-8){h=[h[0]/m,h[1]/m];a=[-h[1],h[0]];var j=myCreateElementSVG("path");j.setAttribute("d","M "+(c[0]-15*h[0]-4*a[0])+" "+(c[1]-15*h[1]-4*a[1])+" L "+(c[0]-3*h[0])+" "+(c[1]-3*h[1])+" L "+(c[0]-15*h[0]+4*a[0])+" "+(c[1]-15*h[1]+4*a[1])+" z");j.setAttribute("stroke-width",markerstrokewidth);j.setAttribute("stroke",stroke);j.setAttribute("fill",stroke);j.setAttribute("stroke-opacity",strokeopacity);j.setAttribute("fill-opacity",fillopacity);svgpicture.appendChild(j)}}function chopZ(c){var a=c.indexOf(".");if(a==-1){return c}for(var g=c.length-1;g>a&&c.charAt(g)=="0";g--){}if(g==a){g--}return c.slice(0,g+1)}function grid(c,a){axes(c,a,null,c,a)}function noaxes(){if(!initialized){initPicture()}}function axes(dx,dy,labels,gdx,gdy){var x,y,ldx,ldy,lx,ly,lxp,lyp,pnode,st;if(!initialized){initPicture()}if(typeof dx=="string"){labels=dx;dx=null}if(typeof dy=="string"){gdx=dy;dy=null}if(xscl!=null){dx=xscl;gdx=xscl;labels=dx}if(yscl!=null){dy=yscl;gdy=yscl}if(xtick!=null){dx=xtick}if(ytick!=null){dy=ytick}dx=(dx==null?xunitlength:dx*xunitlength);dy=(dy==null?dx:dy*yunitlength);fontsize=Math.min(dx/2,dy/2,16);ticklength=fontsize/4;if(xgrid!=null){gdx=xgrid}if(ygrid!=null){gdy=ygrid}if(gdx!=null){gdx=(typeof gdx=="string"?dx:gdx*xunitlength);gdy=(gdy==null?dy:gdy*yunitlength);pnode=myCreateElementSVG("path");st="";for(x=origin[0];x<width;x=x+gdx){st+=" M"+x+",0 "+x+","+height}for(x=origin[0]-gdx;x>0;x=x-gdx){st+=" M"+x+",0 "+x+","+height}for(y=height-origin[1];y<height;y=y+gdy){st+=" M0,"+y+" "+width+","+y}for(y=height-origin[1]-gdy;y>0;y=y-gdy){st+=" M0,"+y+" "+width+","+y}pnode.setAttribute("d",st);pnode.setAttribute("stroke-width",0.5);pnode.setAttribute("stroke",gridstroke);pnode.setAttribute("fill",fill);svgpicture.appendChild(pnode)}pnode=myCreateElementSVG("path");st="M0,"+(height-origin[1])+" "+width+","+(height-origin[1])+" M"+origin[0]+",0 "+origin[0]+","+height;for(x=origin[0]+dx;x<width;x=x+dx){st+=" M"+x+","+(height-origin[1]+ticklength)+" "+x+","+(height-origin[1]-ticklength)}for(x=origin[0]-dx;x>0;x=x-dx){st+=" M"+x+","+(height-origin[1]+ticklength)+" "+x+","+(height-origin[1]-ticklength)}for(y=height-origin[1]+dy;y<height;y=y+dy){st+=" M"+(origin[0]+ticklength)+","+y+" "+(origin[0]-ticklength)+","+y}for(y=height-origin[1]-dy;y>0;y=y-dy){st+=" M"+(origin[0]+ticklength)+","+y+" "+(origin[0]-ticklength)+","+y}if(labels!=null){with(Math){ldx=dx/xunitlength;ldy=dy/yunitlength;lx=(xmin>0||xmax<0?xmin:0);ly=(ymin>0||ymax<0?ymin:0);lxp=(ly==0?"below":"above");lyp=(lx==0?"left":"right");var ddx=floor(1.1-log(ldx)/log(10))+1;var ddy=floor(1.1-log(ldy)/log(10))+1;for(x=ldx;x<=xmax;x=x+ldx){text([x,ly],chopZ(x.toFixed(ddx)),lxp)}for(x=-ldx;xmin<=x;x=x-ldx){text([x,ly],chopZ(x.toFixed(ddx)),lxp)}for(y=ldy;y<=ymax;y=y+ldy){text([lx,y],chopZ(y.toFixed(ddy)),lyp)}for(y=-ldy;ymin<=y;y=y-ldy){text([lx,y],chopZ(y.toFixed(ddy)),lyp)}}}fontsize=defaultfontsize;pnode.setAttribute("d",st);pnode.setAttribute("stroke-width",0.5);pnode.setAttribute("stroke",axesstroke);pnode.setAttribute("fill",fill);pnode.setAttribute("stroke-opacity",strokeopacity);pnode.setAttribute("fill-opacity",fillopacity);svgpicture.appendChild(pnode)}function mathjs(g){g=g.replace(/\s/g,"");if(g.indexOf("^-1")!=-1){g=g.replace(/sin\^-1/g,"arcsin");g=g.replace(/cos\^-1/g,"arccos");g=g.replace(/tan\^-1/g,"arctan");g=g.replace(/sec\^-1/g,"arcsec");g=g.replace(/csc\^-1/g,"arccsc");g=g.replace(/cot\^-1/g,"arccot");g=g.replace(/sinh\^-1/g,"arcsinh");g=g.replace(/cosh\^-1/g,"arccosh");g=g.replace(/tanh\^-1/g,"arctanh");g=g.replace(/sech\^-1/g,"arcsech");g=g.replace(/csch\^-1/g,"arccsch");g=g.replace(/coth\^-1/g,"arccoth")}g=g.replace(/^e$/g,"(Math.E)");g=g.replace(/^e([^a-zA-Z])/g,"(Math.E)$1");g=g.replace(/([^a-zA-Z])e/g,"$1(Math.E)");g=g.replace(/([0-9])([\(a-zA-Z])/g,"$1*$2");g=g.replace(/\)([\(0-9a-zA-Z])/g,")*$1");var h,c,a,l,m;while((h=g.indexOf("^"))!=-1){if(h==0){return"Error: missing argument"}c=h-1;l=g.charAt(c);if(l>="0"&&l<="9"){c--;while(c>=0&&(l=g.charAt(c))>="0"&&l<="9"){c--}if(l=="."){c--;while(c>=0&&(l=g.charAt(c))>="0"&&l<="9"){c--}}}else{if(l==")"){m=1;c--;while(c>=0&&m>0){l=g.charAt(c);if(l=="("){m--}else{if(l==")"){m++}}c--}while(c>=0&&(l=g.charAt(c))>="a"&&l<="z"||l>="A"&&l<="Z"){c--}}else{if(l>="a"&&l<="z"||l>="A"&&l<="Z"){c--;while(c>=0&&(l=g.charAt(c))>="a"&&l<="z"||l>="A"&&l<="Z"){c--}}else{return"Error: incorrect syntax in "+g+" at position "+c}}}if(h==g.length-1){return"Error: missing argument"}a=h+1;l=g.charAt(a);if(l>="0"&&l<="9"||l=="-"){a++;while(a<g.length&&(l=g.charAt(a))>="0"&&l<="9"){a++}if(l=="."){a++;while(a<g.length&&(l=g.charAt(a))>="0"&&l<="9"){a++}}}else{if(l=="("){m=1;a++;while(a<g.length&&m>0){l=g.charAt(a);if(l=="("){m++}else{if(l==")"){m--}}a++}}else{if(l>="a"&&l<="z"||l>="A"&&l<="Z"){a++;while(a<g.length&&(l=g.charAt(a))>="a"&&l<="z"||l>="A"&&l<="Z"){a++}}else{return"Error: incorrect syntax in "+g+" at position "+a}}}g=g.slice(0,c+1)+"Math.pow("+g.slice(c+1,h)+","+g.slice(h+1,a)+")"+g.slice(a)}while((h=g.indexOf("!"))!=-1){if(h==0){return"Error: missing argument"}c=h-1;l=g.charAt(c);if(l>="0"&&l<="9"){c--;while(c>=0&&(l=g.charAt(c))>="0"&&l<="9"){c--}if(l=="."){c--;while(c>=0&&(l=g.charAt(c))>="0"&&l<="9"){c--}}}else{if(l==")"){m=1;c--;while(c>=0&&m>0){l=g.charAt(c);if(l=="("){m--}else{if(l==")"){m++}}c--}while(c>=0&&(l=g.charAt(c))>="a"&&l<="z"||l>="A"&&l<="Z"){c--}}else{if(l>="a"&&l<="z"||l>="A"&&l<="Z"){c--;while(c>=0&&(l=g.charAt(c))>="a"&&l<="z"||l>="A"&&l<="Z"){c--}}else{return"Error: incorrect syntax in "+g+" at position "+c}}}g=g.slice(0,c+1)+"factorial("+g.slice(c+1,h)+")"+g.slice(h+1)}return g}function plot(fun,x_min,x_max,points,id,endpts){var pth=[];var f=function(x){return x},g=fun;var name=null;if(typeof fun=="string"){eval("g = function(x){ with(Math) return "+mathjs(fun)+" }")}else{if(typeof fun=="object"){eval("f = function(t){ with(Math) return "+mathjs(fun[0])+" }");eval("g = function(t){ with(Math) return "+mathjs(fun[1])+" }")}}if(typeof x_min=="string"){name=x_min;x_min=xmin}else{name=id}var min=(x_min==null?xmin:x_min);var max=(x_max==null?xmax:x_max);var inc=max-min-0.000001*(max-min);inc=(points==null?inc/200:inc/points);var gt;for(var t=min;t<=max;t+=inc){gt=g(t);if(!(isNaN(gt)||Math.abs(gt)=="Infinity")){pth[pth.length]=[f(t),gt]}}path(pth,name,null,endpts);return pth}function slopefield(fun,dx,dy){var g=fun;if(typeof fun=="string"){eval("g = function(x,y){ with(Math) return "+mathjs(fun)+" }")}var gxy,x,y,u,v,dz;if(dx==null){dx=1}if(dy==null){dy=1}dz=Math.sqrt(dx*dx+dy*dy)/6;var x_min=Math.ceil(xmin/dx);var y_min=Math.ceil(ymin/dy);for(x=x_min;x<=xmax;x+=dx){for(y=y_min;y<=ymax;y+=dy){gxy=g(x,y);if(!isNaN(gxy)){if(Math.abs(gxy)=="Infinity"){u=0;v=dz}else{u=dz/Math.sqrt(1+gxy*gxy);v=gxy*u}line([x-u,y-v],[x+u,y+v])}}}}function show_props(g){var a="";for(var c=0;c<g.childNodes.length;c++){a+=g.childNodes.item(c)+"\n"}return a}function displayCoord(c){if(showcoordinates){var h=c.target.parentNode;var a=h.childNodes;for(var g=0;g<a.length&&a.item(g).nodeName!="text";g++){}var j=a.item(g);j.mtext=mtext;j.mtext([h.getAttribute("width")-(-7),h.getAttribute("height")-7],"("+getX(c).toFixed(2)+", "+getY(c).toFixed(2)+")","left","","11")}}function removeCoord(c){var h=c.target.parentNode;var a=h.childNodes;for(var g=0;g<a.length&&a.item(g).nodeName!="text";g++){}var j=a.item(g);j.mtext=mtext;j.mtext([h.getAttribute("width")-0,h.getAttribute("height")-0],"","aboveleft","")}function initASCIIMathCalculators(li){var i;for(i=0;i<li.length;i++){li[i].innerHTML=calcstr;AMprocessNode(li[i])}li=document.getElementsByTagName("textarea");var st;for(i=0;i<li.length;i++){st=li[i].getAttribute("onkeyup");if(st!=null){eval(String(st).replace(/function anonymous\(\)/,""))}}}function calculate(inputId,outputId){var str=document.getElementById(inputId).value;var err="";var ind=str.lastIndexOf("\n");if(ind==str.length-1){str=str.slice(0,ind)}str=str.slice(str.lastIndexOf("\n")+1);try{var res=eval(mathjs(str))}catch(e){err="syntax incomplete"}if(!isNaN(res)&&res!="Infinity"){str="`"+str+" =` "+(Math.abs(res-Math.round(res*1000000)/1000000)<1e-15?Math.round(res*1000000)/1000000:res)+err}else{if(str!=""){str="`"+str+"` = undefined"}}var outnode=document.getElementById(outputId);var n=outnode.childNodes.length;for(var i=0;i<n;i++){outnode.removeChild(outnode.firstChild)}outnode.appendChild(document.createTextNode(str));AMprocessNode(outnode)}function append(a){document.getElementById("in").value+=a;calculate("in","out");document.getElementById("in").scrollTop=1000;document.getElementById("in").focus()}function clearTextArea(){document.getElementById("in").value="";calculate("in","out");document.getElementById("in").focus()}function ASpreprocess(){var h=document.getElementsByTagName("body")[0];pictures=h.getElementsByTagName("embed");var a=pictures.length;for(var g=a-1;g>=0;g--){picture=pictures[g];var c=picture.getAttribute("sscr");if(c!=""){if(noSVG){n=document.createElement("img");n.setAttribute("style",picture.getAttribute("style"));n.setAttribute("src",AScgiloc+"?sscr="+encodeURIComponent(picture.getAttribute("sscr")));pn=picture.parentNode;pn.replaceChild(n,picture)}else{com=parseShortScript(c);picture.setAttribute("script",com);picture.className="ASCIIsvg"}}}}function parseShortScript(sscript,gw,gh){var sa=sscript.split(",");if(gw&&gh){sa[9]=gw;sa[10]=gh;sscript=sa.join(",")}if(sa.length>10){commands="setBorder(5);";commands+="width="+sa[9]+"; height="+sa[10]+";";commands+="initPicture("+sa[0]+","+sa[1]+","+sa[2]+","+sa[3]+");";commands+="axes("+sa[4]+","+sa[5]+","+sa[6]+","+sa[7]+","+sa[8]+");";var inx=11;var eqnlist="Graphs: ";while(sa.length>inx+9){commands+='stroke="'+sa[inx+7]+'";';commands+='strokewidth="'+sa[inx+8]+'";';if(sa[inx+9]!=""){commands+='strokedasharray="'+sa[inx+9].replace(/\s+/g,",")+'";'}if(sa[inx]=="slope"){eqnlist+="dy/dx="+sa[inx+1]+"; ";commands+='slopefield("'+sa[inx+1]+'",'+sa[inx+2]+","+sa[inx+2]+");"}else{if(sa[inx]=="func"){eqnlist+="y="+sa[inx+1]+"; ";eqn='"'+sa[inx+1]+'"'}else{if(sa[inx]=="polar"){eqnlist+="r="+sa[inx+1]+"; ";eqn='["cos(t)*('+sa[inx+1]+')","sin(t)*('+sa[inx+1]+')"]'}else{if(sa[inx]=="param"){eqnlist+="[x,y]=["+sa[inx+1]+","+sa[inx+2]+"]; ";eqn='["'+sa[inx+1]+'","'+sa[inx+2]+'"]'}}}if(sa[inx+3]==0){ep="--"}else{if(sa[inx+3]==1){ep="<-"}else{if(sa[inx+3]==2){ep="o-"}else{if(sa[inx+3]==3){ep="*-"}}}}if(sa[inx+4]==0){ep+="--"}else{if(sa[inx+4]==1){ep+="->"}else{if(sa[inx+4]==2){ep+="-o"}else{if(sa[inx+4]==3){ep+="-*"}}}}if(typeof eval(sa[inx+5])=="number"){commands+="plot("+eqn+","+sa[inx+5]+","+sa[inx+6]+',null,null,"'+ep+'");'}else{commands+="plot("+eqn+',null,null,null,null,"'+ep+'");'}}inx+=10}return commands}}var calcstr='<table align="center">\n<tr><th>\nASCIIMath Scientific Calculator\n</th></tr>\n<tr><td>\nClick in the box to use your keyboard or use the buttons\n</td></tr>\n<tr><td>\n<textarea id="in" rows="3" cols="40" onkeyup="calculate(\'in\',\'out\')"></textarea></td></tr>\n<tr><td height="50">Result: &nbsp; &nbsp; <span id="out"></span></td></tr>\n</table>\n<table align="center" cellspacing="0" cellpadding="0">\n<tbody align="center">\n<tr>\n<td colspan="4">\n<button onclick="append(\'sin^-1(\')"><font size=2>`sin^-1`</font></button><button onclick="append(\'cos^-1(\')"><font size=2>`cos^-1`</font></button><button onclick="append(\'tan^-1(\')"><font size=2>`tan^-1`</font></button></td>\n<td><button onclick="clearTextArea()">&nbsp;`C`&nbsp;</button></td>\n\n</tr>\n<tr>\n<td><button onclick="append(\'pi\')">&nbsp;`pi` &nbsp;</button></td>\n<td><button onclick="append(\'sin(\')">&nbsp;`sin`</button></td>\n<td><button onclick="append(\'cos(\')">&nbsp;`cos`</button></td>\n<td><button onclick="append(\'tan(\')">&nbsp;`tan`</button></td>\n<td><button onclick="append(\'^\')">`x^y`</button></td>\n</tr>\n<tr>\n<td><button onclick="append(\'!\')">&nbsp; `!` &nbsp;</button></td>\n\n<td><button onclick="append(\'(\')"><font size=2>&nbsp;&nbsp;`(`&nbsp;&nbsp;</font></button></td>\n<td><button onclick="append(\')\')"><font size=2>&nbsp;&nbsp;`)`&nbsp;&nbsp;</font></button></td>\n<td><button onclick="append(\'sqrt(\')"><font size=2>`sqrt({::}^ )`</font></button></td>\n<td><button onclick="append(\'/\')">&nbsp;`-: `</button></td>\n</tr>\n<tr>\n<td><button onclick="append(\'log(\')">`log`</button></td>\n<td><button onclick="append(\'7\')">&nbsp; `7` &nbsp;</button></td>\n<td><button onclick="append(\'8\')">&nbsp; `8` &nbsp;</button></td>\n\n<td><button onclick="append(\'9\')">&nbsp; `9` &nbsp;</button></td>\n<td><button onclick="append(\'*\')">&nbsp;`times`&nbsp;</button></td>\n</tr>\n<tr>\n<td><button onclick="append(\'ln(\')">&nbsp;`ln`&nbsp;</button></td>\n<td><button onclick="append(\'4\')">&nbsp; `4` &nbsp;</button></td>\n<td><button onclick="append(\'5\')">&nbsp; `5` &nbsp;</button></td>\n<td><button onclick="append(\'6\')">&nbsp; `6` &nbsp;</button></td>\n\n<td><button onclick="append(\'-\')">&nbsp;`-{::}`&nbsp;</button></td>\n</tr>\n<tr>\n<td><button onclick="append(\'e\')">&nbsp; `e` &nbsp;</button></td>\n<td><button onclick="append(\'1\')">&nbsp;&nbsp;`1` &nbsp;</button></td>\n<td><button onclick="append(\'2\')">&nbsp; `2` &nbsp;</button></td>\n<td><button onclick="append(\'3\')">&nbsp; `3` &nbsp;</button></td>\n<td><button onclick="append(\'+\')">&nbsp;`+{::}`&nbsp;</button></td>\n\n</tr>\n<tr>\n<td> <!--button onclick="append(\'pi\')">&nbsp;`pi` &nbsp;</button--></td>\n<td><button onclick="append(\'0\')">&nbsp; `0` &nbsp;</button></td>\n<td><button onclick="append(\'.\')">&nbsp; `.` &nbsp;</button></td>\n<td><button onclick="append(\'\\n\')">&nbsp;`"ent"`</button></td>\n</tr>\n</tbody>\n</table>';function generic(){if(!init()){return}if(translateOnLoad){var c=document.getElementById("processasciimathinmoodle");if(c!=null){dsvglocation=c.className}if(c!=null||!checkforprocessasciimathinmoodle){translate();if(translateASCIIsvg){ASpreprocess()}if(!noSVG&&translateASCIIsvg){drawPictures()}}var a=getElementsByClass(document,"div","ASCIIMathCalculator");if(!noMathML&&a.length>0){initASCIIMathCalculators(a)}}}if(typeof window.addEventListener!="undefined"){window.addEventListener("load",generic,false)}else{if(typeof document.addEventListener!="undefined"){document.addEventListener("load",generic,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onload",generic)}else{if(typeof window.onload=="function"){var existing=onload;window.onload=function(){existing();generic()}}else{window.onload=generic}}}}function copy(g){var c="flashcopier";if(!document.getElementById(c)){var h=document.createElement("div");h.id=c;document.body.appendChild(h);document.getElementById(c).innerHTML="";var a='<embed src="img/_clipboard.swf" FlashVars="clipboard='+escape(g)+'" width="0" height="0" type="application/x-shockwave-flash"></embed>';document.getElementById(c).innerHTML=a}}function copyToClipboard(g){if(window.clipboardData&&clipboardData.setData){clipboardData.setData("Text",g)}else{user_pref("signed.applets.codebase_principal_support",true);netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var h;Components.classes["@mozilla.org/widget/clipboard;[[[[1]]]]"].createInstance(Components.interfaces.nsIClipboard);if(!h){return}var c=Components.classes["@mozilla.org/widget/transferable;[[[[1]]]]"].createInstance(Components.interfaces.nsITransferable);if(!c){return}c.addDataFlavor("text/unicode");var k=new Object();var a=new Object();var k=Components.classes["@mozilla.org/supports-string;[[[[1]]]]"].createInstance(Components.interfaces.nsISupportsString);var l=meintext;k.data=l;c.setTransferData("text/unicode",k,l.length*[[[[2]]]]);var j=Components.interfaces.nsIClipboard;if(!h){return false}h.setData(c,null,j.kGlobalClipboard)}}function copy2(a){if(window.clipboardData){window.clipboardData.setData("Text",a)}else{var c=new SWFObject("img/_clipboard.swf","copy_contents","0","0","4");c.addVariable("clipboard",escape(a));c.write("flashcontent")}}function openCopyMessage(){document.getElementById("copyPopOver").style.display="block";document.getElementById("copyPopOver").style.top=mousey+"px";document.getElementById("copyPopOver").style.left=mousex+"px"}function closeCopyMessage(){document.getElementById("copyPopOver").style.display="none";return false}function copy3(a){if(window.clipboardData){window.clipboardData.setData("Text",a)}else{var g="flashcopier";if(!document.getElementById(g)){var h=document.createElement("div");h.id=g;document.body.appendChild(h)}document.getElementById(g).innerHTML="";var c='<embed src="img/_clipboard.swf" FlashVars="clipboard='+escape(a)+'" width="0" height="0" type="application/x-shockwave-flash"></embed>';document.getElementById(g).innerHTML=c}}Ext.menu.EditableItem=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-item",hideOnClick:false,initComponent:function(){Ext.menu.EditableItem.superclass.initComponent.call(this);this.addEvents("keyup");this.editor=this.editor||new Ext.form.TextField();if(this.text){this.editor.setValue(this.text)}},onRender:function(a){var c=a.createChild({cls:this.itemCls,html:'<img src="'+this.icon+'" class="x-menu-item-icon" style="margin: 3px 3px 2px 2px;" />'});Ext.apply(this.config,{width:125});this.editor.render(c);this.el=c;this.relayEvents(this.editor.el,["keyup"]);if(Ext.isGecko){c.setStyle("overflow","auto")}Ext.menu.EditableItem.superclass.onRender.call(this,a)},getValue:function(){return this.editor.getValue()},setValue:function(a){this.editor.setValue(a)},isValid:function(a){return this.editor.isValid(a)}});Ext.menu.RangeMenu=function(h){Ext.menu.RangeMenu.superclass.constructor.call(this,h);this.updateTask=new Ext.util.DelayedTask(this.fireUpdate,this);var g=this.fieldCfg;var c=this.fieldCls;var a=this.fields=Ext.applyIf(this.fields||{},{gt:new Ext.menu.EditableItem({icon:this.icons.gt,editor:new c(typeof g=="object"?g.gt||"":g)}),lt:new Ext.menu.EditableItem({icon:this.icons.lt,editor:new c(typeof g=="object"?g.lt||"":g)}),eq:new Ext.menu.EditableItem({icon:this.icons.eq,editor:new c(typeof g=="object"?g.gt||"":g)})});this.add(a.gt,a.lt,"-",a.eq);for(var j in a){a[j].on("keyup",this.onKeyUp.createDelegate(this,[a[j]],true),this)}this.addEvents("update")};Ext.extend(Ext.menu.RangeMenu,Ext.menu.Menu,{fieldCls:Ext.form.NumberField,fieldCfg:"",updateBuffer:500,icons:{gt:"/img/small_icons/greater_then.png",lt:"/img/small_icons/less_then.png",eq:"/img/small_icons/equals.png"},fireUpdate:function(){this.fireEvent("update",this)},setValue:function(c){for(var a in this.fields){this.fields[a].setValue(c[a]!==undefined?c[a]:"")}this.fireEvent("update",this)},getValue:function(){var a={};for(var c in this.fields){var g=this.fields[c];if(g.isValid()&&String(g.getValue()).length>0){a[c]=g.getValue()}}return a},onKeyUp:function(c,a,h,g){if(c.getKey()==c.ENTER&&g.isValid()){this.hide(true);return}if(g==this.fields.eq){this.fields.gt.setValue(null);this.fields.lt.setValue(null)}else{this.fields.eq.setValue(null)}this.updateTask.delay(this.updateBuffer)}});Ext.grid.CheckColumn=function(a){if(!this.id){this.id=Ext.id()}this.addEvents({click:true});Ext.grid.CheckColumn.superclass.constructor.call(this);Ext.apply(this,a,{init:function(c){this.grid=c;this.grid.on("render",function(){var g=this.grid.getView();g.mainBody.on("mousedown",this.onMouseDown,this)},this)},onMouseDown:function(k,o){if(o.className&&o.className.indexOf("x-grid3-cc-"+this.id)!=-1){var p=this.grid.view.findRowIndex(o);var g=this.grid.view.findCellIndex(o);var c=this.grid.store.getAt(p);var l=this.grid.colModel.getDataIndex(g);var m={grid:this.grid,record:c,field:l,value:c.data[l],row:p,column:g,cancel:false};if(this.grid.fireEvent("beforeedit",m,this.grid)!==false&&m.cancel!==true){k.stopEvent();var j=this.grid.getView().findRowIndex(o);var h=this.grid.store.getAt(j);h.set(this.dataIndex,!h.data[this.dataIndex]);m.value=h.data[this.dataIndex];this.grid.fireEvent("afteredit",m,this.grid)}}},renderer:function(g,h,c){h.css+=" x-grid3-check-col-td";return'<div class="x-grid3-check-col'+(g?"-on":"")+" x-grid3-cc-"+this.id+'">&#160;</div>'}});this.renderer=this.renderer.createDelegate(this)};Ext.extend(Ext.grid.CheckColumn,Ext.util.Observable);if("function"!==typeof RegExp.escape){RegExp.escape=function(a){if("string"!==typeof a){return a}return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}}Ext.ns("Ext.ux.grid");Ext.ux.grid.RowActions=function(a){Ext.apply(this,a);this.addEvents("beforeaction","action","beforegroupaction","groupaction");Ext.ux.grid.RowActions.superclass.constructor.call(this)};Ext.extend(Ext.ux.grid.RowActions,Ext.util.Observable,{actionEvent:"mousedown",autoWidth:true,dataIndex:"",header:"",menuDisabled:true,sortable:false,tplGroup:'<tpl for="actions"><div class="ux-grow-action-item<tpl if="\'right\'===align"> ux-action-right</tpl> {cls}" style="{style}" qtip="{qtip}">{text}</div></tpl>',tplRow:'<div class="ux-row-action"><tpl for="actions"><div class="ux-row-action-item {cls} <tpl if="text">ux-row-action-text</tpl>" style="{hide}{style}" qtip="{qtip}"><tpl if="text"><span qtip="{qtip}">{text}</span></tpl></div></tpl></div>',hideMode:"visiblity",widthIntercept:4,widthSlope:21,init:function(g){this.grid=g;if(!this.tpl){this.tpl=this.processActions(this.actions)}if(this.autoWidth){this.width=this.widthSlope*this.actions.length+this.widthIntercept;this.fixed=true}var c=g.getView();var a={scope:this};a[this.actionEvent]=this.onClick;g.afterRender=g.afterRender.createSequence(function(){c.mainBody.on(a)},this);if(!this.renderer){this.renderer=function(m,h,j,o,l,k){h.css+=(h.css?" ":"")+"ux-row-action-cell";return this.tpl.apply(this.getData(m,h,j,o,l,k))}.createDelegate(this)}if(c.groupTextTpl&&this.groupActions){c.interceptMouse=c.interceptMouse.createInterceptor(function(h){if(h.getTarget(".ux-grow-action-item")){return false}});c.groupTextTpl='<div class="ux-grow-action-text">'+c.groupTextTpl+"</div>"+this.processActions(this.groupActions,this.tplGroup).apply()}},getData:function(j,a,c,k,h,g){return c.data||{}},processActions:function(h,g){var a=[];Ext.each(h,function(j,k){if(j.iconCls&&"function"===typeof(j.callback||j.cb)){this.callbacks=this.callbacks||{};this.callbacks[j.iconCls]=j.callback||j.cb}var l={cls:j.iconIndex?"{"+j.iconIndex+"}":(j.iconCls?j.iconCls:""),qtip:j.qtipIndex?"{"+j.qtipIndex+"}":(j.tooltip||j.qtip?j.tooltip||j.qtip:""),text:j.textIndex?"{"+j.textIndex+"}":(j.text?j.text:""),hide:j.hideIndex?'<tpl if="'+j.hideIndex+'">'+("display"===this.hideMode?"display:none":"visibility:hidden")+";</tpl>":(j.hide?("display"===this.hideMode?"display:none":"visibility:hidden;"):""),align:j.align||"right",style:j.style?j.style:""};a.push(l)},this);var c=new Ext.XTemplate(g||this.tplRow);return new Ext.XTemplate(c.apply({actions:a}))},onClick:function(k,l){var m=this.grid.getView();var g=false;var r=k.getTarget(".x-grid3-row");var a=m.findCellIndex(l.parentNode.parentNode);var q=k.getTarget(".ux-row-action-item");if(q){g=q.className.replace(/ux-row-action-item /,"");if(g){g=g.replace(/ ux-row-action-text/,"");g=g.trim()}}if(false!==r&&false!==a&&false!==g){var j=this.grid.store.getAt(r.rowIndex);if(this.callbacks&&"function"===typeof this.callbacks[g]){this.callbacks[g](this.grid,j,g,r.rowIndex,a)}if(true!==this.eventsSuspended&&false===this.fireEvent("beforeaction",this.grid,j,g,r.rowIndex,a)){return}else{if(true!==this.eventsSuspended){this.fireEvent("action",this.grid,j,g,r.rowIndex,a)}}}q=k.getTarget(".ux-grow-action-item");if(q){var o=m.findGroup(l);var h=o?o.id.replace(/ext-gen[0-9]+-gp-/,""):null;var c;if(h){var p=new RegExp(RegExp.escape(h));c=this.grid.store.queryBy(function(s){return s._groupId.match(p)});c=c?c.items:[]}g=q.className.replace(/ux-grow-action-item (ux-action-right )*/,"");if("function"===typeof this.callbacks[g]){this.callbacks[g](this.grid,c,g,h)}if(true!==this.eventsSuspended&&false===this.fireEvent("beforegroupaction",this.grid,c,g,h)){return false}this.fireEvent("groupaction",this.grid,c,g,h)}}});Ext.reg("rowactions",Ext.ux.grid.RowActions);Ext.ns("Ext.ux.grid");Ext.ux.grid.Search=function(a){Ext.apply(this,a);Ext.ux.grid.Search.superclass.constructor.call(this)};Ext.extend(Ext.ux.grid.Search,Ext.util.Observable,{searchText:"Suche",searchTipText:"Gib einen Text ein und drück die Enter-Taste",selectAllText:"Alle auswählen",position:"bottom",iconCls:"icon-magnifier",checkIndexes:"all",disableIndexes:[],dateFormat:undefined,showSelectAll:true,mode:"remote",width:100,xtype:"gridsearch",paramNames:{fields:"fields",query:"query"},shortcutKey:"r",shortcutModifier:"alt",init:function(a){this.grid=a;if("string"===typeof this.toolbarContainer){this.toolbarContainer=Ext.getCmp(this.toolbarContainer)}a.onRender=a.onRender.createSequence(this.onRender,this);a.reconfigure=a.reconfigure.createSequence(this.reconfigure,this)},onRender:function(){var c=this.toolbarContainer||this.grid;var a="bottom"===this.position?c.bottomToolbar:c.topToolbar;this.menu=new Ext.menu.Menu();if("right"===this.align){a.addFill()}else{if(0<a.items.getCount()){a.addSeparator()}}a.add({text:this.searchText,menu:this.menu,iconCls:this.iconCls});this.field=new Ext.form.TwinTriggerField({width:this.width,selectOnFocus:undefined===this.selectOnFocus?true:this.selectOnFocus,trigger1Class:"x-form-clear-trigger",trigger2Class:"x-form-search-trigger",onTrigger1Click:this.onTriggerClear.createDelegate(this),onTrigger2Click:this.onTriggerSearch.createDelegate(this),minLength:this.minLength});this.field.on("render",function(){this.field.el.dom.qtip=this.searchTipText;var j=new Ext.KeyMap(this.field.el,[{key:Ext.EventObject.ENTER,scope:this,fn:this.onTriggerSearch},{key:Ext.EventObject.ESC,scope:this,fn:this.onTriggerClear}]);j.stopEvent=true},this,{single:true});a.add(this.field);this.reconfigure();if(this.shortcutKey&&this.shortcutModifier){var h=this.grid.getEl();var g=[{key:this.shortcutKey,scope:this,stopEvent:true,fn:function(){this.field.focus()}}];g[0][this.shortcutModifier]=true;this.keymap=new Ext.KeyMap(h,g)}},onTriggerClear:function(){if(this.field.getValue()){this.field.setValue("");this.field.focus();this.onTriggerSearch()}},onTriggerSearch:function(){if(!this.field.isValid()){return}var g=this.field.getValue();var c=this.grid.store;if("local"===this.mode){c.clearFilter();if(g){c.filterBy(function(j){var h=false;this.menu.items.each(function(l){if(!l.checked||h){return}var m=j.get(l.dataIndex);m=m instanceof Date?m.format(this.dateFormat||j.fields.get(l.dataIndex).dateFormat):m;var k=new RegExp(g,"gi");h=k.test(m)},this);if(h){return true}return h},this)}else{}}else{if(c.lastOptions&&c.lastOptions.params){c.lastOptions.params[c.paramNames.start]=0}var a=[];this.menu.items.each(function(h){if(h.checked){a.push(h.dataIndex)}});delete (c.baseParams[this.paramNames.fields]);delete (c.baseParams[this.paramNames.query]);if(c.lastOptions&&c.lastOptions.params){delete (c.lastOptions.params[this.paramNames.fields]);delete (c.lastOptions.params[this.paramNames.query])}if(a.length){c.baseParams[this.paramNames.fields]=Ext.encode(a);c.baseParams[this.paramNames.query]=g}c.reload()}},setDisabled:function(){this.field.setDisabled.apply(this.field,arguments)},enable:function(){this.setDisabled(false)},disable:function(){this.setDisabled(true)},reconfigure:function(){var c=this.menu;c.removeAll();if(this.showSelectAll){c.add(new Ext.menu.CheckItem({text:this.selectAllText,checked:!(this.checkIndexes instanceof Array),hideOnClick:false,handler:function(h){var g=!h.checked;h.parentMenu.items.each(function(j){if(h!==j&&j.setChecked&&!j.disabled){j.setChecked(g)}})}}),"-")}var a=this.grid.colModel;Ext.each(a.config,function(h){var g=false;if(h.header&&h.dataIndex){Ext.each(this.disableIndexes,function(j){g=g?g:j===h.dataIndex});if(!g){c.add(new Ext.menu.CheckItem({text:h.header,hideOnClick:false,checked:"all"===this.checkIndexes,dataIndex:h.dataIndex}))}}},this);if(this.checkIndexes instanceof Array){Ext.each(this.checkIndexes,function(h){var g=c.items.find(function(j){return j.dataIndex===h});if(g){g.setChecked(true,true)}},this)}if(this.readonlyIndexes instanceof Array){Ext.each(this.readonlyIndexes,function(h){var g=c.items.find(function(j){return j.dataIndex===h});if(g){g.disable()}},this)}}});Ext.grid.RowExpander=function(a){Ext.apply(this,a);this.addEvents({beforeexpand:true,expand:true,beforecollapse:true,collapse:true});Ext.grid.RowExpander.superclass.constructor.call(this);if(this.tpl){if(typeof this.tpl=="string"){this.tpl=new Ext.Template(this.tpl)}this.tpl.compile()}this.state={};this.bodyContent={}};Ext.extend(Ext.grid.RowExpander,Ext.util.Observable,{header:"",width:20,sortable:false,fixed:true,hidden:true,menuDisabled:true,dataIndex:"",id:"expander",lazyRender:true,enableCaching:false,getRowClass:function(a,j,h,g){h.cols=h.cols-1;var c=this.bodyContent[a.id];if(!c&&!this.lazyRender){c=this.getBodyContent(a,j)}if(c){h.body=c}return this.state[a.id]?"x-grid3-row-expanded":"x-grid3-row-collapsed"},init:function(c){this.grid=c;var a=c.getView();a.getRowClass=this.getRowClass.createDelegate(this);a.enableRowBody=true;c.on("render",function(){a.mainBody.on("mousedown",this.onMouseDown,this)},this)},getBodyContent:function(a,c){if(!this.enableCaching){return this.tpl.apply(a.data)}var g=this.bodyContent[a.id];if(!g){g=this.tpl.apply(a.data);this.bodyContent[a.id]=g}return g},onMouseDown:function(c,a){if(a.className=="x-grid3-row-expander"){c.stopEvent();var g=c.getTarget(".x-grid3-row");this.toggleRow(g)}},renderer:function(c,g,a){g.cellAttr='rowspan="2"';return'<div class="x-grid3-row-expander">&#160;</div>'},beforeExpand:function(c,a,g){if(this.fireEvent("beforeexpand",this,c,a,g)!==false){if(this.tpl&&this.lazyRender){a.innerHTML=this.getBodyContent(c,g)}return true}else{return false}},toggleRow:function(a){if(typeof a=="number"){a=this.grid.view.getRow(a)}this[Ext.fly(a).hasClass("x-grid3-row-collapsed")?"expandRow":"collapseRow"](a)},expandRow:function(g){if(typeof g=="number"){g=this.grid.view.getRow(g)}var c=this.grid.store.getAt(g.rowIndex);var a=Ext.DomQuery.selectNode("tr:nth(2) div.x-grid3-row-body",g);if(this.beforeExpand(c,a,g.rowIndex)){this.state[c.id]=true;Ext.fly(g).replaceClass("x-grid3-row-collapsed","x-grid3-row-expanded");this.fireEvent("expand",this,c,a,g.rowIndex)}},collapseRow:function(g){if(typeof g=="number"){g=this.grid.view.getRow(g)}var c=this.grid.store.getAt(g.rowIndex);var a=Ext.fly(g).child("tr:nth(1) div.x-grid3-row-body",true);if(this.fireEvent("beforecollapse",this,c,a,g.rowIndex)!==false){this.state[c.id]=false;Ext.fly(g).replaceClass("x-grid3-row-expanded","x-grid3-row-collapsed");this.fireEvent("collapse",this,c,a,g.rowIndex)}}});Ext.UpdateManager.defaults.indicatorText='<div class="loading-indicator">Loading...</div>';if(Ext.DataView){Ext.DataView.prototype.emptyText=""}if(Ext.grid.GridPanel){Ext.grid.GridPanel.prototype.ddText="{0} selected row{1}"}if(Ext.LoadMask){Ext.LoadMask.prototype.msg="Loading..."}Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.getShortMonthName=function(a){return Date.monthNames[a].substring(0,3)};Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Date.getMonthNumber=function(a){return Date.monthNumbers[a.substring(0,1).toUpperCase()+a.substring(1,3).toLowerCase()]};Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.getShortDayName=function(a){return Date.dayNames[a].substring(0,3)};Date.parseCodes.S.s="(?:st|nd|rd|th)";if(Ext.MessageBox){Ext.MessageBox.buttonText={ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}}if(Ext.util.Format){Ext.util.Format.date=function(a,c){if(!a){return""}if(!(a instanceof Date)){a=new Date(Date.parse(a))}return a.dateFormat(c||"m/d/Y")}}if(Ext.DatePicker){Ext.apply(Ext.DatePicker.prototype,{todayText:"Today",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",disabledDaysText:"",disabledDatesText:"",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",todayTip:"{0} (Spacebar)",format:"m/d/y",okText:"&#160;OK&#160;",cancelText:"Cancel",startDay:0})}if(Ext.PagingToolbar){Ext.apply(Ext.PagingToolbar.prototype,{beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display"})}if(Ext.form.Field){Ext.form.Field.prototype.invalidText="The value in this field is invalid"}if(Ext.form.TextField){Ext.apply(Ext.form.TextField.prototype,{minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyText:null})}if(Ext.form.NumberField){Ext.apply(Ext.form.NumberField.prototype,{decimalSeparator:".",decimalPrecision:2,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number"})}if(Ext.form.DateField){Ext.apply(Ext.form.DateField.prototype,{disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be after {0}",maxText:"The date in this field must be before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",format:"m/d/y",altFormats:"m/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d"})}if(Ext.form.ComboBox){Ext.apply(Ext.form.ComboBox.prototype,{loadingText:"Loading...",valueNotFoundText:undefined})}if(Ext.form.VTypes){Ext.apply(Ext.form.VTypes,{emailText:'This field should be an e-mail address in the format "user@domain.com"',urlText:'This field should be a URL in the format "http://www.domain.com"',alphaText:"This field should only contain letters and _",alphanumText:"This field should only contain letters, numbers and _"})}if(Ext.form.HtmlEditor){Ext.apply(Ext.form.HtmlEditor.prototype,{createLinkText:"Please enter the URL for the link:",buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}}})}if(Ext.grid.GridView){Ext.apply(Ext.grid.GridView.prototype,{sortAscText:"Sort Ascending",sortDescText:"Sort Descending",columnsText:"Columns"})}if(Ext.grid.GroupingView){Ext.apply(Ext.grid.GroupingView.prototype,{emptyGroupText:"(None)",groupByText:"Group By This Field",showGroupsText:"Show in Groups"})}if(Ext.grid.PropertyColumnModel){Ext.apply(Ext.grid.PropertyColumnModel.prototype,{nameText:"Name",valueText:"Value",dateFormat:"m/j/Y"})}if(Ext.layout.BorderLayout&&Ext.layout.BorderLayout.SplitRegion){Ext.apply(Ext.layout.BorderLayout.SplitRegion.prototype,{splitTip:"Drag to resize.",collapsibleSplitTip:"Drag to resize. Double click to hide."})}if(Ext.form.TimeField){Ext.apply(Ext.form.TimeField.prototype,{minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H"})}if(Ext.form.CheckboxGroup){Ext.apply(Ext.form.CheckboxGroup.prototype,{blankText:"You must select at least one item in this group"})}if(Ext.form.RadioGroup){Ext.apply(Ext.form.RadioGroup.prototype,{blankText:"You must select one item in this group"})}var Lars={tinyMceLanguage:"en",button_cancel:"Cancel",button_save:"Save",refresh:"Refresh",closedown:"Close",del:"Delete",copy_document:"Copy document.",copy_document_tt:"Copy this document.<br>Insert via the right mouse button into a folder within the resources or into a work package.",msg_success_new_content:"Successfully saved.",edit:"Edit",printer:"Print",today:"Today",close_tab:"Close this tab.",close_tab_others:"Close other tabs.",rename:"Rename",msg:{loading:"One moment please.",loading_data:"Transferring data.",connecting:"Connecting",warning:"Warning",attention:"Attention",attention_firefox:'Please use <a href="http://www.firefox-browser.de" target="_blank">Firefox Browser</a> for this application. <br> This browser is not supported; therefore, it may not be possible to execute all functions without errors.',failure:"Error",failure_delete:"Object has not been deleted.",failure_connection:"The connection to the server has failed.",failure_nothing_changed:"No changes have been made.",failure_no_response:"Server does not respond.",failure_redirect:"Automatic redirection has failed. No connection to server?",failure_login:"Login incorrect or connection to server cannot be established.",failure_response:"Error loading a request.",failure_copy:"Error while copying.",success_copy:"Successfully copied.",success:"Successful",success_changed_data:"Changes have been made successfully.",success_new_content:"New content has been saved.",success_login:"Login successful.",loading_editor:"Loading editor.",loading_app:"Loading application.",loading_folder:"Loading folders.",automatic_redirect_1:"Automatic redirection?",automatic_redirect_2:"If you have already been logged on to <b>bid-owl</b>, you will be <br>automatically redirected to your MokoDesk any moment.",dialog_updater_error:"An error has occured while performing automatic updates."},main:{desktop_title:"Overview",tree_title:"My MokoDesk",voice_chat:"Voice Chat",my_site:"My Site",edit:"Edit",item_s:"Entry",item_p:"Entries",show:"Show",show_as_package:"Show as work package.",refresh_here:"Refresh here.",logged_in_since:"Logged in since ",last_login:"Last Login ",news:"MokoDesk Changes",about:"About MokoDesk",help:"Help",retrospection:"retrospection",hours:"24 hours",week:"One week",desktop_grid:{tabTip:"Here you can find all the documents which have been added or altered since the last login.",loadMask:"Searching for new and altered documents, loading them afterwards.",title:"New documents",titleBeginning:"New documents",timeout_msg_1:"Connection error",timeout_msg_2:"The connection to the server is probably too slow to retrieve all new documents within the time limit."},bin:{trash:"Recycle Bin",empty_trash:"Empty the Recycle Bin.",empty_trash_confirm:"Are you sure you want to empty the recycle bin?",delete_irrevocable:"Delete permanently.",delete_confirm:"Delete this object?",del_failure_msg:"The selected object has not been deleted."},send_bug:{text:"Report errors.",text_tt:"If an error has occurred, you can forward an error message here."},chat:{title:"MokoChat",chat_home:"Start a chat session on your own MokoDesk.",chat_else:"Chat elsewhere."},tree:{package_moved_msg:"Work package has been moved.",package_not_moved_msg:"Work package has not been moved.",main_directory:"Main directory",root_directory:"Main directory of the server",home_directory:"Your own home directory",add_resource_folder:"Include a new folder in the resources.",add_to_resources:"Add to resources.",add_package_here:"Add work package here.",add_package:"Add work package.",add_package_advice:"If you create a workbook directly on another desk, no copy will be generated in the archive.<br><i>Copying</i> via Drag & Drop from the <i>linked folders</i> or via the right mouse button and <i>inserting</i> into the destination folder is the common way to simultaneously generate a copy in the archive.",add_folder_here:"Add folder here.",add_folder:"Add a new folder.",add_link:"Add a new link.",add_link_here:"Add a link here.",folder_properties:"Folder properties",folder_as_package:"Mark as work package.",folder_as_normal:"Mark as ordinary folder.",download:"Download",show_archive:"Show archive.",show_bin:"Show recycle bin.",set_rights:"Define access rights to your MokoDesk.",show_package:"Show work package.",copy_package:"Copy work package.",copy_folder:"Copy folder.",del_desktop_link:"Delete this MokoDesk-link.",del_desktop_link_confirm:"Are you sure you want to delete this MokoDesk-link?",del_link:"Delete link.",del_confirm_link:"Delete this link?",del_confirm_package:"Delete this work package?",del_confirm_object:"Delete this object?",del_failure_msg:"The selected work package has not been deleted.",del_failure_msg_folder:"The selected folder has not been deleted.",del_failure_msg_link:"The selected link has not been deleted.",move_to_archive:"Move to the archive.",move_to_archive_tt:"As soon as you have finished the work package, it can be moved to the archive.",open_learn_process:"Open display of learning progress.",delete_folder_confirm:"Delete this folder?",insert_here:"Insert here.",copy_confirm_1:"Insert?",copy_confirm_2_folder:"Would you like to insert the copied folder <b>",copy_confirm_2_document:"Would you like to insert the copied document entitled <b>",copy_confirm_2:"Would you like to insert the copied work package <b>",copy_confirm_3:"</b> in <b>",copy_confirm_3_in_package:"</b> in this work package?",copy_confirm_4:"</b>?",copy_confirm_5:"<br>An additional copy is filed in the archive.",copy_progress_1:"Copying the work package.",copy_progress_2:"One moment please...",copy_success_msg:"Successfully copied.",copy_failure_msg:"Error while copying.",copy_document:"Copy the document and insert it here.",load_mask_desktops:"Loading MokoDesks.",embed_desktop:"Include someone else's MokoDesk.",embed_desktop_group:"Include a group's MokoDesk.",package_convert_confirm_1:"Convert?",package_convert_confirm_2:"Would you like to assign the file as a work package to the user? <br>The original file will be preserved.",msg_failure_no_package:"Folder does not belong to the category work package.<br>Change beforehand via the menu opened by clicking the right mouse button.",resources_title:"Linked folders",internet_links_title:"Internet bookmarks",desktops_title:"Other MokoDesks"},grid:{emptyText:"There are no documents available here.",loadMask:"Loading documents.",count_new_documents:"",edit_tt:"Edit content.",del_tt:"Delete this document.",del_confirm:"Are you sure you want to delete this document?",del_failure_msg:"The selected document has not been deleted.",solution_attached:"(solution)",open_link_1:"Open link?",open_link_2:"Open link in a new window?",download_1:"Download",download_2:"Would you like to download the document?",package_append:" - work package",columns:{desc:"Name",content:"Content",folder:"Folder",type:"Type",valueNotFoundText:"Kein passender Wert gefunden",last_changed:"Last modified",created:"Created"},change_state:"Change state.",state_0:"Not yet started",state_1:"In progress",state_2:"Ready for submission",state_3:"Corrected",state_4:"Finished",add_text:"Add a new text to this work package.",add_text_title:"Write text.",add_document:"Add a document to this work package.",add_document_title:"Upload document.",solution:" (solution)",only_teacher:"Only a teacher can change the state to <b>Finished</b>."},discussion:{title:"Messages",loadMask:"Loading messages.",emptyText:"No messages.",write_new_message:"Write a message.",write_new_message_tt:"Write a new message.",show_preview:"Show a preview of the messages.",show_preview_tt:"The beginning of the message is shown below the heading.",show_preview_tt_title:"Preview",expand_preview:"Expand preview.",expand_preview_tt:"Content is displayed directly below the description.",expand_preview_tt_title:"Show entire content.",new_message_1:"Message",new_message_2:"A new message from ",save_send:"Save / Send",columns:{title:"Title",author:"Author",content:"Content",date:"Date"},created_of:"Created by ",menu:{edit:"Edit",edit_tt:"Edit content.",del:"Delete",del_tt:"Delete this message.",del_confirm_1:"Are you sure you want to delete this message?",del_confirm_2:"Heading:",del_success_msg:"The message has been deleted.",del_failure_msg:"The selected message has not been deleted."}},editor:{save_info_1:"Problem while saving.",save_info_2:"In the meantime, the content of the document has changed on the server. <br>You now have the possibility of saving the content in a new document.<br>If you do not save the changes in a new document, they will get lost.",document_not_available:"The selected document is not available."},notes:"Notes",north:{new_documents1:"New documents",new_documents:"New documents on my MokoDesk",new_documents_others:"New documents on other MokoDesks",new_mymessages:"My Messages",new_messages:"New messages on other MokoDesks",new_messages_packages:"New messages in my work packages",about:"About MokoDesk"},help_and_news_tt:"Help and news about the MokoDesk",document_subscription:"Show new documents of this?",group_or_user:"Group or user"},dialog:{assignment:{fieldLabel:"Enter the name of the work package.",emptyText:"New work package",title:"Add work package.",button_add:"Add work package."},addFolderLinks:{fieldLabel:"Name of the new folder",title:"Add folder.",button_add:"Add folder."},addFolder:{fieldLabel:"Name of the new folder, for example <i>German</i> or <i>English</i>",title:"Add folder.",button_add:"Add folder."},addLink:{fieldLabel:"Name of the new folder, for example <i>German</i> or <i>English</i>",title:"Add link.",button_add:"Add link.",adress:"URL",name:"Name"},addSchueler:{title:"Include someone's MokoDesk.",button_add:"Include MokoDesk.",msg_success:"MokoDesk has been included.",msg_failure:"MokoDesk has not been included.",usernameLabel:"Person's username"},browseFile:{description:"Description of the document",filePath:"Select document from your local hard disk.",title:"Upload document to ",button_add:"Add file.",msg_success:"File has been uploaded into the work package.",msg_failure:"No file has been uploaded."},changeDesc:{title:"Change title/name.",fieldLabel:"Title/Name",msg_success:"Changes have been made successfully.",msg_failure:"No changes have been made."},comment:{title_1:"Comment by ",title_2:" Change",fieldLabel:"Comment",button_save:"Save comment.",msg_success:"Changes have been made successfully.",msg_failure:"No changes have been made."},customPanelTextChange:{fieldLabel:"Name",title:"Change name."},groups:{username:"Person's username",add_to_favorites:"Add user to favourites.",add_user:"Add user.",user_added_msg:"Person has been added.",user_not_added_msg:"Person has not been added.",embed_desktop:"Include MokoDesk?",groupname:"Group name",other_desktops:"Other MokoDesks",add_group:"Add group.",add_group_tt:"Add group to allow access to your own MokoDesk.",add_user_tt:"Add user to allow access to your own MokoDesk.",allow_read:"Allow reading only?",allow_all:"Allow everything?",favorite:"Favourite",type:"Type",del_group_user_1:"Delete this person/group.",del_group_user_2:"Delete?",del_group_user_3:"Delete the person or group from the list?",define_rights:"Define access rights to your MokoDesk.",root_directory:"Main directory",add_group_to_list:"Add group to list.",add_group_to_selection:"Add group to selection."},rights:{fieldLabel_1:"Only you yourself are allowed to view and edit this folder.",fieldLabel_2:"You and your teachers can view and edit this folder.",title_1:"Access rights for",title_1:"Set",button_set:"Set access rights."},htmlMessage:{fieldLabel:"Heading of the message",title:"Create new message.",button_create:"Create message."},htmlText:{fieldLabel:"Heading of the new text",title_1:"New text in",title_2:"Create",button_add:"Create text."},htmlTextNew:{fieldLabel:"New heading",title:"Create text within the same work package?",button_add:"Create text. "},resourcesAddName:{fieldLabel:"Name of the resource",title:"Name of the link",button_add:"Add link.",msg_success:"New resource has been added."},resourcesAdd:"Add resources.",login:{username:"Username",password:"Password",button_login:"Login",title:"Login to your MokoDesk <i>("},link:{open_both:"Would you like to open this URL within the MokoDesk or download it in your browser?",open_browser:"Would you like to open this URL in a new window of your browser?",open_app:"Would you like to open this URL in a new tab of the MokoDesk?",button_app:"Within MokoDesk",button_browser:"Within the browser / download"},upload_image:{choose_hd:"Choose image from your local hard disk.",msg_failure:"Image has not been uploaded.",msg_success:"Image has been inserted.",upload:"Upload image."},imagePanel:{change_picture:"Upload a different image."},upload_file:{choose_hd:"Choose a document from your local hard disk.",msg_failure:"The file has not been uploaded.",msg_success:"The file has been uploaded.",upload_description:"Descripton of the document",button_upload:"Upload file.",title:"Upload document to "}}};var larsUpdater={};var larsUpdaterInterval=10000;var onlineStatusInterval=30000;var timeoutUpdateConnection=180000;LarsViewer={};eastCollapsed={};LarsGridConfig={};title={};larsDesktopId={};larsArchivId={};larsBinId={};loginInfo={};lastLogin={};var user={};var pass={};var larsVoiceChatAllowed=false;var larsVoiceChatEnabled=true;var packageNodeToCopy=false;var fileRecordToCopy=false;task={};var AScgiloc="http://www.imathas.com/imathas/filter/graph/svgimg.php";var AMTcgiloc="http://www.imathas.com/cgi-bin/mimetex.cgi";var larsNews='<font size="3"><b>Version 1.0.1:<br></b><ul><li>- Textannotationen für den Editor</li><li>- Fehlerbehandlung verbessert</li><li>- Fehlende Sprachdateien hinzugefügt</li><li>- Fehlerkorrekturen beim Datenabgleich</li><li>- Quellcode umstrukturiert</li></ul><b>Version 0.986:<br></b><ul><li>- Französisch.<br><b>Version 0.983:<br></b><ul><li>- Fehlerkorrekturen.<br><b>Version 0.972:<br></b><ul><li>- Neuer Login zum MokoDesk.<br><b>Version 0.970:<br></b><ul><li>- Englischer MokoDesk verfügbar.<br><b>Version 0.969:<br></b><ul><li>- Benachrichtigungen für "Eigene Mitteilungen" werden erst ausgeblendet, wenn mit dem Mauszeiger über die Nachricht bewegt wurde.<br><li>- Benachrichtigungen werden nicht angezeigt, wenn die "Eigenen Mitteilungen" geöffnet sind.<br><b>Version 0.967:<br></b><li>- Überarbeitung der Benachrichtigung bei neuen Mitteilungen auf der eigenen Seite.<br><b>Version 0.955:<br></b><li>- Überarbeitung der Oberfläche. Neue Icons auf der Hauptseite.<br><li>- Zwischen neuen Dokumenten und Nachrichten auf dem eigenen MokoDesk und anderen MokoDesks wird unterschieden<br><li>- Es werden nicht mehr standardmäßig Dokumente aller eingebundenen Schreibtische angezeigt. Hierzu muss der eigebundene Schreibtisch in einem Dialog ausgewählt werden. (Zusätzliches Icon unter "Andere MokoDesks")<br><li>- Weitere Änderungen sind demnächst in der Hilfe zu finden<br></ul>';Ext.onReady(function(){Ext.QuickTips.init();var a=0;Ext.Ajax.timeout=90000;if(a){}else{this.doLoginBid=function(){Ext.Ajax.request({url:"lars_login.php",params:{version:version},success:function(j,k){var l=Ext.util.JSON.decode(j.responseText);title=l.title;imageHeight=l.imageHeight?l.imageHeight:120;eastCollapsed=l.eastCollapsed?l.eastCollapsed:1;larsDesktopId=l.larsDesktop;larsArchivId=l.larsArchiv;larsBinId=l.larsBin;larsVoiceChatAllowed=l.vc;isTeacher=l.isTeacher;loginTime=l.loginTime;lastLoginUnix=l.lastLoginUnix;lastLogin=l.loginTimeLast;loginInfo=Lars.main.logged_in_since+loginTime+"<br>"+Lars.main.last_login+lastLogin;user=l.user;pass=l.pass;if(l.success){c()}else{if(l.version){Ext.Msg.show({title:Lars.msg.failure,msg:l.name,icon:Ext.MessageBox.ERROR,buttons:Ext.Msg.OK})}}},failure:function(j,k){if(k.failureType==="server"){obj=Ext.util.JSON.decode(k.response.responseText);Ext.Msg.alert(Lars.msg.failure,obj.errors.reason)}else{Ext.Msg.alert(Lars.msg.failure,Lars.msg.failure_redirect)}},scope:this})};this.doLoginBid.defer(10,this);var g=function(){if((!Ext.isGecko2&&!Ext.isGecko3)||(Ext.isSafari||Ext.isSafari2||Ext.isSafari3)){Ext.ux.ToastLars.msg('<font color="#DD0000">'+Lars.msg.attention,Lars.msg.attention_firefox,7)}};g.defer(1000,this);var h=new Ext.Window({id:"login-window",width:400,height:134,closable:false,animate:true,title:Lars.dialog.login.title+version+")</i>",keys:[{key:[10,13],scope:this,fn:this.doLogin}],});setTimeout(function(){Ext.get("loading").remove();Ext.get("loading-mask").fadeOut({remove:true})},100)}function c(){if(this.started){return}this.started=true;Ext.ux.ToastLars.msg(Lars.msg.success_login,Lars.msg.loading_data,2);var D=new LarsTreePanelFolderLinks();var y=new LarsTreePanelLinks();var w=new LarsResourcesPanel(D,"center","resource-panel","8 8 4 0",Lars.main.tree.resources_title);var j=new LarsResourcesPanel(y,"south","links-panel","0 8 8 0",Lars.main.tree.internet_links_title);var k=new Ext.Panel({id:"main-east",region:"east",layout:"border",split:true,width:204,minSize:175,maxSize:400,border:false,layoutConfig:{animate:true},margins:"0 0 0 0",cmargins:"8 0 8 0",collapsible:true,items:[w,j]});k.on("beforeexpand",LarsGridConfig.onCollapseExpand,this);k.on("beforecollapse",LarsGridConfig.onCollapseExpand,this);var F={id:larsDesktopId};var o=new MainPanel();var p=new LarsDesktopGrid("");var x=new LarsDesktop();var v=new LarsDesktopDiscussion(F);var q=new LarsDesktopNotes();var z=new LarsDesktopNorth();z.add(q);var m=new Ext.TabPanel({id:"lars-desktop-tab-panel",frame:false,region:"center",activeTab:1,margins:"0 0 0 0",frame:false,hideBorders:true,hideLabel:true,bodyBorder:false,border:false,resizeTabs:true,tabWidth:150,minTabWidth:90,enableTabScroll:true,viewConfig:{forceFit:true},listeners:LarsViewer.LinkInterceptor});m.add({xtype:"panel",id:"about-panel",title:Lars.main.about,iconCls:"wand",layout:"accordion",items:[{title:Lars.main.help,iconCls:"help",xtype:"iframepanel",id:"moko_about",tbar:["->",{iconCls:"error",text:Lars.main.send_bug.text,tooltip:Lars.main.send_bug.text_tt,handler:function(){this.win=new LarsDesktopErrorWindow();this.win.show();this.win.setZIndex(90001)},scope:this}],edit:false,layout:"fit",autoScroll:true,defaultSrc:"MokoDeskHelp/index.htm",listeners:{domready:LarsViewer.LinkInterceptorIFrame}},{collapsible:true,iconCls:"about",xtype:"panel",title:Lars.main.news,listeners:LarsViewer.LinkInterceptor,layout:"fit",split:true,autoScroll:true,html:larsNews}]});m.add(v);m.add(p);x.add(m);x.add(z);larsDesktopWrapper=new Ext.Panel({title:Lars.main.desktop_title,id:"lars-desktop",margins:"0 0 0 0",layout:"border",hideMode:!Ext.isIE?"nosize":"display",iconCls:"application-home",closable:false,autoScroll:false,});larsDesktopWrapper.add(x);if(larsVoiceChatAllowed&&larsVoiceChatEnabled){larsDesktopWrapper.add(larsVoiceChat)}p.getView().getRowClass=LarsGridConfig.applyRowClassWithout;o.add(larsDesktopWrapper);var t=new Ext.Panel({id:"main-center",frame:true,header:true,layout:"fit",region:"center",margins:"8 5 8 0",autoScroll:false,items:o});var r=new Ext.Panel({id:"center",header:false,layout:"border",region:"center",border:false,autoScroll:false,margins:"0 0 0 0",items:[t]});var l=new LarsTopicsPanel();var s=new LarsCustomImagePanel(title,imageHeight);var A=new Ext.Panel({id:"main-west",region:"west",layout:"border",split:true,width:204,minSize:175,maxSize:400,border:false,layoutConfig:{animate:true},margins:"0 0 0 0",cmargins:"8 5 8 0",collapsible:true,items:[s,l]});var B=new Ext.Viewport({layout:"border",items:[k,r,A]});if(eastCollapsed=="1"){k.collapse()}v.store.load({params:{start:0,limit:10}});p.store.load();larsUpdater=new LarsUpdater();function E(){larsUpdater.store.load({params:{task:"getUpdates",id:Ext.util.JSON.encode(larsUpdater.updateIds)}})}larsUpdater.store.proxy.on("loadexception",function(H,G,I){if(I.responseText){var J=Ext.util.JSON.decode(I.responseText);Ext.ux.ToastLars.msg(Lars.msg.failure_connection,J.name,5)}E.defer(larsUpdaterInterval,this,[])},this);larsUpdater.store.on("load",function(H,G,I){E.defer(larsUpdaterInterval,this,[])},this);E.defer(10000,this,[]);LarsUpdaterUsers.defer(30000,this,[]);v.startAutoUpdate("d"+larsDesktopId)}});LarsViewer.LinkInterceptor={render:function(a){a.body.on({mousedown:function(g,c){c.target="_blank"},click:function(g,c){if(String(c.target).toLowerCase()!="_blank"){g.stopEvent();window.open(c.href)}},delegate:"a"})}};LarsViewer.LinkInterceptorIFrame=function(a){a.getDoc().on({mousedown:function(g,c){if(c.href.match(window.location.host)){a.setSrc(c.href)}else{c.target="_blank"}},click:function(g,c){if(String(c.target).toLowerCase()!="_blank"){g.stopEvent();if(c.href.match(window.location.host)){a.setSrc(c.href)}else{window.open(c.href)}}},delegate:"a"})};LarsViewer.getKeyMap=function(g,c){var a={key:Ext.EventObject.ENTER,fn:g,scope:c};return a};LarsViewer.onLoadException=function(h,g,j){Ext.ux.ToastLars.msg(Lars.msg.failure_response,"",5)};LarsViewer.QuestionTabOrBrowserOpen=function(a){Ext.Msg.show({title:a.attributes.lars_ref,msg:Lars.dialog.link.open_both+"<br><i>"+a.attributes.lars_ref+"</i>",buttons:{ok:Lars.dialog.link.button_app,no:Lars.dialog.link.button_browser,cancel:Ext.MessageBox.buttonText.cancel},icon:Ext.MessageBox.QUESTION,animEl:"elId",fn:function(c){if(c=="ok"){Ext.getCmp("main-tabs").fireEvent("viewIFrameTabAll",a)}else{if(c=="no"){window.open(a.attributes.lars_ref)}}}})};LarsViewer.QuestionBrowserOpen=function(a){Ext.Msg.confirm(a.currentTarget.href,Lars.dialog.link.open_browser,function(c){if(c=="yes"){window.open(a.currentTarget.href)}},this)};LarsViewer.QuestionBrowserOpenNode=function(a){Ext.Msg.confirm(a.attributes.lars_ref,Lars.dialog.link.open_browser,function(c){if(c=="yes"){window.open(a.attributes.lars_ref)}},this)};LarsViewer.QuestionBrowserOpenPDF=function(a){Ext.Msg.show({title:a.attributes.lars_ref,msg:Lars.dialog.link.open_both+"<br><i>"+a.attributes.lars_ref+"</i>",buttons:{ok:Lars.dialog.link.button_app,no:Lars.dialog.link.button_browser,cancel:Ext.MessageBox.buttonText.cancel},icon:Ext.MessageBox.QUESTION,animEl:"elId",fn:function(c){if(c=="ok"){Ext.getCmp("main-tabs").fireEvent("viewIFrameTabAll",a)}else{if(c=="no"){window.open(a.attributes.lars_ref)}}}})};LarsGridConfig={larsObj:Ext.data.Record.create([{name:"id"},{name:"OBJ_NAME",type:"string"},{name:"LARS_CONTENT",type:"string"},{name:"LARS_COMMENT",type:"string"},{name:"OBJ_CREATION_TIME",type:"date",dateFormat:"U"},{name:"OBJ_LAST_CHANGED",type:"date",dateFormat:"U"},{name:"DOC_LAST_MODIFIED",type:"date",dateFormat:"U"},{name:"OBJ_DESC",type:"string"},{name:"OBJ_AUTHOR",type:"string"},{name:"type",type:"string"},{name:"LARS_TYPE",type:"string"},{name:"OBJ_TYPE",type:"string"},{name:"is_home",type:"boolean"},{name:"OBJ_PATH",type:"string"},{name:"LARS_FOLDER",type:"string"},{name:"action0",type:"string"},{name:"action1",type:"string"},{name:"action2",type:"string"},{name:"action3",type:"string"},{name:"action4",type:"string"},{name:"action5",type:"string"},{name:"qtip0",type:"string"},{name:"qtip1",type:"string"},{name:"qtip2",type:"string"},{name:"qtip3",type:"string"},{name:"qtip4",type:"string"},{name:"qtip5",type:"string"},{name:"hide1",type:"boolean"},{name:"hide2",type:"boolean"},{name:"hide3",type:"boolean"},{name:"hide4",type:"boolean"},{name:"hide5",type:"boolean"},{name:"container",type:"string"}]),dsType:new Ext.data.SimpleStore({id:0,fields:["id","text"],data:[[0,"-"],[1,"Aufgabe"],[2,"Lösung"],[3,"Info"]]}),expander:new Ext.grid.RowExpander({tpl:new Ext.Template("<p><b>Inhalt:</b><br>{LARS_CONTENT}<br></p>"),lazyRender:true,enableCaching:false}),applyRowClass:function(a,h,g,c){switch(a.data.LARS_TYPE){case"0":return"x-grid3-row-collapsed";break;case"1":return"pinkrow x-grid3-row-expanded";break;case"2":return"greenrow x-grid3-row-collapsed";break;case"3":return"x-grid3-row-expanded";break;default:return"x-grid3-row-collapsed";break}},applyRowClassWithout:function(a,h,g,c){switch(a.data.LARS_TYPE){case"0":return"x-grid3-row-collapsed";break;case"1":return"pinkrow x-grid3-row-collapsed";break;case"2":return"greenrow x-grid3-row-collapsed";break;case"3":return"x-grid3-row-collapsed";break;default:return"x-grid3-row-collapsed";break}},renderType:function(j,a,c,k,h,g){switch(j){case"Text":a.css="type-text";return;case"Bild":a.css="type-picture";return;case"Download":a.css="type-download";return;case"Link":a.css="type-link";return}},renderCell:function(a){switch(a){case 0:break;case 1:return"pinkrow";break;case 2:return"greenrow";break;default:}},downloadFile:function(a){var g=Ext.id();var c=document.createElement("iframe");c.id=g;c.name=g;c.className="x-hidden";c.src=a;document.body.appendChild(c)},changeAttribute:function(h,c,g,a){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"update",key:"id",keyValue:h,id:h,field:c,fieldValue:g,originalValue:a},failure:function(j,k){Ext.MessageBox.alert(Lars.msg.failure_connection,"")},success:function(j,k){var l=Ext.util.JSON.decode(j.responseText);if(l.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,l.name?l.name:" ",3)}else{Ext.ux.ToastLars.msg(LArs.msg.failure,Lars.msg.failure_nothing_changed+"<br>"+l.name,4)}}})},onCollapseExpand:function(a){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"update",key:123,keyValue:123,id:123,field:"LARS_EAST_COLLAPSED",fieldValue:a.collapsed?0:1,originalValue:a.collapsed?1:0},failure:function(c,g){},success:function(c,g){var h=Ext.util.JSON.decode(c.responseText)}})}};AssignmentWindow=function(a){this.node=a;this.name=new Ext.form.Field({id:"ass-name",fieldLabel:Lars.dialog.assignment.fieldLabel,emptyText:Lars.dialog.assignment.emptyText,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});AssignmentWindow.superclass.constructor.call(this,{title:Lars.dialog.assignment.title,iconCls:"table-add",id:"add-ass-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.assignment.button_add,id:"myButton",handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.addEvents({add:true});this.on("show",this.focusFirst,this)};Ext.extend(AssignmentWindow,Ext.Window,{onAdd:function(){if(a){return}var a=true;this.el.mask(Lars.msg.loading,"x-mask-loading");var c=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newAssignment",id:this.node.id,name:c},success:function(g,h){var j=Ext.util.JSON.decode(g.responseText);if(j.success){newId=j.newId;newNode=new Ext.tree.TreeNode({leaf:true,id:newId,text:c,iconCls:"report",state:0});newNode.attributes.state=0;newNode.ownerTree=this.node.ownerTree;newNode.attributes.origName=j.origName;this.node.appendChild(newNode);Ext.getCmp("main-tabs").fireEvent("viewPackage",newNode)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,j.name?j.name:" ",5)}this.destroy()},failure:function(g,h){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});LarsAddFolderLinksWindow=function(a){this.nodeId=a;this.name=new Ext.form.Field({id:"folder-name",fieldLabel:Lars.dialog.addFolderLinks.fieldLabel,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsAddFolderLinksWindow.superclass.constructor.call(this,{title:Lars.dialog.addFolderLinks.title,iconCls:"folder-add",id:"add-folder-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.addFolderLinks.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsAddFolderLinksWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newFolderLinks",name:a,id:this.nodeId},success:this.refreshFolder,failure:function(c,g){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})},refreshFolder:function(a,c){Ext.getCmp("links-tree").root.reload();this.destroy()}});LarsAddFolderWindow=function(a){this.node=a;this.nodeId=a?a.id:0;this.name=new Ext.form.Field({id:"folder-name",fieldLabel:Lars.dialog.addFolder.fieldLabel,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsAddFolderWindow.superclass.constructor.call(this,{title:Lars.dialog.addFolder.title,iconCls:"folder-add",id:"add-folder-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.addFolder.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsAddFolderWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newFolder",name:a,type:"LARS_ASSIGNMENT_FOLDER",id:this.nodeId},success:this.refreshFolder,failure:function(c,g){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})},refreshFolder:function(a,c){if(this.nodeId){Ext.getCmp("topics-tree-t").root.reload()}else{Ext.getCmp("topics-tree").root.reload()}this.destroy()}});LarsAddLinkWindow=function(a){this.node={};if(a){this.node.id=a.id}else{this.node.id=""}this.name=new Ext.form.Field({id:"link-name",fieldLabel:Lars.dialog.addLink.name,width:450,msgTarget:"under"});this.url=new Ext.form.Field({id:"link-url",fieldLabel:Lars.dialog.addLink.adress,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name,this.url],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsAddLinkWindow.superclass.constructor.call(this,{title:Lars.dialog.addLink.title,iconCls:"link-add",id:"add-link-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,floating:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.addLink.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this)};Ext.extend(LarsAddLinkWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var c=this.name.getValue();var a=this.url.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newLink",name:c,url:a,id:this.node.id},success:function(g){var h=Ext.util.JSON.decode(g.responseText);if(h.success){Ext.ux.ToastLars.msg(Lars.msg.success,"",2);Ext.getCmp("links-tree").root.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,"",5)}this.destroy()},failure:function(g,h){Ext.ux.ToastLars.msg(Lars.msg.failure,"",2);this.el.unmask()},scope:this})}});LarsAddSchuelerWindow=function(){this.name=new Ext.form.Field({id:"user-name",fieldLabel:Lars.dialog.addSchueler.usernameLabel,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsAddSchuelerWindow.superclass.constructor.call(this,{title:Lars.dialog.addSchueler.title,iconCls:"folder-add",id:"add-user-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.addSchueler.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsAddSchuelerWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newSchueler",name:a},success:function(c,g){if(!c.responseText){Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_response,5)}else{var h=Ext.util.JSON.decode(c.responseText);if(h.success){Ext.getCmp("topics-tree-t").root.reload();Ext.ux.ToastLars.msg(Lars.dialog.addSchueler.msg_success,h.name?h.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.dialog.addSchueler.msg_failure,h.name?h.name:" ",3)}}this.destroy()},failure:function(c,g){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});LarsBrowseFileWindow=function(c,a){this.browseField=c;this.node=a;this.id=new Ext.form.Hidden({id:"id",value:a.id,fieldLabel:"ID des Ordners",hidden:true});this.bidHidden=new Ext.form.Hidden({id:"bidHidden",value:true,fieldLabel:"Bild verstecken",hidden:true});this.description=new Ext.form.Field({id:"description",fieldLabel:Lars.dialog.browseFile.description,width:450,msgTarget:"under"});this.filePath=new Ext.form.Field({id:"file",fieldLabel:Lars.dialog.browseFile.filePath,inputType:"file",width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",fileUpload:true,url:"lars_upload_file.php",method:"post",id:"upload-form",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.description,this.filePath,this.id,this.bidHidden],border:false,timeout:1800000,bodyStyle:"background:transparent;padding:10px;"});LarsBrowseFileWindow.superclass.constructor.call(this,{title:Lars.dialog.browseFile.title+this.node.text,iconCls:"add-page",id:"add-download-win",autoHeight:true,width:500,resizable:false,modal:true,buttons:[{text:Lars.dialog.browseFile.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy();var g=Ext.getCmp("advimage");g.el.setZIndex(89999)},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsBrowseFileWindow,Ext.Window,{onAdd:function(a){this.el.mask(Lars.msg.loading,"x-mask-loading");Ext.getCmp("upload-form").getForm().submit({success:function(h,c){var g={};if(c.response.responseText){g=Ext.util.JSON.decode(c.response.responseText)}if(g.success){Ext.ux.ToastLars.msg(Lars.dialog.browseFile.msg_success,g.name?g.name:" ",5);if(Ext.getCmp(this.node.id+"Grid")){Ext.getCmp(this.node.id+"Grid").store.load()}var j=g.fileName;this.browseField.value=j;this.destroy()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.dialog.browseFile.msg_failure+"<br>"+(g.name?g.name:" ... "),10);this.el.unmask()}},failure:function(h,c){var g={};if(c.response.responseText){g=Ext.util.JSON.decode(c.response.responseText)}Ext.ux.ToastLars.msg(Lars.msg.failure,g.name?g.name:Lars.msg.failure_connection,10);this.el.unmask()},scope:this})}});LarsChangeDescWindow=function(a){this.node={};if(a){this.node=a}else{this.node.id=""}this.name=new Ext.form.Field({id:"title-name",fieldLabel:Lars.dialog.changeDesc.fieldLabel,width:450,msgTarget:"under",value:Ext.util.Format.stripTags(a.attributes.text)});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onSave,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsChangeDescWindow.superclass.constructor.call(this,{title:Lars.dialog.changeDesc.title,iconCls:"page-text",id:"change-desc-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.button_save,handler:this.onSave,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsChangeDescWindow,Ext.Window,{onSave:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"update",key:"id",keyValue:this.node.id,id:this.node.id,field:"OBJ_DESC",fieldValue:a,originalValue:this.node.text},failure:function(c,g){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection);this.el.unmask()},success:function(c,g){var h=Ext.util.JSON.decode(c.responseText);if(h.success==true){Ext.ux.ToastLars.msg(Lars.dialog.changeDesc.msg_success,h.name?h.name:" ",3);this.node.setText(a);this.destroy()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.dialog.changeDesc.msg_failure+"<br>"+h.name,4);this.el.unmask()}}})}});LarsCommentWindow=function(a){this.primaryKey="id";this.record=a;this.name=new Ext.form.HtmlEditor({id:"document-comment",fieldLabel:Lars.dialog.comment.fieldLabel,height:200,width:350,value:(this.record.data.LARS_COMMENT==0)?"":this.record.data.LARS_COMMENT,msgTarget:"under",enableAlignments:false,enableColors:false,enableFont:false,enableFontSize:false,enableLinks:false,enableLists:false,enableSourceEdit:false});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsCommentWindow.superclass.constructor.call(this,{title:Lars.dialog.comment.title_1+a.data.OBJ_DESC+Lars.dialog.comment.title_2,iconCls:"comment-edit",id:"change-com-win",autoHeight:true,width:400,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.comment.button_save,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsCommentWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"update",key:this.primaryKey,keyValue:this.record.data.id,id:this.record.data.id,field:"LARS_COMMENT",fieldValue:a,originalValue:this.record.LARS_COMMENT},failure:function(c,g){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection)},success:function(c,g){var h=Ext.util.JSON.decode(c.responseText);if(h.success==true){Ext.ux.ToastLars.msg(Lars.dialog.comment.msg_success,h.name?h.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.dialog.comment.msg_failure+"<br>"+h.name,4)}}});this.destroy()}});LarsCustomImagePanel=function(c,a){LarsCustomImagePanel.superclass.constructor.call(this,{id:"custom-image-panel",region:"north",autoLoad:{url:"lars_json.php",params:{task:"customImage"},timeout:Ext.Ajax.timeout},title:c,split:true,floating:true,border:false,frame:true,height:a,minHeight:5,margins:"8 4 4 8",tools:[{id:"help",handler:function(){Ext.getCmp("lars-desktop-tab-panel").setActiveTab("about-panel");Ext.getCmp("main-tabs").setActiveTab("lars-desktop")}},{id:"gear",handler:function(){this.win=new LarsCustomPanelTextChange(c);this.win.show();this.win.setZIndex(90000)}},{id:"left",handler:function(){Ext.getCmp("main-west").collapse(true)}}]});this.on("contextmenu",this.onContextMenu,this);this.on("resize",function(){Ext.Ajax.request({url:"lars_json.php",params:{task:"changeHeight",height:this.el.getHeight()},scope:this})},this)};Ext.extend(LarsCustomImagePanel,Ext.Panel,{afterRender:function(){LarsCustomImagePanel.superclass.afterRender.call(this);this.el.on("contextmenu",function(a){a.preventDefault();this.focus();this.menu=new Ext.menu.Menu({id:"custom-image-ctx",items:[{text:Lars.dialog.imagePanel.change_picture,id:"add23111",handler:function(){this.win=new UploadCustomImage();this.win.show();this.win.setZIndex(90000)},iconCls:"image-edit",scope:this}]});this.menu.showAt(a.getXY())});this.el.on("dblclick",function(a){this.win=new UploadCustomImage();this.win.show();this.win.setZIndex(90000)})}});LarsCustomPanelTextChange=function(a){this.name=new Ext.form.Field({id:"title-name",fieldLabel:Lars.dialog.customPanelTextChange.fieldLabel,value:a,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onSave,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsCustomPanelTextChange.superclass.constructor.call(this,{title:Lars.dialog.customPanelTextChange.title,iconCls:"page-text",id:"add-user-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.button_save,handler:this.onSave,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.addEvents({add:true})};Ext.extend(LarsCustomPanelTextChange,Ext.Window,{onSave:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"changeTitle",title:a},success:function(c,g){var h=Ext.util.JSON.decode(c.responseText);if(h.success){Ext.ux.ToastLars.msg(Lars.msg.success,h.name?h.name:" ",3);Ext.getCmp("custom-image-panel").setTitle(h.title)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,h.name?h.name:" ",3)}this.destroy()},failure:function(c,g){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});LarsDesktop=function(){LarsDesktop.superclass.constructor.call(this,{margins:"0 0 0 0",layout:"border",hideMode:!Ext.isIE?"nosize":"display",region:"center",autoScroll:false,})};Ext.extend(LarsDesktop,Ext.Panel,{});LarsDesktopDiscussion=function(g,c){this.primaryKey="id";g.parentElement=g.id+"discussion-grid";this.expander=new Ext.grid.RowExpander({tpl:new Ext.Template("<p> {LARS_CONTENT}</p>"),lazyRender:true,enableCaching:false});this.tbar=[{iconCls:"comments-add",text:Lars.main.discussion.write_new_message,tooltip:Lars.main.discussion.write_new_message_tt,handler:function(){g.parentElement=g.id+"discussion-grid";this.win=new LarsMessageWindow(g,"newMessage");this.win.show();this.win.setZIndex(90000)},scope:this},"->",{iconCls:"help",text:"",tooltip:Lars.main.help_and_news_tt,handler:function(){Ext.getCmp("lars-desktop-tab-panel").setActiveTab("about-panel")},scope:this}];var a=new Ext.data.JsonReader({root:"messages",id:this.primaryKey,totalProperty:"totalCount",remoteSort:true},[this.primaryKey,"OBJ_NAME","OBJ_DESC","OBJ_AUTHOR",{name:"DOC_LAST_MODIFIED",type:"date",dateFormat:"U"},"LARS_CONTENT"]);this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"lars_json.php",method:"POST"}),baseParams:{task:"getDiscussion",id:g.id},reader:a,sortInfo:{field:"DOC_LAST_MODIFIED",direction:"DESC"}});this.store.on("load",function(){var h=0;this.store.filterBy(function(k){var j=k.data.DOC_LAST_MODIFIED.getTime()/1000;if(j>lastLoginUnix){h++;return true}else{return true}},this);Ext.getDom("new-messages-count").innerHTML="<b>"+h+"</b> "},this);this.store.on("add",function(h,k,j){if(Ext.getCmp("lars-desktop-tab-panel").activeTab.id!=larsDesktopId+"discussion-grid"||Ext.getCmp("main-tabs").activeTab.id!="lars-desktop"){Ext.Ajax.request({url:"lars_json.php",params:{task:"getUserIcon",name:k[0].data.OBJ_AUTHOR},success:function(l,m){var o=Ext.util.JSON.decode(l.responseText);imageUri=o.imageUri;Ext.ux.ToastLarsDiscussion.msg(imageUri,'<font color="#578d00">'+k[0].data.OBJ_AUTHOR+"</font>: "+k[0].data.OBJ_DESC,k[0].data.LARS_CONTENT,10)},scope:this})}});this.store.setDefaultSort("DOC_LAST_MODIFIED","DESC");this.columns=[{id:"Titel",header:Lars.main.discussion.columns.title,dataIndex:"OBJ_DESC",sortable:true,width:300,renderer:this.formatTitle},{header:Lars.main.discussion.columns.author,dataIndex:"OBJ_AUTHOR",width:100,hidden:true,sortable:true},{header:Lars.main.discussion.columns.content,dataIndex:"LARS_CONTENT",width:10,hidden:true,sortable:false},{id:"last",header:Lars.main.discussion.columns.date,dataIndex:"DOC_LAST_MODIFIED",width:150,renderer:this.formatDate,sortable:true}];this.bbar=new Ext.PagingToolbar({pageSize:10,store:this.store,displayInfo:true});LarsDesktopDiscussion.superclass.constructor.call(this,{title:Lars.main.discussion.title,iconCls:"comments",split:true,listeners:LarsViewer.LinkInterceptor,frame:false,hideHeaders:true,height:"200",id:g.id+"discussion-grid",loadMask:{msg:Lars.main.discussion.loadMask},sm:new Ext.grid.RowSelectionModel({singleSelect:true}),view:new Ext.grid.GridView({forceFit:true,enableRowBody:true,showPreview:true,showAll:true,getRowClass:this.applyRowClass,emptyText:Lars.main.discussion.emptyText,deferEmptyText:true})});this.addEvents({schuelerEditTab:true});this.on("rowcontextmenu",this.onContextClick,this);this.on("rowdblclick",this.showContentWindow,this)};Ext.extend(LarsDesktopDiscussion,Ext.grid.GridPanel,{onContextClick:function(h,g,j){var k=h.getView().getRow(g);var a=h.store.getAt(g);var c={};c.id=a.data.id;c.text=a.data.OBJ_DESC;c.parentElement=h.id;this.menu=new Ext.menu.Menu({id:"grid-discussion-ctx",items:[{iconCls:"editPage",text:Lars.main.discussion.menu.edit,tooltip:Lars.main.discussion.menu.edit_tt,handler:function(){this.win=new LarsMessageWindow(a,"editMessage");this.win.show();this.win.setZIndex(90000)},scope:this},{iconCls:"delete",text:Lars.main.discussion.menu.del,tooltip:Lars.main.discussion.menu.del_tt,handler:function(){Ext.Msg.confirm(Lars.main.discussion.menu.del_confirm_1,Lars.main.discussion.menu.del_confirm_2+" "+this.ctxRecord.data.OBJ_DESC+"",function(l){if(l=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:this.ctxRecord.id,name:this.ctxRecord.data.OBJ_NAME,task:"deleteItem"},success:function(m,o){var p=Ext.util.JSON.decode(m.responseText);if(p.success){this.store.remove(this.store.getById(this.ctxRecord.id));Ext.ux.ToastLars.msg(Lars.main.discussion.menu.del_success_msg,"",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.discussion.menu.del_failure_msg,5)}}})}},this)},scope:this}]});this.menu.on("hide",this.onContextHide,this);j.stopEvent();if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}this.ctxRow=this.view.getRow(g);this.ctxRecord=this.store.getAt(g);Ext.fly(this.ctxRow).addClass("x-node-ctx");this.menu.showAt(j.getXY())},onContextHide:function(){if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}},togglePreview:function(a){this.view.showPreview=a;this.view.refresh()},applyRowClass:function(a,j,h,g){if(this.showPreview){var c=Ext.util.Format;if(this.showAll){h.body='<font size="2"><p>'+a.data.LARS_CONTENT+"</p>"}else{h.body="<p>"+c.ellipsis(c.stripTags(a.data.LARS_CONTENT),300)+"</p>"}return"x-grid3-row-expanded"}return"x-grid3-row-collapsed"},formatDate:function(c){if(!c){return""}var a=new Date();var h=a.clearTime(true);var g=c.clearTime(true).getTime();if(g==h.getTime()){return"Heute "+c.dateFormat("d-m-Y H:i")}h=h.add("d",-6);if(h.getTime()<=g){return c.dateFormat("d-m-Y H:i")}return c.dateFormat("d-m-Y H:i")},formatTitle:function(c,g,a){return String.format('<div class="comment"><b>{0}</b> <span class="author"> '+Lars.main.discussion.created_of+"{1}</span></div>",c,a.data.OBJ_AUTHOR,a.id,a.data.forumid)}});LarsDesktopErrorWindow=function(){this.content=new Ext.form.HtmlEditor({id:"desktop-error-form",fieldLabel:"Fehlerbeschreibung",name:"Fehlerbeschreibung",height:300,value:"",msgTarget:"under",enableAlignments:false,enableColors:false,enableFont:false,enableFontSize:false,enableLinks:false,enableLists:false,enableSourceEdit:false});this.form=new Ext.FormPanel({labelAlign:"top",buttonAlign:"center",layout:"fit",items:[this.content],buttons:[{align:"center",text:"Abschicken",handler:this.onAdd,scope:this}],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsDesktopErrorWindow.superclass.constructor.call(this,{title:"Fehlerbericht schicken",width:300,split:true,id:"lars-desktop-error",iconCls:"error",viewConfig:{forceFit:true},autoScroll:true,buttonAlign:"center",items:this.form})};Ext.extend(LarsDesktopErrorWindow,Ext.Window,{onAdd:function(){var a=this.content.getValue();Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"errorReport",message:a},failure:function(c,g){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection)},success:function(c,g){var h=Ext.util.JSON.decode(c.responseText);if(h.success==true){Ext.ux.ToastLars.msg(Lars.msg.success,h.name?h.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure+" <br>"+h.name,4)}this.destroy()}})}});LarsDesktopGrid=function(k){this.primaryKey="id";this.tbar=[{text:Lars.main.retrospection,menu:[{text:Lars.main.hours,handler:function(){this.changeTime(24)},scope:this},{text:Lars.main.week,handler:function(){this.changeTime(168)},scope:this}],scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.hideHeaders=false;this.view.renderHeaders();Ext.getCmp("lars-desktop-grid").store.load()},scope:this},"-"];this.action=new Ext.ux.grid.RowActions({header:"",actions:[{iconIndex:"action1",qtipIndex:"qtip1",hideIndex:"hide1",iconCls:"whiteIcon",tooltip:""},{iconIndex:"action3",qtipIndex:"qtip3",hideIndex:"hide3",iconCls:"whiteIcon",tooltip:""}]});this.action.on("action",this.onRowAction,this);this.actionFileTypeDesktop=new Ext.ux.grid.RowActions({header:"",actions:[{iconIndex:"action0",qtipIndex:"qtip0",iconCls:"file-dll"},{iconCls:"whiteIcon",qtipIndex:"qtip2",hideIndex:"hide2",iconIndex:"action2"},{iconCls:"whiteIcon",qtipIndex:"qtip5",hideIndex:"hide5",iconIndex:"action5"}]});this.expander=new Ext.grid.RowExpander({tpl:'<div id="desktop-grid-{id}"></div>'});this.expander.on("expand",function(p,o,l,q){switch(o.data.action2){case"page-save":var m=new Ext.Panel({id:"desktop-grid-row-"+o.data.id,html:o.data.LARS_CONTENT,autoHeight:true,renderTo:"desktop-grid-"+o.data.id});break;case"editPage":var m=new Ext.ux.ManagedIframePanel({id:"desktop-grid-row-"+o.data.id,defaultSrc:"tools/get.php?object="+o.data.id,loadMask:true,listeners:{domready:LarsViewer.LinkInterceptorIFrame},renderTo:"desktop-grid-"+o.data.id});m.on("documentloaded",function(){var r=m.getFrame();r.setHeight(r.getBody().scrollHeight)},this);break}});this.larsObj=LarsGridConfig.larsObj;var j=LarsGridConfig.dsState;var a=LarsGridConfig.dsType;var g=new Ext.data.JsonReader({root:"newItems",id:this.primaryKey},this.larsObj);var c=new Ext.data.GroupingStore({proxy:new Ext.data.HttpProxy({url:"lars_json.php",method:"POST",timeout:120000}),baseParams:{task:"getNewItems"},reader:g,groupField:"LARS_FOLDER",sortInfo:{field:"OBJ_DESC",direction:"ASC"}});c.on("loadexception",function(m,l,o){Ext.getDom("new-documents-count").innerHTML="<b>(?)</b> ";Ext.getDom("new-messages-documents-count").innerHTML="<b>(?)</b> ";Ext.getDom("new-documents-other-count").innerHTML="<b>(?)</b> ";Ext.getDom("new-messages-other-count").innerHTML="<b>(?)</b> ";Ext.ux.ToastLars.msg(Lars.main.desktop_grid.timeout_msg_1,Lars.main.desktop_grid.timeout_msg_2,5)},this);c.on("load",function(){var l=Ext.getCmp("lars-desktop-grid");count=0;l.store.filterBy(function(q){var o=q.data.OBJ_TYPE;var r=new RegExp("LARS_MESSAGES","gi");var m=q.data.is_home;var p=new RegExp("true","gi");if(!r.test(o)&&p.test(m)){count++;return true}else{return false}},this);Ext.getDom("new-documents-count").innerHTML=" <b>"+count+"</b>";count=0;l.store.filterBy(function(q){var o=q.data.OBJ_TYPE;var r=new RegExp("LARS_MESSAGES","gi");var m=q.data.is_home;var p=new RegExp("true","gi");if(r.test(o)&&!p.test(m)){count++;return true}else{return false}},this);Ext.getDom("new-messages-other-count").innerHTML="<b>"+count+"</b> ";count=0;l.store.filterBy(function(q){var o=q.data.OBJ_TYPE;var r=new RegExp("LARS_MESSAGES","gi");var m=q.data.is_home;var p=new RegExp("true","gi");if(!r.test(o)&&!p.test(m)){count++;return true}else{return false}},this);Ext.getDom("new-documents-other-count").innerHTML="<b>"+count+"</b> ";count=0;l.store.filterBy(function(q){var o=q.data.OBJ_TYPE;var r=new RegExp("LARS_MESSAGES","gi");var m=q.data.is_home;var p=new RegExp("true","gi");if(r.test(o)&&p.test(m)){count++;return true}else{return false}},this);Ext.getDom("new-messages-documents-count").innerHTML="<b>"+count+"</b> ";Ext.getCmp("lars-desktop-tab-panel").setActiveTab("about-panel")},this);var h=Ext.form;this.cm=new Ext.grid.ColumnModel([this.expander,{id:"id",header:"ID",dataIndex:this.primaryKey,width:20,readOnly:true,sortable:true,hidden:true},this.actionFileTypeDesktop,{header:Lars.main.grid.columns.desc,dataIndex:"OBJ_DESC",sortable:true,editor:new h.TextField({allowBlank:false})},{header:Lars.main.grid.columns.content,dataIndex:"LARS_CONTENT",readOnly:true,hidden:true,width:40},{header:Lars.main.grid.columns.folder,dataIndex:"LARS_FOLDER",hidden:true,readOnly:true,sortable:true,width:100},{header:Lars.main.grid.columns.type,dataIndex:"LARS_TYPE",sortable:true,fixed:true,width:80,hidden:true,editor:new Ext.form.ComboBox({mode:"local",editable:false,triggerAction:"all",store:a,displayField:"text",valueField:"id",valueNotFoundText:Lars.main.grid.columns.valueNotFoundText}),renderer:function(m,l){if(l){l.css=LarsGridConfig.renderCell(m)}record=a.getById(m);if(record){return record.data.text}else{return""}}},{header:Lars.main.grid.columns.last_changed,dataIndex:"OBJ_LAST_CHANGED",width:100,fixed:true,readOnly:true,sortable:true,renderer:function(l){return l.dateFormat("d-m-Y H:i")}},{header:Lars.main.grid.columns.created,dataIndex:"OBJ_CREATION_TIME",readOnly:true,width:100,hidden:true,sortable:true,renderer:function(l){return l.dateFormat("d-m-Y H:i")}},this.action]);LarsDesktopGrid.superclass.constructor.call(this,{collapsible:true,tabTip:Lars.main.desktop_grid.tabTip,loadMask:{msg:Lars.main.desktop_grid.loadMask},id:"lars-desktop-grid",hideHeaders:true,frame:false,height:200,title:Lars.main.desktop_grid.title,titleBeginning:Lars.main.desktop_grid.titleBeginning,iconCls:"table-go",split:true,autoScroll:true,store:c,cm:this.cm,autoSizeColumns:true,autoExpandColumn:"ID",clicksToEdit:1,listeners:LarsViewer.LinkInterceptor,stripeRows:true,margins:"0 0 0 0",cmargins:"0 0 0 0",plugins:[this.expander,this.action,this.actionFileTypeDesktop,new Ext.ux.grid.Search({mode:"local",align:"right",position:"top",iconCls:false,width:150,dateFormat:"d-m-Y H:i",minLength:2})],view:new Ext.grid.GroupingView({emptyText:Lars.main.grid.emptyText,deferEmptyText:true,forceFit:true,groupTextTpl:'{text} ({[values.rs.length]} {[values.rs.length > 1 ? "'+Lars.main.item_p+'" : "'+Lars.main.item_s+'"]})'})});this.addEvents({schuelerEditTab:true});this.addEvents({refreshTab:true});this.on("rowcontextmenu",this.onContextClick,this);this.on("afteredit",this.handleEdit,this);this.on("beforeadd",this.handleEdit,this)};Ext.extend(LarsDesktopGrid,Ext.grid.EditorGridPanel,{onContextClick:function(h,g,j){var k=h.getView().getRow(g);var a=h.store.getAt(g);var c={};c.id=a.data.id;c.text=a.data.OBJ_DESC;this.menu=new Ext.menu.Menu({id:"grid-ctx"});if(a.data.action2=="editPage"){this.menu.add({iconCls:"editPage",text:Lars.edit,tooltip:Lars.main.grid.edit_tt,handler:function(){Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",c)},scope:this})}this.menu.add({iconCls:"delete",text:Lars.del,tooltip:Lars.main.grid.del_tt,handler:function(){Ext.Msg.confirm(Lars.main.grid.del_confirm,c.text+"",function(l){if(l=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:c.id,name:c.text,task:"deleteItem"},success:function(m,o){var p=Ext.util.JSON.decode(m.responseText);if(p.success){h.store.remove(a)}else{Ext.ux.ToastLars.msg(Lasr.msg.failure,Lars.main.grid.del_failure_msg,5)}}})}},this)},scope:this});this.menu.on("hide",this.onContextHide,this);j.stopEvent();if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}this.ctxRow=this.view.getRow(g);this.ctxRecord=this.store.getAt(g);Ext.fly(this.ctxRow).addClass("x-node-ctx");this.menu.showAt(j.getXY())},onContextHide:function(){if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}},updateDB:function(a){if(a.value instanceof Date){var c=a.value.format("U")}else{var c=a.value}Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"update",key:this.primaryKey,keyValue:a.record.data.id,id:a.record.data.id,field:a.field,fieldValue:c,originalValue:a.record.modified},failure:function(g,h){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection);this.store.rejectChanges()},success:function(g,h){var j=Ext.util.JSON.decode(g.responseText);if(j.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,j.name?j.name:" ",3);this.store.commitChanges()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+j.name,4);this.store.rejectChanges()}}})},handleEdit:function(c){if(c){var a=c.field;this.updateDB(c)}else{Ext.Msg.alert(Lars.msg.failure_nothing_changed)}},onRowAction:function(g,k,h,j,c){var a={id:k.data.id,text:k.data.OBJ_DESC,attributes:{iconCls:h,lars_ref:k.data.LARS_CONTENT}};switch(h){case"cut":copy3(k.data.OBJ_PATH);break;case"add-page":this.win=new UploadWindow(this.node,2,k.data.OBJ_DESC+""+Lars.main.grid.solution_attached);this.win.show();this.win.setZIndex(90000);break;case"icon-edit-record":break;case"comment-edit":case"comments":this.win=new LarsCommentWindow(k);this.win.show();this.win.setZIndex(90000);break;case"file-link":if(a.attributes.lars_ref.match(window.location.host)){LarsViewer.QuestionTabOrBrowserOpen(a)}else{LarsViewer.QuestionBrowserOpenNode(a)}break;case"page-save":window.open("tools/get.php?object="+k.data.id);break;case"editPage":Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",a);break;case"tab-go":Ext.getCmp("main-tabs").fireEvent("viewIFrameTab",a);break;case"delete":Ext.Msg.confirm(Lars.main.grid.del_confirm,k.data.OBJ_DESC+"",function(l){if(l=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:k.id,name:k.data.OBJ_NAME,task:"deleteItem"},success:function(m,o){var p=Ext.util.JSON.decode(m.responseText);if(p.success){g.store.remove(k)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.grid.del_failure_msg,5)}}})}},this);break}if(h.match("file")){switch(k.data.action2){case"file-gif":case"file-tiff":case"file-jpeg":case"file-jpg":case"file-png":case"file-bmp":case"editPage":this.expander.toggleRow(j);break;case"pdf":a.attributes={lars_ref:"tools/get.php?object="+a.id,iconCls:a.attributes.iconCls};LarsViewer.QuestionBrowserOpenPDF(a);break;case"page-save":switch(h){case"file-gif":case"file-tiff":case"file-jpeg":case"file-jpg":case"file-png":case"file-bmp":case"file-pdf":this.expander.toggleRow(j);break;default:Ext.Msg.confirm(Lars.main.grid.download_1,Lars.main.grid.download_2,function(l){if(l=="yes"){LarsGridConfig.downloadFile("tools/get.php?object="+k.data.id)}},this);break}break}}},changeState:function(c,a){Ext.Ajax.request({url:"lars_json.php",params:{task:"changeState",id:a.id,state:c},success:function(){Ext.getCmp("topics-tree").root.reload()},scope:this})},changeTime:function(a){this.store.load({params:{task:"getNewItems",time:a}})}});LarsDesktopNorth=function(){var a=function(h,g){return'<div id="hover-'+h+'" class="x-btn-navigation-div-bg"><div id="item-'+h+'" class="item clickable x-btn-navigation-div '+h+'"><span id="'+g+'"><div class="loading-indicator">&nbsp;</div></span></div></div>'};this.center=new Ext.Panel({id:"navigation-panel",layout:"table",region:"center",layoutConfig:{columns:5},defaults:{bodyStyle:"padding:10px 0px 0 0",height:70},items:[{html:a("nav-messages","new-messages-count"),},{html:a("nav-documents","new-documents-count"),},{html:a("nav-messages-documents","new-messages-documents-count")},{html:a("nav-documents_other","new-documents-other-count"),},{html:a("nav-messages-other","new-messages-other-count"),}],});this.center.on("afterlayout",function(){Ext.fly("navigation-panel").on({click:{stopEvent:true,fn:function(h,g){c(g)}}});Ext.fly("item-nav-documents").set({qtip:Lars.main.north.new_documents});Ext.fly("item-nav-messages").set({qtip:Lars.main.north.new_mymessages});Ext.fly("item-nav-messages-other").set({qtip:Lars.main.north.new_messages});Ext.fly("item-nav-documents_other").set({qtip:Lars.main.north.new_documents_others});Ext.fly("item-nav-messages-documents").set({qtip:Lars.main.north.new_messages_packages})},this);var c=function(h){var g=Ext.getCmp("lars-desktop-grid");switch(h.id){case"item-nav-documents":result="lars-desktop-grid";g.store.filterBy(function(m){var k=m.data.OBJ_TYPE;var o=new RegExp("LARS_MESSAGES","gi");var j=m.data.is_home;var l=new RegExp("true","gi");return !o.test(k)&&l.test(j)},this);break;case"item-nav-messages":result=larsDesktopId+"discussion-grid";break;case"item-nav-messages-other":result="lars-desktop-grid";g.store.filterBy(function(m){var k=m.data.OBJ_TYPE;var o=new RegExp("LARS_MESSAGES","gi");var j=m.data.is_home;var l=new RegExp("true","gi");return o.test(k)&&!l.test(j)},this);break;case"item-nav-documents_other":result="lars-desktop-grid";g.store.filterBy(function(m){var k=m.data.OBJ_TYPE;var o=new RegExp("LARS_MESSAGES","gi");var j=m.data.is_home;var l=new RegExp("true","gi");return !o.test(k)&&!l.test(j)},this);break;case"item-nav-messages-documents":result="lars-desktop-grid";g.store.filterBy(function(m){var k=m.data.OBJ_TYPE;var o=new RegExp("LARS_MESSAGES","gi");var j=m.data.is_home;var l=new RegExp("true","gi");return o.test(k)&&l.test(j)},this);break;case"item-nav-help":result="about-panel";break;default:result=null}if(result!=null){Ext.getCmp("lars-desktop-tab-panel").setActiveTab(result)}};this.top=new Ext.Panel({id:"navigation-top",height:70,region:"north",html:'<div id="mynavbla" style="text-align: right;"><table width="100%"><tr id="nav-top"><td width="60%" ><img style="margin-top: 0px;" src="moko/img/MokoDesk_shadow.png" /></td><td width="40%"><span id="login-info">'+loginInfo+"</span></td></tr></table></div>",border:false,bodyStyle:"background:transparent;padding:0px;"});this.all=new Ext.Panel({split:true,frame:false,layout:"border",region:"center",margins:"0 0 0 0",frame:false,bodyBorder:false,viewConfig:{forceFit:true},id:"lars-desktop-center-center",margins:"0 0 0 0",items:[this.center,this.top]});this.all.on("resize",function(h,g,j){},this);LarsDesktopNorth.superclass.constructor.call(this,{split:true,frame:false,layout:"border",height:150,region:"north",margins:"0 0 0 0",frame:false,bodyBorder:false,viewConfig:{forceFit:true},id:"lars-desktop-north",margins:"0 0 0 0",items:[this.all]})};Ext.extend(LarsDesktopNorth,Ext.Panel,{});LarsDesktopNotes=function(){this.content=new Ext.form.HtmlEditor({id:"desktop-calendar-form",name:Lars.main.notes,value:"",tbar:"",toolbar:"",enableAlignments:false,enableColors:false,hideLabel:true,enableFormat:false,enableFont:false,enableFontSize:false,enableLinks:false,enableLists:false,enableSourceEdit:false});this.getContent();this.form=new Ext.FormPanel({labelAlign:"top",buttonAlign:"center",layout:"fit",items:[this.content],buttons:[{align:"center",text:Lars.button_save,cls:"x-btn button",ctCls:"x-btn button",handler:this.onAdd,scope:this}],border:false,bodyStyle:"background:transparent;padding:4px 4px 0 0;"});LarsDesktopNotes.superclass.constructor.call(this,{collapsible:true,width:200,split:true,region:"east",layout:"fit",id:"lars-desktop-calendar",margins:"0 0 0 0",viewConfig:{forceFit:true},autoScroll:true,buttonAlign:"center",items:this.form})};Ext.extend(LarsDesktopNotes,Ext.Panel,{onAdd:function(){var a=this.content.getValue();Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"saveAppointments",content:a},failure:function(c,g){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection)},success:function(c,g){var h=Ext.util.JSON.decode(c.responseText);if(h.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,h.name?h.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+h.name,4)}}})},getContent:function(){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"getAppointments"},failure:function(a,c){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection)},success:function(a,c){var g=Ext.util.JSON.decode(a.responseText);if(g.success==true){this.content.setValue(g.content)}else{this.content.setValue(Lars.msg.failure_connection)}}})}});LarsDocumentsSubscriptionGrid=function(){this.primaryKey="id";this.larsObj=Ext.data.Record.create([{name:"id"},{name:"name",type:"string"},{name:"checked",type:"boolean"}]);var c=new Ext.data.JsonReader({id:this.primaryKey},this.larsObj);var a=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"lars_json.php",method:"POST"}),baseParams:{task:"getDesktopAbo",id:"desktops"},reader:c});var h=Ext.form;var g=new Ext.grid.CheckColumn({header:Lars.main.document_subscription,dataIndex:"checked",fixed:true,width:200});this.cm=new Ext.grid.ColumnModel([{id:"id",header:"ID",dataIndex:this.primaryKey,width:20,readOnly:true,sortable:true,hidden:true},{header:Lars.main.group_or_user,dataIndex:"name",sortable:true},g]);LarsDocumentsSubscriptionGrid.superclass.constructor.call(this,{id:"lars-desktops12-grid",loadMask:{msg:Lars.msg.loading},iconCls:"table-go",region:"center",autoScroll:true,store:a,cm:this.cm,autoSizeColumns:true,frame:false,autoHeight:true,viewConfig:{forceFit:true},plugins:[g],stripeRows:true});this.on("afteredit",this.handleEdit,this)};Ext.extend(LarsDocumentsSubscriptionGrid,Ext.grid.EditorGridPanel,{updateDB:function(a){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"updateSubscription",key:this.primaryKey,keyValue:a.record.data.id,id:a.record.data.id,field:a.field,fieldValue:a.value,originalValue:a.record.modified},failure:function(c,g){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection);this.store.rejectChanges()},success:function(c,g){var h=Ext.util.JSON.decode(c.responseText);if(h.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,h.name?h.name:" ",3);this.store.commitChanges()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+h.name,4);this.store.rejectChanges()}}})},handleEdit:function(c){if(c){var a=c.field;this.updateDB(c)}else{Ext.Msg.alert(Lars.msg.failure_nothing_changed)}}});LarsDocumentsSubscriptionWindow=function(){LarsDocumentsSubscriptionWindow.superclass.constructor.call(this,{title:"Auswahl für die Anzeige neuer Dokumente und Nachrichten",layout:"border",iconCls:"doc-others",id:"desktops4-win",width:600,height:400,resizable:true,plain:true,modal:true,autoScroll:true,buttons:[{text:Lars.closedown,handler:function(){this.destroy()},scope:this}],items:new LarsDocumentsSubscriptionGrid()})};Ext.extend(LarsDocumentsSubscriptionWindow,Ext.Window,{});LarsGroupsAddUserWindow=function(){this.name=new Ext.form.Field({id:"user-name",fieldLabel:Lars.dialog.groups.username,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsGroupsAddUserWindow.superclass.constructor.call(this,{title:Lars.dialog.groups.add_to_favorites,iconCls:"folder-add",id:"add-user-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.groups.add_user,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsGroupsAddUserWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"addBuddy",id:0,name:a},success:function(c,g){var h=Ext.util.JSON.decode(c.responseText);if(h.success){Ext.getCmp("lars-rights-grid").store.load();Ext.ux.ToastLars.msg(Lars.dialog.groups.user_added_msg,h.name?h.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.dialog.groups.user_not_added_msg,h.name?h.name:" ",3)}this.destroy()},failure:function(c,g){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});LarsGroupsDesktopsGrid=function(){this.primaryKey="id";this.larsObj=Ext.data.Record.create([{name:"id"},{name:"text",type:"string"},{name:"ABO",type:"boolean"}]);var c=new Ext.data.JsonReader({root:"groups",id:this.primaryKey},this.larsObj);var a=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"lars_json.php",method:"POST"}),baseParams:{task:"getAboGroups",id:"desktops"},reader:c});var h=Ext.form;var g=new Ext.grid.CheckColumn({header:Lars.dialog.groups.embed_desktop,dataIndex:"ABO",fixed:true,width:155});this.cm=new Ext.grid.ColumnModel([{id:"id",header:"ID",dataIndex:this.primaryKey,width:20,readOnly:true,sortable:true,hidden:true},{header:Lars.dialog.groups.groupname,dataIndex:"text",sortable:true},g]);LarsGroupsDesktopsGrid.superclass.constructor.call(this,{id:"lars-desktops-grid",loadMask:{msg:Lars.msg.loading},iconCls:"table-go",region:"center",autoScroll:true,store:a,cm:this.cm,autoSizeColumns:true,frame:false,autoHeight:true,viewConfig:{forceFit:true},plugins:[g],stripeRows:true});this.on("afteredit",this.handleEdit,this)};Ext.extend(LarsGroupsDesktopsGrid,Ext.grid.EditorGridPanel,{updateDB:function(a){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"updateGroup",key:this.primaryKey,keyValue:a.record.data.id,id:a.record.data.id,field:a.field,fieldValue:a.value,originalValue:a.record.modified},failure:function(c,g){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection);this.store.rejectChanges()},success:function(c,g){var h=Ext.util.JSON.decode(c.responseText);if(h.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,h.name?h.name:" ",3);this.store.commitChanges()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+h.name,4);this.store.rejectChanges()}}})},handleEdit:function(c){if(c){var a=c.field;this.updateDB(c)}else{Ext.Msg.alert(Lars.msg.failure_nothing_changed)}}});LarsGroupsDesktopsGridWindow=function(){LarsGroupsDesktopsGridWindow.superclass.constructor.call(this,{title:Lars.dialog.groups.other_dektops,layout:"border",iconCls:"comment-edit",id:"desktops-win",width:600,height:400,resizable:true,plain:true,modal:true,autoScroll:true,buttons:[{text:Lars.closedown,handler:function(){this.destroy()},scope:this}],items:new LarsGroupsDesktopsGrid()})};Ext.extend(LarsGroupsDesktopsGridWindow,Ext.Window,{});LarsGroupsRightsGrid=function(){this.primaryKey="id";this.tbar=[{iconCls:"group-add",text:Lars.dialog.groups.add_group,tooltip:Lars.dialog.groups.add_group_tt,handler:function(){this.win=new LarsGroupsTreePanelWindow();this.win.show();this.win.setZIndex(90001)},scope:this},{iconCls:"user-add",text:Lars.dialog.groups.add_user,tooltip:Lars.dialog.groups.add_user_tt,handler:function(){this.win=new LarsGroupsAddUserWindow();this.win.show();this.win.setZIndex(90001)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.hideHeaders=false;this.view.renderHeaders();Ext.getCmp("lars-rights-grid").store.load()},scope:this}];this.larsObj=Ext.data.Record.create([{name:"id"},{name:"group",type:"string"},{name:"fav",type:"string"},{name:"text",type:"string"},{name:"ACCESS_READ",type:"boolean"},{name:"ACCESS_WRITE",type:"boolean"}]);var g=new Ext.data.JsonReader({root:"groups",id:this.primaryKey},this.larsObj);var c=new Ext.data.GroupingStore({proxy:new Ext.data.HttpProxy({url:"lars_json.php",method:"POST"}),baseParams:{task:"getRightsGroups",id:"rights"},reader:g,sortInfo:{field:"text",direction:"ASC"},groupField:"group"});var j=Ext.form;var h=new Ext.grid.CheckColumn({header:Lars.dialog.groups.allow_read,dataIndex:"ACCESS_READ",width:130});var a=new Ext.grid.CheckColumn({header:Lars.dialog.groups.allow_all,dataIndex:"ACCESS_WRITE",width:100});this.cm=new Ext.grid.ColumnModel([{id:"id",header:"ID",dataIndex:this.primaryKey,width:20,readOnly:true,sortable:true,hidden:true},{header:Lars.dialog.groups.groupname,width:290,dataIndex:"text",sortable:true},h,a,{header:Lars.dialog.groups.favorite,width:50,dataIndex:"fav",sortable:true},{header:Lars.dialog.groups.type,width:50,hidden:true,dataIndex:"group",sortable:true}]);LarsGroupsRightsGrid.superclass.constructor.call(this,{id:"lars-rights-grid",loadMask:{msg:Lars.msg.loading},iconCls:"table-go",region:"center",autoScroll:true,store:c,cm:this.cm,autoSizeColumns:true,frame:false,autoHeight:true,viewConfig:{forceFit:true},plugins:[h,a],stripeRows:true,view:new Ext.grid.GroupingView({groupTextTpl:"{text}"})});this.on("afteredit",this.handleEdit,this);this.on("rowcontextmenu",this.onContextClick,this)};Ext.extend(LarsGroupsRightsGrid,Ext.grid.EditorGridPanel,{updateDB:function(a){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"updateGroup",key:this.primaryKey,keyValue:a.record.data.id,id:a.record.data.id,field:a.field,fieldValue:a.value,originalValue:a.record.modified},failure:function(c,g){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection);this.store.rejectChanges()},success:function(c,g){var h=Ext.util.JSON.decode(c.responseText);if(h.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,h.name?h.name:" ",3);this.store.commitChanges()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+h.name,4);this.store.rejectChanges()}}})},handleEdit:function(c){if(c){var a=c.field;this.updateDB(c)}else{Ext.Msg.alert(Lars.msg.failure_nothing_changed)}},onContextClick:function(g,c,h){var j=g.getView().getRow(c);var a=g.store.getAt(c);this.menu=new Ext.menu.Menu({id:"grid-ctx"});if(a.data.fav=="Ja"){this.menu.add({iconCls:"delete",text:Lars.del,tooltip:Lars.dialog.groups.del_group_user_1,handler:function(){Ext.Msg.confirm(Lars.dialog.groups.del_group_user_2,Lars.dialog.groups.del_group_user_3,function(k){if(k=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:a.id,name:a.text,task:"deleteBuddy"},success:function(l,m){var o=Ext.util.JSON.decode(l.responseText);if(o.success){g.store.remove(a)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,"---",5)}}})}},this)},scope:this})}this.menu.on("hide",this.onContextHide,this);h.stopEvent();if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}this.ctxRow=this.view.getRow(c);this.ctxRecord=this.store.getAt(c);Ext.fly(this.ctxRow).addClass("x-node-ctx");this.menu.showAt(h.getXY());this.menu.el.setZIndex(90010)},onContextHide:function(){if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}},afterRender:function(){LarsGroupsRightsGrid.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsGroupsRightsGridWindow=function(){LarsGroupsRightsGridWindow.superclass.constructor.call(this,{title:Lars.dialog.groups.define_rights,layout:"border",iconCls:"comment-edit",id:"rights-win",width:600,height:400,resizable:true,plain:true,modal:true,autoScroll:true,buttons:[{text:Lars.closedown,handler:function(){this.destroy()},scope:this}],items:new LarsGroupsRightsGrid()})};Ext.extend(LarsGroupsRightsGridWindow,Ext.Window,{});LarsGroupsTreePanel=function(){LarsGroupsTreePanel.superclass.constructor.call(this,{id:"groups-tree",region:"center",rootVisible:false,autoScroll:true,root:new Ext.tree.AsyncTreeNode({text:Lars.dialog.groups.root_directory,loader:new Ext.tree.TreeLoader({dataUrl:"lars_json.php",baseParams:{task:"getGroupsTree"}}),id:"source"})});this.on({click:{fn:function(g,c){g.toggle()}}});this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})});this.on("contextmenu",this.onContextMenu,this)};Ext.extend(LarsGroupsTreePanel,Ext.tree.TreePanel,{onContextMenu:function(a,c){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{text:Lars.dialog.groups.add_group_to_list,id:"add2312341",handler:function(){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"addBuddy",id:a.id},failure:function(g,h){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection)},success:function(g,h){var j=Ext.util.JSON.decode(g.responseText);if(j.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,j.name?j.name:" ",3);Ext.getCmp("lars-rights-grid").store.load()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+j.name,4)}}})},iconCls:"group-add"}]});this.menu.showAt(c.getXY());this.menu.el.setZIndex(90010)},afterRender:function(){LarsTreePanelFolderLinks.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsGroupsTreePanelWindow=function(){this.treePanel=new LarsGroupsTreePanel();LarsGroupsTreePanelWindow.superclass.constructor.call(this,{title:Lars.dialog.groups.add_group_to_selection,layout:"border",iconCls:"group",id:"",width:200,height:300,autoScroll:true,items:this.treePanel})};Ext.extend(LarsGroupsTreePanelWindow,Ext.Window,{});LarsHtmlMessageWindow=function(a){this.node=a;this.name=new Ext.form.Field({id:"message-name",fieldLabel:Lars.dialog.htmlMessage.fieldLabel,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsHtmlMessageWindow.superclass.constructor.call(this,{title:Lars.dialog.htmlMessage.title,iconCls:"comments-add",id:"add-message-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.htmlMessage.button_create,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsHtmlMessageWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newMessage",name:a,id:this.node.id},success:function(g,h){var k=Ext.util.JSON.decode(g.responseText);if(k.success==true){var c=k.newID;var j={};j.parentElement=this.node.parentElement;j.id=c;j.text=a;Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",j)}else{if(k.success==false){Ext.ux.ToastLars.msg(Lars.msg.failure,k.name,5)}}this.destroy()},failure:function(c,g){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});LarsHTMLPanel=function(a){this.tbar=[{iconCls:"editPage",text:Lars.edit,tooltip:Lars.edit,handler:function(){Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",this.node)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:this.reload,scope:this}];LarsHTMLPanel.superclass.constructor.call(this,a);b=this.getTopToolbar();this.addEvents({schuelerEditTab:true});this.addEvents({refreshTab:true})};Ext.extend(LarsHTMLPanel,Ext.Panel,{reload:function(){Ext.Ajax.request({scope:this,waitMsg:Lars.msg.loading_data,url:"lars_json.php",params:{id:this.node.id,task:"view"},success:function(a,c){var g=Ext.util.JSON.decode(a.responseText);if(g.success){this.html=g.html;this.body.dom.innerHTML=g.html}else{Ext.ux.ToastLars.msg(Lars.msg.failure,"",2)}},failure:function(a,c){Ext.ux.ToastLars.msg(Lars.msg.failure,"",2)}})}});LarsIFramePanel=function(a){this.tbar=[{iconCls:"editPage",text:"",tooltip:Lars.edit,handler:function(){Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",this.node,this.color)},scope:this},{iconCls:"printer",text:"",tooltip:Lars.printer,handler:function(){this.iframe.print()},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.setSrc()},scope:this}];LarsIFramePanel.superclass.constructor.call(this,a);this.addEvents({schuelerEditTab:true})};Ext.extend(LarsIFramePanel,Ext.ux.ManagedIframePanel,{});LarsIFramePanelInternet=function(a){this.tbar=[{iconCls:"printer",text:"",tooltip:Lars.printer,handler:function(){this.iframe.print()},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.setSrc()},scope:this}];LarsIFramePanelInternet.superclass.constructor.call(this,a);this.addEvents({schuelerEditTab:true})};Ext.extend(LarsIFramePanelInternet,Ext.ux.ManagedIframePanel,{});LarsJoinChat=function(){this.name=new Ext.form.Field({id:"environment-id",fieldLabel:"ID des Raumes",width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsJoinChat.superclass.constructor.call(this,{title:"Chat beitreten",iconCls:"webcam",id:"join-chat-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:"ok",handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this)};Ext.extend(LarsJoinChat,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();reloadVoiceChat(a);this.destroy()}});MainPanel=function(){MainPanel.superclass.constructor.call(this,{id:"main-tabs",activeTab:0,margins:"0 0 0 0",frame:false,bodyBorder:false,enableTabScroll:true,plain:true,resizeTabs:true,tabWidth:150,minTabWidth:120,enableTabScroll:true,plugins:new Ext.ux.TabCloseMenu()});this.on("schuelerEditTab",function(c,a){Ext.ux.ToastLars.msg(Lars.msg.loading,Lars.msg.loading_editor,2);this.openTabEdit(c,a)},this);this.on("viewTab",function(c,a){this.openTabView(c,a)});this.on("viewIFrameTab",function(c,a){this.openTabIFrame(c,a)});this.on("viewIFrameTabAll",function(c,a){this.openTabIFrameInternet(c,a)});this.on("viewPackage",this.openTabPackage,this)};Ext.extend(MainPanel,Ext.TabPanel,{openTabEdit:function(g,c){var h;var a;var j=g.id;if(!(h=this.getItem(j+"editorTab"))){Ext.Ajax.request({scope:this,url:"lars_edit.php",params:{id:g.id,task:"edit"},success:function(k,m){var l=Ext.util.JSON.decode(k.responseText);a=l.html;if(l.success){h=new Ext.form.FormPanel({iconCls:"editPage",layout:"fit",title:'<span style="color: '+c+';">'+g.text+"</span>",tabTip:g.text,id:j+"editorTab",height:500,minWidth:200,minHeight:200,autoScroll:true,bodyBorder:false,border:false,resizable:true,frame:false,closable:true,buttons:[{text:Lars.button_save,handler:function(){tinyMCE.triggerSave();var p=Ext.getCmp(g.id+"editor");p.syncValue();h.getForm().submit({url:"lars_edit.php",params:{id:j,task:"saveEdit",origValue:a?a:""},method:"POST",success:function(r,t){var v=Ext.util.JSON.decode(t.response.responseText);a=h.getForm().getValues().textField;if(v.success){Ext.ux.ToastLars.msg(Lars.msg_success_new_content,"",2);Ext.getCmp(j+"editor").destroy();Ext.getCmp("main-tabs").remove(Ext.getCmp(j+"editorTab"));if(Ext.getCmp(j+"view")){Ext.getCmp(j+"view").reload()}var s={};if(g.parentElement.match("Grid")){s=Ext.getCmp(g.parentElement);var q=s.store.getById(g.id);var w=(s.store.indexOf(q)>=0)?s.getView().getRow(s.store.indexOf(q)):s.store.indexOf(q);if(w<0){s.store.load()}else{if(Ext.fly(w).hasClass("x-grid3-row-expanded")&&q.iFrame){q.iFrame.setSrc()}}}if(g.parentElement.match("discussion-grid")){s=Ext.getCmp(g.parentElement);s.store.load({params:Ext.apply({},s.store.lastOptions.params)})}}else{Ext.ux.ToastLars.msg(Lars.msg.failure,v.message,5)}},failure:function(q,r){var t=Ext.util.JSON.decode(r.response.responseText);Ext.ux.ToastLars.msg(Lars.msg.failure,t.message?t.message:"",5);a=h.getForm().getValues().textField;if(t.changed){var s=t.oldName;var v=t.oldId;this.winChanged=new LarsNewHtmlTextWindowNew(v,s,a);this.winChanged.show();this.winChanged.setZIndex(90003);Ext.getCmp(j+"editor").destroy();Ext.getCmp("main-tabs").remove(Ext.getCmp(j+"editorTab"));Ext.Msg.show({title:Lars.main.editor.save_info_1,msg:Lars.main.editor.save_info_2,buttons:Ext.Msg.OK,animEl:"elId",icon:Ext.MessageBox.INFO})}}})}},{text:Lars.closedown,handler:function(){Ext.getCmp(j+"editor").destroy();Ext.getCmp("main-tabs").remove(Ext.getCmp(j+"editorTab"))}}],items:[{xtype:"tinymce",width:300,height:500,id:g.id+"editor",name:"textField",tinymceSettings:{theme:"advanced",language:Lars.tinyMceLanguage,verify_html:true,content_css:"moko/css/tinyMCE.css",plugins:"table,emotions,searchreplace,asciimath,asciisvg,media,paste,bid_tooltip",theme_advanced_buttons1:"fontselect,formatselect,fontsizeselect,bold,italic,underline,sub,sup,separator,justifyleft,justifycenter,justifyright,separator,forecolor,backcolor",theme_advanced_buttons2:"hr,charmap,separator,emotions,image,media,link,unlink,separator,bullist,numlist,tablecontrols,visualaid,asciimath,asciimathcharmap,asciisvg",theme_advanced_buttons3:"undo,redo,separator,pasteword,separator,removeformat,separator,search,separator,fullscreen,code,bid_tooltip",theme_advanced_fonts:"Times New Roman=times new roman,times,serif;Arial=arial,helvetica,sans-serif;Courier New=courier new,courier,monospace;AkrutiKndPadmini=Akpdmi-n",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"none",theme_advanced_resizing:false,convert_urls:false,AScgiloc:"http://www.bid-owl.de/tools/asciisvg/svgimg.php",ASdloc:"http://www.bid-owl.de/mokodesk/moko/tiny_mce/plugins/asciisvg/js/d.svg",extended_valid_elements:"embed[*]",file_browser_callback:function o(r,p,q,s){this.win=new LarsBrowseFileWindow(s.document.forms[0].elements[r],g);this.win.show();this.win.setZIndex(90010)}},value:l.html}]});Ext.getCmp("main-tabs").add(h);Ext.getCmp("main-tabs").setActiveTab(h)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.editor.document_not_available,5)}},failure:function(k,l){Ext.ux.ToastLars.msg(Lars.msg.failure,"")}})}this.setActiveTab(h)},openTabIFrame:function(g,a){var c;var h=g.id+"viewIFrame";if(!(c=this.getItem(h))){c=new LarsIFramePanel({id:"desktop-grid-row-"+g.id,defaultSrc:"tools/get.php?object="+g.id,loadMask:true,id:h,iconCls:g.attributes.iconCls||"page",title:'<span style="color: '+a+';">'+g.text+"</span>",listeners:{domready:LarsViewer.LinkInterceptorIFrame},tabTip:g.text,layout:"fit",closable:true,autoScroll:true,node:g});Ext.getCmp("main-tabs").add(c);Ext.getCmp("main-tabs").setActiveTab(c)}this.setActiveTab(c)},openTabIFrameInternet:function(g,a){var c;var h=g.id+"viewIFrame";if(!(c=this.getItem(h))){c=new LarsIFramePanelInternet({id:"desktop-grid-row-"+g.id,defaultSrc:g.attributes.lars_ref,loadMask:true,id:h,edit:false,iconCls:g.attributes.iconCls,title:'<span style="color: '+a+';">'+g.text+"</span>",listeners:{domready:LarsViewer.LinkInterceptorIFrame},tabTip:g.text,layout:"fit",closable:true,autoScroll:true,node:g});c.on("documentloaded",function(r){var p=r.getWindow();for(var l=0,k=p.frames.length;l<k;l++){var o=p.frames[l].document.getElementsByTagName("a");for(var m=0,q=o[m],j=o.length;m<j;m++){q=o[m];q.target="_blank";q.addEventListener("click",function(v,s){if(v.currentTarget.href.match(window.location.host)){c.setSrc(v.currentTarget.href)}else{LarsViewer.QuestionBrowserOpen(v)}v.preventDefault();return false},false)}}});Ext.getCmp("main-tabs").add(c);Ext.getCmp("main-tabs").setActiveTab(c)}this.setActiveTab(c)},openTabView:function(h,c){var g;var a;var j=h.id+"view";if(!(g=this.getItem(j))){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:h.id,task:"view"},success:function(k,l){var m=Ext.util.JSON.decode(k.responseText);if(m.success){g=new LarsHTMLPanel({id:j,iconCls:"page",title:'<span style="color: '+c+';">'+h.text+"</span>",tabTip:h.text,bodyStyle:"padding:5px 5px 5px 5px; background:white; border-style:solid;border-color:#99bbe8;border-width:1;",layout:"fit",closable:true,html:m.html,autoScroll:true,node:h});Ext.getCmp("main-tabs").add(g);Ext.getCmp("main-tabs").setActiveTab(g)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.editor.document_not_available,5)}},failure:function(k,l){Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.editor.document_not_available,5)}})}this.setActiveTab(g)},openTabPackage:function(h){var g;var a;var k=h.id;if(!(g=this.getItem("package-panel-"+k))){if(h.ownerTree&&h.isLeaf()==false&&h.ownerTree.id.match("topics")&&!h.attributes.iconCls.match("report")){var j=new LarsPackageDiscussion(h,{region:"center",collapsible:false},h.attributes.groupColor);g=new LarsPackagePanel({iconCls:h.attributes.iconCls,border:false,bodyBorder:false,closable:true,id:"discussion-"+k,listeners:LarsViewer.LinkInterceptor,node:h,tabTip:h.text+Lars.main.grid.package_append,groupColor:h.attributes.groupColor,title:'<span style="color: '+h.attributes.groupColor+';">'+h.text+"</span>",layout:"border",margins:"0 0 0 0",items:[j]});j.startAutoUpdate("d"+h.id);j.on("destroy",function(){j.stopAutoUpdate("d"+h.id)},this)}else{var j=new LarsPackageDiscussion(h,{region:"south",collapsible:true},h.attributes.groupColor);var c=new PackageGrid(h,h.attributes.groupColor);c.getView().getRowClass=LarsGridConfig.applyRowClass;g=new LarsPackagePanel({defaults:{collapsible:true,split:true},iconCls:h.attributes.iconCls,border:false,bodyBorder:false,closable:true,id:"package-panel-"+h.id,node:h,listeners:LarsViewer.LinkInterceptor,node:h,tabTip:h.text+Lars.main.grid.package_append,groupColor:h.attributes.groupColor,title:'<span style="color: '+h.attributes.groupColor+';">'+h.text+"</span>",layout:"border",margins:"0 0 0 0",items:[c,j]});c.startAutoUpdate("p"+h.id);j.startAutoUpdate("d"+h.id);j.on("destroy",function(){j.stopAutoUpdate("d"+h.id)},this);c.on("destroy",function(){c.stopAutoUpdate("p"+h.id)},this)}g.on("activate",function(l){if(!l.node){return}var r=Ext.getCmp("topics-tree");var p=Ext.getCmp("topics-tree-t");var o=Ext.getCmp("resources-tree");var m=p.getNodeById(l.node.id);m=m?m:r.getNodeById(l.node.id);if(m){p.expandPath(m.getPath());r.expandPath(m.getPath());m.select()}var q=o.getNodeById(l.node.id);if(!q){return}o.expandPath(q.getPath());q.select()});Ext.getCmp("main-tabs").add(g);Ext.getCmp("main-tabs").setActiveTab(g);Ext.getCmp("main-tabs").syncSize();if(!(h.ownerTree&&h.isLeaf()==false&&h.ownerTree.id.match("topics"))){c.store.load({callback:function(){for(var l=0;l<c.store.data.length;l++){if(c.store.data.items[l].data.LARS_TYPE=="1"||c.store.data.items[l].data.LARS_TYPE=="3"){c.expander.expandRow.defer(500,c.expander,[l])}}}})}j.store.load()}this.setActiveTab(g)},archivePackage:function(a){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:a.id,task:"archivePackage"},success:function(c,g){var h=Ext.util.JSON.decode(c.responseText);if(h.success){Ext.ux.ToastLars.msg(Lars.main.tree.package_moved_msg,"",5)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.package_moved_msg,5)}}})},archiveGroupPackage:function(c,a){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:c.id,task:"archiveGroupPackage",archiveId:a},success:function(g,h){var j=Ext.util.JSON.decode(g.responseText);if(j.success){Ext.ux.ToastLars.msg(Lars.main.tree.package_moved_msg,"",5)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.package_moved_msg,5)}}})}});LarsMessageWindow=function(a,c){this.editMessage=false;switch(c){case"newMessage":this.editMessage=false;this.folderId=a.id;break;case"editMessage":this.editMessage=true;break}this.primaryKey="id";this.record=a;this.name=new Ext.form.Field({id:"message-name",fieldLabel:Lars.dialog.htmlMessage.fieldLabel,value:(this.editMessage)?this.record.data.OBJ_DESC:"",width:350,msgTarget:"under"});this.message=new Ext.form.HtmlEditor({id:"message-text",fieldLabel:Lars.dialog.comment.fieldLabel,height:200,width:350,value:(this.editMessage)?this.record.data.LARS_CONTENT:"",msgTarget:"under",enableAlignments:false,enableColors:false,enableFont:false,enableLinks:false,enableSourceEdit:false});this.form=new Ext.FormPanel({labelAlign:"top",items:[this.name,this.message],border:false,bodyStyle:"background:transparent;padding:10px;"});if(this.editMessage){this.title=Lars.dialog.comment.title_1+a.data.OBJ_DESC+Lars.dialog.comment.title_2}else{this.title=Lars.main.discussion.write_new_message_tt}LarsMessageWindow.superclass.constructor.call(this,{title:this.title,iconCls:"comment-edit",id:"change-com-win",autoHeight:true,width:400,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.main.discussion.save_send,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsMessageWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();var c=this.message.getValue();Ext.Ajax.request({url:"lars_edit.php",params:{task:"saveTitleAndTextMessage",name:a,textField:c,id:this.record.id},success:function(g,h){var j=Ext.util.JSON.decode(g.responseText);if(j.success==true){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.success,j.name,5)}else{if(j.success==false){Ext.ux.ToastLars.msg(Lars.msg.failure,j.name,5)}}},failure:function(g,h){Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});LarsHtmlTextWindow=function(a){this.node=a;this.name=new Ext.form.Field({id:"message-name",fieldLabel:Lars.dialog.htmlText.fieldLabel,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsHtmlTextWindow.superclass.constructor.call(this,{title:Lars.dialog.htmlText.title_1+" "+a.text+" "+Lars.dialog.htmlText.title_2,iconCls:"page-text",id:"add-message-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.htmlText.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsHtmlTextWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newText",name:a,id:this.node.id},success:function(g,h){var k=Ext.util.JSON.decode(g.responseText);if(k.success==true){var c=k.newID;var j={};j.parentElement=this.node.parentElement;j.id=c;j.text=a;Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",j)}else{if(k.success==false){Ext.ux.ToastLars.msg(Lars.msg.failure,k.name,5)}}this.destroy()},failure:function(c,g){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});LarsNewHtmlTextWindowNew=function(c,g,a){this.messageId=c;this.oldName=g;this.htmlValue=a;this.name=new Ext.form.Field({id:"message-name",fieldLabel:Lars.dialog.htmlTextNew.fieldLabel,width:450,value:g,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsNewHtmlTextWindowNew.superclass.constructor.call(this,{title:Lars.dialog.htmlTextNew.title,iconCls:"page-text",id:"add-message-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.htmlTextNew.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsNewHtmlTextWindowNew,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"lars_edit.php",method:"POST",params:{task:"saveEditNewName",textField:this.htmlValue,name:a,id:this.messageId},success:function(c,g){var h=Ext.util.JSON.decode(c.responseText);if(h.success==true){}else{if(h.success==false){Ext.ux.ToastLars.msg(Lars.msg.failure,h.name,5)}}this.destroy()},failure:function(c,g){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});Ext.override(Ext.grid.GridPanel,{startAutoUpdate:function(a){larsUpdater.add(a,this,this.store)},stopAutoUpdate:function(a){larsUpdater.remove(a)}});Ext.util.JSON.decode=function(json){if(!json){return{success:false,name:Lars.msg.failure_no_response}}if(json[0]=="{"){return eval("("+json+")")}else{return{success:false,name:Lars.msg.failure_no_response}}};Ext.decode=Ext.util.JSON.decode;Ext.override(Ext.Window,{focusFirst:function(a){a.form.items.items[0].focus(false,100)}});Ext.override(Ext.grid.GridView,{focusRow:function(a){}});Ext.override(Ext.grid.GroupingView,{focusRow:function(a){}});LarsPackageDiscussion=function(h,g,c){this.groupColor=c;this.primaryKey="id";h.parentElement=h.id+"discussion-grid";this.expander=new Ext.grid.RowExpander({tpl:new Ext.Template("<p> {LARS_CONTENT}</p>"),lazyRender:true,enableCaching:false});var a=new Ext.data.JsonReader({root:"messages",id:this.primaryKey},[this.primaryKey,"OBJ_NAME","OBJ_DESC","OBJ_AUTHOR",{name:"DOC_LAST_MODIFIED",type:"date",dateFormat:"U"},"LARS_CONTENT"]);this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"lars_json.php",method:"POST"}),baseParams:{task:"getDiscussion",id:h.id,start:0,limit:10},reader:a,sortInfo:{field:"DOC_LAST_MODIFIED",direction:"DESC"}});this.store.setDefaultSort("DOC_LAST_MODIFIED","DESC");this.store.on("load",function(){if(this.store.data.length<1&&this.collapsible){this.collapse()}},this);if(!h.isLeaf()){this.bbar=new Ext.PagingToolbar({pageSize:10,store:this.store,displayInfo:true})}this.tbar=[{iconCls:"comments-add",text:Lars.main.discussion.write_new_message,tooltip:Lars.main.discussion.write_new_message_tt,handler:function(){h.parentElement=h.id+"discussion-grid";this.win=new LarsMessageWindow(h,"newMessage");this.win.show();this.win.setZIndex(90000)},scope:this},"->","-",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.store.load()},scope:this},"-"];this.columns=[{id:"Titel",header:Lars.main.discussion.columns.title,dataIndex:"OBJ_DESC",sortable:true,width:300,renderer:this.formatTitle},{header:Lars.main.discussion.columns.author,dataIndex:"OBJ_AUTHOR",width:100,hidden:true,sortable:true},{header:Lars.main.discussion.columns.content,dataIndex:"LARS_CONTENT",width:10,hidden:true,sortable:false},{id:"last",header:Lars.main.discussion.columns.date,dataIndex:"DOC_LAST_MODIFIED",width:150,renderer:this.formatDate,sortable:true}];LarsPackageDiscussion.superclass.constructor.call(this,{title:Lars.main.discussion.title,iconCls:"comments",region:g.region,collapsible:g.collapsible,hideHeaders:true,collapseMode:"mini",header:false,height:200,border:false,id:h.id+"discussion-grid",loadMask:{msg:Lars.main.discussion.loadMask},sm:new Ext.grid.RowSelectionModel({singleSelect:true}),viewConfig:{forceFit:true,enableRowBody:true,showPreview:true,showAll:true,getRowClass:this.applyRowClass}});this.addEvents({schuelerEditTab:true});this.on("rowcontextmenu",this.onContextClick,this);this.on("rowdblclick",this.showContentWindow,this)};Ext.extend(LarsPackageDiscussion,Ext.grid.GridPanel,{onContextClick:function(h,g,j){var k=h.getView().getRow(g);var a=h.store.getAt(g);var c={};c.id=a.data.id;c.text=a.data.OBJ_DESC;c.parentElement=h.id;this.menu=new Ext.menu.Menu({id:"grid-discussion-ctx",items:[{iconCls:"editPage",text:Lars.main.discussion.menu.edit,tooltip:Lars.main.discussion.menu.edit_tt,handler:function(){this.win=new LarsMessageWindow(a,"editMessage");this.win.show();this.win.setZIndex(90000)},scope:this},{iconCls:"delete",text:Lars.main.discussion.menu.del,tooltip:Lars.main.discussion.menu.del_tt,handler:function(){Ext.Msg.confirm(Lars.main.discussion.menu.del_confirm_1,Lars.main.discussion.menu.del_confirm_2+" "+this.ctxRecord.data.OBJ_DESC+"",function(l){if(l=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:this.ctxRecord.id,name:this.ctxRecord.data.OBJ_NAME,task:"deleteItem"},success:function(m,o){var p=Ext.util.JSON.decode(m.responseText);if(p.success){this.store.remove(this.store.getById(this.ctxRecord.id));Ext.ux.ToastLars.msg(Lars.main.discussion.menu.del_success_msg,"",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.discussion.menu.del_failure_msg,5)}}})}},this)},scope:this}]});this.menu.on("hide",this.onContextHide,this);j.stopEvent();if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}this.ctxRow=this.view.getRow(g);this.ctxRecord=this.store.getAt(g);Ext.fly(this.ctxRow).addClass("x-node-ctx");this.menu.showAt(j.getXY())},onContextHide:function(){if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}},togglePreview:function(a){this.view.showPreview=a;this.view.refresh()},applyRowClass:function(a,j,h,g){if(this.showPreview){var c=Ext.util.Format;if(this.showAll){h.body='<font size="2"><p>'+a.data.LARS_CONTENT+"</p>"}else{h.body="<p>"+c.ellipsis(c.stripTags(a.data.LARS_CONTENT),300)+"</p>"}return"x-grid3-row-expanded"}return"x-grid3-row-collapsed"},formatDate:function(c){if(!c){return""}var a=new Date();var h=a.clearTime(true);var g=c.clearTime(true).getTime();if(g==h.getTime()){return Lars.today+" "+c.dateFormat("d-m-Y H:i")}h=h.add("d",-6);if(h.getTime()<=g){return c.dateFormat("d-m-Y H:i")}return c.dateFormat("d-m-Y H:i")},formatTitle:function(c,g,a){return String.format('<div class="comment"><b>{0}</b> <span class="author">'+Lars.main.discussion.created_of+" {1}</span></div>",c,a.data.OBJ_AUTHOR,a.id,a.data.forumid)}});var larsObj;PackageGrid=function(c,l){this.groupColor=l;this.primaryKey="id";c.parentElement=c.id+"Grid";this.stateAction=new Ext.Action({tooltip:Lars.main.grid.change_state,iconCls:this.getStateIcon(c.attributes.state),menu:[{iconCls:"redIcon",group:"lars-state",text:Lars.main.grid.state_0,handler:function(){this.changeState(0,this.node)},scope:this},{iconCls:"orangeIcon",group:"lars-state",text:Lars.main.grid.state_1,handler:function(){this.changeState(1,this.node)},scope:this},{iconCls:"greenIcon",group:"lars-state",text:Lars.main.grid.state_2,handler:function(){this.changeState(2,this.node)},scope:this},{iconCls:"blueIcon",group:"lars-state",text:Lars.main.grid.state_3,handler:function(){this.changeState(3,this.node)},scope:this},{iconCls:"yellowIcon",group:"lars-state",text:Lars.main.grid.state_4,handler:function(){this.changeState(4,this.node)},scope:this}],scope:this});if(c.isLeaf()){this.tobar=new Ext.Toolbar([this.stateAction,{iconCls:"add-page",text:Lars.main.grid.add_document_title,tooltip:Lars.main.grid.add_document,handler:function(){this.win=new UploadWindow(this.node);this.win.show();this.win.setZIndex(90000)},scope:this},{iconCls:"add-page-white",text:Lars.main.grid.add_text_title,tooltip:Lars.main.grid.add_text,handler:function(){this.win=new LarsHtmlTextWindow(this.node);this.win.show();this.win.setZIndex(90000)},scope:this},{text:"Dokument hier einfügen",id:"add23141494723340233",handler:function(){if(!fileRecordToCopy){Ext.Msg.alert("Fehler","Kein Dokument in der Zwischenablage vorhanden")}else{Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2_document+fileRecordToCopy.data.OBJ_DESC+Lars.main.tree.copy_confirm_3_in_package,function(m){if(m=="yes"){Ext.Ajax.request({url:"lars_json.php",params:{task:"copyFile",sourceId:fileRecordToCopy.id,targetId:c.id},success:function(o,p){var q=Ext.util.JSON.decode(o.responseText);if(q.success){Ext.ux.ToastLars.msg(Lars.msg.success_copy,q.name?q.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,q.name?q.name:" ",5)}},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})}},this)}},iconCls:"paste"},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.getView().getRowClass=LarsGridConfig.applyRowClassWithout;Ext.getCmp(this.node.id+"Grid").store.load()},scope:this}])}else{this.tobar=new Ext.Toolbar([{iconCls:"add-page",text:Lars.main.grid.add_document_title,tooltip:Lars.main.grid.add_document,handler:function(){this.win=new UploadWindow(this.node);this.win.show();this.win.setZIndex(90000)},scope:this},{iconCls:"add-page-white",text:Lars.main.grid.add_text_title,tooltip:Lars.main.grid.add_text,handler:function(){this.win=new LarsHtmlTextWindow(this.node);this.win.show();this.win.setZIndex(90000)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.getView().getRowClass=LarsGridConfig.applyRowClassWithout;Ext.getCmp(this.node.id+"Grid").store.load()},scope:this}])}this.actionPackage=new Ext.ux.grid.RowActions({header:"",actions:[{iconIndex:"action1",qtipIndex:"qtip1",hideIndex:"hide1",iconCls:"whiteIcon",tooltip:""},{iconIndex:"action3",qtipIndex:"qtip3",hideIndex:"hide3",iconCls:"whiteIcon",tooltip:""},{iconIndex:"action4",qtipIndex:"qtip4",hideIndex:"hide4",iconCls:"whiteIcon",tooltip:""}]});this.actionPackage.on("action",this.onRowActionPackage,this);this.actionFileType=new Ext.ux.grid.RowActions({header:"",actions:[{iconIndex:"action0",qtipIndex:"qtip0",iconCls:"file-dll"},{iconCls:"whiteIcon",qtipIndex:"qtip2",hideIndex:"hide2",iconIndex:"action2"},{iconCls:"whiteIcon",qtipIndex:"qtip5",hideIndex:"hide5",iconIndex:"action5"}]});this.expander=new Ext.grid.RowExpander({tpl:'<div id="desktop-grid-{id}"></div>'});this.expander.on("expand",function(q,p,m,r){switch(p.data.action2){case"page-save":var o=new Ext.Panel({id:"desktop-grid-row-"+p.data.id,html:p.data.LARS_CONTENT,autoHeight:true,renderTo:"desktop-grid-"+p.data.id});p.panel=o;break;case"editPage":case"pdf":var o=new Ext.ux.ManagedIframePanel({id:"desktop-grid-row-"+p.data.id,defaultSrc:"tools/get.php?object="+p.data.id,listeners:{domready:LarsViewer.LinkInterceptorIFrame},loadMask:true,renderTo:"desktop-grid-"+p.data.id});o.on("documentloaded",function(){var s=o.getFrame();s.setHeight(s.getBody().scrollHeight)},this);p.iFrame=o;break}});this.larsObj=LarsGridConfig.larsObj;var k=LarsGridConfig.dsState;var a=LarsGridConfig.dsType;var h=new Ext.data.JsonReader({root:"ass",id:this.primaryKey},this.larsObj);var g=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"lars_json.php",method:"POST"}),baseParams:{task:"getAssignment",id:c.id},reader:h,sortInfo:{field:"OBJ_DESC",direction:"ASC"}});var j=Ext.form;this.cm=new Ext.grid.ColumnModel([this.expander,{id:"ID",header:"ID",dataIndex:"id",width:20,readOnly:true,sortable:true,hidden:true},this.actionFileType,{header:Lars.main.grid.columns.desc,dataIndex:"OBJ_DESC",sortable:true,width:150,editor:new j.TextField({allowBlank:false})},{header:Lars.main.grid.columns.content,dataIndex:"LARS_CONTENT",readOnly:true,hidden:true,width:40},{header:Lars.main.grid.columns.type,dataIndex:"type",hidden:true,sortable:true,readOnly:true,width:60},{header:Lars.main.grid.columns.type,dataIndex:"LARS_TYPE",sortable:true,fixed:true,width:70,editor:new Ext.form.ComboBox({mode:"local",editable:false,triggerAction:"all",store:a,displayField:"text",valueField:"id",valueNotFoundText:Lars.main.grid.columns.valueNotFoundText}),renderer:function(o,m){if(m){m.css=LarsGridConfig.renderCell(o)}record=a.getById(o);if(record){return record.data.text}else{return""}}},{header:Lars.main.grid.columns.last_changed,dataIndex:"OBJ_LAST_CHANGED",width:70,fixed:true,readOnly:true,sortable:true,renderer:function(m){return m.dateFormat("d-m-Y")}},{header:Lars.main.grid.columns.created,dataIndex:"OBJ_CREATION_TIME",readOnly:true,width:100,hidden:true,sortable:true,renderer:function(m){return m.dateFormat("d-m-Y H:i")}},this.actionPackage]);PackageGrid.superclass.constructor.call(this,{region:"center",loadMask:{msg:Lars.main.grid.loadMask},id:c.id+"Grid",boder:false,bodyBorder:false,node:c,disableSelection:true,closable:true,autoScroll:true,hideHeaders:true,cm:this.cm,store:g,autoSizeColumns:true,autoExpandColumn:"ID",frame:false,tbar:this.tobar,view:new Ext.grid.GridView({forceFit:true,enableRowBody:true,emptyText:Lars.main.grid.emptyText,deferEmptyText:true}),clicksToEdit:1,stripeRows:true,plugins:[this.expander,this.actionPackage,this.actionFileType]});this.addEvents({schuelerEditTab:true});this.addEvents({refreshTab:true});this.on("rowcontextmenu",this.onContextClick,this);this.on("afteredit",this.handleEdit,this);this.on("beforeadd",this.handleEdit,this);this.on("render",function(m){var o=new Ext.dd.DropZone(m.getEl(),{ddGroup:"TreeDD",onDragDrop:function(p,q){alert("dragdrop")},notifyDrop:function(p,v,s){var r=v.getTarget("div.x-panel");var q=this.id;Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:s.node.id,folderId:q,task:"copyIntoPackage"},success:function(t,w){var x=Ext.util.JSON.decode(t.responseText);if(x.success){Ext.getCmp(q).store.load()}}})},onContainerOver:function(q,r,p){if(p.node.leaf!=true){return this.dropNotAllowed}else{return this.dropAllowed}}})})};Ext.extend(PackageGrid,Ext.grid.EditorGridPanel,{onContextClick:function(h,g,j){var k=h.getView().getRow(g);var a=h.store.getAt(g);var c={};c.id=a.data.id;c.text=a.data.OBJ_NAME;c.parentElement=h.id;this.menu=new Ext.menu.Menu({id:"grid-ctx"});if(a.data.action2=="editPage"){this.menu.add({iconCls:"editPage",text:Lars.edit,tooltip:Lars.edit,handler:function(){Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",c,this.groupColor)},scope:this})}this.menu.add({iconCls:"delete",text:Lars.del,tooltip:Lars.main.grid.del_tt,handler:function(){Ext.Msg.confirm(Lars.main.grid.del_confirm,c.text+"",function(l){if(l=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:c.id,name:c.text,task:"deleteItem"},success:function(m,o){var p=Ext.util.JSON.decode(m.responseText);if(p.success){h.store.remove(a)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed,5)}}})}},this)},scope:this});this.menu.add({iconCls:"copy",text:Lars.copy_document,tooltip:Lars.copy_document_tt,handler:function(){fileRecordToCopy=a;packageNodeToCopy=false},scope:this});if(fileRecordToCopy){this.menu.add({text:Lars.main.tree.copy_document,id:"add2314194723340233",handler:function(){Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2_document+fileRecordToCopy.data.OBJ_DESC+Lars.main.tree.copy_confirm_3_in_package,function(l){if(l=="yes"){Ext.Ajax.request({url:"lars_json.php",params:{task:"copyFile",sourceId:fileRecordToCopy.id,targetId:c.id},success:function(m,o){var p=Ext.util.JSON.decode(m.responseText);if(p.success){Ext.ux.ToastLars.msg(Lars.msg.success_copy,p.name?p.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,p.name?p.name:" ",5)}},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})}},this)},iconCls:"paste"})}this.menu.on("hide",this.onContextHide,this);j.stopEvent();if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}this.ctxRow=this.view.getRow(g);this.ctxRecord=this.store.getAt(g);Ext.fly(this.ctxRow).addClass("x-node-ctx");this.menu.showAt(j.getXY())},onContextHide:function(){if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}},updateDB:function(a){if(a.value instanceof Date){var c=a.value.format("U")}else{var c=a.value}Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"update",key:this.primaryKey,keyValue:a.record.data.id,id:a.record.data.id,field:a.field,fieldValue:c,originalValue:a.record.modified},failure:function(g,h){Ext.MessageBox.alert(Lars.msg.failure,Lars.msg.failure_response);this.store.rejectChanges()},success:function(g,h){var j=Ext.util.JSON.decode(g.responseText);if(j.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,j.name?j.name:" ",3);if(a.field=="OBJ_DESC"){a.record.data.OBJ_NAME=c}this.store.commitChanges()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+"<br>"+j.name,4);this.store.rejectChanges()}}})},handleEdit:function(c){if(c){var a=c.field;this.updateDB(c)}else{Ext.Msg.alert(Lars.msg.failure_nothing_changed)}},onRowActionPackage:function(g,k,h,j,c){var a={id:k.data.id,text:k.data.OBJ_DESC,parentElement:this.node.parentElement,attributes:{iconCls:h,lars_ref:k.data.LARS_CONTENT}};switch(h){case"cut":copy3(k.data.OBJ_PATH);break;case"add-page":this.win=new UploadWindow(this.node,2,k.data.OBJ_DESC+Lars.main.grid.solution);this.win.show();this.win.setZIndex(90000);break;case"icon-edit-record":break;case"comment-edit":case"comments":this.win=new LarsCommentWindow(k);this.win.show();this.win.setZIndex(90000);break;case"file-link":if(a.attributes.lars_ref.match(window.location.host)){LarsViewer.QuestionTabOrBrowserOpen(a)}else{LarsViewer.QuestionBrowserOpenNode(a)}break;case"page-save":Ext.Msg.confirm(Lars.main.grid.open_link_1,Lars.main.grid.open_link_2,function(l){if(l=="yes"){window.open("tools/get.php?object="+k.data.id)}},this);break;case"editPage":Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",a,this.groupColor);break;case"tab-go":Ext.getCmp("main-tabs").fireEvent("viewIFrameTab",a,this.groupColor);break;case"delete":Ext.Msg.confirm(Lars.main.grid.del_confirm,k.data.OBJ_DESC+"",function(l){if(l=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:k.id,name:k.data.OBJ_NAME,task:"deleteItem"},success:function(m,o){var p=Ext.util.JSON.decode(m.responseText);if(p.success){g.store.remove(k)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.grid.del_failure_msg,5)}}})}},this);break}if(h.match("file")){switch(k.data.action2){case"file-gif":case"file-tiff":case"file-jpeg":case"file-jpg":case"file-png":case"file-bmp":case"editPage":this.expander.toggleRow(j);break;case"page-save":switch(h){case"file-gif":case"file-tiff":case"file-jpeg":case"file-jpg":case"file-png":case"file-bmp":this.expander.toggleRow(j);break;default:a.attributes={lars_ref:"tools/get.php?object="+a.id,iconCls:a.attributes.iconCls};LarsViewer.QuestionBrowserOpenPDF(a);break}break}}},changeState:function(c,a){if(c==4&&isTeacher!=1){Ext.Msg.alert("",Lars.main.grid.only_teacher)}else{Ext.Ajax.request({url:"lars_json.php",params:{task:"changeState",id:a.id,state:c},success:function(){var g=Ext.getCmp("topics-tree");var j=Ext.getCmp("topics-tree-t");var h=Ext.getCmp("resources-tree");if(g.getNodeById(a.id)){g.root.reload(g.onManualReload)}if(j.getNodeById(a.id)){j.root.reload(j.onManualReload)}this.stateAction.items[0].setIconClass(this.getStateIcon(c))},scope:this})}},getStateIcon:function(a){switch(parseInt(a)){case 0:return"redIcon";break;case 1:return"orangeIcon";break;case 2:return"greenIcon";break;case 3:return"blueIcon";break;case 4:return"yellowIcon";break;default:return"whiteIcon";break}},getStateText:function(a){switch(parseInt(a)){case 0:return Lars.main.grid.state_0;break;case 1:return Lars.main.grid.state_1;break;case 2:return Lars.main.grid.state_2;break;case 3:return Lars.main.grid.state_3;break;case 4:return Lars.main.grid.state_4;break}}});LarsPackagePanel=function(a){LarsPackagePanel.superclass.constructor.call(this,a);this.addEvents({schuelerEditTab:true})};Ext.extend(LarsPackagePanel,Ext.Panel,{});LarsResourcesAddNameWindow=function(a){this.node=a;this.name=new Ext.form.Field({id:"folder-link-name",fieldLabel:Lars.dialog.resourcesAddName.fieldLabel,width:450,value:this.node.attributes.text,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onSet,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsResourcesAddNameWindow.superclass.constructor.call(this,{title:Lars.dialog.resourcesAddName.title,iconCls:"folder-add",id:"add-folder-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.resourcesAddName.button_add,handler:this.onSet,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsResourcesAddNameWindow,Ext.Window,{onSet:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({scope:this,url:"lars_folder.php",params:{node:this.node.id,name:a,task:"setResource"},success:function(c,g){var h=Ext.util.JSON.decode(c.responseText);if(h.success){Ext.ux.ToastLars.msg(Lars.dialog.resourcesAddName.msg_success,"",5);Ext.getCmp("resources-tree").root.reload();this.destroy()}},failure:function(c,g){Ext.ux.ToastLars.msg(Lars.msg.failure,"",5);this.destroy()}})}});LarsResourcesAddWindow=function(a){this.node=a;this.treePanel=new LarsTreePanel(a);LarsResourcesAddWindow.superclass.constructor.call(this,{title:Lars.dialog.resourcesAdd,layout:"border",iconCls:"folder",id:"resources-explorer-win",width:250,height:350,autoScroll:true,items:this.treePanel})};Ext.extend(LarsResourcesAddWindow,Ext.Window,{});LarsResourcesPanel=function(a,h,c,g,j){LarsResourcesPanel.superclass.constructor.call(this,{defaults:{collapsible:true,split:true},layout:"fit",region:h,id:c,title:j,split:true,width:200,minSize:175,maxSize:400,height:200,minHeight:150,header:true,floating:true,shadow:true,border:true,frame:true,hideBorders:true,margins:g,cmargins:"8 0 8 0",layoutConfig:{animate:true},items:[a],tools:[{id:"right",handler:function(){Ext.getCmp("main-east").collapse(true)}}]})};Ext.extend(LarsResourcesPanel,Ext.Panel,{afterRender:function(){LarsResourcesPanel.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsSetPackageRightsWindow=function(a){this.node=a;this.lehrer=new Ext.form.Radio({id:"leherer",name:"rights",fieldLabel:Lars.dialog.rights.fieldLabel_1,width:20});this.schueler=new Ext.form.Radio({id:"schueler",name:"rights",fieldLabel:Lars.dialog.rights.fieldLabel_2,width:20});this.form=new Ext.FormPanel({labelAlign:"right",keys:LarsViewer.getKeyMap(this.onSet,this),items:[this.lehrer,this.schueler],labelWidth:200,border:false,autoWidth:true,bodyStyle:"background:transparent;padding:10px;"});LarsSetPackageRightsWindow.superclass.constructor.call(this,{title:Lars.dialog.rights.title_1+" "+a.text+" "+Lars.dialog.rights.title_2,iconCls:"key",id:"change-rights-win",autoHeight:true,width:300,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.rights.button_set,handler:this.onSet,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.addEvents({add:true})};Ext.extend(LarsSetPackageRightsWindow,Ext.Window,{onSet:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var c=this.lehrer.getValue();var a=this.schueler.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"changeRights",id:this.node.id,schueler:a,lehrer:c},success:this.refreshFolder,scope:this})},refreshFolder:function(a,c){Ext.getCmp("topics-tree").root.reload();this.destroy()}});LarsTopicsPanel=function(){LarsTopicsPanel.superclass.constructor.call(this,{region:"center",id:"west-panel",title:"",split:true,layout:"accordion",floating:true,shadow:true,shim:false,frame:true,header:true,minSize:175,maxSize:400,margins:"0 4 8 8",cmargins:"8 0 8 8",items:[new LarsTreePanelDesk(),new LarsTreePanelDeskOthers()]})};Ext.extend(LarsTopicsPanel,Ext.Panel,{});LarsTopicsPanelTeacher=function(){LarsTopicsPanelTeacher.superclass.constructor.call(this,{region:"center",id:"west-panel",title:"",split:true,layout:"accordion",floating:true,shadow:true,shim:false,frame:true,header:true,minSize:175,maxSize:400,margins:"0 4 8 8",cmargins:"8 0 8 8",items:[new LarsTreePanelDeskOthers(),new LarsTreePanelDesk()]});this.on("contextmenu",this.onContextMenu,this);this.on("nodeDrop",function(a,g,h,c){},this)};Ext.extend(LarsTopicsPanelTeacher,Ext.Panel,{afterRender:function(){LarsTopicsPanelTeacher.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsTreePanel=function(a){this.node={};if(a){this.node.id=a.id}else{this.node.id="root"}LarsTreePanel.superclass.constructor.call(this,{id:"tree",region:"center",width:225,minSize:175,maxSize:400,margins:"0 0 0 0",ddGroup:"resources",border:false,frame:true,collapseMode:"mini",enableDD:true,dropConfig:{appendOnly:true},rootVisible:false,lines:true,split:true,autoScroll:true,containerScroll:true,root:new Ext.tree.TreeNode({text:Lars.main.tree.main_directory,expanded:true})});this.root.appendChild([new Ext.tree.AsyncTreeNode({text:Lars.main.tree.root_directory,loader:new Ext.tree.TreeLoader({dataUrl:"lars_folder.php",baseParams:{task:"getRoot"}}),id:"root"}),new Ext.tree.AsyncTreeNode({text:Lars.main.tree.home_directory,loader:new Ext.tree.TreeLoader({dataUrl:"lars_folder.php",baseParams:{task:"getRoot"}}),id:"home"})]);new Ext.tree.TreeSorter(this,{folderSort:true});this.expand();this.on("contextmenu",this.onContextMenu,this);this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})});this.on({click:{fn:function(g,c){g.toggle()}}})};Ext.extend(LarsTreePanel,Ext.tree.TreePanel,{onContextMenu:function(a,c){if(!a.isLeaf()){this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.main.tree.add_to_resources,id:"add13452",handler:function(){this.win=new LarsResourcesAddNameWindow(a);this.win.show();this.win.setZIndex(90000)},iconCls:"link-add"}]});this.menu.showAt(c.getXY());this.menu.el.setZIndex(90010)}},afterRender:function(){LarsTreePanel.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsTreePanelArchiv=function(a){LarsTreePanelArchiv.superclass.constructor.call(this,{id:"tree-"+a.id,region:"center",rootVisible:false,autoScroll:true,border:false,root:new Ext.tree.AsyncTreeNode({text:"Hauptverzeichnis",loader:new Ext.tree.TreeLoader({loadMask:{msg:Lars.msg.loading_folder},dataUrl:"lars_json.php",baseParams:{task:"getSchuelerTopics",folder:a.id}}),id:"source"})});this.expand();this.addEvents({schuelerEditTab:true});this.on("contextmenu",this.onContextMenu,this);this.on({dblClick:{fn:function(g,c){if(g.isLeaf()){Ext.getCmp("main-tabs").fireEvent("viewPackage",g)}}}});this.on({click:{fn:function(g,c){g.toggle()}}});this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})})};Ext.extend(LarsTreePanelArchiv,Ext.tree.TreePanel,{onContextMenu:function(a,c){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{text:Lars.del,id:"add1345752443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_confirm_object,function(g){if(g=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){a.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}}})}},this)},iconCls:"delete"}]});if(a.isLeaf()){this.menu.add({text:Lars.main.tree.show_package,id:"add2311",handler:function(){Ext.getCmp("main-tabs").fireEvent("viewPackage",a)},iconCls:"table-go"},{text:Lars.main.tree.copy_package,id:"add2334514561",handler:function(){packageNodeToCopy=a},iconCls:"copy"})}this.menu.showAt(c.getXY());this.menu.el.setZIndex(90010)},afterRender:function(){LarsTreePanelArchiv.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsTreePanelArchivWindow=function(a){this.node=a;this.treePanel=new LarsTreePanelArchiv(a);new Ext.tree.TreeSorter(this.treePanel,{folderSort:true,dir:"desc"});LarsTreePanelArchivWindow.superclass.constructor.call(this,{title:a.text,layout:"border",iconCls:"folder-archiv",id:"custom-tree-win-"+a.id,width:200,height:300,autoScroll:true,items:this.treePanel});this.addEvents({add:true})};Ext.extend(LarsTreePanelArchivWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newAssignment",id:this.node.id,name:a},success:this.refreshFolder,scope:this})},refreshFolder:function(a,c){Ext.getCmp("topics-tree").root.reload();this.destroy()}});LarsTreePanelBin=function(){LarsTreePanelBin.superclass.constructor.call(this,{id:"bin-tree",region:"center",margins:"0 0 0 0",bodyBorder:false,shim:false,rootVisible:false,lines:true,autoScroll:true,containerScroll:true,root:new Ext.tree.AsyncTreeNode({text:Lars.main.bin.trash,loader:new Ext.tree.TreeLoader({dataUrl:"lars_folder.php",baseParams:{task:"getResources"}}),id:larsBinId}),tbar:[{iconCls:"bin-empty",text:"",tooltip:Lars.main.bin.empty_trash,handler:function(){Ext.Msg.confirm(Lars.main.bin.trash,Lars.main.bin.empty_trash_confirm,function(a){if(a=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"emptyTrash"},success:function(c,g){var h=Ext.util.JSON.decode(c.responseText);if(h.success){Ext.ux.ToastLars.msg(Lars.msg.success,"",2);Ext.getCmp("bin-tree").root.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,"",2)}}})}},this)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){Ext.getCmp("bin-tree").root.reload()}}]});new Ext.tree.TreeSorter(this,{folderSort:true});this.expand();this.getSelectionModel().on({selectionchange:function(c,a){if(a){this.fireEvent("projectselect",a.attributes.id)}},scope:this});this.addEvents({schuelerEditTab:true});this.on("contextmenu",this.onContextMenu,this);this.on({dblClick:{fn:function(g,c){if(g.isLeaf()){window.open(g.attributes.lars_ref)}}}});this.on({click:{fn:function(g,c){g.toggle()}}});this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})})};Ext.extend(LarsTreePanelBin,Ext.tree.TreePanel,{onContextMenu:function(a,c){this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.main.bin.delete_irrevocable,id:"add132443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.bin.delete_confirm,function(g){if(g=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:a.id,name:a.attributes.origName,task:"deleteItem",irrevocable:"1"},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){a.parentNode.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.bin.del_failure_msg,5)}}})}},this)},iconCls:"delete"}]});if(a.isLeaf()){this.menu.add({iconCls:"copy",text:Lars.copy_document,tooltip:Lars.copy_document_tt,handler:function(h,g,k,j){a.data={OBJ_DESC:a.text};fileRecordToCopy=a;packageNodeToCopy=false},scope:this})}else{if(a.attributes.iconCls!="folder-link"){this.menu.add({text:Lars.main.tree.copy_folder,id:"add2334d54514561",handler:function(){fileRecordToCopy=false;packageNodeToCopy=a},iconCls:"copy"})}}this.menu.showAt(c.getXY());this.menu.el.setZIndex(90010)},afterRender:function(){LarsTreePanelBin.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsTreePanelBinWindow=function(){this.treePanel=new LarsTreePanelBin();LarsTreePanelBinWindow.superclass.constructor.call(this,{title:Lars.main.bin.trash,layout:"border",iconCls:"bin",id:"bin-explorer-win",width:250,height:350,autoScroll:true,items:this.treePanel})};Ext.extend(LarsTreePanelBinWindow,Ext.Window,{});LarsTreePanelDesk=function(){LarsTreePanelDesk.superclass.constructor.call(this,{id:"topics-tree",iconCls:"application-home",rootVisible:false,animate:false,autoScroll:true,title:Lars.main.tree_title,root:new Ext.tree.AsyncTreeNode({text:Lars.main.tree.main_directory,loader:new Ext.tree.TreeLoader({dataUrl:"lars_json.php",baseParams:{task:"getSchuelerTopics"}}),id:"source"}),tbar:[{iconCls:"folder-add",text:"",tooltip:Lars.main.tree.add_folder,handler:function(){this.win=new LarsAddFolderWindow();this.win.show();this.win.setZIndex(90000)},scope:this},{iconCls:"folder-archiv",text:"",tooltip:Lars.main.tree.show_archive,handler:function(){var a={text:"Archiv",id:larsArchivId};if(this.win=Ext.getCmp("custom-tree-win-"+a.id)){this.win.show();this.win.setZIndex(90000)}else{this.win=new LarsTreePanelArchivWindow(a);this.win.show();this.win.setZIndex(90000)}},scope:this},{iconCls:"bin",text:"",tooltip:Lars.main.tree.show_bin,handler:function(){if(this.win=Ext.getCmp("bin-explorer-win")){this.win.show();this.win.setZIndex(90000)}else{this.win=new LarsTreePanelBinWindow();this.win.show();this.win.setZIndex(90000)}},scope:this},{iconCls:"key",text:"",tooltip:Lars.main.tree.set_rights,handler:function(){this.win=new LarsGroupsRightsGridWindow();this.win.show();this.win.setZIndex(90000);this.win.items.items[0].store.load()},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){Ext.getCmp("topics-tree").root.reload()},scope:this}]});new Ext.tree.TreeSorter(this,{folderSort:true});var c=this.root;this.root.on("load",function(){this.onReload(this.root)},this);this.expand();this.getSelectionModel().on({selectionchange:function(g,a){if(a){this.fireEvent("projectselect",a.attributes.id)}},scope:this});this.addEvents({schuelerEditTab:true});this.on("contextmenu",this.onContextMenu,this);this.on({dblClick:{fn:function(h,g){if(h.attributes.iconCls=="folder-archiv"){if(this.win=Ext.getCmp("custom-tree-win-"+h.id)){this.win.setZIndex(90000)}else{this.win=new LarsTreePanelArchivWindow(h);this.win.show();this.win.setZIndex(90000)}}else{Ext.getCmp("main-tabs").fireEvent("viewPackage",h)}}}});this.on({click:{fn:function(h,g){h.toggle()}}});this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})})};Ext.extend(LarsTreePanelDesk,Ext.tree.TreePanel,{onContextMenu:function(a,c){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[]});if(a.attributes.iconCls=="folder-archiv"){this.menu.add({text:Lars.main.tree.show_archive,id:"add2311",handler:function(){if(this.win=Ext.getCmp("custom-tree-win-"+a.id)){this.win.setZIndex(90000)}else{this.win=new LarsTreePanelArchivWindow(a);this.win.show();this.win.setZIndex(90000)}},iconCls:"folder-archiv"})}else{if(a.isLeaf()){this.menu.add({text:Lars.main.tree.show_package,id:"add2311",handler:function(){Ext.getCmp("main-tabs").fireEvent("viewPackage",a)},iconCls:"table-go"},{text:Lars.main.tree.copy_package,id:"add2334514561",handler:function(){packageNodeToCopy=a},iconCls:"copy"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.del,id:"add132443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_confirm_package,function(g){if(g=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){var l=a.id;if(Ext.getCmp(l)){Ext.getCmp("main-tabs").remove(Ext.getCmp(l))}a.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.del_failure_msg,5)}}})}},this)},iconCls:"delete"});if(parseInt(a.attributes.state)==4){this.menu.add({iconCls:"database-save",text:Lars.main.tree.move_to_archive,tooltip:Lars.main.tree.move_to_archive_tt,id:"add232453",handler:function(){Ext.getCmp("main-tabs").archivePackage(a);this.root.reload()},scope:this})}}else{this.menu.add({text:Lars.main.tree.add_package,id:"add34",handler:function(){this.win=new AssignmentWindow(a);this.win.show();this.win.setZIndex(90000)},iconCls:"folder-add"},{text:Lars.main.tree.open_learn_process,id:"add23141",handler:function(){Ext.getCmp("topics-tree").el.mask(Lars.msg.loading,"x-mask-loading");Ext.Ajax.request({url:"lars_json.php",params:{task:"getLernstand",id:a.id},success:function(g,j){var k=Ext.util.JSON.decode(g.responseText);htmlValue=k.html;if(k.success){var h={id:k.id,text:k.text};Ext.getCmp("main-tabs").fireEvent("viewTab",h)}Ext.getCmp("topics-tree").el.unmask()},failure:function(){this.el.unmask()},scope:this})},iconCls:"book-open"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.del,id:"add132443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.delete_folder_confirm,function(g){if(g=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){a.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.del_failure_msg_folder,5)}}})}},this)},iconCls:"delete"});if(packageNodeToCopy){if(packageNodeToCopy.attributes.iconCls.match("report")){this.menu.add({text:Lars.main.tree.insert_here,id:"add23141972340233",handler:function(){Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2+" ("+packageNodeToCopy.attributes.text+") "+Lars.main.tree.copy_confirm_3+" "+a.attributes.text+" "+Lars.main.tree.copy_confirm_4,function(g){if(g=="yes"){Ext.Ajax.request({url:"lars_json.php",params:{task:"copyFolder",sourceId:packageNodeToCopy.id,targetId:a.id},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){newId=k.newId;newNode=new Ext.tree.TreeNode({id:newId,text:packageNodeToCopy.text,iconCls:packageNodeToCopy.attributes.iconCls,ownerTree:a.ownerTree,state:0});newNode.attributes.state=0;newNode.attributes.origName=k.origName;a.appendChild(newNode);Ext.ux.ToastLars.msg(Lars.msg.success_copy,k.name?k.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,k.name?k.name:" ",5)}},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})}},this)},iconCls:"paste"})}}}}this.menu.showAt(c.getXY())},afterRender:function(){LarsTreePanelDesk.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})},onReload:function(a){a.cascade(function(){this.expand(false,false,function(g){g.collapse(false,false)})});var c=Ext.getCmp("main-tabs").getActiveTab();c.fireEvent("activate",c)}});LarsTreePanelDeskOthers=function(){LarsTreePanelDeskOthers.superclass.constructor.call(this,{id:"topics-tree-t",rootVisible:false,autoScroll:true,animate:false,iconCls:"folder-table",title:Lars.main.tree.desktops_title,enableDD:true,enableDrop:true,dropConfig:{appendOnly:true},root:new Ext.tree.AsyncTreeNode({text:"root",loader:new Ext.tree.TreeLoader({loadMask:{msg:Lars.main.tree.load_mask_desktops},timeout:90000,dataUrl:"lars_json.php",baseParams:{task:"getOwnStudents"}}),id:"source"}),tbar:[{iconCls:"user-add",text:"",tooltip:Lars.main.tree.embed_desktop,handler:function(){this.win=new LarsAddSchuelerWindow();this.win.show();this.win.setZIndex(90000)},scope:this},{iconCls:"group-add",text:"",tooltip:Lars.main.tree.embed_desktop_group,handler:function(){this.win=new LarsGroupsDesktopsGridWindow();this.win.show();this.win.setZIndex(90000);this.win.items.items[0].store.load()},scope:this},{iconCls:"doc-others",text:"",tooltip:"Auswahl für die Anzeige neuer Dokumente und Nachrichten",handler:function(){this.win=new LarsDocumentsSubscriptionWindow();this.win.show();this.win.setZIndex(90000);this.win.items.items[0].store.load()},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){Ext.getCmp("topics-tree-t").root.reload(this.onManualReload)},scope:this}]});new Ext.tree.TreeSorter(this,{folderSort:true,sortType:function(a){return a.attributes.iconCls+" "+Ext.util.Format.stripTags(a.attributes.text).toUpperCase()}});var c=this.root;this.root.on("load",function(){this.onReload(this.root)},this);this.expand();this.getSelectionModel().on({selectionchange:function(g,a){if(a){this.fireEvent("projectselect",a.attributes.id)}},scope:this});this.addEvents({schuelerEditTab:true});this.on("contextmenu",this.onContextMenu,this);this.on({dblClick:{fn:function(h,g){if(h.attributes.iconCls=="folder-archiv"){if(this.win=Ext.getCmp("custom-tree-win-"+h.id)){this.win.setZIndex(90000)}else{this.win=new LarsTreePanelArchivWindow(h);this.win.show();this.win.setZIndex(90000)}}else{Ext.getCmp("main-tabs").fireEvent("viewPackage",h)}}}});this.on({click:{fn:function(h,g){h.toggle()}}});this.on("beforenodedrop",function(a){var g=a.dropNode.leaf;var h=new Ext.tree.TreeNode(Ext.apply({},a.dropNode.attributes));a.dropNode=h;a.dropNode.attributes.iconCls="report";a.dropNode.attributes.groupColor=a.target.attributes.groupColor;a.dropNode.leaf=true;a.dropNode.attributes.leaf=true;if(g){Ext.Msg.confirm(Lars.main.tree.package_convert_confirm_1,Lars.main.tree.package_convert_confirm_2,function(j){if(j=="yes"){Ext.Ajax.request({url:"lars_json.php",params:{task:"copyFilePackage",sourceId:a.dropNode.id,targetId:a.target.id},success:function(k,l){var m=Ext.util.JSON.decode(k.responseText);htmlValue=m.html;if(m.success){Ext.ux.ToastLars.msg(Lars.msg.success_copy,m.name?m.name:" ",3);a.dropNode.id=m.newId;a.dropNode.attributes.id=m.newId}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,m.name?m.name:" ",3);a.dropNode.remove()}Ext.getCmp("topics-tree-t").el.unmask()},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3);Ext.getCmp("topics-tree-t").el.unmask()},scope:this})}},this)}else{if(a.dropNode.attributes.OBJ_TYPE!="ASSIGNMENT_PACKAGE"){a.cancel=true;Ext.Msg.show({title:Lars.msg.failure_copy,msg:Lars.main.tree.msg_failure_no_package,buttons:Ext.Msg.OK,animEl:"elId",icon:Ext.MessageBox.ERROR})}else{Ext.Ajax.request({url:"lars_json.php",params:{task:"copyPackage",sourceId:a.dropNode.id,targetId:a.target.id},success:function(j,k){var l=Ext.util.JSON.decode(j.responseText);if(l.success){Ext.ux.ToastLars.msg(Lars.msg.success_copy,l.name?l.name:" ",3);a.dropNode.id=l.newId;a.dropNode.attributes.id=l.newId;a.dropNode.attributes.origName=l.origName}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,l.name?l.name:" ",3);a.dropNode.remove()}Ext.getCmp("topics-tree-t").el.unmask()},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3);Ext.getCmp("topics-tree-t").el.unmask()},scope:this})}}},this);this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})})};Ext.extend(LarsTreePanelDeskOthers,Ext.tree.TreePanel,{onContextMenu:function(a,c){if(a.attributes.iconCls=="folder-archiv"){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{text:Lars.main.tree.show_archive,id:"add231156",handler:function(){if(this.win=Ext.getCmp("custom-tree-win-"+a.id)){this.win.setZIndex(90000)}else{this.win=new LarsTreePanelArchivWindow(a);this.win.show();this.win.setZIndex(90000)}},iconCls:"folder-archiv"}]})}else{if(a.isLeaf()){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{text:Lars.main.tree.show_package,id:"add2311",handler:function(){Ext.getCmp("main-tabs").fireEvent("viewPackage",a)},iconCls:"table-go"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.main.tree.copy_package,id:"add23345324514561",handler:function(){packageNodeToCopy=a},iconCls:"copy"},{text:Lars.del,id:"add1324423",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_confirm_package,function(g){if(g=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){var l=a.id;if(Ext.getCmp(l)){Ext.getCmp("main-tabs").remove(Ext.getCmp(l))}a.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}}})}},this)},iconCls:"delete"}]});if((parseInt(a.attributes.state)==4)&&a.attributes.archivable!="false"){this.menu.add({iconCls:"database-save",text:Lars.main.tree.move_to_archive,tooltip:Lars.main.tree.move_to_archive_tt,id:"add232453",handler:function(){Ext.getCmp("main-tabs").archiveGroupPackage(a,a.attributes.archiv);this.root.reload()},scope:this})}}else{if(a.attributes.iconCls!="user"&&a.attributes.iconCls!="group"){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{text:Lars.main.tree.add_package,id:"add34",handler:function(){this.win=new AssignmentWindow(a);this.win.show();this.win.setZIndex(90000);Ext.Msg.show({title:Lars.msg.attention,msg:Lars.main.tree.add_package_advice,buttons:Ext.Msg.OK,animEl:"elId",icon:Ext.MessageBox.INFO})},iconCls:"folder-add"},{text:Lars.main.tree.open_learn_process,id:"add231419703",handler:function(){Ext.getCmp("topics-tree-t").el.mask(Lars.msg.loading,"x-mask-loading");Ext.Ajax.request({url:"lars_json.php",params:{task:"getLernstand",id:a.id},success:function(g,j){var k=Ext.util.JSON.decode(g.responseText);htmlValue=k.html;if(k.success){var h={id:k.id,text:k.text};Ext.getCmp("main-tabs").fireEvent("viewTab",h)}Ext.getCmp("topics-tree-t").el.unmask()},failure:function(){Ext.getCmp("topics-tree-t").el.unmask()},scope:this})},iconCls:"book-open"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.del,id:"add132443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.delete_folder_confirm,function(g){if(g=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){a.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}}})}},this)},iconCls:"delete"}]});if(packageNodeToCopy){if(packageNodeToCopy.attributes.iconCls.match("report")){this.menu.add({text:Lars.main.tree.insert_here,id:"add23141970233",handler:function(){Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2+packageNodeToCopy.attributes.text+Lars.main.tree.copy_confirm_3+a.attributes.text+Lars.main.tree.copy_confirm_4+Lars.main.tree.copy_confirm_5,function(g){if(g=="yes"){Ext.ux.ToastLars.msg(Lars.main.tree.copy_progress_1,Lars.main.tree.copy_progress_2,5);Ext.Ajax.request({url:"lars_json.php",params:{task:"copyPackage",sourceId:packageNodeToCopy.id,targetId:a.id},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){newId=k.newId;origName=k.origName;newNode=new Ext.tree.TreeNode({leaf:true,id:newId,text:packageNodeToCopy.text,iconCls:"report",ownerTree:a.ownerTree,state:0});newNode.attributes.state=0;newNode.attributes.origName=origName;a.appendChild(newNode);Ext.ux.ToastLars.msg(Lars.msg.success_copy,k.name?k.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,k.name?k.name:" ",5)}},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})}},this)},iconCls:"paste"})}}}else{if(a.attributes.iconCls=="user"||a.attributes.iconCls=="group"){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{iconCls:"folder-add",text:Lars.main.tree.add_folder,handler:function(){if(this.win=Ext.getCmp("custom-tree-win-"+a.id)){this.win.setZIndex(90000)}else{this.win=new LarsAddFolderWindow(a);this.win.show();this.win.setZIndex(90000)}},scope:this},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.main.tree.del_desktop_link,id:"add23123413",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_desktop_link_confirm,function(g){if(g=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){a.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}}})}},this)},iconCls:"delete"}]})}}}}this.menu.showAt(c.getXY())},afterRender:function(){LarsTreePanelDeskOthers.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})},onReload:function(a){a.cascade(function(){this.expand(false,false,function(g){g.collapse(false,false)})});var c=Ext.getCmp("main-tabs").getActiveTab();c.fireEvent("activate",c)}});LarsTreePanelFolderLinks=function(){LarsTreePanelFolderLinks.superclass.constructor.call(this,{id:"resources-tree",margins:"0 0 0 0",enableDD:true,dropConfig:{appendOnly:true},bodyBorder:false,animate:false,shim:false,rootVisible:false,lines:true,autoScroll:true,containerScroll:true,root:new Ext.tree.AsyncTreeNode({text:"ressources",loader:new Ext.tree.TreeLoader({dataUrl:"lars_folder.php",baseParams:{task:"getResources"}}),id:"folder"}),tbar:[{iconCls:"folder-add",text:"",tooltip:Lars.main.tree.add_resource_folder,handler:function(){this.win=new LarsResourcesAddWindow();this.win.show();this.win.setZIndex(90000)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){Ext.getCmp("resources-tree").root.reload()}}]});new Ext.tree.TreeSorter(this,{folderSort:true});this.expand();this.getSelectionModel().on({selectionchange:function(c,a){if(a){this.fireEvent("projectselect",a.attributes.id)}},scope:this});this.addEvents({schuelerEditTab:true});this.on("contextmenu",this.onContextMenu,this);this.on({dblClick:{fn:function(g,c){if(g.isLeaf()&&g.attributes.iconCls!="link"){Ext.getCmp("main-tabs").fireEvent("viewIFrameTab",g)}else{if(g.attributes.iconCls=="report"){Ext.getCmp("main-tabs").fireEvent("viewPackage",g)}else{if(g.attributes.lars_ref.match(window.location.host)){LarsViewer.QuestionTabOrBrowserOpen(g)}else{if(g.attributes.lars_ref.length>5&&!g.attributes.lars_ref.match(window.location.host)){LarsViewer.QuestionBrowserOpenNode(g)}}}}}}});this.on({click:{fn:function(g,c){g.toggle()}}});this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})});this.on("render",function(a){var c=new Ext.dd.DropZone(a.getEl(),{ddGroup:"resources",onDragDrop:function(g,h){alert("dragdrop")},notifyDrop:function(g,k,j){var h=k.getTarget("div.x-panel");this.win=new LarsResourcesAddNameWindow(j.node);this.win.show();this.win.setZIndex(90000)},onContainerOver:function(h,j,g){return this.dropAllowed}})})};Ext.extend(LarsTreePanelFolderLinks,Ext.tree.TreePanel,{onContextMenu:function(a,c){if(a.isLeaf()){this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.main.tree.download,id:"add23121",handler:function(){LarsGridConfig.downloadFile("tools/get.php?object="+rec.data.id)},iconCls:"page-save"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.del,id:"add13243",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.grid.del_confirm,function(g){if(g=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){a.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}}})}},this)},iconCls:"delete"},{iconCls:"copy",text:Lars.copy_document,tooltip:Lars.copy_document_tt,handler:function(h,g,k,j){a.data={OBJ_DESC:a.text};fileRecordToCopy=a;packageNodeToCopy=false},scope:this}]});if(a.attributes.mimeType.match("text")){this.menu.add({text:Lars.main.show,id:"add2",handler:function(){Ext.getCmp("main-tabs").fireEvent("viewTab",a)},iconCls:"page"},{text:Lars.main.edit,id:"add1",handler:function(){Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",a)},iconCls:"editPage"})}}else{if(a.attributes.iconCls!="folder-link"){this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.main.show_as_package,id:"add23121",handler:function(){Ext.getCmp("main-tabs").fireEvent("viewPackage",a)},iconCls:"package-go"},{text:Lars.main.tree.add_package_here,id:"add3342344",handler:function(){this.win=new AssignmentWindow(a);this.win.show();this.win.setZIndex(90000)},iconCls:"report-add"},{iconCls:"folder-add",text:Lars.main.tree.add_folder_here,handler:function(){this.win=new LarsAddFolderLinksWindow(a.attributes.id);this.win.show();this.win.setZIndex(90000)},scope:this},{text:Lars.main.refresh_here,id:"add223453121",handler:function(){a.reload()},iconCls:"icon-refresh"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.main.tree.folder_properties,id:"add2314521",menu:{items:[{text:Lars.main.tree.folder_as_package,id:"add23516721",handler:function(){LarsGridConfig.changeAttribute(a.id,"OBJ_TYPE","ASSIGNMENT_PACKAGE",a.attributes.OBJ_TYPE);a.parentNode.reload()},iconCls:"report"},{text:Lars.main.tree.folder_as_normal,id:"add235121",handler:function(){LarsGridConfig.changeAttribute(a.id,"OBJ_TYPE","",a.attributes.OBJ_TYPE);a.parentNode.reload()},iconCls:"folder"}]},iconCls:"folder-config"},{text:Lars.del,id:"add13452443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.delete_folder_confirm,function(g){if(g=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){a.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}}})}},this)},iconCls:"delete"}]});if(a.attributes.OBJ_TYPE=="ASSIGNMENT_PACKAGE"){this.menu.add({text:Lars.main.tree.copy_package,id:"add2334d514561",handler:function(){fileRecordToCopy=false;packageNodeToCopy=a},iconCls:"copy"})}else{this.menu.add({text:Lars.main.tree.copy_folder,id:"add2334d54514561",handler:function(){fileRecordToCopy=false;packageNodeToCopy=a},iconCls:"copy"})}}else{this.menu=new Ext.menu.Menu({})}}if(a.attributes.iconCls=="folder-link"){this.menu.add({text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.main.tree.add_package_here,id:"add54634",handler:function(){this.win=new AssignmentWindow(a);this.win.show();this.win.setZIndex(90000)},iconCls:"report-add"},{iconCls:"folder-add",text:Lars.main.tree.add_folder_here,handler:function(){this.win=new LarsAddFolderLinksWindow(a.attributes.id);this.win.show();this.win.setZIndex(90000)},scope:this},{text:Lars.main.refresh_here,id:"add223453121",handler:function(){a.reload()},iconCls:"icon-refresh"},{text:Lars.main.tree.del_link,id:"add231231",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_confirm_link,function(g){if(g=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){a.parentNode.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}}})}},this)},iconCls:"delete"})}if(packageNodeToCopy&&!a.isLeaf()){this.menu.add({text:Lars.main.tree.insert_here,id:"add23141972340233",handler:function(){Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2_folder+packageNodeToCopy.attributes.text+Lars.main.tree.copy_confirm_3+a.attributes.text+Lars.main.tree.copy_confirm_4,function(g){if(g=="yes"){Ext.Ajax.request({url:"lars_json.php",params:{task:"copyFolder",sourceId:packageNodeToCopy.id,targetId:a.id},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){Ext.ux.ToastLars.msg(Lars.msg.success_copy,k.name?k.name:" ",3);a.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,k.name?k.name:" ",5)}},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})}},this)},iconCls:"paste"})}if(fileRecordToCopy&&!a.isLeaf()){this.menu.add({text:Lars.main.tree.copy_document,id:"add231419472340233",handler:function(){Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2_document+fileRecordToCopy.data.OBJ_DESC+Lars.main.tree.copy_confirm_3+a.attributes.text+Lars.main.tree.copy_confirm_4,function(g){if(g=="yes"){Ext.Ajax.request({url:"lars_json.php",params:{task:"copyFile",sourceId:fileRecordToCopy.id,targetId:a.id},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){Ext.ux.ToastLars.msg(Lars.msg.success_copy,k.name?k.name:" ",3);a.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,k.name?k.name:" ",5)}},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})}},this)},iconCls:"paste"})}if(a.attributes.lars_ref.match(window.location.host)){this.menu.add({text:Lars.main.grid.open_link_2,id:"add223453121",handler:function(){LarsViewer.QuestionTabOrBrowserOpen(a)},scope:this,iconCls:"link"})}else{if(a.attributes.lars_ref.length>5){this.menu.add({text:Lars.main.grid.open_link_2,id:"add223453121",handler:function(){LarsViewer.QuestionBrowserOpenNode(a)},scope:this,iconCls:"link"})}}this.menu.showAt(c.getXY())},afterRender:function(){LarsTreePanelFolderLinks.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsTreePanelLinks=function(){LarsTreePanelLinks.superclass.constructor.call(this,{id:"links-tree",margins:"0 0 0 0",bodyBorder:false,shim:false,ddGroup:"TreeDD",animate:false,enableDrag:true,rootVisible:false,lines:true,autoScroll:true,containerScroll:true,root:new Ext.tree.AsyncTreeNode({text:"",loader:new Ext.tree.TreeLoader({dataUrl:"lars_folder.php",baseParams:{task:"getResourcesLinks"}}),id:"links"}),tbar:[{iconCls:"link-add",text:"",tooltip:Lars.main.tree.add_link,handler:function(){this.win=new LarsAddLinkWindow();this.win.show();this.win.setZIndex(90000)},scope:this},{iconCls:"folder-add",text:"",tooltip:Lars.main.tree.add_folder,handler:function(){this.win=new LarsAddFolderLinksWindow("root");this.win.show();this.win.setZIndex(90000)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){Ext.getCmp("links-tree").root.reload()}}]});this.expand();this.getSelectionModel().on({selectionchange:function(c,a){if(a){this.fireEvent("projectselect",a.attributes.id)}},scope:this});this.addEvents({schuelerEditTab:true});this.on("contextmenu",this.onContextMenu,this);this.on({dblClick:{fn:function(g,c){if(g.isLeaf()&&g.attributes.lars_ref.match(window.location.host)){LarsViewer.QuestionTabOrBrowserOpen(g)}else{LarsViewer.QuestionBrowserOpenNode(g)}}}});this.on({click:{fn:function(g,c){g.toggle()}}});this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})})};Ext.extend(LarsTreePanelLinks,Ext.tree.TreePanel,{onContextMenu:function(a,c){if(!a.isLeaf()){this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.main.tree.add_link_here,id:"add142365",handler:function(){this.win=new LarsAddLinkWindow(a);this.win.show();this.win.setZIndex(90000)},iconCls:"link-add"},{iconCls:"folder-add",text:Lars.main.tree.add_folder_here,handler:function(){this.win=new LarsAddFolderLinksWindow(a.attributes.id);this.win.show();this.win.setZIndex(90000)},scope:this},{text:"Löschen",id:"add132443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.delete_folder_confirm,function(g){if(g=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){Ext.getCmp("links-tree").root.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.del_failure_msg_folder,5)}}})}},this)},iconCls:"delete"}]})}if(a.isLeaf()){this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.del,id:"add13243",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_link,function(g){if(g=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(h,j){var k=Ext.util.JSON.decode(h.responseText);if(k.success){Ext.getCmp("links-tree").root.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.del_failure_msg_link,5)}}})}},this)},iconCls:"delete"}]})}this.menu.add({text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"});this.menu.showAt(c.getXY())},afterRender:function(){LarsTreePanelLinks.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsUpdater=function(a){Ext.apply(this,a);this.myReader=new Ext.data.JsonReader({root:"data",id:"id"},["id","items"]);this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"lars_update.php",method:"POST",timeout:timeoutUpdateConnection}),reader:this.myReader});this.tmpMyReader=new Ext.data.JsonReader({id:"id"},LarsGridConfig.larsObj);this.tmpStore=new Ext.data.Store({reader:this.tmpMyReader});this.store.on("load",function(g,c,h){g.each(function(j){var k=j.id;this.tmpStore.loadData(j.data.items)},this)},this);this.tmpStore.on("load",function(j,h,k){var o=[];for(var m=0,g=h.length,c;m<g;m++){c=h[m];current=this.elements[c.data.container];if(!current){Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.dialog_updater_error,10);continue}if(oldRecord=current.store.getById(c.id)){var p=current.grid.view.getRow(current.store.indexOf(oldRecord));if(Ext.fly(p).hasClass("x-grid3-row-expanded")){Ext.apply(oldRecord,c);if(oldRecord.iFrame){oldRecord.iFrame.setSrc()}else{if(current.expander){current.grid.expander.toggleRow(p);current.grid.expander.toggleRow.defer(100,current.grid.expander,[p]);current.grid.view.refresh()}else{current.grid.view.refresh()}}}else{Ext.apply(oldRecord,c);current.grid.getView().refreshRow(oldRecord)}}else{o.push(c)}}for(var m=0,g=o.length,o;m<g;m++){current.store.addSorted(o[m])}},this)};Ext.extend(LarsUpdater,Ext.util.Observable,{elements:{},updateIds:new Array(),add:function(g,c,a){this.elements[g]={id:g,grid:c,store:a};this.updateIds.push(g);Ext.Ajax.request({url:"lars_update.php",params:{task:"updateIds",id:Ext.util.JSON.encode(this.updateIds)},success:function(h,j){},scope:this})},remove:function(g){if(this.elements[g]){delete this.elements[g]}for(var c=0,a=this.updateIds.length,g;c<a;c++){if(g==this.updateIds[c]){this.updateIds.splice(c,1)}}}});updateUsers=function(){LarsUpdaterUsers.defer(onlineStatusInterval,this,[])};LarsUpdaterUsers=function(){Ext.Ajax.request({url:"lars_update.php",params:{task:"getUsersLastLogin"},method:"POST",callback:updateUsers,timeout:timeoutUpdateConnection,success:function(g,o){var c=Ext.util.JSON.decode(g.responseText);if(c.success){var m=c.online;var l=c.offline;var h='<img class="online" unselectable="on" src="http://extjs.com/s.gif"/>';var a="";for(var k=0;k<m.length;k++){var j=Ext.getCmp("topics-tree-t").getNodeById(m[k]);if(j){if(!j.origText){j.origText=j.text;j.setText(j.text+h)}else{j.setText(j.origText+h)}}}for(var k=0;k<l.length;k++){var j=Ext.getCmp("topics-tree-t").getNodeById(l[k]);if(j){if(!j.origText){j.origText=j.text}else{if(j.origText!=j.text){j.setText(j.origText)}}}}}},scope:this})};UploadWindow=function(c,a,g){this.node=c;this.id=new Ext.form.Hidden({id:"id",value:c.id,fieldLabel:"ID des Ordners",hidden:true});this.larsType=new Ext.form.Hidden({id:"larsType",value:a,fieldLabel:"Aufgabentyp",hidden:true});this.description=new Ext.form.Field({id:"description",fieldLabel:Lars.dialog.upload_file.upload_description,value:g?g:"",width:450,msgTarget:"under"});this.filePath=new Ext.form.Field({id:"file",fieldLabel:Lars.dialog.upload_file.choose_hd,inputType:"file",width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",fileUpload:true,url:"lars_upload_file.php",method:"post",id:"upload-form",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.description,this.filePath,this.id,this.larsType],timeout:1800000,border:false,bodyStyle:"background:transparent;padding:10px;"});UploadWindow.superclass.constructor.call(this,{title:Lars.dialog.upload_file.title+this.node.text,iconCls:"add-page",id:"add-download-win",autoHeight:true,width:500,resizable:false,modal:true,buttons:[{text:Lars.dialog.upload_file.button_upload,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(UploadWindow,Ext.Window,{onAdd:function(a){this.el.mask(Lars.msg.loading,"x-mask-loading");Ext.getCmp("upload-form").getForm().submit({success:function(h,c){var g={};if(c.response.responseText){g=Ext.util.JSON.decode(c.response.responseText)}if(g.success==true){Ext.ux.ToastLars.msg(Lars.dialog.upload_file.msg_success,g.name?g.name:" ",5);if(Ext.getCmp(this.node.id+"Grid")){Ext.getCmp(this.node.id+"Grid").store.load()}this.destroy()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.dialog.upload_file.msg_failure+"<br>"+(g.name?g.name:" "),10);this.el.unmask()}},failure:function(h,c){var g={};if(c.response.responseText){g=Ext.util.JSON.decode(c.response.responseText)}Ext.ux.ToastLars.msg(Lars.msg.failure,g.name?g.name:Lars.msg.failure_connection,10);this.el.unmask()},scope:this})}});UploadCustomImage=function(){this.id=new Ext.form.Hidden({id:"aktion",value:"image",fieldLabel:"Action",hidden:true});this.filePath=new Ext.form.Field({id:"file",fieldLabel:Lars.dialog.upload_image.choose_hd,inputType:"file",width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",fileUpload:true,url:"lars_upload_file.php",method:"post",timeout:1800000,id:"upload-image-form",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.filePath,this.id],border:false,bodyStyle:"background:transparent;padding:10px;"});UploadCustomImage.superclass.constructor.call(this,{title:Lars.dialog.upload_image.upload,iconCls:"add-image",id:"add-image-win",autoHeight:true,width:500,resizable:false,modal:true,buttons:[{text:Lars.dialog.upload_image.upload,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(UploadCustomImage,Ext.Window,{onAdd:function(a){this.el.mask(Lars.msg.loading,"x-mask-loading");Ext.getCmp("upload-image-form").getForm().submit({success:function(h,c){var g={};if(c.response.responseText){g=Ext.util.JSON.decode(c.response.responseText)}if(g.success==true){Ext.ux.ToastLars.msg(Lars.dialog.upload_image.msg_success,g.name?g.name:" ",5);Ext.getCmp("custom-image-panel").getUpdater().update(Ext.getCmp("custom-image-panel").autoLoad);this.destroy()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.dialog.upload_image.msg_failure+"<br>"+(g.name?g.name:" "),10);this.el.unmask()}},failure:function(h,c){var g={};if(c.response.responseText){g=Ext.util.JSON.decode(c.response.responseText)}Ext.ux.ToastLars.msg(Lars.msg.failure,g.name?g.name:Lars.msg.failure_connection,10);this.el.unmask()},scope:this})}});var version="1.0.1-2";var larsVoiceChat={title:Lars.main.chat.title,iconCls:"webcam",collapsible:true,collapsed:true,id:"lars-voice-chat",region:"east",xtype:"flashpanel",split:true,autoScroll:true,cmargins:"0 0 0 0",tbar:[{iconCls:"house",tooltip:Lars.main.chat.chat_home,handler:function(){reloadVoiceChat(larsDesktopId)},scope:this},{iconCls:"user",tooltip:Lars.main.chat.chat_else,handler:function(){this.win=new LarsJoinChat();this.win.show();this.win.setZIndex(90005)},scope:this}],mediaCfg:{mediaType:"SWF",id:"flocsOne",renderOnResize:false,width:275}};reloadVoiceChat=function(a){Ext.getCmp("lars-voice-chat").renderMedia({mediaType:"SWF",url:"moko/ux/flocsLars.swf",id:"flocsOne",renderOnResize:false,visibility:"hidden",autoSize:true,start:true,loop:false,height:"100%",width:275,controls:true,params:{quality:"high",scale:"exactfit",start:true,loop:false,allowScriptAccess:"sameDomain",flashVars:{user:user,pass:pass,server:"www.bid-owl.de",port:"1900",environment:a}}})};