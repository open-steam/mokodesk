Ext={version:"2.2.1"};window["undefined"]=window["undefined"];Ext.apply=function(E,D,A){if(A){Ext.apply(E,A)}if(E&&D&&typeof D=="object"){for(var B in D){E[B]=D[B]}}return E};(function(){var idSeed=0;var ua=navigator.userAgent.toLowerCase();var isStrict=document.compatMode=="CSS1Compat",isOpera=ua.indexOf("opera")>-1,isChrome=ua.indexOf("chrome")>-1,isSafari=!isChrome&&(/webkit|khtml/).test(ua),isSafari3=isSafari&&ua.indexOf("webkit/5")!=-1,isIE=!isOpera&&ua.indexOf("msie")>-1,isIE7=!isOpera&&ua.indexOf("msie 7")>-1,isIE8=!isOpera&&ua.indexOf("msie 8")>-1,isGecko=!isSafari&&!isChrome&&ua.indexOf("gecko")>-1,isGecko3=isGecko&&ua.indexOf("rv:1.9")>-1,isBorderBox=isIE&&!isStrict,isWindows=(ua.indexOf("windows")!=-1||ua.indexOf("win32")!=-1),isMac=(ua.indexOf("macintosh")!=-1||ua.indexOf("mac os x")!=-1),isAir=(ua.indexOf("adobeair")!=-1),isLinux=(ua.indexOf("linux")!=-1),isSecure=window.location.href.toLowerCase().indexOf("https")===0;if(isIE&&!isIE7){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}Ext.apply(Ext,{isStrict:isStrict,isSecure:isSecure,isReady:false,enableGarbageCollector:true,enableListenerCollection:false,SSL_SECURE_URL:"javascript:false",BLANK_IMAGE_URL:"http://extjs.com/s.gif",emptyFn:function(){},applyIf:function(o,c){if(o&&c){for(var p in c){if(typeof o[p]=="undefined"){o[p]=c[p]}}}return o},addBehaviors:function(o){if(!Ext.isReady){Ext.onReady(function(){Ext.addBehaviors(o)});return}var cache={};for(var b in o){var parts=b.split("@");if(parts[1]){var s=parts[0];if(!cache[s]){cache[s]=Ext.select(s)}cache[s].on(parts[1],o[b])}}cache=null},id:function(el,prefix){prefix=prefix||"ext-gen";el=Ext.getDom(el);var id=prefix+(++idSeed);return el?(el.id?el.id:(el.id=id)):id},extend:function(){var io=function(o){for(var m in o){this[m]=o[m]}};var oc=Object.prototype.constructor;return function(sb,sp,overrides){if(typeof sp=="object"){overrides=sp;sp=sb;sb=overrides.constructor!=oc?overrides.constructor:function(){sp.apply(this,arguments)}}var F=function(){},sbp,spp=sp.prototype;F.prototype=spp;sbp=sb.prototype=new F();sbp.constructor=sb;sb.superclass=spp;if(spp.constructor==oc){spp.constructor=sp}sb.override=function(o){Ext.override(sb,o)};sbp.override=io;Ext.override(sb,overrides);sb.extend=function(o){Ext.extend(sb,o)};return sb}}(),override:function(origclass,overrides){if(overrides){var p=origclass.prototype;for(var method in overrides){p[method]=overrides[method]}if(Ext.isIE&&overrides.toString!=origclass.toString){p.toString=overrides.toString}}},namespace:function(){var a=arguments,o=null,i,j,d,rt;for(i=0;i<a.length;++i){d=a[i].split(".");rt=d[0];eval("if (typeof "+rt+' == "undefined"){'+rt+" = {};} o = "+rt+";");for(j=1;j<d.length;++j){o[d[j]]=o[d[j]]||{};o=o[d[j]]}}},urlEncode:function(o){if(!o){return""}var buf=[];for(var key in o){var ov=o[key],k=encodeURIComponent(key);var type=typeof ov;if(type=="undefined"){buf.push(k,"=&")}else{if(type!="function"&&type!="object"){buf.push(k,"=",encodeURIComponent(ov),"&")}else{if(Ext.isDate(ov)){var s=Ext.encode(ov).replace(/"/g,"");buf.push(k,"=",s,"&")}else{if(Ext.isArray(ov)){if(ov.length){for(var i=0,len=ov.length;i<len;i++){buf.push(k,"=",encodeURIComponent(ov[i]===undefined?"":ov[i]),"&")}}else{buf.push(k,"=&")}}}}}}buf.pop();return buf.join("")},urlDecode:function(string,overwrite){if(!string||!string.length){return{}}var obj={};var pairs=string.split("&");var pair,name,value;for(var i=0,len=pairs.length;i<len;i++){pair=pairs[i].split("=");name=decodeURIComponent(pair[0]);value=decodeURIComponent(pair[1]);if(overwrite!==true){if(typeof obj[name]=="undefined"){obj[name]=value}else{if(typeof obj[name]=="string"){obj[name]=[obj[name]];obj[name].push(value)}else{obj[name].push(value)}}}else{obj[name]=value}}return obj},each:function(array,fn,scope){if(typeof array.length=="undefined"||typeof array=="string"){array=[array]}for(var i=0,len=array.length;i<len;i++){if(fn.call(scope||array[i],array[i],i,array)===false){return i}}},combine:function(){var as=arguments,l=as.length,r=[];for(var i=0;i<l;i++){var a=as[i];if(Ext.isArray(a)){r=r.concat(a)}else{if(a.length!==undefined&&!a.substr){r=r.concat(Array.prototype.slice.call(a,0))}else{r.push(a)}}}return r},escapeRe:function(s){return s.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},callback:function(cb,scope,args,delay){if(typeof cb=="function"){if(delay){cb.defer(delay,scope,args||[])}else{cb.apply(scope,args||[])}}},getDom:function(el){if(!el||!document){return null}return el.dom?el.dom:(typeof el=="string"?document.getElementById(el):el)},getDoc:function(){return Ext.get(document)},getBody:function(){return Ext.get(document.body||document.documentElement)},getCmp:function(id){return Ext.ComponentMgr.get(id)},num:function(v,defaultValue){if(typeof v!="number"||isNaN(v)){return defaultValue}return v},destroy:function(){for(var i=0,a=arguments,len=a.length;i<len;i++){var as=a[i];if(as){if(typeof as.destroy=="function"){as.destroy()}else{if(as.dom){as.removeAllListeners();as.remove()}}}}},removeNode:isIE?function(){var d;return function(n){if(n&&n.tagName!="BODY"){d=d||document.createElement("div");d.appendChild(n);d.innerHTML=""}}}():function(n){if(n&&n.parentNode&&n.tagName!="BODY"){n.parentNode.removeChild(n)}},type:function(o){if(o===undefined||o===null){return false}if(o.htmlElement){return"element"}var t=typeof o;if(t=="object"&&o.nodeName){switch(o.nodeType){case 1:return"element";case 3:return(/\S/).test(o.nodeValue)?"textnode":"whitespace"}}if(t=="object"||t=="function"){switch(o.constructor){case Array:return"array";case RegExp:return"regexp";case Date:return"date"}if(typeof o.length=="number"&&typeof o.item=="function"){return"nodelist"}}return t},isEmpty:function(v,allowBlank){return v===null||v===undefined||(!allowBlank?v==="":false)},value:function(v,defaultValue,allowBlank){return Ext.isEmpty(v,allowBlank)?defaultValue:v},isArray:function(v){return v&&typeof v.length=="number"&&typeof v.splice=="function"},isDate:function(v){return v&&typeof v.getFullYear=="function"},isOpera:isOpera,isChrome:isChrome,isSafari:isSafari,isSafari3:isSafari3,isSafari2:isSafari&&!isSafari3,isIE:isIE,isIE6:isIE&&!isIE7&&!isIE8,isIE7:isIE7,isIE8:isIE8,isGecko:isGecko,isGecko2:isGecko&&!isGecko3,isGecko3:isGecko3,isBorderBox:isBorderBox,isLinux:isLinux,isWindows:isWindows,isMac:isMac,isAir:isAir,useShims:((isIE&&!isIE7)||(isMac&&isGecko&&!isGecko3))});Ext.ns=Ext.namespace})();Ext.ns("Ext","Ext.util","Ext.grid","Ext.dd","Ext.tree","Ext.data","Ext.form","Ext.menu","Ext.state","Ext.lib","Ext.layout","Ext.app","Ext.ux");Ext.apply(Function.prototype,{createCallback:function(){var B=arguments;var A=this;return function(){return A.apply(window,B)}},createDelegate:function(E,A,B){var D=this;return function(){var F=A||arguments;if(B===true){F=Array.prototype.slice.call(arguments,0);F=F.concat(A)}else{if(typeof B=="number"){F=Array.prototype.slice.call(arguments,0);var G=[B,0].concat(A);Array.prototype.splice.apply(F,G)}}return D.apply(E||window,F)}},defer:function(F,D,A,B){var E=this.createDelegate(D,A,B);if(F){return setTimeout(E,F)}E();return 0},createSequence:function(A,B){if(typeof A!="function"){return this}var D=this;return function(){var E=D.apply(this||window,arguments);A.apply(B||this||window,arguments);return E}},createInterceptor:function(A,B){if(typeof A!="function"){return this}var D=this;return function(){A.target=this;A.method=D;if(A.apply(B||this||window,arguments)===false){return}return D.apply(this||window,arguments)}}});Ext.applyIf(String,{escape:function(A){return A.replace(/('|\\)/g,"\\$1")},leftPad:function(D,A,E){var B=new String(D);if(!E){E=" "}while(B.length<A){B=E+B}return B.toString()},format:function(A){var B=Array.prototype.slice.call(arguments,1);return A.replace(/\{(\d+)\}/g,function(E,D){return B[D]})}});String.prototype.toggle=function(A,B){return this==A?B:A};String.prototype.trim=function(){var A=/^\s+|\s+$/g;return function(){return this.replace(A,"")}}();Ext.applyIf(Number.prototype,{constrain:function(A,B){return Math.min(Math.max(this,A),B)}});Ext.applyIf(Array.prototype,{indexOf:function(D){for(var A=0,B=this.length;A<B;A++){if(this[A]==D){return A}}return -1},remove:function(A){var B=this.indexOf(A);if(B!=-1){this.splice(B,1)}return this}});Date.prototype.getElapsed=function(A){return Math.abs((A||new Date()).getTime()-this.getTime())};(function(){var A;Ext.lib.Dom={getViewWidth:function(F){return F?this.getDocumentWidth():this.getViewportWidth()},getViewHeight:function(F){return F?this.getDocumentHeight():this.getViewportHeight()},getDocumentHeight:function(){var F=(document.compatMode!="CSS1Compat")?document.body.scrollHeight:document.documentElement.scrollHeight;return Math.max(F,this.getViewportHeight())},getDocumentWidth:function(){var F=(document.compatMode!="CSS1Compat")?document.body.scrollWidth:document.documentElement.scrollWidth;return Math.max(F,this.getViewportWidth())},getViewportHeight:function(){if(Ext.isIE){return Ext.isStrict?document.documentElement.clientHeight:document.body.clientHeight}else{return self.innerHeight}},getViewportWidth:function(){if(Ext.isIE){return Ext.isStrict?document.documentElement.clientWidth:document.body.clientWidth}else{return self.innerWidth}},isAncestor:function(G,F){G=Ext.getDom(G);F=Ext.getDom(F);if(!G||!F){return false}if(G.contains&&!Ext.isSafari){return G.contains(F)}else{if(G.compareDocumentPosition){return !!(G.compareDocumentPosition(F)&16)}else{var H=F.parentNode;while(H){if(H==G){return true}else{if(!H.tagName||H.tagName.toUpperCase()=="HTML"){return false}}H=H.parentNode}return false}}},getRegion:function(F){return Ext.lib.Region.getRegion(F)},getY:function(F){return this.getXY(F)[1]},getX:function(F){return this.getXY(F)[0]},getXY:function(O){var P,K,I,H,L=(document.body||document.documentElement);O=Ext.getDom(O);if(O==L){return[0,0]}if(O.getBoundingClientRect){I=O.getBoundingClientRect();H=E(document).getScroll();return[I.left+H.left,I.top+H.top]}var G=0,J=0;P=O;var Q=E(O).getStyle("position")=="absolute";while(P){G+=P.offsetLeft;J+=P.offsetTop;if(!Q&&E(P).getStyle("position")=="absolute"){Q=true}if(Ext.isGecko){K=E(P);var F=parseInt(K.getStyle("borderTopWidth"),10)||0;var N=parseInt(K.getStyle("borderLeftWidth"),10)||0;G+=N;J+=F;if(P!=O&&K.getStyle("overflow")!="visible"){G+=N;J+=F}}P=P.offsetParent}if(Ext.isSafari&&Q){G-=L.offsetLeft;J-=L.offsetTop}if(Ext.isGecko&&!Q){var M=E(L);G+=parseInt(M.getStyle("borderLeftWidth"),10)||0;J+=parseInt(M.getStyle("borderTopWidth"),10)||0}P=O.parentNode;while(P&&P!=L){if(!Ext.isOpera||(P.tagName!="TR"&&E(P).getStyle("display")!="inline")){G-=P.scrollLeft;J-=P.scrollTop}P=P.parentNode}return[G,J]},setXY:function(H,G){H=Ext.fly(H,"_setXY");H.position();var F=H.translatePoints(G);if(G[0]!==false){H.dom.style.left=F.left+"px"}if(G[1]!==false){H.dom.style.top=F.top+"px"}},setX:function(F,G){this.setXY(F,[G,false])},setY:function(G,F){this.setXY(G,[false,F])}};Ext.lib.Event=function(){var K=false;var J=[];var F=[];var H=0;var I=[];var L=0;var G=null;return{POLL_RETRYS:200,POLL_INTERVAL:20,EL:0,TYPE:1,FN:2,WFN:3,OBJ:3,ADJ_SCOPE:4,_interval:null,startInterval:function(){if(!this._interval){var N=this;var M=function(){N._tryPreloadAttach()};this._interval=setInterval(M,this.POLL_INTERVAL)}},onAvailable:function(P,N,O,M){I.push({id:P,fn:N,obj:O,override:M,checkReady:false});H=this.POLL_RETRYS;this.startInterval()},addListener:function(O,M,P){O=Ext.getDom(O);if(!O||!P){return false}if("unload"==M){F[F.length]=[O,M,P];return true}var Q=function(S){return typeof Ext!="undefined"?P(Ext.lib.Event.getEvent(S)):false};var N=[O,M,P,Q];var R=J.length;J[R]=N;this.doAdd(O,M,Q,false);return true},removeListener:function(O,S,P){var Q,T;O=Ext.getDom(O);if(!P){return this.purgeElement(O,false,S)}if("unload"==S){for(Q=0,T=F.length;Q<T;Q++){var M=F[Q];if(M&&M[0]==O&&M[1]==S&&M[2]==P){F.splice(Q,1);return true}}return false}var N=null;var R=arguments[3];if("undefined"==typeof R){R=this._getCacheIndex(O,S,P)}if(R>=0){N=J[R]}if(!O||!N){return false}this.doRemove(O,S,N[this.WFN],false);delete J[R][this.WFN];delete J[R][this.FN];J.splice(R,1);return true},getTarget:function(O,M){O=O.browserEvent||O;var N=O.target||O.srcElement;return this.resolveTextNode(N)},resolveTextNode:function(M){if(Ext.isSafari&&M&&3==M.nodeType){return M.parentNode}else{return M}},getPageX:function(M){M=M.browserEvent||M;var N=M.pageX;if(!N&&0!==N){N=M.clientX||0;if(Ext.isIE){N+=this.getScroll()[1]}}return N},getPageY:function(N){N=N.browserEvent||N;var M=N.pageY;if(!M&&0!==M){M=N.clientY||0;if(Ext.isIE){M+=this.getScroll()[0]}}return M},getXY:function(M){M=M.browserEvent||M;return[this.getPageX(M),this.getPageY(M)]},getRelatedTarget:function(M){M=M.browserEvent||M;var N=M.relatedTarget;if(!N){if(M.type=="mouseout"){N=M.toElement}else{if(M.type=="mouseover"){N=M.fromElement}}}return this.resolveTextNode(N)},getTime:function(O){O=O.browserEvent||O;if(!O.time){var M=new Date().getTime();try{O.time=M}catch(N){this.lastError=N;return M}}return O.time},stopEvent:function(M){this.stopPropagation(M);this.preventDefault(M)},stopPropagation:function(M){M=M.browserEvent||M;if(M.stopPropagation){M.stopPropagation()}else{M.cancelBubble=true}},preventDefault:function(M){M=M.browserEvent||M;if(M.preventDefault){M.preventDefault()}else{M.returnValue=false}},getEvent:function(M){var N=M||window.event;if(!N){var O=this.getEvent.caller;while(O){N=O.arguments[0];if(N&&Event==N.constructor){break}O=O.caller}}return N},getCharCode:function(M){M=M.browserEvent||M;return M.charCode||M.keyCode||0},_getCacheIndex:function(O,R,P){for(var Q=0,M=J.length;Q<M;++Q){var N=J[Q];if(N&&N[this.FN]==P&&N[this.EL]==O&&N[this.TYPE]==R){return Q}}return -1},elCache:{},getEl:function(M){return document.getElementById(M)},clearCache:function(){},_load:function(M){K=true;var N=Ext.lib.Event;if(Ext.isIE){N.doRemove(window,"load",N._load)}},_tryPreloadAttach:function(){if(this.locked){return false}this.locked=true;var O=!K;if(!O){O=(H>0)}var P=[];for(var M=0,N=I.length;M<N;++M){var Q=I[M];if(Q){var R=this.getEl(Q.id);if(R){if(!Q.checkReady||K||R.nextSibling||(document&&document.body)){var S=R;if(Q.override){if(Q.override===true){S=Q.obj}else{S=Q.override}}Q.fn.call(S,Q.obj);I[M]=null}}else{P.push(Q)}}}H=(P.length===0)?0:H-1;if(O){this.startInterval()}else{clearInterval(this._interval);this._interval=null}this.locked=false;return true},purgeElement:function(P,O,R){var N=this.getListeners(P,R);if(N){for(var Q=0,M=N.length;Q<M;++Q){var S=N[Q];this.removeListener(P,S.type,S.fn)}}if(O&&P&&P.childNodes){for(Q=0,M=P.childNodes.length;Q<M;++Q){this.purgeElement(P.childNodes[Q],O,R)}}},getListeners:function(Q,U){var N=[],R;if(!U){R=[J,F]}else{if(U=="unload"){R=[F]}else{R=[J]}}for(var O=0;O<R.length;++O){var S=R[O];if(S&&S.length>0){for(var M=0,T=S.length;M<T;++M){var P=S[M];if(P&&P[this.EL]===Q&&(!U||U===P[this.TYPE])){N.push({type:P[this.TYPE],fn:P[this.FN],obj:P[this.OBJ],adjust:P[this.ADJ_SCOPE],index:M})}}}}return(N.length)?N:null},_unload:function(N){var O=Ext.lib.Event,Q,R,T,M,S;for(Q=0,M=F.length;Q<M;++Q){T=F[Q];if(T){var P=window;if(T[O.ADJ_SCOPE]){if(T[O.ADJ_SCOPE]===true){P=T[O.OBJ]}else{P=T[O.ADJ_SCOPE]}}T[O.FN].call(P,O.getEvent(N),T[O.OBJ]);F[Q]=null;T=null;P=null}}F=null;if(J&&J.length>0){R=J.length;while(R){S=R-1;T=J[S];if(T){O.removeListener(T[O.EL],T[O.TYPE],T[O.FN],S)}R=R-1}T=null;O.clearCache()}O.doRemove(window,"unload",O._unload)},getScroll:function(){var N=document.documentElement,M=document.body;if(N&&(N.scrollTop||N.scrollLeft)){return[N.scrollTop,N.scrollLeft]}else{if(M){return[M.scrollTop,M.scrollLeft]}else{return[0,0]}}},doAdd:function(){if(window.addEventListener){return function(O,M,P,N){O.addEventListener(M,P,(N))}}else{if(window.attachEvent){return function(O,M,P,N){O.attachEvent("on"+M,P)}}else{return function(){}}}}(),doRemove:function(){if(window.removeEventListener){return function(O,M,P,N){O.removeEventListener(M,P,(N))}}else{if(window.detachEvent){return function(O,N,M){O.detachEvent("on"+N,M)}}else{return function(){}}}}()}}();var D=Ext.lib.Event;D.on=D.addListener;D.un=D.removeListener;if(document&&document.body){D._load()}else{D.doAdd(window,"load",D._load)}D.doAdd(window,"unload",D._unload);D._tryPreloadAttach();Ext.lib.Ajax={request:function(F,H,L,G,K){if(K){var J=K.headers;if(J){for(var I in J){if(J.hasOwnProperty(I)){this.initHeader(I,J[I],false)}}}if(K.xmlData){if(!J||!J["Content-Type"]){this.initHeader("Content-Type","text/xml",false)}F=(F?F:(K.method?K.method:"POST"));G=K.xmlData}else{if(K.jsonData){if(!J||!J["Content-Type"]){this.initHeader("Content-Type","application/json",false)}F=(F?F:(K.method?K.method:"POST"));G=typeof K.jsonData=="object"?Ext.encode(K.jsonData):K.jsonData}}}return this.asyncRequest(F,H,L,G)},serializeForm:function(M){if(typeof M=="string"){M=(document.getElementById(M)||document.forms[M])}var L,N,K,I,H="",F=false;for(var G=0;G<M.elements.length;G++){L=M.elements[G];I=M.elements[G].disabled;N=M.elements[G].name;K=M.elements[G].value;if(!I&&N){switch(L.type){case"select-one":case"select-multiple":for(var J=0;J<L.options.length;J++){if(L.options[J].selected){if(Ext.isIE){H+=encodeURIComponent(N)+"="+encodeURIComponent(L.options[J].attributes.value.specified?L.options[J].value:L.options[J].text)+"&"}else{H+=encodeURIComponent(N)+"="+encodeURIComponent(L.options[J].hasAttribute("value")?L.options[J].value:L.options[J].text)+"&"}}}break;case"radio":case"checkbox":if(L.checked){H+=encodeURIComponent(N)+"="+encodeURIComponent(K)+"&"}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(F==false){H+=encodeURIComponent(N)+"="+encodeURIComponent(K)+"&";F=true}break;default:H+=encodeURIComponent(N)+"="+encodeURIComponent(K)+"&";break}}}H=H.substr(0,H.length-1);return H},headers:{},hasHeaders:false,useDefaultHeader:true,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest",hasDefaultHeaders:true,defaultHeaders:{},poll:{},timeout:{},pollInterval:50,transactionId:0,setProgId:function(F){this.activeX.unshift(F)},setDefaultPostHeader:function(F){this.useDefaultHeader=F},setDefaultXhrHeader:function(F){this.useDefaultXhrHeader=F},setPollingInterval:function(F){if(typeof F=="number"&&isFinite(F)){this.pollInterval=F}},createXhrObject:function(F){var G,J;try{J=new XMLHttpRequest();G={conn:J,tId:F}}catch(H){for(var I=0;I<this.activeX.length;++I){try{J=new ActiveXObject(this.activeX[I]);G={conn:J,tId:F};break}catch(H){}}}finally{return G}},getConnectionObject:function(){var G;var F=this.transactionId;try{G=this.createXhrObject(F);if(G){this.transactionId++}}catch(H){}finally{return G}},asyncRequest:function(F,I,G,J){var H=this.getConnectionObject();if(!H){return null}else{H.conn.open(F,I,true);if(this.useDefaultXhrHeader){if(!this.defaultHeaders["X-Requested-With"]){this.initHeader("X-Requested-With",this.defaultXhrHeader,true)}}if(J&&this.useDefaultHeader&&(!this.hasHeaders||!this.headers["Content-Type"])){this.initHeader("Content-Type",this.defaultPostHeader)}if(this.hasDefaultHeaders||this.hasHeaders){this.setHeader(H)}this.handleReadyState(H,G);H.conn.send(J||null);return H}},handleReadyState:function(G,F){var H=this;if(F&&F.timeout){this.timeout[G.tId]=window.setTimeout(function(){H.abort(G,F,true)},F.timeout)}this.poll[G.tId]=window.setInterval(function(){if(G.conn&&G.conn.readyState==4){window.clearInterval(H.poll[G.tId]);delete H.poll[G.tId];if(F&&F.timeout){window.clearTimeout(H.timeout[G.tId]);delete H.timeout[G.tId]}H.handleTransactionResponse(G,F)}},this.pollInterval)},handleTransactionResponse:function(G,F,K){if(!F){this.releaseObject(G);return}var I,J;try{if(G.conn.status!==undefined&&G.conn.status!=0){I=G.conn.status}else{I=13030}}catch(H){I=13030}if((I>=200&&I<300)||(Ext.isIE&&I==1223)){J=this.createResponseObject(G,F.argument);if(F.success){if(!F.scope){F.success(J)}else{F.success.apply(F.scope,[J])}}}else{switch(I){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:J=this.createExceptionObject(G.tId,F.argument,(K?K:false));if(F.failure){if(!F.scope){F.failure(J)}else{F.failure.apply(F.scope,[J])}}break;default:J=this.createResponseObject(G,F.argument);if(F.failure){if(!F.scope){F.failure(J)}else{F.failure.apply(F.scope,[J])}}}}this.releaseObject(G);J=null},createResponseObject:function(N,H){var K={};var F={};try{var L=N.conn.getAllResponseHeaders();var I=L.split("\n");for(var J=0;J<I.length;J++){var M=I[J].indexOf(":");if(M!=-1){F[I[J].substring(0,M)]=I[J].substring(M+2)}}}catch(G){}K.tId=N.tId;K.status=N.conn.status;K.statusText=N.conn.statusText;K.getResponseHeader=F;K.getAllResponseHeaders=L;K.responseText=N.conn.responseText;K.responseXML=N.conn.responseXML;if(typeof H!==undefined){K.argument=H}return K},createExceptionObject:function(F,J,M){var H=0;var G="communication failure";var K=-1;var L="transaction aborted";var I={};I.tId=F;if(M){I.status=K;I.statusText=L}else{I.status=H;I.statusText=G}if(J){I.argument=J}return I},initHeader:function(I,F,G){var H=(G)?this.defaultHeaders:this.headers;if(H[I]===undefined){H[I]=F}else{H[I]=F+","+H[I]}if(G){this.hasDefaultHeaders=true}else{this.hasHeaders=true}},setHeader:function(G){if(this.hasDefaultHeaders){for(var F in this.defaultHeaders){if(this.defaultHeaders.hasOwnProperty(F)){G.conn.setRequestHeader(F,this.defaultHeaders[F])}}}if(this.hasHeaders){for(var F in this.headers){if(this.headers.hasOwnProperty(F)){G.conn.setRequestHeader(F,this.headers[F])}}this.headers={};this.hasHeaders=false}},resetDefaultHeaders:function(){delete this.defaultHeaders;this.defaultHeaders={};this.hasDefaultHeaders=false},abort:function(G,F,H){if(this.isCallInProgress(G)){G.conn.abort();window.clearInterval(this.poll[G.tId]);delete this.poll[G.tId];if(H){delete this.timeout[G.tId]}this.handleTransactionResponse(G,F,true);return true}else{return false}},isCallInProgress:function(F){if(F.conn){return F.conn.readyState!=4&&F.conn.readyState!=0}else{return false}},releaseObject:function(F){F.conn=null;F=null},activeX:["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"]};Ext.lib.Region=function(G,F,I,H){this.top=G;this[1]=G;this.right=F;this.bottom=I;this.left=H;this[0]=H};Ext.lib.Region.prototype={contains:function(F){return(F.left>=this.left&&F.right<=this.right&&F.top>=this.top&&F.bottom<=this.bottom)},getArea:function(){return((this.bottom-this.top)*(this.right-this.left))},intersect:function(F){var H=Math.max(this.top,F.top);var G=Math.min(this.right,F.right);var J=Math.min(this.bottom,F.bottom);var I=Math.max(this.left,F.left);if(J>=H&&G>=I){return new Ext.lib.Region(H,G,J,I)}else{return null}},union:function(F){var H=Math.min(this.top,F.top);var G=Math.max(this.right,F.right);var J=Math.max(this.bottom,F.bottom);var I=Math.min(this.left,F.left);return new Ext.lib.Region(H,G,J,I)},constrainTo:function(F){this.top=this.top.constrain(F.top,F.bottom);this.bottom=this.bottom.constrain(F.top,F.bottom);this.left=this.left.constrain(F.left,F.right);this.right=this.right.constrain(F.left,F.right);return this},adjust:function(G,H,I,F){this.top+=G;this.left+=H;this.right+=F;this.bottom+=I;return this}};Ext.lib.Region.getRegion=function(H){var F=Ext.lib.Dom.getXY(H);var I=F[1];var G=F[0]+H.offsetWidth;var K=F[1]+H.offsetHeight;var J=F[0];return new Ext.lib.Region(I,G,K,J)};Ext.lib.Point=function(G,F){if(Ext.isArray(G)){F=G[1];G=G[0]}this.x=this.right=this.left=this[0]=G;this.y=this.top=this.bottom=this[1]=F};Ext.lib.Point.prototype=new Ext.lib.Region();Ext.lib.Anim={scroll:function(H,J,G,F,K,I){return this.run(H,J,G,F,K,I,Ext.lib.Scroll)},motion:function(H,J,G,F,K,I){return this.run(H,J,G,F,K,I,Ext.lib.Motion)},color:function(H,J,G,F,K,I){return this.run(H,J,G,F,K,I,Ext.lib.ColorAnim)},run:function(I,L,G,F,M,J,K){K=K||Ext.lib.AnimBase;if(typeof F=="string"){F=Ext.lib.Easing[F]}var H=new K(I,L,G,F);H.animateX(function(){Ext.callback(M,J)});return H}};function E(F){if(!A){A=new Ext.Element.Flyweight()}A.dom=F;return A}if(Ext.isIE){function B(){var F=Function.prototype;delete F.createSequence;delete F.defer;delete F.createDelegate;delete F.createCallback;delete F.createInterceptor;window.detachEvent("onunload",B)}window.attachEvent("onunload",B)}Ext.lib.AnimBase=function(H,I,G,F){if(H){this.init(H,I,G,F)}};Ext.lib.AnimBase.prototype={toString:function(){var G=this.getEl();var F=G.id||G.tagName;return("Anim "+F)},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(H,F,G){return this.method(this.currentFrame,F,G-F,this.totalFrames)},setAttribute:function(H,F,G){if(this.patterns.noNegatives.test(H)){F=(F>0)?F:0}Ext.fly(this.getEl(),"_anim").setStyle(H,F+G)},getAttribute:function(K){var I=this.getEl();var G=E(I).getStyle(K);if(G!=="auto"&&!this.patterns.offsetUnit.test(G)){return parseFloat(G)}var J=this.patterns.offsetAttribute.exec(K)||[];var F=!!(J[3]);var H=!!(J[2]);if(H||(E(I).getStyle("position")=="absolute"&&F)){G=I["offset"+J[0].charAt(0).toUpperCase()+J[0].substr(1)]}else{G=0}return G},getDefaultUnit:function(F){if(this.patterns.defaultUnit.test(F)){return"px"}return""},animateX:function(F,H){var G=function(){this.onComplete.removeListener(G);if(typeof F=="function"){F.call(H||this,this)}};this.onComplete.addListener(G,this);this.animate()},setRuntimeAttribute:function(K){var F;var J;var I=this.attributes;this.runtimeAttributes[K]={};var G=function(M){return(typeof M!=="undefined")};if(!G(I[K]["to"])&&!G(I[K]["by"])){return false}F=(G(I[K]["from"]))?I[K]["from"]:this.getAttribute(K);if(G(I[K]["to"])){J=I[K]["to"]}else{if(G(I[K]["by"])){if(F.constructor==Array){J=[];for(var H=0,L=F.length;H<L;++H){J[H]=F[H]+I[K]["by"][H]}}else{J=F+I[K]["by"]}}}this.runtimeAttributes[K].start=F;this.runtimeAttributes[K].end=J;this.runtimeAttributes[K].unit=(G(I[K].unit))?I[K]["unit"]:this.getDefaultUnit(K)},init:function(M,H,I,O){var N=false;var L=null;var J=0;M=Ext.getDom(M);this.attributes=H||{};this.duration=I||1;this.method=O||Ext.lib.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=Ext.lib.AnimMgr.fps;this.getEl=function(){return M};this.isAnimated=function(){return N};this.getStartTime=function(){return L};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(Ext.lib.AnimMgr.fps*this.duration):this.duration;Ext.lib.AnimMgr.registerElement(this)};this.stop=function(P){if(P){this.currentFrame=this.totalFrames;this._onTween.fire()}Ext.lib.AnimMgr.stop(this)};var F=function(){this.onStart.fire();this.runtimeAttributes={};for(var P in this.attributes){this.setRuntimeAttribute(P)}N=true;J=0;L=new Date()};var G=function(){var P={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};P.toString=function(){return("duration: "+P.duration+", currentFrame: "+P.currentFrame)};this.onTween.fire(P);var Q=this.runtimeAttributes;for(var R in Q){this.setAttribute(R,this.doMethod(R,Q[R].start,Q[R].end),Q[R].unit)}J+=1};var K=function(){var Q=(new Date()-L)/1000;var P={duration:Q,frames:J,fps:J/Q};P.toString=function(){return("duration: "+P.duration+", frames: "+P.frames+", fps: "+P.fps)};N=false;J=0;this.onComplete.fire(P)};this._onStart=new Ext.util.Event(this);this.onStart=new Ext.util.Event(this);this.onTween=new Ext.util.Event(this);this._onTween=new Ext.util.Event(this);this.onComplete=new Ext.util.Event(this);this._onComplete=new Ext.util.Event(this);this._onStart.addListener(F);this._onTween.addListener(G);this._onComplete.addListener(K)}};Ext.lib.AnimMgr=new function(){var H=null;var I=[];var J=0;this.fps=1000;this.delay=1;this.registerElement=function(K){I[I.length]=K;J+=1;K._onStart.fire();this.start()};this.unRegister=function(K,L){K._onComplete.fire();L=L||F(K);if(L!=-1){I.splice(L,1)}J-=1;if(J<=0){this.stop()}};this.start=function(){if(H===null){H=setInterval(this.run,this.delay)}};this.stop=function(K){if(!K){clearInterval(H);for(var L=0,M=I.length;L<M;++L){if(I[0].isAnimated()){this.unRegister(I[0],0)}}I=[];H=null;J=0}else{this.unRegister(K)}};this.run=function(){for(var K=0,M=I.length;K<M;++K){var L=I[K];if(!L||!L.isAnimated()){continue}if(L.currentFrame<L.totalFrames||L.totalFrames===null){L.currentFrame+=1;if(L.useSeconds){G(L)}L._onTween.fire()}else{Ext.lib.AnimMgr.stop(L,K)}}};var F=function(K){for(var L=0,M=I.length;L<M;++L){if(I[L]==K){return L}}return -1};var G=function(M){var P=M.totalFrames;var K=M.currentFrame;var L=(M.currentFrame*M.duration*1000/M.totalFrames);var N=(new Date()-M.getStartTime());var O=0;if(N<M.duration*1000){O=Math.round((N/L-1)*M.currentFrame)}else{O=P-(K+1)}if(O>0&&isFinite(O)){if(M.currentFrame+O>=P){O=P-(K+1)}M.currentFrame+=O}}};Ext.lib.Bezier=new function(){this.getPosition=function(G,H){var F=G.length;var I=[];for(var J=0;J<F;++J){I[J]=[G[J][0],G[J][1]]}for(var K=1;K<F;++K){for(J=0;J<F-K;++J){I[J][0]=(1-H)*I[J][0]+H*I[parseInt(J+1,10)][0];I[J][1]=(1-H)*I[J][1]+H*I[parseInt(J+1,10)][1]}}return[I[0][0],I[0][1]]}};(function(){Ext.lib.ColorAnim=function(K,L,J,I){Ext.lib.ColorAnim.superclass.constructor.call(this,K,L,J,I)};Ext.extend(Ext.lib.ColorAnim,Ext.lib.AnimBase);var G=Ext.lib;var F=G.ColorAnim.superclass;var H=G.ColorAnim.prototype;H.toString=function(){var J=this.getEl();var I=J.id||J.tagName;return("ColorAnim "+I)};H.patterns.color=/color$/i;H.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;H.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;H.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;H.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;H.parseColor=function(J){if(J.length==3){return J}var I=this.patterns.hex.exec(J);if(I&&I.length==4){return[parseInt(I[1],16),parseInt(I[2],16),parseInt(I[3],16)]}I=this.patterns.rgb.exec(J);if(I&&I.length==4){return[parseInt(I[1],10),parseInt(I[2],10),parseInt(I[3],10)]}I=this.patterns.hex3.exec(J);if(I&&I.length==4){return[parseInt(I[1]+I[1],16),parseInt(I[2]+I[2],16),parseInt(I[3]+I[3],16)]}return null};H.getAttribute=function(L){var J=this.getEl();if(this.patterns.color.test(L)){var I=E(J).getStyle(L);if(this.patterns.transparent.test(I)){var K=J.parentNode;I=E(K).getStyle(L);while(K&&this.patterns.transparent.test(I)){K=K.parentNode;I=E(K).getStyle(L);if(K.tagName.toUpperCase()=="HTML"){I="#fff"}}}}else{I=F.getAttribute.call(this,L)}return I};H.doMethod=function(L,N,K){var I;if(this.patterns.color.test(L)){I=[];for(var J=0,M=N.length;J<M;++J){I[J]=F.doMethod.call(this,L,N[J],K[J])}I="rgb("+Math.floor(I[0])+","+Math.floor(I[1])+","+Math.floor(I[2])+")"}else{I=F.doMethod.call(this,L,N,K)}return I};H.setRuntimeAttribute=function(L){F.setRuntimeAttribute.call(this,L);if(this.patterns.color.test(L)){var J=this.attributes;var N=this.parseColor(this.runtimeAttributes[L].start);var K=this.parseColor(this.runtimeAttributes[L].end);if(typeof J[L]["to"]==="undefined"&&typeof J[L]["by"]!=="undefined"){K=this.parseColor(J[L].by);for(var I=0,M=N.length;I<M;++I){K[I]=N[I]+K[I]}}this.runtimeAttributes[L].start=N;this.runtimeAttributes[L].end=K}}})();Ext.lib.Easing={easeNone:function(H,I,F,G){return F*H/G+I},easeIn:function(H,I,F,G){return F*(H/=G)*H+I},easeOut:function(H,I,F,G){return -F*(H/=G)*(H-2)+I},easeBoth:function(H,I,F,G){if((H/=G/2)<1){return F/2*H*H+I}return -F/2*((--H)*(H-2)-1)+I},easeInStrong:function(H,I,F,G){return F*(H/=G)*H*H*H+I},easeOutStrong:function(H,I,F,G){return -F*((H=H/G-1)*H*H*H-1)+I},easeBothStrong:function(H,I,F,G){if((H/=G/2)<1){return F/2*H*H*H*H+I}return -F/2*((H-=2)*H*H*H-2)+I},elasticIn:function(J,L,F,G,K,H){if(J==0){return L}if((J/=G)==1){return L+F}if(!H){H=G*0.3}if(!K||K<Math.abs(F)){K=F;var I=H/4}else{var I=H/(2*Math.PI)*Math.asin(F/K)}return -(K*Math.pow(2,10*(J-=1))*Math.sin((J*G-I)*(2*Math.PI)/H))+L},elasticOut:function(J,L,F,G,K,H){if(J==0){return L}if((J/=G)==1){return L+F}if(!H){H=G*0.3}if(!K||K<Math.abs(F)){K=F;var I=H/4}else{var I=H/(2*Math.PI)*Math.asin(F/K)}return K*Math.pow(2,-10*J)*Math.sin((J*G-I)*(2*Math.PI)/H)+F+L},elasticBoth:function(J,L,F,G,K,H){if(J==0){return L}if((J/=G/2)==2){return L+F}if(!H){H=G*(0.3*1.5)}if(!K||K<Math.abs(F)){K=F;var I=H/4}else{var I=H/(2*Math.PI)*Math.asin(F/K)}if(J<1){return -0.5*(K*Math.pow(2,10*(J-=1))*Math.sin((J*G-I)*(2*Math.PI)/H))+L}return K*Math.pow(2,-10*(J-=1))*Math.sin((J*G-I)*(2*Math.PI)/H)*0.5+F+L},backIn:function(I,J,F,G,H){if(typeof H=="undefined"){H=1.70158}return F*(I/=G)*I*((H+1)*I-H)+J},backOut:function(I,J,F,G,H){if(typeof H=="undefined"){H=1.70158}return F*((I=I/G-1)*I*((H+1)*I+H)+1)+J},backBoth:function(I,J,F,G,H){if(typeof H=="undefined"){H=1.70158}if((I/=G/2)<1){return F/2*(I*I*(((H*=(1.525))+1)*I-H))+J}return F/2*((I-=2)*I*(((H*=(1.525))+1)*I+H)+2)+J},bounceIn:function(H,I,F,G){return F-Ext.lib.Easing.bounceOut(G-H,0,F,G)+I},bounceOut:function(H,I,F,G){if((H/=G)<(1/2.75)){return F*(7.5625*H*H)+I}else{if(H<(2/2.75)){return F*(7.5625*(H-=(1.5/2.75))*H+0.75)+I}else{if(H<(2.5/2.75)){return F*(7.5625*(H-=(2.25/2.75))*H+0.9375)+I}}}return F*(7.5625*(H-=(2.625/2.75))*H+0.984375)+I},bounceBoth:function(H,I,F,G){if(H<G/2){return Ext.lib.Easing.bounceIn(H*2,0,F,G)*0.5+I}return Ext.lib.Easing.bounceOut(H*2-G,0,F,G)*0.5+F*0.5+I}};(function(){Ext.lib.Motion=function(M,N,L,K){if(M){Ext.lib.Motion.superclass.constructor.call(this,M,N,L,K)}};Ext.extend(Ext.lib.Motion,Ext.lib.ColorAnim);var G=Ext.lib;var F=G.Motion.superclass;var I=G.Motion.prototype;I.toString=function(){var L=this.getEl();var K=L.id||L.tagName;return("Motion "+K)};I.patterns.points=/^points$/i;I.setAttribute=function(M,K,L){if(this.patterns.points.test(M)){L=L||"px";F.setAttribute.call(this,"left",K[0],L);F.setAttribute.call(this,"top",K[1],L)}else{F.setAttribute.call(this,M,K,L)}};I.getAttribute=function(L){if(this.patterns.points.test(L)){var K=[F.getAttribute.call(this,"left"),F.getAttribute.call(this,"top")]}else{K=F.getAttribute.call(this,L)}return K};I.doMethod=function(N,O,M){var K=null;if(this.patterns.points.test(N)){var L=this.method(this.currentFrame,0,100,this.totalFrames)/100;K=G.Bezier.getPosition(this.runtimeAttributes[N],L)}else{K=F.doMethod.call(this,N,O,M)}return K};I.setRuntimeAttribute=function(T){if(this.patterns.points.test(T)){var R=this.getEl();var P=this.attributes;var S;var N=P.points.control||[];var Q;var M,K;if(N.length>0&&!Ext.isArray(N[0])){N=[N]}else{var O=[];for(M=0,K=N.length;M<K;++M){O[M]=N[M]}N=O}Ext.fly(R,"_anim").position();if(H(P.points.from)){Ext.lib.Dom.setXY(R,P.points.from)}else{Ext.lib.Dom.setXY(R,Ext.lib.Dom.getXY(R))}S=this.getAttribute("points");if(H(P.points.to)){Q=J.call(this,P.points.to,S);var L=Ext.lib.Dom.getXY(this.getEl());for(M=0,K=N.length;M<K;++M){N[M]=J.call(this,N[M],S)}}else{if(H(P.points.by)){Q=[S[0]+P.points.by[0],S[1]+P.points.by[1]];for(M=0,K=N.length;M<K;++M){N[M]=[S[0]+N[M][0],S[1]+N[M][1]]}}}this.runtimeAttributes[T]=[S];if(N.length>0){this.runtimeAttributes[T]=this.runtimeAttributes[T].concat(N)}this.runtimeAttributes[T][this.runtimeAttributes[T].length]=Q}else{F.setRuntimeAttribute.call(this,T)}};var J=function(M,K){var L=Ext.lib.Dom.getXY(this.getEl());M=[M[0]-L[0]+K[0],M[1]-L[1]+K[1]];return M};var H=function(K){return(typeof K!=="undefined")}})();(function(){Ext.lib.Scroll=function(K,L,J,I){if(K){Ext.lib.Scroll.superclass.constructor.call(this,K,L,J,I)}};Ext.extend(Ext.lib.Scroll,Ext.lib.ColorAnim);var G=Ext.lib;var F=G.Scroll.superclass;var H=G.Scroll.prototype;H.toString=function(){var J=this.getEl();var I=J.id||J.tagName;return("Scroll "+I)};H.doMethod=function(L,I,K){var J=null;if(L=="scroll"){J=[this.method(this.currentFrame,I[0],K[0]-I[0],this.totalFrames),this.method(this.currentFrame,I[1],K[1]-I[1],this.totalFrames)]}else{J=F.doMethod.call(this,L,I,K)}return J};H.getAttribute=function(K){var I=null;var J=this.getEl();if(K=="scroll"){I=[J.scrollLeft,J.scrollTop]}else{I=F.getAttribute.call(this,K)}return I};H.setAttribute=function(L,I,J){var K=this.getEl();if(L=="scroll"){K.scrollLeft=I[0];K.scrollTop=I[1]}else{F.setAttribute.call(this,L,I,J)}}})()})();Ext.DomHelper=function(){var M=null;var G=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i;var B=/^table|tbody|tr|td$/i;var A=function(U){if(typeof U=="string"){return U}var P="";if(Ext.isArray(U)){for(var S=0,Q=U.length;S<Q;S++){P+=A(U[S])}return P}if(!U.tag){U.tag="div"}P+="<"+U.tag;for(var O in U){if(O=="tag"||O=="children"||O=="cn"||O=="html"||typeof U[O]=="function"){continue}if(O=="style"){var T=U.style;if(typeof T=="function"){T=T.call()}if(typeof T=="string"){P+=' style="'+T+'"'}else{if(typeof T=="object"){P+=' style="';for(var R in T){if(typeof T[R]!="function"){P+=R+":"+T[R]+";"}}P+='"'}}}else{if(O=="cls"){P+=' class="'+U.cls+'"'}else{if(O=="htmlFor"){P+=' for="'+U.htmlFor+'"'}else{P+=" "+O+'="'+U[O]+'"'}}}}if(G.test(U.tag)){P+="/>"}else{P+=">";var V=U.children||U.cn;if(V){P+=A(V)}else{if(U.html){P+=U.html}}P+="</"+U.tag+">"}return P};var N=function(U,P){var T;if(Ext.isArray(U)){T=document.createDocumentFragment();for(var S=0,Q=U.length;S<Q;S++){N(U[S],T)}}else{if(typeof U=="string"){T=document.createTextNode(U)}else{T=document.createElement(U.tag||"div");var R=!!T.setAttribute;for(var O in U){if(O=="tag"||O=="children"||O=="cn"||O=="html"||O=="style"||typeof U[O]=="function"){continue}if(O=="cls"){T.className=U.cls}else{if(R){T.setAttribute(O,U[O])}else{T[O]=U[O]}}}Ext.DomHelper.applyStyles(T,U.style);var V=U.children||U.cn;if(V){N(V,T)}else{if(U.html){T.innerHTML=U.html}}}}if(P){P.appendChild(T)}return T};var J=function(T,R,Q,S){M.innerHTML=[R,Q,S].join("");var O=-1,P=M;while(++O<T){P=P.firstChild}return P};var K="<table>",F="</table>",D=K+"<tbody>",L="</tbody>"+F,I=D+"<tr>",E="</tr>"+L;var H=function(O,P,R,Q){if(!M){M=document.createElement("div")}var S;var T=null;if(O=="td"){if(P=="afterbegin"||P=="beforeend"){return}if(P=="beforebegin"){T=R;R=R.parentNode}else{T=R.nextSibling;R=R.parentNode}S=J(4,I,Q,E)}else{if(O=="tr"){if(P=="beforebegin"){T=R;R=R.parentNode;S=J(3,D,Q,L)}else{if(P=="afterend"){T=R.nextSibling;R=R.parentNode;S=J(3,D,Q,L)}else{if(P=="afterbegin"){T=R.firstChild}S=J(4,I,Q,E)}}}else{if(O=="tbody"){if(P=="beforebegin"){T=R;R=R.parentNode;S=J(2,K,Q,F)}else{if(P=="afterend"){T=R.nextSibling;R=R.parentNode;S=J(2,K,Q,F)}else{if(P=="afterbegin"){T=R.firstChild}S=J(3,D,Q,L)}}}else{if(P=="beforebegin"||P=="afterend"){return}if(P=="afterbegin"){T=R.firstChild}S=J(2,K,Q,F)}}}R.insertBefore(S,T);return S};return{useDom:false,markup:function(O){return A(O)},applyStyles:function(Q,R){if(R){Q=Ext.fly(Q);if(typeof R=="string"){var P=/\s?([a-z\-]*)\:\s?([^;]*);?/gi;var S;while((S=P.exec(R))!=null){Q.setStyle(S[1],S[2])}}else{if(typeof R=="object"){for(var O in R){Q.setStyle(O,R[O])}}else{if(typeof R=="function"){Ext.DomHelper.applyStyles(Q,R.call())}}}}},insertHtml:function(Q,S,R){Q=Q.toLowerCase();if(S.insertAdjacentHTML){if(B.test(S.tagName)){var P;if(P=H(S.tagName.toLowerCase(),Q,S,R)){return P}}switch(Q){case"beforebegin":S.insertAdjacentHTML("BeforeBegin",R);return S.previousSibling;case"afterbegin":S.insertAdjacentHTML("AfterBegin",R);return S.firstChild;case"beforeend":S.insertAdjacentHTML("BeforeEnd",R);return S.lastChild;case"afterend":S.insertAdjacentHTML("AfterEnd",R);return S.nextSibling}throw'Illegal insertion point -> "'+Q+'"'}var O=S.ownerDocument.createRange();var T;switch(Q){case"beforebegin":O.setStartBefore(S);T=O.createContextualFragment(R);S.parentNode.insertBefore(T,S);return S.previousSibling;case"afterbegin":if(S.firstChild){O.setStartBefore(S.firstChild);T=O.createContextualFragment(R);S.insertBefore(T,S.firstChild);return S.firstChild}else{S.innerHTML=R;return S.firstChild}case"beforeend":if(S.lastChild){O.setStartAfter(S.lastChild);T=O.createContextualFragment(R);S.appendChild(T);return S.lastChild}else{S.innerHTML=R;return S.lastChild}case"afterend":O.setStartAfter(S);T=O.createContextualFragment(R);S.parentNode.insertBefore(T,S.nextSibling);return S.nextSibling}throw'Illegal insertion point -> "'+Q+'"'},insertBefore:function(O,Q,P){return this.doInsert(O,Q,P,"beforeBegin")},insertAfter:function(O,Q,P){return this.doInsert(O,Q,P,"afterEnd","nextSibling")},insertFirst:function(O,Q,P){return this.doInsert(O,Q,P,"afterBegin","firstChild")},doInsert:function(R,T,S,U,Q){R=Ext.getDom(R);var P;if(this.useDom){P=N(T,null);(Q==="firstChild"?R:R.parentNode).insertBefore(P,Q?R[Q]:R)}else{var O=A(T);P=this.insertHtml(U,R,O)}return S?Ext.get(P,true):P},append:function(Q,S,R){Q=Ext.getDom(Q);var P;if(this.useDom){P=N(S,null);Q.appendChild(P)}else{var O=A(S);P=this.insertHtml("beforeEnd",Q,O)}return R?Ext.get(P,true):P},overwrite:function(O,Q,P){O=Ext.getDom(O);O.innerHTML=A(Q);return P?Ext.get(O.firstChild,true):O.firstChild},createTemplate:function(P){var O=A(P);return new Ext.Template(O)}}}();Ext.Template=function(F){var B=arguments;if(Ext.isArray(F)){F=F.join("")}else{if(B.length>1){var D=[];for(var E=0,A=B.length;E<A;E++){if(typeof B[E]=="object"){Ext.apply(this,B[E])}else{D[D.length]=B[E]}}F=D.join("")}}this.html=F;if(this.compiled){this.compile()}};Ext.Template.prototype={applyTemplate:function(B){if(this.compiled){return this.compiled(B)}var A=this.disableFormats!==true;var F=Ext.util.Format,D=this;var E=function(H,J,M,I){if(M&&A){if(M.substr(0,5)=="this."){return D.call(M.substr(5),B[J],B)}else{if(I){var L=/^\s*['"](.*)["']\s*$/;I=I.split(",");for(var K=0,G=I.length;K<G;K++){I[K]=I[K].replace(L,"$1")}I=[B[J]].concat(I)}else{I=[B[J]]}return F[M].apply(F,I)}}else{return B[J]!==undefined?B[J]:""}};return this.html.replace(this.re,E)},set:function(A,B){this.html=A;this.compiled=null;if(B){this.compile()}return this},disableFormats:false,re:/\{([\w-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,compile:function(){var fm=Ext.util.Format;var useF=this.disableFormats!==true;var sep=Ext.isGecko?"+":",";var fn=function(m,name,format,args){if(format&&useF){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"("}else{format='this.call("'+format.substr(5)+'", ';args=", values"}}else{args="";format="(values['"+name+"'] == undefined ? '' : "}return"'"+sep+format+"values['"+name+"']"+args+")"+sep+"'"};var body;if(Ext.isGecko){body="this.compiled = function(values){ return '"+this.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn)+"';};"}else{body=["this.compiled = function(values){ return ['"];body.push(this.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn));body.push("'].join('');};");body=body.join("")}eval(body);return this},call:function(D,B,A){return this[D](B,A)},insertFirst:function(B,A,D){return this.doInsert("afterBegin",B,A,D)},insertBefore:function(B,A,D){return this.doInsert("beforeBegin",B,A,D)},insertAfter:function(B,A,D){return this.doInsert("afterEnd",B,A,D)},append:function(B,A,D){return this.doInsert("beforeEnd",B,A,D)},doInsert:function(D,F,B,A){F=Ext.getDom(F);var E=Ext.DomHelper.insertHtml(D,F,this.applyTemplate(B));return A?Ext.get(E,true):E},overwrite:function(B,A,D){B=Ext.getDom(B);B.innerHTML=this.applyTemplate(A);return D?Ext.get(B.firstChild,true):B.firstChild}};Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.DomHelper.Template=Ext.Template;Ext.Template.from=function(B,A){B=Ext.getDom(B);return new Ext.Template(B.value||B.innerHTML,A||"")};Ext.DomQuery=function(){var cache={},simpleCache={},valueCache={};var nonSpace=/\S/;var trimRe=/^\s+|\s+$/g;var tplRe=/\{(\d+)\}/g;var modeRe=/^(\s?[\/>+~]\s?|\s|$)/;var tagTokenRe=/^(#)?([\w-\*]+)/;var nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/;var opera=Ext.isOpera;function child(p,index){var i=0;var n=p.firstChild;while(n){if(n.nodeType==1){if(++i==index){return n}}n=n.nextSibling}return null}function next(n){while((n=n.nextSibling)&&n.nodeType!=1){}return n}function prev(n){while((n=n.previousSibling)&&n.nodeType!=1){}return n}function children(d){var n=d.firstChild,ni=-1;while(n){var nx=n.nextSibling;if(n.nodeType==3&&!nonSpace.test(n.nodeValue)){d.removeChild(n)}else{n.nodeIndex=++ni}n=nx}return this}function byClassName(c,a,v){if(!v){return c}var r=[],ri=-1,cn;for(var i=0,ci;ci=c[i];i++){if((" "+ci.className+" ").indexOf(v)!=-1){r[++ri]=ci}}return r}function attrValue(n,attr){if(!n.tagName&&typeof n.length!="undefined"){n=n[0]}if(!n){return null}if(attr=="for"){return n.htmlFor}if(attr=="class"||attr=="className"){return n.className}return n.getAttribute(attr)||n[attr]}function getNodes(ns,mode,tagName){var result=[],ri=-1,cs;if(!ns){return result}tagName=tagName||"*";if(typeof ns.getElementsByTagName!="undefined"){ns=[ns]}if(!mode){for(var i=0,ni;ni=ns[i];i++){cs=ni.getElementsByTagName(tagName);for(var j=0,ci;ci=cs[j];j++){result[++ri]=ci}}}else{if(mode=="/"||mode==">"){var utag=tagName.toUpperCase();for(var i=0,ni,cn;ni=ns[i];i++){cn=opera?ni.childNodes:(ni.children||ni.childNodes);for(var j=0,cj;cj=cn[j];j++){if(cj.nodeName==utag||cj.nodeName==tagName||tagName=="*"){result[++ri]=cj}}}}else{if(mode=="+"){var utag=tagName.toUpperCase();for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(n&&(n.nodeName==utag||n.nodeName==tagName||tagName=="*")){result[++ri]=n}}}else{if(mode=="~"){var utag=tagName.toUpperCase();for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)){if(n.nodeName==utag||n.nodeName==tagName||tagName=="*"){result[++ri]=n}}}}}}}return result}function concat(a,b){if(b.slice){return a.concat(b)}for(var i=0,l=b.length;i<l;i++){a[a.length]=b[i]}return a}function byTag(cs,tagName){if(cs.tagName||cs==document){cs=[cs]}if(!tagName){return cs}var r=[],ri=-1;tagName=tagName.toLowerCase();for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType==1&&ci.tagName.toLowerCase()==tagName){r[++ri]=ci}}return r}function byId(cs,attr,id){if(cs.tagName||cs==document){cs=[cs]}if(!id){return cs}var r=[],ri=-1;for(var i=0,ci;ci=cs[i];i++){if(ci&&ci.id==id){r[++ri]=ci;return r}}return r}function byAttribute(cs,attr,value,op,custom){var r=[],ri=-1,st=custom=="{";var f=Ext.DomQuery.operators[op];for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType!=1){continue}var a;if(st){a=Ext.DomQuery.getStyle(ci,attr)}else{if(attr=="class"||attr=="className"){a=ci.className}else{if(attr=="for"){a=ci.htmlFor}else{if(attr=="href"){a=ci.getAttribute("href",2)}else{a=ci.getAttribute(attr)}}}}if((f&&f(a,value))||(!f&&a)){r[++ri]=ci}}return r}function byPseudo(cs,name,value){return Ext.DomQuery.pseudos[name](cs,value)}var isIE=window.ActiveXObject?true:false;eval("var batch = 30803;");var key=30803;function nodupIEXml(cs){var d=++key;cs[0].setAttribute("_nodup",d);var r=[cs[0]];for(var i=1,len=cs.length;i<len;i++){var c=cs[i];if(!c.getAttribute("_nodup")!=d){c.setAttribute("_nodup",d);r[r.length]=c}}for(var i=0,len=cs.length;i<len;i++){cs[i].removeAttribute("_nodup")}return r}function nodup(cs){if(!cs){return[]}var len=cs.length,c,i,r=cs,cj,ri=-1;if(!len||typeof cs.nodeType!="undefined"||len==1){return cs}if(isIE&&typeof cs[0].selectSingleNode!="undefined"){return nodupIEXml(cs)}var d=++key;cs[0]._nodup=d;for(i=1;c=cs[i];i++){if(c._nodup!=d){c._nodup=d}else{r=[];for(var j=0;j<i;j++){r[++ri]=cs[j]}for(j=i+1;cj=cs[j];j++){if(cj._nodup!=d){cj._nodup=d;r[++ri]=cj}}return r}}return r}function quickDiffIEXml(c1,c2){var d=++key;for(var i=0,len=c1.length;i<len;i++){c1[i].setAttribute("_qdiff",d)}var r=[];for(var i=0,len=c2.length;i<len;i++){if(c2[i].getAttribute("_qdiff")!=d){r[r.length]=c2[i]}}for(var i=0,len=c1.length;i<len;i++){c1[i].removeAttribute("_qdiff")}return r}function quickDiff(c1,c2){var len1=c1.length;if(!len1){return c2}if(isIE&&c1[0].selectSingleNode){return quickDiffIEXml(c1,c2)}var d=++key;for(var i=0;i<len1;i++){c1[i]._qdiff=d}var r=[];for(var i=0,len=c2.length;i<len;i++){if(c2[i]._qdiff!=d){r[r.length]=c2[i]}}return r}function quickId(ns,mode,root,id){if(ns==root){var d=root.ownerDocument||root;return d.getElementById(id)}ns=getNodes(ns,mode,"*");return byId(ns,null,id)}return{getStyle:function(el,name){return Ext.fly(el).getStyle(name)},compile:function(path,type){type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"];var q=path,mode,lq;var tk=Ext.DomQuery.matchers;var tklen=tk.length;var mm;var lmode=q.match(modeRe);if(lmode&&lmode[1]){fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";';q=q.replace(lmode[1],"")}while(path.substr(0,1)=="/"){path=path.substr(1)}while(q&&lq!=q){lq=q;var tm=q.match(tagTokenRe);if(type=="select"){if(tm){if(tm[1]=="#"){fn[fn.length]='n = quickId(n, mode, root, "'+tm[2]+'");'}else{fn[fn.length]='n = getNodes(n, mode, "'+tm[2]+'");'}q=q.replace(tm[0],"")}else{if(q.substr(0,1)!="@"){fn[fn.length]='n = getNodes(n, mode, "*");'}}}else{if(tm){if(tm[1]=="#"){fn[fn.length]='n = byId(n, null, "'+tm[2]+'");'}else{fn[fn.length]='n = byTag(n, "'+tm[2]+'");'}q=q.replace(tm[0],"")}}while(!(mm=q.match(modeRe))){var matched=false;for(var j=0;j<tklen;j++){var t=tk[j];var m=q.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(x,i){return m[i]});q=q.replace(m[0],"");matched=true;break}}if(!matched){throw'Error parsing selector, parsing failed at "'+q+'"'}}if(mm[1]){fn[fn.length]='mode="'+mm[1].replace(trimRe,"")+'";';q=q.replace(mm[1],"")}}fn[fn.length]="return nodup(n);\n}";eval(fn.join(""));return f},select:function(path,root,type){if(!root||root==document){root=document}if(typeof root=="string"){root=document.getElementById(root)}var paths=path.split(",");var results=[];for(var i=0,len=paths.length;i<len;i++){var p=paths[i].replace(trimRe,"");if(!cache[p]){cache[p]=Ext.DomQuery.compile(p);if(!cache[p]){throw p+" is not a valid selector"}}var result=cache[p](root);if(result&&result!=document){results=results.concat(result)}}if(paths.length>1){return nodup(results)}return results},selectNode:function(path,root){return Ext.DomQuery.select(path,root)[0]},selectValue:function(path,root,defaultValue){path=path.replace(trimRe,"");if(!valueCache[path]){valueCache[path]=Ext.DomQuery.compile(path,"select")}var n=valueCache[path](root);n=n[0]?n[0]:n;var v=(n&&n.firstChild?n.firstChild.nodeValue:null);return((v===null||v===undefined||v==="")?defaultValue:v)},selectNumber:function(path,root,defaultValue){var v=Ext.DomQuery.selectValue(path,root,defaultValue||0);return parseFloat(v)},is:function(el,ss){if(typeof el=="string"){el=document.getElementById(el)}var isArray=Ext.isArray(el);var result=Ext.DomQuery.filter(isArray?el:[el],ss);return isArray?(result.length==el.length):(result.length>0)},filter:function(els,ss,nonMatches){ss=ss.replace(trimRe,"");if(!simpleCache[ss]){simpleCache[ss]=Ext.DomQuery.compile(ss,"simple")}var result=simpleCache[ss](els);return nonMatches?quickDiff(result,els):result},matchers:[{re:/^\.([\w-]+)/,select:'n = byClassName(n, null, " {1} ");'},{re:/^\:([\w-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w-]+)/,select:'n = byId(n, null, "{1}");'},{re:/^@([\w-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(a,v){return a==v},"!=":function(a,v){return a!=v},"^=":function(a,v){return a&&a.substr(0,v.length)==v},"$=":function(a,v){return a&&a.substr(a.length-v.length)==v},"*=":function(a,v){return a&&a.indexOf(v)!==-1},"%=":function(a,v){return(a%v)==0},"|=":function(a,v){return a&&(a==v||a.substr(0,v.length+1)==v+"-")},"~=":function(a,v){return a&&(" "+a+" ").indexOf(" "+v+" ")!=-1}},pseudos:{"first-child":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.previousSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},"last-child":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},"nth-child":function(c,a){var r=[],ri=-1;var m=nthRe.exec(a=="even"&&"2n"||a=="odd"&&"2n+1"||!nthRe2.test(a)&&"n+"+a||a);var f=(m[1]||1)-0,l=m[2]-0;for(var i=0,n;n=c[i];i++){var pn=n.parentNode;if(batch!=pn._batch){var j=0;for(var cn=pn.firstChild;cn;cn=cn.nextSibling){if(cn.nodeType==1){cn.nodeIndex=++j}}pn._batch=batch}if(f==1){if(l==0||n.nodeIndex==l){r[++ri]=n}}else{if((n.nodeIndex+l)%f==0){r[++ri]=n}}}return r},"only-child":function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(!prev(ci)&&!next(ci)){r[++ri]=ci}}return r},empty:function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var cns=ci.childNodes,j=0,cn,empty=true;while(cn=cns[j]){++j;if(cn.nodeType==1||cn.nodeType==3){empty=false;break}}if(empty){r[++ri]=ci}}return r},contains:function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if((ci.textContent||ci.innerText||"").indexOf(v)!=-1){r[++ri]=ci}}return r},nodeValue:function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.firstChild&&ci.firstChild.nodeValue==v){r[++ri]=ci}}return r},checked:function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.checked==true){r[++ri]=ci}}return r},not:function(c,ss){return Ext.DomQuery.filter(c,ss,true)},any:function(c,selectors){var ss=selectors.split("|");var r=[],ri=-1,s;for(var i=0,ci;ci=c[i];i++){for(var j=0;s=ss[j];j++){if(Ext.DomQuery.is(ci,s)){r[++ri]=ci;break}}}return r},odd:function(c){return this["nth-child"](c,"odd")},even:function(c){return this["nth-child"](c,"even")},nth:function(c,a){return c[a-1]||[]},first:function(c){return c[0]||[]},last:function(c){return c[c.length-1]||[]},has:function(c,ss){var s=Ext.DomQuery.select;var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(s(ss,ci).length>0){r[++ri]=ci}}return r},next:function(c,ss){var is=Ext.DomQuery.is;var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=next(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r},prev:function(c,ss){var is=Ext.DomQuery.is;var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=prev(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r}}}}();Ext.query=Ext.DomQuery.select;Ext.util.Observable=function(){if(this.listeners){this.on(this.listeners);delete this.listeners}};Ext.util.Observable.prototype={fireEvent:function(){if(this.eventsSuspended!==true){var A=this.events[arguments[0].toLowerCase()];if(typeof A=="object"){return A.fire.apply(A,Array.prototype.slice.call(arguments,1))}}return true},filterOptRe:/^(?:scope|delay|buffer|single)$/,addListener:function(A,D,B,G){if(typeof A=="object"){G=A;for(var F in G){if(this.filterOptRe.test(F)){continue}if(typeof G[F]=="function"){this.addListener(F,G[F],G.scope,G)}else{this.addListener(F,G[F].fn,G[F].scope,G[F])}}return}G=(!G||typeof G=="boolean")?{}:G;A=A.toLowerCase();var E=this.events[A]||true;if(typeof E=="boolean"){E=new Ext.util.Event(this,A);this.events[A]=E}E.addListener(D,B,G)},removeListener:function(A,D,B){var E=this.events[A.toLowerCase()];if(typeof E=="object"){E.removeListener(D,B)}},purgeListeners:function(){for(var A in this.events){if(typeof this.events[A]=="object"){this.events[A].clearListeners()}}},relayEvents:function(G,E){var F=function(H){return function(){return this.fireEvent.apply(this,Ext.combine(H,Array.prototype.slice.call(arguments,0)))}};for(var D=0,A=E.length;D<A;D++){var B=E[D];if(!this.events[B]){this.events[B]=true}G.on(B,F(B),this)}},addEvents:function(E){if(!this.events){this.events={}}if(typeof E=="string"){for(var D=0,A=arguments,B;B=A[D];D++){if(!this.events[A[D]]){this.events[A[D]]=true}}}else{Ext.applyIf(this.events,E)}},hasListener:function(A){var B=this.events[A];return typeof B=="object"&&B.listeners.length>0},suspendEvents:function(){this.eventsSuspended=true},resumeEvents:function(){this.eventsSuspended=false},getMethodEvent:function(H){if(!this.methodEvents){this.methodEvents={}}var G=this.methodEvents[H];if(!G){G={};this.methodEvents[H]=G;G.originalFn=this[H];G.methodName=H;G.before=[];G.after=[];var D,B,E;var F=this;var A=function(K,J,I){if((B=K.apply(J||F,I))!==undefined){if(typeof B==="object"){if(B.returnValue!==undefined){D=B.returnValue}else{D=B}if(B.cancel===true){E=true}}else{if(B===false){E=true}else{D=B}}}};this[H]=function(){D=B=undefined;E=false;var J=Array.prototype.slice.call(arguments,0);for(var K=0,I=G.before.length;K<I;K++){A(G.before[K].fn,G.before[K].scope,J);if(E){return D}}if((B=G.originalFn.apply(F,J))!==undefined){D=B}for(var K=0,I=G.after.length;K<I;K++){A(G.after[K].fn,G.after[K].scope,J);if(E){return D}}return D}}return G},beforeMethod:function(E,B,A){var D=this.getMethodEvent(E);D.before.push({fn:B,scope:A})},afterMethod:function(E,B,A){var D=this.getMethodEvent(E);D.after.push({fn:B,scope:A})},removeMethodListener:function(G,E,D){var F=this.getMethodEvent(G);for(var B=0,A=F.before.length;B<A;B++){if(F.before[B].fn==E&&F.before[B].scope==D){F.before.splice(B,1);return}}for(var B=0,A=F.after.length;B<A;B++){if(F.after[B].fn==E&&F.after[B].scope==D){F.after.splice(B,1);return}}}};Ext.util.Observable.prototype.on=Ext.util.Observable.prototype.addListener;Ext.util.Observable.prototype.un=Ext.util.Observable.prototype.removeListener;Ext.util.Observable.capture=function(D,B,A){D.fireEvent=D.fireEvent.createInterceptor(B,A)};Ext.util.Observable.releaseCapture=function(A){A.fireEvent=Ext.util.Observable.prototype.fireEvent};(function(){var B=function(G,H,F){var E=new Ext.util.DelayedTask();return function(){E.delay(H.buffer,G,F,Array.prototype.slice.call(arguments,0))}};var D=function(G,H,F,E){return function(){H.removeListener(F,E);return G.apply(E,arguments)}};var A=function(F,G,E){return function(){var H=Array.prototype.slice.call(arguments,0);setTimeout(function(){F.apply(E,H)},G.delay||10)}};Ext.util.Event=function(F,E){this.name=E;this.obj=F;this.listeners=[]};Ext.util.Event.prototype={addListener:function(H,G,F){G=G||this.obj;if(!this.isListening(H,G)){var E=this.createListener(H,G,F);if(!this.firing){this.listeners.push(E)}else{this.listeners=this.listeners.slice(0);this.listeners.push(E)}}},createListener:function(H,G,I){I=I||{};G=G||this.obj;var E={fn:H,scope:G,options:I};var F=H;if(I.delay){F=A(F,I,G)}if(I.single){F=D(F,this,H,G)}if(I.buffer){F=B(F,I,G)}E.fireFn=F;return E},findListener:function(J,I){I=I||this.obj;var G=this.listeners;for(var H=0,E=G.length;H<E;H++){var F=G[H];if(F.fn==J&&F.scope==I){return H}}return -1},isListening:function(F,E){return this.findListener(F,E)!=-1},removeListener:function(G,F){var E;if((E=this.findListener(G,F))!=-1){if(!this.firing){this.listeners.splice(E,1)}else{this.listeners=this.listeners.slice(0);this.listeners.splice(E,1)}return true}return false},clearListeners:function(){this.listeners=[]},fire:function(){var G=this.listeners,J,E=G.length;if(E>0){this.firing=true;var H=Array.prototype.slice.call(arguments,0);for(var I=0;I<E;I++){var F=G[I];if(F.fireFn.apply(F.scope||this.obj||window,arguments)===false){this.firing=false;return false}}this.firing=false}return true}}})();Ext.EventManager=function(){var a,S,O=false;var P,Y,J,U;var R=Ext.lib.Event;var T=Ext.lib.Dom;var A="Ext";var L={};var Q=function(j,E,h,g,c){var l=Ext.id(j);if(!L[l]){L[l]={}}var k=L[l];if(!k[E]){k[E]=[]}var D=k[E];D.push({id:l,ename:E,fn:h,wrap:g,scope:c});R.on(j,E,g);if(E=="mousewheel"&&j.addEventListener){j.addEventListener("DOMMouseScroll",g,false);R.on(window,"unload",function(){j.removeEventListener("DOMMouseScroll",g,false)})}if(E=="mousedown"&&j==document){Ext.EventManager.stoppedMouseDownEvent.addListener(g)}};var K=function(c,h,o,q){c=Ext.getDom(c);var D=Ext.id(c),p=L[D],E;if(p){var k=p[h],g;if(k){for(var j=0,m=k.length;j<m;j++){g=k[j];if(g.fn==o&&(!q||g.scope==q)){E=g.wrap;R.un(c,h,E);k.splice(j,1);break}}}}if(h=="mousewheel"&&c.addEventListener&&E){c.removeEventListener("DOMMouseScroll",E,false)}if(h=="mousedown"&&c==document&&E){Ext.EventManager.stoppedMouseDownEvent.removeListener(E)}};var G=function(h){h=Ext.getDom(h);var k=Ext.id(h),j=L[k],E;if(j){for(var g in j){if(j.hasOwnProperty(g)){E=j[g];for(var c=0,D=E.length;c<D;c++){R.un(h,g,E[c].wrap);E[c]=null}}j[g]=null}delete L[k]}};var F=function(){if(!O){O=true;Ext.isReady=true;if(S){clearInterval(S)}if(Ext.isGecko||Ext.isOpera){document.removeEventListener("DOMContentLoaded",F,false)}if(Ext.isIE){var D=document.getElementById("ie-deferred-loader");if(D){D.onreadystatechange=null;D.parentNode.removeChild(D)}}if(a){a.fire();a.clearListeners()}}};var B=function(){a=new Ext.util.Event();if(Ext.isGecko||Ext.isOpera){document.addEventListener("DOMContentLoaded",F,false)}else{if(Ext.isIE){document.write('<script id="ie-deferred-loader" defer="defer" src="//:"><\/script>');var D=document.getElementById("ie-deferred-loader");D.onreadystatechange=function(){if(this.readyState=="complete"){F()}}}else{if(Ext.isWebKit){S=setInterval(function(){var E=document.readyState;if(E=="complete"){F()}},10)}}}R.on(window,"load",F)};var X=function(E,c){var D=new Ext.util.DelayedTask(E);return function(g){g=new Ext.EventObjectImpl(g);D.delay(c.buffer,E,null,[g])}};var V=function(j,g,D,c,E){return function(h){Ext.EventManager.removeListener(g,D,c,E);j(h)}};var I=function(D,E){return function(c){c=new Ext.EventObjectImpl(c);setTimeout(function(){D(c)},E.delay||10)}};var N=function(c,E,D,l,k){var m=(!D||typeof D=="boolean")?{}:D;l=l||m.fn;k=k||m.scope;var j=Ext.getDom(c);if(!j){throw'Error listening for "'+E+'". Element "'+c+"\" doesn't exist."}var g=function(o){if(!window[A]){return}o=Ext.EventObject.setEvent(o);var h;if(m.delegate){h=o.getTarget(m.delegate,j);if(!h){return}}else{h=o.target}if(m.stopEvent===true){o.stopEvent()}if(m.preventDefault===true){o.preventDefault()}if(m.stopPropagation===true){o.stopPropagation()}if(m.normalized===false){o=o.browserEvent}l.call(k||j,o,h,m)};if(m.delay){g=I(g,m)}if(m.single){g=V(g,j,E,l,k)}if(m.buffer){g=X(g,m)}Q(j,E,l,g,k);return g};var M=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,Z=0,H=0;var W={addListener:function(c,D,h,g,E){if(typeof D=="object"){var k=D;for(var j in k){if(M.test(j)){continue}if(typeof k[j]=="function"){N(c,j,k,k[j],k.scope)}else{N(c,j,k[j])}}return}return N(c,D,E,h,g)},removeListener:function(E,D,g,c){return K(E,D,g,c)},removeAll:function(D){return G(D)},onDocumentReady:function(c,E,D){if(O){a.addListener(c,E,D);a.fire();a.clearListeners();return}if(!a){B()}D=D||{};if(!D.delay){D.delay=1}a.addListener(c,E,D)},doResizeEvent:function(){var E=T.getViewHeight(),D=T.getViewWidth();if(H!=E||Z!=D){P.fire(Z=D,H=E)}},onWindowResize:function(c,E,D){if(!P){P=new Ext.util.Event();Y=new Ext.util.DelayedTask(this.doResizeEvent);R.on(window,"resize",this.fireWindowResize,this)}P.addListener(c,E,D)},fireWindowResize:function(){if(P){if((Ext.isIE||Ext.isAir)&&Y){Y.delay(50)}else{P.fire(T.getViewWidth(),T.getViewHeight())}}},onTextResize:function(g,c,D){if(!J){J=new Ext.util.Event();var E=new Ext.Element(document.createElement("div"));E.dom.className="x-text-resize";E.dom.innerHTML="X";E.appendTo(document.body);U=E.dom.offsetHeight;setInterval(function(){if(E.dom.offsetHeight!=U){J.fire(U,U=E.dom.offsetHeight)}},this.textResizeInterval)}J.addListener(g,c,D)},removeResizeListener:function(E,D){if(P){P.removeListener(E,D)}},fireResize:function(){if(P){P.fire(T.getViewWidth(),T.getViewHeight())}},ieDeferSrc:false,textResizeInterval:50};W.on=W.addListener;W.un=W.removeListener;W.stoppedMouseDownEvent=new Ext.util.Event();return W}();Ext.onReady=Ext.EventManager.onDocumentReady;(function(){var A=function(){var D=document.body||document.getElementsByTagName("body")[0];if(!D){return false}var B=[" ",Ext.isIE?"ext-ie "+(Ext.isIE6?"ext-ie6":(Ext.isIE7?"ext-ie7":"ext-ie8")):Ext.isGecko?"ext-gecko "+(Ext.isGecko2?"ext-gecko2":"ext-gecko3"):Ext.isOpera?"ext-opera":Ext.isSafari?"ext-safari":Ext.isChrome?"ext-chrome":""];if(Ext.isMac){B.push("ext-mac")}if(Ext.isLinux){B.push("ext-linux")}if(Ext.isStrict||Ext.isBorderBox){var E=D.parentNode;if(E){E.className+=Ext.isStrict?" ext-strict":" ext-border-box"}}D.className+=B.join(" ");return true};if(!A()){Ext.onReady(A)}})();Ext.EventObject=function(){var B=Ext.lib.Event;var A={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35};var D=Ext.isIE?{1:0,4:1,2:2}:(Ext.isWebKit?{1:0,2:1,3:2}:{0:0,1:1,2:2});Ext.EventObjectImpl=function(E){if(E){this.setEvent(E.browserEvent||E)}};Ext.EventObjectImpl.prototype={browserEvent:null,button:-1,shiftKey:false,ctrlKey:false,altKey:false,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGEUP:33,PAGE_DOWN:34,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,setEvent:function(E){if(E==this||(E&&E.browserEvent)){return E}this.browserEvent=E;if(E){this.button=E.button?D[E.button]:(E.which?E.which-1:-1);if(E.type=="click"&&this.button==-1){this.button=0}this.type=E.type;this.shiftKey=E.shiftKey;this.ctrlKey=E.ctrlKey||E.metaKey;this.altKey=E.altKey;this.keyCode=E.keyCode;this.charCode=E.charCode;this.target=B.getTarget(E);this.xy=B.getXY(E)}else{this.button=-1;this.shiftKey=false;this.ctrlKey=false;this.altKey=false;this.keyCode=0;this.charCode=0;this.target=null;this.xy=[0,0]}return this},stopEvent:function(){if(this.browserEvent){if(this.browserEvent.type=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.fire(this)}B.stopEvent(this.browserEvent)}},preventDefault:function(){if(this.browserEvent){B.preventDefault(this.browserEvent)}},isNavKeyPress:function(){var E=this.keyCode;E=Ext.isSafari?(A[E]||E):E;return(E>=33&&E<=40)||E==this.RETURN||E==this.TAB||E==this.ESC},isSpecialKey:function(){var E=this.keyCode;E=Ext.isSafari?(A[E]||E):E;return(this.type=="keypress"&&this.ctrlKey)||this.isNavKeyPress()||(E==this.BACKSPACE)||(E>=16&&E<=20)||(E>=44&&E<=45)},stopPropagation:function(){if(this.browserEvent){if(this.browserEvent.type=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.fire(this)}B.stopPropagation(this.browserEvent)}},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){var E=this.keyCode||this.charCode;return Ext.isSafari?(A[E]||E):E},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getTime:function(){if(this.browserEvent){return B.getTime(this.browserEvent)}return null},getXY:function(){return this.xy},getTarget:function(F,G,E){return F?Ext.fly(this.target).findParent(F,G,E):(E?Ext.get(this.target):this.target)},getRelatedTarget:function(){if(this.browserEvent){return B.getRelatedTarget(this.browserEvent)}return null},getWheelDelta:function(){var E=this.browserEvent;var F=0;if(E.wheelDelta){F=E.wheelDelta/120}else{if(E.detail){F=-E.detail/3}}return F},hasModifier:function(){return((this.ctrlKey||this.altKey)||this.shiftKey)?true:false},within:function(G,H,E){var F=this[H?"getRelatedTarget":"getTarget"]();return F&&((E?(F===Ext.getDom(G)):false)||Ext.fly(G).contains(F))},getPoint:function(){return new Ext.lib.Point(this.xy[0],this.xy[1])}};return new Ext.EventObjectImpl()}();(function(){var D=Ext.lib.Dom;var E=Ext.lib.Event;var A=Ext.lib.Anim;var propCache={};var camelRe=/(-[a-z])/gi;var camelFn=function(m,a){return a.charAt(1).toUpperCase()};var view=document.defaultView;Ext.Element=function(element,forceNew){var dom=typeof element=="string"?document.getElementById(element):element;if(!dom){return null}var id=dom.id;if(forceNew!==true&&id&&Ext.Element.cache[id]){return Ext.Element.cache[id]}this.dom=dom;this.id=id||Ext.id(dom)};var El=Ext.Element;El.prototype={originalDisplay:"",visibilityMode:1,defaultUnit:"px",setVisibilityMode:function(visMode){this.visibilityMode=visMode;return this},enableDisplayMode:function(display){this.setVisibilityMode(El.DISPLAY);if(typeof display!="undefined"){this.originalDisplay=display}return this},findParent:function(simpleSelector,maxDepth,returnEl){var p=this.dom,b=document.body,depth=0,dq=Ext.DomQuery,stopEl;maxDepth=maxDepth||50;if(typeof maxDepth!="number"){stopEl=Ext.getDom(maxDepth);maxDepth=Number.MAX_VALUE}while(p&&p.nodeType==1&&depth<maxDepth&&p!=b&&p!=stopEl){if(dq.is(p,simpleSelector)){return returnEl?Ext.get(p):p}depth++;p=p.parentNode}return null},findParentNode:function(simpleSelector,maxDepth,returnEl){var p=Ext.fly(this.dom.parentNode,"_internal");return p?p.findParent(simpleSelector,maxDepth,returnEl):null},up:function(simpleSelector,maxDepth){return this.findParentNode(simpleSelector,maxDepth,true)},is:function(simpleSelector){return Ext.DomQuery.is(this.dom,simpleSelector)},animate:function(args,duration,onComplete,easing,animType){this.anim(args,{duration:duration,callback:onComplete,easing:easing},animType);return this},anim:function(args,opt,animType,defaultDur,defaultEase,cb){animType=animType||"run";opt=opt||{};var anim=Ext.lib.Anim[animType](this.dom,args,(opt.duration||defaultDur)||0.35,(opt.easing||defaultEase)||"easeOut",function(){Ext.callback(cb,this);Ext.callback(opt.callback,opt.scope||this,[this,opt])},this);opt.anim=anim;return anim},preanim:function(a,i){return !a[i]?false:(typeof a[i]=="object"?a[i]:{duration:a[i+1],callback:a[i+2],easing:a[i+3]})},clean:function(forceReclean){if(this.isCleaned&&forceReclean!==true){return this}var ns=/\S/;var d=this.dom,n=d.firstChild,ni=-1;while(n){var nx=n.nextSibling;if(n.nodeType==3&&!ns.test(n.nodeValue)){d.removeChild(n)}else{n.nodeIndex=++ni}n=nx}this.isCleaned=true;return this},scrollIntoView:function(container,hscroll){var c=Ext.getDom(container)||Ext.getBody().dom;var el=this.dom;var o=this.getOffsetsTo(c),l=o[0]+c.scrollLeft,t=o[1]+c.scrollTop,b=t+el.offsetHeight,r=l+el.offsetWidth;var ch=c.clientHeight;var ct=parseInt(c.scrollTop,10);var cl=parseInt(c.scrollLeft,10);var cb=ct+ch;var cr=cl+c.clientWidth;if(el.offsetHeight>ch||t<ct){c.scrollTop=t}else{if(b>cb){c.scrollTop=b-ch}}c.scrollTop=c.scrollTop;if(hscroll!==false){if(el.offsetWidth>c.clientWidth||l<cl){c.scrollLeft=l}else{if(r>cr){c.scrollLeft=r-c.clientWidth}}c.scrollLeft=c.scrollLeft}return this},scrollChildIntoView:function(child,hscroll){Ext.fly(child,"_scrollChildIntoView").scrollIntoView(this,hscroll)},autoHeight:function(animate,duration,onComplete,easing){var oldHeight=this.getHeight();this.clip();this.setHeight(1);setTimeout(function(){var height=parseInt(this.dom.scrollHeight,10);if(!animate){this.setHeight(height);this.unclip();if(typeof onComplete=="function"){onComplete()}}else{this.setHeight(oldHeight);this.setHeight(height,animate,duration,function(){this.unclip();if(typeof onComplete=="function"){onComplete()}}.createDelegate(this),easing)}}.createDelegate(this),0);return this},contains:function(el){if(!el){return false}return D.isAncestor(this.dom,el.dom?el.dom:el)},isVisible:function(deep){var vis=!(this.getStyle("visibility")=="hidden"||this.getStyle("display")=="none");if(deep!==true||!vis){return vis}var p=this.dom.parentNode;while(p&&p.tagName.toLowerCase()!="body"){if(!Ext.fly(p,"_isVisible").isVisible()){return false}p=p.parentNode}return true},select:function(selector,unique){return El.select(selector,unique,this.dom)},query:function(selector){return Ext.DomQuery.select(selector,this.dom)},child:function(selector,returnDom){var n=Ext.DomQuery.selectNode(selector,this.dom);return returnDom?n:Ext.get(n)},down:function(selector,returnDom){var n=Ext.DomQuery.selectNode(" > "+selector,this.dom);return returnDom?n:Ext.get(n)},initDD:function(group,config,overrides){var dd=new Ext.dd.DD(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},initDDProxy:function(group,config,overrides){var dd=new Ext.dd.DDProxy(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},initDDTarget:function(group,config,overrides){var dd=new Ext.dd.DDTarget(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},setVisible:function(visible,animate){if(!animate||!A){if(this.visibilityMode==El.DISPLAY){this.setDisplayed(visible)}else{this.fixDisplay();this.dom.style.visibility=visible?"visible":"hidden"}}else{var dom=this.dom;var visMode=this.visibilityMode;if(visible){this.setOpacity(0.01);this.setVisible(true)}this.anim({opacity:{to:(visible?1:0)}},this.preanim(arguments,1),null,0.35,"easeIn",function(){if(!visible){if(visMode==El.DISPLAY){dom.style.display="none"}else{dom.style.visibility="hidden"}Ext.get(dom).setOpacity(1)}})}return this},isDisplayed:function(){return this.getStyle("display")!="none"},toggle:function(animate){this.setVisible(!this.isVisible(),this.preanim(arguments,0));return this},setDisplayed:function(value){if(typeof value=="boolean"){value=value?this.originalDisplay:"none"}this.setStyle("display",value);return this},focus:function(){try{this.dom.focus()}catch(e){}return this},blur:function(){try{this.dom.blur()}catch(e){}return this},addClass:function(className){if(Ext.isArray(className)){for(var i=0,len=className.length;i<len;i++){this.addClass(className[i])}}else{if(className&&!this.hasClass(className)){this.dom.className=this.dom.className+" "+className}}return this},radioClass:function(className){var siblings=this.dom.parentNode.childNodes;for(var i=0;i<siblings.length;i++){var s=siblings[i];if(s.nodeType==1){Ext.get(s).removeClass(className)}}this.addClass(className);return this},removeClass:function(className){if(!className||!this.dom.className){return this}if(Ext.isArray(className)){for(var i=0,len=className.length;i<len;i++){this.removeClass(className[i])}}else{if(this.hasClass(className)){var re=this.classReCache[className];if(!re){re=new RegExp("(?:^|\\s+)"+className+"(?:\\s+|$)","g");this.classReCache[className]=re}this.dom.className=this.dom.className.replace(re," ")}}return this},classReCache:{},toggleClass:function(className){if(this.hasClass(className)){this.removeClass(className)}else{this.addClass(className)}return this},hasClass:function(className){return className&&(" "+this.dom.className+" ").indexOf(" "+className+" ")!=-1},replaceClass:function(oldClassName,newClassName){this.removeClass(oldClassName);this.addClass(newClassName);return this},getStyles:function(){var a=arguments,len=a.length,r={};for(var i=0;i<len;i++){r[a[i]]=this.getStyle(a[i])}return r},getStyle:function(){return view&&view.getComputedStyle?function(prop){var el=this.dom,v,cs,camel;if(prop=="float"){prop="cssFloat"}if(v=el.style[prop]){return v}if(cs=view.getComputedStyle(el,"")){if(!(camel=propCache[prop])){camel=propCache[prop]=prop.replace(camelRe,camelFn)}return cs[camel]}return null}:function(prop){var el=this.dom,v,cs,camel;if(prop=="opacity"){if(typeof el.style.filter=="string"){var m=el.style.filter.match(/alpha\(opacity=(.*)\)/i);if(m){var fv=parseFloat(m[1]);if(!isNaN(fv)){return fv?fv/100:0}}}return 1}else{if(prop=="float"){prop="styleFloat"}}if(!(camel=propCache[prop])){camel=propCache[prop]=prop.replace(camelRe,camelFn)}if(v=el.style[camel]){return v}if(cs=el.currentStyle){return cs[camel]}return null}}(),setStyle:function(prop,value){if(typeof prop=="string"){var camel;if(!(camel=propCache[prop])){camel=propCache[prop]=prop.replace(camelRe,camelFn)}if(camel=="opacity"){this.setOpacity(value)}else{this.dom.style[camel]=value}}else{for(var style in prop){if(typeof prop[style]!="function"){this.setStyle(style,prop[style])}}}return this},applyStyles:function(style){Ext.DomHelper.applyStyles(this.dom,style);return this},getX:function(){return D.getX(this.dom)},getY:function(){return D.getY(this.dom)},getXY:function(){return D.getXY(this.dom)},getOffsetsTo:function(el){var o=this.getXY();var e=Ext.fly(el,"_internal").getXY();return[o[0]-e[0],o[1]-e[1]]},setX:function(x,animate){if(!animate||!A){D.setX(this.dom,x)}else{this.setXY([x,this.getY()],this.preanim(arguments,1))}return this},setY:function(y,animate){if(!animate||!A){D.setY(this.dom,y)}else{this.setXY([this.getX(),y],this.preanim(arguments,1))}return this},setLeft:function(left){this.setStyle("left",this.addUnits(left));return this},setTop:function(top){this.setStyle("top",this.addUnits(top));return this},setRight:function(right){this.setStyle("right",this.addUnits(right));return this},setBottom:function(bottom){this.setStyle("bottom",this.addUnits(bottom));return this},setXY:function(pos,animate){if(!animate||!A){D.setXY(this.dom,pos)}else{this.anim({points:{to:pos}},this.preanim(arguments,1),"motion")}return this},setLocation:function(x,y,animate){this.setXY([x,y],this.preanim(arguments,2));return this},moveTo:function(x,y,animate){this.setXY([x,y],this.preanim(arguments,2));return this},getRegion:function(){return D.getRegion(this.dom)},getHeight:function(contentHeight){var h=Math.max(this.dom.offsetHeight,this.dom.clientHeight)||0;h=contentHeight!==true?h:h-this.getBorderWidth("tb")-this.getPadding("tb");return h<0?0:h},getWidth:function(contentWidth){var w=Math.max(this.dom.offsetWidth,this.dom.clientWidth)||0;w=contentWidth!==true?w:w-this.getBorderWidth("lr")-this.getPadding("lr");return w<0?0:w},getComputedHeight:function(){var h=Math.max(this.dom.offsetHeight,this.dom.clientHeight);if(!h){h=parseInt(this.getStyle("height"),10)||0;if(!this.isBorderBox()){h+=this.getFrameWidth("tb")}}return h},getComputedWidth:function(){var w=Math.max(this.dom.offsetWidth,this.dom.clientWidth);if(!w){w=parseInt(this.getStyle("width"),10)||0;if(!this.isBorderBox()){w+=this.getFrameWidth("lr")}}return w},getSize:function(contentSize){return{width:this.getWidth(contentSize),height:this.getHeight(contentSize)}},getStyleSize:function(){var w,h,d=this.dom,s=d.style;if(s.width&&s.width!="auto"){w=parseInt(s.width,10);if(Ext.isBorderBox){w-=this.getFrameWidth("lr")}}if(s.height&&s.height!="auto"){h=parseInt(s.height,10);if(Ext.isBorderBox){h-=this.getFrameWidth("tb")}}return{width:w||this.getWidth(true),height:h||this.getHeight(true)}},getViewSize:function(){var d=this.dom,doc=document,aw=0,ah=0;if(d==doc||d==doc.body){return{width:D.getViewWidth(),height:D.getViewHeight()}}else{return{width:d.clientWidth,height:d.clientHeight}}},getValue:function(asNumber){return asNumber?parseInt(this.dom.value,10):this.dom.value},adjustWidth:function(width){if(typeof width=="number"){if(this.autoBoxAdjust&&!this.isBorderBox()){width-=(this.getBorderWidth("lr")+this.getPadding("lr"))}if(width<0){width=0}}return width},adjustHeight:function(height){if(typeof height=="number"){if(this.autoBoxAdjust&&!this.isBorderBox()){height-=(this.getBorderWidth("tb")+this.getPadding("tb"))}if(height<0){height=0}}return height},setWidth:function(width,animate){width=this.adjustWidth(width);if(!animate||!A){this.dom.style.width=this.addUnits(width)}else{this.anim({width:{to:width}},this.preanim(arguments,1))}return this},setHeight:function(height,animate){height=this.adjustHeight(height);if(!animate||!A){this.dom.style.height=this.addUnits(height)}else{this.anim({height:{to:height}},this.preanim(arguments,1))}return this},setSize:function(width,height,animate){if(typeof width=="object"){height=width.height;width=width.width}width=this.adjustWidth(width);height=this.adjustHeight(height);if(!animate||!A){this.dom.style.width=this.addUnits(width);this.dom.style.height=this.addUnits(height)}else{this.anim({width:{to:width},height:{to:height}},this.preanim(arguments,2))}return this},setBounds:function(x,y,width,height,animate){if(!animate||!A){this.setSize(width,height);this.setLocation(x,y)}else{width=this.adjustWidth(width);height=this.adjustHeight(height);this.anim({points:{to:[x,y]},width:{to:width},height:{to:height}},this.preanim(arguments,4),"motion")}return this},setRegion:function(region,animate){this.setBounds(region.left,region.top,region.right-region.left,region.bottom-region.top,this.preanim(arguments,1));return this},addListener:function(eventName,fn,scope,options){Ext.EventManager.on(this.dom,eventName,fn,scope||this,options)},removeListener:function(eventName,fn,scope){Ext.EventManager.removeListener(this.dom,eventName,fn,scope||this);return this},removeAllListeners:function(){Ext.EventManager.removeAll(this.dom);return this},relayEvent:function(eventName,observable){this.on(eventName,function(e){observable.fireEvent(eventName,e)})},setOpacity:function(opacity,animate){if(!animate||!A){var s=this.dom.style;if(Ext.isIE){s.zoom=1;s.filter=(s.filter||"").replace(/alpha\([^\)]*\)/gi,"")+(opacity==1?"":" alpha(opacity="+opacity*100+")")}else{s.opacity=opacity}}else{this.anim({opacity:{to:opacity}},this.preanim(arguments,1),null,0.35,"easeIn")}return this},getLeft:function(local){if(!local){return this.getX()}else{return parseInt(this.getStyle("left"),10)||0}},getRight:function(local){if(!local){return this.getX()+this.getWidth()}else{return(this.getLeft(true)+this.getWidth())||0}},getTop:function(local){if(!local){return this.getY()}else{return parseInt(this.getStyle("top"),10)||0}},getBottom:function(local){if(!local){return this.getY()+this.getHeight()}else{return(this.getTop(true)+this.getHeight())||0}},position:function(pos,zIndex,x,y){if(!pos){if(this.getStyle("position")=="static"){this.setStyle("position","relative")}}else{this.setStyle("position",pos)}if(zIndex){this.setStyle("z-index",zIndex)}if(x!==undefined&&y!==undefined){this.setXY([x,y])}else{if(x!==undefined){this.setX(x)}else{if(y!==undefined){this.setY(y)}}}},clearPositioning:function(value){value=value||"";this.setStyle({left:value,right:value,top:value,bottom:value,"z-index":"",position:"static"});return this},getPositioning:function(){var l=this.getStyle("left");var t=this.getStyle("top");return{position:this.getStyle("position"),left:l,right:l?"":this.getStyle("right"),top:t,bottom:t?"":this.getStyle("bottom"),"z-index":this.getStyle("z-index")}},getBorderWidth:function(side){return this.addStyles(side,El.borders)},getPadding:function(side){return this.addStyles(side,El.paddings)},setPositioning:function(pc){this.applyStyles(pc);if(pc.right=="auto"){this.dom.style.right=""}if(pc.bottom=="auto"){this.dom.style.bottom=""}return this},fixDisplay:function(){if(this.getStyle("display")=="none"){this.setStyle("visibility","hidden");this.setStyle("display",this.originalDisplay);if(this.getStyle("display")=="none"){this.setStyle("display","block")}}},setOverflow:function(v){if(v=="auto"&&Ext.isMac&&Ext.isGecko2){this.dom.style.overflow="hidden";(function(){this.dom.style.overflow="auto"}).defer(1,this)}else{this.dom.style.overflow=v}},setLeftTop:function(left,top){this.dom.style.left=this.addUnits(left);this.dom.style.top=this.addUnits(top);return this},move:function(direction,distance,animate){var xy=this.getXY();direction=direction.toLowerCase();switch(direction){case"l":case"left":this.moveTo(xy[0]-distance,xy[1],this.preanim(arguments,2));break;case"r":case"right":this.moveTo(xy[0]+distance,xy[1],this.preanim(arguments,2));break;case"t":case"top":case"up":this.moveTo(xy[0],xy[1]-distance,this.preanim(arguments,2));break;case"b":case"bottom":case"down":this.moveTo(xy[0],xy[1]+distance,this.preanim(arguments,2));break}return this},clip:function(){if(!this.isClipped){this.isClipped=true;this.originalClip={o:this.getStyle("overflow"),x:this.getStyle("overflow-x"),y:this.getStyle("overflow-y")};this.setStyle("overflow","hidden");this.setStyle("overflow-x","hidden");this.setStyle("overflow-y","hidden")}return this},unclip:function(){if(this.isClipped){this.isClipped=false;var o=this.originalClip;if(o.o){this.setStyle("overflow",o.o)}if(o.x){this.setStyle("overflow-x",o.x)}if(o.y){this.setStyle("overflow-y",o.y)}}return this},getAnchorXY:function(anchor,local,s){var w,h,vp=false;if(!s){var d=this.dom;if(d==document.body||d==document){vp=true;w=D.getViewWidth();h=D.getViewHeight()}else{w=this.getWidth();h=this.getHeight()}}else{w=s.width;h=s.height}var x=0,y=0,r=Math.round;switch((anchor||"tl").toLowerCase()){case"c":x=r(w*0.5);y=r(h*0.5);break;case"t":x=r(w*0.5);y=0;break;case"l":x=0;y=r(h*0.5);break;case"r":x=w;y=r(h*0.5);break;case"b":x=r(w*0.5);y=h;break;case"tl":x=0;y=0;break;case"bl":x=0;y=h;break;case"br":x=w;y=h;break;case"tr":x=w;y=0;break}if(local===true){return[x,y]}if(vp){var sc=this.getScroll();return[x+sc.left,y+sc.top]}var o=this.getXY();return[x+o[0],y+o[1]]},getAlignToXY:function(el,p,o){el=Ext.get(el);if(!el||!el.dom){throw"Element.alignToXY with an element that doesn't exist"}var d=this.dom;var c=false;var p1="",p2="";o=o||[0,0];if(!p){p="tl-bl"}else{if(p=="?"){p="tl-bl?"}else{if(p.indexOf("-")==-1){p="tl-"+p}}}p=p.toLowerCase();var m=p.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!m){throw"Element.alignTo with an invalid alignment "+p}p1=m[1];p2=m[2];c=!!m[3];var a1=this.getAnchorXY(p1,true);var a2=el.getAnchorXY(p2,false);var x=a2[0]-a1[0]+o[0];var y=a2[1]-a1[1]+o[1];if(c){var w=this.getWidth(),h=this.getHeight(),r=el.getRegion();var dw=D.getViewWidth()-5,dh=D.getViewHeight()-5;var p1y=p1.charAt(0),p1x=p1.charAt(p1.length-1);var p2y=p2.charAt(0),p2x=p2.charAt(p2.length-1);var swapY=((p1y=="t"&&p2y=="b")||(p1y=="b"&&p2y=="t"));var swapX=((p1x=="r"&&p2x=="l")||(p1x=="l"&&p2x=="r"));var doc=document;var scrollX=(doc.documentElement.scrollLeft||doc.body.scrollLeft||0)+5;var scrollY=(doc.documentElement.scrollTop||doc.body.scrollTop||0)+5;if((x+w)>dw+scrollX){x=swapX?r.left-w:dw+scrollX-w}if(x<scrollX){x=swapX?r.right:scrollX}if((y+h)>dh+scrollY){y=swapY?r.top-h:dh+scrollY-h}if(y<scrollY){y=swapY?r.bottom:scrollY}}return[x,y]},getConstrainToXY:function(){var os={top:0,left:0,bottom:0,right:0};return function(el,local,offsets,proposedXY){el=Ext.get(el);offsets=offsets?Ext.applyIf(offsets,os):os;var vw,vh,vx=0,vy=0;if(el.dom==document.body||el.dom==document){vw=Ext.lib.Dom.getViewWidth();vh=Ext.lib.Dom.getViewHeight()}else{vw=el.dom.clientWidth;vh=el.dom.clientHeight;if(!local){var vxy=el.getXY();vx=vxy[0];vy=vxy[1]}}var s=el.getScroll();vx+=offsets.left+s.left;vy+=offsets.top+s.top;vw-=offsets.right;vh-=offsets.bottom;var vr=vx+vw;var vb=vy+vh;var xy=proposedXY||(!local?this.getXY():[this.getLeft(true),this.getTop(true)]);var x=xy[0],y=xy[1];var w=this.dom.offsetWidth,h=this.dom.offsetHeight;var moved=false;if((x+w)>vr){x=vr-w;moved=true}if((y+h)>vb){y=vb-h;moved=true}if(x<vx){x=vx;moved=true}if(y<vy){y=vy;moved=true}return moved?[x,y]:false}}(),adjustForConstraints:function(xy,parent,offsets){return this.getConstrainToXY(parent||document,false,offsets,xy)||xy},alignTo:function(element,position,offsets,animate){var xy=this.getAlignToXY(element,position,offsets);this.setXY(xy,this.preanim(arguments,3));return this},anchorTo:function(el,alignment,offsets,animate,monitorScroll,callback){var action=function(){this.alignTo(el,alignment,offsets,animate);Ext.callback(callback,this)};Ext.EventManager.onWindowResize(action,this);var tm=typeof monitorScroll;if(tm!="undefined"){Ext.EventManager.on(window,"scroll",action,this,{buffer:tm=="number"?monitorScroll:50})}action.call(this);return this},clearOpacity:function(){if(window.ActiveXObject){if(typeof this.dom.style.filter=="string"&&(/alpha/i).test(this.dom.style.filter)){this.dom.style.filter=""}}else{this.dom.style.opacity="";this.dom.style["-moz-opacity"]="";this.dom.style["-khtml-opacity"]=""}return this},hide:function(animate){this.setVisible(false,this.preanim(arguments,0));return this},show:function(animate){this.setVisible(true,this.preanim(arguments,0));return this},addUnits:function(size){return Ext.Element.addUnits(size,this.defaultUnit)},update:function(html,loadScripts,callback){if(typeof html=="undefined"){html=""}if(loadScripts!==true){this.dom.innerHTML=html;if(typeof callback=="function"){callback()}return this}var id=Ext.id();var dom=this.dom;html+='<span id="'+id+'"></span>';E.onAvailable(id,function(){var hd=document.getElementsByTagName("head")[0];var re=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig;var srcRe=/\ssrc=([\'\"])(.*?)\1/i;var typeRe=/\stype=([\'\"])(.*?)\1/i;var match;while(match=re.exec(html)){var attrs=match[1];var srcMatch=attrs?attrs.match(srcRe):false;if(srcMatch&&srcMatch[2]){var s=document.createElement("script");s.src=srcMatch[2];var typeMatch=attrs.match(typeRe);if(typeMatch&&typeMatch[2]){s.type=typeMatch[2]}hd.appendChild(s)}else{if(match[2]&&match[2].length>0){if(window.execScript){window.execScript(match[2])}else{window.eval(match[2])}}}}var el=document.getElementById(id);if(el){Ext.removeNode(el)}if(typeof callback=="function"){callback()}});dom.innerHTML=html.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,"");return this},load:function(){var um=this.getUpdater();um.update.apply(um,arguments);return this},getUpdater:function(){if(!this.updateManager){this.updateManager=new Ext.Updater(this)}return this.updateManager},unselectable:function(){this.dom.unselectable="on";this.swallowEvent("selectstart",true);this.applyStyles("-moz-user-select:none;-khtml-user-select:none;");this.addClass("x-unselectable");return this},getCenterXY:function(){return this.getAlignToXY(document,"c-c")},center:function(centerIn){this.alignTo(centerIn||document,"c-c");return this},isBorderBox:function(){return noBoxAdjust[this.dom.tagName.toLowerCase()]||Ext.isBorderBox},getBox:function(contentBox,local){var xy;if(!local){xy=this.getXY()}else{var left=parseInt(this.getStyle("left"),10)||0;var top=parseInt(this.getStyle("top"),10)||0;xy=[left,top]}var el=this.dom,w=el.offsetWidth,h=el.offsetHeight,bx;if(!contentBox){bx={x:xy[0],y:xy[1],0:xy[0],1:xy[1],width:w,height:h}}else{var l=this.getBorderWidth("l")+this.getPadding("l");var r=this.getBorderWidth("r")+this.getPadding("r");var t=this.getBorderWidth("t")+this.getPadding("t");var b=this.getBorderWidth("b")+this.getPadding("b");bx={x:xy[0]+l,y:xy[1]+t,0:xy[0]+l,1:xy[1]+t,width:w-(l+r),height:h-(t+b)}}bx.right=bx.x+bx.width;bx.bottom=bx.y+bx.height;return bx},getFrameWidth:function(sides,onlyContentBox){return onlyContentBox&&Ext.isBorderBox?0:(this.getPadding(sides)+this.getBorderWidth(sides))},setBox:function(box,adjust,animate){var w=box.width,h=box.height;if((adjust&&!this.autoBoxAdjust)&&!this.isBorderBox()){w-=(this.getBorderWidth("lr")+this.getPadding("lr"));h-=(this.getBorderWidth("tb")+this.getPadding("tb"))}this.setBounds(box.x,box.y,w,h,this.preanim(arguments,2));return this},repaint:function(){var dom=this.dom;this.addClass("x-repaint");setTimeout(function(){Ext.get(dom).removeClass("x-repaint")},1);return this},getMargins:function(side){if(!side){return{top:parseInt(this.getStyle("margin-top"),10)||0,left:parseInt(this.getStyle("margin-left"),10)||0,bottom:parseInt(this.getStyle("margin-bottom"),10)||0,right:parseInt(this.getStyle("margin-right"),10)||0}}else{return this.addStyles(side,El.margins)}},addStyles:function(sides,styles){var val=0,v,w;for(var i=0,len=sides.length;i<len;i++){v=this.getStyle(styles[sides.charAt(i)]);if(v){w=parseInt(v,10);if(w){val+=(w>=0?w:-1*w)}}}return val},createProxy:function(config,renderTo,matchBox){config=typeof config=="object"?config:{tag:"div",cls:config};var proxy;if(renderTo){proxy=Ext.DomHelper.append(renderTo,config,true)}else{proxy=Ext.DomHelper.insertBefore(this.dom,config,true)}if(matchBox){proxy.setBox(this.getBox())}return proxy},mask:function(msg,msgCls){if(this.getStyle("position")=="static"){this.addClass("x-masked-relative")}if(this._maskMsg){this._maskMsg.remove()}if(this._mask){this._mask.remove()}this._mask=Ext.DomHelper.append(this.dom,{cls:"ext-el-mask"},true);this.addClass("x-masked");this._mask.setDisplayed(true);if(typeof msg=="string"){this._maskMsg=Ext.DomHelper.append(this.dom,{cls:"ext-el-mask-msg",cn:{tag:"div"}},true);var mm=this._maskMsg;mm.dom.className=msgCls?"ext-el-mask-msg "+msgCls:"ext-el-mask-msg";mm.dom.firstChild.innerHTML=msg;mm.setDisplayed(true);mm.center(this)}if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&this.getStyle("height")=="auto"){this._mask.setSize(this.getWidth(),this.getHeight())}return this._mask},unmask:function(){if(this._mask){if(this._maskMsg){this._maskMsg.remove();delete this._maskMsg}this._mask.remove();delete this._mask}this.removeClass(["x-masked","x-masked-relative"])},isMasked:function(){return this._mask&&this._mask.isVisible()},createShim:function(){var el=document.createElement("iframe");el.frameBorder="0";el.className="ext-shim";if(Ext.isIE&&Ext.isSecure){el.src=Ext.SSL_SECURE_URL}var shim=Ext.get(this.dom.parentNode.insertBefore(el,this.dom));shim.autoBoxAdjust=false;return shim},remove:function(){Ext.removeNode(this.dom);delete El.cache[this.dom.id]},hover:function(overFn,outFn,scope){var preOverFn=function(e){if(!e.within(this,true)){overFn.apply(scope||this,arguments)}};var preOutFn=function(e){if(!e.within(this,true)){outFn.apply(scope||this,arguments)}};this.on("mouseover",preOverFn,this.dom);this.on("mouseout",preOutFn,this.dom);return this},addClassOnOver:function(className){this.hover(function(){Ext.fly(this,"_internal").addClass(className)},function(){Ext.fly(this,"_internal").removeClass(className)});return this},addClassOnFocus:function(className){this.on("focus",function(){Ext.fly(this,"_internal").addClass(className)},this.dom);this.on("blur",function(){Ext.fly(this,"_internal").removeClass(className)},this.dom);return this},addClassOnClick:function(className){var dom=this.dom;this.on("mousedown",function(){Ext.fly(dom,"_internal").addClass(className);var d=Ext.getDoc();var fn=function(){Ext.fly(dom,"_internal").removeClass(className);d.removeListener("mouseup",fn)};d.on("mouseup",fn)});return this},swallowEvent:function(eventName,preventDefault){var fn=function(e){e.stopPropagation();if(preventDefault){e.preventDefault()}};if(Ext.isArray(eventName)){for(var i=0,len=eventName.length;i<len;i++){this.on(eventName[i],fn)}return this}this.on(eventName,fn);return this},parent:function(selector,returnDom){return this.matchNode("parentNode","parentNode",selector,returnDom)},next:function(selector,returnDom){return this.matchNode("nextSibling","nextSibling",selector,returnDom)},prev:function(selector,returnDom){return this.matchNode("previousSibling","previousSibling",selector,returnDom)},first:function(selector,returnDom){return this.matchNode("nextSibling","firstChild",selector,returnDom)},last:function(selector,returnDom){return this.matchNode("previousSibling","lastChild",selector,returnDom)},matchNode:function(dir,start,selector,returnDom){var n=this.dom[start];while(n){if(n.nodeType==1&&(!selector||Ext.DomQuery.is(n,selector))){return !returnDom?Ext.get(n):n}n=n[dir]}return null},appendChild:function(el){el=Ext.get(el);el.appendTo(this);return this},createChild:function(config,insertBefore,returnDom){config=config||{tag:"div"};if(insertBefore){return Ext.DomHelper.insertBefore(insertBefore,config,returnDom!==true)}return Ext.DomHelper[!this.dom.firstChild?"overwrite":"append"](this.dom,config,returnDom!==true)},appendTo:function(el){el=Ext.getDom(el);el.appendChild(this.dom);return this},insertBefore:function(el){el=Ext.getDom(el);el.parentNode.insertBefore(this.dom,el);return this},insertAfter:function(el){el=Ext.getDom(el);el.parentNode.insertBefore(this.dom,el.nextSibling);return this},insertFirst:function(el,returnDom){el=el||{};if(el.nodeType||el.dom){el=Ext.getDom(el);this.dom.insertBefore(el,this.dom.firstChild);return !returnDom?Ext.get(el):el}else{return this.createChild(el,this.dom.firstChild,returnDom)}},insertSibling:function(el,where,returnDom){var rt;if(Ext.isArray(el)){for(var i=0,len=el.length;i<len;i++){rt=this.insertSibling(el[i],where,returnDom)}return rt}where=where?where.toLowerCase():"before";el=el||{};var refNode=where=="before"?this.dom:this.dom.nextSibling;if(el.nodeType||el.dom){rt=this.dom.parentNode.insertBefore(Ext.getDom(el),refNode);if(!returnDom){rt=Ext.get(rt)}}else{if(where=="after"&&!this.dom.nextSibling){rt=Ext.DomHelper.append(this.dom.parentNode,el,!returnDom)}else{rt=Ext.DomHelper[where=="after"?"insertAfter":"insertBefore"](this.dom,el,!returnDom)}}return rt},wrap:function(config,returnDom){if(!config){config={tag:"div"}}var newEl=Ext.DomHelper.insertBefore(this.dom,config,!returnDom);newEl.dom?newEl.dom.appendChild(this.dom):newEl.appendChild(this.dom);return newEl},replace:function(el){el=Ext.get(el);this.insertBefore(el);el.remove();return this},replaceWith:function(el){if(el.nodeType||el.dom){el=Ext.getDom(el);this.dom.parentNode.insertBefore(el,this.dom)}else{el=this.insertSibling(el,"before")}El.uncache(this.id);Ext.removeNode(this.dom);this.dom=el;this.id=Ext.id(el);El.cache[this.id]=this;return this},insertHtml:function(where,html,returnEl){var el=Ext.DomHelper.insertHtml(where,this.dom,html);return returnEl?Ext.get(el):el},set:function(o,useSet){var el=this.dom;useSet=typeof useSet=="undefined"?(el.setAttribute?true:false):useSet;for(var attr in o){if(attr=="style"||typeof o[attr]=="function"){continue}if(attr=="cls"){el.className=o.cls}else{if(o.hasOwnProperty(attr)){if(useSet){el.setAttribute(attr,o[attr])}else{el[attr]=o[attr]}}}}if(o.style){Ext.DomHelper.applyStyles(el,o.style)}return this},addKeyListener:function(key,fn,scope){var config;if(typeof key!="object"||Ext.isArray(key)){config={key:key,fn:fn,scope:scope}}else{config={key:key.key,shift:key.shift,ctrl:key.ctrl,alt:key.alt,fn:fn,scope:scope}}return new Ext.KeyMap(this,config)},addKeyMap:function(config){return new Ext.KeyMap(this,config)},isScrollable:function(){var dom=this.dom;return dom.scrollHeight>dom.clientHeight||dom.scrollWidth>dom.clientWidth},scrollTo:function(side,value,animate){var prop=side.toLowerCase()=="left"?"scrollLeft":"scrollTop";if(!animate||!A){this.dom[prop]=value}else{var to=prop=="scrollLeft"?[value,this.dom.scrollTop]:[this.dom.scrollLeft,value];this.anim({scroll:{to:to}},this.preanim(arguments,2),"scroll")}return this},scroll:function(direction,distance,animate){if(!this.isScrollable()){return}var el=this.dom;var l=el.scrollLeft,t=el.scrollTop;var w=el.scrollWidth,h=el.scrollHeight;var cw=el.clientWidth,ch=el.clientHeight;direction=direction.toLowerCase();var scrolled=false;var a=this.preanim(arguments,2);switch(direction){case"l":case"left":if(w-l>cw){var v=Math.min(l+distance,w-cw);this.scrollTo("left",v,a);scrolled=true}break;case"r":case"right":if(l>0){var v=Math.max(l-distance,0);this.scrollTo("left",v,a);scrolled=true}break;case"t":case"top":case"up":if(t>0){var v=Math.max(t-distance,0);this.scrollTo("top",v,a);scrolled=true}break;case"b":case"bottom":case"down":if(h-t>ch){var v=Math.min(t+distance,h-ch);this.scrollTo("top",v,a);scrolled=true}break}return scrolled},translatePoints:function(x,y){if(typeof x=="object"||Ext.isArray(x)){y=x[1];x=x[0]}var p=this.getStyle("position");var o=this.getXY();var l=parseInt(this.getStyle("left"),10);var t=parseInt(this.getStyle("top"),10);if(isNaN(l)){l=(p=="relative")?0:this.dom.offsetLeft}if(isNaN(t)){t=(p=="relative")?0:this.dom.offsetTop}return{left:(x-o[0]+l),top:(y-o[1]+t)}},getScroll:function(){var d=this.dom,doc=document;if(d==doc||d==doc.body){var l,t;if(Ext.isIE&&Ext.isStrict){l=doc.documentElement.scrollLeft||(doc.body.scrollLeft||0);t=doc.documentElement.scrollTop||(doc.body.scrollTop||0)}else{l=window.pageXOffset||(doc.body.scrollLeft||0);t=window.pageYOffset||(doc.body.scrollTop||0)}return{left:l,top:t}}else{return{left:d.scrollLeft,top:d.scrollTop}}},getColor:function(attr,defaultValue,prefix){var v=this.getStyle(attr);if(!v||v=="transparent"||v=="inherit"){return defaultValue}var color=typeof prefix=="undefined"?"#":prefix;if(v.substr(0,4)=="rgb("){var rvs=v.slice(4,v.length-1).split(",");for(var i=0;i<3;i++){var h=parseInt(rvs[i]);var s=h.toString(16);if(h<16){s="0"+s}color+=s}}else{if(v.substr(0,1)=="#"){if(v.length==4){for(var i=1;i<4;i++){var c=v.charAt(i);color+=c+c}}else{if(v.length==7){color+=v.substr(1)}}}}return(color.length>5?color.toLowerCase():defaultValue)},boxWrap:function(cls){cls=cls||"x-box";var el=Ext.get(this.insertHtml("beforeBegin",String.format('<div class="{0}">'+El.boxMarkup+"</div>",cls)));el.child("."+cls+"-mc").dom.appendChild(this.dom);return el},getAttributeNS:Ext.isIE?function(ns,name){var d=this.dom;var type=typeof d[ns+":"+name];if(type!="undefined"&&type!="unknown"){return d[ns+":"+name]}return d[name]}:function(ns,name){var d=this.dom;return d.getAttributeNS(ns,name)||d.getAttribute(ns+":"+name)||d.getAttribute(name)||d[name]},getTextWidth:function(text,min,max){return(Ext.util.TextMetrics.measure(this.dom,Ext.value(text,this.dom.innerHTML,true)).width).constrain(min||0,max||1000000)}};var ep=El.prototype;ep.on=ep.addListener;ep.mon=ep.addListener;ep.getUpdateManager=ep.getUpdater;ep.un=ep.removeListener;ep.autoBoxAdjust=true;El.unitPattern=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i;El.addUnits=function(v,defaultUnit){if(v===""||v=="auto"){return v}if(v===undefined){return""}if(typeof v=="number"||!El.unitPattern.test(v)){return v+(defaultUnit||"px")}return v};El.boxMarkup='<div class="{0}-tl"><div class="{0}-tr"><div class="{0}-tc"></div></div></div><div class="{0}-ml"><div class="{0}-mr"><div class="{0}-mc"></div></div></div><div class="{0}-bl"><div class="{0}-br"><div class="{0}-bc"></div></div></div>';El.VISIBILITY=1;El.DISPLAY=2;El.borders={l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"};El.paddings={l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"};El.margins={l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"};El.cache={};var docEl;El.get=function(el){var ex,elm,id;if(!el){return null}if(typeof el=="string"){if(!(elm=document.getElementById(el))){return null}if(ex=El.cache[el]){ex.dom=elm}else{ex=El.cache[el]=new El(elm)}return ex}else{if(el.tagName){if(!(id=el.id)){id=Ext.id(el)}if(ex=El.cache[id]){ex.dom=el}else{ex=El.cache[id]=new El(el)}return ex}else{if(el instanceof El){if(el!=docEl){el.dom=document.getElementById(el.id)||el.dom;El.cache[el.id]=el}return el}else{if(el.isComposite){return el}else{if(Ext.isArray(el)){return El.select(el)}else{if(el==document){if(!docEl){var f=function(){};f.prototype=El.prototype;docEl=new f();docEl.dom=document}return docEl}}}}}}return null};El.uncache=function(el){for(var i=0,a=arguments,len=a.length;i<len;i++){if(a[i]){delete El.cache[a[i].id||a[i]]}}};El.garbageCollect=function(){if(!Ext.enableGarbageCollector){clearInterval(El.collectorThread);return}for(var eid in El.cache){var el=El.cache[eid],d=el.dom;if(!d||!d.parentNode||(!d.offsetParent&&!document.getElementById(eid))){delete El.cache[eid];if(d&&Ext.enableListenerCollection){Ext.EventManager.removeAll(d)}}}};El.collectorThreadId=setInterval(El.garbageCollect,30000);var flyFn=function(){};flyFn.prototype=El.prototype;var _cls=new flyFn();El.Flyweight=function(dom){this.dom=dom};El.Flyweight.prototype=_cls;El.Flyweight.prototype.isFlyweight=true;El._flyweights={};El.fly=function(el,named){named=named||"_global";el=Ext.getDom(el);if(!el){return null}if(!El._flyweights[named]){El._flyweights[named]=new El.Flyweight()}El._flyweights[named].dom=el;return El._flyweights[named]};Ext.get=El.get;Ext.fly=El.fly;var noBoxAdjust=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};if(Ext.isIE||Ext.isGecko){noBoxAdjust.button=1}Ext.EventManager.on(window,"unload",function(){delete El.cache;delete El._flyweights})})();Ext.enableFx=true;Ext.Fx={slideIn:function(A,D){var B=this.getFxEl();D=D||{};B.queueFx(D,function(){A=A||"t";this.fixDisplay();var E=this.getFxRestore();var J=this.getBox();this.setSize(J);var G=this.fxWrap(E.pos,D,"hidden");var L=this.dom.style;L.visibility="visible";L.position="absolute";var F=function(){B.fxUnwrap(G,E.pos,D);L.width=E.width;L.height=E.height;B.afterFx(D)};var K,M={to:[J.x,J.y]},I={to:J.width},H={to:J.height};switch(A.toLowerCase()){case"t":G.setSize(J.width,0);L.left=L.bottom="0";K={height:H};break;case"l":G.setSize(0,J.height);L.right=L.top="0";K={width:I};break;case"r":G.setSize(0,J.height);G.setX(J.right);L.left=L.top="0";K={width:I,points:M};break;case"b":G.setSize(J.width,0);G.setY(J.bottom);L.left=L.top="0";K={height:H,points:M};break;case"tl":G.setSize(0,0);L.right=L.bottom="0";K={width:I,height:H};break;case"bl":G.setSize(0,0);G.setY(J.y+J.height);L.right=L.top="0";K={width:I,height:H,points:M};break;case"br":G.setSize(0,0);G.setXY([J.right,J.bottom]);L.left=L.top="0";K={width:I,height:H,points:M};break;case"tr":G.setSize(0,0);G.setX(J.x+J.width);L.left=L.bottom="0";K={width:I,height:H,points:M};break}this.dom.style.visibility="visible";G.show();arguments.callee.anim=G.fxanim(K,D,"motion",0.5,"easeOut",F)});return this},slideOut:function(A,D){var B=this.getFxEl();D=D||{};B.queueFx(D,function(){A=A||"t";var J=this.getFxRestore();var E=this.getBox();this.setSize(E);var H=this.fxWrap(J.pos,D,"visible");var G=this.dom.style;G.visibility="visible";G.position="absolute";H.setSize(E);var K=function(){if(D.useDisplay){B.setDisplayed(false)}else{B.hide()}B.fxUnwrap(H,J.pos,D);G.width=J.width;G.height=J.height;B.afterFx(D)};var F,I={to:0};switch(A.toLowerCase()){case"t":G.left=G.bottom="0";F={height:I};break;case"l":G.right=G.top="0";F={width:I};break;case"r":G.left=G.top="0";F={width:I,points:{to:[E.right,E.y]}};break;case"b":G.left=G.top="0";F={height:I,points:{to:[E.x,E.bottom]}};break;case"tl":G.right=G.bottom="0";F={width:I,height:I};break;case"bl":G.right=G.top="0";F={width:I,height:I,points:{to:[E.x,E.bottom]}};break;case"br":G.left=G.top="0";F={width:I,height:I,points:{to:[E.x+E.width,E.bottom]}};break;case"tr":G.left=G.bottom="0";F={width:I,height:I,points:{to:[E.right,E.y]}};break}arguments.callee.anim=H.fxanim(F,D,"motion",0.5,"easeOut",K)});return this},puff:function(B){var A=this.getFxEl();B=B||{};A.queueFx(B,function(){this.clearOpacity();this.show();var G=this.getFxRestore();var E=this.dom.style;var H=function(){if(B.useDisplay){A.setDisplayed(false)}else{A.hide()}A.clearOpacity();A.setPositioning(G.pos);E.width=G.width;E.height=G.height;E.fontSize="";A.afterFx(B)};var F=this.getWidth();var D=this.getHeight();arguments.callee.anim=this.fxanim({width:{to:this.adjustWidth(F*2)},height:{to:this.adjustHeight(D*2)},points:{by:[-(F*0.5),-(D*0.5)]},opacity:{to:0},fontSize:{to:200,unit:"%"}},B,"motion",0.5,"easeOut",H)});return this},switchOff:function(B){var A=this.getFxEl();B=B||{};A.queueFx(B,function(){this.clearOpacity();this.clip();var E=this.getFxRestore();var D=this.dom.style;var F=function(){if(B.useDisplay){A.setDisplayed(false)}else{A.hide()}A.clearOpacity();A.setPositioning(E.pos);D.width=E.width;D.height=E.height;A.afterFx(B)};this.fxanim({opacity:{to:0.3}},null,null,0.1,null,function(){this.clearOpacity();(function(){this.fxanim({height:{to:1},points:{by:[0,this.getHeight()*0.5]}},B,"motion",0.3,"easeIn",F)}).defer(100,this)})});return this},highlight:function(A,D){var B=this.getFxEl();D=D||{};B.queueFx(D,function(){A=A||"ffff9c";var E=D.attr||"backgroundColor";this.clearOpacity();this.show();var H=this.getColor(E);var I=this.dom.style[E];var G=(D.endColor||H)||"ffffff";var J=function(){B.dom.style[E]=I;B.afterFx(D)};var F={};F[E]={from:A,to:G};arguments.callee.anim=this.fxanim(F,D,"color",1,"easeIn",J)});return this},frame:function(A,E,G){var D=this.getFxEl(),B,F;G=G||{};D.queueFx(G,function(){A=A||"#C3DAF9";if(A.length==6){A="#"+A}E=E||1;this.show();var L=this.getXY(),M=this.dom,I={x:L[0],y:L[1],0:L[0],1:L[1],width:M.offsetWidth,height:M.offsetHeight},J,H=function(){J=Ext.get(document.body||document.documentElement).createChild({style:{visbility:"hidden",position:"absolute","z-index":35000,border:"0px solid "+A}});return J.queueFx({},K)};arguments.callee.anim={isAnimated:function(){return true},stop:function(){E=0;J.stopFx()}};function K(){var N=Ext.isBorderBox?2:1;F=J.anim({top:{from:I.y,to:I.y-20},left:{from:I.x,to:I.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:I.height,to:I.height+20*N},width:{from:I.width,to:I.width+20*N}},{duration:G.duration||1,callback:function(){J.remove();--E>0?H():D.afterFx(G)}});arguments.callee.anim={isAnimated:function(){return true},stop:function(){F.stop()}}}H()});return this},pause:function(D){var B=this.getFxEl(),A;B.queueFx({},function(){A=setTimeout(function(){B.afterFx({})},D*1000);arguments.callee.anim={isAnimated:function(){return true},stop:function(){clearTimeout(A);B.afterFx({})}}});return this},fadeIn:function(B){var A=this.getFxEl();B=B||{};A.queueFx(B,function(){this.setOpacity(0);this.fixDisplay();this.dom.style.visibility="visible";var D=B.endOpacity||1;arguments.callee.anim=this.fxanim({opacity:{to:D}},B,null,0.5,"easeOut",function(){if(D==1){this.clearOpacity()}A.afterFx(B)})});return this},fadeOut:function(B){var A=this.getFxEl();B=B||{};A.queueFx(B,function(){var D=B.endOpacity||0;arguments.callee.anim=this.fxanim({opacity:{to:D}},B,null,0.5,"easeOut",function(){if(D===0){if(this.visibilityMode==Ext.Element.DISPLAY||B.useDisplay){this.dom.style.display="none"}else{this.dom.style.visibility="hidden"}this.clearOpacity()}A.afterFx(B)})});return this},scale:function(A,B,D){this.shift(Ext.apply({},D,{width:A,height:B}));return this},shift:function(B){var A=this.getFxEl();B=B||{};A.queueFx(B,function(){var F={},E=B.width,G=B.height,D=B.x,I=B.y,H=B.opacity;if(E!==undefined){F.width={to:this.adjustWidth(E)}}if(G!==undefined){F.height={to:this.adjustHeight(G)}}if(B.left!==undefined){F.left={to:B.left}}if(B.top!==undefined){F.top={to:B.top}}if(B.right!==undefined){F.right={to:B.right}}if(B.bottom!==undefined){F.bottom={to:B.bottom}}if(D!==undefined||I!==undefined){F.points={to:[D!==undefined?D:this.getX(),I!==undefined?I:this.getY()]}}if(H!==undefined){F.opacity={to:H}}if(B.xy!==undefined){F.points={to:B.xy}}arguments.callee.anim=this.fxanim(F,B,"motion",0.35,"easeOut",function(){A.afterFx(B)})});return this},ghost:function(A,D){var B=this.getFxEl();D=D||{};B.queueFx(D,function(){A=A||"b";var I=this.getFxRestore();var F=this.getWidth(),H=this.getHeight();var G=this.dom.style;var K=function(){if(D.useDisplay){B.setDisplayed(false)}else{B.hide()}B.clearOpacity();B.setPositioning(I.pos);G.width=I.width;G.height=I.height;B.afterFx(D)};var E={opacity:{to:0},points:{}},J=E.points;switch(A.toLowerCase()){case"t":J.by=[0,-H];break;case"l":J.by=[-F,0];break;case"r":J.by=[F,0];break;case"b":J.by=[0,H];break;case"tl":J.by=[-F,-H];break;case"bl":J.by=[-F,H];break;case"br":J.by=[F,H];break;case"tr":J.by=[F,-H];break}arguments.callee.anim=this.fxanim(E,D,"motion",0.5,"easeOut",K)});return this},syncFx:function(){this.fxDefaults=Ext.apply(this.fxDefaults||{},{block:false,concurrent:true,stopFx:false});return this},sequenceFx:function(){this.fxDefaults=Ext.apply(this.fxDefaults||{},{block:false,concurrent:false,stopFx:false});return this},nextFx:function(){var A=this.fxQueue[0];if(A){A.call(this)}},hasActiveFx:function(){return this.fxQueue&&this.fxQueue[0]},stopFx:function(){if(this.hasActiveFx()){var A=this.fxQueue[0];if(A&&A.anim&&A.anim.isAnimated()){this.fxQueue=[A];A.anim.stop(true)}}return this},beforeFx:function(A){if(this.hasActiveFx()&&!A.concurrent){if(A.stopFx){this.stopFx();return true}return false}return true},hasFxBlock:function(){var A=this.fxQueue;return A&&A[0]&&A[0].block},queueFx:function(D,A){if(!this.fxQueue){this.fxQueue=[]}if(!this.hasFxBlock()){Ext.applyIf(D,this.fxDefaults);if(!D.concurrent){var B=this.beforeFx(D);A.block=D.block;this.fxQueue.push(A);if(B){this.nextFx()}}else{A.call(this)}}return this},fxWrap:function(G,E,D){var B;if(!E.wrap||!(B=Ext.get(E.wrap))){var A;if(E.fixPosition){A=this.getXY()}var F=document.createElement("div");F.style.visibility=D;B=Ext.get(this.dom.parentNode.insertBefore(F,this.dom));B.setPositioning(G);if(B.getStyle("position")=="static"){B.position("relative")}this.clearPositioning("auto");B.clip();B.dom.appendChild(this.dom);if(A){B.setXY(A)}}return B},fxUnwrap:function(A,D,B){this.clearPositioning();this.setPositioning(D);if(!B.wrap){A.dom.parentNode.insertBefore(this.dom,A.dom);A.remove()}},getFxRestore:function(){var A=this.dom.style;return{pos:this.getPositioning(),width:A.width,height:A.height}},afterFx:function(A){if(A.afterStyle){this.applyStyles(A.afterStyle)}if(A.afterCls){this.addClass(A.afterCls)}if(A.remove===true){this.remove()}if(!A.concurrent){this.fxQueue.shift()}Ext.callback(A.callback,A.scope,[this]);if(!A.concurrent){this.nextFx()}},getFxEl:function(){return Ext.get(this.dom)},fxanim:function(E,F,B,G,D,A){B=B||"run";F=F||{};var H=Ext.lib.Anim[B](this.dom,E,(F.duration||G)||0.35,(F.easing||D)||"easeOut",function(){Ext.callback(A,this)},this);F.anim=H;return H}};Ext.Fx.resize=Ext.Fx.scale;Ext.apply(Ext.Element.prototype,Ext.Fx);Ext.CompositeElement=function(A){this.elements=[];this.addElements(A)};Ext.CompositeElement.prototype={isComposite:true,addElements:function(F){if(!F){return this}if(typeof F=="string"){F=Ext.Element.selectorFunction(F)}var E=this.elements;var B=E.length-1;for(var D=0,A=F.length;D<A;D++){E[++B]=Ext.get(F[D])}return this},fill:function(A){this.elements=[];this.add(A);return this},filter:function(A){var B=[];this.each(function(D){if(D.is(A)){B[B.length]=D.dom}});this.fill(B);return this},invoke:function(F,B){var E=this.elements;for(var D=0,A=E.length;D<A;D++){Ext.Element.prototype[F].apply(E[D],B)}return this},add:function(A){if(typeof A=="string"){this.addElements(Ext.Element.selectorFunction(A))}else{if(A.length!==undefined){this.addElements(A)}else{this.addElements([A])}}return this},each:function(F,E){var D=this.elements;for(var B=0,A=D.length;B<A;B++){if(F.call(E||D[B],D[B],this,B)===false){break}}return this},item:function(A){return this.elements[A]||null},first:function(){return this.item(0)},last:function(){return this.item(this.elements.length-1)},getCount:function(){return this.elements.length},contains:function(A){return this.indexOf(A)!==-1},indexOf:function(A){return this.elements.indexOf(Ext.get(A))},removeElement:function(E,G){if(Ext.isArray(E)){for(var D=0,A=E.length;D<A;D++){this.removeElement(E[D])}return this}var B=typeof E=="number"?E:this.indexOf(E);if(B!==-1&&this.elements[B]){if(G){var F=this.elements[B];if(F.dom){F.remove()}else{Ext.removeNode(F)}}this.elements.splice(B,1)}return this},replaceElement:function(E,D,A){var B=typeof E=="number"?E:this.indexOf(E);if(B!==-1){if(A){this.elements[B].replaceWith(D)}else{this.elements.splice(B,1,Ext.get(D))}}return this},clear:function(){this.elements=[]}};(function(){Ext.CompositeElement.createCall=function(B,D){if(!B[D]){B[D]=function(){return this.invoke(D,arguments)}}};for(var A in Ext.Element.prototype){if(typeof Ext.Element.prototype[A]=="function"){Ext.CompositeElement.createCall(Ext.CompositeElement.prototype,A)}}})();Ext.CompositeElementLite=function(A){Ext.CompositeElementLite.superclass.constructor.call(this,A);this.el=new Ext.Element.Flyweight()};Ext.extend(Ext.CompositeElementLite,Ext.CompositeElement,{addElements:function(F){if(F){if(Ext.isArray(F)){this.elements=this.elements.concat(F)}else{var E=this.elements;var B=E.length-1;for(var D=0,A=F.length;D<A;D++){E[++B]=F[D]}}}return this},invoke:function(G,B){var E=this.elements;var F=this.el;for(var D=0,A=E.length;D<A;D++){F.dom=E[D];Ext.Element.prototype[G].apply(F,B)}return this},item:function(A){if(!this.elements[A]){return null}this.el.dom=this.elements[A];return this.el},addListener:function(B,H,G,F){var E=this.elements;for(var D=0,A=E.length;D<A;D++){Ext.EventManager.on(E[D],B,H,G||E[D],F)}return this},each:function(G,F){var D=this.elements;var E=this.el;for(var B=0,A=D.length;B<A;B++){E.dom=D[B];if(G.call(F||E,E,this,B)===false){break}}return this},indexOf:function(A){return this.elements.indexOf(Ext.getDom(A))},replaceElement:function(E,D,A){var B=typeof E=="number"?E:this.indexOf(E);if(B!==-1){D=Ext.getDom(D);if(A){var F=this.elements[B];F.parentNode.insertBefore(D,F);Ext.removeNode(F)}this.elements.splice(B,1,D)}return this}});Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener;if(Ext.DomQuery){Ext.Element.selectorFunction=Ext.DomQuery.select}Ext.Element.select=function(A,E,B){var D;if(typeof A=="string"){D=Ext.Element.selectorFunction(A,B)}else{if(A.length!==undefined){D=A}else{throw"Invalid selector"}}if(E===true){return new Ext.CompositeElement(D)}else{return new Ext.CompositeElementLite(D)}};Ext.select=Ext.Element.select;Ext.data.Connection=function(A){Ext.apply(this,A);this.addEvents("beforerequest","requestcomplete","requestexception");Ext.data.Connection.superclass.constructor.call(this)};Ext.extend(Ext.data.Connection,Ext.util.Observable,{timeout:30000,autoAbort:false,disableCaching:true,disableCachingParam:"_dc",request:function(F){if(this.fireEvent("beforerequest",this,F)!==false){var D=F.params;if(typeof D=="function"){D=D.call(F.scope||window,F)}if(typeof D=="object"){D=Ext.urlEncode(D)}if(this.extraParams){var H=Ext.urlEncode(this.extraParams);D=D?(D+"&"+H):H}var B=F.url||this.url;if(typeof B=="function"){B=B.call(F.scope||window,F)}if(F.form){var E=Ext.getDom(F.form);B=B||E.action;var K=E.getAttribute("enctype");if(F.isUpload||(K&&K.toLowerCase()=="multipart/form-data")){return this.doFormUpload(F,D,B)}var J=Ext.lib.Ajax.serializeForm(E);D=D?(D+"&"+J):J}var L=F.headers;if(this.defaultHeaders){L=Ext.apply(L||{},this.defaultHeaders);if(!F.headers){F.headers=L}}var G={success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{options:F},timeout:F.timeout||this.timeout};var A=F.method||this.method||((D||F.xmlData||F.jsonData)?"POST":"GET");if(A=="GET"&&(this.disableCaching&&F.disableCaching!==false)||F.disableCaching===true){var I=F.disableCachingParam||this.disableCachingParam;B+=(B.indexOf("?")!=-1?"&":"?")+I+"="+(new Date().getTime())}if(typeof F.autoAbort=="boolean"){if(F.autoAbort){this.abort()}}else{if(this.autoAbort!==false){this.abort()}}if((A=="GET"||F.xmlData||F.jsonData)&&D){B+=(B.indexOf("?")!=-1?"&":"?")+D;D=""}this.transId=Ext.lib.Ajax.request(A,B,G,D,F);return this.transId}else{Ext.callback(F.callback,F.scope,[F,null,null]);return null}},isLoading:function(A){if(A){return Ext.lib.Ajax.isCallInProgress(A)}else{return this.transId?true:false}},abort:function(A){if(A||this.isLoading()){Ext.lib.Ajax.abort(A||this.transId)}},handleResponse:function(A){this.transId=false;var B=A.argument.options;A.argument=B?B.argument:null;this.fireEvent("requestcomplete",this,A,B);Ext.callback(B.success,B.scope,[A,B]);Ext.callback(B.callback,B.scope,[B,true,A])},handleFailure:function(A,D){this.transId=false;var B=A.argument.options;A.argument=B?B.argument:null;this.fireEvent("requestexception",this,A,B,D);Ext.callback(B.failure,B.scope,[A,B]);Ext.callback(B.callback,B.scope,[B,false,A])},doFormUpload:function(F,A,B){var D=Ext.id();var G=document.createElement("iframe");G.id=D;G.name=D;G.className="x-hidden";if(Ext.isIE){G.src=Ext.SSL_SECURE_URL}document.body.appendChild(G);if(Ext.isIE){document.frames[D].name=D}var E=Ext.getDom(F.form),H={target:E.target,method:E.method,encoding:E.encoding,enctype:E.enctype,action:E.action};E.target=D;E.method="POST";E.enctype=E.encoding="multipart/form-data";if(B){E.action=B}var N,L;if(A){N=[];A=Ext.urlDecode(A,false);for(var J in A){if(A.hasOwnProperty(J)){L=document.createElement("input");L.type="hidden";L.name=J;L.value=A[J];E.appendChild(L);N.push(L)}}}function I(){var O={responseText:"",responseXML:null};O.argument=F?F.argument:null;try{var Q;if(Ext.isIE){Q=G.contentWindow.document}else{Q=(G.contentDocument||window.frames[D].document)}if(Q&&Q.body){O.responseText=Q.body.innerHTML}if(Q&&Q.XMLDocument){O.responseXML=Q.XMLDocument}else{O.responseXML=Q}}catch(P){}Ext.EventManager.removeListener(G,"load",I,this);this.fireEvent("requestcomplete",this,O,F);Ext.callback(F.success,F.scope,[O,F]);Ext.callback(F.callback,F.scope,[F,true,O]);setTimeout(function(){Ext.removeNode(G)},100)}Ext.EventManager.on(G,"load",I,this);E.submit();E.target=H.target;E.method=H.method;E.enctype=H.enctype;E.encoding=H.encoding;E.action=H.action;if(N){for(var K=0,M=N.length;K<M;K++){Ext.removeNode(N[K])}}}});Ext.Ajax=new Ext.data.Connection({autoAbort:false,serializeForm:function(A){return Ext.lib.Ajax.serializeForm(A)}});Ext.Updater=Ext.extend(Ext.util.Observable,{constructor:function(B,A){B=Ext.get(B);if(!A&&B.updateManager){return B.updateManager}this.el=B;this.defaultUrl=null;this.addEvents("beforeupdate","update","failure");var D=Ext.Updater.defaults;this.sslBlankUrl=D.sslBlankUrl;this.disableCaching=D.disableCaching;this.indicatorText=D.indicatorText;this.showLoadIndicator=D.showLoadIndicator;this.timeout=D.timeout;this.loadScripts=D.loadScripts;this.transaction=null;this.refreshDelegate=this.refresh.createDelegate(this);this.updateDelegate=this.update.createDelegate(this);this.formUpdateDelegate=this.formUpdate.createDelegate(this);if(!this.renderer){this.renderer=this.getDefaultRenderer()}Ext.Updater.superclass.constructor.call(this)},getDefaultRenderer:function(){return new Ext.Updater.BasicRenderer()},getEl:function(){return this.el},update:function(B,G,H,E){if(this.fireEvent("beforeupdate",this.el,B,G)!==false){var A,D;if(typeof B=="object"){A=B;B=A.url;G=G||A.params;H=H||A.callback;E=E||A.discardUrl;D=A.scope;if(typeof A.nocache!="undefined"){this.disableCaching=A.nocache}if(typeof A.text!="undefined"){this.indicatorText='<div class="loading-indicator">'+A.text+"</div>"}if(typeof A.scripts!="undefined"){this.loadScripts=A.scripts}if(typeof A.timeout!="undefined"){this.timeout=A.timeout}}this.showLoading();if(!E){this.defaultUrl=B}if(typeof B=="function"){B=B.call(this)}var F=Ext.apply({},{url:B,params:(typeof G=="function"&&D)?G.createDelegate(D):G,success:this.processSuccess,failure:this.processFailure,scope:this,callback:undefined,timeout:(this.timeout*1000),disableCaching:this.disableCaching,argument:{options:A,url:B,form:null,callback:H,scope:D||window,params:G}},A);this.transaction=Ext.Ajax.request(F)}},formUpdate:function(D,A,B,E){if(this.fireEvent("beforeupdate",this.el,D,A)!==false){if(typeof A=="function"){A=A.call(this)}D=Ext.getDom(D);this.transaction=Ext.Ajax.request({form:D,url:A,success:this.processSuccess,failure:this.processFailure,scope:this,timeout:(this.timeout*1000),argument:{url:A,form:D,callback:E,reset:B}});this.showLoading.defer(1,this)}},refresh:function(A){if(this.defaultUrl==null){return}this.update(this.defaultUrl,null,A,true)},startAutoRefresh:function(B,D,E,F,A){if(A){this.update(D||this.defaultUrl,E,F,true)}if(this.autoRefreshProcId){clearInterval(this.autoRefreshProcId)}this.autoRefreshProcId=setInterval(this.update.createDelegate(this,[D||this.defaultUrl,E,F,true]),B*1000)},stopAutoRefresh:function(){if(this.autoRefreshProcId){clearInterval(this.autoRefreshProcId);delete this.autoRefreshProcId}},isAutoRefreshing:function(){return this.autoRefreshProcId?true:false},showLoading:function(){if(this.showLoadIndicator){this.el.update(this.indicatorText)}},processSuccess:function(A){this.transaction=null;if(A.argument.form&&A.argument.reset){try{A.argument.form.reset()}catch(B){}}if(this.loadScripts){this.renderer.render(this.el,A,this,this.updateComplete.createDelegate(this,[A]))}else{this.renderer.render(this.el,A,this);this.updateComplete(A)}},updateComplete:function(A){this.fireEvent("update",this.el,A);if(typeof A.argument.callback=="function"){A.argument.callback.call(A.argument.scope,this.el,true,A,A.argument.options)}},processFailure:function(A){this.transaction=null;this.fireEvent("failure",this.el,A);if(typeof A.argument.callback=="function"){A.argument.callback.call(A.argument.scope,this.el,false,A,A.argument.options)}},setRenderer:function(A){this.renderer=A},getRenderer:function(){return this.renderer},setDefaultUrl:function(A){this.defaultUrl=A},abort:function(){if(this.transaction){Ext.Ajax.abort(this.transaction)}},isUpdating:function(){if(this.transaction){return Ext.Ajax.isLoading(this.transaction)}return false}});Ext.Updater.defaults={timeout:30,loadScripts:false,sslBlankUrl:(Ext.SSL_SECURE_URL||"javascript:false"),disableCaching:false,showLoadIndicator:true,indicatorText:'<div class="loading-indicator">Loading...</div>'};Ext.Updater.updateElement=function(E,D,F,B){var A=Ext.get(E).getUpdater();Ext.apply(A,B);A.update(D,F,B?B.callback:null)};Ext.Updater.BasicRenderer=function(){};Ext.Updater.BasicRenderer.prototype={render:function(D,A,B,E){D.update(A.responseText,B.loadScripts,E)}};Ext.UpdateManager=Ext.Updater;(function(){Date.useStrict=false;function B(E){var D=Array.prototype.slice.call(arguments,1);return E.replace(/\{(\d+)\}/g,function(F,G){return D[G]})}Date.formatCodeToRegex=function(E,D){var F=Date.parseCodes[E];if(F){F=typeof F=="function"?F():F;Date.parseCodes[E]=F}return F?Ext.applyIf({c:F.c?B(F.c,D||"{0}"):F.c},F):{g:0,c:null,s:Ext.escapeRe(E)}};var A=Date.formatCodeToRegex;Ext.apply(Date,{parseFunctions:{"M$":function(E,D){var F=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/");var G=(E||"").match(F);return G?new Date(((G[1]||"")+G[2])*1):null}},parseRegexes:[],formatFunctions:{"M$":function(){return"\\/Date("+this.getTime()+")\\/"}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},getShortMonthName:function(D){return Date.monthNames[D].substring(0,3)},getShortDayName:function(D){return Date.dayNames[D].substring(0,3)},getMonthNumber:function(D){return Date.monthNumbers[D.substring(0,1).toUpperCase()+D.substring(1,3).toLowerCase()]},formatCodes:{d:"String.leftPad(this.getDate(), 2, '0')",D:"Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"this.getSuffix()",w:"this.getDay()",z:"this.getDayOfYear()",W:"String.leftPad(this.getWeekOfYear(), 2, '0')",F:"Date.monthNames[this.getMonth()]",m:"String.leftPad(this.getMonth() + 1, 2, '0')",M:"Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"this.getDaysInMonth()",L:"(this.isLeapYear() ? 1 : 0)",o:"(this.getFullYear() + (this.getWeekOfYear() == 1 && this.getMonth() > 0 ? +1 : (this.getWeekOfYear() >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"this.getFullYear()",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"String.leftPad(this.getHours(), 2, '0')",i:"String.leftPad(this.getMinutes(), 2, '0')",s:"String.leftPad(this.getSeconds(), 2, '0')",u:"String.leftPad(this.getMilliseconds(), 3, '0')",O:"this.getGMTOffset()",P:"this.getGMTOffset(true)",T:"this.getTimezone()",Z:"(this.getTimezoneOffset() * -60)",c:function(){for(var H="Y-m-dTH:i:sP",F=[],E=0,D=H.length;E<D;++E){var G=H.charAt(E);F.push(G=="T"?"'T'":Date.getFormatCode(G))}return F.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(K,D,J,H,F,G,E){H=H||0;F=F||0;G=G||0;E=E||0;var I=new Date(K,D-1,J,H,F,G,E);return K==I.getFullYear()&&D==I.getMonth()+1&&J==I.getDate()&&H==I.getHours()&&F==I.getMinutes()&&G==I.getSeconds()&&E==I.getMilliseconds()},parseDate:function(E,G,D){var F=Date.parseFunctions;if(F[G]==null){Date.createParser(G)}return F[G](E,D===undefined?Date.useStrict:D)},getFormatCode:function(E){var D=Date.formatCodes[E];if(D){D=typeof D=="function"?D():D;Date.formatCodes[E]=D}return D||("'"+String.escape(E)+"'")},createFormat:function(H){var G=[],D=false,F="";for(var E=0;E<H.length;++E){F=H.charAt(E);if(!D&&F=="\\"){D=true}else{if(D){D=false;G.push("'"+String.escape(F)+"'")}else{G.push(Date.getFormatCode(F))}}}Date.formatFunctions[H]=new Function("return "+G.join("+"))},createParser:function(){var D=["var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,","def = Date.defaults,","results = String(input).match(Date.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = (new Date()).clearTime();","y = y >= 0? y : Ext.num(def.y, dt.getFullYear());","m = m >= 0? m : Ext.num(def.m - 1, dt.getMonth());","d = d >= 0? d : Ext.num(def.d, dt.getDate());","h  = h || Ext.num(def.h, dt.getHours());","i  = i || Ext.num(def.i, dt.getMinutes());","s  = s || Ext.num(def.s, dt.getSeconds());","ms = ms || Ext.num(def.ms, dt.getMilliseconds());","if(z >= 0 && y >= 0){","v = new Date(y, 0, 1, h, i, s, ms);","v = !strict? v : (strict === true && (z <= 364 || (v.isLeapYear() && z <= 365))? v.add(Date.DAY, z) : null);","}else if(strict === true && !Date.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","v = new Date(y, m, d, h, i, s, ms);","}","}","}","if(v){","if(zz != null){","v = v.add(Date.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = v.add(Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");return function(L){var F=Date.parseRegexes.length,M=1,G=[],K=[],J=false,E="";for(var I=0;I<L.length;++I){E=L.charAt(I);if(!J&&E=="\\"){J=true}else{if(J){J=false;K.push(String.escape(E))}else{var H=A(E,M);M+=H.g;K.push(H.s);if(H.g&&H.c){G.push(H.c)}}}}Date.parseRegexes[F]=new RegExp("^"+K.join("")+"$","i");Date.parseFunctions[L]=new Function("input","strict",B(D,F,G.join("")))}}(),parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},D:function(){for(var D=[],E=0;E<7;D.push(Date.getShortDayName(E)),++E){}return{g:0,c:null,s:"(?:"+D.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:0,c:null,s:"(?:\\d{2})"},F:function(){return{g:1,c:"m = parseInt(Date.getMonthNumber(results[{0}]), 10);\n",s:"("+Date.monthNames.join("|")+")"}},M:function(){for(var D=[],E=0;E<12;D.push(Date.getShortMonthName(E)),++E){}return Ext.applyIf({s:"("+D.join("|")+")"},A("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{2})"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{1,2})"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:function(){return A("Y")},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:{g:1,c:"if (results[{0}] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"},A:{g:1,c:"if (results[{0}] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"},g:function(){return A("G")},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},h:function(){return A("H")},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,4}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var F=[],D=[A("Y",1),A("m",2),A("d",3),A("h",4),A("i",5),A("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",A("P",8).c,"}else{",A("O",8).c,"}","}"].join("\n")}];for(var G=0,E=D.length;G<E;++G){F.push(D[G].c)}return{g:1,c:F.join(""),s:[D[0].s,"(?:","-",D[1].s,"(?:","-",D[2].s,"(?:","(?:T| )?",D[3].s,":",D[4].s,"(?::",D[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}}})}());Ext.apply(Date.prototype,{dateFormat:function(A){if(Date.formatFunctions[A]==null){Date.createFormat(A)}return Date.formatFunctions[A].call(this)},getTimezone:function(){return this.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(A){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+(A?":":"")+String.leftPad(Math.abs(this.getTimezoneOffset()%60),2,"0")},getDayOfYear:function(){var D=0,B=0,E=this.clone(),A=this.getMonth();for(D=0,E.setMonth(0);D<A;E.setMonth(++D)){B+=E.getDaysInMonth()}return B+this.getDate()-1},getWeekOfYear:function(){var A=86400000,B=7*A;return function(){var E=Date.UTC(this.getFullYear(),this.getMonth(),this.getDate()+3)/A,D=Math.floor(E/7),F=new Date(D*B).getUTCFullYear();return D-Math.floor(Date.UTC(F,0,7)/B)+1}}(),isLeapYear:function(){var A=this.getFullYear();return !!((A&3)==0&&(A%100||(A%400==0&&A)))},getFirstDayOfMonth:function(){var A=(this.getDay()-(this.getDate()-1))%7;return(A<0)?(A+7):A},getLastDayOfMonth:function(){return this.getLastDateOfMonth().getDay()},getFirstDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),1)},getLastDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),this.getDaysInMonth())},getDaysInMonth:function(){var A=[31,28,31,30,31,30,31,31,30,31,30,31];return function(){var B=this.getMonth();return B==1&&this.isLeapYear()?29:A[B]}}(),getSuffix:function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(){return new Date(this.getTime())},isDST:function(){return new Date(this.getFullYear(),0,1).getTimezoneOffset()!=this.getTimezoneOffset()},clearTime:function(E){if(E){return this.clone().clearTime()}var B=this.getDate();this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);if(this.getDate()!=B){for(var A=1,D=this.add(Date.HOUR,A);D.getDate()!=B;A++,D=this.add(Date.HOUR,A)){}this.setDate(B);this.setHours(D.getHours())}return this},add:function(B,D){var E=this.clone();if(!B||D===0){return E}switch(B.toLowerCase()){case Date.MILLI:E.setMilliseconds(this.getMilliseconds()+D);break;case Date.SECOND:E.setSeconds(this.getSeconds()+D);break;case Date.MINUTE:E.setMinutes(this.getMinutes()+D);break;case Date.HOUR:E.setHours(this.getHours()+D);break;case Date.DAY:E.setDate(this.getDate()+D);break;case Date.MONTH:var A=this.getDate();if(A>28){A=Math.min(A,this.getFirstDateOfMonth().add("mo",D).getLastDateOfMonth().getDate())}E.setDate(A);E.setMonth(this.getMonth()+D);break;case Date.YEAR:E.setFullYear(this.getFullYear()+D);break}return E},between:function(D,A){var B=this.getTime();return D.getTime()<=B&&B<=A.getTime()}});Date.prototype.format=Date.prototype.dateFormat;if(Ext.isSafari&&(navigator.userAgent.match(/WebKit\/(\d+)/)[1]||NaN)<420){Ext.apply(Date.prototype,{_xMonth:Date.prototype.setMonth,_xDate:Date.prototype.setDate,setMonth:function(A){if(A<=-1){var E=Math.ceil(-A),D=Math.ceil(E/12),B=(E%12)?12-E%12:0;this.setFullYear(this.getFullYear()-D);return this._xMonth(B)}else{return this._xMonth(A)}},setDate:function(A){return this.setTime(this.getTime()-(this.getDate()-A)*86400000)}})}Ext.util.DelayedTask=function(E,D,A){var F=null;var B=function(){F=null;E.apply(D,A||[])};this.delay=function(H,J,I,G){if(F){this.cancel()}E=J||E;D=I||D;A=G||A;if(!F){F=setTimeout(B,H)}};this.cancel=function(){if(F){clearTimeout(F);F=null}}};Ext.util.TaskRunner=function(F){F=F||10;var G=[],A=[];var B=0;var H=false;var E=function(){H=false;clearInterval(B);B=0};var I=function(){if(!H){H=true;B=setInterval(J,F)}};var D=function(K){A.push(K);if(K.onStop){K.onStop.apply(K.scope||K)}};var J=function(){if(A.length>0){for(var P=0,L=A.length;P<L;P++){G.remove(A[P])}A=[];if(G.length<1){E();return}}var Q,N=new Date().getTime();for(var P=0,L=G.length;P<L;++P){var O=G[P];var K=N-O.taskRunTime;if(O.interval<=K){Q=++O.taskRunCount;var M=O.run.apply(O.scope||O,O.args||[Q]);O.taskRunTime=N;if(M===false||Q===O.repeat){D(O);return}}if(O.duration&&O.duration<=(N-O.taskStartTime)){D(O)}}};this.start=function(K){G.push(K);K.taskStartTime=new Date().getTime();K.taskRunTime=0;K.taskRunCount=0;I();return K};this.stop=function(K){D(K);return K};this.stopAll=function(){E();for(var L=0,K=G.length;L<K;L++){if(G[L].onStop){G[L].onStop()}}G=[];A=[]}};Ext.TaskMgr=new Ext.util.TaskRunner();Ext.util.MixedCollection=function(B,A){this.items=[];this.map={};this.keys=[];this.length=0;this.addEvents("clear","add","replace","remove","sort");this.allowFunctions=B===true;if(A){this.getKey=A}Ext.util.MixedCollection.superclass.constructor.call(this)};Ext.extend(Ext.util.MixedCollection,Ext.util.Observable,{allowFunctions:false,add:function(B,D){if(arguments.length==1){D=arguments[0];B=this.getKey(D)}if(typeof B!="undefined"&&B!==null){var A=this.map[B];if(typeof A!="undefined"){return this.replace(B,D)}this.map[B]=D}this.length++;this.items.push(D);this.keys.push(B);this.fireEvent("add",this.length-1,D,B);return D},getKey:function(A){return A.id},replace:function(D,E){if(arguments.length==1){E=arguments[0];D=this.getKey(E)}var A=this.map[D];if(typeof D=="undefined"||D===null||typeof A=="undefined"){return this.add(D,E)}var B=this.indexOfKey(D);this.items[B]=E;this.map[D]=E;this.fireEvent("replace",D,A,E);return E},addAll:function(F){if(arguments.length>1||Ext.isArray(F)){var B=arguments.length>1?arguments:F;for(var E=0,A=B.length;E<A;E++){this.add(B[E])}}else{for(var D in F){if(this.allowFunctions||typeof F[D]!="function"){this.add(D,F[D])}}}},each:function(F,E){var B=[].concat(this.items);for(var D=0,A=B.length;D<A;D++){if(F.call(E||B[D],B[D],D,A)===false){break}}},eachKey:function(E,D){for(var B=0,A=this.keys.length;B<A;B++){E.call(D||window,this.keys[B],this.items[B],B,A)}},find:function(E,D){for(var B=0,A=this.items.length;B<A;B++){if(E.call(D||window,this.items[B],this.keys[B])){return this.items[B]}}return null},insert:function(A,B,D){if(arguments.length==2){D=arguments[1];B=this.getKey(D)}if(this.containsKey(B)){this.suspendEvents();this.removeKey(B);this.resumeEvents()}if(A>=this.length){return this.add(B,D)}this.length++;this.items.splice(A,0,D);if(typeof B!="undefined"&&B!=null){this.map[B]=D}this.keys.splice(A,0,B);this.fireEvent("add",A,D,B);return D},remove:function(A){return this.removeAt(this.indexOf(A))},removeAt:function(A){if(A<this.length&&A>=0){this.length--;var D=this.items[A];this.items.splice(A,1);var B=this.keys[A];if(typeof B!="undefined"){delete this.map[B]}this.keys.splice(A,1);this.fireEvent("remove",D,B);return D}return false},removeKey:function(A){return this.removeAt(this.indexOfKey(A))},getCount:function(){return this.length},indexOf:function(A){return this.items.indexOf(A)},indexOfKey:function(A){return this.keys.indexOf(A)},item:function(B){var A=this.map[B],D=A!==undefined?A:(typeof B=="number")?this.items[B]:undefined;return typeof D!="function"||this.allowFunctions?D:null},itemAt:function(A){return this.items[A]},key:function(A){return this.map[A]},contains:function(A){return this.indexOf(A)!=-1},containsKey:function(A){return typeof this.map[A]!="undefined"},clear:function(){this.length=0;this.items=[];this.keys=[];this.map={};this.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(J,A,I){var D=String(A).toUpperCase()=="DESC"?-1:1;I=I||function(L,K){return L-K};var H=[],B=this.keys,G=this.items;for(var E=0,F=G.length;E<F;E++){H[H.length]={key:B[E],value:G[E],index:E}}H.sort(function(L,K){var M=I(L[J],K[J])*D;if(M==0){M=(L.index<K.index?-1:1)}return M});for(var E=0,F=H.length;E<F;E++){G[E]=H[E].value;B[E]=H[E].key}this.fireEvent("sort",this)},sort:function(A,B){this._sort("value",A,B)},keySort:function(A,B){this._sort("key",A,B||function(E,D){var G=String(E).toUpperCase(),F=String(D).toUpperCase();return G>F?1:(G<F?-1:0)})},getRange:function(F,A){var B=this.items;if(B.length<1){return[]}F=F||0;A=Math.min(typeof A=="undefined"?this.length-1:A,this.length-1);var E=[];if(F<=A){for(var D=F;D<=A;D++){E[E.length]=B[D]}}else{for(var D=F;D>=A;D--){E[E.length]=B[D]}}return E},filter:function(D,B,E,A){if(Ext.isEmpty(B,false)){return this.clone()}B=this.createValueMatcher(B,E,A);return this.filterBy(function(F){return F&&B.test(F[D])})},filterBy:function(G,F){var H=new Ext.util.MixedCollection();H.getKey=this.getKey;var B=this.keys,E=this.items;for(var D=0,A=E.length;D<A;D++){if(G.call(F||this,E[D],B[D])){H.add(B[D],E[D])}}return H},findIndex:function(D,B,F,E,A){if(Ext.isEmpty(B,false)){return -1}B=this.createValueMatcher(B,E,A);return this.findIndexBy(function(G){return G&&B.test(G[D])},null,F)},findIndexBy:function(G,F,H){var B=this.keys,E=this.items;for(var D=(H||0),A=E.length;D<A;D++){if(G.call(F||this,E[D],B[D])){return D}}return -1},createValueMatcher:function(B,D,A){if(!B.exec){B=String(B);B=new RegExp((D===true?"":"^")+Ext.escapeRe(B),A?"":"i")}return B},clone:function(){var F=new Ext.util.MixedCollection();var B=this.keys,E=this.items;for(var D=0,A=E.length;D<A;D++){F.add(B[D],E[D])}F.getKey=this.getKey;return F}});Ext.util.MixedCollection.prototype.get=Ext.util.MixedCollection.prototype.item;Ext.util.JSON=new (function(){var useHasOwn=!!{}.hasOwnProperty;var pad=function(n){return n<10?"0"+n:n};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var encodeString=function(s){if(/["\\\x00-\x1f]/.test(s)){return'"'+s.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];if(c){return c}c=b.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+s+'"'};var encodeArray=function(o){var a=["["],b,i,l=o.length,v;for(i=0;i<l;i+=1){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;default:if(b){a.push(",")}a.push(v===null?"null":Ext.util.JSON.encode(v));b=true}}a.push("]");return a.join("")};this.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};this.encode=function(o){if(typeof o=="undefined"||o===null){return"null"}else{if(Ext.isArray(o)){return encodeArray(o)}else{if(Ext.isDate(o)){return Ext.util.JSON.encodeDate(o)}else{if(typeof o=="string"){return encodeString(o)}else{if(typeof o=="number"){return isFinite(o)?String(o):"null"}else{if(typeof o=="boolean"){return String(o)}else{var a=["{"],b,i,v;for(i in o){if(!useHasOwn||o.hasOwnProperty(i)){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;default:if(b){a.push(",")}a.push(this.encode(i),":",v===null?"null":this.encode(v));b=true}}}a.push("}");return a.join("")}}}}}}};this.decode=function(json){return eval("("+json+")")}})();Ext.encode=Ext.util.JSON.encode;Ext.decode=Ext.util.JSON.decode;Ext.util.Format=function(){var trimRe=/^\s+|\s+$/g;return{ellipsis:function(value,len){if(value&&value.length>len){return value.substr(0,len-3)+"..."}return value},undef:function(value){return value!==undefined?value:""},defaultValue:function(value,defaultValue){return value!==undefined&&value!==""?value:defaultValue},htmlEncode:function(value){return !value?value:String(value).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},htmlDecode:function(value){return !value?value:String(value).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},trim:function(value){return String(value).replace(trimRe,"")},substr:function(value,start,length){return String(value).substr(start,length)},lowercase:function(value){return String(value).toLowerCase()},uppercase:function(value){return String(value).toUpperCase()},capitalize:function(value){return !value?value:value.charAt(0).toUpperCase()+value.substr(1).toLowerCase()},call:function(value,fn){if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);args.unshift(value);return eval(fn).apply(window,args)}else{return eval(fn).call(window,value)}},usMoney:function(v){v=(Math.round((v-0)*100))/100;v=(v==Math.floor(v))?v+".00":((v*10==Math.floor(v*10))?v+"0":v);v=String(v);var ps=v.split(".");var whole=ps[0];var sub=ps[1]?"."+ps[1]:".00";var r=/(\d+)(\d{3})/;while(r.test(whole)){whole=whole.replace(r,"$1,$2")}v=whole+sub;if(v.charAt(0)=="-"){return"-$"+v.substr(1)}return"$"+v},date:function(v,format){if(!v){return""}if(!Ext.isDate(v)){v=new Date(Date.parse(v))}return v.dateFormat(format||"m/d/Y")},dateRenderer:function(format){return function(v){return Ext.util.Format.date(v,format)}},stripTagsRE:/<\/?[^>]+>/gi,stripTags:function(v){return !v?v:String(v).replace(this.stripTagsRE,"")},stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,stripScripts:function(v){return !v?v:String(v).replace(this.stripScriptsRe,"")},fileSize:function(size){if(size<1024){return size+" bytes"}else{if(size<1048576){return(Math.round(((size*10)/1024))/10)+" KB"}else{return(Math.round(((size*10)/1048576))/10)+" MB"}}},math:function(){var fns={};return function(v,a){if(!fns[a]){fns[a]=new Function("v","return v "+a+";")}return fns[a](v)}}(),nl2br:function(v){return v===undefined||v===null?"":v.replace(/\n/g,"<br/>")}}}();Ext.XTemplate=function(){Ext.XTemplate.superclass.constructor.apply(this,arguments);var Q=this.html;Q=["<tpl>",Q,"</tpl>"].join("");var P=/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/;var O=/^<tpl\b[^>]*?for="(.*?)"/;var M=/^<tpl\b[^>]*?if="(.*?)"/;var K=/^<tpl\b[^>]*?exec="(.*?)"/;var D,B=0;var H=[];while(D=Q.match(P)){var N=D[0].match(O);var L=D[0].match(M);var J=D[0].match(K);var F=null,I=null,E=null;var A=N&&N[1]?N[1]:"";if(L){F=L&&L[1]?L[1]:null;if(F){I=new Function("values","parent","xindex","xcount","with(values){ return "+(Ext.util.Format.htmlDecode(F))+"; }")}}if(J){F=J&&J[1]?J[1]:null;if(F){E=new Function("values","parent","xindex","xcount","with(values){ "+(Ext.util.Format.htmlDecode(F))+"; }")}}if(A){switch(A){case".":A=new Function("values","parent","with(values){ return values; }");break;case"..":A=new Function("values","parent","with(values){ return parent; }");break;default:A=new Function("values","parent","with(values){ return "+A+"; }")}}H.push({id:B,target:A,exec:E,test:I,body:D[1]||""});Q=Q.replace(D[0],"{xtpl"+B+"}");++B}for(var G=H.length-1;G>=0;--G){this.compileTpl(H[G])}this.master=H[H.length-1];this.tpls=H};Ext.extend(Ext.XTemplate,Ext.Template,{re:/\{([\w-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\\]\s?[\d\.\+\-\*\\\(\)]+)?\}/g,codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,applySubTemplate:function(A,I,H,E,D){var K=this.tpls[A];if(K.test&&!K.test.call(this,I,H,E,D)){return""}if(K.exec&&K.exec.call(this,I,H,E,D)){return""}var J=K.target?K.target.call(this,I,H):I;H=K.target?I:H;if(K.target&&Ext.isArray(J)){var B=[];for(var F=0,G=J.length;F<G;F++){B[B.length]=K.compiled.call(this,J[F],H,F+1,G)}return B.join("")}return K.compiled.call(this,J,H,E,D)},compileTpl:function(tpl){var fm=Ext.util.Format;var useF=this.disableFormats!==true;var sep=Ext.isGecko?"+":",";var fn=function(m,name,format,args,math){if(name.substr(0,4)=="xtpl"){return"'"+sep+"this.applySubTemplate("+name.substr(4)+", values, parent, xindex, xcount)"+sep+"'"}var v;if(name==="."){v="values"}else{if(name==="#"){v="xindex"}else{if(name.indexOf(".")!=-1){v=name}else{v="values['"+name+"']"}}}if(math){v="("+v+math+")"}if(format&&useF){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"("}else{format='this.call("'+format.substr(5)+'", ';args=", values"}}else{args="";format="("+v+" === undefined ? '' : "}return"'"+sep+format+v+args+")"+sep+"'"};var codeFn=function(m,code){return"'"+sep+"("+code+")"+sep+"'"};var body;if(Ext.isGecko){body="tpl.compiled = function(values, parent, xindex, xcount){ return '"+tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)+"';};"}else{body=["tpl.compiled = function(values, parent, xindex, xcount){ return ['"];body.push(tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn));body.push("'].join('');};");body=body.join("")}eval(body);return this},applyTemplate:function(A){return this.master.compiled.call(this,A,{},1,1)},compile:function(){return this}});Ext.XTemplate.prototype.apply=Ext.XTemplate.prototype.applyTemplate;Ext.XTemplate.from=function(A){A=Ext.getDom(A);return new Ext.XTemplate(A.value||A.innerHTML)};Ext.util.CSS=function(){var E=null;var D=document;var B=/(-[a-z])/gi;var A=function(F,G){return G.charAt(1).toUpperCase()};return{createStyleSheet:function(H,K){var G;var F=D.getElementsByTagName("head")[0];var J=D.createElement("style");J.setAttribute("type","text/css");if(K){J.setAttribute("id",K)}if(Ext.isIE){F.appendChild(J);G=J.styleSheet;G.cssText=H}else{try{J.appendChild(D.createTextNode(H))}catch(I){J.cssText=H}F.appendChild(J);G=J.styleSheet?J.styleSheet:(J.sheet||D.styleSheets[D.styleSheets.length-1])}this.cacheStyleSheet(G);return G},removeStyleSheet:function(G){var F=D.getElementById(G);if(F){F.parentNode.removeChild(F)}},swapStyleSheet:function(H,F){this.removeStyleSheet(H);var G=D.createElement("link");G.setAttribute("rel","stylesheet");G.setAttribute("type","text/css");G.setAttribute("id",H);G.setAttribute("href",F);D.getElementsByTagName("head")[0].appendChild(G)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(G){if(!E){E={}}try{var I=G.cssRules||G.rules;for(var F=I.length-1;F>=0;--F){E[I[F].selectorText]=I[F]}}catch(H){}},getRules:function(G){if(E==null||G){E={};var I=D.styleSheets;for(var H=0,F=I.length;H<F;H++){try{this.cacheStyleSheet(I[H])}catch(J){}}}return E},getRule:function(F,H){var G=this.getRules(H);if(!Ext.isArray(F)){return G[F]}for(var I=0;I<F.length;I++){if(G[F[I]]){return G[F[I]]}}return null},updateRule:function(F,I,H){if(!Ext.isArray(F)){var J=this.getRule(F);if(J){J.style[I.replace(B,A)]=H;return true}}else{for(var G=0;G<F.length;G++){if(this.updateRule(F[G],I,H)){return true}}}return false}}}();Ext.util.ClickRepeater=function(B,A){this.el=Ext.get(B);this.el.unselectable();Ext.apply(this,A);this.addEvents("mousedown","click","mouseup");if(!this.disabled){this.disabled=true;this.enable()}if(this.handler){this.on("click",this.handler,this.scope||this)}Ext.util.ClickRepeater.superclass.constructor.call(this)};Ext.extend(Ext.util.ClickRepeater,Ext.util.Observable,{interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(this.preventDefault||this.stopDefault){this.el.on("click",this.eventOptions,this)}}this.disabled=false},disable:function(A){if(A||!this.disabled){clearTimeout(this.timer);if(this.pressClass){this.el.removeClass(this.pressClass)}Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.removeAllListeners()}this.disabled=true},setDisabled:function(A){this[A?"disable":"enable"]()},eventOptions:function(A){if(this.preventDefault){A.preventDefault()}if(this.stopDefault){A.stopEvent()}},destroy:function(){this.disable(true);Ext.destroy(this.el);this.purgeListeners()},handleMouseDown:function(){clearTimeout(this.timer);this.el.blur();if(this.pressClass){this.el.addClass(this.pressClass)}this.mousedownTime=new Date();Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this);this.fireEvent("click",this);if(this.accelerate){this.delay=400}this.timer=this.click.defer(this.delay||this.interval,this)},click:function(){this.fireEvent("click",this);this.timer=this.click.defer(this.accelerate?this.easeOutExpo(this.mousedownTime.getElapsed(),400,-390,12000):this.interval,this)},easeOutExpo:function(B,A,E,D){return(B==D)?A+E:E*(-Math.pow(2,-10*B/D)+1)+A},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressClass){this.el.removeClass(this.pressClass)}this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn,this);if(this.pressClass){this.el.addClass(this.pressClass)}this.click()},handleMouseUp:function(){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.removeClass(this.pressClass);this.fireEvent("mouseup",this)}});Ext.KeyNav=function(B,A){this.el=Ext.get(B);Ext.apply(this,A);if(!this.disabled){this.disabled=true;this.enable()}};Ext.KeyNav.prototype={disabled:false,defaultEventAction:"stopEvent",forceKeyDown:false,prepareEvent:function(D){var A=D.getKey();var B=this.keyToHandler[A];if(Ext.isSafari2&&B&&A>=37&&A<=40){D.stopEvent()}},relay:function(D){var A=D.getKey();var B=this.keyToHandler[A];if(B&&this[B]){if(this.doRelay(D,this[B],B)!==true){D[this.defaultEventAction]()}}},doRelay:function(D,B,A){return B.call(this.scope||this,D)},enter:false,left:false,right:false,up:false,down:false,tab:false,esc:false,pageUp:false,pageDown:false,del:false,home:false,end:false,keyToHandler:{37:"left",39:"right",38:"up",40:"down",33:"pageUp",34:"pageDown",46:"del",36:"home",35:"end",13:"enter",27:"esc",9:"tab"},enable:function(){if(this.disabled){if(this.isKeyDown()){this.el.on("keydown",this.relay,this)}else{this.el.on("keydown",this.prepareEvent,this);this.el.on("keypress",this.relay,this)}this.disabled=false}},disable:function(){if(!this.disabled){if(this.isKeyDown()){this.el.un("keydown",this.relay,this)}else{this.el.un("keydown",this.prepareEvent,this);this.el.un("keypress",this.relay,this)}this.disabled=true}},isKeyDown:function(){return this.forceKeyDown||Ext.isIE||(Ext.isWebKit&&!Ext.isSafari2)||Ext.isAir}};Ext.KeyMap=function(D,B,A){this.el=Ext.get(D);this.eventName=A||"keydown";this.bindings=[];if(B){this.addBinding(B)}this.enable()};Ext.KeyMap.prototype={stopEvent:false,addBinding:function(E){if(Ext.isArray(E)){for(var G=0,I=E.length;G<I;G++){this.addBinding(E[G])}return}var O=E.key,D=E.shift,A=E.ctrl,H=E.alt,K=E.fn||E.handler,N=E.scope;if(E.stopEvent){this.stopEvent=E.stopEvent}if(typeof O=="string"){var L=[];var J=O.toUpperCase();for(var F=0,I=J.length;F<I;F++){L.push(J.charCodeAt(F))}O=L}var B=Ext.isArray(O);var M=function(S){if((!D||S.shiftKey)&&(!A||S.ctrlKey)&&(!H||S.altKey)){var Q=S.getKey();if(B){for(var R=0,P=O.length;R<P;R++){if(O[R]==Q){if(this.stopEvent){S.stopEvent()}K.call(N||window,Q,S);return}}}else{if(Q==O){if(this.stopEvent){S.stopEvent()}K.call(N||window,Q,S)}}}};this.bindings.push(M)},on:function(B,E,D){var H,A,F,G;if(typeof B=="object"&&!Ext.isArray(B)){H=B.key;A=B.shift;F=B.ctrl;G=B.alt}else{H=B}this.addBinding({key:H,shift:A,ctrl:F,alt:G,fn:E,scope:D})},handleKeyDown:function(E){if(this.enabled){var B=this.bindings;for(var D=0,A=B.length;D<A;D++){B[D].call(this,E)}}},isEnabled:function(){return this.enabled},enable:function(){if(!this.enabled){this.el.on(this.eventName,this.handleKeyDown,this);this.enabled=true}},disable:function(){if(this.enabled){this.el.removeListener(this.eventName,this.handleKeyDown,this);this.enabled=false}}};Ext.util.TextMetrics=function(){var A;return{measure:function(B,D,E){if(!A){A=Ext.util.TextMetrics.Instance(B,E)}A.bind(B);A.setFixedWidth(E||"auto");return A.getSize(D)},createInstance:function(B,D){return Ext.util.TextMetrics.Instance(B,D)}}}();Ext.util.TextMetrics.Instance=function(B,E){var D=new Ext.Element(document.createElement("div"));document.body.appendChild(D.dom);D.position("absolute");D.setLeftTop(-1000,-1000);D.hide();if(E){D.setWidth(E)}var A={getSize:function(G){D.update(G);var F=D.getSize();D.update("");return F},bind:function(F){D.setStyle(Ext.fly(F).getStyles("font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"))},setFixedWidth:function(F){D.setWidth(F)},getWidth:function(F){D.dom.style.width="auto";return this.getSize(F).width},getHeight:function(F){return this.getSize(F).height}};A.bind(B);return A};Ext.Element.measureText=Ext.util.TextMetrics.measure;(function(){var A=Ext.EventManager;var B=Ext.lib.Dom;Ext.dd.DragDrop=function(F,D,E){if(F){this.init(F,D,E)}};Ext.dd.DragDrop.prototype={id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,b4StartDrag:function(D,E){},startDrag:function(D,E){},b4Drag:function(D){},onDrag:function(D){},onDragEnter:function(D,E){},b4DragOver:function(D){},onDragOver:function(D,E){},b4DragOut:function(D){},onDragOut:function(D,E){},b4DragDrop:function(D){},onDragDrop:function(D,E){},onInvalidDrop:function(D){},b4EndDrag:function(D){},endDrag:function(D){},b4MouseDown:function(D){},onMouseDown:function(D){},onMouseUp:function(D){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(I,G,N){if(typeof G=="number"){G={left:G,right:G,top:G,bottom:G}}G=G||this.defaultPadding;var K=Ext.get(this.getEl()).getBox();var D=Ext.get(I);var M=D.getScroll();var J,E=D.dom;if(E==document.body){J={x:M.left,y:M.top,width:Ext.lib.Dom.getViewWidth(),height:Ext.lib.Dom.getViewHeight()}}else{var L=D.getXY();J={x:L[0]+M.left,y:L[1]+M.top,width:E.clientWidth,height:E.clientHeight}}var H=K.y-J.y;var F=K.x-J.x;this.resetConstraints();this.setXConstraint(F-(G.left||0),J.width-F-K.width-(G.right||0),this.xTickSize);this.setYConstraint(H-(G.top||0),J.height-H-K.height-(G.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(F,D,E){this.initTarget(F,D,E);A.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(F,D,E){this.config=E||{};this.DDM=Ext.dd.DDM;this.groups={};if(typeof F!=="string"){F=Ext.id(F)}this.id=F;this.addToGroup((D)?D:"default");this.handleElId=F;this.setDragElId(F);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(F,D,G,E){if(!D&&0!==D){this.padding=[F,F,F,F]}else{if(!G&&0!==G){this.padding=[F,D,F,D]}else{this.padding=[F,D,G,E]}}},setInitPosition:function(G,F){var H=this.getEl();if(!this.DDM.verifyEl(H)){return}var E=G||0;var D=F||0;var I=B.getXY(H);this.initPageX=I[0]-E;this.initPageY=I[1]-D;this.lastPageX=I[0];this.lastPageY=I[1];this.setStartPosition(I)},setStartPosition:function(E){var D=E||B.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=D[0];this.startPageY=D[1]},addToGroup:function(D){this.groups[D]=true;this.DDM.regDragDrop(this,D)},removeFromGroup:function(D){if(this.groups[D]){delete this.groups[D]}this.DDM.removeDDFromGroup(this,D)},setDragElId:function(D){this.dragElId=D},setHandleElId:function(D){if(typeof D!=="string"){D=Ext.id(D)}this.handleElId=D;this.DDM.regHandle(this.id,D)},setOuterHandleElId:function(D){if(typeof D!=="string"){D=Ext.id(D)}A.on(D,"mousedown",this.handleMouseDown,this);this.setHandleElId(D);this.hasOuterHandles=true},unreg:function(){A.un(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return(this.DDM.isLocked()||this.locked)},handleMouseDown:function(F,E){if(this.primaryButtonOnly&&F.button!=0){return}if(this.isLocked()){return}this.DDM.refreshCache(this.groups);var D=new Ext.lib.Point(Ext.lib.Event.getPageX(F),Ext.lib.Event.getPageY(F));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(D,this)){}else{if(this.clickValidator(F)){this.setStartPosition();this.b4MouseDown(F);this.onMouseDown(F);this.DDM.handleMouseDown(F,this);this.DDM.stopEvent(F)}else{}}},clickValidator:function(E){var D=E.getTarget();return(this.isValidHandleChild(D)&&(this.id==this.handleElId||this.DDM.handleWasClicked(D,this.id)))},addInvalidHandleType:function(D){var E=D.toUpperCase();this.invalidHandleTypes[E]=E},addInvalidHandleId:function(D){if(typeof D!=="string"){D=Ext.id(D)}this.invalidHandleIds[D]=D},addInvalidHandleClass:function(D){this.invalidHandleClasses.push(D)},removeInvalidHandleType:function(D){var E=D.toUpperCase();delete this.invalidHandleTypes[E]},removeInvalidHandleId:function(D){if(typeof D!=="string"){D=Ext.id(D)}delete this.invalidHandleIds[D]},removeInvalidHandleClass:function(E){for(var F=0,D=this.invalidHandleClasses.length;F<D;++F){if(this.invalidHandleClasses[F]==E){delete this.invalidHandleClasses[F]}}},isValidHandleChild:function(G){var F=true;var I;try{I=G.nodeName.toUpperCase()}catch(H){I=G.nodeName}F=F&&!this.invalidHandleTypes[I];F=F&&!this.invalidHandleIds[G.id];for(var E=0,D=this.invalidHandleClasses.length;F&&E<D;++E){F=!Ext.fly(G).hasClass(this.invalidHandleClasses[E])}return F},setXTicks:function(G,D){this.xTicks=[];this.xTickSize=D;var F={};for(var E=this.initPageX;E>=this.minX;E=E-D){if(!F[E]){this.xTicks[this.xTicks.length]=E;F[E]=true}}for(E=this.initPageX;E<=this.maxX;E=E+D){if(!F[E]){this.xTicks[this.xTicks.length]=E;F[E]=true}}this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(G,D){this.yTicks=[];this.yTickSize=D;var F={};for(var E=this.initPageY;E>=this.minY;E=E-D){if(!F[E]){this.yTicks[this.yTicks.length]=E;F[E]=true}}for(E=this.initPageY;E<=this.maxY;E=E+D){if(!F[E]){this.yTicks[this.yTicks.length]=E;F[E]=true}}this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(F,E,D){this.leftConstraint=F;this.rightConstraint=E;this.minX=this.initPageX-F;this.maxX=this.initPageX+E;if(D){this.setXTicks(this.initPageX,D)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(D,F,E){this.topConstraint=D;this.bottomConstraint=F;this.minY=this.initPageY-D;this.maxY=this.initPageY+F;if(E){this.setYTicks(this.initPageY,E)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var E=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var D=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(E,D)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(J,G){if(!G){return J}else{if(G[0]>=J){return G[0]}else{for(var E=0,D=G.length;E<D;++E){var F=E+1;if(G[F]&&G[F]>=J){var I=J-G[E];var H=G[F]-J;return(H>I)?G[E]:G[F]}}return G[G.length-1]}}},toString:function(){return("DragDrop "+this.id)}}})();if(!Ext.dd.DragDropMgr){Ext.dd.DragDropMgr=function(){var A=Ext.EventManager;return{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,_execOnAll:function(E,D){for(var F in this.ids){for(var B in this.ids[F]){var G=this.ids[F][B];if(!this.isTypeOfDD(G)){continue}G[E].apply(G,D)}}},_onLoad:function(){this.init();A.on(document,"mouseup",this.handleMouseUp,this,true);A.on(document,"mousemove",this.handleMouseMove,this,true);A.on(window,"unload",this._onUnload,this,true);A.on(window,"resize",this._onResize,this,true)},_onResize:function(B){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(D,B){if(!this.initialized){this.init()}if(!this.ids[B]){this.ids[B]={}}this.ids[B][D.id]=D},removeDDFromGroup:function(E,B){if(!this.ids[B]){this.ids[B]={}}var D=this.ids[B];if(D&&D[E.id]){delete D[E.id]}},_remove:function(D){for(var B in D.groups){if(B&&this.ids[B]&&this.ids[B][D.id]){delete this.ids[B][D.id]}}delete this.handleIds[D.id]},regHandle:function(D,B){if(!this.handleIds[D]){this.handleIds[D]={}}this.handleIds[D][B]=B},isDragDrop:function(B){return(this.getDDById(B))?true:false},getRelated:function(H,D){var G=[];for(var F in H.groups){for(var E in this.ids[F]){var B=this.ids[F][E];if(!this.isTypeOfDD(B)){continue}if(!D||B.isTarget){G[G.length]=B}}}return G},isLegalTarget:function(G,F){var D=this.getRelated(G,true);for(var E=0,B=D.length;E<B;++E){if(D[E].id==F.id){return true}}return false},isTypeOfDD:function(B){return(B&&B.__ygDragDrop)},isHandle:function(D,B){return(this.handleIds[D]&&this.handleIds[D][B])},getDDById:function(D){for(var B in this.ids){if(this.ids[B][D]){return this.ids[B][D]}}return null},handleMouseDown:function(E,D){if(Ext.QuickTips){Ext.QuickTips.disable()}if(this.dragCurrent){this.handleMouseUp(E)}this.currentTarget=E.getTarget();this.dragCurrent=D;var B=D.getEl();this.startX=E.getPageX();this.startY=E.getPageY();this.deltaX=this.startX-B.offsetLeft;this.deltaY=this.startY-B.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var F=Ext.dd.DDM;F.startDrag(F.startX,F.startY)},this.clickTimeThresh)},startDrag:function(B,D){clearTimeout(this.clickTimeout);if(this.dragCurrent){this.dragCurrent.b4StartDrag(B,D);this.dragCurrent.startDrag(B,D)}this.dragThreshMet=true},handleMouseUp:function(B){if(Ext.QuickTips){Ext.QuickTips.enable()}if(!this.dragCurrent){return}clearTimeout(this.clickTimeout);if(this.dragThreshMet){this.fireEvents(B,true)}else{}this.stopDrag(B);this.stopEvent(B)},stopEvent:function(B){if(this.stopPropagation){B.stopPropagation()}if(this.preventDefault){B.preventDefault()}},stopDrag:function(B){if(this.dragCurrent){if(this.dragThreshMet){this.dragCurrent.b4EndDrag(B);this.dragCurrent.endDrag(B)}this.dragCurrent.onMouseUp(B)}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(E){if(!this.dragCurrent){return true}if(Ext.isIE&&(E.button!==0&&E.button!==1&&E.button!==2)){this.stopEvent(E);return this.handleMouseUp(E)}if(!this.dragThreshMet){var D=Math.abs(this.startX-E.getPageX());var B=Math.abs(this.startY-E.getPageY());if(D>this.clickPixelThresh||B>this.clickPixelThresh){this.startDrag(this.startX,this.startY)}}if(this.dragThreshMet){this.dragCurrent.b4Drag(E);this.dragCurrent.onDrag(E);if(!this.dragCurrent.moveOnly){this.fireEvents(E,false)}}this.stopEvent(E);return true},fireEvents:function(L,M){var O=this.dragCurrent;if(!O||O.isLocked()){return}var P=L.getPoint();var B=[];var F=[];var J=[];var H=[];var E=[];for(var G in this.dragOvers){var D=this.dragOvers[G];if(!this.isTypeOfDD(D)){continue}if(!this.isOverTarget(P,D,this.mode)){F.push(D)}B[G]=true;delete this.dragOvers[G]}for(var N in O.groups){if("string"!=typeof N){continue}for(G in this.ids[N]){var I=this.ids[N][G];if(!this.isTypeOfDD(I)){continue}if(I.isTarget&&!I.isLocked()&&I!=O){if(this.isOverTarget(P,I,this.mode)){if(M){H.push(I)}else{if(!B[I.id]){E.push(I)}else{J.push(I)}this.dragOvers[I.id]=I}}}}}if(this.mode){if(F.length){O.b4DragOut(L,F);O.onDragOut(L,F)}if(E.length){O.onDragEnter(L,E)}if(J.length){O.b4DragOver(L,J);O.onDragOver(L,J)}if(H.length){O.b4DragDrop(L,H);O.onDragDrop(L,H)}}else{var K=0;for(G=0,K=F.length;G<K;++G){O.b4DragOut(L,F[G].id);O.onDragOut(L,F[G].id)}for(G=0,K=E.length;G<K;++G){O.onDragEnter(L,E[G].id)}for(G=0,K=J.length;G<K;++G){O.b4DragOver(L,J[G].id);O.onDragOver(L,J[G].id)}for(G=0,K=H.length;G<K;++G){O.b4DragDrop(L,H[G].id);O.onDragDrop(L,H[G].id)}}if(M&&!H.length){O.onInvalidDrop(L)}},getBestMatch:function(E){var G=null;var D=E.length;if(D==1){G=E[0]}else{for(var F=0;F<D;++F){var B=E[F];if(B.cursorIsOver){G=B;break}else{if(!G||G.overlap.getArea()<B.overlap.getArea()){G=B}}}}return G},refreshCache:function(D){for(var B in D){if("string"!=typeof B){continue}for(var E in this.ids[B]){var F=this.ids[B][E];if(this.isTypeOfDD(F)){var G=this.getLocation(F);if(G){this.locationCache[F.id]=G}else{delete this.locationCache[F.id]}}}}},verifyEl:function(D){if(D){var B;if(Ext.isIE){try{B=D.offsetParent}catch(E){}}else{B=D.offsetParent}if(B){return true}}return false},getLocation:function(H){if(!this.isTypeOfDD(H)){return null}var F=H.getEl(),K,E,D,M,L,N,B,J,G;try{K=Ext.lib.Dom.getXY(F)}catch(I){}if(!K){return null}E=K[0];D=E+F.offsetWidth;M=K[1];L=M+F.offsetHeight;N=M-H.padding[0];B=D+H.padding[1];J=L+H.padding[2];G=E-H.padding[3];return new Ext.lib.Region(N,B,J,G)},isOverTarget:function(K,B,E){var G=this.locationCache[B.id];if(!G||!this.useCache){G=this.getLocation(B);this.locationCache[B.id]=G}if(!G){return false}B.cursorIsOver=G.contains(K);var J=this.dragCurrent;if(!J||!J.getTargetCoord||(!E&&!J.constrainX&&!J.constrainY)){return B.cursorIsOver}B.overlap=null;var H=J.getTargetCoord(K.x,K.y);var D=J.getDragEl();var F=new Ext.lib.Region(H.y,H.x+D.offsetWidth,H.y+D.offsetHeight,H.x);var I=F.intersect(G);if(I){B.overlap=I;return(E)?true:B.cursorIsOver}else{return false}},_onUnload:function(D,B){Ext.dd.DragDropMgr.unregAll()},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null}this._execOnAll("unreg",[]);for(var B in this.elementCache){delete this.elementCache[B]}this.elementCache={};this.ids={}},elementCache:{},getElWrapper:function(D){var B=this.elementCache[D];if(!B||!B.el){B=this.elementCache[D]=new this.ElementWrapper(Ext.getDom(D))}return B},getElement:function(B){return Ext.getDom(B)},getCss:function(D){var B=Ext.getDom(D);return(B)?B.style:null},ElementWrapper:function(B){this.el=B||null;this.id=this.el&&B.id;this.css=this.el&&B.style},getPosX:function(B){return Ext.lib.Dom.getX(B)},getPosY:function(B){return Ext.lib.Dom.getY(B)},swapNode:function(E,B){if(E.swapNode){E.swapNode(B)}else{var F=B.parentNode;var D=B.nextSibling;if(D==E){F.insertBefore(E,B)}else{if(B==E.nextSibling){F.insertBefore(B,E)}else{E.parentNode.replaceChild(B,E);F.insertBefore(E,D)}}}},getScroll:function(){var E,B,F=document.documentElement,D=document.body;if(F&&(F.scrollTop||F.scrollLeft)){E=F.scrollTop;B=F.scrollLeft}else{if(D){E=D.scrollTop;B=D.scrollLeft}else{}}return{top:E,left:B}},getStyle:function(D,B){return Ext.fly(D).getStyle(B)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(B,E){var D=Ext.lib.Dom.getXY(E);Ext.lib.Dom.setXY(B,D)},numericSort:function(D,B){return(D-B)},_timeoutCount:0,_addListeners:function(){var B=Ext.dd.DDM;if(Ext.lib.Event&&document){B._onLoad()}else{if(B._timeoutCount>2000){}else{setTimeout(B._addListeners,10);if(document&&document.body){B._timeoutCount+=1}}}},handleWasClicked:function(B,E){if(this.isHandle(E,B.id)){return true}else{var D=B.parentNode;while(D){if(this.isHandle(E,D.id)){return true}else{D=D.parentNode}}}return false}}}();Ext.dd.DDM=Ext.dd.DragDropMgr;Ext.dd.DDM._addListeners()}Ext.dd.DD=function(D,A,B){if(D){this.init(D,A,B)}};Ext.extend(Ext.dd.DD,Ext.dd.DragDrop,{scroll:true,autoOffset:function(D,B){var A=D-this.startPageX;var E=B-this.startPageY;this.setDelta(A,E)},setDelta:function(B,A){this.deltaX=B;this.deltaY=A},setDragElPos:function(D,B){var A=this.getDragEl();this.alignElWithMouse(A,D,B)},alignElWithMouse:function(D,H,G){var F=this.getTargetCoord(H,G);var B=D.dom?D:Ext.fly(D,"_dd");if(!this.deltaSetXY){var I=[F.x,F.y];B.setXY(I);var E=B.getLeft(true);var A=B.getTop(true);this.deltaSetXY=[E-F.x,A-F.y]}else{B.setLeftTop(F.x+this.deltaSetXY[0],F.y+this.deltaSetXY[1])}this.cachePosition(F.x,F.y);this.autoScroll(F.x,F.y,D.offsetHeight,D.offsetWidth);return F},cachePosition:function(B,A){if(B){this.lastPageX=B;this.lastPageY=A}else{var D=Ext.lib.Dom.getXY(this.getEl());this.lastPageX=D[0];this.lastPageY=D[1]}},autoScroll:function(K,J,F,L){if(this.scroll){var M=Ext.lib.Dom.getViewHeight();var B=Ext.lib.Dom.getViewWidth();var O=this.DDM.getScrollTop();var E=this.DDM.getScrollLeft();var I=F+J;var N=L+K;var H=(M+O-J-this.deltaY);var G=(B+E-K-this.deltaX);var D=40;var A=(document.all)?80:30;if(I>M&&H<D){window.scrollTo(E,O+A)}if(J<O&&O>0&&J-O<D){window.scrollTo(E,O-A)}if(N>B&&G<D){window.scrollTo(E+A,O)}if(K<E&&E>0&&K-E<D){window.scrollTo(E-A,O)}}},getTargetCoord:function(D,B){var A=D-this.deltaX;var E=B-this.deltaY;if(this.constrainX){if(A<this.minX){A=this.minX}if(A>this.maxX){A=this.maxX}}if(this.constrainY){if(E<this.minY){E=this.minY}if(E>this.maxY){E=this.maxY}}A=this.getTick(A,this.xTicks);E=this.getTick(E,this.yTicks);return{x:A,y:E}},applyConfig:function(){Ext.dd.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(A){this.autoOffset(A.getPageX(),A.getPageY())},b4Drag:function(A){this.setDragElPos(A.getPageX(),A.getPageY())},toString:function(){return("DD "+this.id)}});Ext.dd.DDProxy=function(D,A,B){if(D){this.init(D,A,B);this.initFrame()}};Ext.dd.DDProxy.dragElId="ygddfdiv";Ext.extend(Ext.dd.DDProxy,Ext.dd.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var B=this;var A=document.body;if(!A||!A.firstChild){setTimeout(function(){B.createFrame()},50);return}var E=this.getDragEl();if(!E){E=document.createElement("div");E.id=this.dragElId;var D=E.style;D.position="absolute";D.visibility="hidden";D.cursor="move";D.border="2px solid #aaa";D.zIndex=999;A.insertBefore(E,A.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(F,E){var D=this.getEl();var A=this.getDragEl();var B=A.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(B.width,10)/2),Math.round(parseInt(B.height,10)/2))}this.setDragElPos(F,E);Ext.fly(A).show()},_resizeProxy:function(){if(this.resizeFrame){var A=this.getEl();Ext.fly(this.getDragEl()).setSize(A.offsetWidth,A.offsetHeight)}},b4MouseDown:function(B){var A=B.getPageX();var D=B.getPageY();this.autoOffset(A,D);this.setDragElPos(A,D)},b4StartDrag:function(A,B){this.showFrame(A,B)},b4EndDrag:function(A){Ext.fly(this.getDragEl()).hide()},endDrag:function(D){var B=this.getEl();var A=this.getDragEl();A.style.visibility="";this.beforeMove();B.style.visibility="hidden";Ext.dd.DDM.moveToEl(B,A);A.style.visibility="hidden";B.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return("DDProxy "+this.id)}});Ext.dd.DDTarget=function(D,A,B){if(D){this.initTarget(D,A,B)}};Ext.extend(Ext.dd.DDTarget,Ext.dd.DragDrop,{toString:function(){return("DDTarget "+this.id)}});Ext.dd.DragTracker=function(A){Ext.apply(this,A);this.addEvents("mousedown","mouseup","mousemove","dragstart","dragend","drag");this.dragRegion=new Ext.lib.Region(0,0,0,0);if(this.el){this.initEl(this.el)}};Ext.extend(Ext.dd.DragTracker,Ext.util.Observable,{active:false,tolerance:5,autoStart:false,initEl:function(A){this.el=Ext.get(A);A.on("mousedown",this.onMouseDown,this,this.delegate?{delegate:this.delegate}:undefined)},destroy:function(){this.el.un("mousedown",this.onMouseDown,this)},onMouseDown:function(D,B){if(this.fireEvent("mousedown",this,D)!==false&&this.onBeforeStart(D)!==false){this.startXY=this.lastXY=D.getXY();this.dragTarget=this.delegate?B:this.el.dom;D.preventDefault();var A=Ext.getDoc();A.on("mouseup",this.onMouseUp,this);A.on("mousemove",this.onMouseMove,this);A.on("selectstart",this.stopSelect,this);if(this.autoStart){this.timer=this.triggerStart.defer(this.autoStart===true?1000:this.autoStart,this)}}},onMouseMove:function(E,D){if(this.active&&Ext.isIE&&!E.browserEvent.button){E.preventDefault();this.onMouseUp(E);return}E.preventDefault();var B=E.getXY(),A=this.startXY;this.lastXY=B;if(!this.active){if(Math.abs(A[0]-B[0])>this.tolerance||Math.abs(A[1]-B[1])>this.tolerance){this.triggerStart()}else{return}}this.fireEvent("mousemove",this,E);this.onDrag(E);this.fireEvent("drag",this,E)},onMouseUp:function(B){var A=Ext.getDoc();A.un("mousemove",this.onMouseMove,this);A.un("mouseup",this.onMouseUp,this);A.un("selectstart",this.stopSelect,this);B.preventDefault();this.clearStart();this.active=false;delete this.elRegion;this.fireEvent("mouseup",this,B);this.onEnd(B);this.fireEvent("dragend",this,B)},triggerStart:function(A){this.clearStart();this.active=true;this.onStart(this.startXY);this.fireEvent("dragstart",this,this.startXY)},clearStart:function(){if(this.timer){clearTimeout(this.timer);delete this.timer}},stopSelect:function(A){A.stopEvent();return false},onBeforeStart:function(A){},onStart:function(A){},onDrag:function(A){},onEnd:function(A){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getXY:function(A){return A?this.constrainModes[A].call(this,this.lastXY):this.lastXY},getOffset:function(D){var B=this.getXY(D);var A=this.startXY;return[A[0]-B[0],A[1]-B[1]]},constrainModes:{point:function(B){if(!this.elRegion){this.elRegion=this.getDragCt().getRegion()}var A=this.dragRegion;A.left=B[0];A.top=B[1];A.right=B[0];A.bottom=B[1];A.constrainTo(this.elRegion);return[A.left,A.top]}}});Ext.dd.ScrollManager=function(){var D=Ext.dd.DragDropMgr;var F={};var B=null;var I={};var H=function(L){B=null;A()};var J=function(){if(D.dragCurrent){D.refreshCache(D.dragCurrent.groups)}};var E=function(){if(D.dragCurrent){var L=Ext.dd.ScrollManager;var M=I.el.ddScrollConfig?I.el.ddScrollConfig.increment:L.increment;if(!L.animate){if(I.el.scroll(I.dir,M)){J()}}else{I.el.scroll(I.dir,M,true,L.animDuration,J)}}};var A=function(){if(I.id){clearInterval(I.id)}I.id=0;I.el=null;I.dir=""};var G=function(M,L){A();I.el=M;I.dir=L;var N=(M.ddScrollConfig&&M.ddScrollConfig.frequency)?M.ddScrollConfig.frequency:Ext.dd.ScrollManager.frequency;I.id=setInterval(E,N)};var K=function(O,Q){if(Q||!D.dragCurrent){return}var R=Ext.dd.ScrollManager;if(!B||B!=D.dragCurrent){B=D.dragCurrent;R.refreshCache()}var S=Ext.lib.Event.getXY(O);var T=new Ext.lib.Point(S[0],S[1]);for(var M in F){var N=F[M],L=N._region;var P=N.ddScrollConfig?N.ddScrollConfig:R;if(L&&L.contains(T)&&N.isScrollable()){if(L.bottom-T.y<=P.vthresh){if(I.el!=N){G(N,"down")}return}else{if(L.right-T.x<=P.hthresh){if(I.el!=N){G(N,"left")}return}else{if(T.y-L.top<=P.vthresh){if(I.el!=N){G(N,"up")}return}else{if(T.x-L.left<=P.hthresh){if(I.el!=N){G(N,"right")}return}}}}}}A()};D.fireEvents=D.fireEvents.createSequence(K,D);D.stopDrag=D.stopDrag.createSequence(H,D);return{register:function(N){if(Ext.isArray(N)){for(var M=0,L=N.length;M<L;M++){this.register(N[M])}}else{N=Ext.get(N);F[N.id]=N}},unregister:function(N){if(Ext.isArray(N)){for(var M=0,L=N.length;M<L;M++){this.unregister(N[M])}}else{N=Ext.get(N);delete F[N.id]}},vthresh:25,hthresh:25,increment:100,frequency:500,animate:true,animDuration:0.4,refreshCache:function(){for(var L in F){if(typeof F[L]=="object"){F[L]._region=F[L].getRegion()}}}}}();Ext.dd.Registry=function(){var E={};var B={};var A=0;var D=function(G,F){if(typeof G=="string"){return G}var H=G.id;if(!H&&F!==false){H="extdd-"+(++A);G.id=H}return H};return{register:function(I,J){J=J||{};if(typeof I=="string"){I=document.getElementById(I)}J.ddel=I;E[D(I)]=J;if(J.isHandle!==false){B[J.ddel.id]=J}if(J.handles){var H=J.handles;for(var G=0,F=H.length;G<F;G++){B[D(H[G])]=J}}},unregister:function(I){var K=D(I,false);var J=E[K];if(J){delete E[K];if(J.handles){var H=J.handles;for(var G=0,F=H.length;G<F;G++){delete B[D(H[G],false)]}}}},getHandle:function(F){if(typeof F!="string"){F=F.id}return B[F]},getHandleFromEvent:function(G){var F=Ext.lib.Event.getTarget(G);return F?B[F.id]:null},getTarget:function(F){if(typeof F!="string"){F=F.id}return E[F]},getTargetFromEvent:function(G){var F=Ext.lib.Event.getTarget(G);return F?E[F.id]||B[F.id]:null}}}();Ext.dd.StatusProxy=function(A){Ext.apply(this,A);this.id=this.id||Ext.id();this.el=new Ext.Layer({dh:{id:this.id,tag:"div",cls:"x-dd-drag-proxy "+this.dropNotAllowed,children:[{tag:"div",cls:"x-dd-drop-icon"},{tag:"div",cls:"x-dd-drag-ghost"}]},shadow:!A||A.shadow!==false});this.ghost=Ext.get(this.el.dom.childNodes[1]);this.dropStatus=this.dropNotAllowed};Ext.dd.StatusProxy.prototype={dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(A){A=A||this.dropNotAllowed;if(this.dropStatus!=A){this.el.replaceClass(this.dropStatus,A);this.dropStatus=A}},reset:function(A){this.el.dom.className="x-dd-drag-proxy "+this.dropNotAllowed;this.dropStatus=this.dropNotAllowed;if(A){this.ghost.update("")}},update:function(A){if(typeof A=="string"){this.ghost.update(A)}else{this.ghost.update("");A.style.margin="0";this.ghost.dom.appendChild(A)}var B=this.ghost.dom.firstChild;if(B){Ext.fly(B).setStyle(Ext.isIE?"styleFloat":"cssFloat","none")}},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(A){this.el.hide();if(A){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},show:function(){this.el.show()},sync:function(){this.el.sync()},repair:function(B,D,A){this.callback=D;this.scope=A;if(B&&this.animRepair!==false){this.el.addClass("x-dd-drag-repair");this.el.hideUnders(true);this.anim=this.el.shift({duration:this.repairDuration||0.5,easing:"easeOut",xy:B,stopFx:true,callback:this.afterRepair,scope:this})}else{this.afterRepair()}},afterRepair:function(){this.hide(true);if(typeof this.callback=="function"){this.callback.call(this.scope||this)}this.callback=null;this.scope=null}};Ext.dd.DragSource=function(B,A){this.el=Ext.get(B);if(!this.dragData){this.dragData={}}Ext.apply(this,A);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy()}Ext.dd.DragSource.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false};Ext.extend(Ext.dd.DragSource,Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",getDragData:function(A){return this.dragData},onDragEnter:function(D,E){var B=Ext.dd.DragDropMgr.getDDById(E);this.cachedTarget=B;if(this.beforeDragEnter(B,D,E)!==false){if(B.isNotifyTarget){var A=B.notifyEnter(this,D,this.dragData);this.proxy.setStatus(A)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(B,D,E)}}},beforeDragEnter:function(B,A,D){return true},alignElWithMouse:function(){Ext.dd.DragSource.superclass.alignElWithMouse.apply(this,arguments);this.proxy.sync()},onDragOver:function(D,E){var B=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(E);if(this.beforeDragOver(B,D,E)!==false){if(B.isNotifyTarget){var A=B.notifyOver(this,D,this.dragData);this.proxy.setStatus(A)}if(this.afterDragOver){this.afterDragOver(B,D,E)}}},beforeDragOver:function(B,A,D){return true},onDragOut:function(B,D){var A=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(D);if(this.beforeDragOut(A,B,D)!==false){if(A.isNotifyTarget){A.notifyOut(this,B,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(A,B,D)}}this.cachedTarget=null},beforeDragOut:function(B,A,D){return true},onDragDrop:function(B,D){var A=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(D);if(this.beforeDragDrop(A,B,D)!==false){if(A.isNotifyTarget){if(A.notifyDrop(this,B,this.dragData)){this.onValidDrop(A,B,D)}else{this.onInvalidDrop(A,B,D)}}else{this.onValidDrop(A,B,D)}if(this.afterDragDrop){this.afterDragDrop(A,B,D)}}delete this.cachedTarget},beforeDragDrop:function(B,A,D){return true},onValidDrop:function(B,A,D){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(B,A,D)}},getRepairXY:function(B,A){return this.el.getXY()},onInvalidDrop:function(B,A,D){this.beforeInvalidDrop(B,A,D);if(this.cachedTarget){if(this.cachedTarget.isNotifyTarget){this.cachedTarget.notifyOut(this,A,this.dragData)}this.cacheTarget=null}this.proxy.repair(this.getRepairXY(A,this.dragData),this.afterRepair,this);if(this.afterInvalidDrop){this.afterInvalidDrop(A,D)}},afterRepair:function(){if(Ext.enableFx){this.el.highlight(this.hlColor||"c3daf9")}this.dragging=false},beforeInvalidDrop:function(B,A,D){return true},handleMouseDown:function(B){if(this.dragging){return}var A=this.getDragData(B);if(A&&this.onBeforeDrag(A,B)!==false){this.dragData=A;this.proxy.stop();Ext.dd.DragSource.superclass.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(A,B){return true},onStartDrag:Ext.emptyFn,startDrag:function(A,B){this.proxy.reset();this.dragging=true;this.proxy.update("");this.onInitDrag(A,B);this.proxy.show()},onInitDrag:function(A,D){var B=this.el.dom.cloneNode(true);B.id=Ext.id();this.proxy.update(B);this.onStartDrag(A,D);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(A){},endDrag:function(A){this.onEndDrag(this.dragData,A)},onEndDrag:function(A,B){},autoOffset:function(A,B){this.setDelta(-12,-20)}});Ext.dd.DropTarget=function(B,A){this.el=Ext.get(B);Ext.apply(this,A);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}Ext.dd.DropTarget.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:true})};Ext.extend(Ext.dd.DropTarget,Ext.dd.DDTarget,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:true,isNotifyTarget:true,notifyEnter:function(A,D,B){if(this.overClass){this.el.addClass(this.overClass)}return this.dropAllowed},notifyOver:function(A,D,B){return this.dropAllowed},notifyOut:function(A,D,B){if(this.overClass){this.el.removeClass(this.overClass)}},notifyDrop:function(A,D,B){return false}});Ext.dd.DragZone=function(B,A){Ext.dd.DragZone.superclass.constructor.call(this,B,A);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}};Ext.extend(Ext.dd.DragZone,Ext.dd.DragSource,{getDragData:function(A){return Ext.dd.Registry.getHandleFromEvent(A)},onInitDrag:function(A,B){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(A,B);return true},afterRepair:function(){if(Ext.enableFx){Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9")}this.dragging=false},getRepairXY:function(A){return Ext.Element.fly(this.dragData.ddel).getXY()}});Ext.dd.DropZone=function(B,A){Ext.dd.DropZone.superclass.constructor.call(this,B,A)};Ext.extend(Ext.dd.DropZone,Ext.dd.DropTarget,{getTargetFromEvent:function(A){return Ext.dd.Registry.getTargetFromEvent(A)},onNodeEnter:function(E,A,D,B){},onNodeOver:function(E,A,D,B){return this.dropAllowed},onNodeOut:function(E,A,D,B){},onNodeDrop:function(E,A,D,B){return false},onContainerOver:function(A,D,B){return this.dropNotAllowed},onContainerDrop:function(A,D,B){return false},notifyEnter:function(A,D,B){return this.dropNotAllowed},notifyOver:function(A,D,B){var E=this.getTargetFromEvent(D);if(!E){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,A,D,B);this.lastOverNode=null}return this.onContainerOver(A,D,B)}if(this.lastOverNode!=E){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,A,D,B)}this.onNodeEnter(E,A,D,B);this.lastOverNode=E}return this.onNodeOver(E,A,D,B)},notifyOut:function(A,D,B){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,A,D,B);this.lastOverNode=null}},notifyDrop:function(A,D,B){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,A,D,B);this.lastOverNode=null}var E=this.getTargetFromEvent(D);return E?this.onNodeDrop(E,A,D,B):this.onContainerDrop(A,D,B)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}});Ext.data.SortTypes={none:function(A){return A},stripTagsRE:/<\/?[^>]+>/gi,asText:function(A){return String(A).replace(this.stripTagsRE,"")},asUCText:function(A){return String(A).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(A){return String(A).toUpperCase()},asDate:function(A){if(!A){return 0}if(Ext.isDate(A)){return A.getTime()}return Date.parse(String(A))},asFloat:function(A){var B=parseFloat(String(A).replace(/,/g,""));if(isNaN(B)){B=0}return B},asInt:function(A){var B=parseInt(String(A).replace(/,/g,""));if(isNaN(B)){B=0}return B}};Ext.data.Record=function(A,B){this.id=(B||B===0)?B:++Ext.data.Record.AUTO_ID;this.data=A||{}};Ext.data.Record.create=function(F){var D=Ext.extend(Ext.data.Record,{});var E=D.prototype;E.fields=new Ext.util.MixedCollection(false,function(G){return G.name});for(var B=0,A=F.length;B<A;B++){E.fields.add(new Ext.data.Field(F[B]))}D.getField=function(G){return E.fields.get(G)};return D};Ext.data.Record.AUTO_ID=1000;Ext.data.Record.EDIT="edit";Ext.data.Record.REJECT="reject";Ext.data.Record.COMMIT="commit";Ext.data.Record.prototype={dirty:false,editing:false,error:null,modified:null,join:function(A){this.store=A},set:function(A,B){if(String(this.data[A])==String(B)){return}this.dirty=true;if(!this.modified){this.modified={}}if(typeof this.modified[A]=="undefined"){this.modified[A]=this.data[A]}this.data[A]=B;if(!this.editing&&this.store){this.store.afterEdit(this)}},get:function(A){return this.data[A]},beginEdit:function(){this.editing=true;this.modified={}},cancelEdit:function(){this.editing=false;delete this.modified},endEdit:function(){this.editing=false;if(this.dirty&&this.store){this.store.afterEdit(this)}},reject:function(B){var A=this.modified;for(var D in A){if(typeof A[D]!="function"){this.data[D]=A[D]}}this.dirty=false;delete this.modified;this.editing=false;if(this.store&&B!==true){this.store.afterReject(this)}},commit:function(A){this.dirty=false;delete this.modified;this.editing=false;if(this.store&&A!==true){this.store.afterCommit(this)}},getChanges:function(){var A=this.modified,B={};for(var D in A){if(A.hasOwnProperty(D)){B[D]=this.data[D]}}return B},hasError:function(){return this.error!=null},clearError:function(){this.error=null},copy:function(A){return new this.constructor(Ext.apply({},this.data),A||this.id)},isModified:function(A){return !!(this.modified&&this.modified.hasOwnProperty(A))}};Ext.StoreMgr=Ext.apply(new Ext.util.MixedCollection(),{register:function(){for(var A=0,B;B=arguments[A];A++){this.add(B)}},unregister:function(){for(var A=0,B;B=arguments[A];A++){this.remove(this.lookup(B))}},lookup:function(A){return typeof A=="object"?A:this.get(A)},getKey:function(A){return A.storeId||A.id}});Ext.data.Store=function(A){this.data=new Ext.util.MixedCollection(false);this.data.getKey=function(B){return B.id};this.baseParams={};this.paramNames={start:"start",limit:"limit",sort:"sort",dir:"dir"};if(A&&A.data){this.inlineData=A.data;delete A.data}Ext.apply(this,A);if(this.url&&!this.proxy){this.proxy=new Ext.data.HttpProxy({url:this.url})}if(this.reader){if(!this.recordType){this.recordType=this.reader.recordType}if(this.reader.onMetaChange){this.reader.onMetaChange=this.onMetaChange.createDelegate(this)}}if(this.recordType){this.fields=this.recordType.prototype.fields}this.modified=[];this.addEvents("datachanged","metachange","add","remove","update","clear","beforeload","load","loadexception");if(this.proxy){this.relayEvents(this.proxy,["loadexception"])}this.sortToggle={};if(this.sortInfo){this.setDefaultSort(this.sortInfo.field,this.sortInfo.direction)}Ext.data.Store.superclass.constructor.call(this);if(this.storeId||this.id){Ext.StoreMgr.register(this)}if(this.inlineData){this.loadData(this.inlineData);delete this.inlineData}else{if(this.autoLoad){this.load.defer(10,this,[typeof this.autoLoad=="object"?this.autoLoad:undefined])}}};Ext.extend(Ext.data.Store,Ext.util.Observable,{remoteSort:false,pruneModifiedRecords:false,lastOptions:null,destroy:function(){if(this.storeId||this.id){Ext.StoreMgr.unregister(this)}this.data=null;Ext.destroy(this.proxy);this.reader=null;this.purgeListeners()},add:function(B){B=[].concat(B);if(B.length<1){return}for(var E=0,A=B.length;E<A;E++){B[E].join(this)}var D=this.data.length;this.data.addAll(B);if(this.snapshot){this.snapshot.addAll(B)}this.fireEvent("add",this,B,D)},addSorted:function(A){var B=this.findInsertIndex(A);this.insert(B,A)},remove:function(A){var B=this.data.indexOf(A);if(B>-1){this.data.removeAt(B);if(this.pruneModifiedRecords){this.modified.remove(A)}if(this.snapshot){this.snapshot.remove(A)}this.fireEvent("remove",this,A,B)}},removeAt:function(A){this.remove(this.getAt(A))},removeAll:function(){this.data.clear();if(this.snapshot){this.snapshot.clear()}if(this.pruneModifiedRecords){this.modified=[]}this.fireEvent("clear",this)},insert:function(D,B){B=[].concat(B);for(var E=0,A=B.length;E<A;E++){this.data.insert(D,B[E]);B[E].join(this)}this.fireEvent("add",this,B,D)},indexOf:function(A){return this.data.indexOf(A)},indexOfId:function(A){return this.data.indexOfKey(A)},getById:function(A){return this.data.key(A)},getAt:function(A){return this.data.itemAt(A)},getRange:function(B,A){return this.data.getRange(B,A)},storeOptions:function(A){A=Ext.apply({},A);delete A.callback;delete A.scope;this.lastOptions=A},load:function(B){B=B||{};if(this.fireEvent("beforeload",this,B)!==false){this.storeOptions(B);var D=Ext.apply(B.params||{},this.baseParams);if(this.sortInfo&&this.remoteSort){var A=this.paramNames;D[A.sort]=this.sortInfo.field;D[A.dir]=this.sortInfo.direction}this.proxy.load(D,this.reader,this.loadRecords,this,B);return true}else{return false}},reload:function(A){this.load(Ext.applyIf(A||{},this.lastOptions))},loadRecords:function(H,B,G){if(!H||G===false){if(G!==false){this.fireEvent("load",this,[],B)}if(B.callback){B.callback.call(B.scope||this,[],B,false)}return}var F=H.records,E=H.totalRecords||F.length;if(!B||B.add!==true){if(this.pruneModifiedRecords){this.modified=[]}for(var D=0,A=F.length;D<A;D++){F[D].join(this)}if(this.snapshot){this.data=this.snapshot;delete this.snapshot}this.data.clear();this.data.addAll(F);this.totalLength=E;this.applySort();this.fireEvent("datachanged",this)}else{this.totalLength=Math.max(E,this.data.length+F.length);this.add(F)}this.fireEvent("load",this,F,B);if(B.callback){B.callback.call(B.scope||this,F,B,true)}},loadData:function(D,A){var B=this.reader.readRecords(D);this.loadRecords(B,{add:A},true)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalLength||0},getSortState:function(){return this.sortInfo},applySort:function(){if(this.sortInfo&&!this.remoteSort){var A=this.sortInfo,B=A.field;this.sortData(B,A.direction)}},sortData:function(D,E){E=E||"ASC";var A=this.fields.get(D).sortType;var B=function(G,F){var I=A(G.data[D]),H=A(F.data[D]);return I>H?1:(I<H?-1:0)};this.data.sort(E,B);if(this.snapshot&&this.snapshot!=this.data){this.snapshot.sort(E,B)}},setDefaultSort:function(B,A){A=A?A.toUpperCase():"ASC";this.sortInfo={field:B,direction:A};this.sortToggle[B]=A},sort:function(F,D){var E=this.fields.get(F);if(!E){return false}if(!D){if(this.sortInfo&&this.sortInfo.field==E.name){D=(this.sortToggle[E.name]||"ASC").toggle("ASC","DESC")}else{D=E.sortDir}}var B=(this.sortToggle)?this.sortToggle[E.name]:null;var A=(this.sortInfo)?this.sortInfo:null;this.sortToggle[E.name]=D;this.sortInfo={field:E.name,direction:D};if(!this.remoteSort){this.applySort();this.fireEvent("datachanged",this)}else{if(!this.load(this.lastOptions)){if(B){this.sortToggle[E.name]=B}if(A){this.sortInfo=A}}}},each:function(B,A){this.data.each(B,A)},getModifiedRecords:function(){return this.modified},createFilterFn:function(D,B,E,A){if(Ext.isEmpty(B,false)){return false}B=this.data.createValueMatcher(B,E,A);return function(F){return B.test(F.data[D])}},sum:function(F,G,A){var D=this.data.items,B=0;G=G||0;A=(A||A===0)?A:D.length-1;for(var E=G;E<=A;E++){B+=(D[E].data[F]||0)}return B},filter:function(E,D,F,A){var B=this.createFilterFn(E,D,F,A);return B?this.filterBy(B):this.clearFilter()},filterBy:function(B,A){this.snapshot=this.snapshot||this.data;this.data=this.queryBy(B,A||this);this.fireEvent("datachanged",this)},query:function(E,D,F,A){var B=this.createFilterFn(E,D,F,A);return B?this.queryBy(B):this.data.clone()},queryBy:function(B,A){var D=this.snapshot||this.data;return D.filterBy(B,A||this)},find:function(E,D,G,F,A){var B=this.createFilterFn(E,D,F,A);return B?this.data.findIndexBy(B,null,G):-1},findBy:function(B,A,D){return this.data.findIndexBy(B,A,D)},collect:function(H,I,B){var G=(B===true&&this.snapshot)?this.snapshot.items:this.data.items;var J,K,A=[],D={};for(var E=0,F=G.length;E<F;E++){J=G[E].data[H];K=String(J);if((I||!Ext.isEmpty(J))&&!D[K]){D[K]=true;A[A.length]=J}}return A},clearFilter:function(A){if(this.isFiltered()){this.data=this.snapshot;delete this.snapshot;if(A!==true){this.fireEvent("datachanged",this)}}},isFiltered:function(){return this.snapshot&&this.snapshot!=this.data},afterEdit:function(A){if(this.modified.indexOf(A)==-1){this.modified.push(A)}this.fireEvent("update",this,A,Ext.data.Record.EDIT)},afterReject:function(A){this.modified.remove(A);this.fireEvent("update",this,A,Ext.data.Record.REJECT)},afterCommit:function(A){this.modified.remove(A);this.fireEvent("update",this,A,Ext.data.Record.COMMIT)},commitChanges:function(){var B=this.modified.slice(0);this.modified=[];for(var D=0,A=B.length;D<A;D++){B[D].commit()}},rejectChanges:function(){var B=this.modified.slice(0);this.modified=[];for(var D=0,A=B.length;D<A;D++){B[D].reject()}},onMetaChange:function(B,A,D){this.recordType=A;this.fields=A.prototype.fields;delete this.snapshot;if(B.sortInfo){this.sortInfo=B.sortInfo}else{if(this.sortInfo&&!this.fields.get(this.sortInfo.field)){delete this.sortInfo}}this.modified=[];this.fireEvent("metachange",this,this.reader.meta)},findInsertIndex:function(A){this.suspendEvents();var D=this.data.clone();this.data.add(A);this.applySort();var B=this.data.indexOf(A);this.data=D;this.resumeEvents();return B}});Ext.data.SimpleStore=function(A){Ext.data.SimpleStore.superclass.constructor.call(this,Ext.apply(A,{reader:new Ext.data.ArrayReader({id:A.id},Ext.data.Record.create(A.fields))}))};Ext.extend(Ext.data.SimpleStore,Ext.data.Store,{loadData:function(F,B){if(this.expandData===true){var E=[];for(var D=0,A=F.length;D<A;D++){E[E.length]=[F[D]]}F=E}Ext.data.SimpleStore.superclass.loadData.call(this,F,B)}});Ext.data.JsonStore=function(A){Ext.data.JsonStore.superclass.constructor.call(this,Ext.apply(A,{proxy:A.proxy||(!A.data?new Ext.data.HttpProxy({url:A.url}):undefined),reader:new Ext.data.JsonReader(A,A.fields)}))};Ext.extend(Ext.data.JsonStore,Ext.data.Store);Ext.data.Field=function(E){if(typeof E=="string"){E={name:E}}Ext.apply(this,E);if(!this.type){this.type="auto"}var D=Ext.data.SortTypes;if(typeof this.sortType=="string"){this.sortType=D[this.sortType]}if(!this.sortType){switch(this.type){case"string":this.sortType=D.asUCString;break;case"date":this.sortType=D.asDate;break;default:this.sortType=D.none}}var F=/[\$,%]/g;if(!this.convert){var B,A=this.dateFormat;switch(this.type){case"":case"auto":case undefined:B=function(G){return G};break;case"string":B=function(G){return(G===undefined||G===null)?"":String(G)};break;case"int":B=function(G){return G!==undefined&&G!==null&&G!==""?parseInt(String(G).replace(F,""),10):""};break;case"float":B=function(G){return G!==undefined&&G!==null&&G!==""?parseFloat(String(G).replace(F,""),10):""};break;case"bool":case"boolean":B=function(G){return G===true||G==="true"||G==1};break;case"date":B=function(H){if(!H){return""}if(Ext.isDate(H)){return H}if(A){if(A=="timestamp"){return new Date(H*1000)}if(A=="time"){return new Date(parseInt(H,10))}return Date.parseDate(H,A)}var G=Date.parse(H);return G?new Date(G):null};break}this.convert=B}};Ext.data.Field.prototype={dateFormat:null,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC"};Ext.data.DataReader=function(A,B){this.meta=A;this.recordType=Ext.isArray(B)?Ext.data.Record.create(B):B};Ext.data.DataReader.prototype={};Ext.data.DataProxy=function(){this.addEvents("beforeload","load");Ext.data.DataProxy.superclass.constructor.call(this)};Ext.extend(Ext.data.DataProxy,Ext.util.Observable,{destroy:function(){this.purgeListeners()}});Ext.data.MemoryProxy=function(A){Ext.data.MemoryProxy.superclass.constructor.call(this);this.data=A};Ext.extend(Ext.data.MemoryProxy,Ext.data.DataProxy,{load:function(G,D,H,E,B){G=G||{};var A;try{A=D.readRecords(this.data)}catch(F){this.fireEvent("loadexception",this,B,null,F);H.call(E,null,B,false);return}H.call(E,A,B,true)},update:function(B,A){}});Ext.data.HttpProxy=function(A){Ext.data.HttpProxy.superclass.constructor.call(this);this.conn=A;this.useAjax=!A||!A.events};Ext.extend(Ext.data.HttpProxy,Ext.data.DataProxy,{getConnection:function(){return this.useAjax?Ext.Ajax:this.conn},load:function(F,B,G,D,A){if(this.fireEvent("beforeload",this,F)!==false){var E={params:F||{},request:{callback:G,scope:D,arg:A},reader:B,callback:this.loadResponse,scope:this};if(this.useAjax){Ext.applyIf(E,this.conn);if(this.activeRequest){Ext.Ajax.abort(this.activeRequest)}this.activeRequest=Ext.Ajax.request(E)}else{this.conn.request(E)}}else{G.call(D||this,null,A,false)}},loadResponse:function(F,E,B){delete this.activeRequest;if(!E){this.fireEvent("loadexception",this,F,B);F.request.callback.call(F.request.scope,null,F.request.arg,false);return}var A;try{A=F.reader.read(B)}catch(D){this.fireEvent("loadexception",this,F,B,D);F.request.callback.call(F.request.scope,null,F.request.arg,false);return}this.fireEvent("load",this,F,F.request.arg);F.request.callback.call(F.request.scope,A,F.request.arg,true)},update:function(A){},updateResponse:function(A){},destroy:function(){if(!this.useAjax){this.conn.abort()}else{if(this.activeRequest){Ext.Ajax.abort(this.activeRequest)}}Ext.data.HttpProxy.superclass.destroy.call(this)}});Ext.data.ScriptTagProxy=function(A){Ext.data.ScriptTagProxy.superclass.constructor.call(this);Ext.apply(this,A);this.head=document.getElementsByTagName("head")[0]};Ext.data.ScriptTagProxy.TRANS_ID=1000;Ext.extend(Ext.data.ScriptTagProxy,Ext.data.DataProxy,{timeout:30000,callbackParam:"callback",nocache:true,load:function(F,G,I,J,K){if(this.fireEvent("beforeload",this,F)!==false){var D=Ext.urlEncode(Ext.apply(F,this.extraParams));var B=this.url;B+=(B.indexOf("?")!=-1?"&":"?")+D;if(this.nocache){B+="&_dc="+(new Date().getTime())}var A=++Ext.data.ScriptTagProxy.TRANS_ID;var L={id:A,cb:"stcCallback"+A,scriptId:"stcScript"+A,params:F,arg:K,url:B,callback:I,scope:J,reader:G};var E=this;window[L.cb]=function(M){E.handleResponse(M,L)};B+=String.format("&{0}={1}",this.callbackParam,L.cb);if(this.autoAbort!==false){this.abort()}L.timeoutId=this.handleFailure.defer(this.timeout,this,[L]);var H=document.createElement("script");H.setAttribute("src",B);H.setAttribute("type","text/javascript");H.setAttribute("id",L.scriptId);this.head.appendChild(H);this.trans=L}else{I.call(J||this,null,K,false)}},isLoading:function(){return this.trans?true:false},abort:function(){if(this.isLoading()){this.destroyTrans(this.trans)}},destroyTrans:function(B,A){this.head.removeChild(document.getElementById(B.scriptId));clearTimeout(B.timeoutId);if(A){window[B.cb]=undefined;try{delete window[B.cb]}catch(D){}}else{window[B.cb]=function(){window[B.cb]=undefined;try{delete window[B.cb]}catch(E){}}}},handleResponse:function(E,B){this.trans=false;this.destroyTrans(B,true);var A;try{A=B.reader.readRecords(E)}catch(D){this.fireEvent("loadexception",this,E,B.arg,D);B.callback.call(B.scope||window,null,B.arg,false);return}this.fireEvent("load",this,E,B.arg);B.callback.call(B.scope||window,A,B.arg,true)},handleFailure:function(A){this.trans=false;this.destroyTrans(A,false);this.fireEvent("loadexception",this,null,A.arg);A.callback.call(A.scope||window,null,A.arg,false)},destroy:function(){this.abort();Ext.data.ScriptTagProxy.superclass.destroy.call(this)}});Ext.data.JsonReader=function(A,B){A=A||{};Ext.data.JsonReader.superclass.constructor.call(this,A,B||A.fields)};Ext.extend(Ext.data.JsonReader,Ext.data.DataReader,{read:function(response){var json=response.responseText;var o=eval("("+json+")");if(!o){throw {message:"JsonReader.read: Json object not found"}}return this.readRecords(o)},onMetaChange:function(A,D,B){},simpleAccess:function(B,A){return B[A]},getJsonAccessor:function(){var A=/[\[\.]/;return function(D){try{return(A.test(D))?new Function("obj","return obj."+D):function(E){return E[D]}}catch(B){}return Ext.emptyFn}}(),readRecords:function(L){this.jsonData=L;if(L.metaData){delete this.ef;this.meta=L.metaData;this.recordType=Ext.data.Record.create(L.metaData.fields);this.onMetaChange(this.meta,this.recordType,L)}var I=this.meta,A=this.recordType,S=A.prototype.fields,G=S.items,F=S.length;if(!this.ef){if(I.totalProperty){this.getTotal=this.getJsonAccessor(I.totalProperty)}if(I.successProperty){this.getSuccess=this.getJsonAccessor(I.successProperty)}this.getRoot=I.root?this.getJsonAccessor(I.root):function(V){return V};if(I.id){var R=this.getJsonAccessor(I.id);this.getId=function(W){var V=R(W);return(V===undefined||V==="")?null:V}}else{this.getId=function(){return null}}this.ef=[];for(var P=0;P<F;P++){S=G[P];var U=(S.mapping!==undefined&&S.mapping!==null)?S.mapping:S.name;this.ef[P]=this.getJsonAccessor(U)}}var N=this.getRoot(L),T=N.length,J=T,E=true;if(I.totalProperty){var H=parseInt(this.getTotal(L),10);if(!isNaN(H)){J=H}}if(I.successProperty){var H=this.getSuccess(L);if(H===false||H==="false"){E=false}}var Q=[];for(var P=0;P<T;P++){var M=N[P];var B={};var K=this.getId(M);for(var O=0;O<F;O++){S=G[O];var H=this.ef[O](M);B[S.name]=S.convert((H!==undefined)?H:S.defaultValue,M)}var D=new A(B,K);D.json=M;Q[P]=D}return{success:E,records:Q,totalRecords:J}}});Ext.data.XmlReader=function(A,B){A=A||{};Ext.data.XmlReader.superclass.constructor.call(this,A,B||A.fields)};Ext.extend(Ext.data.XmlReader,Ext.data.DataReader,{read:function(A){var B=A.responseXML;if(!B){throw {message:"XmlReader.read: XML Document not available"}}return this.readRecords(B)},readRecords:function(U){this.xmlData=U;var O=U.documentElement||U;var J=Ext.DomQuery;var B=this.recordType,M=B.prototype.fields;var E=this.meta.id;var H=0,F=true;if(this.meta.totalRecords){H=J.selectNumber(this.meta.totalRecords,O,0)}if(this.meta.success){var L=J.selectValue(this.meta.success,O,true);F=L!==false&&L!=="false"}var R=[];var V=J.select(this.meta.record,O);for(var Q=0,S=V.length;Q<S;Q++){var N=V[Q];var A={};var K=E?J.selectValue(E,N):undefined;for(var P=0,I=M.length;P<I;P++){var T=M.items[P];var G=J.selectValue(Ext.isEmpty(T.mapping,true)?T.name:T.mapping,N,T.defaultValue);G=T.convert(G,N);A[T.name]=G}var D=new B(A,K);D.node=N;R[R.length]=D}return{success:F,records:R,totalRecords:H||R.length}}});Ext.data.ArrayReader=Ext.extend(Ext.data.JsonReader,{readRecords:function(D){var B=this.meta?this.meta.id:null;var H=this.recordType,L=H.prototype.fields;var F=[];var N=D;for(var J=0;J<N.length;J++){var E=N[J];var P={};var A=((B||B===0)&&E[B]!==undefined&&E[B]!==""?E[B]:null);for(var I=0,Q=L.length;I<Q;I++){var M=L.items[I];var G=M.mapping!==undefined&&M.mapping!==null?M.mapping:I;var O=E[G]!==undefined?E[G]:M.defaultValue;O=M.convert(O,E);P[M.name]=O}var K=new H(P,A);K.json=E;F[F.length]=K}return{records:F,totalRecords:F.length}}});Ext.data.Tree=function(A){this.nodeHash={};this.root=null;if(A){this.setRootNode(A)}this.addEvents("append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert");Ext.data.Tree.superclass.constructor.call(this)};Ext.extend(Ext.data.Tree,Ext.util.Observable,{pathSeparator:"/",proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},setRootNode:function(A){this.root=A;A.ownerTree=this;A.isRoot=true;this.registerNode(A);return A},getNodeById:function(A){return this.nodeHash[A]},registerNode:function(A){this.nodeHash[A.id]=A},unregisterNode:function(A){delete this.nodeHash[A.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"}});Ext.data.Node=function(A){this.attributes=A||{};this.leaf=this.attributes.leaf;this.id=this.attributes.id;if(!this.id){this.id=Ext.id(null,"ynode-");this.attributes.id=this.id}this.childNodes=[];if(!this.childNodes.indexOf){this.childNodes.indexOf=function(E){for(var D=0,B=this.length;D<B;D++){if(this[D]==E){return D}}return -1}}this.parentNode=null;this.firstChild=null;this.lastChild=null;this.previousSibling=null;this.nextSibling=null;this.addEvents({append:true,remove:true,move:true,insert:true,beforeappend:true,beforeremove:true,beforemove:true,beforeinsert:true});this.listeners=this.attributes.listeners;Ext.data.Node.superclass.constructor.call(this)};Ext.extend(Ext.data.Node,Ext.util.Observable,{fireEvent:function(B){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===false){return false}var A=this.getOwnerTree();if(A){if(A.proxyNodeEvent.apply(A,arguments)===false){return false}}return true},isLeaf:function(){return this.leaf===true},setFirstChild:function(A){this.firstChild=A},setLastChild:function(A){this.lastChild=A},isLast:function(){return(!this.parentNode?true:this.parentNode.lastChild==this)},isFirst:function(){return(!this.parentNode?true:this.parentNode.firstChild==this)},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){return this.attributes.expandable||this.hasChildNodes()},appendChild:function(F){var G=false;if(Ext.isArray(F)){G=F}else{if(arguments.length>1){G=arguments}}if(G){for(var E=0,A=G.length;E<A;E++){this.appendChild(G[E])}}else{if(this.fireEvent("beforeappend",this.ownerTree,this,F)===false){return false}var B=this.childNodes.length;var D=F.parentNode;if(D){if(F.fireEvent("beforemove",F.getOwnerTree(),F,D,this,B)===false){return false}D.removeChild(F)}B=this.childNodes.length;if(B==0){this.setFirstChild(F)}this.childNodes.push(F);F.parentNode=this;var H=this.childNodes[B-1];if(H){F.previousSibling=H;H.nextSibling=F}else{F.previousSibling=null}F.nextSibling=null;this.setLastChild(F);F.setOwnerTree(this.getOwnerTree());this.fireEvent("append",this.ownerTree,this,F,B);if(D){F.fireEvent("move",this.ownerTree,F,D,this,B)}return F}},removeChild:function(B){var A=this.childNodes.indexOf(B);if(A==-1){return false}if(this.fireEvent("beforeremove",this.ownerTree,this,B)===false){return false}this.childNodes.splice(A,1);if(B.previousSibling){B.previousSibling.nextSibling=B.nextSibling}if(B.nextSibling){B.nextSibling.previousSibling=B.previousSibling}if(this.firstChild==B){this.setFirstChild(B.nextSibling)}if(this.lastChild==B){this.setLastChild(B.previousSibling)}B.setOwnerTree(null);B.parentNode=null;B.previousSibling=null;B.nextSibling=null;this.fireEvent("remove",this.ownerTree,this,B);return B},insertBefore:function(E,A){if(!A){return this.appendChild(E)}if(E==A){return false}if(this.fireEvent("beforeinsert",this.ownerTree,this,E,A)===false){return false}var B=this.childNodes.indexOf(A);var D=E.parentNode;var F=B;if(D==this&&this.childNodes.indexOf(E)<B){F--}if(D){if(E.fireEvent("beforemove",E.getOwnerTree(),E,D,this,B,A)===false){return false}D.removeChild(E)}if(F==0){this.setFirstChild(E)}this.childNodes.splice(F,0,E);E.parentNode=this;var G=this.childNodes[F-1];if(G){E.previousSibling=G;G.nextSibling=E}else{E.previousSibling=null}E.nextSibling=A;A.previousSibling=E;E.setOwnerTree(this.getOwnerTree());this.fireEvent("insert",this.ownerTree,this,E,A);if(D){E.fireEvent("move",this.ownerTree,E,D,this,F,A)}return E},remove:function(){this.parentNode.removeChild(this);return this},item:function(A){return this.childNodes[A]},replaceChild:function(A,D){var B=D?D.nextSibling:null;this.removeChild(D);this.insertBefore(A,B);return D},indexOf:function(A){return this.childNodes.indexOf(A)},getOwnerTree:function(){if(!this.ownerTree){var A=this;while(A){if(A.ownerTree){this.ownerTree=A.ownerTree;break}A=A.parentNode}}return this.ownerTree},getDepth:function(){var B=0;var A=this;while(A.parentNode){++B;A=A.parentNode}return B},setOwnerTree:function(B){if(B!=this.ownerTree){if(this.ownerTree){this.ownerTree.unregisterNode(this)}this.ownerTree=B;var E=this.childNodes;for(var D=0,A=E.length;D<A;D++){E[D].setOwnerTree(B)}if(B){B.registerNode(this)}}},getPath:function(B){B=B||"id";var E=this.parentNode;var A=[this.attributes[B]];while(E){A.unshift(E.attributes[B]);E=E.parentNode}var D=this.getOwnerTree().pathSeparator;return D+A.join(D)},bubble:function(D,B,A){var E=this;while(E){if(D.apply(B||E,A||[E])===false){break}E=E.parentNode}},cascade:function(G,F,B){if(G.apply(F||this,B||[this])!==false){var E=this.childNodes;for(var D=0,A=E.length;D<A;D++){E[D].cascade(G,F,B)}}},eachChild:function(G,F,B){var E=this.childNodes;for(var D=0,A=E.length;D<A;D++){if(G.apply(F||this,B||[E[D]])===false){break}}},findChild:function(E,F){var D=this.childNodes;for(var B=0,A=D.length;B<A;B++){if(D[B].attributes[E]==F){return D[B]}}return null},findChildBy:function(F,E){var D=this.childNodes;for(var B=0,A=D.length;B<A;B++){if(F.call(E||D[B],D[B])===true){return D[B]}}return null},sort:function(F,E){var D=this.childNodes;var A=D.length;if(A>0){var G=E?function(){F.apply(E,arguments)}:F;D.sort(G);for(var B=0;B<A;B++){var H=D[B];H.previousSibling=D[B-1];H.nextSibling=D[B+1];if(B==0){this.setFirstChild(H)}if(B==A-1){this.setLastChild(H)}}}},contains:function(A){return A.isAncestor(this)},isAncestor:function(A){var B=this.parentNode;while(B){if(B==A){return true}B=B.parentNode}return false},toString:function(){return"[Node"+(this.id?" "+this.id:"")+"]"}});Ext.data.GroupingStore=Ext.extend(Ext.data.Store,{constructor:function(A){Ext.data.GroupingStore.superclass.constructor.call(this,A);this.applyGroupField()},remoteGroup:false,groupOnSort:false,clearGrouping:function(){this.groupField=false;if(this.remoteGroup){if(this.baseParams){delete this.baseParams.groupBy}var A=this.lastOptions;if(A&&A.params){delete A.params.groupBy}this.reload()}else{this.applySort();this.fireEvent("datachanged",this)}},groupBy:function(D,B){if(this.groupField==D&&!B){return}this.groupField=D;this.applyGroupField();if(this.groupOnSort){this.sort(D);return}if(this.remoteGroup){this.reload()}else{var A=this.sortInfo||{};if(A.field!=D){this.applySort()}else{this.sortData(D)}this.fireEvent("datachanged",this)}},applyGroupField:function(){if(this.remoteGroup){if(!this.baseParams){this.baseParams={}}this.baseParams.groupBy=this.groupField}},applySort:function(){Ext.data.GroupingStore.superclass.applySort.call(this);if(!this.groupOnSort&&!this.remoteGroup){var A=this.getGroupState();if(A&&A!=this.sortInfo.field){this.sortData(this.groupField)}}},applyGrouping:function(A){if(this.groupField!==false){this.groupBy(this.groupField,true);return true}else{if(A===true){this.fireEvent("datachanged",this)}return false}},getGroupState:function(){return this.groupOnSort&&this.groupField!==false?(this.sortInfo?this.sortInfo.field:undefined):this.groupField}});Ext.ComponentMgr=function(){var B=new Ext.util.MixedCollection();var A={};return{register:function(D){B.add(D)},unregister:function(D){B.remove(D)},get:function(D){return B.get(D)},onAvailable:function(F,E,D){B.on("add",function(G,H){if(H.id==F){E.call(D||H,H);B.un("add",E,D)}})},all:B,registerType:function(E,D){A[E]=D;D.xtype=E},create:function(D,E){return new A[D.xtype||E](D)}}}();Ext.reg=Ext.ComponentMgr.registerType;Ext.Component=function(B){B=B||{};if(B.initialConfig){if(B.isAction){this.baseAction=B}B=B.initialConfig}else{if(B.tagName||B.dom||typeof B=="string"){B={applyTo:B,id:B.id||B}}}this.initialConfig=B;Ext.apply(this,B);this.addEvents("disable","enable","beforeshow","show","beforehide","hide","beforerender","render","beforedestroy","destroy","beforestaterestore","staterestore","beforestatesave","statesave");this.getId();Ext.ComponentMgr.register(this);Ext.Component.superclass.constructor.call(this);if(this.baseAction){this.baseAction.addComponent(this)}this.initComponent();if(this.plugins){if(Ext.isArray(this.plugins)){for(var D=0,A=this.plugins.length;D<A;D++){this.plugins[D]=this.initPlugin(this.plugins[D])}}else{this.plugins=this.initPlugin(this.plugins)}}if(this.stateful!==false){this.initState(B)}if(this.applyTo){this.applyToMarkup(this.applyTo);delete this.applyTo}else{if(this.renderTo){this.render(this.renderTo);delete this.renderTo}}};Ext.Component.AUTO_ID=1000;Ext.extend(Ext.Component,Ext.util.Observable,{disabledClass:"x-item-disabled",allowDomMove:true,autoShow:false,hideMode:"display",hideParent:false,hidden:false,disabled:false,rendered:false,ctype:"Ext.Component",actionMode:"el",getActionEl:function(){return this[this.actionMode]},initPlugin:function(A){A.init(this);return A},initComponent:Ext.emptyFn,render:function(B,A){if(!this.rendered&&this.fireEvent("beforerender",this)!==false){if(!B&&this.el){this.el=Ext.get(this.el);B=this.el.dom.parentNode;this.allowDomMove=false}this.container=Ext.get(B);if(this.ctCls){this.container.addClass(this.ctCls)}this.rendered=true;if(A!==undefined){if(typeof A=="number"){A=this.container.dom.childNodes[A]}else{A=Ext.getDom(A)}}this.onRender(this.container,A||null);if(this.autoShow){this.el.removeClass(["x-hidden","x-hide-"+this.hideMode])}if(this.cls){this.el.addClass(this.cls);delete this.cls}if(this.style){this.el.applyStyles(this.style);delete this.style}if(this.overCls){this.el.addClassOnOver(this.overCls)}this.fireEvent("render",this);this.afterRender(this.container);if(this.hidden){this.hide()}if(this.disabled){this.disable()}if(this.stateful!==false){this.initStateEvents()}}return this},initState:function(A){if(Ext.state.Manager){var D=this.getStateId();if(D){var B=Ext.state.Manager.get(D);if(B){if(this.fireEvent("beforestaterestore",this,B)!==false){this.applyState(B);this.fireEvent("staterestore",this,B)}}}}},getStateId:function(){return this.stateId||((this.id.indexOf("ext-comp-")==0||this.id.indexOf("ext-gen")==0)?null:this.id)},initStateEvents:function(){if(this.stateEvents){for(var A=0,B;B=this.stateEvents[A];A++){this.on(B,this.saveState,this,{delay:100})}}},applyState:function(B,A){if(B){Ext.apply(this,B)}},getState:function(){return null},saveState:function(){if(Ext.state.Manager&&this.stateful!==false){var B=this.getStateId();if(B){var A=this.getState();if(this.fireEvent("beforestatesave",this,A)!==false){Ext.state.Manager.set(B,A);this.fireEvent("statesave",this,A)}}}},applyToMarkup:function(A){this.allowDomMove=false;this.el=Ext.get(A);this.render(this.el.dom.parentNode)},addClass:function(A){if(this.el){this.el.addClass(A)}else{this.cls=this.cls?this.cls+" "+A:A}},removeClass:function(A){if(this.el){this.el.removeClass(A)}else{if(this.cls){this.cls=this.cls.split(" ").remove(A).join(" ")}}},onRender:function(B,A){if(this.autoEl){if(typeof this.autoEl=="string"){this.el=document.createElement(this.autoEl)}else{var D=document.createElement("div");Ext.DomHelper.overwrite(D,this.autoEl);this.el=D.firstChild}if(!this.el.id){this.el.id=this.getId()}}if(this.el){this.el=Ext.get(this.el);if(this.allowDomMove!==false){B.dom.insertBefore(this.el.dom,A)}}},getAutoCreate:function(){var A=typeof this.autoCreate=="object"?this.autoCreate:Ext.apply({},this.defaultAutoCreate);if(this.id&&!A.id){A.id=this.id}return A},afterRender:Ext.emptyFn,destroy:function(){if(this.fireEvent("beforedestroy",this)!==false){this.beforeDestroy();if(this.rendered){this.el.removeAllListeners();this.el.remove();if(this.actionMode=="container"){this.container.remove()}}this.onDestroy();Ext.ComponentMgr.unregister(this);this.fireEvent("destroy",this);this.purgeListeners()}},beforeDestroy:Ext.emptyFn,onDestroy:Ext.emptyFn,getEl:function(){return this.el},getId:function(){return this.id||(this.id="ext-comp-"+(++Ext.Component.AUTO_ID))},getItemId:function(){return this.itemId||this.getId()},focus:function(B,A){if(A){this.focus.defer(typeof A=="number"?A:10,this,[B,false]);return}if(this.rendered){this.el.focus();if(B===true){this.el.dom.select()}}return this},blur:function(){if(this.rendered){this.el.blur()}return this},disable:function(){if(this.rendered){this.onDisable()}this.disabled=true;this.fireEvent("disable",this);return this},onDisable:function(){this.getActionEl().addClass(this.disabledClass);this.el.dom.disabled=true},enable:function(){if(this.rendered){this.onEnable()}this.disabled=false;this.fireEvent("enable",this);return this},onEnable:function(){this.getActionEl().removeClass(this.disabledClass);this.el.dom.disabled=false},setDisabled:function(A){this[A?"disable":"enable"]()},show:function(){if(this.fireEvent("beforeshow",this)!==false){this.hidden=false;if(this.autoRender){this.render(typeof this.autoRender=="boolean"?Ext.getBody():this.autoRender)}if(this.rendered){this.onShow()}this.fireEvent("show",this)}return this},onShow:function(){if(this.hideParent){this.container.removeClass("x-hide-"+this.hideMode)}else{this.getActionEl().removeClass("x-hide-"+this.hideMode)}},hide:function(){if(this.fireEvent("beforehide",this)!==false){this.hidden=true;if(this.rendered){this.onHide()}this.fireEvent("hide",this)}return this},onHide:function(){if(this.hideParent){this.container.addClass("x-hide-"+this.hideMode)}else{this.getActionEl().addClass("x-hide-"+this.hideMode)}},setVisible:function(A){if(A){this.show()}else{this.hide()}return this},isVisible:function(){return this.rendered&&this.getActionEl().isVisible()},cloneConfig:function(B){B=B||{};var D=B.id||Ext.id();var A=Ext.applyIf(B,this.initialConfig);A.id=D;return new this.constructor(A)},getXType:function(){return this.constructor.xtype},isXType:function(B,A){if(typeof B=="function"){B=B.xtype}else{if(typeof B=="object"){B=B.constructor.xtype}}return !A?("/"+this.getXTypes()+"/").indexOf("/"+B+"/")!=-1:this.constructor.xtype==B},getXTypes:function(){var A=this.constructor;if(!A.xtypes){var D=[],B=this;while(B&&B.constructor.xtype){D.unshift(B.constructor.xtype);B=B.constructor.superclass}A.xtypeChain=D;A.xtypes=D.join("/")}return A.xtypes},findParentBy:function(A){for(var B=this.ownerCt;(B!=null)&&!A(B,this);B=B.ownerCt){}return B||null},findParentByType:function(A){return typeof A=="function"?this.findParentBy(function(B){return B.constructor===A}):this.findParentBy(function(B){return B.constructor.xtype===A})},mon:function(F,B,E,D,A){if(!this.mons){this.mons=[];this.on("beforedestroy",function(){for(var I=0,H=this.mons.length;I<H;I++){var G=this.mons[I];G.item.un(G.ename,G.fn,G.scope)}},this)}this.mons.push({item:F,ename:B,fn:E,scope:D});F.on(B,E,D,A)}});Ext.reg("component",Ext.Component);Ext.Action=function(A){this.initialConfig=A;this.items=[]};Ext.Action.prototype={isAction:true,setText:function(A){this.initialConfig.text=A;this.callEach("setText",[A])},getText:function(){return this.initialConfig.text},setIconClass:function(A){this.initialConfig.iconCls=A;this.callEach("setIconClass",[A])},getIconClass:function(){return this.initialConfig.iconCls},setDisabled:function(A){this.initialConfig.disabled=A;this.callEach("setDisabled",[A])},enable:function(){this.setDisabled(false)},disable:function(){this.setDisabled(true)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(A){this.initialConfig.hidden=A;this.callEach("setVisible",[!A])},show:function(){this.setHidden(false)},hide:function(){this.setHidden(true)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(B,A){this.initialConfig.handler=B;this.initialConfig.scope=A;this.callEach("setHandler",[B,A])},each:function(B,A){Ext.each(this.items,B,A)},callEach:function(F,B){var E=this.items;for(var D=0,A=E.length;D<A;D++){E[D][F].apply(E[D],B)}},addComponent:function(A){this.items.push(A);A.on("destroy",this.removeComponent,this)},removeComponent:function(A){this.items.remove(A)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||window,arguments)}};(function(){Ext.Layer=function(E,D){E=E||{};var F=Ext.DomHelper;var H=E.parentEl,G=H?Ext.getDom(H):document.body;if(D){this.dom=Ext.getDom(D)}if(!this.dom){var I=E.dh||{tag:"div",cls:"x-layer"};this.dom=F.append(G,I)}if(E.cls){this.addClass(E.cls)}this.constrain=E.constrain!==false;this.visibilityMode=Ext.Element.VISIBILITY;if(E.id){this.id=this.dom.id=E.id}else{this.id=Ext.id(this.dom)}this.zindex=E.zindex||this.getZIndex();this.position("absolute",this.zindex);if(E.shadow){this.shadowOffset=E.shadowOffset||4;this.shadow=new Ext.Shadow({offset:this.shadowOffset,mode:E.shadow})}else{this.shadowOffset=0}this.useShim=E.shim!==false&&Ext.useShims;this.useDisplay=E.useDisplay;this.hide()};var A=Ext.Element.prototype;var B=[];Ext.extend(Ext.Layer,Ext.Element,{getZIndex:function(){return this.zindex||parseInt((this.getShim()||this).getStyle("z-index"),10)||11000},getShim:function(){if(!this.useShim){return null}if(this.shim){return this.shim}var E=B.shift();if(!E){E=this.createShim();E.enableDisplayMode("block");E.dom.style.display="none";E.dom.style.visibility="visible"}var D=this.dom.parentNode;if(E.dom.parentNode!=D){D.insertBefore(E.dom,this.dom)}E.setStyle("z-index",this.getZIndex()-2);this.shim=E;return E},hideShim:function(){if(this.shim){this.shim.setDisplayed(false);B.push(this.shim);delete this.shim}},disableShadow:function(){if(this.shadow){this.shadowDisabled=true;this.shadow.hide();this.lastShadowOffset=this.shadowOffset;this.shadowOffset=0}},enableShadow:function(D){if(this.shadow){this.shadowDisabled=false;this.shadowOffset=this.lastShadowOffset;delete this.lastShadowOffset;if(D){this.sync(true)}}},sync:function(D){var J=this.shadow;if(!this.updating&&this.isVisible()&&(J||this.useShim)){var G=this.getShim();var I=this.getWidth(),F=this.getHeight();var E=this.getLeft(true),K=this.getTop(true);if(J&&!this.shadowDisabled){if(D&&!J.isVisible()){J.show(this)}else{J.realign(E,K,I,F)}if(G){if(D){G.show()}var H=J.adjusts,L=G.dom.style;L.left=(Math.min(E,E+H.l))+"px";L.top=(Math.min(K,K+H.t))+"px";L.width=(I+H.w)+"px";L.height=(F+H.h)+"px"}}else{if(G){if(D){G.show()}G.setSize(I,F);G.setLeftTop(E,K)}}}},destroy:function(){this.hideShim();if(this.shadow){this.shadow.hide()}this.removeAllListeners();Ext.removeNode(this.dom);Ext.Element.uncache(this.id)},remove:function(){this.destroy()},beginUpdate:function(){this.updating=true},endUpdate:function(){this.updating=false;this.sync(true)},hideUnders:function(D){if(this.shadow){this.shadow.hide()}this.hideShim()},constrainXY:function(){if(this.constrain){var H=Ext.lib.Dom.getViewWidth(),D=Ext.lib.Dom.getViewHeight();var M=Ext.getDoc().getScroll();var L=this.getXY();var I=L[0],G=L[1];var J=this.dom.offsetWidth+this.shadowOffset,E=this.dom.offsetHeight+this.shadowOffset;var F=false;if((I+J)>H+M.left){I=H-J-this.shadowOffset;F=true}if((G+E)>D+M.top){G=D-E-this.shadowOffset;F=true}if(I<M.left){I=M.left;F=true}if(G<M.top){G=M.top;F=true}if(F){if(this.avoidY){var K=this.avoidY;if(G<=K&&(G+E)>=K){G=K-E-5}}L=[I,G];this.storeXY(L);A.setXY.call(this,L);this.sync()}}},isVisible:function(){return this.visible},showAction:function(){this.visible=true;if(this.useDisplay===true){this.setDisplayed("")}else{if(this.lastXY){A.setXY.call(this,this.lastXY)}else{if(this.lastLT){A.setLeftTop.call(this,this.lastLT[0],this.lastLT[1])}}}},hideAction:function(){this.visible=false;if(this.useDisplay===true){this.setDisplayed(false)}else{this.setLeftTop(-10000,-10000)}},setVisible:function(F,E,H,I,G){if(F){this.showAction()}if(E&&F){var D=function(){this.sync(true);if(I){I()}}.createDelegate(this);A.setVisible.call(this,true,true,H,D,G)}else{if(!F){this.hideUnders(true)}var D=I;if(E){D=function(){this.hideAction();if(I){I()}}.createDelegate(this)}A.setVisible.call(this,F,E,H,D,G);if(F){this.sync(true)}else{if(!E){this.hideAction()}}}},storeXY:function(D){delete this.lastLT;this.lastXY=D},storeLeftTop:function(E,D){delete this.lastXY;this.lastLT=[E,D]},beforeFx:function(){this.beforeAction();return Ext.Layer.superclass.beforeFx.apply(this,arguments)},afterFx:function(){Ext.Layer.superclass.afterFx.apply(this,arguments);this.sync(this.isVisible())},beforeAction:function(){if(!this.updating&&this.shadow){this.shadow.hide()}},setLeft:function(D){this.storeLeftTop(D,this.getTop(true));A.setLeft.apply(this,arguments);this.sync()},setTop:function(D){this.storeLeftTop(this.getLeft(true),D);A.setTop.apply(this,arguments);this.sync()},setLeftTop:function(E,D){this.storeLeftTop(E,D);A.setLeftTop.apply(this,arguments);this.sync()},setXY:function(G,E,H,I,F){this.fixDisplay();this.beforeAction();this.storeXY(G);var D=this.createCB(I);A.setXY.call(this,G,E,H,D,F);if(!E){D()}},createCB:function(E){var D=this;return function(){D.constrainXY();D.sync(true);if(E){E()}}},setX:function(D,E,G,H,F){this.setXY([D,this.getY()],E,G,H,F)},setY:function(H,D,F,G,E){this.setXY([this.getX(),H],D,F,G,E)},setSize:function(F,G,E,I,J,H){this.beforeAction();var D=this.createCB(J);A.setSize.call(this,F,G,E,I,D,H);if(!E){D()}},setWidth:function(F,E,H,I,G){this.beforeAction();var D=this.createCB(I);A.setWidth.call(this,F,E,H,D,G);if(!E){D()}},setHeight:function(F,E,H,I,G){this.beforeAction();var D=this.createCB(I);A.setHeight.call(this,F,E,H,D,G);if(!E){D()}},setBounds:function(K,I,L,E,J,G,H,F){this.beforeAction();var D=this.createCB(H);if(!J){this.storeXY([K,I]);A.setXY.call(this,[K,I]);A.setSize.call(this,L,E,J,G,D,F);D()}else{A.setBounds.call(this,K,I,L,E,J,G,D,F)}return this},setZIndex:function(D){this.zindex=D;this.setStyle("z-index",D+2);if(this.shadow){this.shadow.setZIndex(D+1)}if(this.shim){this.shim.setStyle("z-index",D)}}})})();Ext.Shadow=function(D){Ext.apply(this,D);if(typeof this.mode!="string"){this.mode=this.defaultMode}var E=this.offset,B={h:0};var A=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case"drop":B.w=0;B.l=B.t=E;B.t-=1;if(Ext.isIE){B.l-=this.offset+A;B.t-=this.offset+A;B.w-=A;B.h-=A;B.t+=1}break;case"sides":B.w=(E*2);B.l=-E;B.t=E-1;if(Ext.isIE){B.l-=(this.offset-A);B.t-=this.offset+A;B.l+=1;B.w-=(this.offset-A)*2;B.w-=A+1;B.h-=1}break;case"frame":B.w=B.h=(E*2);B.l=B.t=-E;B.t+=1;B.h-=2;if(Ext.isIE){B.l-=(this.offset-A);B.t-=(this.offset-A);B.l+=1;B.w-=(this.offset+A+1);B.h-=(this.offset+A);B.h+=1}break}this.adjusts=B};Ext.Shadow.prototype={offset:4,defaultMode:"drop",show:function(A){A=Ext.get(A);if(!this.el){this.el=Ext.Shadow.Pool.pull();if(this.el.dom.nextSibling!=A.dom){this.el.insertBefore(A)}}this.el.setStyle("z-index",this.zIndex||parseInt(A.getStyle("z-index"),10)-1);if(Ext.isIE){this.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+(this.offset)+")"}this.realign(A.getLeft(true),A.getTop(true),A.getWidth(),A.getHeight());this.el.dom.style.display="block"},isVisible:function(){return this.el?true:false},realign:function(A,N,M,E){if(!this.el){return}var J=this.adjusts,H=this.el.dom,O=H.style;var F=0;O.left=(A+J.l)+"px";O.top=(N+J.t)+"px";var L=(M+J.w),D=(E+J.h),G=L+"px",K=D+"px";if(O.width!=G||O.height!=K){O.width=G;O.height=K;if(!Ext.isIE){var I=H.childNodes;var B=Math.max(0,(L-12))+"px";I[0].childNodes[1].style.width=B;I[1].childNodes[1].style.width=B;I[2].childNodes[1].style.width=B;I[1].style.height=Math.max(0,(D-12))+"px"}}},hide:function(){if(this.el){this.el.dom.style.display="none";Ext.Shadow.Pool.push(this.el);delete this.el}},setZIndex:function(A){this.zIndex=A;if(this.el){this.el.setStyle("z-index",A)}}};Ext.Shadow.Pool=function(){var B=[];var A=Ext.isIE?'<div class="x-ie-shadow"></div>':'<div class="x-shadow"><div class="xst"><div class="xstl"></div><div class="xstc"></div><div class="xstr"></div></div><div class="xsc"><div class="xsml"></div><div class="xsmc"></div><div class="xsmr"></div></div><div class="xsb"><div class="xsbl"></div><div class="xsbc"></div><div class="xsbr"></div></div></div>';return{pull:function(){var D=B.shift();if(!D){D=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,A));D.autoBoxAdjust=false}return D},push:function(D){B.push(D)}}}();Ext.BoxComponent=Ext.extend(Ext.Component,{initComponent:function(){Ext.BoxComponent.superclass.initComponent.call(this);this.addEvents("resize","move")},boxReady:false,deferHeight:false,setSize:function(B,E){if(typeof B=="object"){E=B.height;B=B.width}if(!this.boxReady){this.width=B;this.height=E;return this}if(this.lastSize&&this.lastSize.width==B&&this.lastSize.height==E){return this}this.lastSize={width:B,height:E};var D=this.adjustSize(B,E);var G=D.width,A=D.height;if(G!==undefined||A!==undefined){var F=this.getResizeEl();if(!this.deferHeight&&G!==undefined&&A!==undefined){F.setSize(G,A)}else{if(!this.deferHeight&&A!==undefined){F.setHeight(A)}else{if(G!==undefined){F.setWidth(G)}}}this.onResize(G,A,B,E);this.fireEvent("resize",this,G,A,B,E)}return this},setWidth:function(A){return this.setSize(A)},setHeight:function(A){return this.setSize(undefined,A)},getSize:function(){return this.el.getSize()},getPosition:function(A){if(A===true){return[this.el.getLeft(true),this.el.getTop(true)]}return this.xy||this.el.getXY()},getBox:function(A){var B=this.el.getSize();if(A===true){B.x=this.el.getLeft(true);B.y=this.el.getTop(true)}else{var D=this.xy||this.el.getXY();B.x=D[0];B.y=D[1]}return B},updateBox:function(A){this.setSize(A.width,A.height);this.setPagePosition(A.x,A.y);return this},getResizeEl:function(){return this.resizeEl||this.el},getPositionEl:function(){return this.positionEl||this.el},setPosition:function(A,G){if(A&&typeof A[1]=="number"){G=A[1];A=A[0]}this.x=A;this.y=G;if(!this.boxReady){return this}var B=this.adjustPosition(A,G);var F=B.x,E=B.y;var D=this.getPositionEl();if(F!==undefined||E!==undefined){if(F!==undefined&&E!==undefined){D.setLeftTop(F,E)}else{if(F!==undefined){D.setLeft(F)}else{if(E!==undefined){D.setTop(E)}}}this.onPosition(F,E);this.fireEvent("move",this,F,E)}return this},setPagePosition:function(A,D){if(A&&typeof A[1]=="number"){D=A[1];A=A[0]}this.pageX=A;this.pageY=D;if(!this.boxReady){return}if(A===undefined||D===undefined){return}var B=this.el.translatePoints(A,D);this.setPosition(B.left,B.top);return this},onRender:function(B,A){Ext.BoxComponent.superclass.onRender.call(this,B,A);if(this.resizeEl){this.resizeEl=Ext.get(this.resizeEl)}if(this.positionEl){this.positionEl=Ext.get(this.positionEl)}},afterRender:function(){Ext.BoxComponent.superclass.afterRender.call(this);this.boxReady=true;this.setSize(this.width,this.height);if(this.x||this.y){this.setPosition(this.x,this.y)}else{if(this.pageX||this.pageY){this.setPagePosition(this.pageX,this.pageY)}}},syncSize:function(){delete this.lastSize;this.setSize(this.autoWidth?undefined:this.el.getWidth(),this.autoHeight?undefined:this.el.getHeight());return this},onResize:function(E,B,A,D){},onPosition:function(A,B){},adjustSize:function(A,B){if(this.autoWidth){A="auto"}if(this.autoHeight){B="auto"}return{width:A,height:B}},adjustPosition:function(A,B){return{x:A,y:B}}});Ext.reg("box",Ext.BoxComponent);Ext.SplitBar=function(D,F,B,E,A){this.el=Ext.get(D,true);this.el.dom.unselectable="on";this.resizingEl=Ext.get(F,true);this.orientation=B||Ext.SplitBar.HORIZONTAL;this.minSize=0;this.maxSize=2000;this.animate=false;this.useShim=false;this.shim=null;if(!A){this.proxy=Ext.SplitBar.createProxy(this.orientation)}else{this.proxy=Ext.get(A).dom}this.dd=new Ext.dd.DDProxy(this.el.dom.id,"XSplitBars",{dragElId:this.proxy.id});this.dd.b4StartDrag=this.onStartProxyDrag.createDelegate(this);this.dd.endDrag=this.onEndProxyDrag.createDelegate(this);this.dragSpecs={};this.adapter=new Ext.SplitBar.BasicLayoutAdapter();this.adapter.init(this);if(this.orientation==Ext.SplitBar.HORIZONTAL){this.placement=E||(this.el.getX()>this.resizingEl.getX()?Ext.SplitBar.LEFT:Ext.SplitBar.RIGHT);this.el.addClass("x-splitbar-h")}else{this.placement=E||(this.el.getY()>this.resizingEl.getY()?Ext.SplitBar.TOP:Ext.SplitBar.BOTTOM);this.el.addClass("x-splitbar-v")}this.addEvents("resize","moved","beforeresize","beforeapply");Ext.SplitBar.superclass.constructor.call(this)};Ext.extend(Ext.SplitBar,Ext.util.Observable,{onStartProxyDrag:function(A,F){this.fireEvent("beforeresize",this);this.overlay=Ext.DomHelper.append(document.body,{cls:"x-drag-overlay",html:"&#160;"},true);this.overlay.unselectable();this.overlay.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.overlay.show();Ext.get(this.proxy).setDisplayed("block");var D=this.adapter.getElementSize(this);this.activeMinSize=this.getMinimumSize();this.activeMaxSize=this.getMaximumSize();var E=D-this.activeMinSize;var B=Math.max(this.activeMaxSize-D,0);if(this.orientation==Ext.SplitBar.HORIZONTAL){this.dd.resetConstraints();this.dd.setXConstraint(this.placement==Ext.SplitBar.LEFT?E:B,this.placement==Ext.SplitBar.LEFT?B:E);this.dd.setYConstraint(0,0)}else{this.dd.resetConstraints();this.dd.setXConstraint(0,0);this.dd.setYConstraint(this.placement==Ext.SplitBar.TOP?E:B,this.placement==Ext.SplitBar.TOP?B:E)}this.dragSpecs.startSize=D;this.dragSpecs.startPoint=[A,F];Ext.dd.DDProxy.prototype.b4StartDrag.call(this.dd,A,F)},onEndProxyDrag:function(D){Ext.get(this.proxy).setDisplayed(false);var B=Ext.lib.Event.getXY(D);if(this.overlay){Ext.destroy(this.overlay);delete this.overlay}var A;if(this.orientation==Ext.SplitBar.HORIZONTAL){A=this.dragSpecs.startSize+(this.placement==Ext.SplitBar.LEFT?B[0]-this.dragSpecs.startPoint[0]:this.dragSpecs.startPoint[0]-B[0])}else{A=this.dragSpecs.startSize+(this.placement==Ext.SplitBar.TOP?B[1]-this.dragSpecs.startPoint[1]:this.dragSpecs.startPoint[1]-B[1])}A=Math.min(Math.max(A,this.activeMinSize),this.activeMaxSize);if(A!=this.dragSpecs.startSize){if(this.fireEvent("beforeapply",this,A)!==false){this.adapter.setElementSize(this,A);this.fireEvent("moved",this,A);this.fireEvent("resize",this,A)}}},getAdapter:function(){return this.adapter},setAdapter:function(A){this.adapter=A;this.adapter.init(this)},getMinimumSize:function(){return this.minSize},setMinimumSize:function(A){this.minSize=A},getMaximumSize:function(){return this.maxSize},setMaximumSize:function(A){this.maxSize=A},setCurrentSize:function(B){var A=this.animate;this.animate=false;this.adapter.setElementSize(this,B);this.animate=A},destroy:function(A){if(this.shim){this.shim.remove()}this.dd.unreg();Ext.destroy(Ext.get(this.proxy));if(A){this.el.remove()}}});Ext.SplitBar.createProxy=function(B){var D=new Ext.Element(document.createElement("div"));D.unselectable();var A="x-splitbar-proxy";D.addClass(A+" "+(B==Ext.SplitBar.HORIZONTAL?A+"-h":A+"-v"));document.body.appendChild(D.dom);return D.dom};Ext.SplitBar.BasicLayoutAdapter=function(){};Ext.SplitBar.BasicLayoutAdapter.prototype={init:function(A){},getElementSize:function(A){if(A.orientation==Ext.SplitBar.HORIZONTAL){return A.resizingEl.getWidth()}else{return A.resizingEl.getHeight()}},setElementSize:function(B,A,D){if(B.orientation==Ext.SplitBar.HORIZONTAL){if(!B.animate){B.resizingEl.setWidth(A);if(D){D(B,A)}}else{B.resizingEl.setWidth(A,true,0.1,D,"easeOut")}}else{if(!B.animate){B.resizingEl.setHeight(A);if(D){D(B,A)}}else{B.resizingEl.setHeight(A,true,0.1,D,"easeOut")}}}};Ext.SplitBar.AbsoluteLayoutAdapter=function(A){this.basic=new Ext.SplitBar.BasicLayoutAdapter();this.container=Ext.get(A)};Ext.SplitBar.AbsoluteLayoutAdapter.prototype={init:function(A){this.basic.init(A)},getElementSize:function(A){return this.basic.getElementSize(A)},setElementSize:function(B,A,D){this.basic.setElementSize(B,A,this.moveSplitter.createDelegate(this,[B]))},moveSplitter:function(A){var B=Ext.SplitBar;switch(A.placement){case B.LEFT:A.el.setX(A.resizingEl.getRight());break;case B.RIGHT:A.el.setStyle("right",(this.container.getWidth()-A.resizingEl.getLeft())+"px");break;case B.TOP:A.el.setY(A.resizingEl.getBottom());break;case B.BOTTOM:A.el.setY(A.resizingEl.getTop()-A.el.getHeight());break}}};Ext.SplitBar.VERTICAL=1;Ext.SplitBar.HORIZONTAL=2;Ext.SplitBar.LEFT=1;Ext.SplitBar.RIGHT=2;Ext.SplitBar.TOP=3;Ext.SplitBar.BOTTOM=4;Ext.Container=Ext.extend(Ext.BoxComponent,{autoDestroy:true,defaultType:"panel",initComponent:function(){Ext.Container.superclass.initComponent.call(this);this.addEvents("afterlayout","beforeadd","beforeremove","add","remove");var A=this.items;if(A){delete this.items;if(Ext.isArray(A)){if(A.length>0){this.add.apply(this,A)}}else{this.add(A)}}},initItems:function(){if(!this.items){this.items=new Ext.util.MixedCollection(false,this.getComponentId);this.getLayout()}},setLayout:function(A){if(this.layout&&this.layout!=A){this.layout.setContainer(null)}this.initItems();this.layout=A;A.setContainer(this)},render:function(){Ext.Container.superclass.render.apply(this,arguments);if(this.layout){if(typeof this.layout=="string"){this.layout=new Ext.Container.LAYOUTS[this.layout.toLowerCase()](this.layoutConfig)}this.setLayout(this.layout);if(this.activeItem!==undefined){var A=this.activeItem;delete this.activeItem;this.layout.setActiveItem(A);return}}if(!this.ownerCt){this.doLayout()}if(this.monitorResize===true){Ext.EventManager.onWindowResize(this.doLayout,this,[false])}},getLayoutTarget:function(){return this.el},getComponentId:function(A){return A.itemId||A.id},add:function(D){this.initItems();var B=arguments,A=B.length;if(A>1){for(var E=0;E<A;E++){this.add(B[E])}return}var G=this.lookupComponent(this.applyDefaults(D));var F=this.items.length;if(this.fireEvent("beforeadd",this,G,F)!==false&&this.onBeforeAdd(G)!==false){this.items.add(G);G.ownerCt=this;this.fireEvent("add",this,G,F)}return G},insert:function(E,D){this.initItems();var B=arguments,A=B.length;if(A>2){for(var F=A-1;F>=1;--F){this.insert(E,B[F])}return}var G=this.lookupComponent(this.applyDefaults(D));if(G.ownerCt==this&&this.items.indexOf(G)<E){--E}if(this.fireEvent("beforeadd",this,G,E)!==false&&this.onBeforeAdd(G)!==false){this.items.insert(E,G);G.ownerCt=this;this.fireEvent("add",this,G,E)}return G},applyDefaults:function(A){if(this.defaults){if(typeof A=="string"){A=Ext.ComponentMgr.get(A);Ext.apply(A,this.defaults)}else{if(!A.events){Ext.applyIf(A,this.defaults)}else{Ext.apply(A,this.defaults)}}}return A},onBeforeAdd:function(A){if(A.ownerCt){A.ownerCt.remove(A,false)}if(this.hideBorders===true){A.border=(A.border===true)}},remove:function(A,B){this.initItems();var D=this.getComponent(A);if(D&&this.fireEvent("beforeremove",this,D)!==false){this.items.remove(D);delete D.ownerCt;if(B===true||(B!==false&&this.autoDestroy)){D.destroy()}if(this.layout&&this.layout.activeItem==D){delete this.layout.activeItem}this.fireEvent("remove",this,D)}return D},removeAll:function(B){this.initItems();var D,A=[];while((D=this.items.last())){A.unshift(this.remove(D,B))}return A},getComponent:function(A){if(typeof A=="object"){return A}return this.items.get(A)},lookupComponent:function(A){if(typeof A=="string"){return Ext.ComponentMgr.get(A)}else{if(!A.events){return this.createComponent(A)}}return A},createComponent:function(A){return Ext.ComponentMgr.create(A,this.defaultType)},doLayout:function(E){if(this.rendered&&this.layout){this.layout.layout()}if(E!==true&&this.items){var D=this.items.items;for(var B=0,A=D.length;B<A;B++){var F=D[B];if(F.doLayout){F.doLayout()}}}},getLayout:function(){if(!this.layout){var A=new Ext.layout.ContainerLayout(this.layoutConfig);this.setLayout(A)}return this.layout},beforeDestroy:function(){if(this.items){Ext.destroy.apply(Ext,this.items.items)}if(this.monitorResize){Ext.EventManager.removeResizeListener(this.doLayout,this)}if(this.layout&&this.layout.destroy){this.layout.destroy()}Ext.Container.superclass.beforeDestroy.call(this)},bubble:function(D,B,A){var E=this;while(E){if(D.apply(B||E,A||[E])===false){break}E=E.ownerCt}},cascade:function(G,F,B){if(G.apply(F||this,B||[this])!==false){if(this.items){var E=this.items.items;for(var D=0,A=E.length;D<A;D++){if(E[D].cascade){E[D].cascade(G,F,B)}else{G.apply(F||E[D],B||[E[D]])}}}}},findById:function(D){var A,B=this;this.cascade(function(E){if(B!=E&&E.id===D){A=E;return false}});return A||null},findByType:function(B,A){return this.findBy(function(D){return D.isXType(B,A)})},find:function(B,A){return this.findBy(function(D){return D[B]===A})},findBy:function(E,D){var A=[],B=this;this.cascade(function(F){if(B!=F&&E.call(D||F,F,B)===true){A.push(F)}});return A}});Ext.Container.LAYOUTS={};Ext.reg("container",Ext.Container);Ext.layout.ContainerLayout=function(A){Ext.apply(this,A)};Ext.layout.ContainerLayout.prototype={monitorResize:false,activeItem:null,layout:function(){var A=this.container.getLayoutTarget();this.onLayout(this.container,A);this.container.fireEvent("afterlayout",this.container,this)},onLayout:function(A,B){this.renderAll(A,B)},isValidParent:function(D,B){var A=D.getPositionEl?D.getPositionEl():D.getEl();return A.dom.parentNode==B.dom},renderAll:function(E,F){var B=E.items.items;for(var D=0,A=B.length;D<A;D++){var G=B[D];if(G&&(!G.rendered||!this.isValidParent(G,F))){this.renderItem(G,D,F)}}},renderItem:function(E,A,D){if(E&&!E.rendered){E.render(D,A);if(this.extraCls){var B=E.getPositionEl?E.getPositionEl():E;B.addClass(this.extraCls)}if(this.renderHidden&&E!=this.activeItem){E.hide()}}else{if(E&&!this.isValidParent(E,D)){if(this.extraCls){var B=E.getPositionEl?E.getPositionEl():E;B.addClass(this.extraCls)}if(typeof A=="number"){A=D.dom.childNodes[A]}D.dom.insertBefore(E.getEl().dom,A||null);if(this.renderHidden&&E!=this.activeItem){E.hide()}}}},onResize:function(){if(this.container.collapsed){return}var A=this.container.bufferResize;if(A){if(!this.resizeTask){this.resizeTask=new Ext.util.DelayedTask(this.layout,this);this.resizeBuffer=typeof A=="number"?A:100}this.resizeTask.delay(this.resizeBuffer)}else{this.layout()}},setContainer:function(A){if(this.monitorResize&&A!=this.container){if(this.container){this.container.un("resize",this.onResize,this)}if(A){A.on("resize",this.onResize,this)}}this.container=A},parseMargins:function(B){var D=B.split(" ");var A=D.length;if(A==1){D[1]=D[0];D[2]=D[0];D[3]=D[0]}if(A==2){D[2]=D[0];D[3]=D[1]}return{top:parseInt(D[0],10)||0,right:parseInt(D[1],10)||0,bottom:parseInt(D[2],10)||0,left:parseInt(D[3],10)||0}},destroy:Ext.emptyFn};Ext.Container.LAYOUTS.auto=Ext.layout.ContainerLayout;Ext.layout.FitLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,onLayout:function(A,D){Ext.layout.FitLayout.superclass.onLayout.call(this,A,D);if(!this.container.collapsed){var B=(Ext.isIE6&&Ext.isStrict&&D.dom==document.body)?D.getViewSize():D.getStyleSize();this.setItemSize(this.activeItem||A.items.itemAt(0),B)}},setItemSize:function(B,A){if(B&&A.height>0){B.setSize(A)}}});Ext.Container.LAYOUTS.fit=Ext.layout.FitLayout;Ext.layout.CardLayout=Ext.extend(Ext.layout.FitLayout,{deferredRender:false,renderHidden:true,setActiveItem:function(A){A=this.container.getComponent(A);if(this.activeItem!=A){if(this.activeItem){this.activeItem.hide()}this.activeItem=A;A.show();this.layout()}},renderAll:function(A,B){if(this.deferredRender){this.renderItem(this.activeItem,undefined,B)}else{Ext.layout.CardLayout.superclass.renderAll.call(this,A,B)}}});Ext.Container.LAYOUTS.card=Ext.layout.CardLayout;Ext.layout.AnchorLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,getAnchorViewSize:function(A,B){return B.dom==document.body?B.getViewSize():B.getStyleSize()},onLayout:function(G,J){Ext.layout.AnchorLayout.superclass.onLayout.call(this,G,J);var P=this.getAnchorViewSize(G,J);var N=P.width,F=P.height;if(N<20||F<20){return}var B,L;if(G.anchorSize){if(typeof G.anchorSize=="number"){B=G.anchorSize}else{B=G.anchorSize.width;L=G.anchorSize.height}}else{B=G.initialConfig.width;L=G.initialConfig.height}var I=G.items.items,H=I.length,E,K,M,D,A;for(E=0;E<H;E++){K=I[E];if(K.anchor){M=K.anchorSpec;if(!M){var O=K.anchor.split(" ");K.anchorSpec=M={right:this.parseAnchor(O[0],K.initialConfig.width,B),bottom:this.parseAnchor(O[1],K.initialConfig.height,L)}}D=M.right?this.adjustWidthAnchor(M.right(N),K):undefined;A=M.bottom?this.adjustHeightAnchor(M.bottom(F),K):undefined;if(D||A){K.setSize(D||undefined,A||undefined)}}}},parseAnchor:function(B,G,A){if(B&&B!="none"){var E;if(/^(r|right|b|bottom)$/i.test(B)){var F=A-G;return function(H){if(H!==E){E=H;return H-F}}}else{if(B.indexOf("%")!=-1){var D=parseFloat(B.replace("%",""))*0.01;return function(H){if(H!==E){E=H;return Math.floor(H*D)}}}else{B=parseInt(B,10);if(!isNaN(B)){return function(H){if(H!==E){E=H;return H+B}}}}}}return false},adjustWidthAnchor:function(B,A){return B},adjustHeightAnchor:function(B,A){return B}});Ext.Container.LAYOUTS.anchor=Ext.layout.AnchorLayout;Ext.layout.ColumnLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,extraCls:"x-column",scrollOffset:0,isValidParent:function(B,A){return(B.getPositionEl?B.getPositionEl():B.getEl()).dom.parentNode==this.innerCt.dom},onLayout:function(D,G){var E=D.items.items,F=E.length,H,A;if(!this.innerCt){G.addClass("x-column-layout-ct");this.innerCt=G.createChild({cls:"x-column-inner"});this.innerCt.createChild({cls:"x-clear"})}this.renderAll(D,this.innerCt);var K=Ext.isIE&&G.dom!=Ext.getBody().dom?G.getStyleSize():G.getViewSize();if(K.width<1&&K.height<1){return}var I=K.width-G.getPadding("lr")-this.scrollOffset,B=K.height-G.getPadding("tb"),J=I;this.innerCt.setWidth(I);for(A=0;A<F;A++){H=E[A];if(!H.columnWidth){J-=(H.getSize().width+H.getEl().getMargins("lr"))}}J=J<0?0:J;for(A=0;A<F;A++){H=E[A];if(H.columnWidth){H.setSize(Math.floor(H.columnWidth*J)-H.getEl().getMargins("lr"))}}}});Ext.Container.LAYOUTS.column=Ext.layout.ColumnLayout;Ext.layout.BorderLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,rendered:false,onLayout:function(B,Y){var D;if(!this.rendered){Y.addClass("x-border-layout-ct");var N=B.items.items;D=[];for(var R=0,S=N.length;R<S;R++){var V=N[R];var G=V.region;if(V.collapsed){D.push(V)}V.collapsed=false;if(!V.rendered){V.cls=V.cls?V.cls+" x-border-panel":"x-border-panel";V.render(Y,R)}this[G]=G!="center"&&V.split?new Ext.layout.BorderLayout.SplitRegion(this,V.initialConfig,G):new Ext.layout.BorderLayout.Region(this,V.initialConfig,G);this[G].render(Y,V)}this.rendered=true}var M=Y.getViewSize();if(M.width<20||M.height<20){if(D){this.restoreCollapsed=D}return}else{if(this.restoreCollapsed){D=this.restoreCollapsed;delete this.restoreCollapsed}}var K=M.width,T=M.height;var J=K,Q=T,H=0,I=0;var O=this.north,L=this.south,F=this.west,U=this.east,V=this.center;if(!V&&Ext.layout.BorderLayout.WARN!==false){throw"No center region defined in BorderLayout "+B.id}if(O&&O.isVisible()){var X=O.getSize();var P=O.getMargins();X.width=K-(P.left+P.right);X.x=P.left;X.y=P.top;H=X.height+X.y+P.bottom;Q-=H;O.applyLayout(X)}if(L&&L.isVisible()){var X=L.getSize();var P=L.getMargins();X.width=K-(P.left+P.right);X.x=P.left;var W=(X.height+P.top+P.bottom);X.y=T-W+P.top;Q-=W;L.applyLayout(X)}if(F&&F.isVisible()){var X=F.getSize();var P=F.getMargins();X.height=Q-(P.top+P.bottom);X.x=P.left;X.y=H+P.top;var A=(X.width+P.left+P.right);I+=A;J-=A;F.applyLayout(X)}if(U&&U.isVisible()){var X=U.getSize();var P=U.getMargins();X.height=Q-(P.top+P.bottom);var A=(X.width+P.left+P.right);X.x=K-A+P.left;X.y=H+P.top;J-=A;U.applyLayout(X)}if(V){var P=V.getMargins();var E={x:I+P.left,y:H+P.top,width:J-(P.left+P.right),height:Q-(P.top+P.bottom)};V.applyLayout(E)}if(D){for(var R=0,S=D.length;R<S;R++){D[R].collapse(false)}}if(Ext.isIE&&Ext.isStrict){Y.repaint()}},destroy:function(){var B=["north","south","east","west"];for(var A=0;A<B.length;A++){var D=this[B[A]];if(D){if(D.destroy){D.destroy()}else{if(D.split){D.split.destroy(true)}}}}Ext.layout.BorderLayout.superclass.destroy.call(this)}});Ext.layout.BorderLayout.Region=function(B,A,D){Ext.apply(this,A);this.layout=B;this.position=D;this.state={};if(typeof this.margins=="string"){this.margins=this.layout.parseMargins(this.margins)}this.margins=Ext.applyIf(this.margins||{},this.defaultMargins);if(this.collapsible){if(typeof this.cmargins=="string"){this.cmargins=this.layout.parseMargins(this.cmargins)}if(this.collapseMode=="mini"&&!this.cmargins){this.cmargins={left:0,top:0,right:0,bottom:0}}else{this.cmargins=Ext.applyIf(this.cmargins||{},D=="north"||D=="south"?this.defaultNSCMargins:this.defaultEWCMargins)}}};Ext.layout.BorderLayout.Region.prototype={collapsible:false,split:false,floatable:true,minWidth:50,minHeight:50,defaultMargins:{left:0,top:0,right:0,bottom:0},defaultNSCMargins:{left:5,top:5,right:5,bottom:5},defaultEWCMargins:{left:5,top:0,right:5,bottom:0},isCollapsed:false,render:function(B,D){this.panel=D;D.el.enableDisplayMode();this.targetEl=B;this.el=D.el;var A=D.getState,E=this.position;D.getState=function(){return Ext.apply(A.call(D)||{},this.state)}.createDelegate(this);if(E!="center"){D.allowQueuedExpand=false;D.on({beforecollapse:this.beforeCollapse,collapse:this.onCollapse,beforeexpand:this.beforeExpand,expand:this.onExpand,hide:this.onHide,show:this.onShow,scope:this});if(this.collapsible||this.floatable){D.collapseEl="el";D.slideAnchor=this.getSlideAnchor()}if(D.tools&&D.tools.toggle){D.tools.toggle.addClass("x-tool-collapse-"+E);D.tools.toggle.addClassOnOver("x-tool-collapse-"+E+"-over")}}},getCollapsedEl:function(){if(!this.collapsedEl){if(!this.toolTemplate){var B=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');B.disableFormats=true;B.compile();Ext.layout.BorderLayout.Region.prototype.toolTemplate=B}this.collapsedEl=this.targetEl.createChild({cls:"x-layout-collapsed x-layout-collapsed-"+this.position,id:this.panel.id+"-xcollapsed"});this.collapsedEl.enableDisplayMode("block");if(this.collapseMode=="mini"){this.collapsedEl.addClass("x-layout-cmini-"+this.position);this.miniCollapsedEl=this.collapsedEl.createChild({cls:"x-layout-mini x-layout-mini-"+this.position,html:"&#160;"});this.miniCollapsedEl.addClassOnOver("x-layout-mini-over");this.collapsedEl.addClassOnOver("x-layout-collapsed-over");this.collapsedEl.on("click",this.onExpandClick,this,{stopEvent:true})}else{if(this.collapsible!==false&&!this.hideCollapseTool){var A=this.toolTemplate.append(this.collapsedEl.dom,{id:"expand-"+this.position},true);A.addClassOnOver("x-tool-expand-"+this.position+"-over");A.on("click",this.onExpandClick,this,{stopEvent:true})}if(this.floatable!==false||this.titleCollapse){this.collapsedEl.addClassOnOver("x-layout-collapsed-over");this.collapsedEl.on("click",this[this.floatable?"collapseClick":"onExpandClick"],this)}}}return this.collapsedEl},onExpandClick:function(A){if(this.isSlid){this.afterSlideIn();this.panel.expand(false)}else{this.panel.expand()}},onCollapseClick:function(A){this.panel.collapse()},beforeCollapse:function(B,A){this.lastAnim=A;if(this.splitEl){this.splitEl.hide()}this.getCollapsedEl().show();this.panel.el.setStyle("z-index",100);this.isCollapsed=true;this.layout.layout()},onCollapse:function(A){this.panel.el.setStyle("z-index",1);if(this.lastAnim===false||this.panel.animCollapse===false){this.getCollapsedEl().dom.style.visibility="visible"}else{this.getCollapsedEl().slideIn(this.panel.slideAnchor,{duration:0.2})}this.state.collapsed=true;this.panel.saveState()},beforeExpand:function(A){var B=this.getCollapsedEl();this.el.show();if(this.position=="east"||this.position=="west"){this.panel.setSize(undefined,B.getHeight())}else{this.panel.setSize(B.getWidth(),undefined)}B.hide();B.dom.style.visibility="hidden";this.panel.el.setStyle("z-index",100)},onExpand:function(){this.isCollapsed=false;if(this.splitEl){this.splitEl.show()}this.layout.layout();this.panel.el.setStyle("z-index",1);this.state.collapsed=false;this.panel.saveState()},collapseClick:function(A){if(this.isSlid){A.stopPropagation();this.slideIn()}else{A.stopPropagation();this.slideOut()}},onHide:function(){if(this.isCollapsed){this.getCollapsedEl().hide()}else{if(this.splitEl){this.splitEl.hide()}}},onShow:function(){if(this.isCollapsed){this.getCollapsedEl().show()}else{if(this.splitEl){this.splitEl.show()}}},isVisible:function(){return !this.panel.hidden},getMargins:function(){return this.isCollapsed&&this.cmargins?this.cmargins:this.margins},getSize:function(){return this.isCollapsed?this.getCollapsedEl().getSize():this.panel.getSize()},setPanel:function(A){this.panel=A},getMinWidth:function(){return this.minWidth},getMinHeight:function(){return this.minHeight},applyLayoutCollapsed:function(A){var B=this.getCollapsedEl();B.setLeftTop(A.x,A.y);B.setSize(A.width,A.height)},applyLayout:function(A){if(this.isCollapsed){this.applyLayoutCollapsed(A)}else{this.panel.setPosition(A.x,A.y);this.panel.setSize(A.width,A.height)}},beforeSlide:function(){this.panel.beforeEffect()},afterSlide:function(){this.panel.afterEffect()},initAutoHide:function(){if(this.autoHide!==false){if(!this.autoHideHd){var A=new Ext.util.DelayedTask(this.slideIn,this);this.autoHideHd={mouseout:function(B){if(!B.within(this.el,true)){A.delay(500)}},mouseover:function(B){A.cancel()},scope:this}}this.el.on(this.autoHideHd)}},clearAutoHide:function(){if(this.autoHide!==false){this.el.un("mouseout",this.autoHideHd.mouseout);this.el.un("mouseover",this.autoHideHd.mouseover)}},clearMonitor:function(){Ext.getDoc().un("click",this.slideInIf,this)},slideOut:function(){if(this.isSlid||this.el.hasActiveFx()){return}this.isSlid=true;var A=this.panel.tools;if(A&&A.toggle){A.toggle.hide()}this.el.show();if(this.position=="east"||this.position=="west"){this.panel.setSize(undefined,this.collapsedEl.getHeight())}else{this.panel.setSize(this.collapsedEl.getWidth(),undefined)}this.restoreLT=[this.el.dom.style.left,this.el.dom.style.top];this.el.alignTo(this.collapsedEl,this.getCollapseAnchor());this.el.setStyle("z-index",102);this.panel.el.replaceClass("x-panel-collapsed","x-panel-floating");if(this.animFloat!==false){this.beforeSlide();this.el.slideIn(this.getSlideAnchor(),{callback:function(){this.afterSlide();this.initAutoHide();Ext.getDoc().on("click",this.slideInIf,this)},scope:this,block:true})}else{this.initAutoHide();Ext.getDoc().on("click",this.slideInIf,this)}},afterSlideIn:function(){this.clearAutoHide();this.isSlid=false;this.clearMonitor();this.el.setStyle("z-index","");this.panel.el.replaceClass("x-panel-floating","x-panel-collapsed");this.el.dom.style.left=this.restoreLT[0];this.el.dom.style.top=this.restoreLT[1];var A=this.panel.tools;if(A&&A.toggle){A.toggle.show()}},slideIn:function(A){if(!this.isSlid||this.el.hasActiveFx()){Ext.callback(A);return}this.isSlid=false;if(this.animFloat!==false){this.beforeSlide();this.el.slideOut(this.getSlideAnchor(),{callback:function(){this.el.hide();this.afterSlide();this.afterSlideIn();Ext.callback(A)},scope:this,block:true})}else{this.el.hide();this.afterSlideIn()}},slideInIf:function(A){if(!A.within(this.el)){this.slideIn()}},anchors:{west:"left",east:"right",north:"top",south:"bottom"},sanchors:{west:"l",east:"r",north:"t",south:"b"},canchors:{west:"tl-tr",east:"tr-tl",north:"tl-bl",south:"bl-tl"},getAnchor:function(){return this.anchors[this.position]},getCollapseAnchor:function(){return this.canchors[this.position]},getSlideAnchor:function(){return this.sanchors[this.position]},getAlignAdj:function(){var A=this.cmargins;switch(this.position){case"west":return[0,0];break;case"east":return[0,0];break;case"north":return[0,0];break;case"south":return[0,0];break}},getExpandAdj:function(){var B=this.collapsedEl,A=this.cmargins;switch(this.position){case"west":return[-(A.right+B.getWidth()+A.left),0];break;case"east":return[A.right+B.getWidth()+A.left,0];break;case"north":return[0,-(A.top+A.bottom+B.getHeight())];break;case"south":return[0,A.top+A.bottom+B.getHeight()];break}}};Ext.layout.BorderLayout.SplitRegion=function(B,A,D){Ext.layout.BorderLayout.SplitRegion.superclass.constructor.call(this,B,A,D);this.applyLayout=this.applyFns[D]};Ext.extend(Ext.layout.BorderLayout.SplitRegion,Ext.layout.BorderLayout.Region,{splitTip:"Drag to resize.",collapsibleSplitTip:"Drag to resize. Double click to hide.",useSplitTips:false,splitSettings:{north:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.TOP,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},south:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.BOTTOM,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},east:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.RIGHT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"},west:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.LEFT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"}},applyFns:{west:function(D){if(this.isCollapsed){return this.applyLayoutCollapsed(D)}var E=this.splitEl.dom,B=E.style;this.panel.setPosition(D.x,D.y);var A=E.offsetWidth;B.left=(D.x+D.width-A)+"px";B.top=(D.y)+"px";B.height=Math.max(0,D.height)+"px";this.panel.setSize(D.width-A,D.height)},east:function(D){if(this.isCollapsed){return this.applyLayoutCollapsed(D)}var E=this.splitEl.dom,B=E.style;var A=E.offsetWidth;this.panel.setPosition(D.x+A,D.y);B.left=(D.x)+"px";B.top=(D.y)+"px";B.height=Math.max(0,D.height)+"px";this.panel.setSize(D.width-A,D.height)},north:function(D){if(this.isCollapsed){return this.applyLayoutCollapsed(D)}var E=this.splitEl.dom,B=E.style;var A=E.offsetHeight;this.panel.setPosition(D.x,D.y);B.left=(D.x)+"px";B.top=(D.y+D.height-A)+"px";B.width=Math.max(0,D.width)+"px";this.panel.setSize(D.width,D.height-A)},south:function(D){if(this.isCollapsed){return this.applyLayoutCollapsed(D)}var E=this.splitEl.dom,B=E.style;var A=E.offsetHeight;this.panel.setPosition(D.x,D.y+A);B.left=(D.x)+"px";B.top=(D.y)+"px";B.width=Math.max(0,D.width)+"px";this.panel.setSize(D.width,D.height-A)}},render:function(A,D){Ext.layout.BorderLayout.SplitRegion.superclass.render.call(this,A,D);var E=this.position;this.splitEl=A.createChild({cls:"x-layout-split x-layout-split-"+E,html:"&#160;",id:this.panel.id+"-xsplit"});if(this.collapseMode=="mini"){this.miniSplitEl=this.splitEl.createChild({cls:"x-layout-mini x-layout-mini-"+E,html:"&#160;"});this.miniSplitEl.addClassOnOver("x-layout-mini-over");this.miniSplitEl.on("click",this.onCollapseClick,this,{stopEvent:true})}var B=this.splitSettings[E];this.split=new Ext.SplitBar(this.splitEl.dom,D.el,B.orientation);this.split.placement=B.placement;this.split.getMaximumSize=this[B.maxFn].createDelegate(this);this.split.minSize=this.minSize||this[B.minProp];this.split.on("beforeapply",this.onSplitMove,this);this.split.useShim=this.useShim===true;this.maxSize=this.maxSize||this[B.maxProp];if(D.hidden){this.splitEl.hide()}if(this.useSplitTips){this.splitEl.dom.title=this.collapsible?this.collapsibleSplitTip:this.splitTip}if(this.collapsible){this.splitEl.on("dblclick",this.onCollapseClick,this)}},getSize:function(){if(this.isCollapsed){return this.collapsedEl.getSize()}var A=this.panel.getSize();if(this.position=="north"||this.position=="south"){A.height+=this.splitEl.dom.offsetHeight}else{A.width+=this.splitEl.dom.offsetWidth}return A},getHMaxSize:function(){var B=this.maxSize||10000;var A=this.layout.center;return Math.min(B,(this.el.getWidth()+A.el.getWidth())-A.getMinWidth())},getVMaxSize:function(){var B=this.maxSize||10000;var A=this.layout.center;return Math.min(B,(this.el.getHeight()+A.el.getHeight())-A.getMinHeight())},onSplitMove:function(B,A){var D=this.panel.getSize();this.lastSplitSize=A;if(this.position=="north"||this.position=="south"){this.panel.setSize(D.width,A);this.state.height=A}else{this.panel.setSize(A,D.height);this.state.width=A}this.layout.layout();this.panel.saveState();return false},getSplitBar:function(){return this.split},destroy:function(){Ext.destroy(this.miniSplitEl,this.split,this.splitEl)}});Ext.Container.LAYOUTS.border=Ext.layout.BorderLayout;Ext.layout.FormLayout=Ext.extend(Ext.layout.AnchorLayout,{labelSeparator:":",getAnchorViewSize:function(A,B){return(A.body||A.el).getStyleSize()},setContainer:function(B){Ext.layout.FormLayout.superclass.setContainer.call(this,B);if(B.labelAlign){B.addClass("x-form-label-"+B.labelAlign)}if(B.hideLabels){this.labelStyle="display:none";this.elementStyle="padding-left:0;";this.labelAdjust=0}else{this.labelSeparator=B.labelSeparator||this.labelSeparator;B.labelWidth=B.labelWidth||100;if(typeof B.labelWidth=="number"){var D=(typeof B.labelPad=="number"?B.labelPad:5);this.labelAdjust=B.labelWidth+D;this.labelStyle="width:"+B.labelWidth+"px;";this.elementStyle="padding-left:"+(B.labelWidth+D)+"px"}if(B.labelAlign=="top"){this.labelStyle="width:auto;";this.labelAdjust=0;this.elementStyle="padding-left:0;"}}if(!this.fieldTpl){var A=new Ext.Template('<div class="x-form-item {5}" tabIndex="-1">','<label for="{0}" style="{2}" class="x-form-item-label">{1}{4}</label>','<div class="x-form-element" id="x-form-el-{0}" style="{3}">','</div><div class="{6}"></div>',"</div>");A.disableFormats=true;A.compile();Ext.layout.FormLayout.prototype.fieldTpl=A}},getLabelStyle:function(F){var B="",D=[this.labelStyle,F];for(var E=0,A=D.length;E<A;++E){if(D[E]){B+=D[E];if(B.substr(-1,1)!=";"){B+=";"}}}return B},renderItem:function(E,A,D){if(E&&!E.rendered&&E.isFormField&&E.inputType!="hidden"){var B=[E.id,E.fieldLabel,this.getLabelStyle(E.labelStyle),this.elementStyle||"",typeof E.labelSeparator=="undefined"?this.labelSeparator:E.labelSeparator,(E.itemCls||this.container.itemCls||"")+(E.hideLabel?" x-hide-label":""),E.clearCls||"x-form-clear-left"];if(typeof A=="number"){A=D.dom.childNodes[A]||null}if(A){this.fieldTpl.insertBefore(A,B)}else{this.fieldTpl.append(D,B)}E.render("x-form-el-"+E.id)}else{Ext.layout.FormLayout.superclass.renderItem.apply(this,arguments)}},adjustWidthAnchor:function(B,A){return B-(A.isFormField?(A.hideLabel?0:this.labelAdjust):0)},isValidParent:function(B,A){return true}});Ext.Container.LAYOUTS.form=Ext.layout.FormLayout;Ext.layout.Accordion=Ext.extend(Ext.layout.FitLayout,{fill:true,autoWidth:true,titleCollapse:true,hideCollapseTool:false,collapseFirst:false,animate:false,sequence:false,activeOnTop:false,setActiveItem:function(A){A=this.container.getComponent(A);this.activeItem=A;this.layout()},renderItem:function(A){if(this.animate===false){A.animCollapse=false}A.collapsible=true;if(this.autoWidth){A.autoWidth=true}if(this.titleCollapse){A.titleCollapse=true}if(this.hideCollapseTool){A.hideCollapseTool=true}if(this.collapseFirst!==undefined){A.collapseFirst=this.collapseFirst}if(!this.activeItem&&!A.collapsed){this.activeItem=A}else{if(this.activeItem&&this.activeItem!=A){A.collapsed=true}}Ext.layout.Accordion.superclass.renderItem.apply(this,arguments);A.header.addClass("x-accordion-hd");A.on("beforeexpand",this.beforeExpand,this)},beforeExpand:function(D,B){var A=this.activeItem;if(A){if(this.sequence){delete this.activeItem;if(!A.collapsed){A.collapse({callback:function(){D.expand(B||true)},scope:this});return false}}else{A.collapse(this.animate)}}this.activeItem=D;if(this.activeOnTop){D.el.dom.parentNode.insertBefore(D.el.dom,D.el.dom.parentNode.firstChild)}this.layout()},setItemSize:function(G,F){if(this.fill&&G){var B=this.container.items.items;var E=0;for(var D=0,A=B.length;D<A;D++){var H=B[D];if(H!=G){E+=(H.getSize().height-H.bwrap.getHeight())}}F.height-=E;G.setSize(F)}}});Ext.Container.LAYOUTS.accordion=Ext.layout.Accordion;Ext.layout.TableLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:false,setContainer:function(A){Ext.layout.TableLayout.superclass.setContainer.call(this,A);this.currentRow=0;this.currentColumn=0;this.cells=[]},onLayout:function(D,F){var E=D.items.items,A=E.length,G,B;if(!this.table){F.addClass("x-table-layout-ct");this.table=F.createChild({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},null,true)}this.renderAll(D,F)},getRow:function(A){var B=this.table.tBodies[0].childNodes[A];if(!B){B=document.createElement("tr");this.table.tBodies[0].appendChild(B)}return B},getNextCell:function(I){var A=this.getNextNonSpan(this.currentColumn,this.currentRow);var F=this.currentColumn=A[0],E=this.currentRow=A[1];for(var H=E;H<E+(I.rowspan||1);H++){if(!this.cells[H]){this.cells[H]=[]}for(var D=F;D<F+(I.colspan||1);D++){this.cells[H][D]=true}}var G=document.createElement("td");if(I.cellId){G.id=I.cellId}var B="x-table-layout-cell";if(I.cellCls){B+=" "+I.cellCls}G.className=B;if(I.colspan){G.colSpan=I.colspan}if(I.rowspan){G.rowSpan=I.rowspan}this.getRow(E).appendChild(G);return G},getNextNonSpan:function(A,D){var B=this.columns;while((B&&A>=B)||(this.cells[D]&&this.cells[D][A])){if(B&&A>=B){D++;A=0}else{A++}}return[A,D]},renderItem:function(E,A,D){if(E&&!E.rendered){E.render(this.getNextCell(E));if(this.extraCls){var B=E.getPositionEl?E.getPositionEl():E;B.addClass(this.extraCls)}}},isValidParent:function(B,A){return true}});Ext.Container.LAYOUTS.table=Ext.layout.TableLayout;Ext.layout.AbsoluteLayout=Ext.extend(Ext.layout.AnchorLayout,{extraCls:"x-abs-layout-item",isForm:false,setContainer:function(A){Ext.layout.AbsoluteLayout.superclass.setContainer.call(this,A);if(A.isXType("form")){this.isForm=true}},onLayout:function(A,B){if(this.isForm){A.body.position()}else{B.position()}Ext.layout.AbsoluteLayout.superclass.onLayout.call(this,A,B)},getAnchorViewSize:function(A,B){return this.isForm?A.body.getStyleSize():Ext.layout.AbsoluteLayout.superclass.getAnchorViewSize.call(this,A,B)},isValidParent:function(B,A){return this.isForm?true:Ext.layout.AbsoluteLayout.superclass.isValidParent.call(this,B,A)},adjustWidthAnchor:function(B,A){return B?B-A.getPosition(true)[0]:B},adjustHeightAnchor:function(B,A){return B?B-A.getPosition(true)[1]:B}});Ext.Container.LAYOUTS.absolute=Ext.layout.AbsoluteLayout;Ext.Viewport=Ext.extend(Ext.Container,{initComponent:function(){Ext.Viewport.superclass.initComponent.call(this);document.getElementsByTagName("html")[0].className+=" x-viewport";this.el=Ext.getBody();this.el.setHeight=Ext.emptyFn;this.el.setWidth=Ext.emptyFn;this.el.setSize=Ext.emptyFn;this.el.dom.scroll="no";this.allowDomMove=false;this.autoWidth=true;this.autoHeight=true;Ext.EventManager.onWindowResize(this.fireResize,this);this.renderTo=this.el},fireResize:function(A,B){this.fireEvent("resize",this,A,B,A,B)}});Ext.reg("viewport",Ext.Viewport);Ext.Panel=Ext.extend(Ext.Container,{baseCls:"x-panel",collapsedCls:"x-panel-collapsed",maskDisabled:true,animCollapse:Ext.enableFx,headerAsText:true,buttonAlign:"right",collapsed:false,collapseFirst:true,minButtonWidth:75,elements:"body",toolTarget:"header",collapseEl:"bwrap",slideAnchor:"t",disabledClass:"",deferHeight:true,expandDefaults:{duration:0.25},collapseDefaults:{duration:0.25},initComponent:function(){Ext.Panel.superclass.initComponent.call(this);this.addEvents("bodyresize","titlechange","iconchange","collapse","expand","beforecollapse","beforeexpand","beforeclose","close","activate","deactivate");if(this.tbar){this.elements+=",tbar";if(typeof this.tbar=="object"){this.topToolbar=this.tbar}delete this.tbar}if(this.bbar){this.elements+=",bbar";if(typeof this.bbar=="object"){this.bottomToolbar=this.bbar}delete this.bbar}if(this.header===true){this.elements+=",header";delete this.header}else{if(this.headerCfg||(this.title&&this.header!==false)){this.elements+=",header"}}if(this.footerCfg||this.footer===true){this.elements+=",footer";delete this.footer}if(this.buttons){var D=this.buttons;this.buttons=[];for(var B=0,A=D.length;B<A;B++){if(D[B].render){D[B].ownerCt=this;this.buttons.push(D[B])}else{this.addButton(D[B])}}}if(this.autoLoad){this.on("render",this.doAutoLoad,this,{delay:10})}},createElement:function(A,D){if(this[A]){D.appendChild(this[A].dom);return}if(A==="bwrap"||this.elements.indexOf(A)!=-1){if(this[A+"Cfg"]){this[A]=Ext.fly(D).createChild(this[A+"Cfg"])}else{var B=document.createElement("div");B.className=this[A+"Cls"];this[A]=Ext.get(D.appendChild(B))}if(this[A+"CssClass"]){this[A].addClass(this[A+"CssClass"])}if(this[A+"Style"]){this[A].applyStyles(this[A+"Style"])}}},onRender:function(I,H){Ext.Panel.superclass.onRender.call(this,I,H);this.createClasses();if(this.el){this.el.addClass(this.baseCls);this.header=this.el.down("."+this.headerCls);this.bwrap=this.el.down("."+this.bwrapCls);var N=this.bwrap?this.bwrap:this.el;this.tbar=N.down("."+this.tbarCls);this.body=N.down("."+this.bodyCls);this.bbar=N.down("."+this.bbarCls);this.footer=N.down("."+this.footerCls);this.fromMarkup=true}else{this.el=I.createChild({id:this.id,cls:this.baseCls},H)}var A=this.el,L=A.dom;if(this.cls){this.el.addClass(this.cls)}if(this.buttons){this.elements+=",footer"}if(this.frame){A.insertHtml("afterBegin",String.format(Ext.Element.boxMarkup,this.baseCls));this.createElement("header",L.firstChild.firstChild.firstChild);this.createElement("bwrap",L);var P=this.bwrap.dom;var F=L.childNodes[1],B=L.childNodes[2];P.appendChild(F);P.appendChild(B);var Q=P.firstChild.firstChild.firstChild;this.createElement("tbar",Q);this.createElement("body",Q);this.createElement("bbar",Q);this.createElement("footer",P.lastChild.firstChild.firstChild);if(!this.footer){this.bwrap.dom.lastChild.className+=" x-panel-nofooter"}}else{this.createElement("header",L);this.createElement("bwrap",L);var P=this.bwrap.dom;this.createElement("tbar",P);this.createElement("body",P);this.createElement("bbar",P);this.createElement("footer",P);if(!this.header){this.body.addClass(this.bodyCls+"-noheader");if(this.tbar){this.tbar.addClass(this.tbarCls+"-noheader")}}}if(this.border===false){this.el.addClass(this.baseCls+"-noborder");this.body.addClass(this.bodyCls+"-noborder");if(this.header){this.header.addClass(this.headerCls+"-noborder")}if(this.footer){this.footer.addClass(this.footerCls+"-noborder")}if(this.tbar){this.tbar.addClass(this.tbarCls+"-noborder")}if(this.bbar){this.bbar.addClass(this.bbarCls+"-noborder")}}if(this.bodyBorder===false){this.body.addClass(this.bodyCls+"-noborder")}this.bwrap.enableDisplayMode("block");if(this.header){this.header.unselectable();if(this.headerAsText){this.header.dom.innerHTML='<span class="'+this.headerTextCls+'">'+this.header.dom.innerHTML+"</span>";if(this.iconCls){this.setIconClass(this.iconCls)}}}if(this.floating){this.makeFloating(this.floating)}if(this.collapsible){this.tools=this.tools?this.tools.slice(0):[];if(!this.hideCollapseTool){this.tools[this.collapseFirst?"unshift":"push"]({id:"toggle",handler:this.toggleCollapse,scope:this})}if(this.titleCollapse&&this.header){this.header.on("click",this.toggleCollapse,this);this.header.setStyle("cursor","pointer")}}if(this.tools){var K=this.tools;this.tools={};this.addTool.apply(this,K)}else{this.tools={}}if(this.buttons&&this.buttons.length>0){var E=this.footer.createChild({cls:"x-panel-btns-ct",cn:{cls:"x-panel-btns x-panel-btns-"+this.buttonAlign,html:'<table cellspacing="0"><tbody><tr></tr></tbody></table><div class="x-clear"></div>'}},null,true);var M=E.getElementsByTagName("tr")[0];for(var G=0,J=this.buttons.length;G<J;G++){var O=this.buttons[G];var D=document.createElement("td");D.className="x-panel-btn-td";O.render(M.appendChild(D))}}if(this.tbar&&this.topToolbar){if(Ext.isArray(this.topToolbar)){this.topToolbar=new Ext.Toolbar(this.topToolbar)}this.topToolbar.render(this.tbar);this.topToolbar.ownerCt=this}if(this.bbar&&this.bottomToolbar){if(Ext.isArray(this.bottomToolbar)){this.bottomToolbar=new Ext.Toolbar(this.bottomToolbar)}this.bottomToolbar.render(this.bbar);this.bottomToolbar.ownerCt=this}},setIconClass:function(B){var A=this.iconCls;this.iconCls=B;if(this.rendered&&this.header){if(this.frame){this.header.addClass("x-panel-icon");this.header.replaceClass(A,this.iconCls)}else{var E=this.header.dom;var D=E.firstChild&&String(E.firstChild.tagName).toLowerCase()=="img"?E.firstChild:null;if(D){Ext.fly(D).replaceClass(A,this.iconCls)}else{Ext.DomHelper.insertBefore(E.firstChild,{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-panel-inline-icon "+this.iconCls})}}}this.fireEvent("iconchange",this,B,A)},makeFloating:function(A){this.floating=true;this.el=new Ext.Layer(typeof A=="object"?A:{shadow:this.shadow!==undefined?this.shadow:"sides",shadowOffset:this.shadowOffset,constrain:false,shim:this.shim===false?false:undefined},this.el)},getTopToolbar:function(){return this.topToolbar},getBottomToolbar:function(){return this.bottomToolbar},addButton:function(A,E,D){var F={handler:E,scope:D,minWidth:this.minButtonWidth,hideParent:true};if(typeof A=="string"){F.text=A}else{Ext.apply(F,A)}var B=new Ext.Button(F);B.ownerCt=this;if(!this.buttons){this.buttons=[]}this.buttons.push(B);return B},addTool:function(){if(!this[this.toolTarget]){return}if(!this.toolTemplate){var G=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');G.disableFormats=true;G.compile();Ext.Panel.prototype.toolTemplate=G}for(var F=0,D=arguments,B=D.length;F<B;F++){var A=D[F];if(!this.tools[A.id]){var H="x-tool-"+A.id+"-over";var E=this.toolTemplate.insertFirst((A.align!=="left")?this[this.toolTarget]:this[this.toolTarget].child("span"),A,true);this.tools[A.id]=E;E.enableDisplayMode("block");E.on("click",this.createToolHandler(E,A,H,this));if(A.on){E.on(A.on)}if(A.hidden){E.hide()}if(A.qtip){if(typeof A.qtip=="object"){Ext.QuickTips.register(Ext.apply({target:E.id},A.qtip))}else{E.dom.qtip=A.qtip}}E.addClassOnOver(H)}}},onShow:function(){if(this.floating){return this.el.show()}Ext.Panel.superclass.onShow.call(this)},onHide:function(){if(this.floating){return this.el.hide()}Ext.Panel.superclass.onHide.call(this)},createToolHandler:function(D,A,E,B){return function(F){D.removeClass(E);F.stopEvent();if(A.handler){A.handler.call(A.scope||D,F,D,B)}}},afterRender:function(){if(this.fromMarkup&&this.height===undefined&&!this.autoHeight){this.height=this.el.getHeight()}if(this.floating&&!this.hidden&&!this.initHidden){this.el.show()}if(this.title){this.setTitle(this.title)}this.setAutoScroll();if(this.html){this.body.update(typeof this.html=="object"?Ext.DomHelper.markup(this.html):this.html);delete this.html}if(this.contentEl){var A=Ext.getDom(this.contentEl);Ext.fly(A).removeClass(["x-hidden","x-hide-display"]);this.body.dom.appendChild(A)}if(this.collapsed){this.collapsed=false;this.collapse(false)}Ext.Panel.superclass.afterRender.call(this);this.initEvents()},setAutoScroll:function(){if(this.rendered&&this.autoScroll){var A=this.body||this.el;if(A){A.setOverflow("auto")}}},getKeyMap:function(){if(!this.keyMap){this.keyMap=new Ext.KeyMap(this.el,this.keys)}return this.keyMap},initEvents:function(){if(this.keys){this.getKeyMap()}if(this.draggable){this.initDraggable()}},initDraggable:function(){this.dd=new Ext.Panel.DD(this,typeof this.draggable=="boolean"?null:this.draggable)},beforeEffect:function(){if(this.floating){this.el.beforeAction()}this.el.addClass("x-panel-animated")},afterEffect:function(){this.syncShadow();this.el.removeClass("x-panel-animated")},createEffect:function(B,A,D){var E={scope:D,block:true};if(B===true){E.callback=A;return E}else{if(!B.callback){E.callback=A}else{E.callback=function(){A.call(D);Ext.callback(B.callback,B.scope)}}}return Ext.applyIf(E,B)},collapse:function(B){if(this.collapsed||this.el.hasFxBlock()||this.fireEvent("beforecollapse",this,B)===false){return}var A=B===true||(B!==false&&this.animCollapse);this.beforeEffect();this.onCollapse(A,B);return this},onCollapse:function(A,B){if(A){this[this.collapseEl].slideOut(this.slideAnchor,Ext.apply(this.createEffect(B||true,this.afterCollapse,this),this.collapseDefaults))}else{this[this.collapseEl].hide();this.afterCollapse()}},afterCollapse:function(){this.collapsed=true;this.el.addClass(this.collapsedCls);this.afterEffect();this.fireEvent("collapse",this)},expand:function(B){if(!this.collapsed||this.el.hasFxBlock()||this.fireEvent("beforeexpand",this,B)===false){return}var A=B===true||(B!==false&&this.animCollapse);this.el.removeClass(this.collapsedCls);this.beforeEffect();this.onExpand(A,B);return this},onExpand:function(A,B){if(A){this[this.collapseEl].slideIn(this.slideAnchor,Ext.apply(this.createEffect(B||true,this.afterExpand,this),this.expandDefaults))}else{this[this.collapseEl].show();this.afterExpand()}},afterExpand:function(){this.collapsed=false;this.afterEffect();this.fireEvent("expand",this)},toggleCollapse:function(A){this[this.collapsed?"expand":"collapse"](A);return this},onDisable:function(){if(this.rendered&&this.maskDisabled){this.el.mask()}Ext.Panel.superclass.onDisable.call(this)},onEnable:function(){if(this.rendered&&this.maskDisabled){this.el.unmask()}Ext.Panel.superclass.onEnable.call(this)},onResize:function(A,B){if(A!==undefined||B!==undefined){if(!this.collapsed){if(typeof A=="number"){this.body.setWidth(this.adjustBodyWidth(A-this.getFrameWidth()))}else{if(A=="auto"){this.body.setWidth(A)}}if(typeof B=="number"){this.body.setHeight(this.adjustBodyHeight(B-this.getFrameHeight()))}else{if(B=="auto"){this.body.setHeight(B)}}if(this.disabled&&this.el._mask){this.el._mask.setSize(this.el.dom.clientWidth,this.el.getHeight())}}else{this.queuedBodySize={width:A,height:B};if(!this.queuedExpand&&this.allowQueuedExpand!==false){this.queuedExpand=true;this.on("expand",function(){delete this.queuedExpand;this.onResize(this.queuedBodySize.width,this.queuedBodySize.height);this.doLayout()},this,{single:true})}}this.fireEvent("bodyresize",this,A,B)}this.syncShadow()},adjustBodyHeight:function(A){return A},adjustBodyWidth:function(A){return A},onPosition:function(){this.syncShadow()},getFrameWidth:function(){var B=this.el.getFrameWidth("lr");if(this.frame){var A=this.bwrap.dom.firstChild;B+=(Ext.fly(A).getFrameWidth("l")+Ext.fly(A.firstChild).getFrameWidth("r"));var D=this.bwrap.dom.firstChild.firstChild.firstChild;B+=Ext.fly(D).getFrameWidth("lr")}return B},getFrameHeight:function(){var A=this.el.getFrameWidth("tb");A+=(this.tbar?this.tbar.getHeight():0)+(this.bbar?this.bbar.getHeight():0);if(this.frame){var D=this.el.dom.firstChild;var E=this.bwrap.dom.lastChild;A+=(D.offsetHeight+E.offsetHeight);var B=this.bwrap.dom.firstChild.firstChild.firstChild;A+=Ext.fly(B).getFrameWidth("tb")}else{A+=(this.header?this.header.getHeight():0)+(this.footer?this.footer.getHeight():0)}return A},getInnerWidth:function(){return this.getSize().width-this.getFrameWidth()},getInnerHeight:function(){return this.getSize().height-this.getFrameHeight()},syncShadow:function(){if(this.floating){this.el.sync(true)}},getLayoutTarget:function(){return this.body},setTitle:function(B,A){this.title=B;if(this.header&&this.headerAsText){this.header.child("span").update(B)}if(A){this.setIconClass(A)}this.fireEvent("titlechange",this,B);return this},getUpdater:function(){return this.body.getUpdater()},load:function(){var A=this.body.getUpdater();A.update.apply(A,arguments);return this},beforeDestroy:function(){if(this.header){this.header.removeAllListeners();if(this.headerAsText){Ext.Element.uncache(this.header.child("span"))}}Ext.Element.uncache(this.header,this.tbar,this.bbar,this.footer,this.body,this.bwrap);if(this.tools){for(var B in this.tools){Ext.destroy(this.tools[B])}}if(this.buttons){for(var A in this.buttons){Ext.destroy(this.buttons[A])}}Ext.destroy(this.topToolbar,this.bottomToolbar);Ext.Panel.superclass.beforeDestroy.call(this)},createClasses:function(){this.headerCls=this.baseCls+"-header";this.headerTextCls=this.baseCls+"-header-text";this.bwrapCls=this.baseCls+"-bwrap";this.tbarCls=this.baseCls+"-tbar";this.bodyCls=this.baseCls+"-body";this.bbarCls=this.baseCls+"-bbar";this.footerCls=this.baseCls+"-footer"},createGhost:function(A,F,B){var E=document.createElement("div");E.className="x-panel-ghost "+(A?A:"");if(this.header){E.appendChild(this.el.dom.firstChild.cloneNode(true))}Ext.fly(E.appendChild(document.createElement("ul"))).setHeight(this.bwrap.getHeight());E.style.width=this.el.dom.offsetWidth+"px";if(!B){this.container.dom.appendChild(E)}else{Ext.getDom(B).appendChild(E)}if(F!==false&&this.el.useShim!==false){var D=new Ext.Layer({shadow:false,useDisplay:true,constrain:false},E);D.show();return D}else{return new Ext.Element(E)}},doAutoLoad:function(){var A=this.body.getUpdater();if(this.renderer){A.setRenderer(this.renderer)}A.update(typeof this.autoLoad=="object"?this.autoLoad:{url:this.autoLoad})},getTool:function(A){return this.tools[A]}});Ext.reg("panel",Ext.Panel);Ext.Window=Ext.extend(Ext.Panel,{baseCls:"x-window",resizable:true,draggable:true,closable:true,constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:100,minWidth:200,expandOnShow:true,closeAction:"close",elements:"header,body",collapsible:false,initHidden:true,monitorResize:true,frame:true,floating:true,initComponent:function(){Ext.Window.superclass.initComponent.call(this);this.addEvents("resize","maximize","minimize","restore")},getState:function(){return Ext.apply(Ext.Window.superclass.getState.call(this)||{},this.getBox(true))},onRender:function(B,A){Ext.Window.superclass.onRender.call(this,B,A);if(this.plain){this.el.addClass("x-window-plain")}this.focusEl=this.el.createChild({tag:"a",href:"#",cls:"x-dlg-focus",tabIndex:"-1",html:"&#160;"});this.focusEl.swallowEvent("click",true);this.proxy=this.el.createProxy("x-window-proxy");this.proxy.enableDisplayMode("block");if(this.modal){this.mask=this.container.createChild({cls:"ext-el-mask"},this.el.dom);this.mask.enableDisplayMode("block");this.mask.hide();this.mask.on("click",this.focus,this)}this.initTools()},initEvents:function(){Ext.Window.superclass.initEvents.call(this);if(this.animateTarget){this.setAnimateTarget(this.animateTarget)}if(this.resizable){this.resizer=new Ext.Resizable(this.el,{minWidth:this.minWidth,minHeight:this.minHeight,handles:this.resizeHandles||"all",pinned:true,resizeElement:this.resizerAction});this.resizer.window=this;this.resizer.on("beforeresize",this.beforeResize,this)}if(this.draggable){this.header.addClass("x-window-draggable")}this.el.on("mousedown",this.toFront,this);this.manager=this.manager||Ext.WindowMgr;this.manager.register(this);this.hidden=true;if(this.maximized){this.maximized=false;this.maximize()}if(this.closable){var A=this.getKeyMap();A.on(27,this.onEsc,this);A.disable()}},initDraggable:function(){this.dd=new Ext.Window.DD(this)},onEsc:function(){this[this.closeAction]()},beforeDestroy:function(){if(this.rendered){this.hide();if(this.doAnchor){Ext.EventManager.removeResizeListener(this.doAnchor,this);Ext.EventManager.un(window,"scroll",this.doAnchor,this)}Ext.destroy(this.focusEl,this.resizer,this.dd,this.proxy,this.mask)}Ext.Window.superclass.beforeDestroy.call(this)},onDestroy:function(){if(this.manager){this.manager.unregister(this)}Ext.Window.superclass.onDestroy.call(this)},initTools:function(){if(this.minimizable){this.addTool({id:"minimize",handler:this.minimize.createDelegate(this,[])})}if(this.maximizable){this.addTool({id:"maximize",handler:this.maximize.createDelegate(this,[])});this.addTool({id:"restore",handler:this.restore.createDelegate(this,[]),hidden:true});this.header.on("dblclick",this.toggleMaximize,this)}if(this.closable){this.addTool({id:"close",handler:this[this.closeAction].createDelegate(this,[])})}},resizerAction:function(){var A=this.proxy.getBox();this.proxy.hide();this.window.handleResize(A);return A},beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getFrameHeight()+40);this.resizer.minWidth=Math.max(this.minWidth,this.getFrameWidth()+40);this.resizeBox=this.el.getBox()},updateHandles:function(){if(Ext.isIE&&this.resizer){this.resizer.syncHandleHeight();this.el.repaint()}},handleResize:function(B){var A=this.resizeBox;if(A.x!=B.x||A.y!=B.y){this.updateBox(B)}else{this.setSize(B)}this.focus();this.updateHandles();this.saveState();if(this.layout){this.doLayout()}this.fireEvent("resize",this,B.width,B.height)},focus:function(){var D=this.focusEl,A=this.defaultButton,B=typeof A;if(B!="undefined"){if(B=="number"){D=this.buttons[A]}else{if(B=="string"){D=Ext.getCmp(A)}else{D=A}}}D.focus.defer(10,D)},setAnimateTarget:function(A){A=Ext.get(A);this.animateTarget=A},beforeShow:function(){delete this.el.lastXY;delete this.el.lastLT;if(this.x===undefined||this.y===undefined){var A=this.el.getAlignToXY(this.container,"c-c");var B=this.el.translatePoints(A[0],A[1]);this.x=this.x===undefined?B.left:this.x;this.y=this.y===undefined?B.top:this.y}this.el.setLeftTop(this.x,this.y);if(this.expandOnShow){this.expand(false)}if(this.modal){Ext.getBody().addClass("x-body-masked");this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.mask.show()}},show:function(D,A,B){if(!this.rendered){this.render(Ext.getBody())}if(this.hidden===false){this.toFront();return}if(this.fireEvent("beforeshow",this)===false){return}if(A){this.on("show",A,B,{single:true})}this.hidden=false;if(D!==undefined){this.setAnimateTarget(D)}this.beforeShow();if(this.animateTarget){this.animShow()}else{this.afterShow()}},afterShow:function(){this.proxy.hide();this.el.setStyle("display","block");this.el.show();if(this.maximized){this.fitContainer()}if(Ext.isMac&&Ext.isGecko){this.cascade(this.setAutoScroll)}if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){Ext.EventManager.onWindowResize(this.onWindowResize,this)}this.doConstrain();if(this.layout){this.doLayout()}if(this.keyMap){this.keyMap.enable()}this.toFront();this.updateHandles();this.fireEvent("show",this)},animShow:function(){this.proxy.show();this.proxy.setBox(this.animateTarget.getBox());this.proxy.setOpacity(0);var A=this.getBox(false);A.callback=this.afterShow;A.scope=this;A.duration=0.25;A.easing="easeNone";A.opacity=0.5;A.block=true;this.el.setStyle("display","none");this.proxy.shift(A)},hide:function(D,A,B){if(this.activeGhost){this.hide.defer(100,this,[D,A,B]);return}if(this.hidden||this.fireEvent("beforehide",this)===false){return}if(A){this.on("hide",A,B,{single:true})}this.hidden=true;if(D!==undefined){this.setAnimateTarget(D)}if(this.animateTarget){this.animHide()}else{this.el.hide();this.afterHide()}},afterHide:function(){this.proxy.hide();if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){Ext.EventManager.removeResizeListener(this.onWindowResize,this)}if(this.modal){this.mask.hide();Ext.getBody().removeClass("x-body-masked")}if(this.keyMap){this.keyMap.disable()}this.fireEvent("hide",this)},animHide:function(){this.proxy.setOpacity(0.5);this.proxy.show();var B=this.getBox(false);this.proxy.setBox(B);this.el.hide();var A=this.animateTarget.getBox();A.callback=this.afterHide;A.scope=this;A.duration=0.25;A.easing="easeNone";A.block=true;A.opacity=0;this.proxy.shift(A)},onWindowResize:function(){if(this.maximized){this.fitContainer()}if(this.modal){this.mask.setSize("100%","100%");var A=this.mask.dom.offsetHeight;this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true))}this.doConstrain()},doConstrain:function(){if(this.constrain||this.constrainHeader){var B;if(this.constrain){B={right:this.el.shadowOffset,left:this.el.shadowOffset,bottom:this.el.shadowOffset}}else{var A=this.getSize();B={right:-(A.width-100),bottom:-(A.height-25)}}var D=this.el.getConstrainToXY(this.container,true,B);if(D){this.setPosition(D[0],D[1])}}},ghost:function(A){var D=this.createGhost(A);var B=this.getBox(true);D.setLeftTop(B.x,B.y);D.setWidth(B.width);this.el.hide();this.activeGhost=D;return D},unghost:function(B,A){if(B!==false){this.el.show();this.focus();if(Ext.isMac&&Ext.isGecko){this.cascade(this.setAutoScroll)}}if(A!==false){this.setPosition(this.activeGhost.getLeft(true),this.activeGhost.getTop(true))}this.activeGhost.hide();this.activeGhost.remove();delete this.activeGhost},minimize:function(){this.fireEvent("minimize",this)},close:function(){if(this.fireEvent("beforeclose",this)!==false){this.hide(null,function(){this.fireEvent("close",this);this.destroy()},this)}},maximize:function(){if(!this.maximized){this.expand(false);this.restoreSize=this.getSize();this.restorePos=this.getPosition(true);if(this.maximizable){this.tools.maximize.hide();this.tools.restore.show()}this.maximized=true;this.el.disableShadow();if(this.dd){this.dd.lock()}if(this.collapsible){this.tools.toggle.hide()}this.el.addClass("x-window-maximized");this.container.addClass("x-window-maximized-ct");this.setPosition(0,0);this.fitContainer();this.fireEvent("maximize",this)}},restore:function(){if(this.maximized){this.el.removeClass("x-window-maximized");this.tools.restore.hide();this.tools.maximize.show();this.setPosition(this.restorePos[0],this.restorePos[1]);this.setSize(this.restoreSize.width,this.restoreSize.height);delete this.restorePos;delete this.restoreSize;this.maximized=false;this.el.enableShadow(true);if(this.dd){this.dd.unlock()}if(this.collapsible){this.tools.toggle.show()}this.container.removeClass("x-window-maximized-ct");this.doConstrain();this.fireEvent("restore",this)}},toggleMaximize:function(){this[this.maximized?"restore":"maximize"]()},fitContainer:function(){var A=this.container.getViewSize();this.setSize(A.width,A.height)},setZIndex:function(A){if(this.modal){this.mask.setStyle("z-index",A)}this.el.setZIndex(++A);A+=5;if(this.resizer){this.resizer.proxy.setStyle("z-index",++A)}this.lastZIndex=A},alignTo:function(B,A,D){var E=this.el.getAlignToXY(B,A,D);this.setPagePosition(E[0],E[1]);return this},anchorTo:function(D,F,E,B){if(this.doAnchor){Ext.EventManager.removeResizeListener(this.doAnchor,this);Ext.EventManager.un(window,"scroll",this.doAnchor,this)}this.doAnchor=function(){this.alignTo(D,F,E)};Ext.EventManager.onWindowResize(this.doAnchor,this);var A=typeof B;if(A!="undefined"){Ext.EventManager.on(window,"scroll",this.doAnchor,this,{buffer:A=="number"?B:50})}this.doAnchor();return this},toFront:function(A){if(this.manager.bringToFront(this)){if(!A||!A.getTarget().focus){this.focus()}}return this},setActive:function(A){if(A){if(!this.maximized){this.el.enableShadow(true)}this.fireEvent("activate",this)}else{this.el.disableShadow();this.fireEvent("deactivate",this)}},toBack:function(){this.manager.sendToBack(this);return this},center:function(){var A=this.el.getAlignToXY(this.container,"c-c");this.setPagePosition(A[0],A[1]);return this}});Ext.reg("window",Ext.Window);Ext.Window.DD=function(A){this.win=A;Ext.Window.DD.superclass.constructor.call(this,A.el.id,"WindowDD-"+A.id);this.setHandleElId(A.header.id);this.scroll=false};Ext.extend(Ext.Window.DD,Ext.dd.DD,{moveOnly:true,headerOffsets:[100,25],startDrag:function(){var A=this.win;this.proxy=A.ghost();if(A.constrain!==false){var D=A.el.shadowOffset;this.constrainTo(A.container,{right:D,left:D,bottom:D})}else{if(A.constrainHeader!==false){var B=this.proxy.getSize();this.constrainTo(A.container,{right:-(B.width-this.headerOffsets[0]),bottom:-(B.height-this.headerOffsets[1])})}}},b4Drag:Ext.emptyFn,onDrag:function(A){this.alignElWithMouse(this.proxy,A.getPageX(),A.getPageY())},endDrag:function(A){this.win.unghost();this.win.saveState()}});Ext.WindowGroup=function(){var G={};var E=[];var F=null;var D=function(J,I){return(!J._lastAccess||J._lastAccess<I._lastAccess)?-1:1};var H=function(){var K=E,I=K.length;if(I>0){K.sort(D);var J=K[0].manager.zseed;for(var L=0;L<I;L++){var M=K[L];if(M&&!M.hidden){M.setZIndex(J+(L*10))}}}A()};var B=function(I){if(I!=F){if(F){F.setActive(false)}F=I;if(I){I.setActive(true)}}};var A=function(){for(var I=E.length-1;I>=0;--I){if(!E[I].hidden){B(E[I]);return}}B(null)};return{zseed:9000,register:function(I){G[I.id]=I;E.push(I);I.on("hide",A)},unregister:function(I){delete G[I.id];I.un("hide",A);E.remove(I)},get:function(I){return typeof I=="object"?I:G[I]},bringToFront:function(I){I=this.get(I);if(I!=F){I._lastAccess=new Date().getTime();H();return true}return false},sendToBack:function(I){I=this.get(I);I._lastAccess=-(new Date().getTime());H();return I},hideAll:function(){for(var I in G){if(G[I]&&typeof G[I]!="function"&&G[I].isVisible()){G[I].hide()}}},getActive:function(){return F},getBy:function(K,J){var L=[];for(var I=E.length-1;I>=0;--I){var M=E[I];if(K.call(J||M,M)!==false){L.push(M)}}return L},each:function(J,I){for(var K in G){if(G[K]&&typeof G[K]!="function"){if(J.call(I||G[K],G[K])===false){return}}}}}};Ext.WindowMgr=new Ext.WindowGroup();Ext.dd.PanelProxy=function(A,B){this.panel=A;this.id=this.panel.id+"-ddproxy";Ext.apply(this,B)};Ext.dd.PanelProxy.prototype={insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){if(this.ghost){if(this.proxy){this.proxy.remove();delete this.proxy}this.panel.el.dom.style.display="";this.ghost.remove();delete this.ghost}},show:function(){if(!this.ghost){this.ghost=this.panel.createGhost(undefined,undefined,Ext.getBody());this.ghost.setXY(this.panel.el.getXY());if(this.insertProxy){this.proxy=this.panel.el.insertSibling({cls:"x-panel-dd-spacer"});this.proxy.setSize(this.panel.getSize())}this.panel.el.dom.style.display="none"}},repair:function(B,D,A){this.hide();if(typeof D=="function"){D.call(A||this)}},moveProxy:function(A,B){if(this.proxy){A.insertBefore(this.proxy.dom,B)}}};Ext.Panel.DD=function(B,A){this.panel=B;this.dragData={panel:B};this.proxy=new Ext.dd.PanelProxy(B,A);Ext.Panel.DD.superclass.constructor.call(this,B.el,A);var D=B.header;if(D){this.setHandleElId(D.id)}(D?D:this.panel.body).setStyle("cursor","move");this.scroll=false};Ext.extend(Ext.Panel.DD,Ext.dd.DragSource,{showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(A,B){this.proxy.show()},b4MouseDown:function(B){var A=B.getPageX();var D=B.getPageY();this.autoOffset(A,D)},onInitDrag:function(A,B){this.onStartDrag(A,B);return true},createFrame:Ext.emptyFn,getDragEl:function(A){return this.proxy.ghost.dom},endDrag:function(A){this.proxy.hide();this.panel.saveState()},autoOffset:function(A,B){A-=this.startPageX;B-=this.startPageY;this.setDelta(A,B)}});Ext.state.Provider=function(){this.addEvents("statechange");this.state={};Ext.state.Provider.superclass.constructor.call(this)};Ext.extend(Ext.state.Provider,Ext.util.Observable,{get:function(B,A){return typeof this.state[B]=="undefined"?A:this.state[B]},clear:function(A){delete this.state[A];this.fireEvent("statechange",this,A,null)},set:function(A,B){this.state[A]=B;this.fireEvent("statechange",this,A,B)},decodeValue:function(A){var K=/^(a|n|d|b|s|o)\:(.*)$/;var D=K.exec(unescape(A));if(!D||!D[1]){return}var G=D[1];var I=D[2];switch(G){case"n":return parseFloat(I);case"d":return new Date(Date.parse(I));case"b":return(I=="1");case"a":var H=[];var J=I.split("^");for(var B=0,E=J.length;B<E;B++){H.push(this.decodeValue(J[B]))}return H;case"o":var H={};var J=I.split("^");for(var B=0,E=J.length;B<E;B++){var F=J[B].split("=");H[F[0]]=this.decodeValue(F[1])}return H;default:return I}},encodeValue:function(D){var B;if(typeof D=="number"){B="n:"+D}else{if(typeof D=="boolean"){B="b:"+(D?"1":"0")}else{if(Ext.isDate(D)){B="d:"+D.toGMTString()}else{if(Ext.isArray(D)){var G="";for(var F=0,A=D.length;F<A;F++){G+=this.encodeValue(D[F]);if(F!=A-1){G+="^"}}B="a:"+G}else{if(typeof D=="object"){var G="";for(var E in D){if(typeof D[E]!="function"&&D[E]!==undefined){G+=E+"="+this.encodeValue(D[E])+"^"}}B="o:"+G.substring(0,G.length-1)}else{B="s:"+D}}}}}return escape(B)}});Ext.state.Manager=function(){var A=new Ext.state.Provider();return{setProvider:function(B){A=B},get:function(D,B){return A.get(D,B)},set:function(B,D){A.set(B,D)},clear:function(B){A.clear(B)},getProvider:function(){return A}}}();Ext.state.CookieProvider=function(A){Ext.state.CookieProvider.superclass.constructor.call(this);this.path="/";this.expires=new Date(new Date().getTime()+(1000*60*60*24*7));this.domain=null;this.secure=false;Ext.apply(this,A);this.state=this.readCookies()};Ext.extend(Ext.state.CookieProvider,Ext.state.Provider,{set:function(A,B){if(typeof B=="undefined"||B===null){this.clear(A);return}this.setCookie(A,B);Ext.state.CookieProvider.superclass.set.call(this,A,B)},clear:function(A){this.clearCookie(A);Ext.state.CookieProvider.superclass.clear.call(this,A)},readCookies:function(){var D={};var G=document.cookie+";";var B=/\s?(.*?)=(.*?);/g;var F;while((F=B.exec(G))!=null){var A=F[1];var E=F[2];if(A&&A.substring(0,3)=="ys-"){D[A.substr(3)]=this.decodeValue(E)}}return D},setCookie:function(A,B){document.cookie="ys-"+A+"="+this.encodeValue(B)+((this.expires==null)?"":("; expires="+this.expires.toGMTString()))+((this.path==null)?"":("; path="+this.path))+((this.domain==null)?"":("; domain="+this.domain))+((this.secure==true)?"; secure":"")},clearCookie:function(A){document.cookie="ys-"+A+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+((this.path==null)?"":("; path="+this.path))+((this.domain==null)?"":("; domain="+this.domain))+((this.secure==true)?"; secure":"")}});Ext.DataView=Ext.extend(Ext.BoxComponent,{selectedClass:"x-view-selected",emptyText:"",deferEmptyText:true,trackOver:false,last:false,initComponent:function(){Ext.DataView.superclass.initComponent.call(this);if(typeof this.tpl=="string"||Ext.isArray(this.tpl)){this.tpl=new Ext.XTemplate(this.tpl)}this.addEvents("beforeclick","click","mouseenter","mouseleave","containerclick","dblclick","contextmenu","selectionchange","beforeselect");this.all=new Ext.CompositeElementLite();this.selected=new Ext.CompositeElementLite()},onRender:function(){if(!this.el){this.el=document.createElement("div");this.el.id=this.id}Ext.DataView.superclass.onRender.apply(this,arguments)},afterRender:function(){Ext.DataView.superclass.afterRender.call(this);this.el.on({click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu,scope:this});if(this.overClass||this.trackOver){this.el.on({mouseover:this.onMouseOver,mouseout:this.onMouseOut,scope:this})}if(this.store){this.setStore(this.store,true)}},refresh:function(){this.clearSelections(false,true);this.el.update("");var A=this.store.getRange();if(A.length<1){if(!this.deferEmptyText||this.hasSkippedEmptyText){this.el.update(this.emptyText)}this.all.clear()}else{this.tpl.overwrite(this.el,this.collectData(A,0));this.all.fill(Ext.query(this.itemSelector,this.el.dom));this.updateIndexes(0)}this.hasSkippedEmptyText=true},prepareData:function(A){return A},collectData:function(B,F){var E=[];for(var D=0,A=B.length;D<A;D++){E[E.length]=this.prepareData(B[D].data,F+D,B[D])}return E},bufferRender:function(A){var B=document.createElement("div");this.tpl.overwrite(B,this.collectData(A));return Ext.query(this.itemSelector,B)},onUpdate:function(G,A){var B=this.store.indexOf(A);var F=this.isSelected(B);var D=this.all.elements[B];var E=this.bufferRender([A],B)[0];this.all.replaceElement(B,E,true);if(F){this.selected.replaceElement(D,E);this.all.item(B).addClass(this.selectedClass)}this.updateIndexes(B,B)},onAdd:function(F,D,E){if(this.all.getCount()==0){this.refresh();return}var B=this.bufferRender(D,E),G,A=this.all.elements;if(E<this.all.getCount()){G=this.all.item(E).insertSibling(B,"before",true);A.splice.apply(A,[E,0].concat(B))}else{G=this.all.last().insertSibling(B,"after",true);A.push.apply(A,B)}this.updateIndexes(E)},onRemove:function(D,A,B){this.deselect(B);this.all.removeElement(B,true);this.updateIndexes(B);if(this.store.getCount()==0){this.refresh()}},refreshNode:function(A){this.onUpdate(this.store,this.store.getAt(A))},updateIndexes:function(E,D){var B=this.all.elements;E=E||0;D=D||((D===0)?0:(B.length-1));for(var A=E;A<=D;A++){B[A].viewIndex=A}},getStore:function(){return this.store},setStore:function(A,B){if(!B&&this.store){this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("datachanged",this.refresh,this);this.store.un("add",this.onAdd,this);this.store.un("remove",this.onRemove,this);this.store.un("update",this.onUpdate,this);this.store.un("clear",this.refresh,this)}if(A){A=Ext.StoreMgr.lookup(A);A.on("beforeload",this.onBeforeLoad,this);A.on("datachanged",this.refresh,this);A.on("add",this.onAdd,this);A.on("remove",this.onRemove,this);A.on("update",this.onUpdate,this);A.on("clear",this.refresh,this)}this.store=A;if(A){this.refresh()}},findItemFromChild:function(A){return Ext.fly(A).findParent(this.itemSelector,this.el)},onClick:function(D){var B=D.getTarget(this.itemSelector,this.el);if(B){var A=this.indexOf(B);if(this.onItemClick(B,A,D)!==false){this.fireEvent("click",this,A,B,D)}}else{if(this.fireEvent("containerclick",this,D)!==false){this.clearSelections()}}},onContextMenu:function(B){var A=B.getTarget(this.itemSelector,this.el);if(A){this.fireEvent("contextmenu",this,this.indexOf(A),A,B)}},onDblClick:function(B){var A=B.getTarget(this.itemSelector,this.el);if(A){this.fireEvent("dblclick",this,this.indexOf(A),A,B)}},onMouseOver:function(B){var A=B.getTarget(this.itemSelector,this.el);if(A&&A!==this.lastItem){this.lastItem=A;Ext.fly(A).addClass(this.overClass);this.fireEvent("mouseenter",this,this.indexOf(A),A,B)}},onMouseOut:function(A){if(this.lastItem){if(!A.within(this.lastItem,true,true)){Ext.fly(this.lastItem).removeClass(this.overClass);this.fireEvent("mouseleave",this,this.indexOf(this.lastItem),this.lastItem,A);delete this.lastItem}}},onItemClick:function(B,A,D){if(this.fireEvent("beforeclick",this,A,B,D)===false){return false}if(this.multiSelect){this.doMultiSelection(B,A,D);D.preventDefault()}else{if(this.singleSelect){this.doSingleSelection(B,A,D);D.preventDefault()}}return true},doSingleSelection:function(B,A,D){if(D.ctrlKey&&this.isSelected(A)){this.deselect(A)}else{this.select(A,false)}},doMultiSelection:function(D,A,E){if(E.shiftKey&&this.last!==false){var B=this.last;this.selectRange(B,A,E.ctrlKey);this.last=B}else{if((E.ctrlKey||this.simpleSelect)&&this.isSelected(A)){this.deselect(A)}else{this.select(A,E.ctrlKey||E.shiftKey||this.simpleSelect)}}},getSelectionCount:function(){return this.selected.getCount()},getSelectedNodes:function(){return this.selected.elements},getSelectedIndexes:function(){var B=[],E=this.selected.elements;for(var D=0,A=E.length;D<A;D++){B.push(E[D].viewIndex)}return B},getSelectedRecords:function(){var E=[],D=this.selected.elements;for(var B=0,A=D.length;B<A;B++){E[E.length]=this.store.getAt(D[B].viewIndex)}return E},getRecords:function(B){var F=[],E=B;for(var D=0,A=E.length;D<A;D++){F[F.length]=this.store.getAt(E[D].viewIndex)}return F},getRecord:function(A){return this.store.getAt(A.viewIndex)},clearSelections:function(A,B){if((this.multiSelect||this.singleSelect)&&this.selected.getCount()>0){if(!B){this.selected.removeClass(this.selectedClass)}this.selected.clear();this.last=false;if(!A){this.fireEvent("selectionchange",this,this.selected.elements)}}},isSelected:function(A){return this.selected.contains(this.getNode(A))},deselect:function(A){if(this.isSelected(A)){A=this.getNode(A);this.selected.removeElement(A);if(this.last==A.viewIndex){this.last=false}Ext.fly(A).removeClass(this.selectedClass);this.fireEvent("selectionchange",this,this.selected.elements)}},select:function(E,G,B){if(Ext.isArray(E)){if(!G){this.clearSelections(true)}for(var D=0,A=E.length;D<A;D++){this.select(E[D],true,true)}if(!B){this.fireEvent("selectionchange",this,this.selected.elements)}}else{var F=this.getNode(E);if(!G){this.clearSelections(true)}if(F&&!this.isSelected(F)){if(this.fireEvent("beforeselect",this,F,this.selected.elements)!==false){Ext.fly(F).addClass(this.selectedClass);this.selected.add(F);this.last=F.viewIndex;if(!B){this.fireEvent("selectionchange",this,this.selected.elements)}}}}},selectRange:function(D,A,B){if(!B){this.clearSelections(true)}this.select(this.getNodes(D,A),true)},getNode:function(A){if(typeof A=="string"){return document.getElementById(A)}else{if(typeof A=="number"){return this.all.elements[A]}}return A},getNodes:function(F,A){var E=this.all.elements;F=F||0;A=typeof A=="undefined"?Math.max(E.length-1,0):A;var B=[],D;if(F<=A){for(D=F;D<=A&&E[D];D++){B.push(E[D])}}else{for(D=F;D>=A&&E[D];D--){B.push(E[D])}}return B},indexOf:function(A){A=this.getNode(A);if(typeof A.viewIndex=="number"){return A.viewIndex}return this.all.indexOf(A)},onBeforeLoad:function(){if(this.loadingText){this.clearSelections(false,true);this.el.update('<div class="loading-indicator">'+this.loadingText+"</div>");this.all.clear()}},onDestroy:function(){Ext.DataView.superclass.onDestroy.call(this);this.setStore(null)}});Ext.reg("dataview",Ext.DataView);Ext.ColorPalette=function(A){Ext.ColorPalette.superclass.constructor.call(this,A);this.addEvents("select");if(this.handler){this.on("select",this.handler,this.scope,true)}};Ext.extend(Ext.ColorPalette,Ext.Component,{itemCls:"x-color-palette",value:null,clickEvent:"click",ctype:"Ext.ColorPalette",allowReselect:false,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],onRender:function(B,A){var D=this.tpl||new Ext.XTemplate('<tpl for="."><a href="#" class="color-{.}" hidefocus="on"><em><span style="background:#{.}" unselectable="on">&#160;</span></em></a></tpl>');var E=document.createElement("div");E.id=this.getId();E.className=this.itemCls;D.overwrite(E,this.colors);B.dom.insertBefore(E,A);this.el=Ext.get(E);this.el.on(this.clickEvent,this.handleClick,this,{delegate:"a"});if(this.clickEvent!="click"){this.el.on("click",Ext.emptyFn,this,{delegate:"a",preventDefault:true})}},afterRender:function(){Ext.ColorPalette.superclass.afterRender.call(this);if(this.value){var A=this.value;this.value=null;this.select(A)}},handleClick:function(B,A){B.preventDefault();if(!this.disabled){var D=A.className.match(/(?:^|\s)color-(.{6})(?:\s|$)/)[1];this.select(D.toUpperCase())}},select:function(A){A=A.replace("#","");if(A!=this.value||this.allowReselect){var B=this.el;if(this.value){B.child("a.color-"+this.value).removeClass("x-color-palette-sel")}B.child("a.color-"+A).addClass("x-color-palette-sel");this.value=A;this.fireEvent("select",this,A)}}});Ext.reg("colorpalette",Ext.ColorPalette);Ext.DatePicker=Ext.extend(Ext.Component,{todayText:"Today",okText:"&#160;OK&#160;",cancelText:"Cancel",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",format:"m/d/y",disabledDaysText:"Disabled",disabledDatesText:"Disabled",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",startDay:0,showToday:true,initComponent:function(){Ext.DatePicker.superclass.initComponent.call(this);this.value=this.value?this.value.clearTime():new Date().clearTime();this.addEvents("select");if(this.handler){this.on("select",this.handler,this.scope||this)}this.initDisabledDays()},initDisabledDays:function(){if(!this.disabledDatesRE&&this.disabledDates){var A=this.disabledDates;var D="(?:";for(var B=0;B<A.length;B++){D+=A[B];if(B!=A.length-1){D+="|"}}this.disabledDatesRE=new RegExp(D+")")}},setDisabledDates:function(A){if(Ext.isArray(A)){this.disabledDates=A;this.disabledDatesRE=null}else{this.disabledDatesRE=A}this.initDisabledDays();this.update(this.value,true)},setDisabledDays:function(A){this.disabledDays=A;this.update(this.value,true)},setMinDate:function(A){this.minDate=A;this.update(this.value,true)},setMaxDate:function(A){this.maxDate=A;this.update(this.value,true)},setValue:function(B){var A=this.value;this.value=B.clearTime(true);if(this.el){this.update(this.value)}},getValue:function(){return this.value},focus:function(){if(this.el){this.update(this.activeDate)}},onEnable:function(A){Ext.DatePicker.superclass.onEnable.call(this);this.doDisabled(false);this.update(A?this.value:this.activeDate);if(Ext.isIE){this.el.repaint()}},onDisable:function(){Ext.DatePicker.superclass.onDisable.call(this);this.doDisabled(true);if(Ext.isIE&&!Ext.isIE8){Ext.each([].concat(this.textNodes,this.el.query("th span")),function(A){Ext.fly(A).repaint()})}},doDisabled:function(A){this.keyNav[A?"disable":"enable"](A);this.leftClickRpt.setDisabled(A);this.rightClickRpt.setDisabled(A);if(this.showToday){this.todayKeyListener[A?"disable":"enable"](A);this.todayBtn.setDisabled(A)}},onRender:function(E,B){var A=['<table cellspacing="0">','<tr><td class="x-date-left"><a href="#" title="',this.prevText,'">&#160;</a></td><td class="x-date-middle" align="center"></td><td class="x-date-right"><a href="#" title="',this.nextText,'">&#160;</a></td></tr>','<tr><td colspan="3"><table class="x-date-inner" cellspacing="0"><thead><tr>'];var D=this.dayNames;for(var G=0;G<7;G++){var I=this.startDay+G;if(I>6){I=I-7}A.push("<th><span>",D[I].substr(0,1),"</span></th>")}A[A.length]="</tr></thead><tbody><tr>";for(var G=0;G<42;G++){if(G%7==0&&G!=0){A[A.length]="</tr><tr>"}A[A.length]='<td><a href="#" hidefocus="on" class="x-date-date" tabIndex="1"><em><span></span></em></a></td>'}A.push("</tr></tbody></table></td></tr>",this.showToday?'<tr><td colspan="3" class="x-date-bottom" align="center"></td></tr>':"",'</table><div class="x-date-mp"></div>');var H=document.createElement("div");H.className="x-date-picker";H.innerHTML=A.join("");E.dom.insertBefore(H,B);this.el=Ext.get(H);this.eventEl=Ext.get(H.firstChild);this.leftClickRpt=new Ext.util.ClickRepeater(this.el.child("td.x-date-left a"),{handler:this.showPrevMonth,scope:this,preventDefault:true,stopDefault:true});this.rightClickRpt=new Ext.util.ClickRepeater(this.el.child("td.x-date-right a"),{handler:this.showNextMonth,scope:this,preventDefault:true,stopDefault:true});this.eventEl.on("mousewheel",this.handleMouseWheel,this);this.monthPicker=this.el.down("div.x-date-mp");this.monthPicker.enableDisplayMode("block");this.keyNav=new Ext.KeyNav(this.eventEl,{left:function(J){J.ctrlKey?this.showPrevMonth():this.update(this.activeDate.add("d",-1))},right:function(J){J.ctrlKey?this.showNextMonth():this.update(this.activeDate.add("d",1))},up:function(J){J.ctrlKey?this.showNextYear():this.update(this.activeDate.add("d",-7))},down:function(J){J.ctrlKey?this.showPrevYear():this.update(this.activeDate.add("d",7))},pageUp:function(J){this.showNextMonth()},pageDown:function(J){this.showPrevMonth()},enter:function(J){J.stopPropagation();return true},scope:this});this.eventEl.on("click",this.handleDateClick,this,{delegate:"a.x-date-date"});this.el.unselectable();this.cells=this.el.select("table.x-date-inner tbody td");this.textNodes=this.el.query("table.x-date-inner tbody span");this.mbtn=new Ext.Button({text:"&#160;",tooltip:this.monthYearText,renderTo:this.el.child("td.x-date-middle",true)});this.mbtn.on("click",this.showMonthPicker,this);this.mbtn.el.child(this.mbtn.menuClassTarget).addClass("x-btn-with-menu");if(this.showToday){this.todayKeyListener=this.eventEl.addKeyListener(Ext.EventObject.SPACE,this.selectToday,this);var F=(new Date()).dateFormat(this.format);this.todayBtn=new Ext.Button({renderTo:this.el.child("td.x-date-bottom",true),text:String.format(this.todayText,F),tooltip:String.format(this.todayTip,F),handler:this.selectToday,scope:this})}if(Ext.isIE){this.el.repaint()}this.onEnable(true)},createMonthPicker:function(){if(!this.monthPicker.dom.firstChild){var A=['<table border="0" cellspacing="0">'];for(var B=0;B<6;B++){A.push('<tr><td class="x-date-mp-month"><a href="#">',Date.getShortMonthName(B),"</a></td>",'<td class="x-date-mp-month x-date-mp-sep"><a href="#">',Date.getShortMonthName(B+6),"</a></td>",B==0?'<td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-prev"></a></td><td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-next"></a></td></tr>':'<td class="x-date-mp-year"><a href="#"></a></td><td class="x-date-mp-year"><a href="#"></a></td></tr>')}A.push('<tr class="x-date-mp-btns"><td colspan="4"><button type="button" class="x-date-mp-ok">',this.okText,'</button><button type="button" class="x-date-mp-cancel">',this.cancelText,"</button></td></tr>","</table>");this.monthPicker.update(A.join(""));this.monthPicker.on("click",this.onMonthClick,this);this.monthPicker.on("dblclick",this.onMonthDblClick,this);this.mpMonths=this.monthPicker.select("td.x-date-mp-month");this.mpYears=this.monthPicker.select("td.x-date-mp-year");this.mpMonths.each(function(D,E,F){F+=1;if((F%2)==0){D.dom.xmonth=5+Math.round(F*0.5)}else{D.dom.xmonth=Math.round((F-1)*0.5)}})}},showMonthPicker:function(){if(!this.disabled){this.createMonthPicker();var A=this.el.getSize();this.monthPicker.setSize(A);this.monthPicker.child("table").setSize(A);this.mpSelMonth=(this.activeDate||this.value).getMonth();this.updateMPMonth(this.mpSelMonth);this.mpSelYear=(this.activeDate||this.value).getFullYear();this.updateMPYear(this.mpSelYear);this.monthPicker.slideIn("t",{duration:0.2})}},updateMPYear:function(F){this.mpyear=F;var D=this.mpYears.elements;for(var B=1;B<=10;B++){var E=D[B-1],A;if((B%2)==0){A=F+Math.round(B*0.5);E.firstChild.innerHTML=A;E.xyear=A}else{A=F-(5-Math.round(B*0.5));E.firstChild.innerHTML=A;E.xyear=A}this.mpYears.item(B-1)[A==this.mpSelYear?"addClass":"removeClass"]("x-date-mp-sel")}},updateMPMonth:function(A){this.mpMonths.each(function(B,D,E){B[B.dom.xmonth==A?"addClass":"removeClass"]("x-date-mp-sel")})},selectMPMonth:function(A){},onMonthClick:function(E,B){E.stopEvent();var D=new Ext.Element(B),A;if(D.is("button.x-date-mp-cancel")){this.hideMonthPicker()}else{if(D.is("button.x-date-mp-ok")){var F=new Date(this.mpSelYear,this.mpSelMonth,(this.activeDate||this.value).getDate());if(F.getMonth()!=this.mpSelMonth){F=new Date(this.mpSelYear,this.mpSelMonth,1).getLastDateOfMonth()}this.update(F);this.hideMonthPicker()}else{if(A=D.up("td.x-date-mp-month",2)){this.mpMonths.removeClass("x-date-mp-sel");A.addClass("x-date-mp-sel");this.mpSelMonth=A.dom.xmonth}else{if(A=D.up("td.x-date-mp-year",2)){this.mpYears.removeClass("x-date-mp-sel");A.addClass("x-date-mp-sel");this.mpSelYear=A.dom.xyear}else{if(D.is("a.x-date-mp-prev")){this.updateMPYear(this.mpyear-10)}else{if(D.is("a.x-date-mp-next")){this.updateMPYear(this.mpyear+10)}}}}}}},onMonthDblClick:function(E,B){E.stopEvent();var D=new Ext.Element(B),A;if(A=D.up("td.x-date-mp-month",2)){this.update(new Date(this.mpSelYear,A.dom.xmonth,(this.activeDate||this.value).getDate()));this.hideMonthPicker()}else{if(A=D.up("td.x-date-mp-year",2)){this.update(new Date(A.dom.xyear,this.mpSelMonth,(this.activeDate||this.value).getDate()));this.hideMonthPicker()}}},hideMonthPicker:function(A){if(this.monthPicker){if(A===true){this.monthPicker.hide()}else{this.monthPicker.slideOut("t",{duration:0.2})}}},showPrevMonth:function(A){this.update(this.activeDate.add("mo",-1))},showNextMonth:function(A){this.update(this.activeDate.add("mo",1))},showPrevYear:function(){this.update(this.activeDate.add("y",-1))},showNextYear:function(){this.update(this.activeDate.add("y",1))},handleMouseWheel:function(A){A.stopEvent();if(!this.disabled){var B=A.getWheelDelta();if(B>0){this.showPrevMonth()}else{if(B<0){this.showNextMonth()}}}},handleDateClick:function(B,A){B.stopEvent();if(!this.disabled&&A.dateValue&&!Ext.fly(A.parentNode).hasClass("x-date-disabled")){this.setValue(new Date(A.dateValue));this.fireEvent("select",this,this.value)}},selectToday:function(){if(this.todayBtn&&!this.todayBtn.disabled){this.setValue(new Date().clearTime());this.fireEvent("select",this,this.value)}},update:function(h,X){var A=this.activeDate,N=this.isVisible();this.activeDate=h;if(!X&&A&&this.el){var M=h.getTime();if(A.getMonth()==h.getMonth()&&A.getFullYear()==h.getFullYear()){this.cells.removeClass("x-date-selected");this.cells.each(function(l){if(l.dom.firstChild.dateValue==M){l.addClass("x-date-selected");if(N){setTimeout(function(){try{l.dom.firstChild.focus()}catch(m){}},50)}return false}});return}}var I=h.getDaysInMonth();var O=h.getFirstDateOfMonth();var F=O.getDay()-this.startDay;if(F<0){F+=7}var Y=h.add("mo",-1);var G=Y.getDaysInMonth()-F;var E=this.cells.elements;var P=this.textNodes;I+=F;var V=86400000;var a=(new Date(Y.getFullYear(),Y.getMonth(),G)).clearTime();var Z=new Date().clearTime().getTime();var S=h.clearTime().getTime();var R=this.minDate?this.minDate.clearTime():Number.NEGATIVE_INFINITY;var U=this.maxDate?this.maxDate.clearTime():Number.POSITIVE_INFINITY;var g=this.disabledDatesRE;var Q=this.disabledDatesText;var k=this.disabledDays?this.disabledDays.join(""):false;var c=this.disabledDaysText;var W=this.format;if(this.showToday){var K=new Date().clearTime();var D=(K<R||K>U||(g&&W&&g.test(K.dateFormat(W)))||(k&&k.indexOf(K.getDay())!=-1));if(!this.disabled){this.todayBtn.setDisabled(D);this.todayKeyListener[D?"disable":"enable"]()}}var J=function(p,l){l.title="";var m=a.getTime();l.firstChild.dateValue=m;if(m==Z){l.className+=" x-date-today";l.title=p.todayText}if(m==S){l.className+=" x-date-selected";if(N){setTimeout(function(){try{l.firstChild.focus()}catch(q){}},50)}}if(m<R){l.className=" x-date-disabled";l.title=p.minText;return}if(m>U){l.className=" x-date-disabled";l.title=p.maxText;return}if(k){if(k.indexOf(a.getDay())!=-1){l.title=c;l.className=" x-date-disabled"}}if(g&&W){var o=a.dateFormat(W);if(g.test(o)){l.title=Q.replace("%0",o);l.className=" x-date-disabled"}}};var T=0;for(;T<F;T++){P[T].innerHTML=(++G);a.setDate(a.getDate()+1);E[T].className="x-date-prevday";J(this,E[T])}for(;T<I;T++){var B=T-F+1;P[T].innerHTML=(B);a.setDate(a.getDate()+1);E[T].className="x-date-active";J(this,E[T])}var j=0;for(;T<42;T++){P[T].innerHTML=(++j);a.setDate(a.getDate()+1);E[T].className="x-date-nextday";J(this,E[T])}this.mbtn.setText(this.monthNames[h.getMonth()]+" "+h.getFullYear());if(!this.internalRender){var H=this.el.dom.firstChild;var L=H.offsetWidth;this.el.setWidth(L+this.el.getBorderWidth("lr"));Ext.fly(H).setWidth(L);this.internalRender=true;if(Ext.isOpera&&!this.secondPass){H.rows[0].cells[1].style.width=(L-(H.rows[0].cells[0].offsetWidth+H.rows[0].cells[2].offsetWidth))+"px";this.secondPass=true;this.update.defer(10,this,[h])}}},beforeDestroy:function(){if(this.rendered){this.keyNav.disable();this.keyNav=null;Ext.destroy(this.leftClickRpt,this.rightClickRpt,this.monthPicker,this.eventEl,this.mbtn,this.todayBtn)}}});Ext.reg("datepicker",Ext.DatePicker);Ext.TabPanel=Ext.extend(Ext.Panel,{monitorResize:true,deferredRender:true,tabWidth:120,minTabWidth:30,resizeTabs:false,enableTabScroll:false,scrollIncrement:0,scrollRepeatInterval:400,scrollDuration:0.35,animScroll:true,tabPosition:"top",baseCls:"x-tab-panel",autoTabs:false,autoTabSelector:"div.x-tab",activeTab:null,tabMargin:2,plain:false,wheelIncrement:20,idDelimiter:"__",itemCls:"x-tab-item",elements:"body",headerAsText:false,frame:false,hideBorders:true,initComponent:function(){this.frame=false;Ext.TabPanel.superclass.initComponent.call(this);this.addEvents("beforetabchange","tabchange","contextmenu");this.setLayout(new Ext.layout.CardLayout({deferredRender:this.deferredRender}));if(this.tabPosition=="top"){this.elements+=",header";this.stripTarget="header"}else{this.elements+=",footer";this.stripTarget="footer"}if(!this.stack){this.stack=Ext.TabPanel.AccessStack()}this.initItems()},render:function(){Ext.TabPanel.superclass.render.apply(this,arguments);if(this.activeTab!==undefined){var A=this.activeTab;delete this.activeTab;this.setActiveTab(A)}},onRender:function(D,A){Ext.TabPanel.superclass.onRender.call(this,D,A);if(this.plain){var G=this.tabPosition=="top"?"header":"footer";this[G].addClass("x-tab-panel-"+G+"-plain")}var B=this[this.stripTarget];this.stripWrap=B.createChild({cls:"x-tab-strip-wrap",cn:{tag:"ul",cls:"x-tab-strip x-tab-strip-"+this.tabPosition}});var F=(this.tabPosition=="bottom"?this.stripWrap:null);this.stripSpacer=B.createChild({cls:"x-tab-strip-spacer"},F);this.strip=new Ext.Element(this.stripWrap.dom.firstChild);this.edge=this.strip.createChild({tag:"li",cls:"x-tab-edge"});this.strip.createChild({cls:"x-clear"});this.body.addClass("x-tab-panel-body-"+this.tabPosition);if(!this.itemTpl){var E=new Ext.Template('<li class="{cls}" id="{id}"><a class="x-tab-strip-close" onclick="return false;"></a>','<a class="x-tab-right" href="#" onclick="return false;"><em class="x-tab-left">','<span class="x-tab-strip-inner"><span class="x-tab-strip-text {iconCls}">{text}</span></span>',"</em></a></li>");E.disableFormats=true;E.compile();Ext.TabPanel.prototype.itemTpl=E}this.items.each(this.initTab,this)},afterRender:function(){Ext.TabPanel.superclass.afterRender.call(this);if(this.autoTabs){this.readTabs(false)}},initEvents:function(){Ext.TabPanel.superclass.initEvents.call(this);this.on("add",this.onAdd,this);this.on("remove",this.onRemove,this);this.strip.on("mousedown",this.onStripMouseDown,this);this.strip.on("contextmenu",this.onStripContextMenu,this);if(this.enableTabScroll){this.strip.on("mousewheel",this.onWheel,this)}},findTargets:function(D){var B=null;var A=D.getTarget("li",this.strip);if(A){B=this.getComponent(A.id.split(this.idDelimiter)[1]);if(B.disabled){return{close:null,item:null,el:null}}}return{close:D.getTarget(".x-tab-strip-close",this.strip),item:B,el:A}},onStripMouseDown:function(B){if(B.button!=0){return}B.preventDefault();var A=this.findTargets(B);if(A.close){this.remove(A.item);return}if(A.item&&A.item!=this.activeTab){this.setActiveTab(A.item)}},onStripContextMenu:function(B){B.preventDefault();var A=this.findTargets(B);if(A.item){this.fireEvent("contextmenu",this,A.item,B)}},readTabs:function(E){if(E===true){this.items.each(function(H){this.remove(H)},this)}var D=this.el.query(this.autoTabSelector);for(var B=0,A=D.length;B<A;B++){var F=D[B];var G=F.getAttribute("title");F.removeAttribute("title");this.add({title:G,contentEl:F})}},initTab:function(E,B){var F=this.strip.dom.childNodes[B];var A=E.closable?"x-tab-strip-closable":"";if(E.disabled){A+=" x-item-disabled"}if(E.iconCls){A+=" x-tab-with-icon"}if(E.tabCls){A+=" "+E.tabCls}var G={id:this.id+this.idDelimiter+E.getItemId(),text:E.title,cls:A,iconCls:E.iconCls||""};var D=F?this.itemTpl.insertBefore(F,G):this.itemTpl.append(this.strip,G);Ext.fly(D).addClassOnOver("x-tab-strip-over");if(E.tabTip){Ext.fly(D).child("span.x-tab-strip-text",true).qtip=E.tabTip}E.tabEl=D;E.on("disable",this.onItemDisabled,this);E.on("enable",this.onItemEnabled,this);E.on("titlechange",this.onItemTitleChanged,this);E.on("iconchange",this.onItemIconChanged,this);E.on("beforeshow",this.onBeforeShowItem,this)},onAdd:function(D,B,A){this.initTab(B,A);if(this.items.getCount()==1){this.syncSize()}this.delegateUpdates()},onBeforeAdd:function(B){var A=B.events?(this.items.containsKey(B.getItemId())?B:null):this.items.get(B);if(A){this.setActiveTab(B);return false}Ext.TabPanel.superclass.onBeforeAdd.apply(this,arguments);var D=B.elements;B.elements=D?D.replace(",header",""):D;B.border=(B.border===true)},onRemove:function(D,B){Ext.destroy(Ext.get(this.getTabEl(B)));this.stack.remove(B);B.un("disable",this.onItemDisabled,this);B.un("enable",this.onItemEnabled,this);B.un("titlechange",this.onItemTitleChanged,this);B.un("iconchange",this.onItemIconChanged,this);B.un("beforeshow",this.onBeforeShowItem,this);if(B==this.activeTab){var A=this.stack.next();if(A){this.setActiveTab(A)}else{if(this.items.getCount()>0){this.setActiveTab(0)}else{this.activeTab=null}}}this.delegateUpdates()},onBeforeShowItem:function(A){if(A!=this.activeTab){this.setActiveTab(A);return false}},onItemDisabled:function(B){var A=this.getTabEl(B);if(A){Ext.fly(A).addClass("x-item-disabled")}this.stack.remove(B)},onItemEnabled:function(B){var A=this.getTabEl(B);if(A){Ext.fly(A).removeClass("x-item-disabled")}},onItemTitleChanged:function(B){var A=this.getTabEl(B);if(A){Ext.fly(A).child("span.x-tab-strip-text",true).innerHTML=B.title}},onItemIconChanged:function(E,A,D){var B=this.getTabEl(E);if(B){Ext.fly(B).child("span.x-tab-strip-text").replaceClass(D,A)}},getTabEl:function(A){var B=(typeof A==="number")?this.items.items[A].getItemId():A.getItemId();return document.getElementById(this.id+this.idDelimiter+B)},onResize:function(){Ext.TabPanel.superclass.onResize.apply(this,arguments);this.delegateUpdates()},beginUpdate:function(){this.suspendUpdates=true},endUpdate:function(){this.suspendUpdates=false;this.delegateUpdates()},hideTabStripItem:function(B){B=this.getComponent(B);var A=this.getTabEl(B);if(A){A.style.display="none";this.delegateUpdates()}this.stack.remove(B)},unhideTabStripItem:function(B){B=this.getComponent(B);var A=this.getTabEl(B);if(A){A.style.display="";this.delegateUpdates()}},delegateUpdates:function(){if(this.suspendUpdates){return}if(this.resizeTabs&&this.rendered){this.autoSizeTabs()}if(this.enableTabScroll&&this.rendered){this.autoScrollTabs()}},autoSizeTabs:function(){var H=this.items.length;var B=this.tabPosition!="bottom"?"header":"footer";var D=this[B].dom.offsetWidth;var A=this[B].dom.clientWidth;if(!this.resizeTabs||H<1||!A){return}var J=Math.max(Math.min(Math.floor((A-4)/H)-this.tabMargin,this.tabWidth),this.minTabWidth);this.lastTabWidth=J;var L=this.stripWrap.dom.getElementsByTagName("li");for(var F=0,I=L.length-1;F<I;F++){var K=L[F];var M=K.childNodes[1].firstChild.firstChild;var G=K.offsetWidth;var E=M.offsetWidth;M.style.width=(J-(G-E))+"px"}},adjustBodyWidth:function(A){if(this.header){this.header.setWidth(A)}if(this.footer){this.footer.setWidth(A)}return A},setActiveTab:function(D){D=this.getComponent(D);if(!D||this.fireEvent("beforetabchange",this,D,this.activeTab)===false){return}if(!this.rendered){this.activeTab=D;return}if(this.activeTab!=D){if(this.activeTab){var A=this.getTabEl(this.activeTab);if(A){Ext.fly(A).removeClass("x-tab-strip-active")}this.activeTab.fireEvent("deactivate",this.activeTab)}var B=this.getTabEl(D);Ext.fly(B).addClass("x-tab-strip-active");this.activeTab=D;this.stack.add(D);this.layout.setActiveItem(D);if(this.layoutOnTabChange&&D.doLayout){D.doLayout()}if(this.scrolling){this.scrollToTab(D,this.animScroll)}D.fireEvent("activate",D);this.fireEvent("tabchange",this,D)}},getActiveTab:function(){return this.activeTab||null},getItem:function(A){return this.getComponent(A)},autoScrollTabs:function(){this.pos=this.tabPosition=="bottom"?this.footer:this.header;var H=this.items.length;var E=this.pos.dom.offsetWidth;var D=this.pos.dom.clientWidth;var G=this.stripWrap;var F=G.dom;var B=F.offsetWidth;var I=this.getScrollPos();var A=this.edge.getOffsetsTo(this.stripWrap)[0]+I;if(!this.enableTabScroll||H<1||B<20){return}if(A<=D){F.scrollLeft=0;G.setWidth(D);if(this.scrolling){this.scrolling=false;this.pos.removeClass("x-tab-scrolling");this.scrollLeft.hide();this.scrollRight.hide();if(Ext.isAir||Ext.isWebKit){F.style.marginLeft="";F.style.marginRight=""}}}else{if(!this.scrolling){this.pos.addClass("x-tab-scrolling");if(Ext.isAir||Ext.isWebKit){F.style.marginLeft="18px";F.style.marginRight="18px"}}D-=G.getMargins("lr");G.setWidth(D>20?D:20);if(!this.scrolling){if(!this.scrollLeft){this.createScrollers()}else{this.scrollLeft.show();this.scrollRight.show()}}this.scrolling=true;if(I>(A-D)){F.scrollLeft=A-D}else{this.scrollToTab(this.activeTab,false)}this.updateScrollButtons()}},createScrollers:function(){this.pos.addClass("x-tab-scrolling-"+this.tabPosition);var D=this.stripWrap.dom.offsetHeight;var A=this.pos.insertFirst({cls:"x-tab-scroller-left"});A.setHeight(D);A.addClassOnOver("x-tab-scroller-left-over");this.leftRepeater=new Ext.util.ClickRepeater(A,{interval:this.scrollRepeatInterval,handler:this.onScrollLeft,scope:this});this.scrollLeft=A;var B=this.pos.insertFirst({cls:"x-tab-scroller-right"});B.setHeight(D);B.addClassOnOver("x-tab-scroller-right-over");this.rightRepeater=new Ext.util.ClickRepeater(B,{interval:this.scrollRepeatInterval,handler:this.onScrollRight,scope:this});this.scrollRight=B},getScrollWidth:function(){return this.edge.getOffsetsTo(this.stripWrap)[0]+this.getScrollPos()},getScrollPos:function(){return parseInt(this.stripWrap.dom.scrollLeft,10)||0},getScrollArea:function(){return parseInt(this.stripWrap.dom.clientWidth,10)||0},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},getScrollIncrement:function(){return this.scrollIncrement||(this.resizeTabs?this.lastTabWidth+2:100)},scrollToTab:function(F,A){if(!F){return}var D=this.getTabEl(F);var H=this.getScrollPos(),E=this.getScrollArea();var G=Ext.fly(D).getOffsetsTo(this.stripWrap)[0]+H;var B=G+D.offsetWidth;if(G<H){this.scrollTo(G,A)}else{if(B>(H+E)){this.scrollTo(B-E,A)}}},scrollTo:function(B,A){this.stripWrap.scrollTo("left",B,A?this.getScrollAnim():false);if(!A){this.updateScrollButtons()}},onWheel:function(E){var F=E.getWheelDelta()*this.wheelIncrement*-1;E.stopEvent();var G=this.getScrollPos();var D=G+F;var A=this.getScrollWidth()-this.getScrollArea();var B=Math.max(0,Math.min(A,D));if(B!=G){this.scrollTo(B,false)}},onScrollRight:function(){var A=this.getScrollWidth()-this.getScrollArea();var D=this.getScrollPos();var B=Math.min(A,D+this.getScrollIncrement());if(B!=D){this.scrollTo(B,this.animScroll)}},onScrollLeft:function(){var B=this.getScrollPos();var A=Math.max(0,B-this.getScrollIncrement());if(A!=B){this.scrollTo(A,this.animScroll)}},updateScrollButtons:function(){var A=this.getScrollPos();this.scrollLeft[A==0?"addClass":"removeClass"]("x-tab-scroller-left-disabled");this.scrollRight[A>=(this.getScrollWidth()-this.getScrollArea())?"addClass":"removeClass"]("x-tab-scroller-right-disabled")},beforeDestroy:function(){if(this.items){this.items.each(function(A){if(A&&A.tabEl){Ext.get(A.tabEl).removeAllListeners();A.tabEl=null}},this)}if(this.strip){this.strip.removeAllListeners()}Ext.TabPanel.superclass.beforeDestroy.apply(this)}});Ext.reg("tabpanel",Ext.TabPanel);Ext.TabPanel.prototype.activate=Ext.TabPanel.prototype.setActiveTab;Ext.TabPanel.AccessStack=function(){var A=[];return{add:function(B){A.push(B);if(A.length>10){A.shift()}},remove:function(F){var E=[];for(var D=0,B=A.length;D<B;D++){if(A[D]!=F){E.push(A[D])}}A=E},next:function(){return A.pop()}}};Ext.Button=Ext.extend(Ext.Component,{hidden:false,disabled:false,pressed:false,enableToggle:false,menuAlign:"tl-bl?",type:"button",menuClassTarget:"tr",clickEvent:"click",handleMouseEvents:true,tooltipType:"qtip",buttonSelector:"button:first-child",initComponent:function(){Ext.Button.superclass.initComponent.call(this);this.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout");if(this.menu){this.menu=Ext.menu.MenuMgr.get(this.menu)}if(typeof this.toggleGroup==="string"){this.enableToggle=true}},onRender:function(D,A){if(!this.template){if(!Ext.Button.buttonTemplate){Ext.Button.buttonTemplate=new Ext.Template('<table border="0" cellpadding="0" cellspacing="0" class="x-btn-wrap"><tbody><tr>','<td class="x-btn-left"><i>&#160;</i></td><td class="x-btn-center"><em unselectable="on"><button class="x-btn-text" type="{1}">{0}</button></em></td><td class="x-btn-right"><i>&#160;</i></td>',"</tr></tbody></table>")}this.template=Ext.Button.buttonTemplate}var B,F=[this.text||"&#160;",this.type];if(A){B=this.template.insertBefore(A,F,true)}else{B=this.template.append(D,F,true)}var E=this.btnEl=B.child(this.buttonSelector);E.on("focus",this.onFocus,this);E.on("blur",this.onBlur,this);this.initButtonEl(B,E);if(this.menu){this.el.child(this.menuClassTarget).addClass("x-btn-with-menu")}Ext.ButtonToggleMgr.register(this)},initButtonEl:function(B,D){this.el=B;B.addClass("x-btn");if(this.id){var E=this.el.dom,F=Ext.Element.cache;delete F[E.id];E.id=this.el.id=this.id;F[E.id]=this.el}if(this.icon){D.setStyle("background-image","url("+this.icon+")")}if(this.iconCls){D.addClass(this.iconCls);if(!this.cls){B.addClass(this.text?"x-btn-text-icon":"x-btn-icon")}}if(this.tabIndex!==undefined){D.dom.tabIndex=this.tabIndex}if(this.tooltip){if(typeof this.tooltip=="object"){Ext.QuickTips.register(Ext.apply({target:D.id},this.tooltip))}else{D.dom[this.tooltipType]=this.tooltip}}if(this.pressed){this.el.addClass("x-btn-pressed")}if(this.handleMouseEvents){B.on("mouseover",this.onMouseOver,this);B.on("mousedown",this.onMouseDown,this)}if(this.menu){this.menu.on("show",this.onMenuShow,this);this.menu.on("hide",this.onMenuHide,this)}if(this.repeat){var A=new Ext.util.ClickRepeater(B,typeof this.repeat=="object"?this.repeat:{});A.on("click",this.onClick,this)}B.on(this.clickEvent,this.onClick,this)},afterRender:function(){Ext.Button.superclass.afterRender.call(this);if(Ext.isIE6){this.autoWidth.defer(1,this)}else{this.autoWidth()}},setIconClass:function(A){if(this.el){this.btnEl.replaceClass(this.iconCls,A)}this.iconCls=A},beforeDestroy:function(){if(this.rendered){if(this.btnEl){if(typeof this.tooltip=="object"){Ext.QuickTips.unregister(this.btnEl)}Ext.destroy(this.btnEl)}}Ext.destroy(this.menu,this.repeater)},onDestroy:function(){var A=Ext.getDoc();A.un("mouseover",this.monitorMouseOver,this);A.un("mouseup",this.onMouseUp,this);if(this.rendered){Ext.ButtonToggleMgr.unregister(this)}},autoWidth:function(){if(this.el){this.el.setWidth("auto");if(Ext.isIE7&&Ext.isStrict){var A=this.btnEl;if(A&&A.getWidth()>20){A.clip();A.setWidth(Ext.util.TextMetrics.measure(A,this.text).width+A.getFrameWidth("lr"))}}if(this.minWidth){if(this.el.getWidth()<this.minWidth){this.el.setWidth(this.minWidth)}}}},setHandler:function(B,A){this.handler=B;this.scope=A},setText:function(A){this.text=A;if(this.el){this.el.child("td.x-btn-center "+this.buttonSelector).update(A)}this.autoWidth()},getText:function(){return this.text},toggle:function(B,A){B=B===undefined?!this.pressed:!!B;if(B!=this.pressed){if(this.rendered){this.el[B?"addClass":"removeClass"]("x-btn-pressed")}this.pressed=B;if(!A){this.fireEvent("toggle",this,B);if(this.toggleHandler){this.toggleHandler.call(this.scope||this,this,B)}}}},focus:function(){this.btnEl.focus()},onDisable:function(){this.onDisableChange(true)},onEnable:function(){this.onDisableChange(false)},onDisableChange:function(A){if(this.el){if(!Ext.isIE6||!this.text){this.el[A?"addClass":"removeClass"](this.disabledClass)}this.el.dom.disabled=A}this.disabled=A},showMenu:function(){if(this.menu){this.menu.show(this.el,this.menuAlign)}return this},hideMenu:function(){if(this.menu){this.menu.hide()}return this},hasVisibleMenu:function(){return this.menu&&this.menu.isVisible()},onClick:function(A){if(A){A.preventDefault()}if(A.button!=0){return}if(!this.disabled){if(this.enableToggle&&(this.allowDepress!==false||!this.pressed)){this.toggle()}if(this.menu&&!this.menu.isVisible()&&!this.ignoreNextClick){this.showMenu()}this.fireEvent("click",this,A);if(this.handler){this.handler.call(this.scope||this,this,A)}}},isMenuTriggerOver:function(B,A){return this.menu&&!A},isMenuTriggerOut:function(B,A){return this.menu&&!A},onMouseOver:function(B){if(!this.disabled){var A=B.within(this.el,true);if(!A){this.el.addClass("x-btn-over");if(!this.monitoringMouseOver){Ext.getDoc().on("mouseover",this.monitorMouseOver,this);this.monitoringMouseOver=true}this.fireEvent("mouseover",this,B)}if(this.isMenuTriggerOver(B,A)){this.fireEvent("menutriggerover",this,this.menu,B)}}},monitorMouseOver:function(A){if(A.target!=this.el.dom&&!A.within(this.el)){if(this.monitoringMouseOver){Ext.getDoc().un("mouseover",this.monitorMouseOver,this);this.monitoringMouseOver=false}this.onMouseOut(A)}},onMouseOut:function(B){var A=B.within(this.el)&&B.target!=this.el.dom;this.el.removeClass("x-btn-over");this.fireEvent("mouseout",this,B);if(this.isMenuTriggerOut(B,A)){this.fireEvent("menutriggerout",this,this.menu,B)}},onFocus:function(A){if(!this.disabled){this.el.addClass("x-btn-focus")}},onBlur:function(A){this.el.removeClass("x-btn-focus")},getClickEl:function(B,A){return this.el},onMouseDown:function(A){if(!this.disabled&&A.button==0){this.getClickEl(A).addClass("x-btn-click");Ext.getDoc().on("mouseup",this.onMouseUp,this)}},onMouseUp:function(A){if(A.button==0){this.getClickEl(A,true).removeClass("x-btn-click");Ext.getDoc().un("mouseup",this.onMouseUp,this)}},onMenuShow:function(A){this.ignoreNextClick=0;this.el.addClass("x-btn-menu-active");this.fireEvent("menushow",this,this.menu)},onMenuHide:function(A){this.el.removeClass("x-btn-menu-active");this.ignoreNextClick=this.restoreClick.defer(250,this);this.fireEvent("menuhide",this,this.menu)},restoreClick:function(){this.ignoreNextClick=0}});Ext.reg("button",Ext.Button);Ext.ButtonToggleMgr=function(){var A={};function B(F,H){if(H){var G=A[F.toggleGroup];for(var E=0,D=G.length;E<D;E++){if(G[E]!=F){G[E].toggle(false)}}}}return{register:function(D){if(!D.toggleGroup){return}var E=A[D.toggleGroup];if(!E){E=A[D.toggleGroup]=[]}E.push(D);D.on("toggle",B)},unregister:function(D){if(!D.toggleGroup){return}var E=A[D.toggleGroup];if(E){E.remove(D);D.un("toggle",B)}}}}();Ext.SplitButton=Ext.extend(Ext.Button,{arrowSelector:"button:last",initComponent:function(){Ext.SplitButton.superclass.initComponent.call(this);this.addEvents("arrowclick")},onRender:function(E,A){var B=new Ext.Template('<table cellspacing="0" class="x-btn-menu-wrap x-btn"><tr><td>','<table cellspacing="0" class="x-btn-wrap x-btn-menu-text-wrap"><tbody>','<tr><td class="x-btn-left"><i>&#160;</i></td><td class="x-btn-center"><button class="x-btn-text" type="{1}">{0}</button></td></tr>',"</tbody></table></td><td>",'<table cellspacing="0" class="x-btn-wrap x-btn-menu-arrow-wrap"><tbody>','<tr><td class="x-btn-center"><button class="x-btn-menu-arrow-el" type="button">&#160;</button></td><td class="x-btn-right"><i>&#160;</i></td></tr>',"</tbody></table></td></tr></table>");var D,G=[this.text||"&#160;",this.type];if(A){D=B.insertBefore(A,G,true)}else{D=B.append(E,G,true)}var F=this.btnEl=D.child(this.buttonSelector);this.initButtonEl(D,F);this.arrowBtnTable=D.child("table:last");this.arrowEl=D.child(this.arrowSelector);if(this.arrowTooltip){this.arrowEl.dom[this.tooltipType]=this.arrowTooltip}},autoWidth:function(){if(this.el){var D=this.el.child("table:first");var B=this.el.child("table:last");this.el.setWidth("auto");D.setWidth("auto");if(Ext.isIE7&&Ext.isStrict){var A=this.btnEl;if(A&&A.getWidth()>20){A.clip();A.setWidth(Ext.util.TextMetrics.measure(A,this.text).width+A.getFrameWidth("lr"))}}if(this.minWidth){if((D.getWidth()+B.getWidth())<this.minWidth){D.setWidth(this.minWidth-B.getWidth())}}this.el.setWidth(D.getWidth()+B.getWidth())}},setArrowHandler:function(B,A){this.arrowHandler=B;this.scope=A},onClick:function(A){A.preventDefault();if(!this.disabled){if(A.getTarget(".x-btn-menu-arrow-wrap")){if(this.menu&&!this.menu.isVisible()&&!this.ignoreNextClick){this.showMenu()}this.fireEvent("arrowclick",this,A);if(this.arrowHandler){this.arrowHandler.call(this.scope||this,this,A)}}else{if(this.enableToggle){this.toggle()}this.fireEvent("click",this,A);if(this.handler){this.handler.call(this.scope||this,this,A)}}}},getClickEl:function(B,A){if(!A){return(this.lastClickEl=B.getTarget("table",10,true))}return this.lastClickEl},onDisableChange:function(A){Ext.SplitButton.superclass.onDisableChange.call(this,A);if(this.arrowEl){this.arrowEl.dom.disabled=A}},isMenuTriggerOver:function(A){return this.menu&&A.within(this.arrowBtnTable)&&!A.within(this.arrowBtnTable,true)},isMenuTriggerOut:function(B,A){return this.menu&&!B.within(this.arrowBtnTable)},onDestroy:function(){Ext.destroy(this.arrowBtnTable);Ext.SplitButton.superclass.onDestroy.call(this)}});Ext.MenuButton=Ext.SplitButton;Ext.reg("splitbutton",Ext.SplitButton);Ext.CycleButton=Ext.extend(Ext.SplitButton,{getItemText:function(A){if(A&&this.showText===true){var B="";if(this.prependText){B+=this.prependText}B+=A.text;return B}return undefined},setActiveItem:function(D,A){if(typeof D!="object"){D=this.menu.items.get(D)}if(D){if(!this.rendered){this.text=this.getItemText(D);this.iconCls=D.iconCls}else{var B=this.getItemText(D);if(B){this.setText(B)}this.setIconClass(D.iconCls)}this.activeItem=D;if(!D.checked){D.setChecked(true,true)}if(this.forceIcon){this.setIconClass(this.forceIcon)}if(!A){this.fireEvent("change",this,D)}}},getActiveItem:function(){return this.activeItem},initComponent:function(){this.addEvents("change");if(this.changeHandler){this.on("change",this.changeHandler,this.scope||this);delete this.changeHandler}this.itemCount=this.items.length;this.menu={cls:"x-cycle-menu",items:[]};var E;for(var B=0,A=this.itemCount;B<A;B++){var D=this.items[B];D.group=D.group||this.id;D.itemIndex=B;D.checkHandler=this.checkHandler;D.scope=this;D.checked=D.checked||false;this.menu.items.push(D);if(D.checked){E=D}}this.setActiveItem(E,true);Ext.CycleButton.superclass.initComponent.call(this);this.on("click",this.toggleSelected,this)},checkHandler:function(A,B){if(B){this.setActiveItem(A)}},toggleSelected:function(){this.menu.render();var D,A;for(var B=1;B<this.itemCount;B++){D=(this.activeItem.itemIndex+B)%this.itemCount;A=this.menu.items.itemAt(D);if(!A.disabled){A.setChecked(true);break}}}});Ext.reg("cycle",Ext.CycleButton);Ext.Toolbar=function(A){if(Ext.isArray(A)){A={buttons:A}}Ext.Toolbar.superclass.constructor.call(this,A)};(function(){var A=Ext.Toolbar;Ext.extend(A,Ext.BoxComponent,{trackMenus:true,initComponent:function(){A.superclass.initComponent.call(this);if(this.items){this.buttons=this.items}this.items=new Ext.util.MixedCollection(false,function(B){return B.itemId||B.id||Ext.id()})},autoCreate:{cls:"x-toolbar x-small-editor",html:'<table cellspacing="0"><tr></tr></table>'},onRender:function(D,B){this.el=D.createChild(Ext.apply({id:this.id},this.autoCreate),B);this.tr=this.el.child("tr",true)},afterRender:function(){A.superclass.afterRender.call(this);if(this.buttons){this.add.apply(this,this.buttons);delete this.buttons}},add:function(){var D=arguments,B=D.length;for(var E=0;E<B;E++){var F=D[E];if(F.isFormField){this.addField(F)}else{if(F.render){this.addItem(F)}else{if(typeof F=="string"){if(F=="separator"||F=="-"){this.addSeparator()}else{if(F==" "){this.addSpacer()}else{if(F=="->"){this.addFill()}else{this.addText(F)}}}}else{if(F.tagName){this.addElement(F)}else{if(typeof F=="object"){if(F.xtype){this.addField(Ext.ComponentMgr.create(F,"button"))}else{this.addButton(F)}}}}}}}},addSeparator:function(){return this.addItem(new A.Separator())},addSpacer:function(){return this.addItem(new A.Spacer())},addFill:function(){return this.addItem(new A.Fill())},addElement:function(B){return this.addItem(new A.Item(B))},addItem:function(B){var D=this.nextBlock();this.initMenuTracking(B);B.render(D);this.items.add(B);return B},addButton:function(E){if(Ext.isArray(E)){var G=[];for(var F=0,D=E.length;F<D;F++){G.push(this.addButton(E[F]))}return G}var B=E;if(!(E instanceof A.Button)){B=E.split?new A.SplitButton(E):new A.Button(E)}var H=this.nextBlock();this.initMenuTracking(B);B.render(H);this.items.add(B);return B},initMenuTracking:function(B){if(this.trackMenus&&B.menu){B.on({menutriggerover:this.onButtonTriggerOver,menushow:this.onButtonMenuShow,menuhide:this.onButtonMenuHide,scope:this})}},addText:function(B){return this.addItem(new A.TextItem(B))},insertButton:function(D,G){if(Ext.isArray(G)){var F=[];for(var E=0,B=G.length;E<B;E++){F.push(this.insertButton(D+E,G[E]))}return F}if(!(G instanceof A.Button)){G=new A.Button(G)}var H=document.createElement("td");this.tr.insertBefore(H,this.tr.childNodes[D]);this.initMenuTracking(G);G.render(H);this.items.insert(D,G);return G},addDom:function(D,B){var F=this.nextBlock();Ext.DomHelper.overwrite(F,D);var E=new A.Item(F.firstChild);E.render(F);this.items.add(E);return E},addField:function(D){var E=this.nextBlock();D.render(E);var B=new A.Item(E.firstChild);B.render(E);this.items.add(D);return B},nextBlock:function(){var B=document.createElement("td");this.tr.appendChild(B);return B},onDestroy:function(){Ext.Toolbar.superclass.onDestroy.call(this);if(this.rendered){if(this.items){Ext.destroy.apply(Ext,this.items.items)}Ext.Element.uncache(this.tr)}},onDisable:function(){this.items.each(function(B){if(B.disable){B.disable()}})},onEnable:function(){this.items.each(function(B){if(B.enable){B.enable()}})},onButtonTriggerOver:function(B){if(this.activeMenuBtn&&this.activeMenuBtn!=B){this.activeMenuBtn.hideMenu();B.showMenu();this.activeMenuBtn=B}},onButtonMenuShow:function(B){this.activeMenuBtn=B},onButtonMenuHide:function(B){delete this.activeMenuBtn}});Ext.reg("toolbar",Ext.Toolbar);A.Item=function(B){this.el=Ext.getDom(B);this.id=Ext.id(this.el);this.hidden=false};A.Item.prototype={getEl:function(){return this.el},render:function(B){this.td=B;B.appendChild(this.el)},destroy:function(){if(this.el){var B=Ext.get(this.el);Ext.destroy(B)}Ext.removeNode(this.td)},show:function(){this.hidden=false;this.td.style.display=""},hide:function(){this.hidden=true;this.td.style.display="none"},setVisible:function(B){if(B){this.show()}else{this.hide()}},focus:function(){Ext.fly(this.el).focus()},disable:function(){Ext.fly(this.td).addClass("x-item-disabled");this.disabled=true;this.el.disabled=true},enable:function(){Ext.fly(this.td).removeClass("x-item-disabled");this.disabled=false;this.el.disabled=false}};Ext.reg("tbitem",A.Item);A.Separator=function(){var B=document.createElement("span");B.className="ytb-sep";A.Separator.superclass.constructor.call(this,B)};Ext.extend(A.Separator,A.Item,{enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbseparator",A.Separator);A.Spacer=function(){var B=document.createElement("div");B.className="ytb-spacer";A.Spacer.superclass.constructor.call(this,B)};Ext.extend(A.Spacer,A.Item,{enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbspacer",A.Spacer);A.Fill=Ext.extend(A.Spacer,{render:function(B){B.style.width="100%";A.Fill.superclass.render.call(this,B)}});Ext.reg("tbfill",A.Fill);A.TextItem=function(B){var D=document.createElement("span");D.className="ytb-text";D.innerHTML=B.text?B.text:B;A.TextItem.superclass.constructor.call(this,D)};Ext.extend(A.TextItem,A.Item,{enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbtext",A.TextItem);A.Button=Ext.extend(Ext.Button,{hideParent:true,onDestroy:function(){A.Button.superclass.onDestroy.call(this);if(this.container){this.container.remove()}}});Ext.reg("tbbutton",A.Button);A.SplitButton=Ext.extend(Ext.SplitButton,{hideParent:true,onDestroy:function(){A.SplitButton.superclass.onDestroy.call(this);if(this.container){this.container.remove()}}});Ext.reg("tbsplit",A.SplitButton);A.MenuButton=A.SplitButton})();Ext.PagingToolbar=Ext.extend(Ext.Toolbar,{pageSize:20,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",paramNames:{start:"start",limit:"limit"},initComponent:function(){this.addEvents("change","beforechange");Ext.PagingToolbar.superclass.initComponent.call(this);this.cursor=0;this.bind(this.store)},onRender:function(B,A){Ext.PagingToolbar.superclass.onRender.call(this,B,A);this.first=this.addButton({tooltip:this.firstText,iconCls:"x-tbar-page-first",disabled:true,handler:this.onClick.createDelegate(this,["first"])});this.prev=this.addButton({tooltip:this.prevText,iconCls:"x-tbar-page-prev",disabled:true,handler:this.onClick.createDelegate(this,["prev"])});this.addSeparator();this.add(this.beforePageText);this.field=Ext.get(this.addDom({tag:"input",type:"text",size:"3",value:"1",cls:"x-tbar-page-number"}).el);this.field.on("keydown",this.onPagingKeydown,this);this.field.on("focus",function(){this.dom.select()});this.field.on("blur",this.onPagingBlur,this);this.afterTextEl=this.addText(String.format(this.afterPageText,1));this.field.setHeight(18);this.addSeparator();this.next=this.addButton({tooltip:this.nextText,iconCls:"x-tbar-page-next",disabled:true,handler:this.onClick.createDelegate(this,["next"])});this.last=this.addButton({tooltip:this.lastText,iconCls:"x-tbar-page-last",disabled:true,handler:this.onClick.createDelegate(this,["last"])});this.addSeparator();this.loading=this.addButton({tooltip:this.refreshText,iconCls:"x-tbar-loading",handler:this.onClick.createDelegate(this,["refresh"])});if(this.displayInfo){this.displayEl=Ext.fly(this.el.dom).createChild({cls:"x-paging-info"})}if(this.dsLoaded){this.onLoad.apply(this,this.dsLoaded)}},updateInfo:function(){if(this.displayEl){var A=this.store.getCount();var B=A==0?this.emptyMsg:String.format(this.displayMsg,this.cursor+1,this.cursor+A,this.store.getTotalCount());this.displayEl.update(B)}},onLoad:function(A,D,G){if(!this.rendered){this.dsLoaded=[A,D,G];return}this.cursor=G.params?G.params[this.paramNames.start]:0;var F=this.getPageData(),B=F.activePage,E=F.pages;this.afterTextEl.el.innerHTML=String.format(this.afterPageText,F.pages);this.field.dom.value=B;this.first.setDisabled(B==1);this.prev.setDisabled(B==1);this.next.setDisabled(B==E);this.last.setDisabled(B==E);this.loading.enable();this.updateInfo();this.fireEvent("change",this,F)},getPageData:function(){var A=this.store.getTotalCount();return{total:A,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:A<this.pageSize?1:Math.ceil(A/this.pageSize)}},onLoadError:function(){if(!this.rendered){return}this.loading.enable()},readPage:function(D){var A=this.field.dom.value,B;if(!A||isNaN(B=parseInt(A,10))){this.field.dom.value=D.activePage;return false}return B},onPagingBlur:function(A){this.field.dom.value=this.getPageData().activePage},onPagingKeydown:function(E){var B=E.getKey(),F=this.getPageData(),D;if(B==E.RETURN){E.stopEvent();D=this.readPage(F);if(D!==false){D=Math.min(Math.max(1,D),F.pages)-1;this.doLoad(D*this.pageSize)}}else{if(B==E.HOME||B==E.END){E.stopEvent();D=B==E.HOME?1:F.pages;this.field.dom.value=D}else{if(B==E.UP||B==E.PAGEUP||B==E.DOWN||B==E.PAGEDOWN){E.stopEvent();if(D=this.readPage(F)){var A=E.shiftKey?10:1;if(B==E.DOWN||B==E.PAGEDOWN){A*=-1}D+=A;if(D>=1&D<=F.pages){this.field.dom.value=D}}}}}},beforeLoad:function(){if(this.rendered&&this.loading){this.loading.disable()}},doLoad:function(D){var B={},A=this.paramNames;B[A.start]=D;B[A.limit]=this.pageSize;if(this.fireEvent("beforechange",this,B)!==false){this.store.load({params:B})}},changePage:function(A){this.doLoad(((A-1)*this.pageSize).constrain(0,this.store.getTotalCount()))},onClick:function(F){var B=this.store;switch(F){case"first":this.doLoad(0);break;case"prev":this.doLoad(Math.max(0,this.cursor-this.pageSize));break;case"next":this.doLoad(this.cursor+this.pageSize);break;case"last":var E=B.getTotalCount();var A=E%this.pageSize;var D=A?(E-A):E-this.pageSize;this.doLoad(D);break;case"refresh":this.doLoad(this.cursor);break}},unbind:function(A){A=Ext.StoreMgr.lookup(A);A.un("beforeload",this.beforeLoad,this);A.un("load",this.onLoad,this);A.un("loadexception",this.onLoadError,this);this.store=undefined},bind:function(A){A=Ext.StoreMgr.lookup(A);A.on("beforeload",this.beforeLoad,this);A.on("load",this.onLoad,this);A.on("loadexception",this.onLoadError,this);this.store=A;if(A.getCount()>0){this.onLoad(A,null,{})}},onDestroy:function(){if(this.store){this.unbind(this.store)}Ext.PagingToolbar.superclass.onDestroy.call(this)}});Ext.reg("paging",Ext.PagingToolbar);Ext.Resizable=function(E,F){this.el=Ext.get(E);if(F&&F.wrap){F.resizeChild=this.el;this.el=this.el.wrap(typeof F.wrap=="object"?F.wrap:{cls:"xresizable-wrap"});this.el.id=this.el.dom.id=F.resizeChild.id+"-rzwrap";this.el.setStyle("overflow","hidden");this.el.setPositioning(F.resizeChild.getPositioning());F.resizeChild.clearPositioning();if(!F.width||!F.height){var G=F.resizeChild.getSize();this.el.setSize(G.width,G.height)}if(F.pinned&&!F.adjustments){F.adjustments="auto"}}this.proxy=this.el.createProxy({tag:"div",cls:"x-resizable-proxy",id:this.el.id+"-rzproxy"},Ext.getBody());this.proxy.unselectable();this.proxy.enableDisplayMode("block");Ext.apply(this,F);if(this.pinned){this.disableTrackOver=true;this.el.addClass("x-resizable-pinned")}var J=this.el.getStyle("position");if(J!="absolute"&&J!="fixed"){this.el.setStyle("position","relative")}if(!this.handles){this.handles="s,e,se";if(this.multiDirectional){this.handles+=",n,w"}}if(this.handles=="all"){this.handles="n s e w ne nw se sw"}var N=this.handles.split(/\s*?[,;]\s*?| /);var D=Ext.Resizable.positions;for(var I=0,K=N.length;I<K;I++){if(N[I]&&D[N[I]]){var M=D[N[I]];this[M]=new Ext.Resizable.Handle(this,M,this.disableTrackOver,this.transparent)}}this.corner=this.southeast;if(this.handles.indexOf("n")!=-1||this.handles.indexOf("w")!=-1){this.updateBox=true}this.activeHandle=null;if(this.resizeChild){if(typeof this.resizeChild=="boolean"){this.resizeChild=Ext.get(this.el.dom.firstChild,true)}else{this.resizeChild=Ext.get(this.resizeChild,true)}}if(this.adjustments=="auto"){var B=this.resizeChild;var L=this.west,H=this.east,A=this.north,N=this.south;if(B&&(L||A)){B.position("relative");B.setLeft(L?L.el.getWidth():0);B.setTop(A?A.el.getHeight():0)}this.adjustments=[(H?-H.el.getWidth():0)+(L?-L.el.getWidth():0),(A?-A.el.getHeight():0)+(N?-N.el.getHeight():0)-1]}if(this.draggable){this.dd=this.dynamic?this.el.initDD(null):this.el.initDDProxy(null,{dragElId:this.proxy.id});this.dd.setHandleElId(this.resizeChild?this.resizeChild.id:this.el.id)}this.addEvents("beforeresize","resize");if(this.width!==null&&this.height!==null){this.resizeTo(this.width,this.height)}else{this.updateChildSize()}if(Ext.isIE){this.el.dom.style.zoom=1}Ext.Resizable.superclass.constructor.call(this)};Ext.extend(Ext.Resizable,Ext.util.Observable,{resizeChild:false,adjustments:[0,0],minWidth:5,minHeight:5,maxWidth:10000,maxHeight:10000,enabled:true,animate:false,duration:0.35,dynamic:false,handles:false,multiDirectional:false,disableTrackOver:false,easing:"easeOutStrong",widthIncrement:0,heightIncrement:0,pinned:false,width:null,height:null,preserveRatio:false,transparent:false,minX:0,minY:0,draggable:false,resizeTo:function(B,A){this.el.setSize(B,A);this.updateChildSize();this.fireEvent("resize",this,B,A,null)},startSizing:function(D,B){this.fireEvent("beforeresize",this,D);if(this.enabled){if(!this.overlay){this.overlay=this.el.createProxy({tag:"div",cls:"x-resizable-overlay",html:"&#160;"},Ext.getBody());this.overlay.unselectable();this.overlay.enableDisplayMode("block");this.overlay.on("mousemove",this.onMouseMove,this);this.overlay.on("mouseup",this.onMouseUp,this)}this.overlay.setStyle("cursor",B.el.getStyle("cursor"));this.resizing=true;this.startBox=this.el.getBox();this.startPoint=D.getXY();this.offsets=[(this.startBox.x+this.startBox.width)-this.startPoint[0],(this.startBox.y+this.startBox.height)-this.startPoint[1]];this.overlay.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.overlay.show();if(this.constrainTo){var A=Ext.get(this.constrainTo);this.resizeRegion=A.getRegion().adjust(A.getFrameWidth("t"),A.getFrameWidth("l"),-A.getFrameWidth("b"),-A.getFrameWidth("r"))}this.proxy.setStyle("visibility","hidden");this.proxy.show();this.proxy.setBox(this.startBox);if(!this.dynamic){this.proxy.setStyle("visibility","visible")}}},onMouseDown:function(A,B){if(this.enabled){B.stopEvent();this.activeHandle=A;this.startSizing(B,A)}},onMouseUp:function(B){this.activeHandle=null;var A=this.resizeElement();this.resizing=false;this.handleOut();this.overlay.hide();this.proxy.hide();this.fireEvent("resize",this,A.width,A.height,B)},updateChildSize:function(){if(this.resizeChild){var D=this.el;var E=this.resizeChild;var B=this.adjustments;if(D.dom.offsetWidth){var A=D.getSize(true);E.setSize(A.width+B[0],A.height+B[1])}if(Ext.isIE){setTimeout(function(){if(D.dom.offsetWidth){var F=D.getSize(true);E.setSize(F.width+B[0],F.height+B[1])}},10)}}},snap:function(D,F,B){if(!F||!D){return D}var E=D;var A=D%F;if(A>0){if(A>(F/2)){E=D+(F-A)}else{E=D-A}}return Math.max(B,E)},resizeElement:function(){var A=this.proxy.getBox();if(this.updateBox){this.el.setBox(A,false,this.animate,this.duration,null,this.easing)}else{this.el.setSize(A.width,A.height,this.animate,this.duration,null,this.easing)}this.updateChildSize();if(!this.dynamic){this.proxy.hide()}return A},constrain:function(B,D,A,E){if(B-D<A){D=B-A}else{if(B-D>E){D=B-E}}return D},onMouseMove:function(T){if(this.enabled&&this.activeHandle){try{if(this.resizeRegion&&!this.resizeRegion.contains(T.getPoint())){return}var R=this.curSize||this.startBox;var J=this.startBox.x,I=this.startBox.y;var D=J,B=I;var K=R.width,S=R.height;var E=K,M=S;var L=this.minWidth,U=this.minHeight;var Q=this.maxWidth,X=this.maxHeight;var G=this.widthIncrement;var A=this.heightIncrement;var V=T.getXY();var P=-(this.startPoint[0]-Math.max(this.minX,V[0]));var N=-(this.startPoint[1]-Math.max(this.minY,V[1]));var H=this.activeHandle.position;switch(H){case"east":K+=P;K=Math.min(Math.max(L,K),Q);break;case"south":S+=N;S=Math.min(Math.max(U,S),X);break;case"southeast":K+=P;S+=N;K=Math.min(Math.max(L,K),Q);S=Math.min(Math.max(U,S),X);break;case"north":N=this.constrain(S,N,U,X);I+=N;S-=N;break;case"west":P=this.constrain(K,P,L,Q);J+=P;K-=P;break;case"northeast":K+=P;K=Math.min(Math.max(L,K),Q);N=this.constrain(S,N,U,X);I+=N;S-=N;break;case"northwest":P=this.constrain(K,P,L,Q);N=this.constrain(S,N,U,X);I+=N;S-=N;J+=P;K-=P;break;case"southwest":P=this.constrain(K,P,L,Q);S+=N;S=Math.min(Math.max(U,S),X);J+=P;K-=P;break}var O=this.snap(K,G,L);var W=this.snap(S,A,U);if(O!=K||W!=S){switch(H){case"northeast":I-=W-S;break;case"north":I-=W-S;break;case"southwest":J-=O-K;break;case"west":J-=O-K;break;case"northwest":J-=O-K;I-=W-S;break}K=O;S=W}if(this.preserveRatio){switch(H){case"southeast":case"east":S=M*(K/E);S=Math.min(Math.max(U,S),X);K=E*(S/M);break;case"south":K=E*(S/M);K=Math.min(Math.max(L,K),Q);S=M*(K/E);break;case"northeast":K=E*(S/M);K=Math.min(Math.max(L,K),Q);S=M*(K/E);break;case"north":var Y=K;K=E*(S/M);K=Math.min(Math.max(L,K),Q);S=M*(K/E);J+=(Y-K)/2;break;case"southwest":S=M*(K/E);S=Math.min(Math.max(U,S),X);var Y=K;K=E*(S/M);J+=Y-K;break;case"west":var F=S;S=M*(K/E);S=Math.min(Math.max(U,S),X);I+=(F-S)/2;var Y=K;K=E*(S/M);J+=Y-K;break;case"northwest":var Y=K;var F=S;S=M*(K/E);S=Math.min(Math.max(U,S),X);K=E*(S/M);I+=F-S;J+=Y-K;break}}this.proxy.setBounds(J,I,K,S);if(this.dynamic){this.resizeElement()}}catch(T){}}},handleOver:function(){if(this.enabled){this.el.addClass("x-resizable-over")}},handleOut:function(){if(!this.resizing){this.el.removeClass("x-resizable-over")}},getEl:function(){return this.el},getResizeChild:function(){return this.resizeChild},destroy:function(B){Ext.destroy(this.dd,this.overlay,this.proxy);this.overlay=null;this.proxy=null;var D=Ext.Resizable.positions;for(var A in D){if(typeof D[A]!="function"&&this[D[A]]){this[D[A]].destroy()}}if(B){this.el.update("");Ext.destroy(this.el);this.el=null}this.purgeListeners()},syncHandleHeight:function(){var A=this.el.getHeight(true);if(this.west){this.west.el.setHeight(A)}if(this.east){this.east.el.setHeight(A)}}});Ext.Resizable.positions={n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"};Ext.Resizable.Handle=function(D,F,B,E){if(!this.tpl){var A=Ext.DomHelper.createTemplate({tag:"div",cls:"x-resizable-handle x-resizable-handle-{0}"});A.compile();Ext.Resizable.Handle.prototype.tpl=A}this.position=F;this.rz=D;this.el=this.tpl.append(D.el.dom,[this.position],true);this.el.unselectable();if(E){this.el.setOpacity(0)}this.el.on("mousedown",this.onMouseDown,this);if(!B){this.el.on("mouseover",this.onMouseOver,this);this.el.on("mouseout",this.onMouseOut,this)}};Ext.Resizable.Handle.prototype={afterResize:function(A){},onMouseDown:function(A){this.rz.onMouseDown(this,A)},onMouseOver:function(A){this.rz.handleOver(this,A)},onMouseOut:function(A){this.rz.handleOut(this,A)},destroy:function(){Ext.destroy(this.el);this.el=null}};Ext.Editor=function(B,A){this.field=B;Ext.Editor.superclass.constructor.call(this,A)};Ext.extend(Ext.Editor,Ext.Component,{value:"",alignment:"c-c?",shadow:"frame",constrain:false,swallowKeys:true,completeOnEnter:false,cancelOnEsc:false,updateEl:false,initComponent:function(){Ext.Editor.superclass.initComponent.call(this);this.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onRender:function(B,A){this.el=new Ext.Layer({shadow:this.shadow,cls:"x-editor",parentEl:B,shim:this.shim,shadowOffset:4,id:this.id,constrain:this.constrain});this.el.setStyle("overflow",Ext.isGecko?"auto":"hidden");if(this.field.msgTarget!="title"){this.field.msgTarget="qtip"}this.field.inEditor=true;this.field.render(this.el);if(Ext.isGecko){this.field.el.dom.setAttribute("autocomplete","off")}this.field.on("specialkey",this.onSpecialKey,this);if(this.swallowKeys){this.field.el.swallowEvent(["keydown","keypress"])}this.field.show();this.field.on("blur",this.onBlur,this);if(this.field.grow){this.field.on("autosize",this.el.sync,this.el,{delay:1})}},onSpecialKey:function(D,B){var A=B.getKey();if(this.completeOnEnter&&A==B.ENTER){B.stopEvent();this.completeEdit()}else{if(this.cancelOnEsc&&A==B.ESC){this.cancelEdit()}else{this.fireEvent("specialkey",D,B)}}if(this.field.triggerBlur&&(A==B.ENTER||A==B.ESC||A==B.TAB)){this.field.triggerBlur()}},startEdit:function(B,D){if(this.editing){this.completeEdit()}this.boundEl=Ext.get(B);var A=D!==undefined?D:this.boundEl.dom.innerHTML;if(!this.rendered){this.render(this.parentEl||document.body)}if(this.fireEvent("beforestartedit",this,this.boundEl,A)===false){return}this.startValue=A;this.field.setValue(A);this.doAutoSize();this.el.alignTo(this.boundEl,this.alignment);this.editing=true;this.show()},doAutoSize:function(){if(this.autoSize){var A=this.boundEl.getSize();switch(this.autoSize){case"width":this.setSize(A.width,"");break;case"height":this.setSize("",A.height);break;default:this.setSize(A.width,A.height)}}},setSize:function(A,B){delete this.field.lastSize;this.field.setSize(A,B);if(this.el){if(Ext.isGecko2||Ext.isOpera){this.el.setSize(A,B)}this.el.sync()}},realign:function(){this.el.alignTo(this.boundEl,this.alignment)},completeEdit:function(A){if(!this.editing){return}var B=this.getValue();if(!this.field.isValid()){if(this.revertInvalid!==false){this.cancelEdit(A)}return}if(String(B)===String(this.startValue)&&this.ignoreNoChange){this.hideEdit(A);return}if(this.fireEvent("beforecomplete",this,B,this.startValue)!==false){B=this.getValue();if(this.updateEl&&this.boundEl){this.boundEl.update(B)}this.hideEdit(A);this.fireEvent("complete",this,B,this.startValue)}},onShow:function(){this.el.show();if(this.hideEl!==false){this.boundEl.hide()}this.field.show();if(Ext.isIE&&!this.fixIEFocus){this.fixIEFocus=true;this.deferredFocus.defer(50,this)}else{this.field.focus()}this.fireEvent("startedit",this.boundEl,this.startValue)},deferredFocus:function(){if(this.editing){this.field.focus()}},cancelEdit:function(A){if(this.editing){var B=this.getValue();this.setValue(this.startValue);this.hideEdit(A);this.fireEvent("canceledit",this,B,this.startValue)}},hideEdit:function(A){if(A!==true){this.editing=false;this.hide()}},onBlur:function(){if(this.allowBlur!==true&&this.editing){this.completeEdit()}},onHide:function(){if(this.editing){this.completeEdit();return}this.field.blur();if(this.field.collapse){this.field.collapse()}this.el.hide();if(this.hideEl!==false){this.boundEl.show()}},setValue:function(A){this.field.setValue(A)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){Ext.destroy(this.field);this.field=null}});Ext.reg("editor",Ext.Editor);Ext.MessageBox=function(){var S,B,O,R;var H,K,Q,A,L,N,I,G;var P,T,M,D="";var E=function(V){if(S.isVisible()){S.hide();U();Ext.callback(B.fn,B.scope||window,[V,T.dom.value,B],1)}};var U=function(){if(B&&B.cls){S.el.removeClass(B.cls)}L.reset()};var F=function(X,V,W){if(B&&B.closable!==false){S.hide();U()}if(W){W.stopEvent()}};var J=function(V){var X=0;if(!V){P.ok.hide();P.cancel.hide();P.yes.hide();P.no.hide();return X}S.footer.dom.style.display="";for(var W in P){if(typeof P[W]!="function"){if(V[W]){P[W].show();P[W].setText(typeof V[W]=="string"?V[W]:Ext.MessageBox.buttonText[W]);X+=P[W].el.getWidth()+15}else{P[W].hide()}}}return X};return{getDialog:function(V){if(!S){S=new Ext.Window({autoCreate:true,title:V,resizable:false,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,modal:true,shim:true,buttonAlign:"center",width:400,height:100,minHeight:80,plain:true,footer:true,closable:true,close:function(){if(B&&B.buttons&&B.buttons.no&&!B.buttons.cancel){E("no")}else{E("cancel")}}});P={};var W=this.buttonText;P.ok=S.addButton(W.ok,E.createCallback("ok"));P.yes=S.addButton(W.yes,E.createCallback("yes"));P.no=S.addButton(W.no,E.createCallback("no"));P.cancel=S.addButton(W.cancel,E.createCallback("cancel"));P.ok.hideMode=P.yes.hideMode=P.no.hideMode=P.cancel.hideMode="offsets";S.render(document.body);S.getEl().addClass("x-window-dlg");O=S.mask;H=S.body.createChild({html:'<div class="ext-mb-icon"></div><div class="ext-mb-content"><span class="ext-mb-text"></span><br /><div class="ext-mb-fix-cursor"><input type="text" class="ext-mb-input" /><textarea class="ext-mb-textarea"></textarea></div></div>'});I=Ext.get(H.dom.firstChild);var X=H.dom.childNodes[1];K=Ext.get(X.firstChild);Q=Ext.get(X.childNodes[2].firstChild);Q.enableDisplayMode();Q.addKeyListener([10,13],function(){if(S.isVisible()&&B&&B.buttons){if(B.buttons.ok){E("ok")}else{if(B.buttons.yes){E("yes")}}}});A=Ext.get(X.childNodes[2].childNodes[1]);A.enableDisplayMode();L=new Ext.ProgressBar({renderTo:H});H.createChild({cls:"x-clear"})}return S},updateText:function(Y){if(!S.isVisible()&&!B.width){S.setSize(this.maxWidth,100)}K.update(Y||"&#160;");var W=D!=""?(I.getWidth()+I.getMargins("lr")):0;var a=K.getWidth()+K.getMargins("lr");var X=S.getFrameWidth("lr");var Z=S.body.getFrameWidth("lr");if(Ext.isIE&&W>0){W+=3}var V=Math.max(Math.min(B.width||W+a+X+Z,this.maxWidth),Math.max(B.minWidth||this.minWidth,M||0));if(B.prompt===true){T.setWidth(V-W-X-Z)}if(B.progress===true||B.wait===true){L.setSize(V-W-X-Z)}if(Ext.isIE&&V==M){V+=4}S.setSize(V,"auto").center();return this},updateProgress:function(W,V,X){L.updateProgress(W,V);if(X){this.updateText(X)}return this},isVisible:function(){return S&&S.isVisible()},hide:function(){var V=S?S.activeGhost:null;if(this.isVisible()||V){S.hide();U();if(V){V.hide()}}return this},show:function(Y){if(this.isVisible()){this.hide()}B=Y;var Z=this.getDialog(B.title||"&#160;");Z.setTitle(B.title||"&#160;");var V=(B.closable!==false&&B.progress!==true&&B.wait!==true);Z.tools.close.setDisplayed(V);T=Q;B.prompt=B.prompt||(B.multiline?true:false);if(B.prompt){if(B.multiline){Q.hide();A.show();A.setHeight(typeof B.multiline=="number"?B.multiline:this.defaultTextHeight);T=A}else{Q.show();A.hide()}}else{Q.hide();A.hide()}T.dom.value=B.value||"";if(B.prompt){Z.focusEl=T}else{var X=B.buttons;var W=null;if(X&&X.ok){W=P.ok}else{if(X&&X.yes){W=P.yes}}if(W){Z.focusEl=W}}if(B.iconCls){Z.setIconClass(B.iconCls)}this.setIcon(B.icon);M=J(B.buttons);L.setVisible(B.progress===true||B.wait===true);this.updateProgress(0,B.progressText);this.updateText(B.msg);if(B.cls){Z.el.addClass(B.cls)}Z.proxyDrag=B.proxyDrag===true;Z.modal=B.modal!==false;Z.mask=B.modal!==false?O:false;if(!Z.isVisible()){document.body.appendChild(S.el.dom);Z.setAnimateTarget(B.animEl);Z.show(B.animEl)}Z.on("show",function(){if(V===true){Z.keyMap.enable()}else{Z.keyMap.disable()}},this,{single:true});if(B.wait===true){L.wait(B.waitConfig)}return this},setIcon:function(V){if(V&&V!=""){I.removeClass("x-hidden");I.replaceClass(D,V);H.addClass("x-dlg-icon");D=V}else{I.replaceClass(D,"x-hidden");H.removeClass("x-dlg-icon");D=""}return this},progress:function(X,W,V){this.show({title:X,msg:W,buttons:false,progress:true,closable:false,minWidth:this.minProgressWidth,progressText:V});return this},wait:function(X,W,V){this.show({title:W,msg:X,buttons:false,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:V});return this},alert:function(Y,X,W,V){this.show({title:Y,msg:X,buttons:this.OK,fn:W,scope:V});return this},confirm:function(Y,X,W,V){this.show({title:Y,msg:X,buttons:this.YESNO,fn:W,scope:V,icon:this.QUESTION});return this},prompt:function(a,Z,X,W,V,Y){this.show({title:a,msg:Z,buttons:this.OKCANCEL,fn:X,minWidth:250,scope:W,prompt:true,multiline:V,value:Y});return this},OK:{ok:true},CANCEL:{cancel:true},OKCANCEL:{ok:true,cancel:true},YESNO:{yes:true,no:true},YESNOCANCEL:{yes:true,no:true,cancel:true},INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,buttonText:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}}}();Ext.Msg=Ext.MessageBox;Ext.Tip=Ext.extend(Ext.Panel,{minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",autoRender:true,quickShowInterval:250,frame:true,hidden:true,baseCls:"x-tip",floating:{shadow:true,shim:true,useDisplay:true,constrain:false},autoHeight:true,initComponent:function(){Ext.Tip.superclass.initComponent.call(this);if(this.closable&&!this.title){this.elements+=",header"}},afterRender:function(){Ext.Tip.superclass.afterRender.call(this);if(this.closable){this.addTool({id:"close",handler:this.hide,scope:this})}},showAt:function(A){Ext.Tip.superclass.show.call(this);if(this.measureWidth!==false&&(!this.initialConfig||typeof this.initialConfig.width!="number")){this.doAutoWidth()}if(this.constrainPosition){A=this.el.adjustForConstraints(A)}this.setPagePosition(A[0],A[1])},doAutoWidth:function(){var A=this.body.getTextWidth();if(this.title){A=Math.max(A,this.header.child("span").getTextWidth(this.title))}A+=this.getFrameWidth()+(this.closable?20:0)+this.body.getPadding("lr");this.setWidth(A.constrain(this.minWidth,this.maxWidth));if(Ext.isIE7&&!this.repainted){this.el.repaint();this.repainted=true}},showBy:function(A,B){if(!this.rendered){this.render(Ext.getBody())}this.showAt(this.el.getAlignToXY(A,B||this.defaultAlign))},initDraggable:function(){this.dd=new Ext.Tip.DD(this,typeof this.draggable=="boolean"?null:this.draggable);this.header.addClass("x-tip-draggable")}});Ext.Tip.DD=function(B,A){Ext.apply(this,A);this.tip=B;Ext.Tip.DD.superclass.constructor.call(this,B.el.id,"WindowDD-"+B.id);this.setHandleElId(B.header.id);this.scroll=false};Ext.extend(Ext.Tip.DD,Ext.dd.DD,{moveOnly:true,scroll:false,headerOffsets:[100,25],startDrag:function(){this.tip.el.disableShadow()},endDrag:function(A){this.tip.el.enableShadow(true)}});Ext.ToolTip=Ext.extend(Ext.Tip,{showDelay:500,hideDelay:200,dismissDelay:5000,mouseOffset:[15,18],trackMouse:false,constrainPosition:true,initComponent:function(){Ext.ToolTip.superclass.initComponent.call(this);this.lastActive=new Date();this.initTarget()},initTarget:function(){if(this.target){this.target=Ext.get(this.target);this.target.on("mouseover",this.onTargetOver,this);this.target.on("mouseout",this.onTargetOut,this);this.target.on("mousemove",this.onMouseMove,this)}},onMouseMove:function(A){this.targetXY=A.getXY();if(!this.hidden&&this.trackMouse){this.setPagePosition(this.getTargetXY())}},getTargetXY:function(){return[this.targetXY[0]+this.mouseOffset[0],this.targetXY[1]+this.mouseOffset[1]]},onTargetOver:function(A){if(this.disabled||A.within(this.target.dom,true)){return}this.clearTimer("hide");this.targetXY=A.getXY();this.delayShow()},delayShow:function(){if(this.hidden&&!this.showTimer){if(this.lastActive.getElapsed()<this.quickShowInterval){this.show()}else{this.showTimer=this.show.defer(this.showDelay,this)}}else{if(!this.hidden&&this.autoHide!==false){this.show()}}},onTargetOut:function(A){if(this.disabled||A.within(this.target.dom,true)){return}this.clearTimer("show");if(this.autoHide!==false){this.delayHide()}},delayHide:function(){if(!this.hidden&&!this.hideTimer){this.hideTimer=this.hide.defer(this.hideDelay,this)}},hide:function(){this.clearTimer("dismiss");this.lastActive=new Date();Ext.ToolTip.superclass.hide.call(this)},show:function(){this.showAt(this.getTargetXY())},showAt:function(A){this.lastActive=new Date();this.clearTimers();Ext.ToolTip.superclass.showAt.call(this,A);if(this.dismissDelay&&this.autoHide!==false){this.dismissTimer=this.hide.defer(this.dismissDelay,this)}},clearTimer:function(A){A=A+"Timer";clearTimeout(this[A]);delete this[A]},clearTimers:function(){this.clearTimer("show");this.clearTimer("dismiss");this.clearTimer("hide")},onShow:function(){Ext.ToolTip.superclass.onShow.call(this);Ext.getDoc().on("mousedown",this.onDocMouseDown,this)},onHide:function(){Ext.ToolTip.superclass.onHide.call(this);Ext.getDoc().un("mousedown",this.onDocMouseDown,this)},onDocMouseDown:function(A){if(this.autoHide!==true&&!A.within(this.el.dom)){this.disable();this.enable.defer(100,this)}},onDisable:function(){this.clearTimers();this.hide()},adjustPosition:function(A,E){var D=this.targetXY[1],B=this.getSize().height;if(this.constrainPosition&&E<=D&&(E+B)>=D){E=D-B-5}return{x:A,y:E}},onDestroy:function(){Ext.ToolTip.superclass.onDestroy.call(this);Ext.getDoc().un("mousedown",this.onDocMouseDown,this);if(this.target){this.target.un("mouseover",this.onTargetOver,this);this.target.un("mouseout",this.onTargetOut,this);this.target.un("mousemove",this.onMouseMove,this)}}});Ext.QuickTip=Ext.extend(Ext.ToolTip,{interceptTitles:false,tagConfig:{namespace:"ext",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign"},initComponent:function(){this.target=this.target||Ext.getDoc();this.targets=this.targets||{};Ext.QuickTip.superclass.initComponent.call(this)},register:function(E){var G=Ext.isArray(E)?E:arguments;for(var F=0,A=G.length;F<A;F++){var I=G[F];var H=I.target;if(H){if(Ext.isArray(H)){for(var D=0,B=H.length;D<B;D++){this.targets[Ext.id(H[D])]=I}}else{this.targets[Ext.id(H)]=I}}}},unregister:function(A){delete this.targets[Ext.id(A)]},onTargetOver:function(H){if(this.disabled){return}this.targetXY=H.getXY();var D=H.getTarget();if(!D||D.nodeType!==1||D==document||D==document.body){return}if(this.activeTarget&&D==this.activeTarget.el){this.clearTimer("hide");this.show();return}if(D&&this.targets[D.id]){this.activeTarget=this.targets[D.id];this.activeTarget.el=D;this.delayShow();return}var F,G=Ext.fly(D),B=this.tagConfig;var E=B.namespace;if(this.interceptTitles&&D.title){F=D.title;D.qtip=F;D.removeAttribute("title");H.preventDefault()}else{F=D.qtip||G.getAttributeNS(E,B.attribute)}if(F){var A=G.getAttributeNS(E,B.hide);this.activeTarget={el:D,text:F,width:G.getAttributeNS(E,B.width),autoHide:A!="user"&&A!=="false",title:G.getAttributeNS(E,B.title),cls:G.getAttributeNS(E,B.cls),align:G.getAttributeNS(E,B.align)};this.delayShow()}},onTargetOut:function(A){this.clearTimer("show");if(this.autoHide!==false){this.delayHide()}},showAt:function(B){var A=this.activeTarget;if(A){if(!this.rendered){this.render(Ext.getBody());this.activeTarget=A}if(A.width){this.setWidth(A.width);this.body.setWidth(this.adjustBodyWidth(A.width-this.getFrameWidth()));this.measureWidth=false}else{this.measureWidth=true}this.setTitle(A.title||"");this.body.update(A.text);this.autoHide=A.autoHide;this.dismissDelay=A.dismissDelay||this.dismissDelay;if(this.lastCls){this.el.removeClass(this.lastCls);delete this.lastCls}if(A.cls){this.el.addClass(A.cls);this.lastCls=A.cls}if(A.align){B=this.el.getAlignToXY(A.el,A.align);this.constrainPosition=false}else{this.constrainPosition=true}}Ext.QuickTip.superclass.showAt.call(this,B)},hide:function(){delete this.activeTarget;Ext.QuickTip.superclass.hide.call(this)}});Ext.QuickTips=function(){var B,A=[];return{init:function(D){if(!B){if(!Ext.isReady){Ext.onReady(function(){Ext.QuickTips.init(D)});return}B=new Ext.QuickTip({elements:"header,body"});if(D!==false){B.render(Ext.getBody())}}},enable:function(){if(B){A.pop();if(A.length<1){B.enable()}}},disable:function(){if(B){B.disable()}A.push(1)},isEnabled:function(){return B!==undefined&&!B.disabled},getQuickTip:function(){return B},register:function(){B.register.apply(B,arguments)},unregister:function(){B.unregister.apply(B,arguments)},tips:function(){B.register.apply(B,arguments)}}}();Ext.tree.TreePanel=Ext.extend(Ext.Panel,{rootVisible:true,animate:Ext.enableFx,lines:true,enableDD:false,hlDrop:Ext.enableFx,pathSeparator:"/",initComponent:function(){Ext.tree.TreePanel.superclass.initComponent.call(this);if(!this.eventModel){this.eventModel=new Ext.tree.TreeEventModel(this)}var A=this.loader;if(!A){A=new Ext.tree.TreeLoader({dataUrl:this.dataUrl})}else{if(typeof A=="object"&&!A.load){A=new Ext.tree.TreeLoader(A)}}this.loader=A;this.nodeHash={};if(this.root){this.setRootNode(this.root)}this.addEvents("append","remove","movenode","insert","beforeappend","beforeremove","beforemovenode","beforeinsert","beforeload","load","textchange","beforeexpandnode","beforecollapsenode","expandnode","disabledchange","collapsenode","beforeclick","click","checkchange","dblclick","contextmenu","beforechildrenrendered","startdrag","enddrag","dragdrop","beforenodedrop","nodedrop","nodedragover");if(this.singleExpand){this.on("beforeexpandnode",this.restrictExpand,this)}},proxyNodeEvent:function(D,B,A,H,G,F,E){if(D=="collapse"||D=="expand"||D=="beforecollapse"||D=="beforeexpand"||D=="move"||D=="beforemove"){D=D+"node"}return this.fireEvent(D,B,A,H,G,F,E)},getRootNode:function(){return this.root},setRootNode:function(B){if(!B.render){B=this.loader.createNode(B)}this.root=B;B.ownerTree=this;B.isRoot=true;this.registerNode(B);if(!this.rootVisible){var A=B.attributes.uiProvider;B.ui=A?new A(B):new Ext.tree.RootTreeNodeUI(B)}return B},getNodeById:function(A){return this.nodeHash[A]},registerNode:function(A){this.nodeHash[A.id]=A},unregisterNode:function(A){delete this.nodeHash[A.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"},restrictExpand:function(A){var B=A.parentNode;if(B){if(B.expandedChild&&B.expandedChild.parentNode==B){B.expandedChild.collapse()}B.expandedChild=A}},getChecked:function(A,B){B=B||this.root;var D=[];var E=function(){if(this.attributes.checked){D.push(!A?this:(A=="id"?this.id:this.attributes[A]))}};B.cascade(E);return D},getEl:function(){return this.el},getLoader:function(){return this.loader},expandAll:function(){this.root.expand(true)},collapseAll:function(){this.root.collapse(true)},getSelectionModel:function(){if(!this.selModel){this.selModel=new Ext.tree.DefaultSelectionModel()}return this.selModel},expandPath:function(G,A,H){A=A||"id";var E=G.split(this.pathSeparator);var D=this.root;if(D.attributes[A]!=E[1]){if(H){H(false,null)}return}var B=1;var F=function(){if(++B==E.length){if(H){H(true,D)}return}var I=D.findChild(A,E[B]);if(!I){if(H){H(false,D)}return}D=I;I.expand(false,false,F)};D.expand(false,false,F)},selectPath:function(F,A,G){A=A||"id";var D=F.split(this.pathSeparator);var B=D.pop();if(D.length>0){var E=function(I,H){if(I&&H){var J=H.findChild(A,B);if(J){J.select();if(G){G(true,J)}}else{if(G){G(false,J)}}}else{if(G){G(false,J)}}};this.expandPath(D.join(this.pathSeparator),A,E)}else{this.root.select();if(G){G(true,this.root)}}},getTreeEl:function(){return this.body},onRender:function(B,A){Ext.tree.TreePanel.superclass.onRender.call(this,B,A);this.el.addClass("x-tree");this.innerCt=this.body.createChild({tag:"ul",cls:"x-tree-root-ct "+(this.useArrows?"x-tree-arrows":this.lines?"x-tree-lines":"x-tree-no-lines")})},initEvents:function(){Ext.tree.TreePanel.superclass.initEvents.call(this);if(this.containerScroll){Ext.dd.ScrollManager.register(this.body)}if((this.enableDD||this.enableDrop)&&!this.dropZone){this.dropZone=new Ext.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||"TreeDD",appendOnly:this.ddAppendOnly===true})}if((this.enableDD||this.enableDrag)&&!this.dragZone){this.dragZone=new Ext.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||"TreeDD",scroll:this.ddScroll})}this.getSelectionModel().init(this)},afterRender:function(){Ext.tree.TreePanel.superclass.afterRender.call(this);this.root.render();if(!this.rootVisible){this.root.renderChildren()}},onDestroy:function(){if(this.rendered){this.body.removeAllListeners();Ext.dd.ScrollManager.unregister(this.body);if(this.dropZone){this.dropZone.unreg()}if(this.dragZone){this.dragZone.unreg()}}this.root.destroy();this.nodeHash=null;Ext.tree.TreePanel.superclass.onDestroy.call(this)}});Ext.tree.TreePanel.nodeTypes={};Ext.reg("treepanel",Ext.tree.TreePanel);Ext.tree.TreeEventModel=function(A){this.tree=A;this.tree.on("render",this.initEvents,this)};Ext.tree.TreeEventModel.prototype={initEvents:function(){var A=this.tree.getTreeEl();A.on("click",this.delegateClick,this);if(this.tree.trackMouseOver!==false){A.on("mouseover",this.delegateOver,this);A.on("mouseout",this.delegateOut,this)}A.on("dblclick",this.delegateDblClick,this);A.on("contextmenu",this.delegateContextMenu,this)},getNode:function(B){var A;if(A=B.getTarget(".x-tree-node-el",10)){var D=Ext.fly(A,"_treeEvents").getAttributeNS("ext","tree-node-id");if(D){return this.tree.getNodeById(D)}}return null},getNodeTarget:function(B){var A=B.getTarget(".x-tree-node-icon",1);if(!A){A=B.getTarget(".x-tree-node-el",6)}return A},delegateOut:function(B,A){if(!this.beforeEvent(B)){return}if(B.getTarget(".x-tree-ec-icon",1)){var D=this.getNode(B);this.onIconOut(B,D);if(D==this.lastEcOver){delete this.lastEcOver}}if((A=this.getNodeTarget(B))&&!B.within(A,true)){this.onNodeOut(B,this.getNode(B))}},delegateOver:function(B,A){if(!this.beforeEvent(B)){return}if(this.lastEcOver){this.onIconOut(B,this.lastEcOver);delete this.lastEcOver}if(B.getTarget(".x-tree-ec-icon",1)){this.lastEcOver=this.getNode(B);this.onIconOver(B,this.lastEcOver)}if(A=this.getNodeTarget(B)){this.onNodeOver(B,this.getNode(B))}},delegateClick:function(B,A){if(!this.beforeEvent(B)){return}if(B.getTarget("input[type=checkbox]",1)){this.onCheckboxClick(B,this.getNode(B))}else{if(B.getTarget(".x-tree-ec-icon",1)){this.onIconClick(B,this.getNode(B))}else{if(this.getNodeTarget(B)){this.onNodeClick(B,this.getNode(B))}}}},delegateDblClick:function(B,A){if(this.beforeEvent(B)&&this.getNodeTarget(B)){this.onNodeDblClick(B,this.getNode(B))}},delegateContextMenu:function(B,A){if(this.beforeEvent(B)&&this.getNodeTarget(B)){this.onNodeContextMenu(B,this.getNode(B))}},onNodeClick:function(B,A){A.ui.onClick(B)},onNodeOver:function(B,A){A.ui.onOver(B)},onNodeOut:function(B,A){A.ui.onOut(B)},onIconOver:function(B,A){A.ui.addClass("x-tree-ec-over")},onIconOut:function(B,A){A.ui.removeClass("x-tree-ec-over")},onIconClick:function(B,A){A.ui.ecClick(B)},onCheckboxClick:function(B,A){A.ui.onCheckChange(B)},onNodeDblClick:function(B,A){A.ui.onDblClick(B)},onNodeContextMenu:function(B,A){A.ui.onContextMenu(B)},beforeEvent:function(A){if(this.disabled){A.stopEvent();return false}return true},disable:function(){this.disabled=true},enable:function(){this.disabled=false}};Ext.tree.DefaultSelectionModel=function(A){this.selNode=null;this.addEvents("selectionchange","beforeselect");Ext.apply(this,A);Ext.tree.DefaultSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.tree.DefaultSelectionModel,Ext.util.Observable,{init:function(A){this.tree=A;A.getTreeEl().on("keydown",this.onKeyDown,this);A.on("click",this.onNodeClick,this)},onNodeClick:function(A,B){this.select(A)},select:function(B){var A=this.selNode;if(B==A){B.ui.onSelectedChange(true)}else{if(this.fireEvent("beforeselect",this,B,A)!==false){if(A){A.ui.onSelectedChange(false)}this.selNode=B;B.ui.onSelectedChange(true);this.fireEvent("selectionchange",this,B,A)}}return B},unselect:function(A){if(this.selNode==A){this.clearSelections()}},clearSelections:function(){var A=this.selNode;if(A){A.ui.onSelectedChange(false);this.selNode=null;this.fireEvent("selectionchange",this,null)}return A},getSelectedNode:function(){return this.selNode},isSelected:function(A){return this.selNode==A},selectPrevious:function(){var A=this.selNode||this.lastSelNode;if(!A){return null}var D=A.previousSibling;if(D){if(!D.isExpanded()||D.childNodes.length<1){return this.select(D)}else{var B=D.lastChild;while(B&&B.isExpanded()&&B.childNodes.length>0){B=B.lastChild}return this.select(B)}}else{if(A.parentNode&&(this.tree.rootVisible||!A.parentNode.isRoot)){return this.select(A.parentNode)}}return null},selectNext:function(){var B=this.selNode||this.lastSelNode;if(!B){return null}if(B.firstChild&&B.isExpanded()){return this.select(B.firstChild)}else{if(B.nextSibling){return this.select(B.nextSibling)}else{if(B.parentNode){var A=null;B.parentNode.bubble(function(){if(this.nextSibling){A=this.getOwnerTree().selModel.select(this.nextSibling);return false}});return A}}}return null},onKeyDown:function(D){var B=this.selNode||this.lastSelNode;var E=this;if(!B){return}var A=D.getKey();switch(A){case D.DOWN:D.stopEvent();this.selectNext();break;case D.UP:D.stopEvent();this.selectPrevious();break;case D.RIGHT:D.preventDefault();if(B.hasChildNodes()){if(!B.isExpanded()){B.expand()}else{if(B.firstChild){this.select(B.firstChild,D)}}}break;case D.LEFT:D.preventDefault();if(B.hasChildNodes()&&B.isExpanded()){B.collapse()}else{if(B.parentNode&&(this.tree.rootVisible||B.parentNode!=this.tree.getRootNode())){this.select(B.parentNode,D)}}break}}});Ext.tree.MultiSelectionModel=function(A){this.selNodes=[];this.selMap={};this.addEvents("selectionchange");Ext.apply(this,A);Ext.tree.MultiSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.tree.MultiSelectionModel,Ext.util.Observable,{init:function(A){this.tree=A;A.getTreeEl().on("keydown",this.onKeyDown,this);A.on("click",this.onNodeClick,this)},onNodeClick:function(A,B){if(B.ctrlKey&&this.isSelected(A)){this.unselect(A)}else{this.select(A,B,B.ctrlKey)}},select:function(A,D,B){if(B!==true){this.clearSelections(true)}if(this.isSelected(A)){this.lastSelNode=A;return A}this.selNodes.push(A);this.selMap[A.id]=A;this.lastSelNode=A;A.ui.onSelectedChange(true);this.fireEvent("selectionchange",this,this.selNodes);return A},unselect:function(B){if(this.selMap[B.id]){B.ui.onSelectedChange(false);var D=this.selNodes;var A=D.indexOf(B);if(A!=-1){this.selNodes.splice(A,1)}delete this.selMap[B.id];this.fireEvent("selectionchange",this,this.selNodes)}},clearSelections:function(B){var E=this.selNodes;if(E.length>0){for(var D=0,A=E.length;D<A;D++){E[D].ui.onSelectedChange(false)}this.selNodes=[];this.selMap={};if(B!==true){this.fireEvent("selectionchange",this,this.selNodes)}}},isSelected:function(A){return this.selMap[A.id]?true:false},getSelectedNodes:function(){return this.selNodes},onKeyDown:Ext.tree.DefaultSelectionModel.prototype.onKeyDown,selectNext:Ext.tree.DefaultSelectionModel.prototype.selectNext,selectPrevious:Ext.tree.DefaultSelectionModel.prototype.selectPrevious});Ext.tree.TreeNode=function(A){A=A||{};if(typeof A=="string"){A={text:A}}this.childrenRendered=false;this.rendered=false;Ext.tree.TreeNode.superclass.constructor.call(this,A);this.expanded=A.expanded===true;this.isTarget=A.isTarget!==false;this.draggable=A.draggable!==false&&A.allowDrag!==false;this.allowChildren=A.allowChildren!==false&&A.allowDrop!==false;this.text=A.text;this.disabled=A.disabled===true;this.hidden=A.hidden===true;this.addEvents("textchange","beforeexpand","beforecollapse","expand","disabledchange","collapse","beforeclick","click","checkchange","dblclick","contextmenu","beforechildrenrendered");var B=this.attributes.uiProvider||this.defaultUI||Ext.tree.TreeNodeUI;this.ui=new B(this)};Ext.extend(Ext.tree.TreeNode,Ext.data.Node,{preventHScroll:true,isExpanded:function(){return this.expanded},getUI:function(){return this.ui},getLoader:function(){var A;return this.loader||((A=this.getOwnerTree())&&A.loader?A.loader:new Ext.tree.TreeLoader())},setFirstChild:function(A){var B=this.firstChild;Ext.tree.TreeNode.superclass.setFirstChild.call(this,A);if(this.childrenRendered&&B&&A!=B){B.renderIndent(true,true)}if(this.rendered){this.renderIndent(true,true)}},setLastChild:function(B){var A=this.lastChild;Ext.tree.TreeNode.superclass.setLastChild.call(this,B);if(this.childrenRendered&&A&&B!=A){A.renderIndent(true,true)}if(this.rendered){this.renderIndent(true,true)}},appendChild:function(B){if(!B.render&&!Ext.isArray(B)){B=this.getLoader().createNode(B)}var A=Ext.tree.TreeNode.superclass.appendChild.call(this,B);if(A&&this.childrenRendered){A.render()}this.ui.updateExpandIcon();return A},removeChild:function(A){this.ownerTree.getSelectionModel().unselect(A);Ext.tree.TreeNode.superclass.removeChild.apply(this,arguments);if(this.childrenRendered){A.ui.remove()}if(this.childNodes.length<1){this.collapse(false,false)}else{this.ui.updateExpandIcon()}if(!this.firstChild&&!this.isHiddenRoot()){this.childrenRendered=false}return A},insertBefore:function(D,A){if(!D.render){D=this.getLoader().createNode(D)}var B=Ext.tree.TreeNode.superclass.insertBefore.apply(this,arguments);if(B&&A&&this.childrenRendered){D.render()}this.ui.updateExpandIcon();return B},setText:function(B){var A=this.text;this.text=B;this.attributes.text=B;if(this.rendered){this.ui.onTextChange(this,B,A)}this.fireEvent("textchange",this,B,A)},select:function(){this.getOwnerTree().getSelectionModel().select(this)},unselect:function(){this.getOwnerTree().getSelectionModel().unselect(this)},isSelected:function(){return this.getOwnerTree().getSelectionModel().isSelected(this)},expand:function(A,B,D){if(!this.expanded){if(this.fireEvent("beforeexpand",this,A,B)===false){return}if(!this.childrenRendered){this.renderChildren()}this.expanded=true;if(!this.isHiddenRoot()&&(this.getOwnerTree().animate&&B!==false)||B){this.ui.animExpand(function(){this.fireEvent("expand",this);if(typeof D=="function"){D(this)}if(A===true){this.expandChildNodes(true)}}.createDelegate(this));return}else{this.ui.expand();this.fireEvent("expand",this);if(typeof D=="function"){D(this)}}}else{if(typeof D=="function"){D(this)}}if(A===true){this.expandChildNodes(true)}},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible},collapse:function(B,F){if(this.expanded&&!this.isHiddenRoot()){if(this.fireEvent("beforecollapse",this,B,F)===false){return}this.expanded=false;if((this.getOwnerTree().animate&&F!==false)||F){this.ui.animCollapse(function(){this.fireEvent("collapse",this);if(B===true){this.collapseChildNodes(true)}}.createDelegate(this));return}else{this.ui.collapse();this.fireEvent("collapse",this)}}if(B===true){var E=this.childNodes;for(var D=0,A=E.length;D<A;D++){E[D].collapse(true,false)}}},delayedExpand:function(A){if(!this.expandProcId){this.expandProcId=this.expand.defer(A,this)}},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId)}this.expandProcId=false},toggle:function(){if(this.expanded){this.collapse()}else{this.expand()}},ensureVisible:function(B){var A=this.getOwnerTree();A.expandPath(this.parentNode?this.parentNode.getPath():this.getPath(),false,function(){var D=A.getNodeById(this.id);A.getTreeEl().scrollChildIntoView(D.ui.anchor);Ext.callback(B)}.createDelegate(this))},expandChildNodes:function(B){var E=this.childNodes;for(var D=0,A=E.length;D<A;D++){E[D].expand(B)}},collapseChildNodes:function(B){var E=this.childNodes;for(var D=0,A=E.length;D<A;D++){E[D].collapse(B)}},disable:function(){this.disabled=true;this.unselect();if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,true)}this.fireEvent("disabledchange",this,true)},enable:function(){this.disabled=false;if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,false)}this.fireEvent("disabledchange",this,false)},renderChildren:function(B){if(B!==false){this.fireEvent("beforechildrenrendered",this)}var E=this.childNodes;for(var D=0,A=E.length;D<A;D++){E[D].render(true)}this.childrenRendered=true},sort:function(F,E){Ext.tree.TreeNode.superclass.sort.apply(this,arguments);if(this.childrenRendered){var D=this.childNodes;for(var B=0,A=D.length;B<A;B++){D[B].render(true)}}},render:function(A){this.ui.render(A);if(!this.rendered){this.getOwnerTree().registerNode(this);this.rendered=true;if(this.expanded){this.expanded=false;this.expand(false,false)}}},renderIndent:function(B,F){if(F){this.ui.childIndent=null}this.ui.renderIndent();if(B===true&&this.childrenRendered){var E=this.childNodes;for(var D=0,A=E.length;D<A;D++){E[D].renderIndent(true,F)}}},beginUpdate:function(){this.childrenRendered=false},endUpdate:function(){if(this.expanded&&this.rendered){this.renderChildren()}},destroy:function(){if(this.childNodes){for(var B=0,A=this.childNodes.length;B<A;B++){this.childNodes[B].destroy()}this.childNodes=null}if(this.ui.destroy){this.ui.destroy()}}});Ext.tree.TreePanel.nodeTypes.node=Ext.tree.TreeNode;Ext.tree.AsyncTreeNode=function(A){this.loaded=A&&A.loaded===true;this.loading=false;Ext.tree.AsyncTreeNode.superclass.constructor.apply(this,arguments);this.addEvents("beforeload","load")};Ext.extend(Ext.tree.AsyncTreeNode,Ext.tree.TreeNode,{expand:function(B,E,G){if(this.loading){var F;var D=function(){if(!this.loading){clearInterval(F);this.expand(B,E,G)}}.createDelegate(this);F=setInterval(D,200);return}if(!this.loaded){if(this.fireEvent("beforeload",this)===false){return}this.loading=true;this.ui.beforeLoad(this);var A=this.loader||this.attributes.loader||this.getOwnerTree().getLoader();if(A){A.load(this,this.loadComplete.createDelegate(this,[B,E,G]));return}}Ext.tree.AsyncTreeNode.superclass.expand.call(this,B,E,G)},isLoading:function(){return this.loading},loadComplete:function(A,B,D){this.loading=false;this.loaded=true;this.ui.afterLoad(this);this.fireEvent("load",this);this.expand(A,B,D)},isLoaded:function(){return this.loaded},hasChildNodes:function(){if(!this.isLeaf()&&!this.loaded){return true}else{return Ext.tree.AsyncTreeNode.superclass.hasChildNodes.call(this)}},reload:function(A){this.collapse(false,false);while(this.firstChild){this.removeChild(this.firstChild).destroy()}this.childrenRendered=false;this.loaded=false;if(this.isHiddenRoot()){this.expanded=false}this.expand(false,false,A)}});Ext.tree.TreePanel.nodeTypes.async=Ext.tree.AsyncTreeNode;Ext.tree.TreeNodeUI=function(A){this.node=A;this.rendered=false;this.animating=false;this.wasLeaf=true;this.ecc="x-tree-ec-icon x-tree-elbow";this.emptyIcon=Ext.BLANK_IMAGE_URL};Ext.tree.TreeNodeUI.prototype={removeChild:function(A){if(this.rendered){this.ctNode.removeChild(A.ui.getEl())}},beforeLoad:function(){this.addClass("x-tree-node-loading")},afterLoad:function(){this.removeClass("x-tree-node-loading")},onTextChange:function(B,D,A){if(this.rendered){this.textNode.innerHTML=D}},onDisableChange:function(A,B){this.disabled=B;if(this.checkbox){this.checkbox.disabled=B}if(B){this.addClass("x-tree-node-disabled")}else{this.removeClass("x-tree-node-disabled")}},onSelectedChange:function(A){if(A){this.focus();this.addClass("x-tree-selected")}else{this.removeClass("x-tree-selected")}},onMove:function(A,H,F,G,E,B){this.childIndent=null;if(this.rendered){var I=G.ui.getContainer();if(!I){this.holder=document.createElement("div");this.holder.appendChild(this.wrap);return}var D=B?B.ui.getEl():null;if(D){I.insertBefore(this.wrap,D)}else{I.appendChild(this.wrap)}this.node.renderIndent(true,G!=F)}},addClass:function(A){if(this.elNode){Ext.fly(this.elNode).addClass(A)}},removeClass:function(A){if(this.elNode){Ext.fly(this.elNode).removeClass(A)}},remove:function(){if(this.rendered){this.holder=document.createElement("div");this.holder.appendChild(this.wrap)}},fireEvent:function(){return this.node.fireEvent.apply(this.node,arguments)},initEvents:function(){this.node.on("move",this.onMove,this);if(this.node.disabled){this.addClass("x-tree-node-disabled");if(this.checkbox){this.checkbox.disabled=true}}if(this.node.hidden){this.hide()}var B=this.node.getOwnerTree();var A=B.enableDD||B.enableDrag||B.enableDrop;if(A&&(!this.node.isRoot||B.rootVisible)){Ext.dd.Registry.register(this.elNode,{node:this.node,handles:this.getDDHandles(),isHandle:false})}},getDDHandles:function(){return[this.iconNode,this.textNode,this.elNode]},hide:function(){this.node.hidden=true;if(this.wrap){this.wrap.style.display="none"}},show:function(){this.node.hidden=false;if(this.wrap){this.wrap.style.display=""}},onContextMenu:function(A){if(this.node.hasListener("contextmenu")||this.node.getOwnerTree().hasListener("contextmenu")){A.preventDefault();this.focus();this.fireEvent("contextmenu",this.node,A)}},onClick:function(B){if(this.dropping){B.stopEvent();return}if(this.fireEvent("beforeclick",this.node,B)!==false){var A=B.getTarget("a");if(!this.disabled&&this.node.attributes.href&&A){this.fireEvent("click",this.node,B);return}else{if(A&&B.ctrlKey){B.stopEvent()}}B.preventDefault();if(this.disabled){return}if(this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()){this.node.toggle()}this.fireEvent("click",this.node,B)}else{B.stopEvent()}},onDblClick:function(A){A.preventDefault();if(this.disabled){return}if(this.checkbox){this.toggleCheck()}if(!this.animating&&this.node.isExpandable()){this.node.toggle()}this.fireEvent("dblclick",this.node,A)},onOver:function(A){this.addClass("x-tree-node-over")},onOut:function(A){this.removeClass("x-tree-node-over")},onCheckChange:function(){var A=this.checkbox.checked;this.checkbox.defaultChecked=A;this.node.attributes.checked=A;this.fireEvent("checkchange",this.node,A)},ecClick:function(A){if(!this.animating&&this.node.isExpandable()){this.node.toggle()}},startDrop:function(){this.dropping=true},endDrop:function(){setTimeout(function(){this.dropping=false}.createDelegate(this),50)},expand:function(){this.updateExpandIcon();this.ctNode.style.display=""},focus:function(){if(!this.node.preventHScroll){try{this.anchor.focus()}catch(D){}}else{try{var B=this.node.getOwnerTree().getTreeEl().dom;var A=B.scrollLeft;this.anchor.focus();B.scrollLeft=A}catch(D){}}},toggleCheck:function(B){var A=this.checkbox;if(A){A.checked=(B===undefined?!A.checked:B);this.onCheckChange()}},blur:function(){try{this.anchor.blur()}catch(A){}},animExpand:function(B){var A=Ext.get(this.ctNode);A.stopFx();if(!this.node.isExpandable()){this.updateExpandIcon();this.ctNode.style.display="";Ext.callback(B);return}this.animating=true;this.updateExpandIcon();A.slideIn("t",{callback:function(){this.animating=false;Ext.callback(B)},scope:this,duration:this.node.ownerTree.duration||0.25})},highlight:function(){var A=this.node.getOwnerTree();Ext.fly(this.wrap).highlight(A.hlColor||"C3DAF9",{endColor:A.hlBaseColor})},collapse:function(){this.updateExpandIcon();this.ctNode.style.display="none"},animCollapse:function(B){var A=Ext.get(this.ctNode);A.enableDisplayMode("block");A.stopFx();this.animating=true;this.updateExpandIcon();A.slideOut("t",{callback:function(){this.animating=false;Ext.callback(B)},scope:this,duration:this.node.ownerTree.duration||0.25})},getContainer:function(){return this.ctNode},getEl:function(){return this.wrap},appendDDGhost:function(A){A.appendChild(this.elNode.cloneNode(true))},getDDRepairXY:function(){return Ext.lib.Dom.getXY(this.iconNode)},onRender:function(){this.render()},render:function(B){var E=this.node,A=E.attributes;var D=E.parentNode?E.parentNode.ui.getContainer():E.ownerTree.innerCt.dom;if(!this.rendered){this.rendered=true;this.renderElements(E,A,D,B);if(A.qtip){if(this.textNode.setAttributeNS){this.textNode.setAttributeNS("ext","qtip",A.qtip);if(A.qtipTitle){this.textNode.setAttributeNS("ext","qtitle",A.qtipTitle)}}else{this.textNode.setAttribute("ext:qtip",A.qtip);if(A.qtipTitle){this.textNode.setAttribute("ext:qtitle",A.qtipTitle)}}}else{if(A.qtipCfg){A.qtipCfg.target=Ext.id(this.textNode);Ext.QuickTips.register(A.qtipCfg)}}this.initEvents();if(!this.node.expanded){this.updateExpandIcon(true)}}else{if(B===true){D.appendChild(this.wrap)}}},renderElements:function(E,J,I,K){this.indentMarkup=E.parentNode?E.parentNode.ui.getChildIndent():"";var F=typeof J.checked=="boolean";var B=J.href?J.href:Ext.isGecko?"":"#";var D=['<li class="x-tree-node"><div ext:tree-node-id="',E.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',J.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img src="',J.icon||this.emptyIcon,'" class="x-tree-node-icon',(J.icon?" x-tree-node-inline-icon":""),(J.iconCls?" "+J.iconCls:""),'" unselectable="on" />',F?('<input class="x-tree-node-cb" type="checkbox" '+(J.checked?'checked="checked" />':"/>")):"",'<a hidefocus="on" class="x-tree-node-anchor" href="',B,'" tabIndex="1" ',J.hrefTarget?' target="'+J.hrefTarget+'"':"",'><span unselectable="on">',E.text,"</span></a></div>",'<ul class="x-tree-node-ct" style="display:none;"></ul>',"</li>"].join("");var A;if(K!==true&&E.nextSibling&&(A=E.nextSibling.ui.getEl())){this.wrap=Ext.DomHelper.insertHtml("beforeBegin",A,D)}else{this.wrap=Ext.DomHelper.insertHtml("beforeEnd",I,D)}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];var H=this.elNode.childNodes;this.indentNode=H[0];this.ecNode=H[1];this.iconNode=H[2];var G=3;if(F){this.checkbox=H[3];this.checkbox.defaultChecked=this.checkbox.checked;G++}this.anchor=H[G];this.textNode=H[G].firstChild},getAnchor:function(){return this.anchor},getTextEl:function(){return this.textNode},getIconEl:function(){return this.iconNode},isChecked:function(){return this.checkbox?this.checkbox.checked:false},updateExpandIcon:function(){if(this.rendered){var F=this.node,E,D;var A=F.isLast()?"x-tree-elbow-end":"x-tree-elbow";if(F.isExpandable()){if(F.expanded){A+="-minus";E="x-tree-node-collapsed";D="x-tree-node-expanded"}else{A+="-plus";E="x-tree-node-expanded";D="x-tree-node-collapsed"}if(this.wasLeaf){this.removeClass("x-tree-node-leaf");this.wasLeaf=false}if(this.c1!=E||this.c2!=D){Ext.fly(this.elNode).replaceClass(E,D);this.c1=E;this.c2=D}}else{if(!this.wasLeaf){Ext.fly(this.elNode).replaceClass("x-tree-node-expanded","x-tree-node-leaf");delete this.c1;delete this.c2;this.wasLeaf=true}}var B="x-tree-ec-icon "+A;if(this.ecc!=B){this.ecNode.className=B;this.ecc=B}}},getChildIndent:function(){if(!this.childIndent){var A=[];var B=this.node;while(B){if(!B.isRoot||(B.isRoot&&B.ownerTree.rootVisible)){if(!B.isLast()){A.unshift('<img src="'+this.emptyIcon+'" class="x-tree-elbow-line" />')}else{A.unshift('<img src="'+this.emptyIcon+'" class="x-tree-icon" />')}}B=B.parentNode}this.childIndent=A.join("")}return this.childIndent},renderIndent:function(){if(this.rendered){var A="";var B=this.node.parentNode;if(B){A=B.ui.getChildIndent()}if(this.indentMarkup!=A){this.indentNode.innerHTML=A;this.indentMarkup=A}this.updateExpandIcon()}},destroy:function(){if(this.elNode){Ext.dd.Registry.unregister(this.elNode.id)}delete this.elNode;delete this.ctNode;delete this.indentNode;delete this.ecNode;delete this.iconNode;delete this.checkbox;delete this.anchor;delete this.textNode;if(this.holder){delete this.wrap;Ext.removeNode(this.holder);delete this.holder}else{Ext.removeNode(this.wrap);delete this.wrap}}};Ext.tree.RootTreeNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{render:function(){if(!this.rendered){var A=this.node.ownerTree.innerCt.dom;this.node.expanded=true;A.innerHTML='<div class="x-tree-root-node"></div>';this.wrap=this.ctNode=A.firstChild}},collapse:Ext.emptyFn,expand:Ext.emptyFn});Ext.tree.TreeLoader=function(A){this.baseParams={};Ext.apply(this,A);this.addEvents("beforeload","load","loadexception");Ext.tree.TreeLoader.superclass.constructor.call(this)};Ext.extend(Ext.tree.TreeLoader,Ext.util.Observable,{uiProviders:{},clearOnLoad:true,load:function(A,B){if(this.clearOnLoad){while(A.firstChild){A.removeChild(A.firstChild)}}if(this.doPreload(A)){if(typeof B=="function"){B()}}else{if(this.dataUrl||this.url){this.requestData(A,B)}}},doPreload:function(E){if(E.attributes.children){if(E.childNodes.length<1){var D=E.attributes.children;E.beginUpdate();for(var B=0,A=D.length;B<A;B++){var F=E.appendChild(this.createNode(D[B]));if(this.preloadChildren){this.doPreload(F)}}E.endUpdate()}return true}else{return false}},getParams:function(E){var A=[],D=this.baseParams;for(var B in D){if(typeof D[B]!="function"){A.push(encodeURIComponent(B),"=",encodeURIComponent(D[B]),"&")}}A.push("node=",encodeURIComponent(E.id));return A.join("")},requestData:function(A,B){if(this.fireEvent("beforeload",this,A,B)!==false){this.transId=Ext.Ajax.request({method:this.requestMethod,url:this.dataUrl||this.url,success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{callback:B,node:A},params:this.getParams(A)})}else{if(typeof B=="function"){B()}}},isLoading:function(){return !!this.transId},abort:function(){if(this.isLoading()){Ext.Ajax.abort(this.transId)}},createNode:function(attr){if(this.baseAttrs){Ext.applyIf(attr,this.baseAttrs)}if(this.applyLoader!==false){attr.loader=this}if(typeof attr.uiProvider=="string"){attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)}if(attr.nodeType){return new Ext.tree.TreePanel.nodeTypes[attr.nodeType](attr)}else{return attr.leaf?new Ext.tree.TreeNode(attr):new Ext.tree.AsyncTreeNode(attr)}},processResponse:function(response,node,callback){var json=response.responseText;try{var o=eval("("+json+")");node.beginUpdate();for(var i=0,len=o.length;i<len;i++){var n=this.createNode(o[i]);if(n){node.appendChild(n)}}node.endUpdate();if(typeof callback=="function"){callback(this,node)}}catch(e){this.handleFailure(response)}},handleResponse:function(B){this.transId=false;var A=B.argument;this.processResponse(B,A.node,A.callback);this.fireEvent("load",this,A.node,B)},handleFailure:function(B){this.transId=false;var A=B.argument;this.fireEvent("loadexception",this,A.node,B);if(typeof A.callback=="function"){A.callback(this,A.node)}}});Ext.tree.TreeFilter=function(A,B){this.tree=A;this.filtered={};Ext.apply(this,B)};Ext.tree.TreeFilter.prototype={clearBlank:false,reverse:false,autoClear:false,remove:false,filter:function(E,A,B){A=A||"text";var D;if(typeof E=="string"){var F=E.length;if(F==0&&this.clearBlank){this.clear();return}E=E.toLowerCase();D=function(G){return G.attributes[A].substr(0,F).toLowerCase()==E}}else{if(E.exec){D=function(G){return E.test(G.attributes[A])}}else{throw"Illegal filter type, must be string or regex"}}this.filterBy(D,null,B)},filterBy:function(E,D,B){B=B||this.tree.root;if(this.autoClear){this.clear()}var A=this.filtered,I=this.reverse;var F=function(K){if(K==B){return true}if(A[K.id]){return false}var J=E.call(D||K,K);if(!J||I){A[K.id]=K;K.ui.hide();return false}return true};B.cascade(F);if(this.remove){for(var H in A){if(typeof H!="function"){var G=A[H];if(G&&G.parentNode){G.parentNode.removeChild(G)}}}}},clear:function(){var B=this.tree;var A=this.filtered;for(var E in A){if(typeof E!="function"){var D=A[E];if(D){D.ui.show()}}}this.filtered={}}};Ext.tree.TreeSorter=function(B,D){Ext.apply(this,D);B.on("beforechildrenrendered",this.doSort,this);B.on("append",this.updateSort,this);B.on("insert",this.updateSort,this);B.on("textchange",this.updateSortParent,this);var F=this.dir&&this.dir.toLowerCase()=="desc";var G=this.property||"text";var H=this.sortType;var A=this.folderSort;var E=this.caseSensitive===true;var I=this.leafAttr||"leaf";this.sortFn=function(K,J){if(A){if(K.attributes[I]&&!J.attributes[I]){return 1}if(!K.attributes[I]&&J.attributes[I]){return -1}}var M=H?H(K):(E?K.attributes[G]:K.attributes[G].toUpperCase());var L=H?H(J):(E?J.attributes[G]:J.attributes[G].toUpperCase());if(M<L){return F?+1:-1}else{if(M>L){return F?-1:+1}else{return 0}}}};Ext.tree.TreeSorter.prototype={doSort:function(A){A.sort(this.sortFn)},compareNodes:function(B,A){return(B.text.toUpperCase()>A.text.toUpperCase()?1:-1)},updateSort:function(A,B){if(B.childrenRendered){this.doSort.defer(1,this,[B])}},updateSortParent:function(A){var B=A.parentNode;if(B&&B.childrenRendered){this.doSort.defer(1,this,[B])}}};if(Ext.dd.DropZone){Ext.tree.TreeDropZone=function(A,B){this.allowParentInsert=B.allowParentInsert||false;this.allowContainerDrop=B.allowContainerDrop||false;this.appendOnly=B.appendOnly||false;Ext.tree.TreeDropZone.superclass.constructor.call(this,A.getTreeEl(),B);this.tree=A;this.dragOverData={};this.lastInsertClass="x-tree-no-status"};Ext.extend(Ext.tree.TreeDropZone,Ext.dd.DropZone,{ddGroup:"TreeDD",expandDelay:1000,expandNode:function(A){if(A.hasChildNodes()&&!A.isExpanded()){A.expand(false,null,this.triggerCacheRefresh.createDelegate(this))}},queueExpand:function(A){this.expandProcId=this.expandNode.defer(this.expandDelay,this,[A])},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId);this.expandProcId=false}},isValidDropPoint:function(A,J,H,E,D){if(!A||!D){return false}var F=A.node;var G=D.node;if(!(F&&F.isTarget&&J)){return false}if(J=="append"&&F.allowChildren===false){return false}if((J=="above"||J=="below")&&(F.parentNode&&F.parentNode.allowChildren===false)){return false}if(G&&(F==G||G.contains(F))){return false}var B=this.dragOverData;B.tree=this.tree;B.target=F;B.data=D;B.point=J;B.source=H;B.rawEvent=E;B.dropNode=G;B.cancel=false;var I=this.tree.fireEvent("nodedragover",B);return B.cancel===false&&I!==false},getDropPoint:function(F,E,J){var K=E.node;if(K.isRoot){return K.allowChildren!==false?"append":false}var B=E.ddel;var L=Ext.lib.Dom.getY(B),H=L+B.offsetHeight;var G=Ext.lib.Event.getPageY(F);var I=K.allowChildren===false||K.isLeaf();if(this.appendOnly||K.parentNode.allowChildren===false){return I?false:"append"}var D=false;if(!this.allowParentInsert){D=K.hasChildNodes()&&K.isExpanded()}var A=(H-L)/(I?2:3);if(G>=L&&G<(L+A)){return"above"}else{if(!D&&(I||G>=H-A&&G<=H)){return"below"}else{return"append"}}},onNodeEnter:function(E,A,D,B){this.cancelExpand()},onContainerOver:function(A,D,B){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",A,D,B)){return this.dropAllowed}return this.dropNotAllowed},onNodeOver:function(B,H,G,F){var J=this.getDropPoint(G,B,H);var D=B.node;if(!this.expandProcId&&J=="append"&&D.hasChildNodes()&&!B.node.isExpanded()){this.queueExpand(D)}else{if(J!="append"){this.cancelExpand()}}var E=this.dropNotAllowed;if(this.isValidDropPoint(B,J,H,G,F)){if(J){var A=B.ddel;var I;if(J=="above"){E=B.node.isFirst()?"x-tree-drop-ok-above":"x-tree-drop-ok-between";I="x-tree-drag-insert-above"}else{if(J=="below"){E=B.node.isLast()?"x-tree-drop-ok-below":"x-tree-drop-ok-between";I="x-tree-drag-insert-below"}else{E="x-tree-drop-ok-append";I="x-tree-drag-append"}}if(this.lastInsertClass!=I){Ext.fly(A).replaceClass(this.lastInsertClass,I);this.lastInsertClass=I}}}return E},onNodeOut:function(E,A,D,B){this.cancelExpand();this.removeDropIndicators(E)},onNodeDrop:function(H,B,G,E){var A=this.getDropPoint(G,H,B);var F=H.node;F.ui.startDrop();if(!this.isValidDropPoint(H,A,B,G,E)){F.ui.endDrop();return false}var D=E.node||(B.getTreeNode?B.getTreeNode(E,F,A,G):null);return this.processDrop(F,E,A,B,G,D)},onContainerDrop:function(A,F,D){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",A,F,D)){var E=this.tree.getRootNode();E.ui.startDrop();var B=D.node||(A.getTreeNode?A.getTreeNode(D,E,"append",F):null);return this.processDrop(E,D,"append",A,F,B)}return false},processDrop:function(I,G,B,A,H,E){var F={tree:this.tree,target:I,data:G,point:B,source:A,rawEvent:H,dropNode:E,cancel:!E,dropStatus:false};var D=this.tree.fireEvent("beforenodedrop",F);if(D===false||F.cancel===true||!F.dropNode){I.ui.endDrop();return F.dropStatus}I=F.target;if(B=="append"&&!I.isExpanded()){I.expand(false,null,function(){this.completeDrop(F)}.createDelegate(this))}else{this.completeDrop(F)}return true},completeDrop:function(H){var E=H.dropNode,F=H.point,D=H.target;if(!Ext.isArray(E)){E=[E]}var G;for(var B=0,A=E.length;B<A;B++){G=E[B];if(F=="above"){D.parentNode.insertBefore(G,D)}else{if(F=="below"){D.parentNode.insertBefore(G,D.nextSibling)}else{D.appendChild(G)}}}G.ui.focus();if(Ext.enableFx&&this.tree.hlDrop){G.ui.highlight()}D.ui.endDrop();this.tree.fireEvent("nodedrop",H)},afterNodeMoved:function(A,D,F,E,B){if(Ext.enableFx&&this.tree.hlDrop){B.ui.focus();B.ui.highlight()}this.tree.fireEvent("nodedrop",this.tree,E,D,A,F)},getTree:function(){return this.tree},removeDropIndicators:function(B){if(B&&B.ddel){var A=B.ddel;Ext.fly(A).removeClass(["x-tree-drag-insert-above","x-tree-drag-insert-below","x-tree-drag-append"]);this.lastInsertClass="_noclass"}},beforeDragDrop:function(B,A,D){this.cancelExpand();return true},afterRepair:function(A){if(A&&Ext.enableFx){A.node.ui.highlight()}this.hideProxy()}})}if(Ext.dd.DragZone){Ext.tree.TreeDragZone=function(A,B){Ext.tree.TreeDragZone.superclass.constructor.call(this,A.innerCt,B);this.tree=A};Ext.extend(Ext.tree.TreeDragZone,Ext.dd.DragZone,{ddGroup:"TreeDD",onBeforeDrag:function(A,B){var D=A.node;return D&&D.draggable&&!D.disabled},onInitDrag:function(B){var A=this.dragData;this.tree.getSelectionModel().select(A.node);this.tree.eventModel.disable();this.proxy.update("");A.node.ui.appendDDGhost(this.proxy.ghost.dom);this.tree.fireEvent("startdrag",this.tree,A.node,B)},getRepairXY:function(B,A){return A.node.ui.getDDRepairXY()},onEndDrag:function(A,B){this.tree.eventModel.enable.defer(100,this.tree.eventModel);this.tree.fireEvent("enddrag",this.tree,A.node,B)},onValidDrop:function(A,B,D){this.tree.fireEvent("dragdrop",this.tree,this.dragData.node,A,B);this.hideProxy()},beforeInvalidDrop:function(A,D){var B=this.tree.getSelectionModel();B.clearSelections();B.select(this.dragData.node)},afterRepair:function(){if(Ext.enableFx&&this.tree.hlDrop){Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9")}this.dragging=false}})}Ext.tree.TreeEditor=function(A,D,B){D=D||{};var E=D.events?D:new Ext.form.TextField(D);Ext.tree.TreeEditor.superclass.constructor.call(this,E,B);this.tree=A;if(!A.rendered){A.on("render",this.initEditor,this)}else{this.initEditor(A)}};Ext.extend(Ext.tree.TreeEditor,Ext.Editor,{alignment:"l-l",autoSize:false,hideEl:false,cls:"x-small-editor x-tree-editor",shim:false,shadow:"frame",maxWidth:250,editDelay:350,initEditor:function(A){A.on("beforeclick",this.beforeNodeClick,this);A.on("dblclick",this.onNodeDblClick,this);this.on("complete",this.updateNode,this);this.on("beforestartedit",this.fitToTree,this);this.on("startedit",this.bindScroll,this,{delay:10});this.on("specialkey",this.onSpecialKey,this)},fitToTree:function(B,D){var F=this.tree.getTreeEl().dom,E=D.dom;if(F.scrollLeft>E.offsetLeft){F.scrollLeft=E.offsetLeft}var A=Math.min(this.maxWidth,(F.clientWidth>20?F.clientWidth:F.offsetWidth)-Math.max(0,E.offsetLeft-F.scrollLeft)-5);this.setSize(A,"")},triggerEdit:function(A,D){this.completeEdit();if(A.attributes.editable!==false){this.editNode=A;if(this.tree.autoScroll){Ext.fly(A.ui.getEl()).scrollIntoView(this.tree.body)}var B=A.text||"";if(!Ext.isGecko&&Ext.isEmpty(A.text)){A.setText("&nbsp;")}this.autoEditTimer=this.startEdit.defer(this.editDelay,this,[A.ui.textNode,B]);return false}},bindScroll:function(){this.tree.getTreeEl().on("scroll",this.cancelEdit,this)},beforeNodeClick:function(A,B){clearTimeout(this.autoEditTimer);if(this.tree.getSelectionModel().isSelected(A)){B.stopEvent();return this.triggerEdit(A)}},onNodeDblClick:function(A,B){clearTimeout(this.autoEditTimer)},updateNode:function(A,B){this.tree.getTreeEl().un("scroll",this.cancelEdit,this);this.editNode.setText(B)},onHide:function(){Ext.tree.TreeEditor.superclass.onHide.call(this);if(this.editNode){this.editNode.ui.focus.defer(50,this.editNode.ui)}},onSpecialKey:function(D,B){var A=B.getKey();if(A==B.ESC){B.stopEvent();this.cancelEdit()}else{if(A==B.ENTER&&!B.hasModifier()){B.stopEvent();this.completeEdit()}}}});Ext.menu.Menu=function(A){if(Ext.isArray(A)){A={items:A}}Ext.apply(this,A);this.id=this.id||Ext.id();this.addEvents("beforeshow","beforehide","show","hide","click","mouseover","mouseout","itemclick");Ext.menu.MenuMgr.register(this);Ext.menu.Menu.superclass.constructor.call(this);var B=this.items;this.items=new Ext.util.MixedCollection();if(B){this.add.apply(this,B)}};Ext.extend(Ext.menu.Menu,Ext.util.Observable,{minWidth:120,shadow:"sides",subMenuAlign:"tl-tr?",defaultAlign:"tl-bl?",allowOtherMenus:false,ignoreParentClicks:false,hidden:true,createEl:function(){return new Ext.Layer({cls:"x-menu",shadow:this.shadow,constrain:false,parentEl:this.parentEl||document.body,zindex:15000})},render:function(){if(this.el){return}var B=this.el=this.createEl();if(!this.keyNav){this.keyNav=new Ext.menu.MenuNav(this)}if(this.plain){B.addClass("x-menu-plain")}if(this.cls){B.addClass(this.cls)}this.focusEl=B.createChild({tag:"a",cls:"x-menu-focus",href:"#",onclick:"return false;",tabIndex:"-1"});var A=B.createChild({tag:"ul",cls:"x-menu-list"});A.on("click",this.onClick,this);A.on("mouseover",this.onMouseOver,this);A.on("mouseout",this.onMouseOut,this);this.items.each(function(E){var D=document.createElement("li");D.className="x-menu-list-item";A.dom.appendChild(D);E.render(D,this)},this);this.ul=A;this.autoWidth()},autoWidth:function(){var E=this.el,D=this.ul;if(!E){return}var A=this.width;if(A){E.setWidth(A)}else{if(Ext.isIE&&!Ext.isIE8){E.setWidth(this.minWidth);var B=E.dom.offsetWidth;E.setWidth(D.getWidth()+E.getFrameWidth("lr"))}}},delayAutoWidth:function(){if(this.el){if(!this.awTask){this.awTask=new Ext.util.DelayedTask(this.autoWidth,this)}this.awTask.delay(20)}},findTargetItem:function(B){var A=B.getTarget(".x-menu-list-item",this.ul,true);if(A&&A.menuItemId){return this.items.get(A.menuItemId)}},onClick:function(B){var A;if(A=this.findTargetItem(B)){if(A.menu&&this.ignoreParentClicks){A.expandMenu()}else{A.onClick(B);this.fireEvent("click",this,A,B)}}},setActiveItem:function(A,B){if(A!=this.activeItem){if(this.activeItem){this.activeItem.deactivate()}this.activeItem=A;A.activate(B)}else{if(B){A.expandMenu()}}},tryActivate:function(G,F){var B=this.items;for(var D=G,A=B.length;D>=0&&D<A;D+=F){var E=B.get(D);if(!E.disabled&&E.canActivate){this.setActiveItem(E,false);return E}}return false},onMouseOver:function(B){var A;if(A=this.findTargetItem(B)){if(A.canActivate&&!A.disabled){this.setActiveItem(A,true)}}this.over=true;this.fireEvent("mouseover",this,B,A)},onMouseOut:function(B){var A;if(A=this.findTargetItem(B)){if(A==this.activeItem&&A.shouldDeactivate(B)){this.activeItem.deactivate();delete this.activeItem}}this.over=false;this.fireEvent("mouseout",this,B,A)},isVisible:function(){return this.el&&!this.hidden},show:function(B,D,A){this.parentMenu=A;if(!this.el){this.render()}this.fireEvent("beforeshow",this);this.showAt(this.el.getAlignToXY(B,D||this.defaultAlign),A,false)},showAt:function(D,B,A){this.parentMenu=B;if(!this.el){this.render()}if(A!==false){this.fireEvent("beforeshow",this);D=this.el.adjustForConstraints(D)}this.el.setXY(D);this.el.show();this.hidden=false;this.focus();this.fireEvent("show",this)},focus:function(){if(!this.hidden){this.doFocus.defer(50,this)}},doFocus:function(){if(!this.hidden){this.focusEl.focus()}},hide:function(A){if(this.el&&this.isVisible()){this.fireEvent("beforehide",this);if(this.activeItem){this.activeItem.deactivate();this.activeItem=null}this.el.hide();this.hidden=true;this.fireEvent("hide",this)}if(A===true&&this.parentMenu){this.parentMenu.hide(true)}},add:function(){var B=arguments,A=B.length,F;for(var D=0;D<A;D++){var E=B[D];if(E.render){F=this.addItem(E)}else{if(typeof E=="string"){if(E=="separator"||E=="-"){F=this.addSeparator()}else{F=this.addText(E)}}else{if(E.tagName||E.el){F=this.addElement(E)}else{if(typeof E=="object"){Ext.applyIf(E,this.defaults);F=this.addMenuItem(E)}}}}}return F},getEl:function(){if(!this.el){this.render()}return this.el},addSeparator:function(){return this.addItem(new Ext.menu.Separator())},addElement:function(A){return this.addItem(new Ext.menu.BaseItem(A))},addItem:function(B){this.items.add(B);if(this.ul){var A=document.createElement("li");A.className="x-menu-list-item";this.ul.dom.appendChild(A);B.render(A,this);this.delayAutoWidth()}return B},addMenuItem:function(A){if(!(A instanceof Ext.menu.Item)){if(typeof A.checked=="boolean"){A=new Ext.menu.CheckItem(A)}else{A=new Ext.menu.Item(A)}}return this.addItem(A)},addText:function(A){return this.addItem(new Ext.menu.TextItem(A))},insert:function(B,D){this.items.insert(B,D);if(this.ul){var A=document.createElement("li");A.className="x-menu-list-item";this.ul.dom.insertBefore(A,this.ul.dom.childNodes[B]);D.render(A,this);this.delayAutoWidth()}return D},remove:function(A){this.items.removeKey(A.id);A.destroy()},removeAll:function(){if(this.items){var A;while(A=this.items.first()){this.remove(A)}}},destroy:function(){this.beforeDestroy();Ext.menu.MenuMgr.unregister(this);if(this.keyNav){this.keyNav.disable()}this.removeAll();if(this.ul){this.ul.removeAllListeners()}if(this.el){this.el.destroy()}},beforeDestroy:Ext.emptyFn});Ext.menu.MenuNav=function(A){Ext.menu.MenuNav.superclass.constructor.call(this,A.el);this.scope=this.menu=A};Ext.extend(Ext.menu.MenuNav,Ext.KeyNav,{doRelay:function(D,B){var A=D.getKey();if(!this.menu.activeItem&&D.isNavKeyPress()&&A!=D.SPACE&&A!=D.RETURN){this.menu.tryActivate(0,1);return false}return B.call(this.scope||this,D,this.menu)},up:function(B,A){if(!A.tryActivate(A.items.indexOf(A.activeItem)-1,-1)){A.tryActivate(A.items.length-1,-1)}},down:function(B,A){if(!A.tryActivate(A.items.indexOf(A.activeItem)+1,1)){A.tryActivate(0,1)}},right:function(B,A){if(A.activeItem){A.activeItem.expandMenu(true)}},left:function(B,A){A.hide();if(A.parentMenu&&A.parentMenu.activeItem){A.parentMenu.activeItem.activate()}},enter:function(B,A){if(A.activeItem){B.stopPropagation();A.activeItem.onClick(B);A.fireEvent("click",this,A.activeItem);return true}}});Ext.menu.MenuMgr=function(){var G,E,D={},A=false,L=new Date();function N(){G={};E=new Ext.util.MixedCollection();Ext.getDoc().addKeyListener(27,function(){if(E.length>0){I()}})}function I(){if(E&&E.length>0){var O=E.clone();O.each(function(P){P.hide()})}}function F(O){E.remove(O);if(E.length<1){Ext.getDoc().un("mousedown",M);A=false}}function K(O){var P=E.last();L=new Date();E.add(O);if(!A){Ext.getDoc().on("mousedown",M);A=true}if(O.parentMenu){O.getEl().setZIndex(parseInt(O.parentMenu.getEl().getStyle("z-index"),10)+3);O.parentMenu.activeChild=O}else{if(P&&P.isVisible()){O.getEl().setZIndex(parseInt(P.getEl().getStyle("z-index"),10)+3)}}}function B(O){if(O.activeChild){O.activeChild.hide()}if(O.autoHideTimer){clearTimeout(O.autoHideTimer);delete O.autoHideTimer}}function H(O){var P=O.parentMenu;if(!P&&!O.allowOtherMenus){I()}else{if(P&&P.activeChild){P.activeChild.hide()}}}function M(O){if(L.getElapsed()>50&&E.length>0&&!O.getTarget(".x-menu")){I()}}function J(P,S){if(S){var R=D[P.group];for(var Q=0,O=R.length;Q<O;Q++){if(R[Q]!=P){R[Q].setChecked(false)}}}}return{hideAll:function(){I()},register:function(P){if(!G){N()}G[P.id]=P;P.on("beforehide",B);P.on("hide",F);P.on("beforeshow",H);P.on("show",K);var O=P.group;if(O&&P.events.checkchange){if(!D[O]){D[O]=[]}D[O].push(P);P.on("checkchange",onCheck)}},get:function(O){if(typeof O=="string"){if(!G){return null}return G[O]}else{if(O.events){return O}else{if(typeof O.length=="number"){return new Ext.menu.Menu({items:O})}else{return new Ext.menu.Menu(O)}}}},unregister:function(P){delete G[P.id];P.un("beforehide",B);P.un("hide",F);P.un("beforeshow",H);P.un("show",K);var O=P.group;if(O&&P.events.checkchange){D[O].remove(P);P.un("checkchange",onCheck)}},registerCheckable:function(O){var P=O.group;if(P){if(!D[P]){D[P]=[]}D[P].push(O);O.on("beforecheckchange",J)}},unregisterCheckable:function(O){var P=O.group;if(P){D[P].remove(O);O.un("beforecheckchange",J)}},getCheckedItem:function(Q){var R=D[Q];if(R){for(var P=0,O=R.length;P<O;P++){if(R[P].checked){return R[P]}}}return null},setCheckedItem:function(Q,S){var R=D[Q];if(R){for(var P=0,O=R.length;P<O;P++){if(R[P].id==S){R[P].setChecked(true)}}}return null}}}();Ext.menu.BaseItem=function(A){Ext.menu.BaseItem.superclass.constructor.call(this,A);this.addEvents("click","activate","deactivate");if(this.handler){this.on("click",this.handler,this.scope)}};Ext.extend(Ext.menu.BaseItem,Ext.Component,{canActivate:false,activeClass:"x-menu-item-active",hideOnClick:true,hideDelay:100,ctype:"Ext.menu.BaseItem",actionMode:"container",destroy:function(){if(this.menu){this.menu.destroy()}Ext.menu.BaseItem.superclass.destroy.call(this)},render:function(A,B){this.parentMenu=B;Ext.menu.BaseItem.superclass.render.call(this,A);this.container.menuItemId=this.id},onRender:function(B,A){this.el=Ext.get(this.el);if(this.id){this.el.id=this.id}B.dom.appendChild(this.el.dom)},setHandler:function(B,A){if(this.handler){this.un("click",this.handler,this.scope)}this.on("click",this.handler=B,this.scope=A)},onClick:function(A){if(!this.disabled&&this.fireEvent("click",this,A)!==false&&this.parentMenu.fireEvent("itemclick",this,A)!==false){this.handleClick(A)}else{A.stopEvent()}},activate:function(){if(this.disabled){return false}var A=this.container;A.addClass(this.activeClass);this.region=A.getRegion().adjust(2,2,-2,-2);this.fireEvent("activate",this);return true},deactivate:function(){this.container.removeClass(this.activeClass);this.fireEvent("deactivate",this)},shouldDeactivate:function(A){return !this.region||!this.region.contains(A.getPoint())},handleClick:function(A){if(this.hideOnClick){this.parentMenu.hide.defer(this.hideDelay,this.parentMenu,[true])}},expandMenu:function(A){},hideMenu:function(){}});Ext.menu.TextItem=function(A){if(typeof A=="string"){A={text:A}}Ext.menu.TextItem.superclass.constructor.call(this,A)};Ext.extend(Ext.menu.TextItem,Ext.menu.BaseItem,{hideOnClick:false,itemCls:"x-menu-text",onRender:function(){var A=document.createElement("span");A.className=this.itemCls;A.innerHTML=this.text;this.el=A;Ext.menu.TextItem.superclass.onRender.apply(this,arguments)}});Ext.menu.Separator=function(A){Ext.menu.Separator.superclass.constructor.call(this,A)};Ext.extend(Ext.menu.Separator,Ext.menu.BaseItem,{itemCls:"x-menu-sep",hideOnClick:false,onRender:function(A){var B=document.createElement("span");B.className=this.itemCls;B.innerHTML="&#160;";this.el=B;A.addClass("x-menu-sep-li");Ext.menu.Separator.superclass.onRender.apply(this,arguments)}});Ext.menu.Item=function(A){Ext.menu.Item.superclass.constructor.call(this,A);if(this.menu){this.menu=Ext.menu.MenuMgr.get(this.menu)}};Ext.extend(Ext.menu.Item,Ext.menu.BaseItem,{itemCls:"x-menu-item",canActivate:true,showDelay:200,hideDelay:200,ctype:"Ext.menu.Item",onRender:function(B,A){var D=document.createElement("a");D.hideFocus=true;D.unselectable="on";D.href=this.href||"#";if(this.hrefTarget){D.target=this.hrefTarget}D.className=this.itemCls+(this.menu?" x-menu-item-arrow":"")+(this.cls?" "+this.cls:"");D.innerHTML=String.format('<img src="{0}" class="x-menu-item-icon {2}" />{1}',this.icon||Ext.BLANK_IMAGE_URL,this.itemText||this.text,this.iconCls||"");this.el=D;Ext.menu.Item.superclass.onRender.call(this,B,A)},setText:function(A){this.text=A;if(this.rendered){this.el.update(String.format('<img src="{0}" class="x-menu-item-icon {2}">{1}',this.icon||Ext.BLANK_IMAGE_URL,this.text,this.iconCls||""));this.parentMenu.autoWidth()}},setIconClass:function(A){var B=this.iconCls;this.iconCls=A;if(this.rendered){this.el.child("img.x-menu-item-icon").replaceClass(B,this.iconCls)}},beforeDestroy:function(){if(this.menu){this.menu.destroy()}Ext.menu.Item.superclass.beforeDestroy.call(this)},handleClick:function(A){if(!this.href){A.stopEvent()}Ext.menu.Item.superclass.handleClick.apply(this,arguments)},activate:function(A){if(Ext.menu.Item.superclass.activate.apply(this,arguments)){this.focus();if(A){this.expandMenu()}}return true},shouldDeactivate:function(A){if(Ext.menu.Item.superclass.shouldDeactivate.call(this,A)){if(this.menu&&this.menu.isVisible()){return !this.menu.getEl().getRegion().contains(A.getPoint())}return true}return false},deactivate:function(){Ext.menu.Item.superclass.deactivate.apply(this,arguments);this.hideMenu()},expandMenu:function(A){if(!this.disabled&&this.menu){clearTimeout(this.hideTimer);delete this.hideTimer;if(!this.menu.isVisible()&&!this.showTimer){this.showTimer=this.deferExpand.defer(this.showDelay,this,[A])}else{if(this.menu.isVisible()&&A){this.menu.tryActivate(0,1)}}}},deferExpand:function(A){delete this.showTimer;this.menu.show(this.container,this.parentMenu.subMenuAlign||"tl-tr?",this.parentMenu);if(A){this.menu.tryActivate(0,1)}},hideMenu:function(){clearTimeout(this.showTimer);delete this.showTimer;if(!this.hideTimer&&this.menu&&this.menu.isVisible()){this.hideTimer=this.deferHide.defer(this.hideDelay,this)}},deferHide:function(){delete this.hideTimer;if(this.menu.over){this.parentMenu.setActiveItem(this,false)}else{this.menu.hide()}}});Ext.menu.CheckItem=function(A){Ext.menu.CheckItem.superclass.constructor.call(this,A);this.addEvents("beforecheckchange","checkchange");if(this.checkHandler){this.on("checkchange",this.checkHandler,this.scope)}Ext.menu.MenuMgr.registerCheckable(this)};Ext.extend(Ext.menu.CheckItem,Ext.menu.Item,{itemCls:"x-menu-item x-menu-check-item",groupClass:"x-menu-group-item",checked:false,ctype:"Ext.menu.CheckItem",onRender:function(A){Ext.menu.CheckItem.superclass.onRender.apply(this,arguments);if(this.group){this.el.addClass(this.groupClass)}if(this.checked){this.checked=false;this.setChecked(true,true)}},destroy:function(){Ext.menu.MenuMgr.unregisterCheckable(this);Ext.menu.CheckItem.superclass.destroy.apply(this,arguments)},setChecked:function(B,A){if(this.checked!=B&&this.fireEvent("beforecheckchange",this,B)!==false){if(this.container){this.container[B?"addClass":"removeClass"]("x-menu-item-checked")}this.checked=B;if(A!==true){this.fireEvent("checkchange",this,B)}}},handleClick:function(A){if(!this.disabled&&!(this.checked&&this.group)){this.setChecked(!this.checked)}Ext.menu.CheckItem.superclass.handleClick.apply(this,arguments)}});Ext.menu.Adapter=function(B,A){Ext.menu.Adapter.superclass.constructor.call(this,A);this.component=B};Ext.extend(Ext.menu.Adapter,Ext.menu.BaseItem,{canActivate:true,onRender:function(B,A){this.component.render(B);this.el=this.component.getEl()},activate:function(){if(this.disabled){return false}this.component.focus();this.fireEvent("activate",this);return true},deactivate:function(){this.fireEvent("deactivate",this)},disable:function(){this.component.disable();Ext.menu.Adapter.superclass.disable.call(this)},enable:function(){this.component.enable();Ext.menu.Adapter.superclass.enable.call(this)}});Ext.menu.DateItem=function(A){Ext.menu.DateItem.superclass.constructor.call(this,new Ext.DatePicker(A),A);this.picker=this.component;this.picker.purgeListeners();this.addEvents("select");this.picker.on("render",function(B){B.getEl().swallowEvent("click");B.container.addClass("x-menu-date-item")});this.picker.on("select",this.onSelect,this)};Ext.extend(Ext.menu.DateItem,Ext.menu.Adapter,{onSelect:function(B,A){this.fireEvent("select",this,A,B);Ext.menu.DateItem.superclass.handleClick.call(this)}});Ext.menu.ColorItem=function(A){Ext.menu.ColorItem.superclass.constructor.call(this,new Ext.ColorPalette(A),A);this.palette=this.component;this.palette.purgeListeners();this.relayEvents(this.palette,["select"]);if(this.selectHandler){this.on("select",this.selectHandler,this.scope)}};Ext.extend(Ext.menu.ColorItem,Ext.menu.Adapter);Ext.menu.DateMenu=function(A){Ext.menu.DateMenu.superclass.constructor.call(this,A);this.plain=true;var B=new Ext.menu.DateItem(A);this.add(B);this.picker=B.picker;this.relayEvents(B,["select"]);this.on("beforeshow",function(){if(this.picker){this.picker.hideMonthPicker(true)}},this)};Ext.extend(Ext.menu.DateMenu,Ext.menu.Menu,{cls:"x-date-menu",beforeDestroy:function(){this.picker.destroy()}});Ext.menu.ColorMenu=function(A){Ext.menu.ColorMenu.superclass.constructor.call(this,A);this.plain=true;var B=new Ext.menu.ColorItem(A);this.add(B);this.palette=B.palette;this.relayEvents(B,["select"])};Ext.extend(Ext.menu.ColorMenu,Ext.menu.Menu,{beforeDestroy:function(){this.palette.destroy()}});Ext.form.Field=Ext.extend(Ext.BoxComponent,{invalidClass:"x-form-invalid",invalidText:"The value in this field is invalid",focusClass:"x-form-focus",validationEvent:"keyup",validateOnBlur:true,validationDelay:250,defaultAutoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off"},fieldClass:"x-form-field",msgTarget:"qtip",msgFx:"normal",readOnly:false,disabled:false,isFormField:true,hasFocus:false,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this);this.addEvents("focus","blur","specialkey","change","invalid","valid")},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:this.name||this.id||""},onRender:function(D,A){Ext.form.Field.superclass.onRender.call(this,D,A);if(!this.el){var B=this.getAutoCreate();if(!B.name){B.name=this.name||this.id}if(this.inputType){B.type=this.inputType}this.el=D.createChild(B,A)}var E=this.el.dom.type;if(E){if(E=="password"){E="text"}this.el.addClass("x-form-"+E)}if(this.readOnly){this.el.dom.readOnly=true}if(this.tabIndex!==undefined){this.el.dom.setAttribute("tabIndex",this.tabIndex)}this.el.addClass([this.fieldClass,this.cls])},initValue:function(){if(this.value!==undefined){this.setValue(this.value)}else{if(!Ext.isEmpty(this.el.dom.value)&&this.el.dom.value!=this.emptyText){this.setValue(this.el.dom.value)}}this.originalValue=this.getValue()},isDirty:function(){if(this.disabled||!this.rendered){return false}return String(this.getValue())!==String(this.originalValue)},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this);this.initEvents();this.initValue()},fireKey:function(A){if(A.isSpecialKey()){this.fireEvent("specialkey",this,A)}},reset:function(){this.setValue(this.originalValue);this.clearInvalid()},initEvents:function(){this.el.on(Ext.isIE||(Ext.isWebKit&&!Ext.isSafari2)?"keydown":"keypress",this.fireKey,this);this.el.on("focus",this.onFocus,this);var A=this.inEditor&&Ext.isWindows&&Ext.isGecko?{buffer:10}:null;this.el.on("blur",this.onBlur,this,A)},onFocus:function(){if(this.focusClass){this.el.addClass(this.focusClass)}if(!this.hasFocus){this.hasFocus=true;this.startValue=this.getValue();this.fireEvent("focus",this)}},beforeBlur:Ext.emptyFn,onBlur:function(){this.beforeBlur();if(this.focusClass){this.el.removeClass(this.focusClass)}this.hasFocus=false;if(this.validationEvent!==false&&this.validateOnBlur&&this.validationEvent!="blur"){this.validate()}var A=this.getValue();if(String(A)!==String(this.startValue)){this.fireEvent("change",this,A,this.startValue)}this.fireEvent("blur",this)},isValid:function(A){if(this.disabled){return true}var D=this.preventMark;this.preventMark=A===true;var B=this.validateValue(this.processValue(this.getRawValue()));this.preventMark=D;return B},validate:function(){if(this.disabled||this.validateValue(this.processValue(this.getRawValue()))){this.clearInvalid();return true}return false},processValue:function(A){return A},validateValue:function(A){return true},markInvalid:function(D){if(!this.rendered||this.preventMark){return}this.el.addClass(this.invalidClass);D=D||this.invalidText;switch(this.msgTarget){case"qtip":this.el.dom.qtip=D;this.el.dom.qclass="x-form-invalid-tip";if(Ext.QuickTips){Ext.QuickTips.enable()}break;case"title":this.el.dom.title=D;break;case"under":if(!this.errorEl){var B=this.getErrorCt();if(!B){this.el.dom.title=D;break}this.errorEl=B.createChild({cls:"x-form-invalid-msg"});this.errorEl.setWidth(B.getWidth(true)-20)}this.errorEl.update(D);Ext.form.Field.msgFx[this.msgFx].show(this.errorEl,this);break;case"side":if(!this.errorIcon){var B=this.getErrorCt();if(!B){this.el.dom.title=D;break}this.errorIcon=B.createChild({cls:"x-form-invalid-icon"})}this.alignErrorIcon();this.errorIcon.dom.qtip=D;this.errorIcon.dom.qclass="x-form-invalid-tip";this.errorIcon.show();this.on("resize",this.alignErrorIcon,this);break;default:var A=Ext.getDom(this.msgTarget);A.innerHTML=D;A.style.display=this.msgDisplay;break}this.fireEvent("invalid",this,D)},getErrorCt:function(){return this.el.findParent(".x-form-element",5,true)||this.el.findParent(".x-form-field-wrap",5,true)},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,"tl-tr",[2,0])},clearInvalid:function(){if(!this.rendered||this.preventMark){return}this.el.removeClass(this.invalidClass);switch(this.msgTarget){case"qtip":this.el.dom.qtip="";break;case"title":this.el.dom.title="";break;case"under":if(this.errorEl){Ext.form.Field.msgFx[this.msgFx].hide(this.errorEl,this)}break;case"side":if(this.errorIcon){this.errorIcon.dom.qtip="";this.errorIcon.hide();this.un("resize",this.alignErrorIcon,this)}break;default:var A=Ext.getDom(this.msgTarget);A.innerHTML="";A.style.display="none";break}this.fireEvent("valid",this)},getRawValue:function(){var A=this.rendered?this.el.getValue():Ext.value(this.value,"");if(A===this.emptyText){A=""}return A},getValue:function(){if(!this.rendered){return this.value}var A=this.el.getValue();if(A===this.emptyText||A===undefined){A=""}return A},setRawValue:function(A){return this.el.dom.value=(A===null||A===undefined?"":A)},setValue:function(A){this.value=A;if(this.rendered){this.el.dom.value=(A===null||A===undefined?"":A);this.validate()}},adjustSize:function(A,D){var B=Ext.form.Field.superclass.adjustSize.call(this,A,D);B.width=this.adjustWidth(this.el.dom.tagName,B.width);return B},adjustWidth:function(A,B){A=A.toLowerCase();if(typeof B=="number"&&!Ext.isWebKit){if(Ext.isIE&&(A=="input"||A=="textarea")){if(A=="input"&&!Ext.isStrict){return this.inEditor?B:B-3}if(A=="input"&&Ext.isStrict){return B-(Ext.isIE6?4:1)}if(A=="textarea"&&Ext.isStrict){return B-2}}else{if(Ext.isOpera&&Ext.isStrict){if(A=="input"){return B+2}if(A=="textarea"){return B-2}}}}return B}});Ext.form.MessageTargets={qtip:{mark:function(A){this.el.dom.qtip=msg;this.el.dom.qclass="x-form-invalid-tip";if(Ext.QuickTips){Ext.QuickTips.enable()}},clear:function(A){this.el.dom.qtip=""}},title:{mark:function(A){this.el.dom.title=msg},clear:function(A){this.el.dom.title=""}},under:{mark:function(B){if(!this.errorEl){var A=this.getErrorCt();if(!A){this.el.dom.title=msg;return}this.errorEl=A.createChild({cls:"x-form-invalid-msg"});this.errorEl.setWidth(A.getWidth(true)-20)}this.errorEl.update(msg);Ext.form.Field.msgFx[this.msgFx].show(this.errorEl,this)},clear:function(A){if(this.errorEl){Ext.form.Field.msgFx[this.msgFx].hide(this.errorEl,this)}else{this.el.dom.title=""}}},side:{mark:function(B){if(!this.errorIcon){var A=this.getErrorCt();if(!A){this.el.dom.title=msg;return}this.errorIcon=A.createChild({cls:"x-form-invalid-icon"})}this.alignErrorIcon();this.errorIcon.dom.qtip=msg;this.errorIcon.dom.qclass="x-form-invalid-tip";this.errorIcon.show();this.on("resize",this.alignErrorIcon,this)},clear:function(A){if(this.errorIcon){this.errorIcon.dom.qtip="";this.errorIcon.hide();this.un("resize",this.alignErrorIcon,this)}else{this.el.dom.title=""}}},around:{mark:function(A){},clear:function(A){}}};Ext.form.Field.msgFx={normal:{show:function(A,B){A.setDisplayed("block")},hide:function(A,B){A.setDisplayed(false).update("")}},slide:{show:function(A,B){A.slideIn("t",{stopFx:true})},hide:function(A,B){A.slideOut("t",{stopFx:true,useDisplay:true})}},slideRight:{show:function(A,B){A.fixDisplay();A.alignTo(B.el,"tl-tr");A.slideIn("l",{stopFx:true})},hide:function(A,B){A.slideOut("l",{stopFx:true,useDisplay:true})}}};Ext.reg("field",Ext.form.Field);Ext.form.TextField=Ext.extend(Ext.form.Field,{grow:false,growMin:30,growMax:800,vtype:null,maskRe:null,disableKeyFilter:false,allowBlank:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",selectOnFocus:false,blankText:"This field is required",validator:null,regex:null,regexText:"",emptyText:null,emptyClass:"x-form-empty-field",initComponent:function(){Ext.form.TextField.superclass.initComponent.call(this);this.addEvents("autosize","keydown","keyup","keypress")},initEvents:function(){Ext.form.TextField.superclass.initEvents.call(this);if(this.validationEvent=="keyup"){this.validationTask=new Ext.util.DelayedTask(this.validate,this);this.el.on("keyup",this.filterValidation,this)}else{if(this.validationEvent!==false){this.el.on(this.validationEvent,this.validate,this,{buffer:this.validationDelay})}}if(this.selectOnFocus||this.emptyText){this.on("focus",this.preFocus,this);this.el.on("mousedown",function(){if(!this.hasFocus){this.el.on("mouseup",function(A){A.preventDefault()},this,{single:true})}},this);if(this.emptyText){this.on("blur",this.postBlur,this);this.applyEmptyText()}}if(this.maskRe||(this.vtype&&this.disableKeyFilter!==true&&(this.maskRe=Ext.form.VTypes[this.vtype+"Mask"]))){this.el.on("keypress",this.filterKeys,this)}if(this.grow){this.el.on("keyup",this.onKeyUpBuffered,this,{buffer:50});this.el.on("click",this.autoSize,this)}if(this.enableKeyEvents){this.el.on("keyup",this.onKeyUp,this);this.el.on("keydown",this.onKeyDown,this);this.el.on("keypress",this.onKeyPress,this)}},processValue:function(A){if(this.stripCharsRe){var B=A.replace(this.stripCharsRe,"");if(B!==A){this.setRawValue(B);return B}}return A},filterValidation:function(A){if(!A.isNavKeyPress()){this.validationTask.delay(this.validationDelay)}},onDisable:function(){Ext.form.TextField.superclass.onDisable.call(this);if(Ext.isIE){this.el.dom.unselectable="on"}},onEnable:function(){Ext.form.TextField.superclass.onEnable.call(this);if(Ext.isIE){this.el.dom.unselectable=""}},onKeyUpBuffered:function(A){if(!A.isNavKeyPress()){this.autoSize()}},onKeyUp:function(A){this.fireEvent("keyup",this,A)},onKeyDown:function(A){this.fireEvent("keydown",this,A)},onKeyPress:function(A){this.fireEvent("keypress",this,A)},reset:function(){Ext.form.TextField.superclass.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){if(this.rendered&&this.emptyText&&this.getRawValue().length<1&&!this.hasFocus){this.setRawValue(this.emptyText);this.el.addClass(this.emptyClass)}},preFocus:function(){var A=this.el;if(this.emptyText){if(A.dom.value==this.emptyText){this.setRawValue("")}A.removeClass(this.emptyClass)}if(this.selectOnFocus){(function(){A.dom.select()}).defer(this.inEditor&&Ext.isIE?50:0)}},postBlur:function(){this.applyEmptyText()},filterKeys:function(A){if(A.ctrlKey||A.isSpecialKey()){return}if(!this.maskRe.test(String.fromCharCode(A.getCharCode()))){A.stopEvent()}},setValue:function(A){if(this.emptyText&&this.el&&!Ext.isEmpty(A)){this.el.removeClass(this.emptyClass)}Ext.form.TextField.superclass.setValue.apply(this,arguments);this.applyEmptyText();this.autoSize()},validateValue:function(A){if(A.length<1||A===this.emptyText){if(this.allowBlank){this.clearInvalid();return true}else{this.markInvalid(this.blankText);return false}}if(A.length<this.minLength){this.markInvalid(String.format(this.minLengthText,this.minLength));return false}if(A.length>this.maxLength){this.markInvalid(String.format(this.maxLengthText,this.maxLength));return false}if(this.vtype){var D=Ext.form.VTypes;if(!D[this.vtype](A,this)){this.markInvalid(this.vtypeText||D[this.vtype+"Text"]);return false}}if(typeof this.validator=="function"){var B=this.validator(A);if(B!==true){this.markInvalid(B);return false}}if(this.regex&&!this.regex.test(A)){this.markInvalid(this.regexText);return false}return true},selectText:function(G,A){var D=this.getRawValue();var E=false;if(D.length>0){G=G===undefined?0:G;A=A===undefined?D.length:A;var F=this.el.dom;if(F.setSelectionRange){F.setSelectionRange(G,A)}else{if(F.createTextRange){var B=F.createTextRange();B.moveStart("character",G);B.moveEnd("character",A-D.length);B.select()}}E=Ext.isGecko||Ext.isOpera}else{E=true}if(E){this.focus()}},autoSize:function(){if(!this.grow||!this.rendered){return}if(!this.metrics){this.metrics=Ext.util.TextMetrics.createInstance(this.el)}var D=this.el;var B=D.dom.value;var E=document.createElement("div");E.appendChild(document.createTextNode(B));B=E.innerHTML;Ext.removeNode(E);E=null;B+="&#160;";var A=Math.min(this.growMax,Math.max(this.metrics.getWidth(B)+10,this.growMin));this.el.setWidth(A);this.fireEvent("autosize",this,A)}});Ext.reg("textfield",Ext.form.TextField);Ext.form.TriggerField=Ext.extend(Ext.form.TextField,{defaultAutoCreate:{tag:"input",type:"text",size:"16",autocomplete:"off"},hideTrigger:false,autoSize:Ext.emptyFn,monitorTab:true,deferHeight:true,mimicing:false,actionMode:"wrap",onResize:function(A,B){Ext.form.TriggerField.superclass.onResize.call(this,A,B);if(typeof A=="number"){this.el.setWidth(this.adjustWidth("input",A-this.trigger.getWidth()))}this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())},adjustSize:Ext.BoxComponent.prototype.adjustSize,getResizeEl:function(){return this.wrap},getPositionEl:function(){return this.wrap},alignErrorIcon:function(){if(this.wrap){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])}},onRender:function(B,A){Ext.form.TriggerField.superclass.onRender.call(this,B,A);this.wrap=this.el.wrap({cls:"x-form-field-wrap"});this.trigger=this.wrap.createChild(this.triggerConfig||{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.triggerClass});if(this.hideTrigger){this.trigger.setDisplayed(false)}this.initTrigger();if(!this.width){this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())}},afterRender:function(){Ext.form.TriggerField.superclass.afterRender.call(this);var A;if(Ext.isIE&&!this.hideTrigger&&this.el.getY()!=(A=this.trigger.getY())){this.el.position();this.el.setY(A)}},initTrigger:function(){this.trigger.on("click",this.onTriggerClick,this,{preventDefault:true});this.trigger.addClassOnOver("x-form-trigger-over");this.trigger.addClassOnClick("x-form-trigger-click")},onDestroy:function(){if(this.trigger){this.trigger.removeAllListeners();this.trigger.remove()}if(this.wrap){this.wrap.remove()}if(this.mimicing){Ext.get(Ext.isIE?document.body:document).un("mousedown",this.mimicBlur,this)}Ext.form.TriggerField.superclass.onDestroy.call(this)},onFocus:function(){Ext.form.TriggerField.superclass.onFocus.call(this);if(!this.mimicing){this.wrap.addClass("x-trigger-wrap-focus");this.mimicing=true;Ext.get(Ext.isIE?document.body:document).on("mousedown",this.mimicBlur,this,{delay:10});if(this.monitorTab){this.el.on("keydown",this.checkTab,this)}}},checkTab:function(A){if(A.getKey()==A.TAB){this.triggerBlur()}},onBlur:function(){},mimicBlur:function(A){if(!this.wrap.contains(A.target)&&this.validateBlur(A)){this.triggerBlur()}},triggerBlur:function(){this.mimicing=false;Ext.get(Ext.isIE?document.body:document).un("mousedown",this.mimicBlur,this);if(this.monitorTab&&this.el){this.el.un("keydown",this.checkTab,this)}Ext.form.TriggerField.superclass.onBlur.call(this);if(this.wrap){this.wrap.removeClass("x-trigger-wrap-focus")}},beforeBlur:Ext.emptyFn,validateBlur:function(A){return true},onTriggerClick:Ext.emptyFn});Ext.form.TwinTriggerField=Ext.extend(Ext.form.TriggerField,{initComponent:function(){Ext.form.TwinTriggerField.superclass.initComponent.call(this);this.triggerConfig={tag:"span",cls:"x-form-twin-triggers",cn:[{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.trigger1Class},{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.trigger2Class}]}},getTrigger:function(A){return this.triggers[A]},initTrigger:function(){var A=this.trigger.select(".x-form-trigger",true);this.wrap.setStyle("overflow","hidden");var B=this;A.each(function(E,G,D){E.hide=function(){var H=B.wrap.getWidth();this.dom.style.display="none";B.el.setWidth(H-B.trigger.getWidth())};E.show=function(){var H=B.wrap.getWidth();this.dom.style.display="";B.el.setWidth(H-B.trigger.getWidth())};var F="Trigger"+(D+1);if(this["hide"+F]){E.dom.style.display="none"}E.on("click",this["on"+F+"Click"],this,{preventDefault:true});E.addClassOnOver("x-form-trigger-over");E.addClassOnClick("x-form-trigger-click")},this);this.triggers=A.elements},onDestroy:function(){Ext.destroy.apply(this,this.triggers);Ext.form.TwinTriggerField.superclass.onDestroy.call(this)},onTrigger1Click:Ext.emptyFn,onTrigger2Click:Ext.emptyFn});Ext.reg("trigger",Ext.form.TriggerField);Ext.form.TextArea=Ext.extend(Ext.form.TextField,{growMin:60,growMax:1000,growAppend:"&#160;\n&#160;",growPad:Ext.isWebKit?-6:0,enterIsSpecial:false,preventScrollbars:false,onRender:function(B,A){if(!this.el){this.defaultAutoCreate={tag:"textarea",style:"width:100px;height:60px;",autocomplete:"off"}}Ext.form.TextArea.superclass.onRender.call(this,B,A);if(this.grow){this.textSizeEl=Ext.DomHelper.append(document.body,{tag:"pre",cls:"x-form-grow-sizer"});if(this.preventScrollbars){this.el.setStyle("overflow","hidden")}this.el.setHeight(this.growMin)}},onDestroy:function(){if(this.textSizeEl){Ext.removeNode(this.textSizeEl)}Ext.form.TextArea.superclass.onDestroy.call(this)},fireKey:function(A){if(A.isSpecialKey()&&(this.enterIsSpecial||(A.getKey()!=A.ENTER||A.hasModifier()))){this.fireEvent("specialkey",this,A)}},onKeyUp:function(A){if(!A.isNavKeyPress()||A.getKey()==A.ENTER){this.autoSize()}Ext.form.TextArea.superclass.onKeyUp.call(this,A)},autoSize:function(){if(!this.grow||!this.textSizeEl){return}var D=this.el;var A=D.dom.value;var E=this.textSizeEl;E.innerHTML="";E.appendChild(document.createTextNode(A));A=E.innerHTML;Ext.fly(E).setWidth(this.el.getWidth());if(A.length<1){A="&#160;&#160;"}else{A+=this.growAppend;if(Ext.isIE){A=A.replace(/\n/g,"<br />")}}E.innerHTML=A;var B=Math.min(this.growMax,Math.max(E.offsetHeight,this.growMin)+this.growPad);if(B!=this.lastHeight){this.lastHeight=B;this.el.setHeight(B);this.fireEvent("autosize",this,B)}}});Ext.reg("textarea",Ext.form.TextArea);Ext.form.NumberField=Ext.extend(Ext.form.TextField,{fieldClass:"x-form-field x-form-num-field",allowDecimals:true,decimalSeparator:".",decimalPrecision:2,allowNegative:true,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",baseChars:"0123456789",initEvents:function(){var A=this.baseChars+"";if(this.allowDecimals){A+=this.decimalSeparator}if(this.allowNegative){A+="-"}this.maskRe=new RegExp("["+Ext.escapeRe(A)+"]");Ext.form.NumberField.superclass.initEvents.call(this)},validateValue:function(B){if(!Ext.form.NumberField.superclass.validateValue.call(this,B)){return false}if(B.length<1){return true}B=String(B).replace(this.decimalSeparator,".");if(isNaN(B)){this.markInvalid(String.format(this.nanText,B));return false}var A=this.parseValue(B);if(A<this.minValue){this.markInvalid(String.format(this.minText,this.minValue));return false}if(A>this.maxValue){this.markInvalid(String.format(this.maxText,this.maxValue));return false}return true},getValue:function(){return this.fixPrecision(this.parseValue(Ext.form.NumberField.superclass.getValue.call(this)))},setValue:function(A){A=typeof A=="number"?A:parseFloat(String(A).replace(this.decimalSeparator,"."));A=isNaN(A)?"":String(A).replace(".",this.decimalSeparator);Ext.form.NumberField.superclass.setValue.call(this,A)},parseValue:function(A){A=parseFloat(String(A).replace(this.decimalSeparator,"."));return isNaN(A)?"":A},fixPrecision:function(B){var A=isNaN(B);if(!this.allowDecimals||this.decimalPrecision==-1||A||!B){return A?"":B}return parseFloat(parseFloat(B).toFixed(this.decimalPrecision))},beforeBlur:function(){var A=this.parseValue(this.getRawValue());if(!Ext.isEmpty(A)){this.setValue(this.fixPrecision(A))}}});Ext.reg("numberfield",Ext.form.NumberField);Ext.form.DateField=Ext.extend(Ext.form.TriggerField,{format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerClass:"x-form-date-trigger",showToday:true,defaultAutoCreate:{tag:"input",type:"text",size:"10",autocomplete:"off"},initComponent:function(){Ext.form.DateField.superclass.initComponent.call(this);this.addEvents("select");if(typeof this.minValue=="string"){this.minValue=this.parseDate(this.minValue)}if(typeof this.maxValue=="string"){this.maxValue=this.parseDate(this.maxValue)}this.disabledDatesRE=null;this.initDisabledDays()},initDisabledDays:function(){if(this.disabledDates){var A=this.disabledDates;var D="(?:";for(var B=0;B<A.length;B++){D+=A[B];if(B!=A.length-1){D+="|"}}this.disabledDatesRE=new RegExp(D+")")}},setDisabledDates:function(A){this.disabledDates=A;this.initDisabledDays();if(this.menu){this.menu.picker.setDisabledDates(this.disabledDatesRE)}},setDisabledDays:function(A){this.disabledDays=A;if(this.menu){this.menu.picker.setDisabledDays(A)}},setMinValue:function(A){this.minValue=(typeof A=="string"?this.parseDate(A):A);if(this.menu){this.menu.picker.setMinDate(this.minValue)}},setMaxValue:function(A){this.maxValue=(typeof A=="string"?this.parseDate(A):A);if(this.menu){this.menu.picker.setMaxDate(this.maxValue)}},validateValue:function(F){F=this.formatDate(F);if(!Ext.form.DateField.superclass.validateValue.call(this,F)){return false}if(F.length<1){return true}var D=F;F=this.parseDate(F);if(!F){this.markInvalid(String.format(this.invalidText,D,this.format));return false}var G=F.getTime();if(this.minValue&&G<this.minValue.getTime()){this.markInvalid(String.format(this.minText,this.formatDate(this.minValue)));return false}if(this.maxValue&&G>this.maxValue.getTime()){this.markInvalid(String.format(this.maxText,this.formatDate(this.maxValue)));return false}if(this.disabledDays){var A=F.getDay();for(var B=0;B<this.disabledDays.length;B++){if(A===this.disabledDays[B]){this.markInvalid(this.disabledDaysText);return false}}}var E=this.formatDate(F);if(this.disabledDatesRE&&this.disabledDatesRE.test(E)){this.markInvalid(String.format(this.disabledDatesText,E));return false}return true},validateBlur:function(){return !this.menu||!this.menu.isVisible()},getValue:function(){return this.parseDate(Ext.form.DateField.superclass.getValue.call(this))||""},setValue:function(A){Ext.form.DateField.superclass.setValue.call(this,this.formatDate(this.parseDate(A)))},parseDate:function(E){if(!E||Ext.isDate(E)){return E}var B=Date.parseDate(E,this.format);if(!B&&this.altFormats){if(!this.altFormatsArray){this.altFormatsArray=this.altFormats.split("|")}for(var D=0,A=this.altFormatsArray.length;D<A&&!B;D++){B=Date.parseDate(E,this.altFormatsArray[D])}}return B},onDestroy:function(){if(this.menu){this.menu.destroy()}Ext.form.DateField.superclass.onDestroy.call(this)},formatDate:function(A){return Ext.isDate(A)?A.dateFormat(this.format):A},menuListeners:{select:function(A,B){this.setValue(B);this.fireEvent("select",this,B)},show:function(){this.onFocus()},hide:function(){this.focus.defer(10,this);var A=this.menuListeners;this.menu.un("select",A.select,this);this.menu.un("show",A.show,this);this.menu.un("hide",A.hide,this)}},onTriggerClick:function(){if(this.disabled){return}if(this.menu==null){this.menu=new Ext.menu.DateMenu()}Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.disabledDatesRE,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,showToday:this.showToday,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,this.formatDate(this.maxValue))});this.menu.on(Ext.apply({},this.menuListeners,{scope:this}));this.menu.picker.setValue(this.getValue()||new Date());this.menu.show(this.el,"tl-bl?")},beforeBlur:function(){var A=this.parseDate(this.getRawValue());if(A){this.setValue(A)}}});Ext.reg("datefield",Ext.form.DateField);Ext.form.ComboBox=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"24",autocomplete:"off"},listClass:"",selectedClass:"x-combo-selected",triggerClass:"x-form-arrow-trigger",shadow:"sides",listAlign:"tl-bl?",maxHeight:300,minHeight:90,triggerAction:"query",minChars:4,typeAhead:false,queryDelay:500,pageSize:0,selectOnFocus:false,queryParam:"query",loadingText:"Loading...",resizable:false,handleHeight:8,editable:true,allQuery:"",mode:"remote",minListWidth:70,forceSelection:false,typeAheadDelay:250,lazyInit:true,initComponent:function(){Ext.form.ComboBox.superclass.initComponent.call(this);this.addEvents("expand","collapse","beforeselect","select","beforequery");if(this.transform){this.allowDomMove=false;var D=Ext.getDom(this.transform);if(!this.hiddenName){this.hiddenName=D.name}if(!this.store){this.mode="local";var H=[],E=D.options;for(var B=0,A=E.length;B<A;B++){var G=E[B],F=(G.hasAttribute?G.hasAttribute("value"):G.getAttributeNode("value").specified)?G.value:G.text;if(G.selected){this.value=F}H.push([F,G.text])}this.store=new Ext.data.SimpleStore({id:0,fields:["value","text"],data:H});this.valueField="value";this.displayField="text"}D.name=Ext.id();if(!this.lazyRender){this.target=true;this.el=Ext.DomHelper.insertBefore(D,this.autoCreate||this.defaultAutoCreate);Ext.removeNode(D);this.render(this.el.parentNode)}else{Ext.removeNode(D)}}else{if(Ext.isArray(this.store)){if(Ext.isArray(this.store[0])){this.store=new Ext.data.SimpleStore({fields:["value","text"],data:this.store});this.valueField="value"}else{this.store=new Ext.data.SimpleStore({fields:["text"],data:this.store,expandData:true});this.valueField="text"}this.displayField="text";this.mode="local"}}this.selectedIndex=-1;if(this.mode=="local"){if(this.initialConfig.queryDelay===undefined){this.queryDelay=10}if(this.initialConfig.minChars===undefined){this.minChars=0}}},onRender:function(B,A){Ext.form.ComboBox.superclass.onRender.call(this,B,A);if(this.hiddenName){this.hiddenField=this.el.insertSibling({tag:"input",type:"hidden",name:this.hiddenName,id:(this.hiddenId||this.hiddenName)},"before",true);this.el.dom.removeAttribute("name")}if(Ext.isGecko){this.el.dom.setAttribute("autocomplete","off")}if(!this.lazyInit){this.initList()}else{this.on("focus",this.initList,this,{single:true})}if(!this.editable){this.editable=true;this.setEditable(false)}},initValue:function(){Ext.form.ComboBox.superclass.initValue.call(this);if(this.hiddenField){this.hiddenField.value=this.hiddenValue!==undefined?this.hiddenValue:this.value!==undefined?this.value:""}},initList:function(){if(!this.list){var A="x-combo-list";this.list=new Ext.Layer({shadow:this.shadow,cls:[A,this.listClass].join(" "),constrain:false});var B=this.listWidth||Math.max(this.wrap.getWidth(),this.minListWidth);this.list.setWidth(B);this.list.swallowEvent("mousewheel");this.assetHeight=0;if(this.title){this.header=this.list.createChild({cls:A+"-hd",html:this.title});this.assetHeight+=this.header.getHeight()}this.innerList=this.list.createChild({cls:A+"-inner"});this.innerList.on("mouseover",this.onViewOver,this);this.innerList.on("mousemove",this.onViewMove,this);this.innerList.setWidth(B-this.list.getFrameWidth("lr"));if(this.pageSize){this.footer=this.list.createChild({cls:A+"-ft"});this.pageTb=new Ext.PagingToolbar({store:this.store,pageSize:this.pageSize,renderTo:this.footer});this.assetHeight+=this.footer.getHeight()}if(!this.tpl){this.tpl='<tpl for="."><div class="'+A+'-item">{'+this.displayField+"}</div></tpl>"}this.view=new Ext.DataView({applyTo:this.innerList,tpl:this.tpl,singleSelect:true,selectedClass:this.selectedClass,itemSelector:this.itemSelector||"."+A+"-item"});this.view.on("click",this.onViewClick,this);this.bindStore(this.store,true);if(this.resizable){this.resizer=new Ext.Resizable(this.list,{pinned:true,handles:"se"});this.resizer.on("resize",function(F,D,E){this.maxHeight=E-this.handleHeight-this.list.getFrameWidth("tb")-this.assetHeight;this.listWidth=D;this.innerList.setWidth(D-this.list.getFrameWidth("lr"));this.restrictHeight()},this);this[this.pageSize?"footer":"innerList"].setStyle("margin-bottom",this.handleHeight+"px")}}},getStore:function(){return this.store},bindStore:function(A,B){if(this.store&&!B){this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("loadexception",this.collapse,this);if(!A){this.store=null;if(this.view){this.view.setStore(null)}}}if(A){this.store=Ext.StoreMgr.lookup(A);this.store.on("beforeload",this.onBeforeLoad,this);this.store.on("load",this.onLoad,this);this.store.on("loadexception",this.collapse,this);if(this.view){this.view.setStore(A)}}},initEvents:function(){Ext.form.ComboBox.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{up:function(A){this.inKeyMode=true;this.selectPrev()},down:function(A){if(!this.isExpanded()){this.onTriggerClick()}else{this.inKeyMode=true;this.selectNext()}},enter:function(A){this.onViewClick();this.delayedCheck=true;this.unsetDelayCheck.defer(10,this)},esc:function(A){this.collapse()},tab:function(A){this.onViewClick(false);return true},scope:this,doRelay:function(D,B,A){if(A=="down"||this.scope.isExpanded()){return Ext.KeyNav.prototype.doRelay.apply(this,arguments)}return true},forceKeyDown:true});this.queryDelay=Math.max(this.queryDelay||10,this.mode=="local"?10:250);this.dqTask=new Ext.util.DelayedTask(this.initQuery,this);if(this.typeAhead){this.taTask=new Ext.util.DelayedTask(this.onTypeAhead,this)}if(this.editable!==false&&!this.enableKeyEvents){this.el.on("keyup",this.onKeyUp,this)}},onDestroy:function(){if(this.dqTask){this.dqTask.cancel();this.dqTask=null}this.bindStore(null);Ext.destroy(this.resizer,this.view,this.pageTb,this.innerList,this.list);Ext.form.ComboBox.superclass.onDestroy.call(this)},unsetDelayCheck:function(){delete this.delayedCheck},fireKey:function(B){var A=function(D){if(D.isNavKeyPress()&&!this.isExpanded()&&!this.delayedCheck){this.fireEvent("specialkey",this,D)}};if(this.inEditor&&Ext.isWebKit&&B.getKey()==B.TAB){A.defer(10,this,[new Ext.EventObjectImpl(B)])}else{A.call(this,B)}},onResize:function(A,B){Ext.form.ComboBox.superclass.onResize.apply(this,arguments);if(this.list&&this.listWidth===undefined){var D=Math.max(A,this.minListWidth);this.list.setWidth(D);this.innerList.setWidth(D-this.list.getFrameWidth("lr"))}},onEnable:function(){Ext.form.ComboBox.superclass.onEnable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=false}},onDisable:function(){Ext.form.ComboBox.superclass.onDisable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=true}},setEditable:function(A){if(A==this.editable){return}this.editable=A;if(!A){this.el.dom.setAttribute("readOnly",true);this.el.on("mousedown",this.onTriggerClick,this);this.el.addClass("x-combo-noedit")}else{this.el.dom.removeAttribute("readOnly");this.el.un("mousedown",this.onTriggerClick,this);this.el.removeClass("x-combo-noedit")}},onBeforeLoad:function(){if(!this.hasFocus){return}this.innerList.update(this.loadingText?'<div class="loading-indicator">'+this.loadingText+"</div>":"");this.restrictHeight();this.selectedIndex=-1},onLoad:function(){if(!this.hasFocus){return}if(this.store.getCount()>0){this.expand();this.restrictHeight();if(this.lastQuery==this.allQuery){if(this.editable){this.el.dom.select()}if(!this.selectByValue(this.value,true)){this.select(0,true)}}else{this.selectNext();if(this.typeAhead&&this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE){this.taTask.delay(this.typeAheadDelay)}}}else{this.onEmptyResults()}},onTypeAhead:function(){if(this.store.getCount()>0){var B=this.store.getAt(0);var D=B.data[this.displayField];var A=D.length;var E=this.getRawValue().length;if(E!=A){this.setRawValue(D);this.selectText(E,D.length)}}},onSelect:function(A,B){if(this.fireEvent("beforeselect",this,A,B)!==false){this.setValue(A.data[this.valueField||this.displayField]);this.collapse();this.fireEvent("select",this,A,B)}},getName:function(){var A=this.hiddenField;return A&&A.name?A.name:this.hiddenName||Ext.form.ComboBox.superclass.getName.call(this)},getValue:function(){if(this.valueField){return typeof this.value!="undefined"?this.value:""}else{return Ext.form.ComboBox.superclass.getValue.call(this)}},clearValue:function(){if(this.hiddenField){this.hiddenField.value=""}this.setRawValue("");this.lastSelectionText="";this.applyEmptyText();this.value=""},setValue:function(A){var D=A;if(this.valueField){var B=this.findRecord(this.valueField,A);if(B){D=B.data[this.displayField]}else{if(this.valueNotFoundText!==undefined){D=this.valueNotFoundText}}}this.lastSelectionText=D;if(this.hiddenField){this.hiddenField.value=A}Ext.form.ComboBox.superclass.setValue.call(this,D);this.value=A},findRecord:function(D,B){var A;if(this.store.getCount()>0){this.store.each(function(E){if(E.data[D]==B){A=E;return false}})}return A},onViewMove:function(B,A){this.inKeyMode=false},onViewOver:function(E,B){if(this.inKeyMode){return}var D=this.view.findItemFromChild(B);if(D){var A=this.view.indexOf(D);this.select(A,false)}},onViewClick:function(B){var A=this.view.getSelectedIndexes()[0];var D=this.store.getAt(A);if(D){this.onSelect(D,A)}if(B!==false){this.el.focus()}},restrictHeight:function(){this.innerList.dom.style.height="";var B=this.innerList.dom;var F=this.list.getFrameWidth("tb")+(this.resizable?this.handleHeight:0)+this.assetHeight;var D=Math.max(B.clientHeight,B.offsetHeight,B.scrollHeight);var A=this.getPosition()[1]-Ext.getBody().getScroll().top;var G=Ext.lib.Dom.getViewHeight()-A-this.getSize().height;var E=Math.max(A,G,this.minHeight||0)-this.list.shadowOffset-F-5;D=Math.min(D,E,this.maxHeight);this.innerList.setHeight(D);this.list.beginUpdate();this.list.setHeight(D+F);this.list.alignTo(this.wrap,this.listAlign);this.list.endUpdate()},onEmptyResults:function(){this.collapse()},isExpanded:function(){return this.list&&this.list.isVisible()},selectByValue:function(A,D){if(A!==undefined&&A!==null){var B=this.findRecord(this.valueField||this.displayField,A);if(B){this.select(this.store.indexOf(B),D);return true}}return false},select:function(A,D){this.selectedIndex=A;this.view.select(A);if(D!==false){var B=this.view.getNode(A);if(B){this.innerList.scrollChildIntoView(B,false)}}},selectNext:function(){var A=this.store.getCount();if(A>0){if(this.selectedIndex==-1){this.select(0)}else{if(this.selectedIndex<A-1){this.select(this.selectedIndex+1)}}}},selectPrev:function(){var A=this.store.getCount();if(A>0){if(this.selectedIndex==-1){this.select(0)}else{if(this.selectedIndex!=0){this.select(this.selectedIndex-1)}}}},onKeyUp:function(B){var A=B.getKey();if(this.editable!==false&&(A==B.BACKSPACE||!B.isSpecialKey())){this.lastKey=A;this.dqTask.delay(this.queryDelay)}Ext.form.ComboBox.superclass.onKeyUp.call(this,B)},validateBlur:function(){return !this.list||!this.list.isVisible()},initQuery:function(){this.doQuery(this.getRawValue())},beforeBlur:function(){var B=this.getRawValue();if(this.forceSelection){if(B.length>0&&B!=this.emptyText){this.el.dom.value=this.lastSelectionText===undefined?"":this.lastSelectionText;this.applyEmptyText()}else{this.clearValue()}}else{var A=this.findRecord(this.displayField,B);if(A){B=A.get(this.valueField||this.displayField)}this.setValue(B)}},doQuery:function(D,B){if(D===undefined||D===null){D=""}var A={query:D,forceAll:B,combo:this,cancel:false};if(this.fireEvent("beforequery",A)===false||A.cancel){return false}D=A.query;B=A.forceAll;if(B===true||(D.length>=this.minChars)){if(this.lastQuery!==D){this.lastQuery=D;if(this.mode=="local"){this.selectedIndex=-1;if(B){this.store.clearFilter()}else{this.store.filter(this.displayField,D)}this.onLoad()}else{this.store.baseParams[this.queryParam]=D;this.store.load({params:this.getParams(D)});this.expand()}}else{this.selectedIndex=-1;this.onLoad()}}},getParams:function(A){var B={};if(this.pageSize){B.start=0;B.limit=this.pageSize}return B},collapse:function(){if(!this.isExpanded()){return}this.list.hide();Ext.getDoc().un("mousewheel",this.collapseIf,this);Ext.getDoc().un("mousedown",this.collapseIf,this);this.fireEvent("collapse",this)},collapseIf:function(A){if(!A.within(this.wrap)&&!A.within(this.list)){this.collapse()}},expand:function(){if(this.isExpanded()||!this.hasFocus){return}this.list.alignTo(this.wrap,this.listAlign);this.list.show();if(Ext.isGecko2){this.innerList.setOverflow("auto")}Ext.getDoc().on("mousewheel",this.collapseIf,this);Ext.getDoc().on("mousedown",this.collapseIf,this);this.fireEvent("expand",this)},onTriggerClick:function(){if(this.disabled){return}if(this.isExpanded()){this.collapse();this.el.focus()}else{this.onFocus({});if(this.triggerAction=="all"){this.doQuery(this.allQuery,true)}else{this.doQuery(this.getRawValue())}this.el.focus()}}});Ext.reg("combo",Ext.form.ComboBox);Ext.form.Checkbox=Ext.extend(Ext.form.Field,{checkedCls:"x-form-check-checked",focusCls:"x-form-check-focus",overCls:"x-form-check-over",mouseDownCls:"x-form-check-down",tabIndex:0,checked:false,defaultAutoCreate:{tag:"input",type:"checkbox",autocomplete:"off"},actionMode:"wrap",baseCls:"x-form-check",initComponent:function(){Ext.form.Checkbox.superclass.initComponent.call(this);this.addEvents("check")},initEvents:function(){Ext.form.Checkbox.superclass.initEvents.call(this);this.initCheckEvents()},initCheckEvents:function(){this.innerWrap.removeAllListeners();this.innerWrap.addClassOnOver(this.overCls);this.innerWrap.addClassOnClick(this.mouseDownCls);this.innerWrap.on("click",this.onClick,this);this.innerWrap.on("keyup",this.onKeyUp,this)},onRender:function(B,A){Ext.form.Checkbox.superclass.onRender.call(this,B,A);if(this.inputValue!==undefined){this.el.dom.value=this.inputValue}this.el.addClass("x-hidden");this.innerWrap=this.el.wrap({tabIndex:this.tabIndex,cls:this.baseCls+"-wrap-inner"});this.wrap=this.innerWrap.wrap({cls:this.baseCls+"-wrap"});if(this.boxLabel){this.labelEl=this.innerWrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel})}this.imageEl=this.innerWrap.createChild({tag:"img",src:Ext.BLANK_IMAGE_URL,cls:this.baseCls},this.el);if(this.checked){this.setValue(true)}else{this.checked=this.el.dom.checked}this.originalValue=this.checked},afterRender:function(){Ext.form.Checkbox.superclass.afterRender.call(this);this.wrap[this.checked?"addClass":"removeClass"](this.checkedCls)},onDestroy:function(){if(this.rendered){Ext.destroy(this.imageEl,this.labelEl,this.innerWrap,this.wrap)}Ext.form.Checkbox.superclass.onDestroy.call(this)},onFocus:function(A){Ext.form.Checkbox.superclass.onFocus.call(this,A);this.el.addClass(this.focusCls)},onBlur:function(A){Ext.form.Checkbox.superclass.onBlur.call(this,A);this.el.removeClass(this.focusCls)},onResize:function(){Ext.form.Checkbox.superclass.onResize.apply(this,arguments);if(!this.boxLabel&&!this.fieldLabel){this.el.alignTo(this.wrap,"c-c")}},onKeyUp:function(A){if(A.getKey()==Ext.EventObject.SPACE){this.onClick(A)}},onClick:function(A){if(!this.disabled&&!this.readOnly){this.toggleValue()}A.stopEvent()},onEnable:function(){Ext.form.Checkbox.superclass.onEnable.call(this);this.initCheckEvents()},onDisable:function(){Ext.form.Checkbox.superclass.onDisable.call(this);this.innerWrap.removeAllListeners()},toggleValue:function(){this.setValue(!this.checked)},getResizeEl:function(){if(!this.resizeEl){this.resizeEl=Ext.isWebKit?this.wrap:(this.wrap.up(".x-form-element",5)||this.wrap)}return this.resizeEl},getPositionEl:function(){return this.wrap},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,initValue:function(){this.originalValue=this.getValue()},getValue:function(){if(this.rendered){return this.el.dom.checked}return this.checked},setValue:function(A){var B=this.checked;this.checked=(A===true||A==="true"||A=="1"||String(A).toLowerCase()=="on");if(this.rendered){this.el.dom.checked=this.checked;this.el.dom.defaultChecked=this.checked;this.wrap[this.checked?"addClass":"removeClass"](this.checkedCls)}if(B!=this.checked){this.fireEvent("check",this,this.checked);if(this.handler){this.handler.call(this.scope||this,this,this.checked)}}}});Ext.reg("checkbox",Ext.form.Checkbox);Ext.form.CheckboxGroup=Ext.extend(Ext.form.Field,{columns:"auto",vertical:false,allowBlank:true,blankText:"You must select at least one item in this group",defaultType:"checkbox",groupCls:"x-form-check-group",initComponent:function(){this.addEvents("change");Ext.form.CheckboxGroup.superclass.initComponent.call(this)},onRender:function(I,G){if(!this.el){var N={cls:this.groupCls,layout:"column",border:false,renderTo:I};var A={defaultType:this.defaultType,layout:"form",border:false,defaults:{hideLabel:true,anchor:"100%"}};if(this.items[0].items){Ext.apply(N,{layoutConfig:{columns:this.items.length},defaults:this.defaults,items:this.items});for(var F=0,K=this.items.length;F<K;F++){Ext.applyIf(this.items[F],A)}}else{var E,L=[];if(typeof this.columns=="string"){this.columns=this.items.length}if(!Ext.isArray(this.columns)){var J=[];for(var F=0;F<this.columns;F++){J.push((100/this.columns)*0.01)}this.columns=J}E=this.columns.length;for(var F=0;F<E;F++){var B=Ext.apply({items:[]},A);B[this.columns[F]<=1?"columnWidth":"width"]=this.columns[F];if(this.defaults){B.defaults=Ext.apply(B.defaults||{},this.defaults)}L.push(B)}if(this.vertical){var P=Math.ceil(this.items.length/E),M=0;for(var F=0,K=this.items.length;F<K;F++){if(F>0&&F%P==0){M++}if(this.items[F].fieldLabel){this.items[F].hideLabel=false}L[M].items.push(this.items[F])}}else{for(var F=0,K=this.items.length;F<K;F++){var O=F%E;if(this.items[F].fieldLabel){this.items[F].hideLabel=false}L[O].items.push(this.items[F])}}Ext.apply(N,{layoutConfig:{columns:E},items:L})}this.panel=new Ext.Panel(N);this.panel.ownerCt=this;this.el=this.panel.getEl();if(this.forId&&this.itemCls){var D=this.el.up(this.itemCls).child("label",true);if(D){D.setAttribute("htmlFor",this.forId)}}var H=this.panel.findBy(function(Q){return Q.isFormField},this);this.items=new Ext.util.MixedCollection();this.items.addAll(H)}Ext.form.CheckboxGroup.superclass.onRender.call(this,I,G)},afterRender:function(){Ext.form.CheckboxGroup.superclass.afterRender.call(this);this.items.each(function(A){A.on("check",this.fireChecked,this)},this)},fireChecked:function(){var A=[];this.items.each(function(B){if(B.checked){A.push(B)}});this.fireEvent("change",this,A)},validateValue:function(A){if(!this.allowBlank){var B=true;this.items.each(function(D){if(D.checked){return B=false}},this);if(B){this.markInvalid(this.blankText);return false}}return true},onDestroy:function(){Ext.destroy(this.panel);Ext.form.CheckboxGroup.superclass.onDestroy.call(this)},onDisable:function(){this.items.each(function(A){A.disable()})},onEnable:function(){this.items.each(function(A){A.enable()})},isDirty:function(){if(this.disabled||!this.rendered){return false}var A=false;this.items.each(function(B){if(B.isDirty()){A=true;return false}});return A},onResize:function(A,B){this.panel.setSize(A,B);this.panel.doLayout()},reset:function(){Ext.form.CheckboxGroup.superclass.reset.call(this);this.items.each(function(A){if(A.reset){A.reset()}},this)},initValue:Ext.emptyFn,getValue:Ext.emptyFn,getRawValue:Ext.emptyFn,setValue:Ext.emptyFn,setRawValue:Ext.emptyFn});Ext.reg("checkboxgroup",Ext.form.CheckboxGroup);Ext.form.Radio=Ext.extend(Ext.form.Checkbox,{inputType:"radio",baseCls:"x-form-radio",getGroupValue:function(){var A=this.getParent().child("input[name="+this.el.dom.name+"]:checked",true);return A?A.value:null},getParent:function(){return this.el.up("form")||Ext.getBody()},toggleValue:function(){if(!this.checked){var A=this.getParent().select("input[name="+this.el.dom.name+"]");A.each(function(B){if(B.dom.id==this.id){this.setValue(true)}else{Ext.getCmp(B.dom.id).setValue(false)}},this)}},setValue:function(A){if(typeof A=="boolean"){Ext.form.Radio.superclass.setValue.call(this,A)}else{var B=this.getParent().child("input[name="+this.el.dom.name+"][value="+A+"]",true);if(B&&!B.checked){Ext.getCmp(B.id).toggleValue()}}},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.reg("radio",Ext.form.Radio);Ext.form.RadioGroup=Ext.extend(Ext.form.CheckboxGroup,{allowBlank:true,blankText:"You must select one item in this group",defaultType:"radio",groupCls:"x-form-radio-group",initComponent:function(){this.addEvents("change");Ext.form.RadioGroup.superclass.initComponent.call(this)},fireChecked:function(){if(!this.checkTask){this.checkTask=new Ext.util.DelayedTask(this.bufferChecked,this)}this.checkTask.delay(10)},bufferChecked:function(){var A=null;this.items.each(function(B){if(B.checked){A=B;return false}});this.fireEvent("change",this,A)},onDestroy:function(){if(this.checkTask){this.checkTask.cancel();this.checkTask=null}Ext.form.RadioGroup.superclass.onDestroy.call(this)}});Ext.reg("radiogroup",Ext.form.RadioGroup);Ext.form.Hidden=Ext.extend(Ext.form.Field,{inputType:"hidden",onRender:function(){Ext.form.Hidden.superclass.onRender.apply(this,arguments)},initEvents:function(){this.originalValue=this.getValue()},setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.reg("hidden",Ext.form.Hidden);Ext.form.BasicForm=function(B,A){Ext.apply(this,A);this.items=new Ext.util.MixedCollection(false,function(D){return D.id||(D.id=Ext.id())});this.addEvents("beforeaction","actionfailed","actioncomplete");if(B){this.initEl(B)}Ext.form.BasicForm.superclass.constructor.call(this)};Ext.extend(Ext.form.BasicForm,Ext.util.Observable,{timeout:30,activeAction:null,trackResetOnLoad:false,initEl:function(A){this.el=Ext.get(A);this.id=this.el.id||Ext.id();if(!this.standardSubmit){this.el.on("submit",this.onSubmit,this)}this.el.addClass("x-form")},getEl:function(){return this.el},onSubmit:function(A){A.stopEvent()},destroy:function(){this.items.each(function(A){Ext.destroy(A)});if(this.el){this.el.removeAllListeners();this.el.remove()}this.purgeListeners()},isValid:function(){var A=true;this.items.each(function(B){if(!B.validate()){A=false}});return A},isDirty:function(){var A=false;this.items.each(function(B){if(B.isDirty()){A=true;return false}});return A},doAction:function(B,A){if(typeof B=="string"){B=new Ext.form.Action.ACTION_TYPES[B](this,A)}if(this.fireEvent("beforeaction",this,B)!==false){this.beforeAction(B);B.run.defer(100,B)}return this},submit:function(B){if(this.standardSubmit){var A=this.isValid();if(A){this.el.dom.submit()}return A}this.doAction("submit",B);return this},load:function(A){this.doAction("load",A);return this},updateRecord:function(B){B.beginEdit();var A=B.fields;A.each(function(D){var E=this.findField(D.name);if(E){B.set(D.name,E.getValue())}},this);B.endEdit();return this},loadRecord:function(A){this.setValues(A.data);return this},beforeAction:function(A){var B=A.options;if(B.waitMsg){if(this.waitMsgTarget===true){this.el.mask(B.waitMsg,"x-mask-loading")}else{if(this.waitMsgTarget){this.waitMsgTarget=Ext.get(this.waitMsgTarget);this.waitMsgTarget.mask(B.waitMsg,"x-mask-loading")}else{Ext.MessageBox.wait(B.waitMsg,B.waitTitle||this.waitTitle||"Please Wait...")}}}},afterAction:function(A,D){this.activeAction=null;var B=A.options;if(B.waitMsg){if(this.waitMsgTarget===true){this.el.unmask()}else{if(this.waitMsgTarget){this.waitMsgTarget.unmask()}else{Ext.MessageBox.updateProgress(1);Ext.MessageBox.hide()}}}if(D){if(B.reset){this.reset()}Ext.callback(B.success,B.scope,[this,A]);this.fireEvent("actioncomplete",this,A)}else{Ext.callback(B.failure,B.scope,[this,A]);this.fireEvent("actionfailed",this,A)}},findField:function(B){var A=this.items.get(B);if(!(A&&typeof A=="object")){this.items.each(function(D){if(D.isFormField&&(D.dataIndex==B||D.id==B||D.getName()==B)){A=D;return false}})}return A},markInvalid:function(H){if(Ext.isArray(H)){for(var D=0,A=H.length;D<A;D++){var B=H[D];var E=this.findField(B.id);if(E){E.markInvalid(B.msg)}}}else{var F,G;for(G in H){if(typeof H[G]!="function"&&(F=this.findField(G))){F.markInvalid(H[G])}}}return this},setValues:function(D){if(Ext.isArray(D)){for(var E=0,A=D.length;E<A;E++){var B=D[E];var F=this.findField(B.id);if(F){F.setValue(B.value);if(this.trackResetOnLoad){F.originalValue=F.getValue()}}}}else{var G,H;for(H in D){if(typeof D[H]!="function"&&(G=this.findField(H))){G.setValue(D[H]);if(this.trackResetOnLoad){G.originalValue=G.getValue()}}}}return this},getValues:function(B){var A=Ext.lib.Ajax.serializeForm(this.el.dom);if(B===true){return A}return Ext.urlDecode(A)},clearInvalid:function(){this.items.each(function(A){A.clearInvalid()});return this},reset:function(){this.items.each(function(A){A.reset()});return this},add:function(){this.items.addAll(Array.prototype.slice.call(arguments,0));return this},remove:function(A){this.items.remove(A);return this},render:function(){this.items.each(function(A){if(A.isFormField&&!A.rendered&&document.getElementById(A.id)){A.applyToMarkup(A.id)}});return this},applyToFields:function(A){this.items.each(function(B){Ext.apply(B,A)});return this},applyIfToFields:function(A){this.items.each(function(B){Ext.applyIf(B,A)});return this}});Ext.BasicForm=Ext.form.BasicForm;Ext.FormPanel=Ext.extend(Ext.Panel,{buttonAlign:"center",minButtonWidth:75,labelAlign:"left",monitorValid:false,monitorPoll:200,layout:"form",initComponent:function(){this.form=this.createForm();this.bodyCfg={tag:"form",cls:this.baseCls+"-body",method:this.method||"POST",id:this.formId||Ext.id()};if(this.fileUpload){this.bodyCfg.enctype="multipart/form-data"}Ext.FormPanel.superclass.initComponent.call(this);this.initItems();this.addEvents("clientvalidation");this.relayEvents(this.form,["beforeaction","actionfailed","actioncomplete"])},createForm:function(){var A=Ext.applyIf({listeners:{}},this.initialConfig);return new Ext.form.BasicForm(null,A)},initFields:function(){var D=this.form;var A=this;var B=function(E){if(E.isFormField){D.add(E)}else{if(E.doLayout&&E!=A){Ext.applyIf(E,{labelAlign:E.ownerCt.labelAlign,labelWidth:E.ownerCt.labelWidth,itemCls:E.ownerCt.itemCls});if(E.items){E.items.each(B)}}}};this.items.each(B)},getLayoutTarget:function(){return this.form.el},getForm:function(){return this.form},onRender:function(B,A){this.initFields();Ext.FormPanel.superclass.onRender.call(this,B,A);this.form.initEl(this.body)},beforeDestroy:function(){this.stopMonitoring();Ext.FormPanel.superclass.beforeDestroy.call(this);this.form.items.clear();Ext.destroy(this.form)},initEvents:function(){Ext.FormPanel.superclass.initEvents.call(this);this.items.on("remove",this.onRemove,this);this.items.on("add",this.onAdd,this);if(this.monitorValid){this.startMonitoring()}},onAdd:function(A,B){if(B.isFormField){this.form.add(B)}},onRemove:function(A){if(A.isFormField){Ext.destroy(A.container.up(".x-form-item"));this.form.remove(A)}},startMonitoring:function(){if(!this.validTask){this.validTask=new Ext.util.TaskRunner();this.validTask.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this})}},stopMonitoring:function(){if(this.validTask){this.validTask.stopAll();this.validTask=null}},load:function(){this.form.load.apply(this.form,arguments)},onDisable:function(){Ext.FormPanel.superclass.onDisable.call(this);if(this.form){this.form.items.each(function(){this.disable()})}},onEnable:function(){Ext.FormPanel.superclass.onEnable.call(this);if(this.form){this.form.items.each(function(){this.enable()})}},bindHandler:function(){var E=true;this.form.items.each(function(F){if(!F.isValid(true)){E=false;return false}});if(this.buttons){for(var D=0,A=this.buttons.length;D<A;D++){var B=this.buttons[D];if(B.formBind===true&&B.disabled===E){B.setDisabled(!E)}}}this.fireEvent("clientvalidation",this,E)}});Ext.reg("form",Ext.FormPanel);Ext.form.FormPanel=Ext.FormPanel;Ext.form.FieldSet=Ext.extend(Ext.Panel,{baseCls:"x-fieldset",layout:"form",animCollapse:false,onRender:function(B,A){if(!this.el){this.el=document.createElement("fieldset");this.el.id=this.id;if(this.title||this.header||this.checkboxToggle){this.el.appendChild(document.createElement("legend")).className="x-fieldset-header"}}Ext.form.FieldSet.superclass.onRender.call(this,B,A);if(this.checkboxToggle){var D=typeof this.checkboxToggle=="object"?this.checkboxToggle:{tag:"input",type:"checkbox",name:this.checkboxName||this.id+"-checkbox"};this.checkbox=this.header.insertFirst(D);this.checkbox.dom.checked=!this.collapsed;this.checkbox.on("click",this.onCheckClick,this)}},onCollapse:function(A,B){if(this.checkbox){this.checkbox.dom.checked=false}Ext.form.FieldSet.superclass.onCollapse.call(this,A,B)},onExpand:function(A,B){if(this.checkbox){this.checkbox.dom.checked=true}Ext.form.FieldSet.superclass.onExpand.call(this,A,B)},onCheckClick:function(){this[this.checkbox.dom.checked?"expand":"collapse"]()},beforeDestroy:function(){if(this.checkbox){this.checkbox.un("click",this.onCheckClick,this)}Ext.form.FieldSet.superclass.beforeDestroy.call(this)}});Ext.reg("fieldset",Ext.form.FieldSet);Ext.form.HtmlEditor=Ext.extend(Ext.form.Field,{enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",defaultValue:Ext.isOpera?"&nbsp;":"&#8203;",actionMode:"wrap",validationEvent:false,deferHeight:true,initialized:false,activated:false,sourceEditMode:false,onFocus:Ext.emptyFn,iframePad:3,hideMode:"offsets",defaultAutoCreate:{tag:"textarea",style:"width:500px;height:300px;",autocomplete:"off"},initComponent:function(){this.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange")},createFontOptions:function(){var E=[],B=this.fontFamilies,D,G;for(var F=0,A=B.length;F<A;F++){D=B[F];G=D.toLowerCase();E.push('<option value="',G,'" style="font-family:',D,';"',(this.defaultFont==G?' selected="true">':">"),D,"</option>")}return E.join("")},createToolbar:function(E){var A=Ext.QuickTips&&Ext.QuickTips.isEnabled();function D(H,F,G){return{itemId:H,cls:"x-btn-icon x-edit-"+H,enableToggle:F!==false,scope:E,handler:G||E.relayBtnCmd,clickEvent:"mousedown",tooltip:A?E.buttonTips[H]||undefined:undefined,tabIndex:-1}}var B=new Ext.Toolbar({renderTo:this.wrap.dom.firstChild});B.el.on("click",function(F){F.preventDefault()});if(this.enableFont&&!Ext.isSafari2){this.fontSelect=B.el.createChild({tag:"select",cls:"x-font-select",html:this.createFontOptions()});this.fontSelect.on("change",function(){var F=this.fontSelect.dom.value;this.relayCmd("fontname",F);this.deferFocus()},this);B.add(this.fontSelect.dom,"-")}if(this.enableFormat){B.add(D("bold"),D("italic"),D("underline"))}if(this.enableFontSize){B.add("-",D("increasefontsize",false,this.adjustFont),D("decreasefontsize",false,this.adjustFont))}if(this.enableColors){B.add("-",{itemId:"forecolor",cls:"x-btn-icon x-edit-forecolor",clickEvent:"mousedown",tooltip:A?E.buttonTips.forecolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,selectHandler:function(G,F){this.execCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+F:F);this.deferFocus()},scope:this,clickEvent:"mousedown"})},{itemId:"backcolor",cls:"x-btn-icon x-edit-backcolor",clickEvent:"mousedown",tooltip:A?E.buttonTips.backcolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({focus:Ext.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,selectHandler:function(G,F){if(Ext.isGecko){this.execCmd("useCSS",false);this.execCmd("hilitecolor",F);this.execCmd("useCSS",true);this.deferFocus()}else{this.execCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE?"#"+F:F);this.deferFocus()}},scope:this,clickEvent:"mousedown"})})}if(this.enableAlignments){B.add("-",D("justifyleft"),D("justifycenter"),D("justifyright"))}if(!Ext.isSafari2){if(this.enableLinks){B.add("-",D("createlink",false,this.createLink))}if(this.enableLists){B.add("-",D("insertorderedlist"),D("insertunorderedlist"))}if(this.enableSourceEdit){B.add("-",D("sourceedit",true,function(F){this.toggleSourceEdit(F.pressed)}))}}this.tb=B},getDocMarkup:function(){return'<html><head><style type="text/css">body{border:0;margin:0;padding:3px;height:98%;cursor:text;}</style></head><body></body></html>'},getEditorBody:function(){return this.doc.body||this.doc.documentElement},getDoc:function(){return Ext.isIE?this.getWin().document:(this.iframe.contentDocument||this.getWin().document)},getWin:function(){return Ext.isIE?this.iframe.contentWindow:window.frames[this.iframe.name]},onRender:function(B,A){Ext.form.HtmlEditor.superclass.onRender.call(this,B,A);this.el.dom.style.border="0 none";this.el.dom.setAttribute("tabIndex",-1);this.el.addClass("x-hidden");if(Ext.isIE){this.el.applyStyles("margin-top:-1px;margin-bottom:-1px;")}this.wrap=this.el.wrap({cls:"x-html-editor-wrap",cn:{cls:"x-html-editor-tb"}});this.createToolbar(this);this.tb.items.each(function(F){if(F.itemId!="sourceedit"){F.disable()}});var D=document.createElement("iframe");D.name=Ext.id();D.frameBorder="0";D.src=Ext.isIE?Ext.SSL_SECURE_URL:"javascript:;";this.wrap.dom.appendChild(D);this.iframe=D;this.monitorTask=Ext.TaskMgr.start({run:this.checkDesignMode,scope:this,interval:100});if(!this.width){var E=this.el.getSize();this.setSize(E.width,this.height||E.height)}},initFrame:function(){Ext.TaskMgr.stop(this.monitorTask);this.doc=this.getDoc();this.win=this.getWin();this.doc.open();this.doc.write(this.getDocMarkup());this.doc.close();var A={run:function(){if(this.doc.body||this.doc.readyState=="complete"){Ext.TaskMgr.stop(A);this.doc.designMode="on";this.initEditor.defer(10,this)}},interval:10,duration:10000,scope:this};Ext.TaskMgr.start(A)},checkDesignMode:function(){if(this.wrap&&this.wrap.dom.offsetWidth){var A=this.getDoc();if(!A){return}if(!A.editorInitialized||String(A.designMode).toLowerCase()!="on"){this.initFrame()}}},onResize:function(B,D){Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments);if(this.el&&this.iframe){if(typeof B=="number"){var E=B-this.wrap.getFrameWidth("lr");this.el.setWidth(this.adjustWidth("textarea",E));this.iframe.style.width=Math.max(E,0)+"px"}if(typeof D=="number"){var A=D-this.wrap.getFrameWidth("tb")-this.tb.el.getHeight();this.el.setHeight(this.adjustWidth("textarea",A));this.iframe.style.height=Math.max(A,0)+"px";if(this.doc){this.getEditorBody().style.height=Math.max((A-(this.iframePad*2)),0)+"px"}}}},toggleSourceEdit:function(A){if(A===undefined){A=!this.sourceEditMode}this.sourceEditMode=A===true;var D=this.tb.items.get("sourceedit");if(D.pressed!==this.sourceEditMode){D.toggle(this.sourceEditMode);return}if(this.sourceEditMode){this.tb.items.each(function(E){if(E.itemId!="sourceedit"){E.disable()}});this.syncValue();this.iframe.className="x-hidden";this.el.removeClass("x-hidden");this.el.dom.removeAttribute("tabIndex");this.el.focus()}else{if(this.initialized){this.tb.items.each(function(E){E.enable()})}this.pushValue();this.iframe.className="";this.el.addClass("x-hidden");this.el.dom.setAttribute("tabIndex",-1);this.deferFocus()}var B=this.lastSize;if(B){delete this.lastSize;this.setSize(B)}this.fireEvent("editmodechange",this,this.sourceEditMode)},createLink:function(){var A=prompt(this.createLinkText,this.defaultLinkValue);if(A&&A!="http://"){this.relayCmd("createlink",A)}},adjustSize:Ext.BoxComponent.prototype.adjustSize,getResizeEl:function(){return this.wrap},getPositionEl:function(){return this.wrap},initEvents:function(){this.originalValue=this.getValue()},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,setValue:function(A){Ext.form.HtmlEditor.superclass.setValue.call(this,A);this.pushValue()},cleanHtml:function(A){A=String(A);if(A.length>5){if(Ext.isWebKit){A=A.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,"")}}if(A==this.defaultValue){A=""}return A},syncValue:function(){if(this.initialized){var E=this.getEditorBody();var D=E.innerHTML;if(Ext.isWebKit){var B=E.getAttribute("style");var A=B.match(/text-align:(.*?);/i);if(A&&A[1]){D='<div style="'+A[0]+'">'+D+"</div>"}}D=this.cleanHtml(D);if(this.fireEvent("beforesync",this,D)!==false){this.el.dom.value=D;this.fireEvent("sync",this,D)}}},getValue:function(){this[this.sourceEditMode?"pushValue":"syncValue"]();return Ext.form.HtmlEditor.superclass.getValue.call(this)},pushValue:function(){if(this.initialized){var A=this.el.dom.value;if(!this.activated&&A.length<1){A=this.defaultValue}if(this.fireEvent("beforepush",this,A)!==false){this.getEditorBody().innerHTML=A;if(Ext.isGecko){var D=this.doc,B=D.designMode.toLowerCase();D.designMode=B.toggle("on","off");D.designMode=B}this.fireEvent("push",this,A)}}},deferFocus:function(){this.focus.defer(10,this)},focus:function(){if(this.win&&!this.sourceEditMode){this.win.focus()}else{this.el.focus()}},initEditor:function(){try{var B=this.getEditorBody();var A=this.el.getStyles("font-size","font-family","background-image","background-repeat");A["background-attachment"]="fixed";B.bgProperties="fixed";Ext.DomHelper.applyStyles(B,A);if(this.doc){try{Ext.EventManager.removeAll(this.doc)}catch(D){}}this.doc=this.getDoc();Ext.EventManager.on(this.doc,{mousedown:this.onEditorEvent,dblclick:this.onEditorEvent,click:this.onEditorEvent,keyup:this.onEditorEvent,buffer:100,scope:this});if(Ext.isGecko){Ext.EventManager.on(this.doc,"keypress",this.applyCommand,this)}if(Ext.isIE||Ext.isWebKit||Ext.isOpera){Ext.EventManager.on(this.doc,"keydown",this.fixKeys,this)}this.initialized=true;this.fireEvent("initialize",this);this.doc.editorInitialized=true;this.pushValue()}catch(D){}},onDestroy:function(){if(this.monitorTask){Ext.TaskMgr.stop(this.monitorTask)}if(this.rendered){Ext.destroy(this.tb);if(this.wrap){this.wrap.dom.innerHTML="";this.wrap.remove()}}if(this.el){this.el.removeAllListeners();this.el.remove()}if(this.doc){try{Ext.EventManager.removeAll(this.doc);for(var B in this.doc){delete this.doc[B]}}catch(A){}}this.purgeListeners()},onFirstFocus:function(){this.activated=true;this.tb.items.each(function(E){E.enable()});if(Ext.isGecko){this.win.focus();var A=this.win.getSelection();if(!A.focusNode||A.focusNode.nodeType!=3){var B=A.getRangeAt(0);B.selectNodeContents(this.getEditorBody());B.collapse(true);this.deferFocus()}try{this.execCmd("useCSS",true);this.execCmd("styleWithCSS",false)}catch(D){}}this.fireEvent("activate",this)},adjustFont:function(B){var D=B.itemId=="increasefontsize"?1:-1;var A=parseInt(this.doc.queryCommandValue("FontSize")||2,10);if((Ext.isWebKit&&!Ext.isSafari2)||Ext.isAir){if(A<=10){A=1+D}else{if(A<=13){A=2+D}else{if(A<=16){A=3+D}else{if(A<=18){A=4+D}else{if(A<=24){A=5+D}else{A=6+D}}}}}A=A.constrain(1,6)}else{if(Ext.isSafari){D*=2}A=Math.max(1,A+D)+(Ext.isSafari?"px":0)}this.execCmd("FontSize",A)},onEditorEvent:function(A){this.updateToolbar()},updateToolbar:function(){if(!this.activated){this.onFirstFocus();return}var B=this.tb.items.map,D=this.doc;if(this.enableFont&&!Ext.isSafari2){var A=(this.doc.queryCommandValue("FontName")||this.defaultFont).toLowerCase();if(A!=this.fontSelect.dom.value){this.fontSelect.dom.value=A}}if(this.enableFormat){B.bold.toggle(D.queryCommandState("bold"));B.italic.toggle(D.queryCommandState("italic"));B.underline.toggle(D.queryCommandState("underline"))}if(this.enableAlignments){B.justifyleft.toggle(D.queryCommandState("justifyleft"));B.justifycenter.toggle(D.queryCommandState("justifycenter"));B.justifyright.toggle(D.queryCommandState("justifyright"))}if(!Ext.isSafari2&&this.enableLists){B.insertorderedlist.toggle(D.queryCommandState("insertorderedlist"));B.insertunorderedlist.toggle(D.queryCommandState("insertunorderedlist"))}Ext.menu.MenuMgr.hideAll();this.syncValue()},relayBtnCmd:function(A){this.relayCmd(A.itemId)},relayCmd:function(B,A){(function(){this.focus();this.execCmd(B,A);this.updateToolbar()}).defer(10,this)},execCmd:function(B,A){this.doc.execCommand(B,false,A===undefined?null:A);this.syncValue()},applyCommand:function(B){if(B.ctrlKey){var D=B.getCharCode(),A;if(D>0){D=String.fromCharCode(D);switch(D){case"b":A="bold";break;case"i":A="italic";break;case"u":A="underline";break}if(A){this.win.focus();this.execCmd(A);this.deferFocus();B.preventDefault()}}}},insertAtCursor:function(B){if(!this.activated){return}if(Ext.isIE){this.win.focus();var A=this.doc.selection.createRange();if(A){A.collapse(true);A.pasteHTML(B);this.syncValue();this.deferFocus()}}else{if(Ext.isGecko||Ext.isOpera){this.win.focus();this.execCmd("InsertHTML",B);this.deferFocus()}else{if(Ext.isWebKit){this.execCmd("InsertText",B);this.deferFocus()}}}},fixKeys:function(){if(Ext.isIE){return function(E){var A=E.getKey(),B;if(A==E.TAB){E.stopEvent();B=this.doc.selection.createRange();if(B){B.collapse(true);B.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;");this.deferFocus()}}else{if(A==E.ENTER){B=this.doc.selection.createRange();if(B){var D=B.parentElement();if(!D||D.tagName.toLowerCase()!="li"){E.stopEvent();B.pasteHTML("<br />");B.collapse(false);B.select()}}}}}}else{if(Ext.isOpera){return function(B){var A=B.getKey();if(A==B.TAB){B.stopEvent();this.win.focus();this.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;");this.deferFocus()}}}else{if(Ext.isWebKit){return function(B){var A=B.getKey();if(A==B.TAB){B.stopEvent();this.execCmd("InsertText","\t");this.deferFocus()}}}}}}(),getToolbar:function(){return this.tb},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}}});Ext.reg("htmleditor",Ext.form.HtmlEditor);Ext.form.TimeField=Ext.extend(Ext.form.ComboBox,{minValue:null,maxValue:null,minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H",increment:15,mode:"local",triggerAction:"all",typeAhead:false,initDate:"1/1/2008",initComponent:function(){Ext.form.TimeField.superclass.initComponent.call(this);if(typeof this.minValue=="string"){this.minValue=this.parseDate(this.minValue)}if(typeof this.maxValue=="string"){this.maxValue=this.parseDate(this.maxValue)}if(!this.store){var B=this.parseDate(this.minValue);if(!B){B=new Date(this.initDate).clearTime()}var A=this.parseDate(this.maxValue);if(!A){A=new Date(this.initDate).clearTime().add("mi",(24*60)-1)}var D=[];while(B<=A){D.push([B.dateFormat(this.format)]);B=B.add("mi",this.increment)}this.store=new Ext.data.SimpleStore({fields:["text"],data:D});this.displayField="text"}},getValue:function(){var A=Ext.form.TimeField.superclass.getValue.call(this);return this.formatDate(this.parseDate(A))||""},setValue:function(A){Ext.form.TimeField.superclass.setValue.call(this,this.formatDate(this.parseDate(A)))},validateValue:Ext.form.DateField.prototype.validateValue,parseDate:Ext.form.DateField.prototype.parseDate,formatDate:Ext.form.DateField.prototype.formatDate,beforeBlur:function(){var A=this.parseDate(this.getRawValue());if(A){this.setValue(A.dateFormat(this.format))}Ext.form.TimeField.superclass.beforeBlur.call(this)}});Ext.reg("timefield",Ext.form.TimeField);Ext.form.Label=Ext.extend(Ext.BoxComponent,{onRender:function(B,A){if(!this.el){this.el=document.createElement("label");this.el.id=this.getId();this.el.innerHTML=this.text?Ext.util.Format.htmlEncode(this.text):(this.html||"");if(this.forId){this.el.setAttribute("for",this.forId)}}Ext.form.Label.superclass.onRender.call(this,B,A)},setText:function(A,B){var D=B===false;this[!D?"text":"html"]=A;delete this[D?"text":"html"];if(this.rendered){this.el.dom.innerHTML=B!==false?Ext.util.Format.htmlEncode(A):A}return this}});Ext.reg("label",Ext.form.Label);Ext.form.Action=function(B,A){this.form=B;this.options=A||{}};Ext.form.Action.CLIENT_INVALID="client";Ext.form.Action.SERVER_INVALID="server";Ext.form.Action.CONNECT_FAILURE="connect";Ext.form.Action.LOAD_FAILURE="load";Ext.form.Action.prototype={type:"default",run:function(A){},success:function(A){},handleResponse:function(A){},failure:function(A){this.response=A;this.failureType=Ext.form.Action.CONNECT_FAILURE;this.form.afterAction(this,false)},processResponse:function(A){this.response=A;if(!A.responseText&&!A.responseXML){return true}this.result=this.handleResponse(A);return this.result},getUrl:function(D){var A=this.options.url||this.form.url||this.form.el.dom.action;if(D){var B=this.getParams();if(B){A+=(A.indexOf("?")!=-1?"&":"?")+B}}return A},getMethod:function(){return(this.options.method||this.form.method||this.form.el.dom.method||"POST").toUpperCase()},getParams:function(){var A=this.form.baseParams;var B=this.options.params;if(B){if(typeof B=="object"){B=Ext.urlEncode(Ext.applyIf(B,A))}else{if(typeof B=="string"&&A){B+="&"+Ext.urlEncode(A)}}}else{if(A){B=Ext.urlEncode(A)}}return B},createCallback:function(A){var A=A||{};return{success:this.success,failure:this.failure,scope:this,timeout:(A.timeout*1000)||(this.form.timeout*1000),upload:this.form.fileUpload?this.success:undefined}}};Ext.form.Action.Submit=function(B,A){Ext.form.Action.Submit.superclass.constructor.call(this,B,A)};Ext.extend(Ext.form.Action.Submit,Ext.form.Action,{type:"submit",run:function(){var B=this.options;var D=this.getMethod();var A=D=="GET";if(B.clientValidation===false||this.form.isValid()){Ext.Ajax.request(Ext.apply(this.createCallback(B),{form:this.form.el.dom,url:this.getUrl(A),method:D,headers:B.headers,params:!A?this.getParams():null,isUpload:this.form.fileUpload}))}else{if(B.clientValidation!==false){this.failureType=Ext.form.Action.CLIENT_INVALID;this.form.afterAction(this,false)}}},success:function(B){var A=this.processResponse(B);if(A===true||A.success){this.form.afterAction(this,true);return}if(A.errors){this.form.markInvalid(A.errors);this.failureType=Ext.form.Action.SERVER_INVALID}this.form.afterAction(this,false)},handleResponse:function(D){if(this.form.errorReader){var B=this.form.errorReader.read(D);var G=[];if(B.records){for(var E=0,A=B.records.length;E<A;E++){var F=B.records[E];G[E]=F.data}}if(G.length<1){G=null}return{success:B.success,errors:G}}return Ext.decode(D.responseText)}});Ext.form.Action.Load=function(B,A){Ext.form.Action.Load.superclass.constructor.call(this,B,A);this.reader=this.form.reader};Ext.extend(Ext.form.Action.Load,Ext.form.Action,{type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(this.options),{method:this.getMethod(),url:this.getUrl(false),headers:this.options.headers,params:this.getParams()}))},success:function(B){var A=this.processResponse(B);if(A===true||!A.success||!A.data){this.failureType=Ext.form.Action.LOAD_FAILURE;this.form.afterAction(this,false);return}this.form.clearInvalid();this.form.setValues(A.data);this.form.afterAction(this,true)},handleResponse:function(B){if(this.form.reader){var A=this.form.reader.read(B);var D=A.records&&A.records[0]?A.records[0].data:null;return{success:A.success,data:D}}return Ext.decode(B.responseText)}});Ext.form.Action.ACTION_TYPES={load:Ext.form.Action.Load,submit:Ext.form.Action.Submit};Ext.form.VTypes=function(){var D=/^[a-zA-Z_]+$/;var E=/^[a-zA-Z0-9_]+$/;var B=/^(\w+)([-+.][\w]+)*@(\w[-\w]*\.){1,5}([A-Za-z]){2,4}$/;var A=/(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return{email:function(F){return B.test(F)},emailText:'This field should be an e-mail address in the format "user@domain.com"',emailMask:/[a-z0-9_\.\-@]/i,url:function(F){return A.test(F)},urlText:'This field should be a URL in the format "http://www.domain.com"',alpha:function(F){return D.test(F)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(F){return E.test(F)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}();Ext.grid.GridPanel=Ext.extend(Ext.Panel,{ddText:"{0} selected row{1}",minColumnWidth:25,trackMouseOver:true,enableDragDrop:false,enableColumnMove:true,enableColumnHide:true,enableHdMenu:true,stripeRows:false,autoExpandColumn:false,autoExpandMin:50,autoExpandMax:1000,view:null,loadMask:false,deferRowRender:true,rendered:false,viewReady:false,stateEvents:["columnmove","columnresize","sortchange"],initComponent:function(){Ext.grid.GridPanel.superclass.initComponent.call(this);this.autoScroll=false;this.autoWidth=false;if(Ext.isArray(this.columns)){this.colModel=new Ext.grid.ColumnModel(this.columns);delete this.columns}if(this.ds){this.store=this.ds;delete this.ds}if(this.cm){this.colModel=this.cm;delete this.cm}if(this.sm){this.selModel=this.sm;delete this.sm}this.store=Ext.StoreMgr.lookup(this.store);this.addEvents("click","dblclick","contextmenu","mousedown","mouseup","mouseover","mouseout","keypress","keydown","cellmousedown","rowmousedown","headermousedown","cellclick","celldblclick","rowclick","rowdblclick","headerclick","headerdblclick","rowcontextmenu","cellcontextmenu","headercontextmenu","bodyscroll","columnresize","columnmove","sortchange")},onRender:function(D,A){Ext.grid.GridPanel.superclass.onRender.apply(this,arguments);var E=this.body;this.el.addClass("x-grid-panel");var B=this.getView();B.init(this);E.on("mousedown",this.onMouseDown,this);E.on("click",this.onClick,this);E.on("dblclick",this.onDblClick,this);E.on("contextmenu",this.onContextMenu,this);E.on("keydown",this.onKeyDown,this);this.relayEvents(E,["mousedown","mouseup","mouseover","mouseout","keypress"]);this.getSelectionModel().init(this);this.view.render()},initEvents:function(){Ext.grid.GridPanel.superclass.initEvents.call(this);if(this.loadMask){this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({store:this.store},this.loadMask))}},initStateEvents:function(){Ext.grid.GridPanel.superclass.initStateEvents.call(this);this.colModel.on("hiddenchange",this.saveState,this,{delay:100})},applyState:function(G){var B=this.colModel;var F=G.columns;if(F){for(var D=0,A=F.length;D<A;D++){var E=F[D];var I=B.getColumnById(E.id);if(I){I.hidden=E.hidden;I.width=E.width;var H=B.getIndexById(E.id);if(H!=D){B.moveColumn(H,D)}}}}if(G.sort){this.store[this.store.remoteSort?"setDefaultSort":"sort"](G.sort.field,G.sort.direction)}delete G.columns;delete G.sort;Ext.grid.GridPanel.superclass.applyState.call(this,G)},getState:function(){var D={columns:[]};for(var B=0,E;E=this.colModel.config[B];B++){D.columns[B]={id:E.id,width:E.width};if(E.hidden){D.columns[B].hidden=true}}var A=this.store.getSortState();if(A){D.sort=A}return D},afterRender:function(){Ext.grid.GridPanel.superclass.afterRender.call(this);this.view.layout();if(this.deferRowRender){this.view.afterRender.defer(10,this.view)}else{this.view.afterRender()}this.viewReady=true},reconfigure:function(A,B){if(this.loadMask){this.loadMask.destroy();this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({},{store:A},this.initialConfig.loadMask))}this.view.bind(A,B);this.store=A;this.colModel=B;if(this.rendered){this.view.refresh(true)}},onKeyDown:function(A){this.fireEvent("keydown",A)},onDestroy:function(){if(this.rendered){var A=this.body;A.removeAllListeners();A.update("");Ext.destroy(this.view,this.loadMask)}Ext.destroy(this.colModel,this.selModel);Ext.grid.GridPanel.superclass.onDestroy.call(this)},processEvent:function(D,F){this.fireEvent(D,F);var E=F.getTarget();var B=this.view;var H=B.findHeaderIndex(E);if(H!==false){this.fireEvent("header"+D,this,H,F)}else{var G=B.findRowIndex(E);var A=B.findCellIndex(E);if(G!==false){this.fireEvent("row"+D,this,G,F);if(A!==false){this.fireEvent("cell"+D,this,G,A,F)}}}},onClick:function(A){this.processEvent("click",A)},onMouseDown:function(A){this.processEvent("mousedown",A)},onContextMenu:function(B,A){this.processEvent("contextmenu",B)},onDblClick:function(A){this.processEvent("dblclick",A)},walkCells:function(K,D,B,F,J){var I=this.colModel,G=I.getColumnCount();var A=this.store,H=A.getCount(),E=true;if(B<0){if(D<0){K--;E=false}while(K>=0){if(!E){D=G-1}E=false;while(D>=0){if(F.call(J||this,K,D,I)===true){return[K,D]}D--}K--}}else{if(D>=G){K++;E=false}while(K<H){if(!E){D=0}E=false;while(D<G){if(F.call(J||this,K,D,I)===true){return[K,D]}D++}K++}}return null},onResize:function(){Ext.grid.GridPanel.superclass.onResize.apply(this,arguments);if(this.viewReady){this.view.layout()}},getGridEl:function(){return this.body},stopEditing:Ext.emptyFn,getSelectionModel:function(){if(!this.selModel){this.selModel=new Ext.grid.RowSelectionModel(this.disableSelection?{selectRow:Ext.emptyFn}:null)}return this.selModel},getStore:function(){return this.store},getColumnModel:function(){return this.colModel},getView:function(){if(!this.view){this.view=new Ext.grid.GridView(this.viewConfig)}return this.view},getDragDropText:function(){var A=this.selModel.getCount();return String.format(this.ddText,A,A==1?"":"s")}});Ext.reg("grid",Ext.grid.GridPanel);Ext.grid.GridView=function(A){Ext.apply(this,A);this.addEvents("beforerowremoved","beforerowsinserted","beforerefresh","rowremoved","rowsinserted","rowupdated","refresh");Ext.grid.GridView.superclass.constructor.call(this)};Ext.extend(Ext.grid.GridView,Ext.util.Observable,{deferEmptyText:true,scrollOffset:19,autoFill:false,forceFit:false,sortClasses:["sort-asc","sort-desc"],sortAscText:"Sort Ascending",sortDescText:"Sort Descending",columnsText:"Columns",borderWidth:2,tdClass:"x-grid3-cell",hdCls:"x-grid3-hd",cellSelectorDepth:4,rowSelectorDepth:10,cellSelector:"td.x-grid3-cell",rowSelector:"div.x-grid3-row",firstRowCls:"x-grid3-row-first",lastRowCls:"x-grid3-row-last",rowClsRe:/(?:^|\s+)x-grid3-row-(first|last|alt)(?:\s+|$)/g,initTemplates:function(){var D=this.templates||{};if(!D.master){D.master=new Ext.Template('<div class="x-grid3" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header"><div class="x-grid3-header-inner"><div class="x-grid3-header-offset" style="{ostyle}">{header}</div></div><div class="x-clear"></div></div>','<div class="x-grid3-scroller"><div class="x-grid3-body" style="{bstyle}">{body}</div><a href="#" class="x-grid3-focus" tabIndex="-1"></a></div>',"</div>",'<div class="x-grid3-resize-marker">&#160;</div>','<div class="x-grid3-resize-proxy">&#160;</div>',"</div>")}if(!D.header){D.header=new Ext.Template('<table border="0" cellspacing="0" cellpadding="0" style="{tstyle}">','<thead><tr class="x-grid3-hd-row">{cells}</tr></thead>',"</table>")}if(!D.hcell){D.hcell=new Ext.Template('<td class="x-grid3-hd x-grid3-cell x-grid3-td-{id} {css}" style="{style}"><div {tooltip} {attr} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"",'{value}<img class="x-grid3-sort-icon" src="',Ext.BLANK_IMAGE_URL,'" />',"</div></td>")}if(!D.body){D.body=new Ext.Template("{rows}")}if(!D.row){D.row=new Ext.Template('<div class="x-grid3-row {alt}" style="{tstyle}"><table class="x-grid3-row-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody><tr>{cells}</tr>",(this.enableRowBody?'<tr class="x-grid3-row-body-tr" style="{bodyStyle}"><td colspan="{cols}" class="x-grid3-body-cell" tabIndex="0" hidefocus="on"><div class="x-grid3-row-body">{body}</div></td></tr>':""),"</tbody></table></div>")}if(!D.cell){D.cell=new Ext.Template('<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}" tabIndex="0" {cellAttr}>','<div class="x-grid3-cell-inner x-grid3-col-{id}" unselectable="on" {attr}>{value}</div>',"</td>")}for(var A in D){var B=D[A];if(B&&typeof B.compile=="function"&&!B.compiled){B.disableFormats=true;B.compile()}}this.templates=D;this.colRe=new RegExp("x-grid3-td-([^\\s]+)","")},fly:function(A){if(!this._flyweight){this._flyweight=new Ext.Element.Flyweight(document.body)}this._flyweight.dom=A;return this._flyweight},getEditorParent:function(){return this.scroller.dom},initElements:function(){var D=Ext.Element;var B=this.grid.getGridEl().dom.firstChild;var A=B.childNodes;this.el=new D(B);this.mainWrap=new D(A[0]);this.mainHd=new D(this.mainWrap.dom.firstChild);if(this.grid.hideHeaders){this.mainHd.setDisplayed(false)}this.innerHd=this.mainHd.dom.firstChild;this.scroller=new D(this.mainWrap.dom.childNodes[1]);if(this.forceFit){this.scroller.setStyle("overflow-x","hidden")}this.mainBody=new D(this.scroller.dom.firstChild);this.focusEl=new D(this.scroller.dom.childNodes[1]);this.focusEl.swallowEvent("click",true);this.resizeMarker=new D(A[1]);this.resizeProxy=new D(A[2])},getRows:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},findCell:function(A){if(!A){return false}return this.fly(A).findParent(this.cellSelector,this.cellSelectorDepth)},findCellIndex:function(D,B){var A=this.findCell(D);if(A&&(!B||this.fly(A).hasClass(B))){return this.getCellIndex(A)}return false},getCellIndex:function(B){if(B){var A=B.className.match(this.colRe);if(A&&A[1]){return this.cm.getIndexById(A[1])}}return false},findHeaderCell:function(B){var A=this.findCell(B);return A&&this.fly(A).hasClass(this.hdCls)?A:null},findHeaderIndex:function(A){return this.findCellIndex(A,this.hdCls)},findRow:function(A){if(!A){return false}return this.fly(A).findParent(this.rowSelector,this.rowSelectorDepth)},findRowIndex:function(A){var B=this.findRow(A);return B?B.rowIndex:false},getRow:function(A){return this.getRows()[A]},getCell:function(B,A){return this.getRow(B).getElementsByTagName("td")[A]},getHeaderCell:function(A){return this.mainHd.dom.getElementsByTagName("td")[A]},addRowClass:function(D,A){var B=this.getRow(D);if(B){this.fly(B).addClass(A)}},removeRowClass:function(D,A){var B=this.getRow(D);if(B){this.fly(B).removeClass(A)}},removeRow:function(A){Ext.removeNode(this.getRow(A));this.syncFocusEl(A)},removeRows:function(D,A){var B=this.mainBody.dom;for(var E=D;E<=A;E++){Ext.removeNode(B.childNodes[D])}this.syncFocusEl(D)},getScrollState:function(){var A=this.scroller.dom;return{left:A.scrollLeft,top:A.scrollTop}},restoreScroll:function(A){var B=this.scroller.dom;B.scrollLeft=A.left;B.scrollTop=A.top},scrollToTop:function(){this.scroller.dom.scrollTop=0;this.scroller.dom.scrollLeft=0},syncScroll:function(){this.syncHeaderScroll();var A=this.scroller.dom;this.grid.fireEvent("bodyscroll",A.scrollLeft,A.scrollTop)},syncHeaderScroll:function(){var A=this.scroller.dom;this.innerHd.scrollLeft=A.scrollLeft;this.innerHd.scrollLeft=A.scrollLeft},updateSortIcon:function(B,A){var E=this.sortClasses;var D=this.mainHd.select("td").removeClass(E);D.item(B).addClass(E[A=="DESC"?1:0])},updateAllColumnWidths:function(){var E=this.getTotalWidth();var J=this.cm.getColumnCount();var G=[];for(var B=0;B<J;B++){G[B]=this.getColumnWidth(B)}this.innerHd.firstChild.style.width=this.getOffsetWidth();this.innerHd.firstChild.firstChild.style.width=E;this.mainBody.dom.style.width=E;for(var B=0;B<J;B++){var D=this.getHeaderCell(B);D.style.width=G[B]}var H=this.getRows(),K,I;for(var B=0,F=H.length;B<F;B++){K=H[B];K.style.width=E;if(K.firstChild){K.firstChild.style.width=E;I=K.firstChild.rows[0];for(var A=0;A<J;A++){I.childNodes[A].style.width=G[A]}}}this.onAllColumnWidthsUpdated(G,E)},updateColumnWidth:function(B,A){var I=this.getColumnWidth(B);var F=this.getTotalWidth();this.innerHd.firstChild.style.width=this.getOffsetWidth();this.innerHd.firstChild.firstChild.style.width=F;this.mainBody.dom.style.width=F;var E=this.getHeaderCell(B);E.style.width=I;var H=this.getRows(),J;for(var D=0,G=H.length;D<G;D++){J=H[D];J.style.width=F;if(J.firstChild){J.firstChild.style.width=F;J.firstChild.rows[0].childNodes[B].style.width=I}}this.onColumnWidthUpdated(B,I,F)},updateColumnHidden:function(A,F){var E=this.getTotalWidth();this.innerHd.firstChild.style.width=this.getOffsetWidth();this.innerHd.firstChild.firstChild.style.width=E;this.mainBody.dom.style.width=E;var H=F?"none":"";var D=this.getHeaderCell(A);D.style.display=H;var I=this.getRows(),J;for(var B=0,G=I.length;B<G;B++){J=I[B];J.style.width=E;if(J.firstChild){J.firstChild.style.width=E;J.firstChild.rows[0].childNodes[A].style.display=H}}this.onColumnHiddenUpdated(A,F,E);delete this.lastViewWidth;this.layout()},doRender:function(F,H,N,A,M,R){var B=this.templates,E=B.cell,G=B.row,I=M-1;var D="width:"+this.getTotalWidth()+";";var U=[],O,V,P={},J={tstyle:D},L;for(var Q=0,T=H.length;Q<T;Q++){L=H[Q];O=[];var K=(Q+A);for(var S=0;S<M;S++){V=F[S];P.id=V.id;P.css=S==0?"x-grid3-cell-first ":(S==I?"x-grid3-cell-last ":"");P.attr=P.cellAttr="";P.value=V.renderer(L.data[V.name],P,L,K,S,N);P.style=V.style;if(P.value==undefined||P.value===""){P.value="&#160;"}if(L.dirty&&typeof L.modified[V.name]!=="undefined"){P.css+=" x-grid3-dirty-cell"}O[O.length]=E.apply(P)}var W=[];if(R&&((K+1)%2==0)){W[0]="x-grid3-row-alt"}if(L.dirty){W[1]=" x-grid3-dirty-row"}J.cols=M;if(this.getRowClass){W[2]=this.getRowClass(L,K,J,N)}J.alt=W.join(" ");J.cells=O.join("");U[U.length]=G.apply(J)}return U.join("")},processRows:function(A,D){if(!this.ds||this.ds.getCount()<1){return}var B=this.getRows();D=D||!this.grid.stripeRows;A=A||0;Ext.each(B,function(F,E){F.rowIndex=E;F.className=F.className.replace(this.rowClsRe," ");if(!D&&(E+1)%2===0){F.className+=" x-grid3-row-alt"}});if(A===0){Ext.fly(B[0]).addClass(this.firstRowCls)}Ext.fly(B[B.length-1]).addClass(this.lastRowCls)},afterRender:function(){this.mainBody.dom.innerHTML=this.renderRows()||"&nbsp;";this.processRows(0,true);if(this.deferEmptyText!==true){this.applyEmptyText()}},renderUI:function(){var E=this.renderHeaders();var A=this.templates.body.apply({rows:"&nbsp;"});var B=this.templates.master.apply({body:A,header:E,ostyle:"width:"+this.getOffsetWidth()+";",bstyle:"width:"+this.getTotalWidth()+";"});var D=this.grid;D.getGridEl().dom.innerHTML=B;this.initElements();Ext.fly(this.innerHd).on("click",this.handleHdDown,this);this.mainHd.on("mouseover",this.handleHdOver,this);this.mainHd.on("mouseout",this.handleHdOut,this);this.mainHd.on("mousemove",this.handleHdMove,this);this.scroller.on("scroll",this.syncScroll,this);if(D.enableColumnResize!==false){this.splitZone=new Ext.grid.GridView.SplitDragZone(D,this.mainHd.dom)}if(D.enableColumnMove){this.columnDrag=new Ext.grid.GridView.ColumnDragZone(D,this.innerHd);this.columnDrop=new Ext.grid.HeaderDropZone(D,this.mainHd.dom)}if(D.enableHdMenu!==false){if(D.enableColumnHide!==false){this.colMenu=new Ext.menu.Menu({id:D.id+"-hcols-menu"});this.colMenu.on("beforeshow",this.beforeColMenuShow,this);this.colMenu.on("itemclick",this.handleHdMenuClick,this)}this.hmenu=new Ext.menu.Menu({id:D.id+"-hctx"});this.hmenu.add({id:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{id:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"});if(D.enableColumnHide!==false){this.hmenu.add("-",{id:"columns",hideOnClick:false,text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"})}this.hmenu.on("itemclick",this.handleHdMenuClick,this)}if(D.trackMouseOver){this.mainBody.on("mouseover",this.onRowOver,this);this.mainBody.on("mouseout",this.onRowOut,this)}if(D.enableDragDrop||D.enableDrag){this.dragZone=new Ext.grid.GridDragZone(D,{ddGroup:D.ddGroup||"GridDD"})}this.updateHeaderSortState()},layout:function(){if(!this.mainBody){return}var D=this.grid;var G=D.getGridEl();var A=G.getSize(true);var B=A.width;if(B<20||A.height<20){return}if(D.autoHeight){this.scroller.dom.style.overflow="visible";if(Ext.isWebKit){this.scroller.dom.style.position="static"}}else{this.el.setSize(A.width,A.height);var F=this.mainHd.getHeight();var E=A.height-(F);this.scroller.setSize(B,E);if(this.innerHd){this.innerHd.style.width=(B)+"px"}}if(this.forceFit){if(this.lastViewWidth!=B){this.fitColumns(false,false);this.lastViewWidth=B}}else{this.autoExpand();this.syncHeaderScroll()}this.onLayout(B,E)},onLayout:function(A,B){},onColumnWidthUpdated:function(D,A,B){},onAllColumnWidthsUpdated:function(A,B){},onColumnHiddenUpdated:function(B,D,A){},updateColumnText:function(A,B){},afterMove:function(A){},init:function(A){this.grid=A;this.initTemplates();this.initData(A.store,A.colModel);this.initUI(A)},getColumnId:function(A){return this.cm.getColumnId(A)},getOffsetWidth:function(){return(this.cm.getTotalWidth()+this.scrollOffset)+"px"},renderHeaders:function(){var I=this.cm,G=this.templates;var E=G.hcell;var B=[],H=[],A={};var F=I.getColumnCount();var J=F-1;for(var D=0;D<F;D++){A.id=I.getColumnId(D);A.value=I.getColumnHeader(D)||"";A.style=this.getColumnStyle(D,true);A.tooltip=this.getColumnTooltip(D);A.css=D==0?"x-grid3-cell-first ":(D==J?"x-grid3-cell-last ":"");if(I.config[D].align=="right"){A.istyle="padding-right:16px"}else{delete A.istyle}B[B.length]=E.apply(A)}return G.header.apply({cells:B.join(""),tstyle:"width:"+this.getTotalWidth()+";"})},getColumnTooltip:function(A){var B=this.cm.getColumnTooltip(A);if(B){if(Ext.QuickTips.isEnabled()){return'ext:qtip="'+B+'"'}else{return'title="'+B+'"'}}return""},beforeUpdate:function(){this.grid.stopEditing(true)},updateHeaders:function(){this.innerHd.firstChild.innerHTML=this.renderHeaders();this.innerHd.firstChild.style.width=this.getOffsetWidth();this.innerHd.firstChild.firstChild.style.width=this.getTotalWidth()},focusRow:function(A){this.focusCell(A,0,false)},focusCell:function(D,A,B){this.syncFocusEl(this.ensureVisible(D,A,B));if(Ext.isGecko){this.focusEl.focus()}else{this.focusEl.focus.defer(1,this.focusEl)}},resolveCell:function(H,E,G){if(typeof H!="number"){H=H.rowIndex}if(!this.ds){return null}if(H<0||H>=this.ds.getCount()){return null}E=(E!==undefined?E:0);var D=this.getRow(H),A=this.cm,F=A.getColumnCount(),B;if(!(G===false&&E===0)){while(E<F&&A.isHidden(E)){E++}B=this.getCell(H,E)}return{row:D,cell:B}},getResolvedXY:function(A){if(!A){return null}var B=this.scroller.dom,E=A.cell,D=A.row;return E?Ext.fly(E).getXY():[this.el.getX(),Ext.fly(D).getY()]},syncFocusEl:function(E,A,D){var B=E;if(!Ext.isArray(B)){E=Math.min(E,Math.max(0,this.getRows().length-1));B=this.getResolvedXY(this.resolveCell(E,A,D))}this.focusEl.setXY(B||this.scroller.getXY())},ensureVisible:function(R,F,E){var P=this.resolveCell(R,F,E);if(!P||!P.row){return}var J=P.row,G=P.cell;var M=this.scroller.dom;var Q=0;var D=J,N=this.el.dom;while(D&&D!=N){Q+=D.offsetTop;D=D.offsetParent}Q-=this.mainHd.dom.offsetHeight;var O=Q+J.offsetHeight;var A=M.clientHeight;var N=parseInt(M.scrollTop,10);var L=N+A;if(Q<N){M.scrollTop=Q}else{if(O>L){M.scrollTop=O-A}}if(E!==false){var K=parseInt(G.offsetLeft,10);var I=K+G.offsetWidth;var H=parseInt(M.scrollLeft,10);var B=H+M.clientWidth;if(K<H){M.scrollLeft=K}else{if(I>B){M.scrollLeft=I-M.clientWidth}}}return this.getResolvedXY(P)},insertRows:function(A,I,F,H){var E=A.getCount()-1;if(!H&&I===0&&F>=E){this.refresh()}else{if(!H){this.fireEvent("beforerowsinserted",this,I,F)}var B=this.renderRows(I,F);var G=this.getRow(I);if(G){if(I===0){Ext.fly(this.getRow(0)).removeClass(this.firstRowCls)}Ext.DomHelper.insertHtml("beforeBegin",G,B)}else{var D=this.getRow(E-1);if(D){Ext.fly(D).removeClass(this.lastRowCls)}Ext.DomHelper.insertHtml("beforeEnd",this.mainBody.dom,B)}if(!H){this.fireEvent("rowsinserted",this,I,F);this.processRows(I)}else{if(I===0||I>=E){Ext.fly(this.getRow(I)).addClass(I===0?this.firstRowCls:this.lastRowCls)}}}this.syncFocusEl(I)},deleteRows:function(A,D,B){if(A.getRowCount()<1){this.refresh()}else{this.fireEvent("beforerowsdeleted",this,D,B);this.removeRows(D,B);this.processRows(D);this.fireEvent("rowsdeleted",this,D,B)}},getColumnStyle:function(A,D){var B=!D?(this.cm.config[A].css||""):"";B+="width:"+this.getColumnWidth(A)+";";if(this.cm.isHidden(A)){B+="display:none;"}var E=this.cm.config[A].align;if(E){B+="text-align:"+E+";"}return B},getColumnWidth:function(B){var A=this.cm.getColumnWidth(B);if(typeof A=="number"){return(Ext.isBorderBox||(Ext.isWebKit&&!Ext.isSafari2)?A:(A-this.borderWidth>0?A-this.borderWidth:0))+"px"}return A},getTotalWidth:function(){return this.cm.getTotalWidth()+"px"},fitColumns:function(E,H,F){var G=this.cm,T,M,P;var S=G.getTotalWidth(false);var K=this.grid.getGridEl().getWidth(true)-this.scrollOffset;if(K<20){return}var B=K-S;if(B===0){return false}var A=G.getColumnCount(true);var Q=A-(typeof F=="number"?1:0);if(Q===0){Q=1;F=undefined}var L=G.getColumnCount();var J=[];var O=0;var N=0;var I;for(P=0;P<L;P++){if(!G.isHidden(P)&&!G.isFixed(P)&&P!==F){I=G.getColumnWidth(P);J.push(P);O=P;J.push(I);N+=I}}var D=(K-G.getTotalWidth())/N;while(J.length){I=J.pop();P=J.pop();G.setColumnWidth(P,Math.max(this.grid.minColumnWidth,Math.floor(I+I*D)),true)}if((S=G.getTotalWidth(false))>K){var R=Q!=A?F:O;G.setColumnWidth(R,Math.max(1,G.getColumnWidth(R)-(S-K)),true)}if(E!==true){this.updateAllColumnWidths()}return true},autoExpand:function(B){var H=this.grid,A=this.cm;if(!this.userResized&&H.autoExpandColumn){var E=A.getTotalWidth(false);var I=this.grid.getGridEl().getWidth(true)-this.scrollOffset;if(E!=I){var G=A.getIndexById(H.autoExpandColumn);var F=A.getColumnWidth(G);var D=Math.min(Math.max(((I-E)+F),H.autoExpandMin),H.autoExpandMax);if(D!=F){A.setColumnWidth(G,D,true);if(B!==true){this.updateColumnWidth(G,D)}}}}},getColumnData:function(){var E=[],A=this.cm,F=A.getColumnCount();for(var D=0;D<F;D++){var B=A.getDataIndex(D);E[D]={name:(typeof B=="undefined"?this.ds.fields.get(D).name:B),renderer:A.getRenderer(D),id:A.getColumnId(D),style:this.getColumnStyle(D)}}return E},renderRows:function(I,D){var E=this.grid,G=E.colModel,A=E.store,J=E.stripeRows;var H=G.getColumnCount();if(A.getCount()<1){return""}var F=this.getColumnData();I=I||0;D=typeof D=="undefined"?A.getCount()-1:D;var B=A.getRange(I,D);return this.doRender(F,B,A,I,H,J)},renderBody:function(){var A=this.renderRows()||"&nbsp;";return this.templates.body.apply({rows:A})},refreshRow:function(B){var E=this.ds,D;if(typeof B=="number"){D=B;B=E.getAt(D);if(!B){return}}else{D=E.indexOf(B);if(D<0){return}}var A=[];this.insertRows(E,D,D,true);this.getRow(D).rowIndex=D;this.onRemove(E,B,D+1,true);this.fireEvent("rowupdated",this,D,B)},refresh:function(B){this.fireEvent("beforerefresh",this);this.grid.stopEditing(true);var A=this.renderBody();this.mainBody.update(A).setWidth(this.getTotalWidth());if(B===true){this.updateHeaders();this.updateHeaderSortState()}this.processRows(0,true);this.layout();this.applyEmptyText();this.fireEvent("refresh",this)},applyEmptyText:function(){if(this.emptyText&&!this.hasRows()){this.mainBody.update('<div class="x-grid-empty">'+this.emptyText+"</div>")}},updateHeaderSortState:function(){var B=this.ds.getSortState();if(!B){return}if(!this.sortState||(this.sortState.field!=B.field||this.sortState.direction!=B.direction)){this.grid.fireEvent("sortchange",this.grid,B)}this.sortState=B;var D=this.cm.findColumnIndex(B.field);if(D!=-1){var A=B.direction;this.updateSortIcon(D,A)}},destroy:function(){if(this.colMenu){Ext.menu.MenuMgr.unregister(this.colMenu);this.colMenu.destroy();delete this.colMenu}if(this.hmenu){Ext.menu.MenuMgr.unregister(this.hmenu);this.hmenu.destroy();delete this.hmenu}if(this.grid.enableColumnMove){var D=Ext.dd.DDM.ids["gridHeader"+this.grid.getGridEl().id];if(D){for(var A in D){if(!D[A].config.isTarget&&D[A].dragElId){var B=D[A].dragElId;D[A].unreg();Ext.get(B).remove()}else{if(D[A].config.isTarget){D[A].proxyTop.remove();D[A].proxyBottom.remove();D[A].unreg()}}if(Ext.dd.DDM.locationCache[A]){delete Ext.dd.DDM.locationCache[A]}}delete Ext.dd.DDM.ids["gridHeader"+this.grid.getGridEl().id]}}if(this.dragZone){this.dragZone.unreg()}Ext.fly(this.innerHd).removeAllListeners();Ext.removeNode(this.innerHd);Ext.destroy(this.resizeMarker,this.resizeProxy,this.focusEl,this.mainBody,this.scroller,this.mainHd,this.mainWrap,this.dragZone,this.splitZone,this.columnDrag,this.columnDrop);this.initData(null,null);Ext.EventManager.removeResizeListener(this.onWindowResize,this);this.purgeListeners()},onDenyColumnHide:function(){},render:function(){if(this.autoFill){var A=this.grid.ownerCt;if(A&&A.getLayout()){A.on("afterlayout",function(){this.fitColumns(true,true);this.updateHeaders()},this,{single:true})}else{this.fitColumns(true,true)}}else{if(this.forceFit){this.fitColumns(true,false)}else{if(this.grid.autoExpandColumn){this.autoExpand(true)}}}this.renderUI()},initData:function(B,A){if(this.ds){this.ds.un("load",this.onLoad,this);this.ds.un("datachanged",this.onDataChange,this);this.ds.un("add",this.onAdd,this);this.ds.un("remove",this.onRemove,this);this.ds.un("update",this.onUpdate,this);this.ds.un("clear",this.onClear,this)}if(B){B.on("load",this.onLoad,this);B.on("datachanged",this.onDataChange,this);B.on("add",this.onAdd,this);B.on("remove",this.onRemove,this);B.on("update",this.onUpdate,this);B.on("clear",this.onClear,this)}this.ds=B;if(this.cm){this.cm.un("configchange",this.onColConfigChange,this);this.cm.un("widthchange",this.onColWidthChange,this);this.cm.un("headerchange",this.onHeaderChange,this);this.cm.un("hiddenchange",this.onHiddenChange,this);this.cm.un("columnmoved",this.onColumnMove,this);this.cm.un("columnlockchange",this.onColumnLock,this)}if(A){delete this.lastViewWidth;A.on("configchange",this.onColConfigChange,this);A.on("widthchange",this.onColWidthChange,this);A.on("headerchange",this.onHeaderChange,this);A.on("hiddenchange",this.onHiddenChange,this);A.on("columnmoved",this.onColumnMove,this);A.on("columnlockchange",this.onColumnLock,this)}this.cm=A},onDataChange:function(){this.refresh();this.updateHeaderSortState();this.syncFocusEl(0)},onClear:function(){this.refresh();this.syncFocusEl(0)},onUpdate:function(B,A){this.refreshRow(A)},onAdd:function(D,A,B){this.insertRows(D,B,B+(A.length-1))},onRemove:function(E,A,B,D){if(D!==true){this.fireEvent("beforerowremoved",this,B,A)}this.removeRow(B);if(D!==true){this.processRows(B);this.applyEmptyText();this.fireEvent("rowremoved",this,B,A)}},onLoad:function(){this.scrollToTop()},onColWidthChange:function(A,B,D){this.updateColumnWidth(B,D)},onHeaderChange:function(A,B,D){this.updateHeaders()},onHiddenChange:function(A,B,D){this.updateColumnHidden(B,D)},onColumnMove:function(A,E,B){this.indexMap=null;var D=this.getScrollState();this.refresh(true);this.restoreScroll(D);this.afterMove(B);this.grid.fireEvent("columnmove",E,B)},onColConfigChange:function(){delete this.lastViewWidth;this.indexMap=null;this.refresh(true)},initUI:function(A){A.on("headerclick",this.onHeaderClick,this)},initEvents:function(){},onHeaderClick:function(B,A){if(this.headersDisabled||!this.cm.isSortable(A)){return}B.stopEditing(true);B.store.sort(this.cm.getDataIndex(A))},onRowOver:function(B,A){var D;if((D=this.findRowIndex(A))!==false){this.addRowClass(D,"x-grid3-row-over")}},onRowOut:function(B,A){var D;if((D=this.findRowIndex(A))!==false&&!B.within(this.getRow(D),true)){this.removeRowClass(D,"x-grid3-row-over")}},handleWheel:function(A){A.stopPropagation()},onRowSelect:function(A){this.addRowClass(A,"x-grid3-row-selected")},onRowDeselect:function(A){this.removeRowClass(A,"x-grid3-row-selected")},onCellSelect:function(D,B){var A=this.getCell(D,B);if(A){this.fly(A).addClass("x-grid3-cell-selected")}},onCellDeselect:function(D,B){var A=this.getCell(D,B);if(A){this.fly(A).removeClass("x-grid3-cell-selected")}},onColumnSplitterMoved:function(D,B){this.userResized=true;var A=this.grid.colModel;A.setColumnWidth(D,B,true);if(this.forceFit){this.fitColumns(true,false,D);this.updateAllColumnWidths()}else{this.updateColumnWidth(D,B);this.syncHeaderScroll()}this.grid.fireEvent("columnresize",D,B)},handleHdMenuClick:function(D){var B=this.hdCtxIndex;var A=this.cm,E=this.ds;switch(D.id){case"asc":E.sort(A.getDataIndex(B),"ASC");break;case"desc":E.sort(A.getDataIndex(B),"DESC");break;default:B=A.getIndexById(D.id.substr(4));if(B!=-1){if(D.checked&&A.getColumnsBy(this.isHideableColumn,this).length<=1){this.onDenyColumnHide();return false}A.setHidden(B,D.checked)}}return true},isHideableColumn:function(A){return !A.hidden&&!A.fixed},beforeColMenuShow:function(){var A=this.cm,D=A.getColumnCount();this.colMenu.removeAll();for(var B=0;B<D;B++){if(A.config[B].fixed!==true&&A.config[B].hideable!==false){this.colMenu.add(new Ext.menu.CheckItem({id:"col-"+A.getColumnId(B),text:A.getColumnHeader(B),checked:!A.isHidden(B),hideOnClick:false,disabled:A.config[B].hideable===false}))}}},handleHdDown:function(G,E){if(Ext.fly(E).hasClass("x-grid3-hd-btn")){G.stopEvent();var F=this.findHeaderCell(E);Ext.fly(F).addClass("x-grid3-hd-menu-open");var D=this.getCellIndex(F);this.hdCtxIndex=D;var B=this.hmenu.items,A=this.cm;B.get("asc").setDisabled(!A.isSortable(D));B.get("desc").setDisabled(!A.isSortable(D));this.hmenu.on("hide",function(){Ext.fly(F).removeClass("x-grid3-hd-menu-open")},this,{single:true});this.hmenu.show(E,"tl-bl?")}},handleHdOver:function(E,A){var D=this.findHeaderCell(A);if(D&&!this.headersDisabled){this.activeHd=D;this.activeHdIndex=this.getCellIndex(D);var B=this.fly(D);this.activeHdRegion=B.getRegion();if(!this.cm.isMenuDisabled(this.activeHdIndex)){B.addClass("x-grid3-hd-over");this.activeHdBtn=B.child(".x-grid3-hd-btn");if(this.activeHdBtn){this.activeHdBtn.dom.style.height=(D.firstChild.offsetHeight-1)+"px"}}}},handleHdMove:function(G,E){if(this.activeHd&&!this.headersDisabled){var B=this.splitHandleWidth||5;var F=this.activeHdRegion;var A=G.getPageX();var D=this.activeHd.style;if(A-F.left<=B&&this.cm.isResizable(this.activeHdIndex-1)){D.cursor=Ext.isAir?"move":Ext.isWebKit?"e-resize":"col-resize"}else{if(F.right-A<=(!this.activeHdBtn?B:2)&&this.cm.isResizable(this.activeHdIndex)){D.cursor=Ext.isAir?"move":Ext.isWebKit?"w-resize":"col-resize"}else{D.cursor=""}}}},handleHdOut:function(D,A){var B=this.findHeaderCell(A);if(B&&(!Ext.isIE||!D.within(B,true))){this.activeHd=null;this.fly(B).removeClass("x-grid3-hd-over");B.style.cursor=""}},hasRows:function(){var A=this.mainBody.dom.firstChild;return A&&A.nodeType==1&&A.className!="x-grid-empty"},bind:function(A,B){this.initData(A,B)}});Ext.grid.GridView.SplitDragZone=function(A,B){this.grid=A;this.view=A.getView();this.marker=this.view.resizeMarker;this.proxy=this.view.resizeProxy;Ext.grid.GridView.SplitDragZone.superclass.constructor.call(this,B,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:false});this.scroll=false;this.hw=this.view.splitHandleWidth||5};Ext.extend(Ext.grid.GridView.SplitDragZone,Ext.dd.DDProxy,{b4StartDrag:function(A,F){this.view.headersDisabled=true;var E=this.view.mainWrap.getHeight();this.marker.setHeight(E);this.marker.show();this.marker.alignTo(this.view.getHeaderCell(this.cellIndex),"tl-tl",[-2,0]);this.proxy.setHeight(E);var B=this.cm.getColumnWidth(this.cellIndex);var D=Math.max(B-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(D,1000);this.setYConstraint(0,0);this.minX=A-D;this.maxX=A+1000;this.startPos=A;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,A,F)},handleMouseDown:function(A){var I=this.view.findHeaderCell(A.getTarget());if(I){var L=this.view.fly(I).getXY(),F=L[0],E=L[1];var J=A.getXY(),D=J[0],B=J[1];var H=I.offsetWidth,G=false;if((D-F)<=this.hw){G=-1}else{if((F+H)-D<=this.hw){G=0}}if(G!==false){this.cm=this.grid.colModel;var K=this.view.getCellIndex(I);if(G==-1){if(K+G<0){return}while(this.cm.isHidden(K+G)){--G;if(K+G<0){return}}}this.cellIndex=K+G;this.split=I.dom;if(this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)){Ext.grid.GridView.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}}else{if(this.view.columnDrag){this.view.columnDrag.callHandleMouseDown(A)}}}},endDrag:function(E){this.marker.hide();var A=this.view;var B=Math.max(this.minX,E.getPageX());var D=B-this.startPos;A.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+D);setTimeout(function(){A.headersDisabled=false},50)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.GroupingView=Ext.extend(Ext.grid.GridView,{hideGroupedColumn:false,showGroupName:true,startCollapsed:false,enableGrouping:true,enableGroupingMenu:true,enableNoGroups:true,emptyGroupText:"(None)",ignoreAdd:false,groupTextTpl:"{text}",gidSeed:1000,initTemplates:function(){Ext.grid.GroupingView.superclass.initTemplates.call(this);this.state={};var A=this.grid.getSelectionModel();A.on(A.selectRow?"beforerowselect":"beforecellselect",this.onBeforeRowSelect,this);if(!this.startGroup){this.startGroup=new Ext.XTemplate('<div id="{groupId}" class="x-grid-group {cls}">','<div id="{groupId}-hd" class="x-grid-group-hd" style="{style}"><div>',this.groupTextTpl,"</div></div>",'<div id="{groupId}-bd" class="x-grid-group-body">')}this.startGroup.compile();this.endGroup="</div></div>"},findGroup:function(A){return Ext.fly(A).up(".x-grid-group",this.mainBody.dom)},getGroups:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},onAdd:function(){if(this.enableGrouping&&!this.ignoreAdd){var A=this.getScrollState();this.refresh();this.restoreScroll(A)}else{if(!this.enableGrouping){Ext.grid.GroupingView.superclass.onAdd.apply(this,arguments)}}},onRemove:function(F,A,B,E){Ext.grid.GroupingView.superclass.onRemove.apply(this,arguments);var D=document.getElementById(A._groupId);if(D&&D.childNodes[1].childNodes.length<1){Ext.removeNode(D)}this.applyEmptyText()},refreshRow:function(A){if(this.ds.getCount()==1){this.refresh()}else{this.isUpdating=true;Ext.grid.GroupingView.superclass.refreshRow.apply(this,arguments);this.isUpdating=false}},beforeMenuShow:function(){var D=this.getGroupField();var B=this.hmenu.items.get("groupBy");if(B){B.setDisabled(this.cm.config[this.hdCtxIndex].groupable===false)}var A=this.hmenu.items.get("showGroups");if(A){A.setDisabled(!D&&this.cm.config[this.hdCtxIndex].groupable===false);A.setChecked(!!D,true)}},renderUI:function(){Ext.grid.GroupingView.superclass.renderUI.call(this);this.mainBody.on("mousedown",this.interceptMouse,this);if(this.enableGroupingMenu&&this.hmenu){this.hmenu.add("-",{id:"groupBy",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:"x-group-by-icon"});if(this.enableNoGroups){this.hmenu.add({id:"showGroups",text:this.showGroupsText,checked:true,checkHandler:this.onShowGroupsClick,scope:this})}this.hmenu.on("beforeshow",this.beforeMenuShow,this)}},onGroupByClick:function(){this.grid.store.groupBy(this.cm.getDataIndex(this.hdCtxIndex));this.beforeMenuShow()},onShowGroupsClick:function(A,B){if(B){this.onGroupByClick()}else{this.grid.store.clearGrouping()}},toggleGroup:function(D,B){this.grid.stopEditing(true);D=Ext.getDom(D);var A=Ext.fly(D);B=B!==undefined?B:A.hasClass("x-grid-group-collapsed");this.state[A.dom.id]=B;A[B?"removeClass":"addClass"]("x-grid-group-collapsed")},toggleAllGroups:function(D){var B=this.getGroups();for(var E=0,A=B.length;E<A;E++){this.toggleGroup(B[E],D)}},expandAllGroups:function(){this.toggleAllGroups(true)},collapseAllGroups:function(){this.toggleAllGroups(false)},interceptMouse:function(B){var A=B.getTarget(".x-grid-group-hd",this.mainBody);if(A){B.stopEvent();this.toggleGroup(A.parentNode)}},getGroup:function(A,E,G,H,B,F){var D=G?G(A,{},E,H,B,F):String(A);if(D===""){D=this.cm.config[B].emptyGroupText||this.emptyGroupText}return D},getGroupField:function(){return this.grid.store.getGroupState()},afterRender:function(){Ext.grid.GroupingView.superclass.afterRender.call(this);if(this.grid.deferRowRender){this.updateGroupWidths()}},renderRows:function(){var A=this.getGroupField();var E=!!A;if(this.hideGroupedColumn){var B=this.cm.findColumnIndex(A);if(!E&&this.lastGroupField!==undefined){this.mainBody.update("");this.cm.setHidden(this.cm.findColumnIndex(this.lastGroupField),false);delete this.lastGroupField}else{if(E&&this.lastGroupField===undefined){this.lastGroupField=A;this.cm.setHidden(B,true)}else{if(E&&this.lastGroupField!==undefined&&A!==this.lastGroupField){this.mainBody.update("");var D=this.cm.findColumnIndex(this.lastGroupField);this.cm.setHidden(D,false);this.lastGroupField=A;this.cm.setHidden(B,true)}}}}return Ext.grid.GroupingView.superclass.renderRows.apply(this,arguments)},doRender:function(E,H,Q,A,P,S){if(H.length<1){return""}var Z=this.getGroupField();var O=this.cm.findColumnIndex(Z);this.enableGrouping=!!Z;if(!this.enableGrouping||this.isUpdating){return Ext.grid.GroupingView.superclass.doRender.apply(this,arguments)}var I="width:"+this.getTotalWidth()+";";var R=this.grid.getGridEl().id;var G=this.cm.config[O];var B=G.groupRenderer||G.renderer;var T=this.showGroupName?(G.groupName||G.header)+": ":"";var Y=[],L,U,V,N;for(U=0,V=H.length;U<V;U++){var K=A+U;var M=H[U],F=M.data[Z],W=this.getGroup(F,M,B,K,O,Q);if(!L||L.group!=W){N=R+"-gp-"+Z+"-"+Ext.util.Format.htmlEncode(W);var D=typeof this.state[N]!=="undefined"?!this.state[N]:this.startCollapsed;var J=D?"x-grid-group-collapsed":"";L={group:W,gvalue:F,text:T+W,groupId:N,startRow:K,rs:[M],cls:J,style:I};Y.push(L)}else{L.rs.push(M)}M._groupId=N}var X=[];for(U=0,V=Y.length;U<V;U++){var W=Y[U];this.doGroupStart(X,W,E,Q,P);X[X.length]=Ext.grid.GroupingView.superclass.doRender.call(this,E,W.rs,Q,W.startRow,P,S);this.doGroupEnd(X,W,E,Q,P)}return X.join("")},getGroupId:function(G){var E=this.grid.getGridEl().id;var D=this.getGroupField();var F=this.cm.findColumnIndex(D);var B=this.cm.config[F];var H=B.groupRenderer||B.renderer;var A=this.getGroup(G,{data:{}},H,0,F,this.ds);return E+"-gp-"+D+"-"+Ext.util.Format.htmlEncode(G)},doGroupStart:function(A,E,B,F,D){A[A.length]=this.startGroup.apply(E)},doGroupEnd:function(A,E,B,F,D){A[A.length]=this.endGroup},getRows:function(){if(!this.enableGrouping){return Ext.grid.GroupingView.superclass.getRows.call(this)}var H=[];var G,D=this.getGroups();for(var F=0,A=D.length;F<A;F++){G=D[F].childNodes[1].childNodes;for(var E=0,B=G.length;E<B;E++){H[H.length]=G[E]}}return H},updateGroupWidths:function(){if(!this.enableGrouping||!this.hasRows()){return}var D=Math.max(this.cm.getTotalWidth(),this.el.dom.offsetWidth-this.scrollOffset)+"px";var B=this.getGroups();for(var E=0,A=B.length;E<A;E++){B[E].firstChild.style.width=D}},onColumnWidthUpdated:function(D,A,B){Ext.grid.GroupingView.superclass.onColumnWidthUpdated.call(this,D,A,B);this.updateGroupWidths()},onAllColumnWidthsUpdated:function(A,B){Ext.grid.GroupingView.superclass.onAllColumnWidthsUpdated.call(this,A,B);this.updateGroupWidths()},onColumnHiddenUpdated:function(B,D,A){Ext.grid.GroupingView.superclass.onColumnHiddenUpdated.call(this,B,D,A);this.updateGroupWidths()},onLayout:function(){this.updateGroupWidths()},onBeforeRowSelect:function(E,D){if(!this.enableGrouping){return}var B=this.getRow(D);if(B&&!B.offsetParent){var A=this.findGroup(B);this.toggleGroup(A,true)}},groupByText:"Group By This Field",showGroupsText:"Show in Groups"});Ext.grid.GroupingView.GROUP_ID=1000;Ext.grid.HeaderDragZone=function(A,D,B){this.grid=A;this.view=A.getView();this.ddGroup="gridHeader"+this.grid.getGridEl().id;Ext.grid.HeaderDragZone.superclass.constructor.call(this,D);if(B){this.setHandleElId(Ext.id(D));this.setOuterHandleElId(Ext.id(B))}this.scroll=false};Ext.extend(Ext.grid.HeaderDragZone,Ext.dd.DragZone,{maxDragWidth:120,getDragData:function(D){var A=Ext.lib.Event.getTarget(D);var B=this.view.findHeaderCell(A);if(B){return{ddel:B.firstChild,header:B}}return false},onInitDrag:function(A){this.view.headersDisabled=true;var B=this.dragData.ddel.cloneNode(true);B.id=Ext.id();B.style.width=Math.min(this.dragData.header.offsetWidth,this.maxDragWidth)+"px";this.proxy.update(B);return true},afterValidDrop:function(){var A=this.view;setTimeout(function(){A.headersDisabled=false},50)},afterInvalidDrop:function(){var A=this.view;setTimeout(function(){A.headersDisabled=false},50)}});Ext.grid.HeaderDropZone=function(A,D,B){this.grid=A;this.view=A.getView();this.proxyTop=Ext.DomHelper.append(document.body,{cls:"col-move-top",html:"&#160;"},true);this.proxyBottom=Ext.DomHelper.append(document.body,{cls:"col-move-bottom",html:"&#160;"},true);this.proxyTop.hide=this.proxyBottom.hide=function(){this.setLeftTop(-100,-100);this.setStyle("visibility","hidden")};this.ddGroup="gridHeader"+this.grid.getGridEl().id;Ext.grid.HeaderDropZone.superclass.constructor.call(this,A.getGridEl().dom)};Ext.extend(Ext.grid.HeaderDropZone,Ext.dd.DropZone,{proxyOffsets:[-4,-9],fly:Ext.Element.fly,getTargetFromEvent:function(D){var A=Ext.lib.Event.getTarget(D);var B=this.view.findCellIndex(A);if(B!==false){return this.view.getHeaderCell(B)}},nextVisible:function(D){var B=this.view,A=this.grid.colModel;D=D.nextSibling;while(D){if(!A.isHidden(B.getCellIndex(D))){return D}D=D.nextSibling}return null},prevVisible:function(D){var B=this.view,A=this.grid.colModel;D=D.prevSibling;while(D){if(!A.isHidden(B.getCellIndex(D))){return D}D=D.prevSibling}return null},positionIndicator:function(E,B,F){var I=Ext.lib.Event.getPageX(F);var A=Ext.lib.Dom.getRegion(B.firstChild);var J,L,H=A.top+this.proxyOffsets[1];if((A.right-I)<=(A.right-A.left)/2){J=A.right+this.view.borderWidth;L="after"}else{J=A.left;L="before"}var G=this.view.getCellIndex(E);var K=this.view.getCellIndex(B);if(this.grid.colModel.isFixed(K)){return false}var D=this.grid.colModel.isLocked(K);if(L=="after"){K++}if(G<K){K--}if(G==K&&(D==this.grid.colModel.isLocked(G))){return false}J+=this.proxyOffsets[0];this.proxyTop.setLeftTop(J,H);this.proxyTop.show();if(!this.bottomOffset){this.bottomOffset=this.view.mainHd.getHeight()}this.proxyBottom.setLeftTop(J,H+this.proxyTop.dom.offsetHeight+this.bottomOffset);this.proxyBottom.show();return L},onNodeEnter:function(E,A,D,B){if(B.header!=E){this.positionIndicator(B.header,E,D)}},onNodeOver:function(F,B,E,D){var A=false;if(D.header!=F){A=this.positionIndicator(D.header,F,E)}if(!A){this.proxyTop.hide();this.proxyBottom.hide()}return A?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(E,A,D,B){this.proxyTop.hide();this.proxyBottom.hide()},onNodeDrop:function(B,L,G,E){var F=E.header;if(F!=B){var J=this.grid.colModel;var I=Ext.lib.Event.getPageX(G);var A=Ext.lib.Dom.getRegion(B.firstChild);var M=(A.right-I)<=((A.right-A.left)/2)?"after":"before";var H=this.view.getCellIndex(F);var K=this.view.getCellIndex(B);var D=J.isLocked(K);if(M=="after"){K++}if(H<K){K--}if(H==K&&(D==J.isLocked(H))){return false}J.setLocked(H,D,true);J.moveColumn(H,K);this.grid.fireEvent("columnmove",H,K);return true}return false}});Ext.grid.GridView.ColumnDragZone=function(A,B){Ext.grid.GridView.ColumnDragZone.superclass.constructor.call(this,A,B,null);this.proxy.el.addClass("x-grid3-col-dd")};Ext.extend(Ext.grid.GridView.ColumnDragZone,Ext.grid.HeaderDragZone,{handleMouseDown:function(A){},callHandleMouseDown:function(A){Ext.grid.GridView.ColumnDragZone.superclass.handleMouseDown.call(this,A)}});Ext.grid.SplitDragZone=function(A,D,B){this.grid=A;this.view=A.getView();this.proxy=this.view.resizeProxy;Ext.grid.SplitDragZone.superclass.constructor.call(this,D,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:false});this.setHandleElId(Ext.id(D));this.setOuterHandleElId(Ext.id(B));this.scroll=false};Ext.extend(Ext.grid.SplitDragZone,Ext.dd.DDProxy,{fly:Ext.Element.fly,b4StartDrag:function(A,E){this.view.headersDisabled=true;this.proxy.setHeight(this.view.mainWrap.getHeight());var B=this.cm.getColumnWidth(this.cellIndex);var D=Math.max(B-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(D,1000);this.setYConstraint(0,0);this.minX=A-D;this.maxX=A+1000;this.startPos=A;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,A,E)},handleMouseDown:function(B){ev=Ext.EventObject.setEvent(B);var A=this.fly(ev.getTarget());if(A.hasClass("x-grid-split")){this.cellIndex=this.view.getCellIndex(A.dom);this.split=A.dom;this.cm=this.grid.colModel;if(this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)){Ext.grid.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}}},endDrag:function(D){this.view.headersDisabled=false;var A=Math.max(this.minX,Ext.lib.Event.getPageX(D));var B=A-this.startPos;this.view.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+B)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.GridDragZone=function(B,A){this.view=B.getView();Ext.grid.GridDragZone.superclass.constructor.call(this,this.view.mainBody.dom,A);if(this.view.lockedBody){this.setHandleElId(Ext.id(this.view.mainBody.dom));this.setOuterHandleElId(Ext.id(this.view.lockedBody.dom))}this.scroll=false;this.grid=B;this.ddel=document.createElement("div");this.ddel.className="x-grid-dd-wrap"};Ext.extend(Ext.grid.GridDragZone,Ext.dd.DragZone,{ddGroup:"GridDD",getDragData:function(B){var A=Ext.lib.Event.getTarget(B);var E=this.view.findRowIndex(A);if(E!==false){var D=this.grid.selModel;if(!D.isSelected(E)||B.hasModifier()){D.handleMouseDown(this.grid,E,B)}return{grid:this.grid,ddel:this.ddel,rowIndex:E,selections:D.getSelections()}}return false},onInitDrag:function(B){var A=this.dragData;this.ddel.innerHTML=this.grid.getDragDropText();this.proxy.update(this.ddel)},afterRepair:function(){this.dragging=false},getRepairXY:function(B,A){return false},onEndDrag:function(A,B){},onValidDrop:function(A,B,D){this.hideProxy()},beforeInvalidDrop:function(A,B){}});Ext.grid.ColumnModel=function(A){this.defaultWidth=100;this.defaultSortable=false;if(A.columns){Ext.apply(this,A);this.setConfig(A.columns,true)}else{this.setConfig(A,true)}this.addEvents("widthchange","headerchange","hiddenchange","columnmoved","columnlockchange","configchange");Ext.grid.ColumnModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.ColumnModel,Ext.util.Observable,{getColumnId:function(A){return this.config[A].id},setConfig:function(D,B){if(!B){delete this.totalWidth;for(var E=0,A=this.config.length;E<A;E++){var F=this.config[E];if(F.editor){F.editor.destroy()}}}this.config=D;this.lookup={};for(var E=0,A=D.length;E<A;E++){var F=D[E];if(typeof F.renderer=="string"){F.renderer=Ext.util.Format[F.renderer]}if(typeof F.id=="undefined"){F.id=E}if(F.editor&&F.editor.isFormField){F.editor=new Ext.grid.GridEditor(F.editor)}this.lookup[F.id]=F}if(!B){this.fireEvent("configchange",this)}},getColumnById:function(A){return this.lookup[A]},getIndexById:function(D){for(var B=0,A=this.config.length;B<A;B++){if(this.config[B].id==D){return B}}return -1},moveColumn:function(D,A){var B=this.config[D];this.config.splice(D,1);this.config.splice(A,0,B);this.dataMap=null;this.fireEvent("columnmoved",this,D,A)},isLocked:function(A){return this.config[A].locked===true},setLocked:function(B,D,A){if(this.isLocked(B)==D){return}this.config[B].locked=D;if(!A){this.fireEvent("columnlockchange",this,B,D)}},getTotalLockedWidth:function(){var A=0;for(var B=0;B<this.config.length;B++){if(this.isLocked(B)&&!this.isHidden(B)){this.totalWidth+=this.getColumnWidth(B)}}return A},getLockedCount:function(){for(var B=0,A=this.config.length;B<A;B++){if(!this.isLocked(B)){return B}}},getColumnCount:function(D){if(D===true){var E=0;for(var B=0,A=this.config.length;B<A;B++){if(!this.isHidden(B)){E++}}return E}return this.config.length},getColumnsBy:function(E,D){var F=[];for(var B=0,A=this.config.length;B<A;B++){var G=this.config[B];if(E.call(D||this,G,B)===true){F[F.length]=G}}return F},isSortable:function(A){if(typeof this.config[A].sortable=="undefined"){return this.defaultSortable}return this.config[A].sortable},isMenuDisabled:function(A){return !!this.config[A].menuDisabled},getRenderer:function(A){if(!this.config[A].renderer){return Ext.grid.ColumnModel.defaultRenderer}return this.config[A].renderer},setRenderer:function(A,B){this.config[A].renderer=B},getColumnWidth:function(A){return this.config[A].width||this.defaultWidth},setColumnWidth:function(B,D,A){this.config[B].width=D;this.totalWidth=null;if(!A){this.fireEvent("widthchange",this,B,D)}},getTotalWidth:function(B){if(!this.totalWidth){this.totalWidth=0;for(var D=0,A=this.config.length;D<A;D++){if(B||!this.isHidden(D)){this.totalWidth+=this.getColumnWidth(D)}}}return this.totalWidth},getColumnHeader:function(A){return this.config[A].header},setColumnHeader:function(A,B){this.config[A].header=B;this.fireEvent("headerchange",this,A,B)},getColumnTooltip:function(A){return this.config[A].tooltip},setColumnTooltip:function(A,B){this.config[A].tooltip=B},getDataIndex:function(A){return this.config[A].dataIndex},setDataIndex:function(A,B){this.config[A].dataIndex=B},findColumnIndex:function(D){var E=this.config;for(var B=0,A=E.length;B<A;B++){if(E[B].dataIndex==D){return B}}return -1},isCellEditable:function(A,B){return(this.config[A].editable||(typeof this.config[A].editable=="undefined"&&this.config[A].editor))?true:false},getCellEditor:function(A,B){return this.config[A].editor},setEditable:function(A,B){this.config[A].editable=B},isHidden:function(A){return this.config[A].hidden},isFixed:function(A){return this.config[A].fixed},isResizable:function(A){return A>=0&&this.config[A].resizable!==false&&this.config[A].fixed!==true},setHidden:function(A,B){var D=this.config[A];if(D.hidden!==B){D.hidden=B;this.totalWidth=null;this.fireEvent("hiddenchange",this,A,B)}},setEditor:function(A,B){Ext.destroy(this.config[A].editor);this.config[A].editor=B},destroy:function(){var D=this.config;for(var B=0,D=this.config,A=D.length;B<A;B++){Ext.destroy(D[B].editor)}this.purgeListeners()}});Ext.grid.ColumnModel.defaultRenderer=function(A){if(typeof A=="string"&&A.length<1){return"&#160;"}return A};Ext.grid.DefaultColumnModel=Ext.grid.ColumnModel;Ext.grid.AbstractSelectionModel=function(){this.locked=false;Ext.grid.AbstractSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.AbstractSelectionModel,Ext.util.Observable,{init:function(A){this.grid=A;this.initEvents()},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},destroy:function(){this.purgeListeners()}});Ext.grid.RowSelectionModel=function(A){Ext.apply(this,A);this.selections=new Ext.util.MixedCollection(false,function(B){return B.id});this.last=false;this.lastActive=false;this.addEvents("selectionchange","beforerowselect","rowselect","rowdeselect");Ext.grid.RowSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.RowSelectionModel,Ext.grid.AbstractSelectionModel,{singleSelect:false,initEvents:function(){if(!this.grid.enableDragDrop&&!this.grid.enableDrag){this.grid.on("rowmousedown",this.handleMouseDown,this)}this.rowNav=new Ext.KeyNav(this.grid.getGridEl(),{up:function(D){if(!D.shiftKey||this.singleSelect){this.selectPrevious(false)}else{if(this.last!==false&&this.lastActive!==false){var B=this.last;this.selectRange(this.last,this.lastActive-1);this.grid.getView().focusRow(this.lastActive);if(B!==false){this.last=B}}else{this.selectFirstRow()}}},down:function(D){if(!D.shiftKey||this.singleSelect){this.selectNext(false)}else{if(this.last!==false&&this.lastActive!==false){var B=this.last;this.selectRange(this.last,this.lastActive+1);this.grid.getView().focusRow(this.lastActive);if(B!==false){this.last=B}}else{this.selectFirstRow()}}},scope:this});var A=this.grid.view;A.on("refresh",this.onRefresh,this);A.on("rowupdated",this.onRowUpdated,this);A.on("rowremoved",this.onRemove,this)},onRefresh:function(){var G=this.grid.store,B;var E=this.getSelections();this.clearSelections(true);for(var D=0,A=E.length;D<A;D++){var F=E[D];if((B=G.indexOfId(F.id))!=-1){this.selectRow(B,true)}}if(E.length!=this.selections.getCount()){this.fireEvent("selectionchange",this)}},onRemove:function(A,B,D){if(this.selections.remove(D)!==false){this.fireEvent("selectionchange",this)}},onRowUpdated:function(A,B,D){if(this.isSelected(D)){A.onRowSelect(B)}},selectRecords:function(B,F){if(!F){this.clearSelections()}var E=this.grid.store;for(var D=0,A=B.length;D<A;D++){this.selectRow(E.indexOf(B[D]),true)}},getCount:function(){return this.selections.length},selectFirstRow:function(){this.selectRow(0)},selectLastRow:function(A){this.selectRow(this.grid.store.getCount()-1,A)},selectNext:function(A){if(this.hasNext()){this.selectRow(this.last+1,A);this.grid.getView().focusRow(this.last);return true}return false},selectPrevious:function(A){if(this.hasPrevious()){this.selectRow(this.last-1,A);this.grid.getView().focusRow(this.last);return true}return false},hasNext:function(){return this.last!==false&&(this.last+1)<this.grid.store.getCount()},hasPrevious:function(){return !!this.last},getSelections:function(){return[].concat(this.selections.items)},getSelected:function(){return this.selections.itemAt(0)},each:function(F,E){var D=this.getSelections();for(var B=0,A=D.length;B<A;B++){if(F.call(E||this,D[B],B)===false){return false}}return true},clearSelections:function(A){if(this.isLocked()){return}if(A!==true){var D=this.grid.store;var B=this.selections;B.each(function(E){this.deselectRow(D.indexOfId(E.id))},this);B.clear()}else{this.selections.clear()}this.last=false},selectAll:function(){if(this.isLocked()){return}this.selections.clear();for(var B=0,A=this.grid.store.getCount();B<A;B++){this.selectRow(B,true)}},hasSelection:function(){return this.selections.length>0},isSelected:function(A){var B=typeof A=="number"?this.grid.store.getAt(A):A;return(B&&this.selections.key(B.id)?true:false)},isIdSelected:function(A){return(this.selections.key(A)?true:false)},handleMouseDown:function(E,G,F){if(F.button!==0||this.isLocked()){return}var A=this.grid.getView();if(F.shiftKey&&!this.singleSelect&&this.last!==false){var D=this.last;this.selectRange(D,G,F.ctrlKey);this.last=D;A.focusRow(G)}else{var B=this.isSelected(G);if(F.ctrlKey&&B){this.deselectRow(G)}else{if(!B||this.getCount()>1){this.selectRow(G,F.ctrlKey||F.shiftKey);A.focusRow(G)}}}},selectRows:function(D,E){if(!E){this.clearSelections()}for(var B=0,A=D.length;B<A;B++){this.selectRow(D[B],true)}},selectRange:function(B,A,E){if(this.isLocked()){return}if(!E){this.clearSelections()}if(B<=A){for(var D=B;D<=A;D++){this.selectRow(D,true)}}else{for(var D=B;D>=A;D--){this.selectRow(D,true)}}},deselectRange:function(D,B,A){if(this.isLocked()){return}for(var E=D;E<=B;E++){this.deselectRow(E,A)}},selectRow:function(B,E,A){if(this.isLocked()||(B<0||B>=this.grid.store.getCount())||(E&&this.isSelected(B))){return}var D=this.grid.store.getAt(B);if(D&&this.fireEvent("beforerowselect",this,B,E,D)!==false){if(!E||this.singleSelect){this.clearSelections()}this.selections.add(D);this.last=this.lastActive=B;if(!A){this.grid.getView().onRowSelect(B)}this.fireEvent("rowselect",this,B,D);this.fireEvent("selectionchange",this)}},deselectRow:function(B,A){if(this.isLocked()){return}if(this.last==B){this.last=false}if(this.lastActive==B){this.lastActive=false}var D=this.grid.store.getAt(B);if(D){this.selections.remove(D);if(!A){this.grid.getView().onRowDeselect(B)}this.fireEvent("rowdeselect",this,B,D);this.fireEvent("selectionchange",this)}},restoreLast:function(){if(this._last){this.last=this._last}},acceptsNav:function(D,B,A){return !A.isHidden(B)&&A.isCellEditable(B,D)},onEditorKey:function(G,F){var D=F.getKey(),H,E=this.grid,B=E.activeEditor;var A=F.shiftKey;if(D==F.TAB){F.stopEvent();B.completeEdit();if(A){H=E.walkCells(B.row,B.col-1,-1,this.acceptsNav,this)}else{H=E.walkCells(B.row,B.col+1,1,this.acceptsNav,this)}}else{if(D==F.ENTER){F.stopEvent();B.completeEdit();if(this.moveEditorOnEnter!==false){if(A){H=E.walkCells(B.row-1,B.col,-1,this.acceptsNav,this)}else{H=E.walkCells(B.row+1,B.col,1,this.acceptsNav,this)}}}else{if(D==F.ESC){B.cancelEdit()}}}if(H){E.startEditing(H[0],H[1])}},destroy:function(){if(this.rowNav){this.rowNav.disable();this.rowNav=null}Ext.grid.RowSelectionModel.superclass.destroy.call(this)}});Ext.grid.CellSelectionModel=function(A){Ext.apply(this,A);this.selection=null;this.addEvents("beforecellselect","cellselect","selectionchange");Ext.grid.CellSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.CellSelectionModel,Ext.grid.AbstractSelectionModel,{initEvents:function(){this.grid.on("cellmousedown",this.handleMouseDown,this);this.grid.getGridEl().on(Ext.isIE||(Ext.isWebKit&&!Ext.isSafari2)?"keydown":"keypress",this.handleKeyDown,this);var A=this.grid.view;A.on("refresh",this.onViewChange,this);A.on("rowupdated",this.onRowUpdated,this);A.on("beforerowremoved",this.clearSelections,this);A.on("beforerowsinserted",this.clearSelections,this);if(this.grid.isEditor){this.grid.on("beforeedit",this.beforeEdit,this)}},beforeEdit:function(A){this.select(A.row,A.column,false,true,A.record)},onRowUpdated:function(A,B,D){if(this.selection&&this.selection.record==D){A.onCellSelect(B,this.selection.cell[1])}},onViewChange:function(){this.clearSelections(true)},getSelectedCell:function(){return this.selection?this.selection.cell:null},clearSelections:function(B){var A=this.selection;if(A){if(B!==true){this.grid.view.onCellDeselect(A.cell[0],A.cell[1])}this.selection=null;this.fireEvent("selectionchange",this,null)}},hasSelection:function(){return this.selection?true:false},handleMouseDown:function(B,E,A,D){if(D.button!==0||this.isLocked()){return}this.select(E,A)},select:function(G,D,B,F,E){if(this.fireEvent("beforecellselect",this,G,D)!==false){this.clearSelections();E=E||this.grid.store.getAt(G);this.selection={record:E,cell:[G,D]};if(!B){var A=this.grid.getView();A.onCellSelect(G,D);if(F!==true){A.focusCell(G,D)}}this.fireEvent("cellselect",this,G,D);this.fireEvent("selectionchange",this,this.selection)}},isSelectable:function(D,B,A){return !A.isHidden(B)},handleKeyDown:function(G){if(!G.isNavKeyPress()){return}var F=this.grid,K=this.selection;if(!K){G.stopEvent();var J=F.walkCells(0,0,1,this.isSelectable,this);if(J){this.select(J[0],J[1])}return}var B=this;var I=function(N,L,M){return F.walkCells(N,L,M,B.isSelectable,B)};var D=G.getKey(),A=K.cell[0],H=K.cell[1];var E;switch(D){case G.TAB:if(G.shiftKey){E=I(A,H-1,-1)}else{E=I(A,H+1,1)}break;case G.DOWN:E=I(A+1,H,1);break;case G.UP:E=I(A-1,H,-1);break;case G.RIGHT:E=I(A,H+1,1);break;case G.LEFT:E=I(A,H-1,-1);break;case G.ENTER:if(F.isEditor&&!F.editing){F.startEditing(A,H);G.stopEvent();return}break}if(E){this.select(E[0],E[1]);G.stopEvent()}},acceptsNav:function(D,B,A){return !A.isHidden(B)&&A.isCellEditable(B,D)},onEditorKey:function(F,E){var B=E.getKey(),G,D=this.grid,A=D.activeEditor;if(B==E.TAB){if(E.shiftKey){G=D.walkCells(A.row,A.col-1,-1,this.acceptsNav,this)}else{G=D.walkCells(A.row,A.col+1,1,this.acceptsNav,this)}E.stopEvent()}else{if(B==E.ENTER){A.completeEdit();E.stopEvent()}else{if(B==E.ESC){E.stopEvent();A.cancelEdit()}}}if(G){D.startEditing(G[0],G[1])}}});Ext.grid.EditorGridPanel=Ext.extend(Ext.grid.GridPanel,{clicksToEdit:2,isEditor:true,detectEdit:false,autoEncode:false,trackMouseOver:false,initComponent:function(){Ext.grid.EditorGridPanel.superclass.initComponent.call(this);if(!this.selModel){this.selModel=new Ext.grid.CellSelectionModel()}this.activeEditor=null;this.addEvents("beforeedit","afteredit","validateedit")},initEvents:function(){Ext.grid.EditorGridPanel.superclass.initEvents.call(this);this.on("bodyscroll",this.stopEditing,this,[true]);this.on("columnresize",this.stopEditing,this,[true]);if(this.clicksToEdit==1){this.on("cellclick",this.onCellDblClick,this)}else{if(this.clicksToEdit=="auto"&&this.view.mainBody){this.view.mainBody.on("mousedown",this.onAutoEditClick,this)}this.on("celldblclick",this.onCellDblClick,this)}},onCellDblClick:function(B,D,A){this.startEditing(D,A)},onAutoEditClick:function(D,B){if(D.button!==0){return}var F=this.view.findRowIndex(B);var A=this.view.findCellIndex(B);if(F!==false&&A!==false){this.stopEditing();if(this.selModel.getSelectedCell){var E=this.selModel.getSelectedCell();if(E&&E[0]===F&&E[1]===A){this.startEditing(F,A)}}else{if(this.selModel.isSelected(F)){this.startEditing(F,A)}}}},onEditComplete:function(B,E,A){this.editing=false;this.activeEditor=null;B.un("specialkey",this.selModel.onEditorKey,this.selModel);var D=B.record;var G=this.colModel.getDataIndex(B.col);E=this.postEditValue(E,A,D,G);if(String(E)!==String(A)){var F={grid:this,record:D,field:G,originalValue:A,value:E,row:B.row,column:B.col,cancel:false};if(this.fireEvent("validateedit",F)!==false&&!F.cancel){D.set(G,F.value);delete F.cancel;this.fireEvent("afteredit",F)}}this.view.focusCell(B.row,B.col)},startEditing:function(G,B){this.stopEditing();if(this.colModel.isCellEditable(B,G)){this.view.ensureVisible(G,B,true);var D=this.store.getAt(G);var F=this.colModel.getDataIndex(B);var E={grid:this,record:D,field:F,value:D.data[F],row:G,column:B,cancel:false};if(this.fireEvent("beforeedit",E)!==false&&!E.cancel){this.editing=true;var A=this.colModel.getCellEditor(B,G);if(!A.rendered){A.render(this.view.getEditorParent(A))}(function(){A.row=G;A.col=B;A.record=D;A.on("complete",this.onEditComplete,this,{single:true});A.on("specialkey",this.selModel.onEditorKey,this.selModel);this.activeEditor=A;var H=this.preEditValue(D,F);A.startEdit(this.view.getCell(G,B).firstChild,H===undefined?"":H)}).defer(50,this)}}},preEditValue:function(A,D){var B=A.data[D];return this.autoEncode&&typeof B=="string"?Ext.util.Format.htmlDecode(B):B},postEditValue:function(D,A,B,E){return this.autoEncode&&typeof D=="string"?Ext.util.Format.htmlEncode(D):D},stopEditing:function(A){if(this.activeEditor){this.activeEditor[A===true?"cancelEdit":"completeEdit"]()}this.activeEditor=null}});Ext.reg("editorgrid",Ext.grid.EditorGridPanel);Ext.grid.GridEditor=function(B,A){Ext.grid.GridEditor.superclass.constructor.call(this,B,A);B.monitorTab=false};Ext.extend(Ext.grid.GridEditor,Ext.Editor,{alignment:"tl-tl",autoSize:"width",hideEl:false,cls:"x-small-editor x-grid-editor",shim:false,shadow:false});Ext.grid.PropertyRecord=Ext.data.Record.create([{name:"name",type:"string"},"value"]);Ext.grid.PropertyStore=function(A,B){this.grid=A;this.store=new Ext.data.Store({recordType:Ext.grid.PropertyRecord});this.store.on("update",this.onUpdate,this);if(B){this.setSource(B)}Ext.grid.PropertyStore.superclass.constructor.call(this)};Ext.extend(Ext.grid.PropertyStore,Ext.util.Observable,{setSource:function(D){this.source=D;this.store.removeAll();var B=[];for(var A in D){if(this.isEditableValue(D[A])){B.push(new Ext.grid.PropertyRecord({name:A,value:D[A]},A))}}this.store.loadRecords({records:B},{},true)},onUpdate:function(F,A,E){if(E==Ext.data.Record.EDIT){var B=A.data.value;var D=A.modified.value;if(this.grid.fireEvent("beforepropertychange",this.source,A.id,B,D)!==false){this.source[A.id]=B;A.commit();this.grid.fireEvent("propertychange",this.source,A.id,B,D)}else{A.reject()}}},getProperty:function(A){return this.store.getAt(A)},isEditableValue:function(A){if(Ext.isDate(A)){return true}else{if(typeof A=="object"||typeof A=="function"){return false}}return true},setValue:function(B,A){this.source[B]=A;this.store.getById(B).set("value",A)},getSource:function(){return this.source}});Ext.grid.PropertyColumnModel=function(D,B){this.grid=D;var E=Ext.grid;E.PropertyColumnModel.superclass.constructor.call(this,[{header:this.nameText,width:50,sortable:true,dataIndex:"name",id:"name",menuDisabled:true},{header:this.valueText,width:50,resizable:false,dataIndex:"value",id:"value",menuDisabled:true}]);this.store=B;var F=Ext.form;var A=new F.Field({autoCreate:{tag:"select",children:[{tag:"option",value:"true",html:"true"},{tag:"option",value:"false",html:"false"}]},getValue:function(){return this.el.value=="true"}});this.editors={date:new E.GridEditor(new F.DateField({selectOnFocus:true})),string:new E.GridEditor(new F.TextField({selectOnFocus:true})),number:new E.GridEditor(new F.NumberField({selectOnFocus:true,style:"text-align:left;"})),"boolean":new E.GridEditor(A)};this.renderCellDelegate=this.renderCell.createDelegate(this);this.renderPropDelegate=this.renderProp.createDelegate(this)};Ext.extend(Ext.grid.PropertyColumnModel,Ext.grid.ColumnModel,{nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",renderDate:function(A){return A.dateFormat(this.dateFormat)},renderBool:function(A){return A?"true":"false"},isCellEditable:function(A,B){return A==1},getRenderer:function(A){return A==1?this.renderCellDelegate:this.renderPropDelegate},renderProp:function(A){return this.getPropertyName(A)},renderCell:function(A){var B=A;if(Ext.isDate(A)){B=this.renderDate(A)}else{if(typeof A=="boolean"){B=this.renderBool(A)}}return Ext.util.Format.htmlEncode(B)},getPropertyName:function(B){var A=this.grid.propertyNames;return A&&A[B]?A[B]:B},getCellEditor:function(A,F){var B=this.store.getProperty(F);var E=B.data.name,D=B.data.value;if(this.grid.customEditors[E]){return this.grid.customEditors[E]}if(Ext.isDate(D)){return this.editors.date}else{if(typeof D=="number"){return this.editors.number}else{if(typeof D=="boolean"){return this.editors["boolean"]}else{return this.editors.string}}}},destroy:function(){Ext.grid.PropertyColumnModel.superclass.destroy.call(this);for(var A in this.editors){Ext.destroy(A)}}});Ext.grid.PropertyGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:false,stripeRows:false,trackMouseOver:false,clicksToEdit:1,enableHdMenu:false,viewConfig:{forceFit:true},initComponent:function(){this.customEditors=this.customEditors||{};this.lastEditRow=null;var B=new Ext.grid.PropertyStore(this);this.propStore=B;var A=new Ext.grid.PropertyColumnModel(this,B);B.store.sort("name","ASC");this.addEvents("beforepropertychange","propertychange");this.cm=A;this.ds=B.store;Ext.grid.PropertyGrid.superclass.initComponent.call(this);this.selModel.on("beforecellselect",function(F,E,D){if(D===0){this.startEditing.defer(200,this,[E,1]);return false}},this)},onRender:function(){Ext.grid.PropertyGrid.superclass.onRender.apply(this,arguments);this.getGridEl().addClass("x-props-grid")},afterRender:function(){Ext.grid.PropertyGrid.superclass.afterRender.apply(this,arguments);if(this.source){this.setSource(this.source)}},setSource:function(A){this.propStore.setSource(A)},getSource:function(){return this.propStore.getSource()}});Ext.reg("propertygrid",Ext.grid.PropertyGrid);Ext.grid.RowNumberer=function(A){Ext.apply(this,A);if(this.rowspan){this.renderer=this.renderer.createDelegate(this)}};Ext.grid.RowNumberer.prototype={header:"",width:23,sortable:false,fixed:true,menuDisabled:true,dataIndex:"",id:"numberer",rowspan:undefined,renderer:function(B,D,A,E){if(this.rowspan){D.cellAttr='rowspan="'+this.rowspan+'"'}return E+1}};Ext.grid.CheckboxSelectionModel=Ext.extend(Ext.grid.RowSelectionModel,{header:'<div class="x-grid3-hd-checker">&#160;</div>',width:20,sortable:false,menuDisabled:true,fixed:true,dataIndex:"",id:"checker",initEvents:function(){Ext.grid.CheckboxSelectionModel.superclass.initEvents.call(this);this.grid.on("render",function(){var A=this.grid.getView();A.mainBody.on("mousedown",this.onMouseDown,this);Ext.fly(A.innerHd).on("mousedown",this.onHdMouseDown,this)},this)},onMouseDown:function(D,B){if(D.button===0&&B.className=="x-grid3-row-checker"){D.stopEvent();var E=D.getTarget(".x-grid3-row");if(E){var A=E.rowIndex;if(this.isSelected(A)){this.deselectRow(A)}else{this.selectRow(A,true)}}}},onHdMouseDown:function(D,A){if(A.className=="x-grid3-hd-checker"){D.stopEvent();var B=Ext.fly(A.parentNode);var E=B.hasClass("x-grid3-hd-checker-on");if(E){B.removeClass("x-grid3-hd-checker-on");this.clearSelections()}else{B.addClass("x-grid3-hd-checker-on");this.selectAll()}}},renderer:function(B,D,A){return'<div class="x-grid3-row-checker">&#160;</div>'}});Ext.LoadMask=function(D,B){this.el=Ext.get(D);Ext.apply(this,B);if(this.store){this.store.on("beforeload",this.onBeforeLoad,this);this.store.on("load",this.onLoad,this);this.store.on("loadexception",this.onLoad,this);this.removeMask=Ext.value(this.removeMask,false)}else{var A=this.el.getUpdater();A.showLoadIndicator=false;A.on("beforeupdate",this.onBeforeLoad,this);A.on("update",this.onLoad,this);A.on("failure",this.onLoad,this);this.removeMask=Ext.value(this.removeMask,true)}};Ext.LoadMask.prototype={msg:"Loading...",msgCls:"x-mask-loading",disabled:false,disable:function(){this.disabled=true},enable:function(){this.disabled=false},onLoad:function(){this.el.unmask(this.removeMask)},onBeforeLoad:function(){if(!this.disabled){this.el.mask(this.msg,this.msgCls)}},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){if(this.store){this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("loadexception",this.onLoad,this)}else{var A=this.el.getUpdater();A.un("beforeupdate",this.onBeforeLoad,this);A.un("update",this.onLoad,this);A.un("failure",this.onLoad,this)}}};Ext.ProgressBar=Ext.extend(Ext.BoxComponent,{baseCls:"x-progress",animate:false,waitTimer:null,initComponent:function(){Ext.ProgressBar.superclass.initComponent.call(this);this.addEvents("update")},onRender:function(E,A){Ext.ProgressBar.superclass.onRender.call(this,E,A);var D=new Ext.Template('<div class="{cls}-wrap">','<div class="{cls}-inner">','<div class="{cls}-bar">','<div class="{cls}-text">',"<div>&#160;</div>","</div>","</div>",'<div class="{cls}-text {cls}-text-back">',"<div>&#160;</div>","</div>","</div>","</div>");if(A){this.el=D.insertBefore(A,{cls:this.baseCls},true)}else{this.el=D.append(E,{cls:this.baseCls},true)}if(this.id){this.el.dom.id=this.id}var B=this.el.dom.firstChild;this.progressBar=Ext.get(B.firstChild);if(this.textEl){this.textEl=Ext.get(this.textEl);delete this.textTopEl}else{this.textTopEl=Ext.get(this.progressBar.dom.firstChild);var F=Ext.get(B.childNodes[1]);this.textTopEl.setStyle("z-index",99).addClass("x-hidden");this.textEl=new Ext.CompositeElement([this.textTopEl.dom.firstChild,F.dom.firstChild]);this.textEl.setWidth(B.offsetWidth)}this.progressBar.setHeight(B.offsetHeight)},afterRender:function(){Ext.ProgressBar.superclass.afterRender.call(this);if(this.value){this.updateProgress(this.value,this.text)}else{this.updateText(this.text)}},updateProgress:function(D,E,B){this.value=D||0;if(E){this.updateText(E)}if(this.rendered){var A=Math.floor(D*this.el.dom.firstChild.offsetWidth);this.progressBar.setWidth(A,B===true||(B!==false&&this.animate));if(this.textTopEl){this.textTopEl.removeClass("x-hidden").setWidth(A)}}this.fireEvent("update",this,D,E);return this},wait:function(B){if(!this.waitTimer){var A=this;B=B||{};this.updateText(B.text);this.waitTimer=Ext.TaskMgr.start({run:function(D){var E=B.increment||10;this.updateProgress(((((D+E)%E)+1)*(100/E))*0.01,null,B.animate)},interval:B.interval||1000,duration:B.duration,onStop:function(){if(B.fn){B.fn.apply(B.scope||this)}this.reset()},scope:A})}return this},isWaiting:function(){return this.waitTimer!=null},updateText:function(A){this.text=A||"&#160;";if(this.rendered){this.textEl.update(this.text)}return this},syncProgressBar:function(){if(this.value){this.updateProgress(this.value,this.text)}return this},setSize:function(A,D){Ext.ProgressBar.superclass.setSize.call(this,A,D);if(this.textTopEl){var B=this.el.dom.firstChild;this.textEl.setSize(B.offsetWidth,B.offsetHeight)}this.syncProgressBar();return this},reset:function(A){this.updateProgress(0);if(this.textTopEl){this.textTopEl.addClass("x-hidden")}if(this.waitTimer){this.waitTimer.onStop=null;Ext.TaskMgr.stop(this.waitTimer);this.waitTimer=null}if(A===true){this.hide()}return this}});Ext.reg("progress",Ext.ProgressBar);Ext.Slider=Ext.extend(Ext.BoxComponent,{vertical:false,minValue:0,maxValue:100,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:true,animate:true,dragging:false,initComponent:function(){if(this.value===undefined){this.value=this.minValue}Ext.Slider.superclass.initComponent.call(this);this.keyIncrement=Math.max(this.increment,this.keyIncrement);this.addEvents("beforechange","change","changecomplete","dragstart","drag","dragend");if(this.vertical){Ext.apply(this,Ext.Slider.Vertical)}},onRender:function(){this.autoEl={cls:"x-slider "+(this.vertical?"x-slider-vert":"x-slider-horz"),cn:{cls:"x-slider-end",cn:{cls:"x-slider-inner",cn:[{cls:"x-slider-thumb"},{tag:"a",cls:"x-slider-focus",href:"#",tabIndex:"-1",hidefocus:"on"}]}}};Ext.Slider.superclass.onRender.apply(this,arguments);this.endEl=this.el.first();this.innerEl=this.endEl.first();this.thumb=this.innerEl.first();this.halfThumb=(this.vertical?this.thumb.getHeight():this.thumb.getWidth())/2;this.focusEl=this.thumb.next();this.initEvents()},initEvents:function(){this.thumb.addClassOnOver("x-slider-thumb-over");this.el.on("mousedown",this.onMouseDown,this);this.el.on("keydown",this.onKeyDown,this);this.focusEl.swallowEvent("click",true);this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeDragStart.createDelegate(this),onStart:this.onDragStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onDragEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(this.thumb);this.on("beforedestroy",this.tracker.destroy,this.tracker)},onMouseDown:function(B){if(this.disabled){return}if(this.clickToChange&&B.target!=this.thumb.dom){var A=this.innerEl.translatePoints(B.getXY());this.onClickChange(A)}this.focus()},onClickChange:function(A){if(A.top>this.clickRange[0]&&A.top<this.clickRange[1]){this.setValue(Math.round(this.reverseValue(A.left)),undefined,true)}},onKeyDown:function(B){if(this.disabled){B.preventDefault();return}var A=B.getKey();switch(A){case B.UP:case B.RIGHT:B.stopEvent();if(B.ctrlKey){this.setValue(this.maxValue,undefined,true)}else{this.setValue(this.value+this.keyIncrement,undefined,true)}break;case B.DOWN:case B.LEFT:B.stopEvent();if(B.ctrlKey){this.setValue(this.minValue,undefined,true)}else{this.setValue(this.value-this.keyIncrement,undefined,true)}break;default:B.preventDefault()}},doSnap:function(B){if(!this.increment||this.increment==1||!B){return B}var E=B,D=this.increment;var A=B%D;if(A!=0){E-=A;if(A*2>D){E+=D}else{if(A*2<-D){E-=D}}}return E.constrain(this.minValue,this.maxValue)},afterRender:function(){Ext.Slider.superclass.afterRender.apply(this,arguments);if(this.value!==undefined){var A=this.normalizeValue(this.value);if(A!==this.value){delete this.value;this.setValue(A,false)}else{this.moveThumb(this.translateValue(A),false)}}},getRatio:function(){var A=this.innerEl.getWidth();var B=this.maxValue-this.minValue;return B==0?A:(A/B)},normalizeValue:function(A){if(typeof A!="number"){A=parseInt(A)}A=Math.round(A);A=this.doSnap(A);A=A.constrain(this.minValue,this.maxValue);return A},setValue:function(B,A,D){B=this.normalizeValue(B);if(B!==this.value&&this.fireEvent("beforechange",this,B,this.value)!==false){this.value=B;this.moveThumb(this.translateValue(B),A!==false);this.fireEvent("change",this,B);if(D){this.fireEvent("changecomplete",this,B)}}},translateValue:function(A){var B=this.getRatio();return(A*B)-(this.minValue*B)-this.halfThumb},reverseValue:function(B){var A=this.getRatio();return(B+this.halfThumb+(this.minValue*A))/A},moveThumb:function(B,A){if(!A||this.animate===false){this.thumb.setLeft(B)}else{this.thumb.shift({left:B,stopFx:true,duration:0.35})}},focus:function(){this.focusEl.focus(10)},onBeforeDragStart:function(A){return !this.disabled},onDragStart:function(A){this.thumb.addClass("x-slider-thumb-drag");this.dragging=true;this.dragStartValue=this.value;this.fireEvent("dragstart",this,A)},onDrag:function(A){var B=this.innerEl.translatePoints(this.tracker.getXY());this.setValue(Math.round(this.reverseValue(B.left)),false);this.fireEvent("drag",this,A)},onDragEnd:function(A){this.thumb.removeClass("x-slider-thumb-drag");this.dragging=false;this.fireEvent("dragend",this,A);if(this.dragStartValue!=this.value){this.fireEvent("changecomplete",this,this.value)}},onDisable:function(){Ext.Slider.superclass.onDisable.call(this);this.thumb.addClass(this.disabledClass);if(Ext.isIE){var A=this.thumb.getXY();this.thumb.hide();this.innerEl.addClass(this.disabledClass).dom.disabled=true;if(!this.thumbHolder){this.thumbHolder=this.endEl.createChild({cls:"x-slider-thumb "+this.disabledClass})}this.thumbHolder.show().setXY(A)}},onEnable:function(){Ext.Slider.superclass.onEnable.call(this);this.thumb.removeClass(this.disabledClass);if(Ext.isIE){this.innerEl.removeClass(this.disabledClass).dom.disabled=false;if(this.thumbHolder){this.thumbHolder.hide()}this.thumb.show();this.syncThumb()}},onResize:function(A,B){this.innerEl.setWidth(A-(this.el.getPadding("l")+this.endEl.getPadding("r")));this.syncThumb()},syncThumb:function(){if(this.rendered){this.moveThumb(this.translateValue(this.value))}},getValue:function(){return this.value}});Ext.reg("slider",Ext.Slider);Ext.Slider.Vertical={onResize:function(A,B){this.innerEl.setHeight(B-(this.el.getPadding("t")+this.endEl.getPadding("b")));this.syncThumb()},getRatio:function(){var B=this.innerEl.getHeight();var A=this.maxValue-this.minValue;return B/A},moveThumb:function(B,A){if(!A||this.animate===false){this.thumb.setBottom(B)}else{this.thumb.shift({bottom:B,stopFx:true,duration:0.35})}},onDrag:function(B){var D=this.innerEl.translatePoints(this.tracker.getXY());var A=this.innerEl.getHeight()-D.top;this.setValue(this.minValue+Math.round(A/this.getRatio()),false);this.fireEvent("drag",this,B)},onClickChange:function(B){if(B.left>this.clickRange[0]&&B.left<this.clickRange[1]){var A=this.innerEl.getHeight()-B.top;this.setValue(this.minValue+Math.round(A/this.getRatio()),undefined,true)}}};Ext.StatusBar=Ext.extend(Ext.Toolbar,{cls:"x-statusbar",busyIconCls:"x-status-busy",busyText:"Loading...",autoClear:5000,activeThreadId:0,initComponent:function(){if(this.statusAlign=="right"){this.cls+=" x-status-right"}Ext.StatusBar.superclass.initComponent.call(this)},afterRender:function(){Ext.StatusBar.superclass.afterRender.call(this);var A=this.statusAlign=="right",B=Ext.get(this.nextBlock());if(A){this.tr.appendChild(B.dom)}else{B.insertBefore(this.tr.firstChild)}this.statusEl=B.createChild({cls:"x-status-text "+(this.iconCls||this.defaultIconCls||""),html:this.text||this.defaultText||""});this.statusEl.unselectable();this.spacerEl=B.insertSibling({tag:"td",style:"width:100%",cn:[{cls:"ytb-spacer"}]},A?"before":"after")},setStatus:function(D){D=D||{};if(typeof D=="string"){D={text:D}}if(D.text!==undefined){this.setText(D.text)}if(D.iconCls!==undefined){this.setIcon(D.iconCls)}if(D.clear){var E=D.clear,B=this.autoClear,A={useDefaults:true,anim:true};if(typeof E=="object"){E=Ext.applyIf(E,A);if(E.wait){B=E.wait}}else{if(typeof E=="number"){B=E;E=A}else{if(typeof E=="boolean"){E=A}}}E.threadId=this.activeThreadId;this.clearStatus.defer(B,this,[E])}return this},clearStatus:function(D){D=D||{};if(D.threadId&&D.threadId!==this.activeThreadId){return this}var B=D.useDefaults?this.defaultText:"",A=D.useDefaults?(this.defaultIconCls?this.defaultIconCls:""):"";if(D.anim){this.statusEl.fadeOut({remove:false,useDisplay:true,scope:this,callback:function(){this.setStatus({text:B,iconCls:A});this.statusEl.show()}})}else{this.statusEl.hide();this.setStatus({text:B,iconCls:A});this.statusEl.show()}return this},setText:function(A){this.activeThreadId++;this.text=A||"";if(this.rendered){this.statusEl.update(this.text)}return this},getText:function(){return this.text},setIcon:function(A){this.activeThreadId++;A=A||"";if(this.rendered){if(this.currIconCls){this.statusEl.removeClass(this.currIconCls);this.currIconCls=null}if(A.length>0){this.statusEl.addClass(A);this.currIconCls=A}}else{this.currIconCls=A}return this},showBusy:function(A){if(typeof A=="string"){A={text:A}}A=Ext.applyIf(A||{},{text:this.busyText,iconCls:this.busyIconCls});return this.setStatus(A)}});Ext.reg("statusbar",Ext.StatusBar);Ext.History=(function(){var F,D;var K=false;var E;function G(){var L=top.location.href,M=L.indexOf("#");return M>=0?L.substr(M+1):null}function A(){D.value=E}function H(L){E=L;Ext.History.fireEvent("change",L)}function I(M){var L=['<html><body><div id="state">',M,"</div></body></html>"].join("");try{var O=F.contentWindow.document;O.open();O.write(L);O.close();return true}catch(N){return false}}function B(){if(!F.contentWindow||!F.contentWindow.document){setTimeout(B,10);return}var O=F.contentWindow.document;var M=O.getElementById("state");var L=M?M.innerText:null;var N=G();setInterval(function(){O=F.contentWindow.document;M=O.getElementById("state");var Q=M?M.innerText:null;var P=G();if(Q!==L){L=Q;H(L);top.location.hash=L;N=L;A()}else{if(P!==N){N=P;I(P)}}},50);K=true;Ext.History.fireEvent("ready",Ext.History)}function J(){E=D.value?D.value:G();if(Ext.isIE){B()}else{var L=G();setInterval(function(){var M=G();if(M!==L){L=M;H(L);A()}},50);K=true;Ext.History.fireEvent("ready",Ext.History)}}return{fieldId:"x-history-field",iframeId:"x-history-frame",events:{},init:function(M,L){if(K){Ext.callback(M,L,[this]);return}if(!Ext.isReady){Ext.onReady(function(){Ext.History.init(M,L)});return}D=Ext.getDom(Ext.History.fieldId);if(Ext.isIE){F=Ext.getDom(Ext.History.iframeId)}this.addEvents("ready","change");if(M){this.on("ready",M,L,{single:true})}J()},add:function(L,M){if(M!==false){if(this.getToken()==L){return true}}if(Ext.isIE){return I(L)}else{top.location.hash=L;return true}},back:function(){history.go(-1)},forward:function(){history.go(1)},getToken:function(){return K?E:G()}}})();Ext.apply(Ext.History,new Ext.util.Observable());Ext.debug={};(function(){var B;function A(){var F=new Ext.debug.ScriptsPanel();var H=new Ext.debug.LogPanel();var D=new Ext.debug.DomTree();var E=new Ext.TabPanel({activeTab:0,border:false,tabPosition:"bottom",items:[{title:"Debug Console",layout:"border",items:[H,F]},{title:"DOM Inspector",layout:"border",items:[D]}]});B=new Ext.Panel({id:"x-debug-browser",title:"Console",collapsible:true,animCollapse:false,style:"position:absolute;left:0;bottom:0;",height:200,logView:H,layout:"fit",tools:[{id:"close",handler:function(){B.destroy();B=null;Ext.EventManager.removeResizeListener(G)}}],items:E});B.render(document.body);B.resizer=new Ext.Resizable(B.el,{minHeight:50,handles:"n",pinned:true,transparent:true,resizeElement:function(){var I=this.proxy.getBox();this.proxy.hide();B.setHeight(I.height);return I}});function G(){B.setWidth(Ext.getBody().getViewSize().width)}Ext.EventManager.onWindowResize(G);G()}Ext.apply(Ext,{log:function(){if(!B){A()}B.logView.log.apply(B.logView,arguments)},logf:function(G,F,D,E){Ext.log(String.format.apply(String,arguments))},dump:function(G){if(typeof G=="string"||typeof G=="number"||typeof G=="undefined"||Ext.isDate(G)){Ext.log(G)}else{if(!G){Ext.log("null")}else{if(typeof G!="object"){Ext.log("Unknown return type")}else{if(Ext.isArray(G)){Ext.log("["+G.join(",")+"]")}else{var D=["{\n"];for(var E in G){var H=typeof G[E];if(H!="function"&&H!="object"){D.push(String.format("  {0}: {1},\n",E,G[E]))}}var F=D.join("");if(F.length>3){F=F.substr(0,F.length-2)}Ext.log(F+"\n}")}}}}},_timers:{},time:function(D){D=D||"def";Ext._timers[D]=new Date().getTime()},timeEnd:function(E,G){var F=new Date().getTime();E=E||"def";var D=String.format("{0} ms",F-Ext._timers[E]);Ext._timers[E]=new Date().getTime();if(G!==false){Ext.log("Timer "+(E=="def"?D:E+": "+D))}return D}})})();Ext.debug.ScriptsPanel=Ext.extend(Ext.Panel,{id:"x-debug-scripts",region:"east",minWidth:200,split:true,width:350,border:false,layout:"anchor",style:"border-width:0 0 0 1px;",initComponent:function(){this.scriptField=new Ext.form.TextArea({anchor:"100% -26",style:"border-width:0;"});this.trapBox=new Ext.form.Checkbox({id:"console-trap",boxLabel:"Trap Errors",checked:true});this.toolbar=new Ext.Toolbar([{text:"Run",scope:this,handler:this.evalScript},{text:"Clear",scope:this,handler:this.clear},"->",this.trapBox," "," "]);this.items=[this.toolbar,this.scriptField];Ext.debug.ScriptsPanel.superclass.initComponent.call(this)},evalScript:function(){var s=this.scriptField.getValue();if(this.trapBox.getValue()){try{var rt=eval(s);Ext.dump(rt===undefined?"(no return)":rt)}catch(e){Ext.log(e.message||e.descript)}}else{var rt=eval(s);Ext.dump(rt===undefined?"(no return)":rt)}},clear:function(){this.scriptField.setValue("");this.scriptField.focus()}});Ext.debug.LogPanel=Ext.extend(Ext.Panel,{autoScroll:true,region:"center",border:false,style:"border-width:0 1px 0 0",log:function(){var A=['<div style="padding:5px !important;border-bottom:1px solid #ccc;">',Ext.util.Format.htmlEncode(Array.prototype.join.call(arguments,", ")).replace(/\n/g,"<br />").replace(/\s/g,"&#160;"),"</div>"].join("");this.body.insertHtml("beforeend",A);this.body.scrollTo("top",100000)},clear:function(){this.body.update("");this.body.dom.scrollTop=0}});Ext.debug.DomTree=Ext.extend(Ext.tree.TreePanel,{enableDD:false,lines:false,rootVisible:false,animate:false,hlColor:"ffff9c",autoScroll:true,region:"center",border:false,initComponent:function(){Ext.debug.DomTree.superclass.initComponent.call(this);var I=false,A;var J=/^\s*$/;var F=Ext.util.Format.htmlEncode;var H=Ext.util.Format.ellipsis;var E=/\s?([a-z\-]*)\:([^;]*)(?:[;\s\n\r]*)/gi;function B(Q){if(!Q||Q.nodeType!=1||Q==document.body||Q==document){return false}var M=[Q],O=Q;while((O=O.parentNode)&&O.nodeType==1&&O.tagName.toUpperCase()!="HTML"){M.unshift(O)}var P=A;for(var N=0,K=M.length;N<K;N++){P.expand();P=P.findChild("htmlNode",M[N]);if(!P){return false}}P.select();var L=P.ui.anchor;treeEl.dom.scrollTop=Math.max(0,L.offsetTop-10);P.highlight();return true}function G(L){var K=L.tagName;if(L.id){K+="#"+L.id}else{if(L.className){K+="."+L.className}}return K}function D(W,K,T){return;if(T&&T.unframe){T.unframe()}var Q={};if(K&&K.htmlNode){if(frameEl.pressed){K.frame()}if(inspecting){return}addStyle.enable();reload.setDisabled(K.leaf);var N=K.htmlNode;stylePanel.setTitle(G(N));if(I&&!showAll.pressed){var X=N.style?N.style.cssText:"";if(X){var L;while((L=E.exec(X))!=null){Q[L[1].toLowerCase()]=L[2]}}}else{if(I){var U=Ext.debug.cssList;var X=N.style,M=Ext.fly(N);if(X){for(var O=0,P=U.length;O<P;O++){var V=U[O];var S=X[V]||M.getStyle(V);if(S!=undefined&&S!==null&&S!==""){Q[V]=S}}}}else{for(var R in N){var S=N[R];if((isNaN(R+10))&&S!=undefined&&S!==null&&S!==""&&!(Ext.isGecko&&R[0]==R[0].toUpperCase())){Q[R]=S}}}}}else{if(inspecting){return}addStyle.disable();reload.disabled()}stylesGrid.setSource(Q);stylesGrid.treeNode=K;stylesGrid.view.fitColumns()}this.loader=new Ext.tree.TreeLoader();this.loader.load=function(P,K){var L=P.htmlNode==document.body;var O=P.htmlNode.childNodes;for(var M=0,N;N=O[M];M++){if(L&&N.id=="x-debug-browser"){continue}if(N.nodeType==1){P.appendChild(new Ext.debug.HtmlNode(N))}else{if(N.nodeType==3&&!J.test(N.nodeValue)){P.appendChild(new Ext.tree.TreeNode({text:"<em>"+H(F(String(N.nodeValue)),35)+"</em>",cls:"x-tree-noicon"}))}}}K()};this.root=this.setRootNode(new Ext.tree.TreeNode("Ext"));A=this.root.appendChild(new Ext.debug.HtmlNode(document.getElementsByTagName("html")[0]))}});Ext.debug.HtmlNode=function(){var E=Ext.util.Format.htmlEncode;var B=Ext.util.Format.ellipsis;var A=/^\s*$/;var D=[{n:"id",v:"id"},{n:"className",v:"class"},{n:"name",v:"name"},{n:"type",v:"type"},{n:"src",v:"src"},{n:"href",v:"href"}];function G(K){for(var I=0,J;J=K.childNodes[I];I++){if(J.nodeType==1){return true}}return false}function F(J,M){var Q=J.tagName.toLowerCase();var P="&lt;"+Q;for(var K=0,L=D.length;K<L;K++){var N=D[K];var O=J[N.n];if(O&&!A.test(O)){P+=" "+N.v+"=&quot;<i>"+E(O)+"</i>&quot;"}}var I=J.style?J.style.cssText:"";if(I){P+=" style=&quot;<i>"+E(I.toLowerCase())+"</i>&quot;"}if(M&&J.childNodes.length>0){P+="&gt;<em>"+B(E(String(J.innerHTML)),35)+"</em>&lt;/"+Q+"&gt;"}else{if(M){P+=" /&gt;"}else{P+="&gt;"}}return P}var H=function(K){var J=!G(K);this.htmlNode=K;this.tagName=K.tagName.toLowerCase();var I={text:F(K,J),leaf:J,cls:"x-tree-noicon"};H.superclass.constructor.call(this,I);this.attributes.htmlNode=K;if(!J){this.on("expand",this.onExpand,this);this.on("collapse",this.onCollapse,this)}};Ext.extend(H,Ext.tree.AsyncTreeNode,{cls:"x-tree-noicon",preventHScroll:true,refresh:function(J){var I=!G(this.htmlNode);this.setText(F(this.htmlNode,I));if(J){Ext.fly(this.ui.textNode).highlight()}},onExpand:function(){if(!this.closeNode&&this.parentNode){this.closeNode=this.parentNode.insertBefore(new Ext.tree.TreeNode({text:"&lt;/"+this.tagName+"&gt;",cls:"x-tree-noicon"}),this.nextSibling)}else{if(this.closeNode){this.closeNode.ui.show()}}},onCollapse:function(){if(this.closeNode){this.closeNode.ui.hide()}},render:function(I){H.superclass.render.call(this,I)},highlightNode:function(){},highlight:function(){},frame:function(){this.htmlNode.style.border="1px solid #0000ff"},unframe:function(){this.htmlNode.style.border=""}});return H}();Ext.UpdateManager.defaults.indicatorText='<div class="loading-indicator">Loading...</div>';if(Ext.DataView){Ext.DataView.prototype.emptyText=""}if(Ext.grid.GridPanel){Ext.grid.GridPanel.prototype.ddText="{0} selected row{1}"}if(Ext.LoadMask){Ext.LoadMask.prototype.msg="Loading..."}Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.getShortMonthName=function(A){return Date.monthNames[A].substring(0,3)};Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Date.getMonthNumber=function(A){return Date.monthNumbers[A.substring(0,1).toUpperCase()+A.substring(1,3).toLowerCase()]};Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.getShortDayName=function(A){return Date.dayNames[A].substring(0,3)};Date.parseCodes.S.s="(?:st|nd|rd|th)";if(Ext.MessageBox){Ext.MessageBox.buttonText={ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}}if(Ext.util.Format){Ext.util.Format.date=function(A,B){if(!A){return""}if(!(A instanceof Date)){A=new Date(Date.parse(A))}return A.dateFormat(B||"m/d/Y")}}if(Ext.DatePicker){Ext.apply(Ext.DatePicker.prototype,{todayText:"Today",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",disabledDaysText:"",disabledDatesText:"",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",todayTip:"{0} (Spacebar)",format:"m/d/y",okText:"&#160;OK&#160;",cancelText:"Cancel",startDay:0})}if(Ext.PagingToolbar){Ext.apply(Ext.PagingToolbar.prototype,{beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display"})}if(Ext.form.Field){Ext.form.Field.prototype.invalidText="The value in this field is invalid"}if(Ext.form.TextField){Ext.apply(Ext.form.TextField.prototype,{minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyText:null})}if(Ext.form.NumberField){Ext.apply(Ext.form.NumberField.prototype,{decimalSeparator:".",decimalPrecision:2,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number"})}if(Ext.form.DateField){Ext.apply(Ext.form.DateField.prototype,{disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be after {0}",maxText:"The date in this field must be before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",format:"m/d/y",altFormats:"m/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d"})}if(Ext.form.ComboBox){Ext.apply(Ext.form.ComboBox.prototype,{loadingText:"Loading...",valueNotFoundText:undefined})}if(Ext.form.VTypes){Ext.apply(Ext.form.VTypes,{emailText:'This field should be an e-mail address in the format "user@domain.com"',urlText:'This field should be a URL in the format "http://www.domain.com"',alphaText:"This field should only contain letters and _",alphanumText:"This field should only contain letters, numbers and _"})}if(Ext.form.HtmlEditor){Ext.apply(Ext.form.HtmlEditor.prototype,{createLinkText:"Please enter the URL for the link:",buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}}})}if(Ext.grid.GridView){Ext.apply(Ext.grid.GridView.prototype,{sortAscText:"Sort Ascending",sortDescText:"Sort Descending",columnsText:"Columns"})}if(Ext.grid.GroupingView){Ext.apply(Ext.grid.GroupingView.prototype,{emptyGroupText:"(None)",groupByText:"Group By This Field",showGroupsText:"Show in Groups"})}if(Ext.grid.PropertyColumnModel){Ext.apply(Ext.grid.PropertyColumnModel.prototype,{nameText:"Name",valueText:"Value",dateFormat:"m/j/Y"})}if(Ext.layout.BorderLayout&&Ext.layout.BorderLayout.SplitRegion){Ext.apply(Ext.layout.BorderLayout.SplitRegion.prototype,{splitTip:"Drag to resize.",collapsibleSplitTip:"Drag to resize. Double click to hide."})}if(Ext.form.TimeField){Ext.apply(Ext.form.TimeField.prototype,{minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H"})}if(Ext.form.CheckboxGroup){Ext.apply(Ext.form.CheckboxGroup.prototype,{blankText:"You must select at least one item in this group"})}if(Ext.form.RadioGroup){Ext.apply(Ext.form.RadioGroup.prototype,{blankText:"You must select one item in this group"})}var AMTcgiloc="http://www.imathas.com/cgi-bin/mimetex.cgi";var AScgiloc="http://www.imathas.com/imathas/filter/graph/svgimg.php";var mathcolor="blue";var mathfontsize="1em";var mathfontfamily="serif";var automathrecognize=false;var checkForMathML=true;var notifyIfNoMathML=false;var alertIfNoMathML=false;var translateOnLoad=true;var translateLaTeX=true;var translateLaTeXformatting=true;var translateASCIIMath=true;var translateASCIIsvg=true;var avoidinnerHTML=false;var displaystyle=true;var showasciiformulaonhover=true;var decimalsign=".";var AMdelimiter1="`",AMescape1="\\\\`";var AMdocumentId="wikitext";var checkforprocessasciimathinmoodle=false;var dsvglocation="";var isIE=document.createElementNS==null;var noMathML=false,translated=false;if(isIE){document.write('<object id="mathplayer"  classid="clsid:32F66A20-7614-11D4-BD11-00104BD3F987"></object>');document.write('<?import namespace="m" implementation="#mathplayer"?>')}function setStylesheet(A){var D="AMMLcustomStyleSheet";var B=document.getElementById(D);if(document.createStyleSheet){if(B){B.parentNode.removeChild(B)}document.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd","&nbsp;<style id='"+D+"'>"+A+"</style>")}else{if(B){B.replaceChild(document.createTextNode(A),B.firstChild)}else{B=document.createElement("style");B.type="text/css";B.id=D;B.appendChild(document.createTextNode(A));document.getElementsByTagName("head")[0].appendChild(B)}}}setStylesheet("#AMMLcloseDiv {font-size:0.8em; padding-top:1em; color:#014}\n#AMMLwarningBox {position:absolute; width:100%; top:0; left:0; z-index:200; text-align:center; font-size:1em; font-weight:bold; padding:0.5em 0 0.5em 0; color:#ffc; background:#c30}");function init(){var B,A=new Array();if(document.getElementById==null){alert("This webpage requires a recent browser such as Mozilla Firefox/Netscape 7+ or Internet Explorer 6+ with MathPlayer and Adobe SVGviewer");return null}if(checkForMathML&&(B=checkMathML())){A.push(B)}if(checkIfSVGavailable&&(B=checkSVG())){A.push(B)}if(A.length>0){displayWarnings(A)}initSymbols();return true}function checkMathML(){if(navigator.product&&navigator.product=="Gecko"){var E=navigator.userAgent.toLowerCase().match(/rv:\s*([\d\.]+)/);if(E!=null){E=E[1].split(".");if(E.length<3){E[2]=0}if(E.length<2){E[1]=0}}if(E!=null&&10000*E[0]+100*E[1]+1*E[2]>=10100){noMathML=null}else{noMathML=true}}else{if(navigator.appName.slice(0,9)=="Microsoft"){try{var D=new ActiveXObject("MathPlayer.Factory.1");noMathML=null}catch(A){noMathML=true}}else{noMathML=true}}if(noMathML&&notifyIfNoMathML){var B="To view the ASCIIMathML notation use Internet Explorer + MathPlayer or Mozilla Firefox 2.0 or later.";if(alertIfNoMathML){alert(B)}else{return B}}}function hideWarning(){var A=document.getElementsByTagName("body")[0];A.removeChild(document.getElementById("AMMLwarningBox"));A.onclick=null}function displayWarnings(B){var D,G,F=createElementXHTML("div");var A=document.getElementsByTagName("body")[0];A.onclick=hideWarning;F.id="AMMLwarningBox";for(D=0;D<B.length;D++){G=createElementXHTML("div");G.appendChild(document.createTextNode(B[D]));G.style.paddingBottom="1.0em";F.appendChild(G)}F.appendChild(createElementXHTML("p"));F.appendChild(document.createTextNode("For instructions see the "));var E=createElementXHTML("a");E.appendChild(document.createTextNode("ASCIIMathML"));E.setAttribute("href","http://www.chapman.edu/~jipsen/asciimath.html");F.appendChild(E);F.appendChild(document.createTextNode(" homepage"));E=createElementXHTML("div");E.id="AMMLcloseDiv";E.appendChild(document.createTextNode("(click anywhere to close this warning)"));F.appendChild(E);var A=document.getElementsByTagName("body")[0];A.insertBefore(F,A.childNodes[0])}function translate(B){if(!translated){translated=true;var A=document.getElementsByTagName("body")[0];var D=document.getElementById(AMdocumentId);if(translateLaTeX){LMprocessNode((D!=null?D:A))}if(translateASCIIMath){AMprocessNode((D!=null?D:A),false,B)}}}function createElementXHTML(A){if(isIE){return document.createElement(A)}else{return document.createElementNS("http://www.w3.org/1999/xhtml",A)}}function createMmlNode(A,D){if(isIE){var B=document.createElement("m:"+A)}else{var B=document.createElementNS("http://www.w3.org/1998/Math/MathML",A)}if(D){B.appendChild(D)}return B}var AMcal=[61237,8492,61238,61239,8496,8497,61240,8459,8464,61241,61242,8466,8499,61243,61244,61245,61246,8475,61247,61248,61249,61250,61251,61252,61253,61254];var AMfrk=[61277,61278,8493,61279,61280,61281,61282,8460,8465,61283,61284,61285,61286,61287,61288,61289,61290,8476,61291,61292,61293,61294,61295,61296,61297,8488];var AMbbb=[61324,61325,8450,61326,61327,61328,61329,8461,61330,61331,61332,61333,61334,8469,61335,8473,8474,8477,61336,61337,61338,61339,61340,61341,61342,8484];var CONST=0,UNARY=1,BINARY=2,INFIX=3,LEFTBRACKET=4,RIGHTBRACKET=5,SPACE=6,UNDEROVER=7,DEFINITION=8,LEFTRIGHT=9,TEXT=10,BIG=11,LONG=12,STRETCHY=13,MATRIX=14;var AMquote={input:'"',tag:"mtext",output:"mbox",tex:null,ttype:TEXT};var AMsymbols=[{input:"alpha",tag:"mi",output:"\u03B1",tex:null,ttype:CONST},{input:"beta",tag:"mi",output:"\u03B2",tex:null,ttype:CONST},{input:"chi",tag:"mi",output:"\u03C7",tex:null,ttype:CONST},{input:"delta",tag:"mi",output:"\u03B4",tex:null,ttype:CONST},{input:"Delta",tag:"mo",output:"\u0394",tex:null,ttype:CONST},{input:"epsi",tag:"mi",output:"\u03B5",tex:"epsilon",ttype:CONST},{input:"varepsilon",tag:"mi",output:"\u025B",tex:null,ttype:CONST},{input:"eta",tag:"mi",output:"\u03B7",tex:null,ttype:CONST},{input:"gamma",tag:"mi",output:"\u03B3",tex:null,ttype:CONST},{input:"Gamma",tag:"mo",output:"\u0393",tex:null,ttype:CONST},{input:"iota",tag:"mi",output:"\u03B9",tex:null,ttype:CONST},{input:"kappa",tag:"mi",output:"\u03BA",tex:null,ttype:CONST},{input:"lambda",tag:"mi",output:"\u03BB",tex:null,ttype:CONST},{input:"Lambda",tag:"mo",output:"\u039B",tex:null,ttype:CONST},{input:"mu",tag:"mi",output:"\u03BC",tex:null,ttype:CONST},{input:"nu",tag:"mi",output:"\u03BD",tex:null,ttype:CONST},{input:"omega",tag:"mi",output:"\u03C9",tex:null,ttype:CONST},{input:"Omega",tag:"mo",output:"\u03A9",tex:null,ttype:CONST},{input:"phi",tag:"mi",output:"\u03C6",tex:null,ttype:CONST},{input:"varphi",tag:"mi",output:"\u03D5",tex:null,ttype:CONST},{input:"Phi",tag:"mo",output:"\u03A6",tex:null,ttype:CONST},{input:"pi",tag:"mi",output:"\u03C0",tex:null,ttype:CONST},{input:"Pi",tag:"mo",output:"\u03A0",tex:null,ttype:CONST},{input:"psi",tag:"mi",output:"\u03C8",tex:null,ttype:CONST},{input:"Psi",tag:"mi",output:"\u03A8",tex:null,ttype:CONST},{input:"rho",tag:"mi",output:"\u03C1",tex:null,ttype:CONST},{input:"sigma",tag:"mi",output:"\u03C3",tex:null,ttype:CONST},{input:"Sigma",tag:"mo",output:"\u03A3",tex:null,ttype:CONST},{input:"tau",tag:"mi",output:"\u03C4",tex:null,ttype:CONST},{input:"theta",tag:"mi",output:"\u03B8",tex:null,ttype:CONST},{input:"vartheta",tag:"mi",output:"\u03D1",tex:null,ttype:CONST},{input:"Theta",tag:"mo",output:"\u0398",tex:null,ttype:CONST},{input:"upsilon",tag:"mi",output:"\u03C5",tex:null,ttype:CONST},{input:"xi",tag:"mi",output:"\u03BE",tex:null,ttype:CONST},{input:"Xi",tag:"mo",output:"\u039E",tex:null,ttype:CONST},{input:"zeta",tag:"mi",output:"\u03B6",tex:null,ttype:CONST},{input:"*",tag:"mo",output:"\u22C5",tex:"cdot",ttype:CONST},{input:"**",tag:"mo",output:"\u22C6",tex:"star",ttype:CONST},{input:"//",tag:"mo",output:"/",tex:null,ttype:CONST},{input:"\\\\",tag:"mo",output:"\\",tex:"backslash",ttype:CONST},{input:"setminus",tag:"mo",output:"\\",tex:null,ttype:CONST},{input:"xx",tag:"mo",output:"\u00D7",tex:"times",ttype:CONST},{input:"-:",tag:"mo",output:"\u00F7",tex:"divide",ttype:CONST},{input:"@",tag:"mo",output:"\u2218",tex:"circ",ttype:CONST},{input:"o+",tag:"mo",output:"\u2295",tex:"oplus",ttype:CONST},{input:"ox",tag:"mo",output:"\u2297",tex:"otimes",ttype:CONST},{input:"o.",tag:"mo",output:"\u2299",tex:"odot",ttype:CONST},{input:"sum",tag:"mo",output:"\u2211",tex:null,ttype:UNDEROVER},{input:"prod",tag:"mo",output:"\u220F",tex:null,ttype:UNDEROVER},{input:"^^",tag:"mo",output:"\u2227",tex:"wedge",ttype:CONST},{input:"^^^",tag:"mo",output:"\u22C0",tex:"bigwedge",ttype:UNDEROVER},{input:"vv",tag:"mo",output:"\u2228",tex:"vee",ttype:CONST},{input:"vvv",tag:"mo",output:"\u22C1",tex:"bigvee",ttype:UNDEROVER},{input:"nn",tag:"mo",output:"\u2229",tex:"cap",ttype:CONST},{input:"nnn",tag:"mo",output:"\u22C2",tex:"bigcap",ttype:UNDEROVER},{input:"uu",tag:"mo",output:"\u222A",tex:"cup",ttype:CONST},{input:"uuu",tag:"mo",output:"\u22C3",tex:"bigcup",ttype:UNDEROVER},{input:"!=",tag:"mo",output:"\u2260",tex:"ne",ttype:CONST},{input:":=",tag:"mo",output:":=",tex:null,ttype:CONST},{input:"lt",tag:"mo",output:"<",tex:null,ttype:CONST},{input:"<=",tag:"mo",output:"\u2264",tex:"le",ttype:CONST},{input:"lt=",tag:"mo",output:"\u2264",tex:"leq",ttype:CONST},{input:">=",tag:"mo",output:"\u2265",tex:"ge",ttype:CONST},{input:"geq",tag:"mo",output:"\u2265",tex:null,ttype:CONST},{input:"-<",tag:"mo",output:"\u227A",tex:"prec",ttype:CONST},{input:"-lt",tag:"mo",output:"\u227A",tex:null,ttype:CONST},{input:">-",tag:"mo",output:"\u227B",tex:"succ",ttype:CONST},{input:"-<=",tag:"mo",output:"\u2AAF",tex:"preceq",ttype:CONST},{input:">-=",tag:"mo",output:"\u2AB0",tex:"succeq",ttype:CONST},{input:"in",tag:"mo",output:"\u2208",tex:null,ttype:CONST},{input:"!in",tag:"mo",output:"\u2209",tex:"notin",ttype:CONST},{input:"sub",tag:"mo",output:"\u2282",tex:"subset",ttype:CONST},{input:"sup",tag:"mo",output:"\u2283",tex:"supset",ttype:CONST},{input:"sube",tag:"mo",output:"\u2286",tex:"subseteq",ttype:CONST},{input:"supe",tag:"mo",output:"\u2287",tex:"supseteq",ttype:CONST},{input:"-=",tag:"mo",output:"\u2261",tex:"equiv",ttype:CONST},{input:"~=",tag:"mo",output:"\u2245",tex:"cong",ttype:CONST},{input:"~~",tag:"mo",output:"\u2248",tex:"approx",ttype:CONST},{input:"prop",tag:"mo",output:"\u221D",tex:"propto",ttype:CONST},{input:"and",tag:"mtext",output:"and",tex:null,ttype:SPACE},{input:"or",tag:"mtext",output:"or",tex:null,ttype:SPACE},{input:"not",tag:"mo",output:"\u00AC",tex:"neg",ttype:CONST},{input:"=>",tag:"mo",output:"\u21D2",tex:"implies",ttype:CONST},{input:"if",tag:"mo",output:"if",tex:null,ttype:SPACE},{input:"<=>",tag:"mo",output:"\u21D4",tex:"iff",ttype:CONST},{input:"AA",tag:"mo",output:"\u2200",tex:"forall",ttype:CONST},{input:"EE",tag:"mo",output:"\u2203",tex:"exists",ttype:CONST},{input:"_|_",tag:"mo",output:"\u22A5",tex:"bot",ttype:CONST},{input:"TT",tag:"mo",output:"\u22A4",tex:"top",ttype:CONST},{input:"|--",tag:"mo",output:"\u22A2",tex:"vdash",ttype:CONST},{input:"|==",tag:"mo",output:"\u22A8",tex:"models",ttype:CONST},{input:"(",tag:"mo",output:"(",tex:null,ttype:LEFTBRACKET},{input:")",tag:"mo",output:")",tex:null,ttype:RIGHTBRACKET},{input:"[",tag:"mo",output:"[",tex:null,ttype:LEFTBRACKET},{input:"]",tag:"mo",output:"]",tex:null,ttype:RIGHTBRACKET},{input:"{",tag:"mo",output:"{",tex:null,ttype:LEFTBRACKET},{input:"}",tag:"mo",output:"}",tex:null,ttype:RIGHTBRACKET},{input:"|",tag:"mo",output:"|",tex:null,ttype:LEFTRIGHT},{input:"(:",tag:"mo",output:"\u2329",tex:"langle",ttype:LEFTBRACKET},{input:":)",tag:"mo",output:"\u232A",tex:"rangle",ttype:RIGHTBRACKET},{input:"<<",tag:"mo",output:"\u2329",tex:null,ttype:LEFTBRACKET},{input:">>",tag:"mo",output:"\u232A",tex:null,ttype:RIGHTBRACKET},{input:"{:",tag:"mo",output:"{:",tex:null,ttype:LEFTBRACKET,invisible:true},{input:":}",tag:"mo",output:":}",tex:null,ttype:RIGHTBRACKET,invisible:true},{input:"int",tag:"mo",output:"\u222B",tex:null,ttype:CONST},{input:"dx",tag:"mi",output:"{:d x:}",tex:null,ttype:DEFINITION},{input:"dy",tag:"mi",output:"{:d y:}",tex:null,ttype:DEFINITION},{input:"dz",tag:"mi",output:"{:d z:}",tex:null,ttype:DEFINITION},{input:"dt",tag:"mi",output:"{:d t:}",tex:null,ttype:DEFINITION},{input:"oint",tag:"mo",output:"\u222E",tex:null,ttype:CONST},{input:"del",tag:"mo",output:"\u2202",tex:"partial",ttype:CONST},{input:"grad",tag:"mo",output:"\u2207",tex:"nabla",ttype:CONST},{input:"+-",tag:"mo",output:"\u00B1",tex:"pm",ttype:CONST},{input:"O/",tag:"mo",output:"\u2205",tex:"emptyset",ttype:CONST},{input:"oo",tag:"mo",output:"\u221E",tex:"infty",ttype:CONST},{input:"aleph",tag:"mo",output:"\u2135",tex:null,ttype:CONST},{input:"...",tag:"mo",output:"...",tex:"ldots",ttype:CONST},{input:":.",tag:"mo",output:"\u2234",tex:"therefore",ttype:CONST},{input:"/_",tag:"mo",output:"\u2220",tex:"angle",ttype:CONST},{input:"\\ ",tag:"mo",output:"\u00A0",tex:null,ttype:CONST},{input:"quad",tag:"mo",output:"\u00A0\u00A0",tex:null,ttype:CONST},{input:"qquad",tag:"mo",output:"\u00A0\u00A0\u00A0\u00A0",tex:null,ttype:CONST},{input:"cdots",tag:"mo",output:"\u22EF",tex:null,ttype:CONST},{input:"vdots",tag:"mo",output:"\u22EE",tex:null,ttype:CONST},{input:"ddots",tag:"mo",output:"\u22F1",tex:null,ttype:CONST},{input:"diamond",tag:"mo",output:"\u22C4",tex:null,ttype:CONST},{input:"square",tag:"mo",output:"\u25A1",tex:null,ttype:CONST},{input:"|__",tag:"mo",output:"\u230A",tex:"lfloor",ttype:CONST},{input:"__|",tag:"mo",output:"\u230B",tex:"rfloor",ttype:CONST},{input:"|~",tag:"mo",output:"\u2308",tex:"lceiling",ttype:CONST},{input:"~|",tag:"mo",output:"\u2309",tex:"rceiling",ttype:CONST},{input:"CC",tag:"mo",output:"\u2102",tex:null,ttype:CONST},{input:"NN",tag:"mo",output:"\u2115",tex:null,ttype:CONST},{input:"QQ",tag:"mo",output:"\u211A",tex:null,ttype:CONST},{input:"RR",tag:"mo",output:"\u211D",tex:null,ttype:CONST},{input:"ZZ",tag:"mo",output:"\u2124",tex:null,ttype:CONST},{input:"f",tag:"mi",output:"f",tex:null,ttype:UNARY,func:true},{input:"g",tag:"mi",output:"g",tex:null,ttype:UNARY,func:true},{input:"lim",tag:"mo",output:"lim",tex:null,ttype:UNDEROVER},{input:"Lim",tag:"mo",output:"Lim",tex:null,ttype:UNDEROVER},{input:"sin",tag:"mo",output:"sin",tex:null,ttype:UNARY,func:true},{input:"cos",tag:"mo",output:"cos",tex:null,ttype:UNARY,func:true},{input:"tan",tag:"mo",output:"tan",tex:null,ttype:UNARY,func:true},{input:"sinh",tag:"mo",output:"sinh",tex:null,ttype:UNARY,func:true},{input:"cosh",tag:"mo",output:"cosh",tex:null,ttype:UNARY,func:true},{input:"tanh",tag:"mo",output:"tanh",tex:null,ttype:UNARY,func:true},{input:"cot",tag:"mo",output:"cot",tex:null,ttype:UNARY,func:true},{input:"sec",tag:"mo",output:"sec",tex:null,ttype:UNARY,func:true},{input:"csc",tag:"mo",output:"csc",tex:null,ttype:UNARY,func:true},{input:"log",tag:"mo",output:"log",tex:null,ttype:UNARY,func:true},{input:"ln",tag:"mo",output:"ln",tex:null,ttype:UNARY,func:true},{input:"det",tag:"mo",output:"det",tex:null,ttype:UNARY,func:true},{input:"dim",tag:"mo",output:"dim",tex:null,ttype:CONST},{input:"mod",tag:"mo",output:"mod",tex:null,ttype:CONST},{input:"gcd",tag:"mo",output:"gcd",tex:null,ttype:UNARY,func:true},{input:"lcm",tag:"mo",output:"lcm",tex:null,ttype:UNARY,func:true},{input:"lub",tag:"mo",output:"lub",tex:null,ttype:CONST},{input:"glb",tag:"mo",output:"glb",tex:null,ttype:CONST},{input:"min",tag:"mo",output:"min",tex:null,ttype:UNDEROVER},{input:"max",tag:"mo",output:"max",tex:null,ttype:UNDEROVER},{input:"uarr",tag:"mo",output:"\u2191",tex:"uparrow",ttype:CONST},{input:"darr",tag:"mo",output:"\u2193",tex:"downarrow",ttype:CONST},{input:"rarr",tag:"mo",output:"\u2192",tex:"rightarrow",ttype:CONST},{input:"->",tag:"mo",output:"\u2192",tex:"to",ttype:CONST},{input:">->",tag:"mo",output:"\u21A3",tex:"rightarrowtail",ttype:CONST},{input:"->>",tag:"mo",output:"\u21A0",tex:"twoheadrightarrow",ttype:CONST},{input:">->>",tag:"mo",output:"\u2916",tex:"twoheadrightarrowtail",ttype:CONST},{input:"|->",tag:"mo",output:"\u21A6",tex:"mapsto",ttype:CONST},{input:"larr",tag:"mo",output:"\u2190",tex:"leftarrow",ttype:CONST},{input:"harr",tag:"mo",output:"\u2194",tex:"leftrightarrow",ttype:CONST},{input:"rArr",tag:"mo",output:"\u21D2",tex:"Rightarrow",ttype:CONST},{input:"lArr",tag:"mo",output:"\u21D0",tex:"Leftarrow",ttype:CONST},{input:"hArr",tag:"mo",output:"\u21D4",tex:"Leftrightarrow",ttype:CONST},{input:"sqrt",tag:"msqrt",output:"sqrt",tex:null,ttype:UNARY},{input:"root",tag:"mroot",output:"root",tex:null,ttype:BINARY},{input:"frac",tag:"mfrac",output:"/",tex:null,ttype:BINARY},{input:"/",tag:"mfrac",output:"/",tex:null,ttype:INFIX},{input:"stackrel",tag:"mover",output:"stackrel",tex:null,ttype:BINARY},{input:"_",tag:"msub",output:"_",tex:null,ttype:INFIX},{input:"^",tag:"msup",output:"^",tex:null,ttype:INFIX},{input:"hat",tag:"mover",output:"\u005E",tex:null,ttype:UNARY,acc:true},{input:"bar",tag:"mover",output:"\u00AF",tex:"overline",ttype:UNARY,acc:true},{input:"vec",tag:"mover",output:"\u2192",tex:null,ttype:UNARY,acc:true},{input:"dot",tag:"mover",output:".",tex:null,ttype:UNARY,acc:true},{input:"ddot",tag:"mover",output:"..",tex:null,ttype:UNARY,acc:true},{input:"ul",tag:"munder",output:"\u0332",tex:"underline",ttype:UNARY,acc:true},{input:"text",tag:"mtext",output:"text",tex:null,ttype:TEXT},{input:"mbox",tag:"mtext",output:"mbox",tex:null,ttype:TEXT},AMquote,{input:"bb",tag:"mstyle",atname:"fontweight",atval:"bold",output:"bb",tex:null,ttype:UNARY},{input:"mathbf",tag:"mstyle",atname:"fontweight",atval:"bold",output:"mathbf",tex:null,ttype:UNARY},{input:"sf",tag:"mstyle",atname:"fontfamily",atval:"sans-serif",output:"sf",tex:null,ttype:UNARY},{input:"mathsf",tag:"mstyle",atname:"fontfamily",atval:"sans-serif",output:"mathsf",tex:null,ttype:UNARY},{input:"bbb",tag:"mstyle",atname:"mathvariant",atval:"double-struck",output:"bbb",tex:null,ttype:UNARY,codes:AMbbb},{input:"mathbb",tag:"mstyle",atname:"mathvariant",atval:"double-struck",output:"mathbb",tex:null,ttype:UNARY,codes:AMbbb},{input:"cc",tag:"mstyle",atname:"mathvariant",atval:"script",output:"cc",tex:null,ttype:UNARY,codes:AMcal},{input:"mathcal",tag:"mstyle",atname:"mathvariant",atval:"script",output:"mathcal",tex:null,ttype:UNARY,codes:AMcal},{input:"tt",tag:"mstyle",atname:"fontfamily",atval:"monospace",output:"tt",tex:null,ttype:UNARY},{input:"mathtt",tag:"mstyle",atname:"fontfamily",atval:"monospace",output:"mathtt",tex:null,ttype:UNARY},{input:"fr",tag:"mstyle",atname:"mathvariant",atval:"fraktur",output:"fr",tex:null,ttype:UNARY,codes:AMfrk},{input:"mathfrak",tag:"mstyle",atname:"mathvariant",atval:"fraktur",output:"mathfrak",tex:null,ttype:UNARY,codes:AMfrk}];function compareNames(B,A){if(B.input>A.input){return 1}else{return -1}}var AMnames=[];function initSymbols(){var B=[],A;for(A=0;A<AMsymbols.length;A++){if(AMsymbols[A].tex&&!(typeof AMsymbols[A].notexcopy=="boolean"&&AMsymbols[A].notexcopy)){B[B.length]={input:AMsymbols[A].tex,tag:AMsymbols[A].tag,output:AMsymbols[A].output,ttype:AMsymbols[A].ttype}}}AMsymbols=AMsymbols.concat(B);refreshSymbols()}function refreshSymbols(){var A;AMsymbols.sort(compareNames);for(A=0;A<AMsymbols.length;A++){AMnames[A]=AMsymbols[A].input}LMsymbols.sort(compareNames);for(A=0;A<LMsymbols.length;A++){LMnames[A]=LMsymbols[A].input}}function define(A,B){if(A.substr(0,1)=="\\"){LMsymbols=LMsymbols.concat([{input:A,tag:"mo",output:B,ttype:DEFINITION}])}else{AMsymbols=AMsymbols.concat([{input:A,tag:"mo",output:B,tex:null,ttype:DEFINITION}])}refreshSymbols()}function AMremoveCharsAndBlanks(D,E){var A;if(D.charAt(E)=="\\"&&D.charAt(E+1)!="\\"&&D.charAt(E+1)!=" "){A=D.slice(E+1)}else{A=D.slice(E)}for(var B=0;B<A.length&&A.charCodeAt(B)<=32;B=B+1){}return A.slice(B)}function position(B,F,G){if(G==0){var E,A;G=-1;E=B.length;while(G+1<E){A=(G+E)>>1;if(B[A]<F){G=A}else{E=A}}return E}else{for(var D=G;D<B.length&&B[D]<F;D++){}}return D}function AMgetSymbol(H){var A=0;var B=0;var E;var K;var J;var F="";var G=true;for(var D=1;D<=H.length&&G;D++){K=H.slice(0,D);B=A;A=position(AMnames,K,B);if(A<AMnames.length&&H.slice(0,AMnames[A].length)==AMnames[A]){F=AMnames[A];E=A;D=F.length}G=A<AMnames.length&&H.slice(0,AMnames[A].length)>=AMnames[A]}AMpreviousSymbol=AMcurrentSymbol;if(F!=""){AMcurrentSymbol=AMsymbols[E].ttype;return AMsymbols[E]}AMcurrentSymbol=CONST;A=1;K=H.slice(0,1);var I=true;while("0"<=K&&K<="9"&&A<=H.length){K=H.slice(A,A+1);A++}if(K==decimalsign){K=H.slice(A,A+1);if("0"<=K&&K<="9"){I=false;A++;while("0"<=K&&K<="9"&&A<=H.length){K=H.slice(A,A+1);A++}}}if((I&&A>1)||A>2){K=H.slice(0,A-1);J="mn"}else{A=2;K=H.slice(0,1);J=(("A">K||K>"Z")&&("a">K||K>"z")?"mo":"mi")}if(K=="-"&&AMpreviousSymbol==INFIX){AMcurrentSymbol=INFIX;return{input:K,tag:J,output:K,ttype:UNARY,func:true,val:true}}return{input:K,tag:J,output:K,ttype:CONST,val:true}}function AMremoveBrackets(B){var A;if(B.nodeName=="mrow"){A=B.firstChild.firstChild.nodeValue;if(A=="("||A=="["||A=="{"){B.removeChild(B.firstChild)}}if(B.nodeName=="mrow"){A=B.lastChild.firstChild.nodeValue;if(A==")"||A=="]"||A=="}"){B.removeChild(B.lastChild)}}}function AMTremoveBrackets(B){var A;if(B.charAt(0)=="{"&&B.charAt(B.length-1)=="}"){A=B.charAt(1);if(A=="("||A=="["){B="{"+B.substr(2)}A=B.substr(1,6);if(A=="\\left("||A=="\\left["||A=="\\left{"){B="{"+B.substr(7)}A=B.substr(1,12);if(A=="\\left\\lbrace"||A=="\\left\\langle"){B="{"+B.substr(13)}A=B.charAt(B.length-2);if(A==")"||A=="]"){B=B.substr(0,B.length-8)+"}"}A=B.substr(B.length-8,7);if(A=="\\rbrace"||A=="\\rangle"){B=B.substr(0,B.length-14)+"}"}}return B}var AMnestingDepth,AMpreviousSymbol,AMcurrentSymbol;function AMTgetTeXsymbol(A){if(typeof A.val=="boolean"&&A.val){pre=""}else{pre="\\"}if(A.tex==null){return(pre+A.input)}else{return(pre+A.tex)}}function AMTgetTeXbracket(A){if(A.tex==null){return(A.input)}else{return("\\"+A.tex)}}function AMTparseSexpr(H){var D,B,J,E,I,G="";H=AMremoveCharsAndBlanks(H,0);D=AMgetSymbol(H);if(D==null||D.ttype==RIGHTBRACKET&&AMnestingDepth>0){return[null,H]}if(D.ttype==DEFINITION){H=D.output+AMremoveCharsAndBlanks(H,D.input.length);D=AMgetSymbol(H)}switch(D.ttype){case UNDEROVER:case CONST:H=AMremoveCharsAndBlanks(H,D.input.length);var F=AMTgetTeXsymbol(D);if(F.charAt(0)=="\\"||D.tag=="mo"){return[F,H]}else{return["{"+F+"}",H]}case LEFTBRACKET:AMnestingDepth++;H=AMremoveCharsAndBlanks(H,D.input.length);J=AMTparseExpr(H,true);AMnestingDepth--;if(typeof D.invisible=="boolean"&&D.invisible){B="{\\left."+J[0]+"}"}else{B="{\\left"+AMTgetTeXbracket(D)+J[0]+"}"}return[B,J[1]];case TEXT:if(D!=AMquote){H=AMremoveCharsAndBlanks(H,D.input.length)}if(H.charAt(0)=="{"){E=H.indexOf("}")}else{if(H.charAt(0)=="("){E=H.indexOf(")")}else{if(H.charAt(0)=="["){E=H.indexOf("]")}else{if(D==AMquote){E=H.slice(1).indexOf('"')+1}else{E=0}}}}if(E==-1){E=H.length}I=H.slice(1,E);if(I.charAt(0)==" "){G="\\ "}G+="\\text{"+I+"}";if(I.charAt(I.length-1)==" "){G+="\\ "}H=AMremoveCharsAndBlanks(H,E+1);return[G,H];case UNARY:H=AMremoveCharsAndBlanks(H,D.input.length);J=AMTparseSexpr(H);if(J[0]==null){return["{"+AMTgetTeXsymbol(D)+"}",H]}if(typeof D.func=="boolean"&&D.func){I=H.charAt(0);if(I=="^"||I=="_"||I=="/"||I=="|"||I==","){return["{"+AMTgetTeXsymbol(D)+"}",H]}else{B="{"+AMTgetTeXsymbol(D)+"{"+J[0]+"}}";return[B,J[1]]}}J[0]=AMTremoveBrackets(J[0]);if(D.input=="sqrt"){return["\\sqrt{"+J[0]+"}",J[1]]}else{if(typeof D.acc=="boolean"&&D.acc){return["{"+AMTgetTeXsymbol(D)+"{"+J[0]+"}}",J[1]]}else{return["{"+AMTgetTeXsymbol(D)+"{"+J[0]+"}}",J[1]]}}case BINARY:H=AMremoveCharsAndBlanks(H,D.input.length);J=AMTparseSexpr(H);if(J[0]==null){return["{"+AMTgetTeXsymbol(D)+"}",H]}J[0]=AMTremoveBrackets(J[0]);var A=AMTparseSexpr(J[1]);if(A[0]==null){return["{"+AMTgetTeXsymbol(D)+"}",H]}A[0]=AMTremoveBrackets(A[0]);if(D.input=="root"||D.input=="stackrel"){if(D.input=="root"){G="{\\sqrt["+J[0]+"]{"+A[0]+"}}"}else{G="{"+AMTgetTeXsymbol(D)+"{"+J[0]+"}{"+A[0]+"}}"}}if(D.input=="frac"){G="{\\frac{"+J[0]+"}{"+A[0]+"}}"}return[G,A[1]];case INFIX:H=AMremoveCharsAndBlanks(H,D.input.length);return[D.output,H];case SPACE:H=AMremoveCharsAndBlanks(H,D.input.length);return["{\\quad\\text{"+D.input+"}\\quad}",H];case LEFTRIGHT:AMnestingDepth++;H=AMremoveCharsAndBlanks(H,D.input.length);J=AMTparseExpr(H,false);AMnestingDepth--;var I="";I=J[0].charAt(J[0].length-1);if(I=="|"){B="{\\left|"+J[0]+"}";return[B,J[1]]}else{B="{\\mid}";return[B,H]}default:H=AMremoveCharsAndBlanks(H,D.input.length);return["{"+AMTgetTeXsymbol(D)+"}",H]}}function AMTparseIexpr(H){var F,I,G,E,A,D;H=AMremoveCharsAndBlanks(H,0);I=AMgetSymbol(H);A=AMTparseSexpr(H);E=A[0];H=A[1];F=AMgetSymbol(H);if(F.ttype==INFIX&&F.input!="/"){H=AMremoveCharsAndBlanks(H,F.input.length);A=AMTparseSexpr(H);if(A[0]==null){A[0]="{}"}else{A[0]=AMTremoveBrackets(A[0])}H=A[1];if(F.input=="_"){G=AMgetSymbol(H);D=(I.ttype==UNDEROVER);if(G.input=="^"){H=AMremoveCharsAndBlanks(H,G.input.length);var B=AMTparseSexpr(H);B[0]=AMTremoveBrackets(B[0]);H=B[1];E="{"+E;E+="_{"+A[0]+"}";E+="^{"+B[0]+"}";E+="}"}else{E+="_{"+A[0]+"}"}}else{E="{"+E+"}^{"+A[0]+"}"}}return[E,H]}function AMTparseExpr(I,H){var K,J,E,M,R=[],G="";var D=false;do{I=AMremoveCharsAndBlanks(I,0);E=AMTparseIexpr(I);J=E[0];I=E[1];K=AMgetSymbol(I);if(K.ttype==INFIX&&K.input=="/"){I=AMremoveCharsAndBlanks(I,K.input.length);E=AMTparseIexpr(I);if(E[0]==null){E[0]="{}"}else{E[0]=AMTremoveBrackets(E[0])}I=E[1];J=AMTremoveBrackets(J);J="\\frac{"+J+"}";J+="{"+E[0]+"}";G+=J;K=AMgetSymbol(I)}else{if(J!=undefined){G+=J}}}while((K.ttype!=RIGHTBRACKET&&(K.ttype!=LEFTRIGHT||H)||AMnestingDepth==0)&&K!=null&&K.output!="");if(K.ttype==RIGHTBRACKET||K.ttype==LEFTRIGHT){var N=G.length;if(N>2&&G.charAt(0)=="{"&&G.indexOf(",")>0){var P=G.charAt(N-2);if(P==")"||P=="]"){var A=G.charAt(6);if((A=="("&&P==")"&&K.output!="}")||(A=="["&&P=="]")){var Q="\\matrix{";var B=new Array();B.push(0);var L=true;var O=0;for(M=1;M<N-1;M++){if(G.charAt(M)==A){O++}if(G.charAt(M)==P){O--;if(O==0&&G.charAt(M+2)==","&&G.charAt(M+3)=="{"){B.push(M+2)}}}B.push(N);var F=-1;if(O==0&&B.length>0){for(M=0;M<B.length-1;M++){if(M>0){Q+="\\\\"}if(M==0){var S=G.substr(B[M]+7,B[M+1]-B[M]-15).split(",")}else{var S=G.substr(B[M]+8,B[M+1]-B[M]-16).split(",")}if(F>0&&S.length!=F){L=false}else{if(F==-1){F=S.length}}Q+=S.join("&")}}Q+="}";if(L){G=Q}}}}I=AMremoveCharsAndBlanks(I,K.input.length);if(typeof K.invisible!="boolean"||!K.invisible){J="\\right"+AMTgetTeXbracket(K);G+=J;D=true}else{G+="\\right.";D=true}}if(AMnestingDepth>0&&!D){G+="\\right."}return[G,I]}function AMTparseAMtoTeX(A){AMnestingDepth=0;A=A.replace(/&nbsp;/g,"");A=A.replace(/&gt;/g,">");A=A.replace(/&lt;/g,"<");return AMTparseExpr(A.replace(/^\s+/g,""),false)[0]}function AMTparseMath(E,A){if(A){var B=E}else{var B=AMTparseAMtoTeX(E)}if(mathcolor!=""){B="\\"+mathcolor+B}if(displaystyle){B="\\displaystyle"+B}else{B="\\textstyle"+B}var D=createElementXHTML("img");if(typeof encodeURIComponent=="function"){B=encodeURIComponent(B)}else{B=escape(B)}D.src=AMTcgiloc+"?"+B;D.style.verticalAlign="middle";if(showasciiformulaonhover){D.setAttribute("title",E.replace(/\s+/g," "))}return D}function AMparseSexpr(H){var D,B,K,F,J,G=document.createDocumentFragment();H=AMremoveCharsAndBlanks(H,0);D=AMgetSymbol(H);if(D==null||D.ttype==RIGHTBRACKET&&AMnestingDepth>0){return[null,H]}if(D.ttype==DEFINITION){H=D.output+AMremoveCharsAndBlanks(H,D.input.length);D=AMgetSymbol(H)}switch(D.ttype){case UNDEROVER:case CONST:H=AMremoveCharsAndBlanks(H,D.input.length);return[createMmlNode(D.tag,document.createTextNode(D.output)),H];case LEFTBRACKET:AMnestingDepth++;H=AMremoveCharsAndBlanks(H,D.input.length);K=AMparseExpr(H,true);AMnestingDepth--;if(typeof D.invisible=="boolean"&&D.invisible){B=createMmlNode("mrow",K[0])}else{B=createMmlNode("mo",document.createTextNode(D.output));B=createMmlNode("mrow",B);B.appendChild(K[0])}return[B,K[1]];case TEXT:if(D!=AMquote){H=AMremoveCharsAndBlanks(H,D.input.length)}if(H.charAt(0)=="{"){F=H.indexOf("}")}else{if(H.charAt(0)=="("){F=H.indexOf(")")}else{if(H.charAt(0)=="["){F=H.indexOf("]")}else{if(D==AMquote){F=H.slice(1).indexOf('"')+1}else{F=0}}}}if(F==-1){F=H.length}J=H.slice(1,F);if(J.charAt(0)==" "){B=createMmlNode("mspace");B.setAttribute("width","1ex");G.appendChild(B)}G.appendChild(createMmlNode(D.tag,document.createTextNode(J)));if(J.charAt(J.length-1)==" "){B=createMmlNode("mspace");B.setAttribute("width","1ex");G.appendChild(B)}H=AMremoveCharsAndBlanks(H,F+1);return[createMmlNode("mrow",G),H];case UNARY:H=AMremoveCharsAndBlanks(H,D.input.length);K=AMparseSexpr(H);if(K[0]==null){return[createMmlNode(D.tag,document.createTextNode(D.output)),H]}if(typeof D.func=="boolean"&&D.func){J=H.charAt(0);if(J=="^"||J=="_"||J=="/"||J=="|"||J==","){return[createMmlNode(D.tag,document.createTextNode(D.output)),H]}else{B=createMmlNode("mrow",createMmlNode(D.tag,document.createTextNode(D.output)));B.appendChild(K[0]);return[B,K[1]]}}AMremoveBrackets(K[0]);if(D.input=="sqrt"){return[createMmlNode(D.tag,K[0]),K[1]]}else{if(typeof D.acc=="boolean"&&D.acc){B=createMmlNode(D.tag,K[0]);B.appendChild(createMmlNode("mo",document.createTextNode(D.output)));return[B,K[1]]}else{if(!isIE&&typeof D.codes!="undefined"){for(F=0;F<K[0].childNodes.length;F++){if(K[0].childNodes[F].nodeName=="mi"||K[0].nodeName=="mi"){J=(K[0].nodeName=="mi"?K[0].firstChild.nodeValue:K[0].childNodes[F].firstChild.nodeValue);var I=[];for(var E=0;E<J.length;E++){if(J.charCodeAt(E)>64&&J.charCodeAt(E)<91){I=I+String.fromCharCode(D.codes[J.charCodeAt(E)-65])}else{I=I+J.charAt(E)}}if(K[0].nodeName=="mi"){K[0]=createMmlNode("mo").appendChild(document.createTextNode(I))}else{K[0].replaceChild(createMmlNode("mo").appendChild(document.createTextNode(I)),K[0].childNodes[F])}}}}B=createMmlNode(D.tag,K[0]);B.setAttribute(D.atname,D.atval);return[B,K[1]]}}case BINARY:H=AMremoveCharsAndBlanks(H,D.input.length);K=AMparseSexpr(H);if(K[0]==null){return[createMmlNode("mo",document.createTextNode(D.input)),H]}AMremoveBrackets(K[0]);var A=AMparseSexpr(K[1]);if(A[0]==null){return[createMmlNode("mo",document.createTextNode(D.input)),H]}AMremoveBrackets(A[0]);if(D.input=="root"||D.input=="stackrel"){G.appendChild(A[0])}G.appendChild(K[0]);if(D.input=="frac"){G.appendChild(A[0])}return[createMmlNode(D.tag,G),A[1]];case INFIX:H=AMremoveCharsAndBlanks(H,D.input.length);return[createMmlNode("mo",document.createTextNode(D.output)),H];case SPACE:H=AMremoveCharsAndBlanks(H,D.input.length);B=createMmlNode("mspace");B.setAttribute("width","1ex");G.appendChild(B);G.appendChild(createMmlNode(D.tag,document.createTextNode(D.output)));B=createMmlNode("mspace");B.setAttribute("width","1ex");G.appendChild(B);return[createMmlNode("mrow",G),H];case LEFTRIGHT:AMnestingDepth++;H=AMremoveCharsAndBlanks(H,D.input.length);K=AMparseExpr(H,false);AMnestingDepth--;var J="";if(K[0].lastChild!=null){J=K[0].lastChild.firstChild.nodeValue}if(J=="|"){B=createMmlNode("mo",document.createTextNode(D.output));B=createMmlNode("mrow",B);B.appendChild(K[0]);return[B,K[1]]}else{B=createMmlNode("mo",document.createTextNode("\u2223"));B=createMmlNode("mrow",B);return[B,H]}default:H=AMremoveCharsAndBlanks(H,D.input.length);return[createMmlNode(D.tag,document.createTextNode(D.output)),H]}}function AMparseIexpr(H){var F,I,G,E,A,D;H=AMremoveCharsAndBlanks(H,0);I=AMgetSymbol(H);A=AMparseSexpr(H);E=A[0];H=A[1];F=AMgetSymbol(H);if(F.ttype==INFIX&&F.input!="/"){H=AMremoveCharsAndBlanks(H,F.input.length);A=AMparseSexpr(H);if(A[0]==null){A[0]=createMmlNode("mo",document.createTextNode("\u25A1"))}else{AMremoveBrackets(A[0])}H=A[1];if(F.input=="_"){G=AMgetSymbol(H);D=(I.ttype==UNDEROVER);if(G.input=="^"){H=AMremoveCharsAndBlanks(H,G.input.length);var B=AMparseSexpr(H);AMremoveBrackets(B[0]);H=B[1];E=createMmlNode((D?"munderover":"msubsup"),E);E.appendChild(A[0]);E.appendChild(B[0]);E=createMmlNode("mrow",E)}else{E=createMmlNode((D?"munder":"msub"),E);E.appendChild(A[0])}}else{E=createMmlNode(F.tag,E);E.appendChild(A[0])}}return[E,H]}function AMparseExpr(J,I){var N,K,F,Q,U=[],G=document.createDocumentFragment();do{J=AMremoveCharsAndBlanks(J,0);F=AMparseIexpr(J);K=F[0];J=F[1];N=AMgetSymbol(J);if(N.ttype==INFIX&&N.input=="/"){J=AMremoveCharsAndBlanks(J,N.input.length);F=AMparseIexpr(J);if(F[0]==null){F[0]=createMmlNode("mo",document.createTextNode("\u25A1"))}else{AMremoveBrackets(F[0])}J=F[1];AMremoveBrackets(K);K=createMmlNode(N.tag,K);K.appendChild(F[0]);G.appendChild(K);N=AMgetSymbol(J)}else{if(K!=undefined){G.appendChild(K)}}}while((N.ttype!=RIGHTBRACKET&&(N.ttype!=LEFTRIGHT||I)||AMnestingDepth==0)&&N!=null&&N.output!="");if(N.ttype==RIGHTBRACKET||N.ttype==LEFTRIGHT){var R=G.childNodes.length;if(R>0&&G.childNodes[R-1].nodeName=="mrow"&&R>1&&G.childNodes[R-2].nodeName=="mo"&&G.childNodes[R-2].firstChild.nodeValue==","){var T=G.childNodes[R-1].lastChild.firstChild.nodeValue;if(T==")"||T=="]"){var B=G.childNodes[R-1].firstChild.firstChild.nodeValue;if(B=="("&&T==")"&&N.output!="}"||B=="["&&T=="]"){var D=[];var O=true;var L=G.childNodes.length;for(Q=0;O&&Q<L;Q=Q+2){D[Q]=[];K=G.childNodes[Q];if(O){O=K.nodeName=="mrow"&&(Q==L-1||K.nextSibling.nodeName=="mo"&&K.nextSibling.firstChild.nodeValue==",")&&K.firstChild.firstChild.nodeValue==B&&K.lastChild.firstChild.nodeValue==T}if(O){for(var P=0;P<K.childNodes.length;P++){if(K.childNodes[P].firstChild.nodeValue==","){D[Q][D[Q].length]=P}}}if(O&&Q>1){O=D[Q].length==D[Q-2].length}}if(O){var E,A,H,M,S=document.createDocumentFragment();for(Q=0;Q<L;Q=Q+2){E=document.createDocumentFragment();A=document.createDocumentFragment();K=G.firstChild;H=K.childNodes.length;M=0;K.removeChild(K.firstChild);for(P=1;P<H-1;P++){if(typeof D[Q][M]!="undefined"&&P==D[Q][M]){K.removeChild(K.firstChild);E.appendChild(createMmlNode("mtd",A));M++}else{A.appendChild(K.firstChild)}}E.appendChild(createMmlNode("mtd",A));if(G.childNodes.length>2){G.removeChild(G.firstChild);G.removeChild(G.firstChild)}S.appendChild(createMmlNode("mtr",E))}K=createMmlNode("mtable",S);if(typeof N.invisible=="boolean"&&N.invisible){K.setAttribute("columnalign","left")}G.replaceChild(K,G.firstChild)}}}}J=AMremoveCharsAndBlanks(J,N.input.length);if(typeof N.invisible!="boolean"||!N.invisible){K=createMmlNode("mo",document.createTextNode(N.output));G.appendChild(K)}}return[G,J]}function parseMath(D,B){var E,A;AMnestingDepth=0;E=B?LMparseExpr(D.replace(/^\s+/g,""),false,false)[0]:AMparseExpr(D.replace(/^\s+/g,""),false)[0];A=createMmlNode("mstyle",E);A.setAttribute("mathcolor",mathcolor);A.setAttribute("fontfamily",mathfontfamily);A.setAttribute("mathsize",mathfontsize);if(displaystyle){A.setAttribute("displaystyle","true")}A=createMmlNode("math",A);if(showasciiformulaonhover){A.setAttribute("title",D.replace(/\s+/g," "))}return A}function strarr2docFrag(A,E,G){var I=document.createDocumentFragment();var H=false;for(var F=0;F<A.length;F++){if(H&&noMathML){I.appendChild(AMTparseMath(A[F],G))}else{if(H&&!noMathML){I.appendChild(parseMath(A[F],G))}else{var B=(E?A[F].split("\n\n"):[A[F]]);I.appendChild(createElementXHTML("span").appendChild(document.createTextNode(B[0])));for(var D=1;D<B.length;D++){I.appendChild(createElementXHTML("p"));I.appendChild(createElementXHTML("span").appendChild(document.createTextNode(B[D])))}}}H=!H}return I}function AMautomathrec(K){var D="\\\\[a-zA-Z]+|\\\\\\s|";var J="\\b(?:oo|lim|ln|int|oint|del|grad|aleph|prod|prop|sinh|cosh|tanh|cos|sec|pi|tt|fr|sf|sube|supe|sub|sup|det|mod|gcd|lcm|min|max|vec|ddot|ul|chi|eta|nu|mu)(?![a-z])|";var L="\\b(?:sum|ox|log|sin|tan|dim|hat|bar|dot)(?![a-z])|";var E="|\\bI\\b|\\bin\\b|\\btext\\b";var A="NN|ZZ|QQ|RR|CC|TT|AA|EE|sqrt|dx|dy|dz|dt|xx|vv|uu|nn|bb|cc|csc|cot|alpha|beta|delta|Delta|epsilon|gamma|Gamma|kappa|lambda|Lambda|omega|phi|Phi|Pi|psi|Psi|rho|sigma|Sigma|tau|theta|Theta|xi|Xi|zeta";var B="[a-zA-HJ-Z](?=(?:[^a-zA-Z]|$|"+J+L+A+"))|";var F=B+D+"\\d+|[-()[\\]{}+=*&^_%\\@/<>,\\|!:;'~]|\\.(?!(?:\x20|$))|"+J+L+A;var M=new RegExp("(^|\\s)((("+F+")\\s?)(("+F+E+")\\s?)+)([,.?]?(?=\\s|$))","g");K=K.replace(M," `$2`$7");var H=K.split(AMdelimiter1);var I=new RegExp("(^|\\s)([b-zB-HJ-Z+*<>]|"+D+J+A+")(\\s|\\n|$)","g");var G=new RegExp("(^|\\s)([a-z]|"+D+J+A+")([,.])","g");for(i=0;i<H.length;i++){if(i%2==0){H[i]=H[i].replace(I," `$2`$3");H[i]=H[i].replace(G," `$2`$3");H[i]=H[i].replace(/([{}[\]])/,"`$1`")}}K=H.join(AMdelimiter1);K=K.replace(/((^|\s)\([a-zA-Z]{2,}.*?)\)`/g,"$1`)");K=K.replace(/`(\((a\s|in\s))(.*?[a-zA-Z]{2,}\))/g,"$1`$3");K=K.replace(/\sin`/g,"` in");K=K.replace(/`(\(\w\)[,.]?(\s|\n|$))/g,"$1`");K=K.replace(/`([0-9.]+|e.g|i.e)`(\.?)/gi,"$1$2");K=K.replace(/`([0-9.]+:)`/g,"$1");return K}function processNodeR(D,H,B){var J,I,F,A,E;if(D.childNodes.length==0){if((D.nodeType!=8||H)&&D.parentNode.nodeName!="form"&&D.parentNode.nodeName!="FORM"&&D.parentNode.nodeName!="textarea"&&D.parentNode.nodeName!="TEXTAREA"){I=D.nodeValue;if(!(I==null)){I=I.replace(/\r\n\r\n/g,"\n\n");I=I.replace(/\x20+/g," ");I=I.replace(/\s*\r\n/g," ");if(B){J=(I.indexOf("$")==-1?false:true);I=I.replace(/([^\\])\$/g,"$1 $");I=I.replace(/^\$/," $");F=I.split(" $");for(E=0;E<F.length;E++){F[E]=F[E].replace(/\\\$/g,"$")}}else{J=false;I=I.replace(new RegExp(AMescape1,"g"),function(){J=true;return"AMescape1"});I=I.replace(/\\?end{?a?math}?/i,function(){automathrecognize=false;J=true;return""});I=I.replace(/amath\b|\\begin{a?math}/i,function(){automathrecognize=true;J=true;return""});F=I.split(AMdelimiter1);if(automathrecognize){for(E=0;E<F.length;E++){if(E%2==0){F[E]=AMautomathrec(F[E])}}}I=F.join(AMdelimiter1);F=I.split(AMdelimiter1);for(E=0;E<F.length;E++){F[E]=F[E].replace(/AMescape1/g,AMdelimiter1)}}if(F.length>1||J){A=strarr2docFrag(F,D.nodeType==8,B);var G=A.childNodes.length;D.parentNode.replaceChild(A,D);return G-1}}}else{return 0}}else{if(D.nodeName!="math"){for(E=0;E<D.childNodes.length;E++){E+=processNodeR(D.childNodes[E],H,B)}}}return 0}function AMprocessNode(H,B,F){var G,A;if(F!=null){G=document.getElementsByTagName("span");for(var D=0;D<G.length;D++){if(G[D].className=="AM"){processNodeR(G[D],B,false)}}}else{try{A=H.innerHTML}catch(E){}if(A==null||/amath\b|\\begin{a?math}/i.test(A)||A.indexOf(AMdelimiter1+" ")!=-1||A.slice(-1)==AMdelimiter1||A.indexOf(AMdelimiter1+"<")!=-1||A.indexOf(AMdelimiter1+"\n")!=-1){processNodeR(H,B,false)}}}var LMsymbols=[{input:"\\alpha",tag:"mi",output:"\u03B1",ttype:CONST},{input:"\\beta",tag:"mi",output:"\u03B2",ttype:CONST},{input:"\\gamma",tag:"mi",output:"\u03B3",ttype:CONST},{input:"\\delta",tag:"mi",output:"\u03B4",ttype:CONST},{input:"\\epsilon",tag:"mi",output:"\u03B5",ttype:CONST},{input:"\\varepsilon",tag:"mi",output:"\u025B",ttype:CONST},{input:"\\zeta",tag:"mi",output:"\u03B6",ttype:CONST},{input:"\\eta",tag:"mi",output:"\u03B7",ttype:CONST},{input:"\\theta",tag:"mi",output:"\u03B8",ttype:CONST},{input:"\\vartheta",tag:"mi",output:"\u03D1",ttype:CONST},{input:"\\iota",tag:"mi",output:"\u03B9",ttype:CONST},{input:"\\kappa",tag:"mi",output:"\u03BA",ttype:CONST},{input:"\\lambda",tag:"mi",output:"\u03BB",ttype:CONST},{input:"\\mu",tag:"mi",output:"\u03BC",ttype:CONST},{input:"\\nu",tag:"mi",output:"\u03BD",ttype:CONST},{input:"\\xi",tag:"mi",output:"\u03BE",ttype:CONST},{input:"\\pi",tag:"mi",output:"\u03C0",ttype:CONST},{input:"\\varpi",tag:"mi",output:"\u03D6",ttype:CONST},{input:"\\rho",tag:"mi",output:"\u03C1",ttype:CONST},{input:"\\varrho",tag:"mi",output:"\u03F1",ttype:CONST},{input:"\\varsigma",tag:"mi",output:"\u03C2",ttype:CONST},{input:"\\sigma",tag:"mi",output:"\u03C3",ttype:CONST},{input:"\\tau",tag:"mi",output:"\u03C4",ttype:CONST},{input:"\\upsilon",tag:"mi",output:"\u03C5",ttype:CONST},{input:"\\phi",tag:"mi",output:"\u03C6",ttype:CONST},{input:"\\varphi",tag:"mi",output:"\u03D5",ttype:CONST},{input:"\\chi",tag:"mi",output:"\u03C7",ttype:CONST},{input:"\\psi",tag:"mi",output:"\u03C8",ttype:CONST},{input:"\\omega",tag:"mi",output:"\u03C9",ttype:CONST},{input:"\\Gamma",tag:"mo",output:"\u0393",ttype:CONST},{input:"\\Delta",tag:"mo",output:"\u0394",ttype:CONST},{input:"\\Theta",tag:"mo",output:"\u0398",ttype:CONST},{input:"\\Lambda",tag:"mo",output:"\u039B",ttype:CONST},{input:"\\Xi",tag:"mo",output:"\u039E",ttype:CONST},{input:"\\Pi",tag:"mo",output:"\u03A0",ttype:CONST},{input:"\\Sigma",tag:"mo",output:"\u03A3",ttype:CONST},{input:"\\Upsilon",tag:"mo",output:"\u03A5",ttype:CONST},{input:"\\Phi",tag:"mo",output:"\u03A6",ttype:CONST},{input:"\\Psi",tag:"mo",output:"\u03A8",ttype:CONST},{input:"\\Omega",tag:"mo",output:"\u03A9",ttype:CONST},{input:"\\frac12",tag:"mo",output:"\u00BD",ttype:CONST},{input:"\\frac14",tag:"mo",output:"\u00BC",ttype:CONST},{input:"\\frac34",tag:"mo",output:"\u00BE",ttype:CONST},{input:"\\frac13",tag:"mo",output:"\u2153",ttype:CONST},{input:"\\frac23",tag:"mo",output:"\u2154",ttype:CONST},{input:"\\frac15",tag:"mo",output:"\u2155",ttype:CONST},{input:"\\frac25",tag:"mo",output:"\u2156",ttype:CONST},{input:"\\frac35",tag:"mo",output:"\u2157",ttype:CONST},{input:"\\frac45",tag:"mo",output:"\u2158",ttype:CONST},{input:"\\frac16",tag:"mo",output:"\u2159",ttype:CONST},{input:"\\frac56",tag:"mo",output:"\u215A",ttype:CONST},{input:"\\frac18",tag:"mo",output:"\u215B",ttype:CONST},{input:"\\frac38",tag:"mo",output:"\u215C",ttype:CONST},{input:"\\frac58",tag:"mo",output:"\u215D",ttype:CONST},{input:"\\frac78",tag:"mo",output:"\u215E",ttype:CONST},{input:"\\pm",tag:"mo",output:"\u00B1",ttype:CONST},{input:"\\mp",tag:"mo",output:"\u2213",ttype:CONST},{input:"\\triangleleft",tag:"mo",output:"\u22B2",ttype:CONST},{input:"\\triangleright",tag:"mo",output:"\u22B3",ttype:CONST},{input:"\\cdot",tag:"mo",output:"\u22C5",ttype:CONST},{input:"\\star",tag:"mo",output:"\u22C6",ttype:CONST},{input:"\\ast",tag:"mo",output:"\u002A",ttype:CONST},{input:"\\times",tag:"mo",output:"\u00D7",ttype:CONST},{input:"\\div",tag:"mo",output:"\u00F7",ttype:CONST},{input:"\\circ",tag:"mo",output:"\u2218",ttype:CONST},{input:"\\bullet",tag:"mo",output:"\u2022",ttype:CONST},{input:"\\oplus",tag:"mo",output:"\u2295",ttype:CONST},{input:"\\ominus",tag:"mo",output:"\u2296",ttype:CONST},{input:"\\otimes",tag:"mo",output:"\u2297",ttype:CONST},{input:"\\bigcirc",tag:"mo",output:"\u25CB",ttype:CONST},{input:"\\oslash",tag:"mo",output:"\u2298",ttype:CONST},{input:"\\odot",tag:"mo",output:"\u2299",ttype:CONST},{input:"\\land",tag:"mo",output:"\u2227",ttype:CONST},{input:"\\wedge",tag:"mo",output:"\u2227",ttype:CONST},{input:"\\lor",tag:"mo",output:"\u2228",ttype:CONST},{input:"\\vee",tag:"mo",output:"\u2228",ttype:CONST},{input:"\\cap",tag:"mo",output:"\u2229",ttype:CONST},{input:"\\cup",tag:"mo",output:"\u222A",ttype:CONST},{input:"\\sqcap",tag:"mo",output:"\u2293",ttype:CONST},{input:"\\sqcup",tag:"mo",output:"\u2294",ttype:CONST},{input:"\\uplus",tag:"mo",output:"\u228E",ttype:CONST},{input:"\\amalg",tag:"mo",output:"\u2210",ttype:CONST},{input:"\\bigtriangleup",tag:"mo",output:"\u25B3",ttype:CONST},{input:"\\bigtriangledown",tag:"mo",output:"\u25BD",ttype:CONST},{input:"\\dag",tag:"mo",output:"\u2020",ttype:CONST},{input:"\\dagger",tag:"mo",output:"\u2020",ttype:CONST},{input:"\\ddag",tag:"mo",output:"\u2021",ttype:CONST},{input:"\\ddagger",tag:"mo",output:"\u2021",ttype:CONST},{input:"\\lhd",tag:"mo",output:"\u22B2",ttype:CONST},{input:"\\rhd",tag:"mo",output:"\u22B3",ttype:CONST},{input:"\\unlhd",tag:"mo",output:"\u22B4",ttype:CONST},{input:"\\unrhd",tag:"mo",output:"\u22B5",ttype:CONST},{input:"\\sum",tag:"mo",output:"\u2211",ttype:UNDEROVER},{input:"\\prod",tag:"mo",output:"\u220F",ttype:UNDEROVER},{input:"\\bigcap",tag:"mo",output:"\u22C2",ttype:UNDEROVER},{input:"\\bigcup",tag:"mo",output:"\u22C3",ttype:UNDEROVER},{input:"\\bigwedge",tag:"mo",output:"\u22C0",ttype:UNDEROVER},{input:"\\bigvee",tag:"mo",output:"\u22C1",ttype:UNDEROVER},{input:"\\bigsqcap",tag:"mo",output:"\u2A05",ttype:UNDEROVER},{input:"\\bigsqcup",tag:"mo",output:"\u2A06",ttype:UNDEROVER},{input:"\\coprod",tag:"mo",output:"\u2210",ttype:UNDEROVER},{input:"\\bigoplus",tag:"mo",output:"\u2A01",ttype:UNDEROVER},{input:"\\bigotimes",tag:"mo",output:"\u2A02",ttype:UNDEROVER},{input:"\\bigodot",tag:"mo",output:"\u2A00",ttype:UNDEROVER},{input:"\\biguplus",tag:"mo",output:"\u2A04",ttype:UNDEROVER},{input:"\\int",tag:"mo",output:"\u222B",ttype:CONST},{input:"\\oint",tag:"mo",output:"\u222E",ttype:CONST},{input:":=",tag:"mo",output:":=",ttype:CONST},{input:"\\lt",tag:"mo",output:"<",ttype:CONST},{input:"\\gt",tag:"mo",output:">",ttype:CONST},{input:"\\ne",tag:"mo",output:"\u2260",ttype:CONST},{input:"\\neq",tag:"mo",output:"\u2260",ttype:CONST},{input:"\\le",tag:"mo",output:"\u2264",ttype:CONST},{input:"\\leq",tag:"mo",output:"\u2264",ttype:CONST},{input:"\\leqslant",tag:"mo",output:"\u2264",ttype:CONST},{input:"\\ge",tag:"mo",output:"\u2265",ttype:CONST},{input:"\\geq",tag:"mo",output:"\u2265",ttype:CONST},{input:"\\geqslant",tag:"mo",output:"\u2265",ttype:CONST},{input:"\\equiv",tag:"mo",output:"\u2261",ttype:CONST},{input:"\\ll",tag:"mo",output:"\u226A",ttype:CONST},{input:"\\gg",tag:"mo",output:"\u226B",ttype:CONST},{input:"\\doteq",tag:"mo",output:"\u2250",ttype:CONST},{input:"\\prec",tag:"mo",output:"\u227A",ttype:CONST},{input:"\\succ",tag:"mo",output:"\u227B",ttype:CONST},{input:"\\preceq",tag:"mo",output:"\u227C",ttype:CONST},{input:"\\succeq",tag:"mo",output:"\u227D",ttype:CONST},{input:"\\subset",tag:"mo",output:"\u2282",ttype:CONST},{input:"\\supset",tag:"mo",output:"\u2283",ttype:CONST},{input:"\\subseteq",tag:"mo",output:"\u2286",ttype:CONST},{input:"\\supseteq",tag:"mo",output:"\u2287",ttype:CONST},{input:"\\sqsubset",tag:"mo",output:"\u228F",ttype:CONST},{input:"\\sqsupset",tag:"mo",output:"\u2290",ttype:CONST},{input:"\\sqsubseteq",tag:"mo",output:"\u2291",ttype:CONST},{input:"\\sqsupseteq",tag:"mo",output:"\u2292",ttype:CONST},{input:"\\sim",tag:"mo",output:"\u223C",ttype:CONST},{input:"\\simeq",tag:"mo",output:"\u2243",ttype:CONST},{input:"\\approx",tag:"mo",output:"\u2248",ttype:CONST},{input:"\\cong",tag:"mo",output:"\u2245",ttype:CONST},{input:"\\Join",tag:"mo",output:"\u22C8",ttype:CONST},{input:"\\bowtie",tag:"mo",output:"\u22C8",ttype:CONST},{input:"\\in",tag:"mo",output:"\u2208",ttype:CONST},{input:"\\ni",tag:"mo",output:"\u220B",ttype:CONST},{input:"\\owns",tag:"mo",output:"\u220B",ttype:CONST},{input:"\\propto",tag:"mo",output:"\u221D",ttype:CONST},{input:"\\vdash",tag:"mo",output:"\u22A2",ttype:CONST},{input:"\\dashv",tag:"mo",output:"\u22A3",ttype:CONST},{input:"\\models",tag:"mo",output:"\u22A8",ttype:CONST},{input:"\\perp",tag:"mo",output:"\u22A5",ttype:CONST},{input:"\\smile",tag:"mo",output:"\u2323",ttype:CONST},{input:"\\frown",tag:"mo",output:"\u2322",ttype:CONST},{input:"\\asymp",tag:"mo",output:"\u224D",ttype:CONST},{input:"\\notin",tag:"mo",output:"\u2209",ttype:CONST},{input:"\\begin{eqnarray}",output:"X",ttype:MATRIX,invisible:true},{input:"\\begin{array}",output:"X",ttype:MATRIX,invisible:true},{input:"\\\\",output:"}&{",ttype:DEFINITION},{input:"\\end{eqnarray}",output:"}}",ttype:DEFINITION},{input:"\\end{array}",output:"}}",ttype:DEFINITION},{input:"\\big",tag:"mo",output:"X",atval:"1.2",ieval:"2.2",ttype:BIG},{input:"\\Big",tag:"mo",output:"X",atval:"1.6",ieval:"2.6",ttype:BIG},{input:"\\bigg",tag:"mo",output:"X",atval:"2.2",ieval:"3.2",ttype:BIG},{input:"\\Bigg",tag:"mo",output:"X",atval:"2.9",ieval:"3.9",ttype:BIG},{input:"\\left",tag:"mo",output:"X",ttype:LEFTBRACKET},{input:"\\right",tag:"mo",output:"X",ttype:RIGHTBRACKET},{input:"{",output:"{",ttype:LEFTBRACKET,invisible:true},{input:"}",output:"}",ttype:RIGHTBRACKET,invisible:true},{input:"(",tag:"mo",output:"(",atval:"1",ttype:STRETCHY},{input:"[",tag:"mo",output:"[",atval:"1",ttype:STRETCHY},{input:"\\lbrack",tag:"mo",output:"[",atval:"1",ttype:STRETCHY},{input:"\\{",tag:"mo",output:"{",atval:"1",ttype:STRETCHY},{input:"\\lbrace",tag:"mo",output:"{",atval:"1",ttype:STRETCHY},{input:"\\langle",tag:"mo",output:"\u2329",atval:"1",ttype:STRETCHY},{input:"\\lfloor",tag:"mo",output:"\u230A",atval:"1",ttype:STRETCHY},{input:"\\lceil",tag:"mo",output:"\u2308",atval:"1",ttype:STRETCHY},{input:")",tag:"mo",output:")",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"]",tag:"mo",output:"]",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\rbrack",tag:"mo",output:"]",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\}",tag:"mo",output:"}",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\rbrace",tag:"mo",output:"}",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\rangle",tag:"mo",output:"\u232A",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\rfloor",tag:"mo",output:"\u230B",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\rceil",tag:"mo",output:"\u2309",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"|",tag:"mo",output:"\u2223",atval:"1",ttype:STRETCHY},{input:"\\|",tag:"mo",output:"\u2225",atval:"1",ttype:STRETCHY},{input:"\\vert",tag:"mo",output:"\u2223",atval:"1",ttype:STRETCHY},{input:"\\Vert",tag:"mo",output:"\u2225",atval:"1",ttype:STRETCHY},{input:"\\mid",tag:"mo",output:"\u2223",atval:"1",ttype:STRETCHY},{input:"\\parallel",tag:"mo",output:"\u2225",atval:"1",ttype:STRETCHY},{input:"/",tag:"mo",output:"/",atval:"1.01",ttype:STRETCHY},{input:"\\backslash",tag:"mo",output:"\u2216",atval:"1",ttype:STRETCHY},{input:"\\setminus",tag:"mo",output:"\\",ttype:CONST},{input:"\\!",tag:"mspace",atname:"width",atval:"-0.167em",ttype:SPACE},{input:"\\,",tag:"mspace",atname:"width",atval:"0.167em",ttype:SPACE},{input:"\\>",tag:"mspace",atname:"width",atval:"0.222em",ttype:SPACE},{input:"\\:",tag:"mspace",atname:"width",atval:"0.222em",ttype:SPACE},{input:"\\;",tag:"mspace",atname:"width",atval:"0.278em",ttype:SPACE},{input:"~",tag:"mspace",atname:"width",atval:"0.333em",ttype:SPACE},{input:"\\quad",tag:"mspace",atname:"width",atval:"1em",ttype:SPACE},{input:"\\qquad",tag:"mspace",atname:"width",atval:"2em",ttype:SPACE},{input:"\\prime",tag:"mo",output:"\u2032",ttype:CONST},{input:"'",tag:"mo",output:"\u02B9",ttype:CONST},{input:"''",tag:"mo",output:"\u02BA",ttype:CONST},{input:"'''",tag:"mo",output:"\u2034",ttype:CONST},{input:"''''",tag:"mo",output:"\u2057",ttype:CONST},{input:"\\ldots",tag:"mo",output:"\u2026",ttype:CONST},{input:"\\cdots",tag:"mo",output:"\u22EF",ttype:CONST},{input:"\\vdots",tag:"mo",output:"\u22EE",ttype:CONST},{input:"\\ddots",tag:"mo",output:"\u22F1",ttype:CONST},{input:"\\forall",tag:"mo",output:"\u2200",ttype:CONST},{input:"\\exists",tag:"mo",output:"\u2203",ttype:CONST},{input:"\\Re",tag:"mo",output:"\u211C",ttype:CONST},{input:"\\Im",tag:"mo",output:"\u2111",ttype:CONST},{input:"\\aleph",tag:"mo",output:"\u2135",ttype:CONST},{input:"\\hbar",tag:"mo",output:"\u210F",ttype:CONST},{input:"\\ell",tag:"mo",output:"\u2113",ttype:CONST},{input:"\\wp",tag:"mo",output:"\u2118",ttype:CONST},{input:"\\emptyset",tag:"mo",output:"\u2205",ttype:CONST},{input:"\\infty",tag:"mo",output:"\u221E",ttype:CONST},{input:"\\surd",tag:"mo",output:"\\sqrt{}",ttype:DEFINITION},{input:"\\partial",tag:"mo",output:"\u2202",ttype:CONST},{input:"\\nabla",tag:"mo",output:"\u2207",ttype:CONST},{input:"\\triangle",tag:"mo",output:"\u25B3",ttype:CONST},{input:"\\therefore",tag:"mo",output:"\u2234",ttype:CONST},{input:"\\angle",tag:"mo",output:"\u2220",ttype:CONST},{input:"\\diamond",tag:"mo",output:"\u22C4",ttype:CONST},{input:"\\Diamond",tag:"mo",output:"\u25C7",ttype:CONST},{input:"\\neg",tag:"mo",output:"\u00AC",ttype:CONST},{input:"\\lnot",tag:"mo",output:"\u00AC",ttype:CONST},{input:"\\bot",tag:"mo",output:"\u22A5",ttype:CONST},{input:"\\top",tag:"mo",output:"\u22A4",ttype:CONST},{input:"\\square",tag:"mo",output:"\u25AB",ttype:CONST},{input:"\\Box",tag:"mo",output:"\u25A1",ttype:CONST},{input:"\\wr",tag:"mo",output:"\u2240",ttype:CONST},{input:"\\arccos",tag:"mi",output:"arccos",ttype:UNARY,func:true},{input:"\\arcsin",tag:"mi",output:"arcsin",ttype:UNARY,func:true},{input:"\\arctan",tag:"mi",output:"arctan",ttype:UNARY,func:true},{input:"\\arg",tag:"mi",output:"arg",ttype:UNARY,func:true},{input:"\\cos",tag:"mi",output:"cos",ttype:UNARY,func:true},{input:"\\cosh",tag:"mi",output:"cosh",ttype:UNARY,func:true},{input:"\\cot",tag:"mi",output:"cot",ttype:UNARY,func:true},{input:"\\coth",tag:"mi",output:"coth",ttype:UNARY,func:true},{input:"\\csc",tag:"mi",output:"csc",ttype:UNARY,func:true},{input:"\\deg",tag:"mi",output:"deg",ttype:UNARY,func:true},{input:"\\det",tag:"mi",output:"det",ttype:UNARY,func:true},{input:"\\dim",tag:"mi",output:"dim",ttype:UNARY,func:true},{input:"\\exp",tag:"mi",output:"exp",ttype:UNARY,func:true},{input:"\\gcd",tag:"mi",output:"gcd",ttype:UNARY,func:true},{input:"\\hom",tag:"mi",output:"hom",ttype:UNARY,func:true},{input:"\\inf",tag:"mo",output:"inf",ttype:UNDEROVER},{input:"\\ker",tag:"mi",output:"ker",ttype:UNARY,func:true},{input:"\\lg",tag:"mi",output:"lg",ttype:UNARY,func:true},{input:"\\lim",tag:"mo",output:"lim",ttype:UNDEROVER},{input:"\\liminf",tag:"mo",output:"liminf",ttype:UNDEROVER},{input:"\\limsup",tag:"mo",output:"limsup",ttype:UNDEROVER},{input:"\\ln",tag:"mi",output:"ln",ttype:UNARY,func:true},{input:"\\log",tag:"mi",output:"log",ttype:UNARY,func:true},{input:"\\max",tag:"mo",output:"max",ttype:UNDEROVER},{input:"\\min",tag:"mo",output:"min",ttype:UNDEROVER},{input:"\\Pr",tag:"mi",output:"Pr",ttype:UNARY,func:true},{input:"\\sec",tag:"mi",output:"sec",ttype:UNARY,func:true},{input:"\\sin",tag:"mi",output:"sin",ttype:UNARY,func:true},{input:"\\sinh",tag:"mi",output:"sinh",ttype:UNARY,func:true},{input:"\\sup",tag:"mo",output:"sup",ttype:UNDEROVER},{input:"\\tan",tag:"mi",output:"tan",ttype:UNARY,func:true},{input:"\\tanh",tag:"mi",output:"tanh",ttype:UNARY,func:true},{input:"\\gets",tag:"mo",output:"\u2190",ttype:CONST},{input:"\\leftarrow",tag:"mo",output:"\u2190",ttype:CONST},{input:"\\to",tag:"mo",output:"\u2192",ttype:CONST},{input:"\\rightarrow",tag:"mo",output:"\u2192",ttype:CONST},{input:"\\leftrightarrow",tag:"mo",output:"\u2194",ttype:CONST},{input:"\\uparrow",tag:"mo",output:"\u2191",ttype:CONST},{input:"\\downarrow",tag:"mo",output:"\u2193",ttype:CONST},{input:"\\updownarrow",tag:"mo",output:"\u2195",ttype:CONST},{input:"\\Leftarrow",tag:"mo",output:"\u21D0",ttype:CONST},{input:"\\Rightarrow",tag:"mo",output:"\u21D2",ttype:CONST},{input:"\\Leftrightarrow",tag:"mo",output:"\u21D4",ttype:CONST},{input:"\\iff",tag:"mo",output:"~\\Longleftrightarrow~",ttype:DEFINITION},{input:"\\Uparrow",tag:"mo",output:"\u21D1",ttype:CONST},{input:"\\Downarrow",tag:"mo",output:"\u21D3",ttype:CONST},{input:"\\Updownarrow",tag:"mo",output:"\u21D5",ttype:CONST},{input:"\\mapsto",tag:"mo",output:"\u21A6",ttype:CONST},{input:"\\longleftarrow",tag:"mo",output:"\u2190",ttype:LONG},{input:"\\longrightarrow",tag:"mo",output:"\u2192",ttype:LONG},{input:"\\longleftrightarrow",tag:"mo",output:"\u2194",ttype:LONG},{input:"\\Longleftarrow",tag:"mo",output:"\u21D0",ttype:LONG},{input:"\\Longrightarrow",tag:"mo",output:"\u21D2",ttype:LONG},{input:"\\implies",tag:"mo",output:"\u21D2",ttype:LONG},{input:"\\Longleftrightarrow",tag:"mo",output:"\u21D4",ttype:LONG},{input:"\\longmapsto",tag:"mo",output:"\u21A6",ttype:CONST},{input:"\\sqrt",tag:"msqrt",output:"sqrt",ttype:UNARY},{input:"\\root",tag:"mroot",output:"root",ttype:BINARY},{input:"\\frac",tag:"mfrac",output:"/",ttype:BINARY},{input:"\\stackrel",tag:"mover",output:"stackrel",ttype:BINARY},{input:"\\atop",tag:"mfrac",output:"",ttype:INFIX},{input:"\\choose",tag:"mfrac",output:"",ttype:INFIX},{input:"_",tag:"msub",output:"_",ttype:INFIX},{input:"^",tag:"msup",output:"^",ttype:INFIX},{input:"\\mathrm",tag:"mtext",output:"text",ttype:TEXT},{input:"\\mbox",tag:"mtext",output:"mbox",ttype:TEXT},{input:"\\acute",tag:"mover",output:"\u00B4",ttype:UNARY,acc:true},{input:"\\grave",tag:"mover",output:"\u0060",ttype:UNARY,acc:true},{input:"\\breve",tag:"mover",output:"\u02D8",ttype:UNARY,acc:true},{input:"\\check",tag:"mover",output:"\u02C7",ttype:UNARY,acc:true},{input:"\\dot",tag:"mover",output:".",ttype:UNARY,acc:true},{input:"\\ddot",tag:"mover",output:"..",ttype:UNARY,acc:true},{input:"\\mathring",tag:"mover",output:"\u00B0",ttype:UNARY,acc:true},{input:"\\vec",tag:"mover",output:"\u20D7",ttype:UNARY,acc:true},{input:"\\overrightarrow",tag:"mover",output:"\u20D7",ttype:UNARY,acc:true},{input:"\\overleftarrow",tag:"mover",output:"\u20D6",ttype:UNARY,acc:true},{input:"\\hat",tag:"mover",output:"\u005E",ttype:UNARY,acc:true},{input:"\\widehat",tag:"mover",output:"\u0302",ttype:UNARY,acc:true},{input:"\\tilde",tag:"mover",output:"~",ttype:UNARY,acc:true},{input:"\\widetilde",tag:"mover",output:"\u02DC",ttype:UNARY,acc:true},{input:"\\bar",tag:"mover",output:"\u203E",ttype:UNARY,acc:true},{input:"\\overbrace",tag:"mover",output:"\u23B4",ttype:UNARY,acc:true},{input:"\\overline",tag:"mover",output:"\u00AF",ttype:UNARY,acc:true},{input:"\\underbrace",tag:"munder",output:"\u23B5",ttype:UNARY,acc:true},{input:"\\underline",tag:"munder",output:"\u00AF",ttype:UNARY,acc:true},{input:"\\displaystyle",tag:"mstyle",atname:"displaystyle",atval:"true",ttype:UNARY},{input:"\\textstyle",tag:"mstyle",atname:"displaystyle",atval:"false",ttype:UNARY},{input:"\\scriptstyle",tag:"mstyle",atname:"scriptlevel",atval:"1",ttype:UNARY},{input:"\\scriptscriptstyle",tag:"mstyle",atname:"scriptlevel",atval:"2",ttype:UNARY},{input:"\\textrm",tag:"mstyle",output:"\\mathrm",ttype:DEFINITION},{input:"\\mathbf",tag:"mstyle",atname:"mathvariant",atval:"bold",ttype:UNARY},{input:"\\textbf",tag:"mstyle",atname:"mathvariant",atval:"bold",ttype:UNARY},{input:"\\mathit",tag:"mstyle",atname:"mathvariant",atval:"italic",ttype:UNARY},{input:"\\textit",tag:"mstyle",atname:"mathvariant",atval:"italic",ttype:UNARY},{input:"\\mathtt",tag:"mstyle",atname:"mathvariant",atval:"monospace",ttype:UNARY},{input:"\\texttt",tag:"mstyle",atname:"mathvariant",atval:"monospace",ttype:UNARY},{input:"\\mathsf",tag:"mstyle",atname:"mathvariant",atval:"sans-serif",ttype:UNARY},{input:"\\mathbb",tag:"mstyle",atname:"mathvariant",atval:"double-struck",ttype:UNARY,codes:AMbbb},{input:"\\mathcal",tag:"mstyle",atname:"mathvariant",atval:"script",ttype:UNARY,codes:AMcal},{input:"\\mathfrak",tag:"mstyle",atname:"mathvariant",atval:"fraktur",ttype:UNARY,codes:AMfrk}];var LMnames=[];function LMremoveCharsAndBlanks(D,E){var A;A=D.slice(E);for(var B=0;B<A.length&&A.charCodeAt(B)<=32;B=B+1){}return A.slice(B)}function LMgetSymbol(H){var A=0;var B=0;var E;var J;var I;var F="";var G=true;for(var D=1;D<=H.length&&G;D++){J=H.slice(0,D);B=A;A=position(LMnames,J,B);if(A<LMnames.length&&H.slice(0,LMnames[A].length)==LMnames[A]){F=LMnames[A];E=A;D=F.length}G=A<LMnames.length&&H.slice(0,LMnames[A].length)>=LMnames[A]}LMpreviousSymbol=LMcurrentSymbol;if(F!=""){LMcurrentSymbol=LMsymbols[E].ttype;return LMsymbols[E]}LMcurrentSymbol=CONST;A=1;J=H.slice(0,1);if("0"<=J&&J<="9"){I="mn"}else{I=(("A">J||J>"Z")&&("a">J||J>"z")?"mo":"mi")}return{input:J,tag:I,output:J,ttype:CONST}}var LMpreviousSymbol,LMcurrentSymbol;function LMparseSexpr(L){var N,M,I,A,Q,K,J=document.createDocumentFragment();L=LMremoveCharsAndBlanks(L,0);N=LMgetSymbol(L);if(N==null||N.ttype==RIGHTBRACKET){return[null,L,null]}if(N.ttype==DEFINITION){L=N.output+LMremoveCharsAndBlanks(L,N.input.length);N=LMgetSymbol(L);if(N==null||N.ttype==RIGHTBRACKET){return[null,L,null]}}L=LMremoveCharsAndBlanks(L,N.input.length);switch(N.ttype){case SPACE:M=createMmlNode(N.tag);M.setAttribute(N.atname,N.atval);return[M,L,N.tag];case UNDEROVER:if(isIE){if(N.input.substr(0,4)=="\\big"){L="\\"+N.input.substr(4)+L;N=LMgetSymbol(L);N.ttype=UNDEROVER;L=LMremoveCharsAndBlanks(L,N.input.length)}}return[createMmlNode(N.tag,document.createTextNode(N.output)),L,N.tag];case CONST:var G=N.output;if(isIE){if(N.input=="'"){G="\u2032"}else{if(N.input=="''"){G="\u2033"}else{if(N.input=="'''"){G="\u2033\u2032"}else{if(N.input=="''''"){G="\u2033\u2033"}else{if(N.input=="\\square"){G="\u25A1"}else{if(N.input.substr(0,5)=="\\frac"){var D=N.input.substr(6,1);if(D=="5"||D=="6"){L=N.input.replace(/\\frac/,"\\frac ")+L;return[M,L,N.tag]}}}}}}}}M=createMmlNode(N.tag,document.createTextNode(G));return[M,L,N.tag];case LONG:M=createMmlNode(N.tag,document.createTextNode(N.output));M.setAttribute("minsize","1.5");M.setAttribute("maxsize","1.5");M=createMmlNode("mover",M);M.appendChild(createMmlNode("mspace"));return[M,L,N.tag];case STRETCHY:if(isIE&&N.input=="\\backslash"){N.output="\\"}M=createMmlNode(N.tag,document.createTextNode(N.output));if(N.input=="|"||N.input=="\\vert"||N.input=="\\|"||N.input=="\\Vert"){M.setAttribute("lspace","0em");M.setAttribute("rspace","0em")}M.setAttribute("maxsize",N.atval);if(N.rtag!=null){return[M,L,N.rtag]}else{return[M,L,N.tag]}case BIG:var F=N.atval;if(isIE){F=N.ieval}N=LMgetSymbol(L);if(N==null){return[null,L,null]}L=LMremoveCharsAndBlanks(L,N.input.length);M=createMmlNode(N.tag,document.createTextNode(N.output));if(isIE){var S=createMmlNode("mspace");S.setAttribute("height",F+"ex");M=createMmlNode("mrow",M);M.appendChild(S)}else{M.setAttribute("minsize",F);M.setAttribute("maxsize",F)}return[M,L,N.tag];case LEFTBRACKET:if(N.input=="\\left"){N=LMgetSymbol(L);if(N!=null){if(N.input=="."){N.invisible=true}L=LMremoveCharsAndBlanks(L,N.input.length)}}I=LMparseExpr(L,true,false);if(N==null||(typeof N.invisible=="boolean"&&N.invisible)){M=createMmlNode("mrow",I[0])}else{M=createMmlNode("mo",document.createTextNode(N.output));M=createMmlNode("mrow",M);M.appendChild(I[0])}return[M,I[1],I[2]];case MATRIX:if(N.input=="\\begin{array}"){var P="";N=LMgetSymbol(L);L=LMremoveCharsAndBlanks(L,0);if(N==null){P="l"}else{L=LMremoveCharsAndBlanks(L,N.input.length);if(N.input!="{"){P="l"}else{do{N=LMgetSymbol(L);if(N!=null){L=LMremoveCharsAndBlanks(L,N.input.length);if(N.input!="}"){P=P+N.input}}}while(N!=null&&N.input!=""&&N.input!="}")}}I=LMparseExpr("{"+L,true,true);M=createMmlNode("mtable",I[0]);P=P.replace(/l/g,"left ");P=P.replace(/r/g,"right ");P=P.replace(/c/g,"center ");M.setAttribute("columnalign",P);M.setAttribute("displaystyle","false");if(isIE){return[M,I[1],null]}var E=createMmlNode("mspace");E.setAttribute("width","0.167em");var R=createMmlNode("mspace");R.setAttribute("width","0.167em");var B=createMmlNode("mrow",E);B.appendChild(M);B.appendChild(R);return[B,I[1],null]}else{I=LMparseExpr("{"+L,true,true);M=createMmlNode("mtable",I[0]);if(isIE){M.setAttribute("columnspacing","0.25em")}else{M.setAttribute("columnspacing","0.167em")}M.setAttribute("columnalign","right center left");M.setAttribute("displaystyle","true");M=createMmlNode("mrow",M);return[M,I[1],null]}case TEXT:if(L.charAt(0)=="{"){Q=L.indexOf("}")}else{Q=0}if(Q==-1){Q=L.length}K=L.slice(1,Q);if(K.charAt(0)==" "){M=createMmlNode("mspace");M.setAttribute("width","0.33em");J.appendChild(M)}J.appendChild(createMmlNode(N.tag,document.createTextNode(K)));if(K.charAt(K.length-1)==" "){M=createMmlNode("mspace");M.setAttribute("width","0.33em");J.appendChild(M)}L=LMremoveCharsAndBlanks(L,Q+1);return[createMmlNode("mrow",J),L,null];case UNARY:I=LMparseSexpr(L);if(I[0]==null){return[createMmlNode(N.tag,document.createTextNode(N.output)),L]}if(typeof N.func=="boolean"&&N.func){K=L.charAt(0);if(K=="^"||K=="_"||K==","){return[createMmlNode(N.tag,document.createTextNode(N.output)),L,N.tag]}else{M=createMmlNode("mrow",createMmlNode(N.tag,document.createTextNode(N.output)));if(isIE){var S=createMmlNode("mspace");S.setAttribute("width","0.167em");M.appendChild(S)}M.appendChild(I[0]);return[M,I[1],N.tag]}}if(N.input=="\\sqrt"){if(isIE){var S=createMmlNode("mspace");S.setAttribute("height","1.2ex");S.setAttribute("width","0em");M=createMmlNode(N.tag,I[0]);M.appendChild(S);return[M,I[1],N.tag]}else{return[createMmlNode(N.tag,I[0]),I[1],N.tag]}}else{if(typeof N.acc=="boolean"&&N.acc){M=createMmlNode(N.tag,I[0]);var G=N.output;if(isIE){if(N.input=="\\hat"){G="\u0302"}else{if(N.input=="\\widehat"){G="\u005E"}else{if(N.input=="\\bar"){G="\u00AF"}else{if(N.input=="\\grave"){G="\u0300"}else{if(N.input=="\\tilde"){G="\u0303"}}}}}}var B=createMmlNode("mo",document.createTextNode(G));if(N.input=="\\vec"||N.input=="\\check"){B.setAttribute("maxsize","1.2")}if(isIE&&N.input=="\\bar"){B.setAttribute("maxsize","0.5")}if(N.input=="\\underbrace"||N.input=="\\underline"){B.setAttribute("accentunder","true")}else{B.setAttribute("accent","true")}M.appendChild(B);if(N.input=="\\overbrace"||N.input=="\\underbrace"){M.ttype=UNDEROVER}return[M,I[1],N.tag]}else{if(!isIE&&typeof N.codes!="undefined"){for(Q=0;Q<I[0].childNodes.length;Q++){if(I[0].childNodes[Q].nodeName=="mi"||I[0].nodeName=="mi"){K=(I[0].nodeName=="mi"?I[0].firstChild.nodeValue:I[0].childNodes[Q].firstChild.nodeValue);var H=[];for(var O=0;O<K.length;O++){if(K.charCodeAt(O)>64&&K.charCodeAt(O)<91){H=H+String.fromCharCode(N.codes[K.charCodeAt(O)-65])}else{H=H+K.charAt(O)}}if(I[0].nodeName=="mi"){I[0]=createMmlNode("mo").appendChild(document.createTextNode(H))}else{I[0].replaceChild(createMmlNode("mo").appendChild(document.createTextNode(H)),I[0].childNodes[Q])}}}}M=createMmlNode(N.tag,I[0]);M.setAttribute(N.atname,N.atval);if(N.input=="\\scriptstyle"||N.input=="\\scriptscriptstyle"){M.setAttribute("displaystyle","false")}return[M,I[1],N.tag]}}case BINARY:I=LMparseSexpr(L);if(I[0]==null){return[createMmlNode("mo",document.createTextNode(N.input)),L,null]}A=LMparseSexpr(I[1]);if(A[0]==null){return[createMmlNode("mo",document.createTextNode(N.input)),L,null]}if(N.input=="\\root"||N.input=="\\stackrel"){J.appendChild(A[0])}J.appendChild(I[0]);if(N.input=="\\frac"){J.appendChild(A[0])}return[createMmlNode(N.tag,J),A[1],N.tag];case INFIX:L=LMremoveCharsAndBlanks(L,N.input.length);return[createMmlNode("mo",document.createTextNode(N.output)),L,N.tag];default:return[createMmlNode(N.tag,document.createTextNode(N.output)),L,N.tag]}}function LMparseIexpr(G){var F,D,B,E,I,J,H;G=LMremoveCharsAndBlanks(G,0);D=LMgetSymbol(G);I=LMparseSexpr(G);E=I[0];G=I[1];J=I[2];F=LMgetSymbol(G);if(F.ttype==INFIX){G=LMremoveCharsAndBlanks(G,F.input.length);I=LMparseSexpr(G);if(I[0]==null){I[0]=createMmlNode("mo",document.createTextNode("\u25A1"))}G=I[1];J=I[2];if(F.input=="_"||F.input=="^"){B=LMgetSymbol(G);J=null;H=((D.ttype==UNDEROVER)||(E.ttype==UNDEROVER));if(F.input=="_"&&B.input=="^"){G=LMremoveCharsAndBlanks(G,B.input.length);var A=LMparseSexpr(G);G=A[1];J=A[2];E=createMmlNode((H?"munderover":"msubsup"),E);E.appendChild(I[0]);E.appendChild(A[0])}else{if(F.input=="_"){E=createMmlNode((H?"munder":"msub"),E);E.appendChild(I[0])}else{E=createMmlNode((H?"mover":"msup"),E);E.appendChild(I[0])}}E=createMmlNode("mrow",E)}else{E=createMmlNode(F.tag,E);if(F.input=="\\atop"||F.input=="\\choose"){E.setAttribute("linethickness","0ex")}E.appendChild(I[0]);if(F.input=="\\choose"){E=createMmlNode("mfenced",E)}}}return[E,G,J]}function LMparseExpr(I,H,N){var M,J,E,P,T,F=document.createDocumentFragment();do{I=LMremoveCharsAndBlanks(I,0);E=LMparseIexpr(I);J=E[0];I=E[1];T=E[2];M=LMgetSymbol(I);if(J!=undefined){if((T=="mn"||T=="mi")&&M!=null&&typeof M.func=="boolean"&&M.func){var S=createMmlNode("mspace");S.setAttribute("width","0.167em");J=createMmlNode("mrow",J);J.appendChild(S)}F.appendChild(J)}}while((M.ttype!=RIGHTBRACKET)&&M!=null&&M.output!="");T=null;if(M.ttype==RIGHTBRACKET){if(M.input=="\\right"){I=LMremoveCharsAndBlanks(I,M.input.length);M=LMgetSymbol(I);if(M!=null&&M.input=="."){M.invisible=true}if(M!=null){T=M.rtag}}if(M!=null){I=LMremoveCharsAndBlanks(I,M.input.length)}var Q=F.childNodes.length;if(N&&Q>0&&F.childNodes[Q-1].nodeName=="mrow"&&Q>1&&F.childNodes[Q-2].nodeName=="mo"&&F.childNodes[Q-2].firstChild.nodeValue=="&"){var B=[];var K=F.childNodes.length;for(P=0;N&&P<K;P=P+2){B[P]=[];J=F.childNodes[P];for(var O=0;O<J.childNodes.length;O++){if(J.childNodes[O].firstChild.nodeValue=="&"){B[P][B[P].length]=O}}}var D,A,G,L,R=document.createDocumentFragment();for(P=0;P<K;P=P+2){D=document.createDocumentFragment();A=document.createDocumentFragment();J=F.firstChild;G=J.childNodes.length;L=0;for(O=0;O<G;O++){if(typeof B[P][L]!="undefined"&&O==B[P][L]){J.removeChild(J.firstChild);D.appendChild(createMmlNode("mtd",A));L++}else{A.appendChild(J.firstChild)}}D.appendChild(createMmlNode("mtd",A));if(F.childNodes.length>2){F.removeChild(F.firstChild);F.removeChild(F.firstChild)}R.appendChild(createMmlNode("mtr",D))}return[R,I]}if(typeof M.invisible!="boolean"||!M.invisible){J=createMmlNode("mo",document.createTextNode(M.output));F.appendChild(J)}}return[F,I,T]}var tcnt=0,dcnt=0;function simpleLaTeXformatting(A){A=A.replace(/\$\$((.|\n)*?)\$\$/g,'<p align="center">$\\displaystyle{$1}$</p>');A=A.replace(/\\begin{(theorem|lemma|proposition|corollary)}((.|\n)*?)\\end{\1}/g,function(E,D,B){tcnt++;return"<b>"+D.charAt(0).toUpperCase()+D.slice(1)+" "+tcnt+".</b> <i>"+B.replace(/^\s*<\/?\w+\/?>|\s*<\/?\w+\/?>$/g,"")+"</i>"});A=A.replace(/\\begin{(definition|example|remark|problem|exercise|conjecture|solution)}((.|\n)*?)\\end{\1}/g,function(E,D,B){dcnt++;return"<b>"+D.charAt(0).toUpperCase()+D.slice(1)+" "+dcnt+".</b> "+B.replace(/^\s*<\/?\w+\/?>|\s*<\/?\w+\/?>$/g,"")});A=A.replace(/\\begin{proof}((.|\n)*?)\\end{proof}/g,function(D,B){return"<i>Proof:</i> "+B.replace(/^\s*<\/?\w+\/?>|\s*<\/?\w+\/?>$/g,"")+" &#x25A1;"});A=A.replace(/\\emph{(.*?)}/g,"<em>$1</em>");A=A.replace(/\\textbf{(.*?)}/g,"<b>$1</b>");A=A.replace(/\\cite{(.*?)}/g,"[$1]");A=A.replace(/\\chapter{(.*?)}/g,"<h2>$1</h2>");A=A.replace(/\\section{(.*?)}(\s*<\/?(br|p)\s?\/?>)?/g,"<h3>$1</h3>");A=A.replace(/\\subsection{((.|\n)*?)}/g,"<h4>$1</h4>");A=A.replace(/\\begin{itemize}(\s*<\/?(br|p)\s?\/?>)?/g,"<ul>");A=A.replace(/\\item\s((.|\n)*?)(?=(\\item|\\end))/g,"<li>$1</li>");A=A.replace(/\\end{itemize}(\s*<\/?(br|p)\s?\/?>)?/g,"</ul>");A=A.replace(/\\begin{enumerate}(\s*<\/?(br|p)\s?\/?>)?/g,"<ol>");A=A.replace(/\\end{enumerate}(\s*<\/?(br|p)\s?\/?>)?/g,"</ol>");A=A.replace(/\\item\[(.*?)]{(.*?)}/g,"<dt>$1</dt><dd>$2</dd>");A=A.replace(/\\begin{description}/g,"<dl>");A=A.replace(/\\end{description}/g,"</dl>");A=A.replace(/\\newline\b/g,"<br/>");A=A.replace(/\\newpage\b/g,'<br style="page-break-after:always;">');A=A.replace(/\\par\b/g,"<p>&nbsp;</p>");A=A.replace(/\\bigskip/g,'<p style="margin-bottom:0.5in">&nbsp;</p>');A=A.replace(/\\medskip/g,'<p style="margin-bottom:0.3in">&nbsp;</p>');A=A.replace(/\\smallskip/g,'<p style="margin-bottom:0.15in">&nbsp;</p>');A=A.replace(/\\begin{center}((.|\n)*?)\\end{center}/g,"<center>$1</center>");return A}function ASCIIandgraphformatting(A){A=A.replace(/<sup>(.*?)<\/sup>(\s|(\S))/gi,"^{$1} $3");A=A.replace(/(Proof:)/g,"<i>$1</i>");A=A.replace(/QED/g,"&nbsp; &nbsp; &#x25A1;");A=A.replace(/(\\?end{?a?math}?)/ig,"<span></span>$1");A=A.replace(/(\bamath\b|\\begin{a?math})/ig,"<span></span>$1");A=A.replace(/([>\n])(Theorem|Lemma|Proposition|Corollary|Definition|Example|Remark|Problem|Exercise|Conjecture|Solution)(:|\W\W?(\w|\s|-|\.)*?\W?:)/g,"$1<b>$2$3</b>");A=A.replace(/<embed\s+class\s?=\s?"?ASCIIsvg"?/gi,'<embed class="ASCIIsvg" src="'+dsvglocation+'d.svg" wmode="transparent"');A=A.replace(/(?:\\begin{a?graph}|\bagraph|\(:graph\s)((.|\n)*?)(?:\\end{a?graph}|enda?graph|:\))/g,function(D,B){return'<table><tr><td><div class="ASCIIsvg"><embed class="ASCIIsvg" src="'+dsvglocation+'d.svg" wmode="transparent" script=\''+B.replace(/<\/?(br|p|pre)\s?\/?>/gi,"\n")+"'/></div></td></tr></table>"});A=A.replace(/insertASCIIMathCalculator/g,'<div class="ASCIIMathCalculator"></div>');return A}function LMprocessNode(F){var E,A;try{A=F.innerHTML}catch(B){}var D=/amath\b|graph/i.test(A);if((A==null||A.indexOf("$ ")!=-1||A.indexOf("$<")!=-1||A.indexOf("\\begin")!=-1||D||A.slice(-1)=="$"||A.indexOf("$\n")!=-1)&&!/edit-content|HTMLArea|wikiedit|wpTextbox1/.test(A)){if(!avoidinnerHTML&&translateLaTeXformatting){A=simpleLaTeXformatting(A)}if(A!=null&&D&&!avoidinnerHTML){A=ASCIIandgraphformatting(A)}A=A.replace(/%7E/g,"~");if(!avoidinnerHTML){F.innerHTML=A}processNodeR(F,false,true)}}var checkIfSVGavailable=true;var notifyIfNoSVG=true;var alertIfNoSVG=false;var noSVG=false;var defaultwidth=300;defaultheight=200;var defaultxmin=-5.5;defaultxmax=5.5;var defaultborder=0;border=defaultborder;var defaultstrokewidth="1";var defaultstroke="blue";var defaultstrokeopacity=1;var defaultstrokedasharray=null;var defaultfill="none";var defaultfillopacity=1;var defaultfontstyle="normal";var defaultfontfamily="times";var defaultfontsize="16";var defaultfontweight="normal";var defaultfontstroke="none";var defaultfontfill="none";var defaultmarker="none";var defaultendpoints="";var showcoordinates=true;var markerstrokewidth="1";var markerstroke="black";var markerfill="yellow";var markersize=4;var arrowfill=stroke;var dotradius=4;var ticklength=4;var axesstroke="black";var gridstroke="grey";var backgroundstyle="fill-opacity:1; fill:white";var singlelettersitalic=true;var picturepos=null;var xunitlength;var yunitlength;var origin=[0,0];var above="above";var below="below";var left="left";var right="right";var aboveleft="aboveleft";var aboveright="aboveright";var belowleft="belowleft";var belowright="belowright";var xmin,xmax,ymin,ymax,xscl,yscl,xgrid,ygrid,xtick,ytick,initialized;var strokewidth,strokedasharray,stroke,fill,strokeopacity,fillopacity;var fontstyle,fontfamily,fontsize,fontweight,fontstroke,fontfill;var marker,endpoints,dynamic={};var picture,svgpicture,doc,width,height;var isIE=document.createElementNS==null;var cpi="\u03C0",ctheta="\u03B8";var log=function(A){return ln(A)/ln(10)};var pi=Math.PI,e=Math.E,ln=Math.log,sqrt=Math.sqrt;var floor=Math.floor,ceil=Math.ceil,abs=Math.abs;var sin=Math.sin,cos=Math.cos,tan=Math.tan;var arcsin=Math.asin,arccos=Math.acos,arctan=Math.atan;var sec=function(A){return 1/Math.cos(A)};var csc=function(A){return 1/Math.sin(A)};var cot=function(A){return 1/Math.tan(A)};var arcsec=function(A){return arccos(1/A)};var arccsc=function(A){return arcsin(1/A)};var arccot=function(A){return arctan(1/A)};var sinh=function(A){return(Math.exp(A)-Math.exp(-A))/2};var cosh=function(A){return(Math.exp(A)+Math.exp(-A))/2};var tanh=function(A){return(Math.exp(A)-Math.exp(-A))/(Math.exp(A)+Math.exp(-A))};var sech=function(A){return 1/cosh(A)};var csch=function(A){return 1/sinh(A)};var coth=function(A){return 1/tanh(A)};var arcsinh=function(A){return ln(A+Math.sqrt(A*A+1))};var arccosh=function(A){return ln(A+Math.sqrt(A*A-1))};var arctanh=function(A){return ln((1+A)/(1-A))/2};var sech=function(A){return 1/cosh(A)};var csch=function(A){return 1/sinh(A)};var coth=function(A){return 1/tanh(A)};var arcsech=function(A){return arccosh(1/A)};var arccsch=function(A){return arcsinh(1/A)};var arccoth=function(A){return arctanh(1/A)};var sign=function(A){return(A==0?0:(A<0?-1:1))};function factorial(A,D){if(D==null){D=1}if(Math.abs(A-Math.round(A*1000000)/1000000)<1e-15){A=Math.round(A*1000000)/1000000}if(A-Math.floor(A)!=0){return NaN}for(var B=A-D;B>0;B-=D){A*=B}return(A<0?NaN:(A==0?1:A))}function C(A,B){var E=1;for(var D=0;D<B;D++){E*=(A-D)/(B-D)}return E}function chop(A,B){if(B==null){B=0}return Math.floor(A*Math.pow(10,B))/Math.pow(10,B)}function ran(B,A,D){if(D==null){D=0}return chop((A+Math.pow(10,-D)-B)*Math.random()+B,D)}function myCreateElementSVG(A){if(isIE){return doc.createElement(A)}else{return doc.createElementNS("http://www.w3.org/2000/svg",A)}}function getElementsByClass(A,D,E){var F=new Array(0);var G=A.getElementsByTagName(D);for(var B=0;B<G.length;B++){if(G[B].className.slice(0,E.length)==E){F[F.length]=G[B]}}return F}function showobj(D){var A="",B;for(B in D){A+=(D.getAttribute(B)==null?"":" "+B+":"+D.getAttribute(B))}return A}function findPos(A){var B=curtop=0;if(A.offsetParent){B=A.offsetLeft;curtop=A.offsetTop;while(A=A.offsetParent){B+=A.offsetLeft;curtop+=A.offsetTop}}return[B,curtop]}function checkSVG(){if(navigator.appName.slice(0,8)=="Netscape"){if(window.SVGElement){noSVG=null}else{noSVG=true}}else{if(navigator.appName.slice(0,9)=="Microsoft"){try{var oSVG=eval("new ActiveXObject('Adobe.SVGCtl.3');");noSVG=null}catch(e){noSVG=true}}else{if(navigator.appName.slice(0,5)=="Opera"){noSVG=null}else{noSVG=true}}}if(noSVG&&notifyIfNoSVG){var msg="To view the ASCIIsvg images use Internet Explorer + Adobe SVGviewer or Mozilla Firefox 2.0 or later.";if(alertIfNoSVG){alert(msg)}else{return msg}}}function setText(A,D){var B=document.getElementById(D);if(B!=null){if(B.childNodes.length!=0){B.childNodes[0].nodeValue=A}else{B.appendChild(document.createTextNode(A))}}}function getX(A){var B=A.target.parentNode;pos=findPos(B.parentNode);return(A.clientX+(isIE?0:window.pageXOffset)-pos[0]-B.getAttribute("ox"))/parseFloat(B.getAttribute("xunitlength"))}function getY(A){var B=A.target.parentNode;pos=findPos(B.parentNode);return(B.getAttribute("height")-B.getAttribute("oy")-(A.clientY+(isIE?0:window.pageYOffset)-pos[1]))/parseFloat(B.getAttribute("yunitlength"))}function translateandeval(src){var errstr;src=src.replace(/plot\(\x20*([^\"f\[][^\n\r;]+?)\,/g,'plot("$1",');src=src.replace(/plot\(\x20*([^\"f\[][^\n\r;]+)\)/g,'plot("$1")');src=src.replace(/([=[(,]\x20*)\(([-a-z0-9./+*]+?),([-a-z0-9./+*]+?)\)/g,"$1[$2,$3]");src=src.replace(/([0-9])([a-df-zA-Z]|e^)/g,"$1*$2");src=src.replace(/\)([\(0-9a-zA-Z])/g,")*$1");try{with(Math){eval(src)}}catch(err){if(err!="wait"){if(typeof err=="object"){errstr=err.name+" "+err.message+" "+err.number+" "+err.description}else{errstr=err}alert(errstr+"\n"+src)}}}var lastSlot=0;function drawPictures(){var A,D,F,G,E,M,K,L,I,H,N;var B=document.getElementsByTagName("body")[0];pictures=getElementsByClass(B,"embed","ASCIIsvg");var J=pictures.length;if(J==0){return}for(K=lastSlot;K<J+lastSlot;K++){width=null;height=null;xmin=null;xmax=null;ymin=null;ymax=null;xscl=null;xgrid=null;yscl=null;ygrid=null;initialized=false;picture=pictures[K-lastSlot];A=picture.getAttribute("script");if(A==null){A=""}if(!/axes\b|initPicture/.test(A)){var H=0;while(/((yscl|ymax|ymin|xscl|xmax|xmin|\bwidth|\bheight)\s*=\s*-?\d*(\d\.|\.\d|\d)\d*\s*;?)/.test(A.slice(H))){H++}A=(H==0?"axes(); "+A:A.slice(0,H)+A.slice(H).replace(/((scl|max|min|idth|eight)\s*=\s*-?\d*(\d\.|\.\d|\d)\d*\s*;?)/,"$1\naxes();"))}M=picture.getAttribute("height");if(isIE){picture.setAttribute("wmode","transparent")}if(document.getElementById("picture"+(K+1)+"mml")==null){picture.parentNode.style.position="relative";E=createElementXHTML("div");E.style.position="absolute";E.style.top="0px";E.style.left="0px";E.setAttribute("id","picture"+(K+1)+"mml");picture.parentNode.insertBefore(E,picture.nextSibling)}if(M==null){M=""}if(M==""||A==""){if(document.getElementById("picture"+(K+1)+"input")==null){E=createElementXHTML("textarea");I=A.split("\n");L=0;for(H=0;H<I.length;H++){L=Math.max(L,I[H].length)}E.setAttribute("rows",Math.min(10,I.length)+1);E.setAttribute("cols",Math.max(Math.min(60,L),20)+5);if(isIE){A=A.replace(/([^\r])\n/g,"$1\r")}E.appendChild(document.createTextNode(A));if(A.indexOf("showcode()")==-1){E.style.display="none"}E.setAttribute("id","picture"+(K+1)+"input");picture.parentNode.insertBefore(E,picture.nextSibling);picture.parentNode.insertBefore(createElementXHTML("br"),E);N=createElementXHTML("button");N.setAttribute("id","picture"+(K+1)+"button");if(isIE){N.onclick=function(){updatePicture(this)}}else{N.setAttribute("onclick","updatePicture(this)")}N.appendChild(document.createTextNode("Update"));if(A.indexOf("showcode()")==-1){N.style.display="none"}picture.parentNode.insertBefore(N,E);picture.parentNode.insertBefore(createElementXHTML("br"),E)}else{A=document.getElementById("picture"+(K+1)+"input").value}}D=picture.getAttribute("id");F=picture.getAttribute("src");if(D==null||D==""){D="picture"+(K+1);picture.setAttribute("id",D)}translateandeval(A)}lastSlot+=J}function setdefaults(){strokewidth=defaultstrokewidth;stroke=defaultstroke;strokeopacity=defaultstrokeopacity;strokedasharray=defaultstrokedasharray;fill=defaultfill;fillopacity=defaultfillopacity;fontstyle=defaultfontstyle;fontfamily=defaultfontfamily;fontsize=defaultfontsize;fontweight=defaultfontweight;fontstroke=defaultfontstroke;fontfill=defaultfontfill;marker=defaultmarker;endpoints=defaultendpoints}function switchTo(B){if(B==undefined){return}var A=B;if(typeof A!="string"){A=B.target.parentNode.getAttribute("name")}picture=document.getElementById(A);width=picture.getAttribute("width")-0;height=picture.getAttribute("height")-0;setdefaults();if((picture.nodeName=="EMBED"||picture.nodeName=="embed")&&isIE){svgpicture=picture.getSVGDocument().getElementById("root");doc=picture.getSVGDocument()}else{svgpicture=picture;doc=document}xunitlength=parseFloat(svgpicture.getAttribute("xunitlength"));yunitlength=parseFloat(svgpicture.getAttribute("yunitlength"));xmin=parseFloat(svgpicture.getAttribute("xmin"));xmax=parseFloat(svgpicture.getAttribute("xmax"));ymin=parseFloat(svgpicture.getAttribute("ymin"));ymax=parseFloat(svgpicture.getAttribute("ymax"));origin=[svgpicture.getAttribute("ox")-0,svgpicture.getAttribute("oy")-0]}function updatePicture(E){var A,F,G,D,B;if(typeof E=="object"){G=E.id.slice(0,-6)}else{G=(typeof E=="string"?E:"picture"+(E+1))}F=document.getElementById(G+"input").value;xmin=null;xmax=null;ymin=null;ymax=null;xscl=null;xgrid=null;yscl=null;ygrid=null;initialized=false;picture=document.getElementById(G);translateandeval(F)}function changepicturesize(A,E){var F=A.target;var D=F.parentNode.getAttribute("name");var B=document.getElementById(D);var G=document.getElementById(D+"input").value;if(!/height/.test(G)){G="height=0; "+G}if(!/width/.test(G)){G="width=0; "+G}G=G.replace(/width\s*=\s*\d+/,"width="+(E*(B.getAttribute("width")-0)));G=G.replace(/height\s*=\s*\d+/,"height="+(E*(B.getAttribute("height")-0)));document.getElementById(D+"input").value=G;updatePicture(D)}function zoom(J,I){switchTo(J);var G=J.target;var D=G.parentNode.getAttribute("name");var H=document.getElementById(D);var B=document.getElementById(D+"input").value;var E=(xmax-xmin)/2;var K=(ymax-ymin)/2;var F=getX(J),A=getY(J);if(!/ymax/.test(B)){B="ymax=0; "+B}if(!/ymin/.test(B)){B="ymin=0; "+B}if(!/xmax/.test(B)){B="xmax=0; "+B}if(!/xmin/.test(B)){B="xmin=0; "+B}B=B.replace(/xmin\s*=\s*[-\d.e]+/,"xmin="+(F-I*E));B=B.replace(/xmax\s*=\s*[-\d.e]+/,"xmax="+(F+I*E));B=B.replace(/ymin\s*=\s*[-\d.e]+/,"ymin="+(A-I*K));B=B.replace(/ymax\s*=\s*[-\d.e]+/,"ymax="+(A+I*K));document.getElementById(D+"input").value=B;updatePicture(D)}var sinceFirstClick=0;var dblClkTimer;function timer(){if(sinceFirstClick<60){sinceFirstClick++;setTimeout("timer()",10)}else{clearTimeout(dblClkTimer);dblClkTimer=""}}function mClick(A){if(sinceFirstClick!=0){if(sinceFirstClick<=40){if(A.shiftKey){if(A.altKey){changepicturesize(A,2)}else{zoom(A,0.5)}}else{if(A.altKey){zoom(A,2)}else{showHideCode(A)}}clearTimeout(dblClkTimer);dblClkTimer=""}else{clearTimeout(dblClkTimer);sinceFirstClick=0;dblClkTimer=setTimeout("timer()",10)}}else{sinceFirstClick=0;dblClkTimer=setTimeout("timer()",10)}}function showHideCode(A){var E=A.target;var B=E.parentNode.getAttribute("name");var D=document.getElementById(B+"input");D.style.display=(D.style.display=="none"?"":"none");var D=document.getElementById(B+"button");D.style.display=(D.style.display=="none"?"":"none")}function showcode(){}function setBorder(A){border=A}function initPicture(H,F,D,A){if(!initialized){setdefaults();initialized=true;if(H!=null){xmin=H}if(F!=null){xmax=F}if(D!=null){ymin=D}if(A!=null){ymax=A}if(xmin==null){xmin=defaultxmin}if(xmax==null){xmax=defaultxmax}if(typeof xmin!="number"||typeof xmax!="number"||xmin>=xmax){alert("Picture requires at least two numbers: xmin < xmax")}else{if(A!=null&&(typeof D!="number"||typeof A!="number"||D>=A)){alert("initPicture(xmin,xmax,ymin,ymax) requires numbers ymin < ymax")}else{if(width==null){width=picture.getAttribute("width");if(width==null||width==""){width=defaultwidth}}picture.setAttribute("width",width);if(height==null){height=picture.getAttribute("height");if(height==null||height==""){height=defaultheight}}picture.setAttribute("height",height);xunitlength=(width-2*border)/(xmax-xmin);yunitlength=xunitlength;if(ymin==null){origin=[-xmin*xunitlength+border,height/2];ymin=-(height-2*border)/(2*yunitlength);ymax=-ymin}else{if(ymax!=null){yunitlength=(height-2*border)/(ymax-ymin)}else{ymax=(height-2*border)/yunitlength+ymin}origin=[-xmin*xunitlength+border,-ymin*yunitlength+border]}if(isIE){if(picture.FULLSCREEN==undefined){setTimeout("drawPictures()",50);throw"wait"}svgpicture=picture.getSVGDocument().getElementById("root");if(svgpicture==null){setTimeout("drawPictures()",50);throw"wait"}svgpicture=picture.getSVGDocument().getElementById("root");while(svgpicture.childNodes.length>0){svgpicture.removeChild(svgpicture.lastChild)}svgpicture.setAttribute("width",width);svgpicture.setAttribute("height",height);svgpicture.setAttribute("name",picture.getAttribute("id"));doc=picture.getSVGDocument()}else{var B=document.createElementNS("http://www.w3.org/2000/svg","svg");B.setAttribute("id",picture.getAttribute("id"));B.setAttribute("name",picture.getAttribute("id"));B.setAttribute("width",picture.getAttribute("width"));B.setAttribute("height",picture.getAttribute("height"));picturepos=findPos(picture);if(picture.parentNode!=null){picture.parentNode.replaceChild(B,picture)}else{svgpicture.parentNode.replaceChild(B,svgpicture)}svgpicture=B;doc=document}var G=document.getElementById(picture.getAttribute("id")+"mml");if(G!=null){while(G.childNodes.length>0){G.removeChild(G.lastChild)}}svgpicture.setAttribute("xunitlength",xunitlength);svgpicture.setAttribute("yunitlength",yunitlength);svgpicture.setAttribute("xmin",xmin);svgpicture.setAttribute("xmax",xmax);svgpicture.setAttribute("ymin",ymin);svgpicture.setAttribute("ymax",ymax);svgpicture.setAttribute("ox",origin[0]);svgpicture.setAttribute("oy",origin[1]);var E=myCreateElementSVG("rect");E.setAttribute("x","0");E.setAttribute("y","0");E.setAttribute("width",width);E.setAttribute("height",height);E.setAttribute("style",backgroundstyle);svgpicture.appendChild(E);svgpicture.setAttribute("onmousemove","displayCoord(evt)");svgpicture.setAttribute("onmouseout","removeCoord(evt)");svgpicture.setAttribute("onclick","mClick(evt)");E=myCreateElementSVG("text");E.appendChild(doc.createTextNode(" "));E.setAttribute("id","coords");svgpicture.appendChild(E);E=myCreateElementSVG("text");E.appendChild(doc.createTextNode(" "));E.setAttribute("id","coords");svgpicture.appendChild(E);border=defaultborder}}}}function line(E,D,F,B){var A;if(F!=null){A=doc.getElementById(F)}if(A==null){A=myCreateElementSVG("path");A.setAttribute("id",F);svgpicture.appendChild(A)}A.setAttribute("d","M"+(E[0]*xunitlength+origin[0])+","+(height-E[1]*yunitlength-origin[1])+" "+(D[0]*xunitlength+origin[0])+","+(height-D[1]*yunitlength-origin[1]));A.setAttribute("stroke-width",strokewidth);if(strokedasharray!=null){A.setAttribute("stroke-dasharray",strokedasharray)}A.setAttribute("stroke",stroke);A.setAttribute("fill",fill);A.setAttribute("stroke-opacity",strokeopacity);A.setAttribute("fill-opacity",fillopacity);if(marker=="dot"||marker=="arrowdot"){ASdot(E,markersize,markerstroke,markerfill);if(marker=="arrowdot"){arrowhead(E,D)}ASdot(D,markersize,markerstroke,markerfill)}else{if(marker=="arrow"){arrowhead(E,D)}}if(B==null&&endpoints!=""){B=endpoints}if(B!=null){if(B.indexOf("<-")!=-1){arrowhead(D,E)}if(B.indexOf("o-")!=-1){dot(E,"open")}if(B.indexOf("*-")!=-1){dot(E,"closed")}if(B.indexOf("->")!=-1){arrowhead(E,D)}if(B.indexOf("-o")!=-1){dot(D,"open")}if(B.indexOf("-*")!=-1){dot(D,"closed")}}}function path(F,H,G,E){if(G==null){G=""}var D,A,B;if(H!=null){D=doc.getElementById(H)}if(D==null){D=myCreateElementSVG("path");D.setAttribute("id",H);svgpicture.appendChild(D)}if(typeof F=="string"){A=F}else{A="M";A+=(F[0][0]*xunitlength+origin[0])+","+(height-F[0][1]*yunitlength-origin[1])+" "+G;for(B=1;B<F.length;B++){A+=(F[B][0]*xunitlength+origin[0])+","+(height-F[B][1]*yunitlength-origin[1])+" "}}D.setAttribute("d",A);D.setAttribute("stroke-width",strokewidth);if(strokedasharray!=null){D.setAttribute("stroke-dasharray",strokedasharray)}D.setAttribute("stroke",stroke);D.setAttribute("fill",fill);D.setAttribute("stroke-opacity",strokeopacity);D.setAttribute("fill-opacity",fillopacity);if(marker=="dot"||marker=="arrowdot"){for(B=0;B<F.length;B++){if(G!="C"&&G!="T"||B!=1&&B!=2){ASdot(F[B],markersize,markerstroke,markerfill)}}}if(E==null&&endpoints!=""){E=endpoints}if(E!=null){if(E.indexOf("<-")!=-1){arrowhead(F[1],F[0])}if(E.indexOf("o-")!=-1){dot(F[0],"open")}if(E.indexOf("*-")!=-1){dot(F[0],"closed")}if(E.indexOf("->")!=-1){arrowhead(F[F.length-2],F[F.length-1])}if(E.indexOf("-o")!=-1){dot(F[F.length-1],"open")}if(E.indexOf("-*")!=-1){dot(F[F.length-1],"closed")}}}function curve(B,D,A){path(B,D,"T",A)}function vector(B,A,D){line(B,A,D,"","->")}function circle(B,A,E){var D;if(E!=null){D=doc.getElementById(E)}if(D==null){D=myCreateElementSVG("circle");D.setAttribute("id",E);svgpicture.appendChild(D)}D.setAttribute("cx",B[0]*xunitlength+origin[0]);D.setAttribute("cy",height-B[1]*yunitlength-origin[1]);D.setAttribute("r",A*xunitlength);D.setAttribute("stroke-width",strokewidth);D.setAttribute("stroke",stroke);D.setAttribute("fill",fill);D.setAttribute("stroke-opacity",strokeopacity);D.setAttribute("fill-opacity",fillopacity)}function loop(A,B,D){if(B==null){B=[1,0]}path([A,[A[0]+B[0],A[1]+B[1]],[A[0]-B[1],A[1]+B[0]],A],D,"C");if(marker=="arrow"||marker=="arrowdot"){arrowhead([A[0]+Math.cos(1.4)*B[0]-Math.sin(1.4)*B[1],A[1]+Math.sin(1.4)*B[0]+Math.cos(1.4)*B[1]],A)}}function arc(H,D,A,G,B){var F,E;if(G!=null){F=doc.getElementById(G)}if(B==null){B=0}if(A==null){E=[D[0]-H[0],D[1]-H[1]];A=Math.sqrt(E[0]*E[0]+E[1]*E[1])}if(F==null){F=myCreateElementSVG("path");F.setAttribute("id",G);svgpicture.appendChild(F)}F.setAttribute("d","M"+(H[0]*xunitlength+origin[0])+","+(height-H[1]*yunitlength-origin[1])+" A"+A*xunitlength+","+A*yunitlength+" 0 "+B+",0 "+(D[0]*xunitlength+origin[0])+","+(height-D[1]*yunitlength-origin[1]));F.setAttribute("stroke-width",strokewidth);F.setAttribute("stroke",stroke);F.setAttribute("fill",fill);F.setAttribute("stroke-opacity",strokeopacity);F.setAttribute("fill-opacity",fillopacity);if(marker=="arrow"||marker=="arrowdot"){u=[(D[1]-H[1])/4,(H[0]-D[0])/4];E=[(D[0]-H[0])/2,(D[1]-H[1])/2];E=[H[0]+E[0]+u[0],H[1]+E[1]+u[1]]}else{E=[H[0],H[1]]}if(marker=="dot"||marker=="arrowdot"){ASdot(H,markersize,markerstroke,markerfill);if(marker=="arrowdot"){arrowhead(E,D)}ASdot(D,markersize,markerstroke,markerfill)}else{if(marker=="arrow"){arrowhead(E,D)}}}function sector(A,G,B,F){var E=G[0]-A[0],D=G[1]-A[1];arc(G,B,Math.sqrt(E*E+D*D),F+"arc");path([B,A,G],F+"path")}function ellipse(A,E,D,F){var B;if(F!=null){B=doc.getElementById(F)}if(B==null){B=myCreateElementSVG("ellipse");B.setAttribute("id",F);svgpicture.appendChild(B)}B.setAttribute("cx",A[0]*xunitlength+origin[0]);B.setAttribute("cy",height-A[1]*yunitlength-origin[1]);B.setAttribute("rx",E*xunitlength);B.setAttribute("ry",D*yunitlength);B.setAttribute("stroke-width",strokewidth);B.setAttribute("stroke",stroke);B.setAttribute("fill",fill);B.setAttribute("stroke-opacity",strokeopacity);B.setAttribute("fill-opacity",fillopacity)}function triangle(D,B,A,E){path([D,B,A,D],E)}function rect(F,D,G,E,B){var A;if(G!=null){A=doc.getElementById(G)}if(A==null){A=myCreateElementSVG("rect");A.setAttribute("id",G);svgpicture.appendChild(A)}A.setAttribute("x",F[0]*xunitlength+origin[0]);A.setAttribute("y",height-D[1]*yunitlength-origin[1]);A.setAttribute("width",(D[0]-F[0])*xunitlength);A.setAttribute("height",(D[1]-F[1])*yunitlength);if(E!=null){A.setAttribute("rx",E*xunitlength)}if(B!=null){A.setAttribute("ry",B*yunitlength)}A.setAttribute("stroke-width",strokewidth);A.setAttribute("stroke",stroke);A.setAttribute("fill",fill);A.setAttribute("stroke-opacity",strokeopacity);A.setAttribute("fill-opacity",fillopacity)}function text(B,K,H,A,I){var F,E,L=0,J=fontsize/3,G=K.toString();if(/(`|\$)/.test(G)){F=document.getElementById(svgpicture.getAttribute("name")+"mml");if(F!=null){if(A!=null){E=document.getElementById(A)}if(E==null){E=createElementXHTML("div");E.setAttribute("id",A);E.style.position="absolute";F.appendChild(E)}while(E.childNodes.length>0){E.removeChild(E.lastChild)}E.appendChild(document.createTextNode(G));if(/`/.test(G)){AMprocessNode(E)}else{LMprocessNode(E)}L=-E.offsetWidth/2;J=-E.offsetHeight/2;if(H!=null){if(/above/.test(H)){J=-E.offsetHeight}if(/below/.test(H)){J=0}if(/right/.test(H)){L=0}if(/left/.test(H)){L=-E.offsetWidth}}E.style.left=""+(B[0]*xunitlength+origin[0]+L)+"px";E.style.top=""+(height-B[1]*yunitlength-origin[1]+J)+"px"}return B}var D="middle";if(H!=null){if(/above/.test(H)){J=-fontsize/2}if(/below/.test(H)){J=fontsize-0}if(/right/.test(H)){D="start";L=fontsize/4}if(/left/.test(H)){D="end";L=-fontsize/4}}if(A!=null){E=doc.getElementById(A)}if(E==null){E=myCreateElementSVG("text");E.setAttribute("id",A);svgpicture.appendChild(E);E.appendChild(doc.createTextNode(G))}while(E.childNodes.length>1){E.removeChild(E.lastChild)}E.lastChild.nodeValue="\xA0"+G+"\xA0";E.setAttribute("x",B[0]*xunitlength+origin[0]+L);E.setAttribute("y",height-B[1]*yunitlength-origin[1]+J);E.setAttribute("font-style",(I!=null?I:(G.search(/^[a-zA-Z]$/)!=-1?"italic":fontstyle)));E.setAttribute("font-family",fontfamily);E.setAttribute("font-size",fontsize);E.setAttribute("font-weight",fontweight);E.setAttribute("text-anchor",D);if(fontstroke!="none"){E.setAttribute("stroke",fontstroke)}if(fontfill!="none"){E.setAttribute("fill",fontfill)}return B}function mtext(A,H,E,G,F){var D="middle";var J=0;var I=fontsize/3;if(E!=null){if(E.slice(0,5)=="above"){I=-fontsize/2}if(E.slice(0,5)=="below"){I=fontsize-0}if(E.slice(0,5)=="right"||E.slice(5,10)=="right"){D="start";J=fontsize/2}if(E.slice(0,4)=="left"||E.slice(5,9)=="left"){D="end";J=-fontsize/2}}var B=this;if(this.nodeName=="svg"){B=myCreateElementSVG("text");this.appendChild(B);B.appendChild(doc.createTextNode(H))}B.lastChild.nodeValue=H;B.setAttribute("x",A[0]+J);B.setAttribute("y",A[1]+I);B.setAttribute("font-style",(G!=null?G:fontstyle));B.setAttribute("font-family",fontfamily);B.setAttribute("font-size",(F!=null?F:fontsize));B.setAttribute("font-weight",fontweight);B.setAttribute("text-anchor",D);if(fontstroke!="none"){B.setAttribute("stroke",fontstroke)}if(fontfill!="none"){B.setAttribute("fill",fontfill)}}function image(B,F,A,D,G){var E;if(G!=null){E=doc.getElementById(G)}if(E==null){E=myCreateElementSVG("image");E.setAttribute("id",G);svgpicture.appendChild(E)}E.setAttribute("x",F[0]*xunitlength+origin[0]);E.setAttribute("y",height-F[1]*yunitlength-origin[1]);E.setAttribute("width",A);E.setAttribute("height",D);E.setAttribute("xlink:href",B)}function ASdot(B,A,D,F){if(D==null){D=stroke}if(F==null){F=fill}var E=myCreateElementSVG("circle");E.setAttribute("cx",B[0]*xunitlength+origin[0]);E.setAttribute("cy",height-B[1]*yunitlength-origin[1]);E.setAttribute("r",A);E.setAttribute("stroke-width",strokewidth);E.setAttribute("stroke",D);E.setAttribute("fill",F);svgpicture.appendChild(E)}function dot(B,F,D,I,H){var E;var A=B[0]*xunitlength+origin[0];var G=height-B[1]*yunitlength-origin[1];if(H!=null){E=doc.getElementById(H)}if(F=="+"||F=="-"||F=="|"){if(E==null){E=myCreateElementSVG("path");E.setAttribute("id",H);svgpicture.appendChild(E)}if(F=="+"){E.setAttribute("d"," M "+(A-ticklength)+" "+G+" L "+(A+ticklength)+" "+G+" M "+A+" "+(G-ticklength)+" L "+A+" "+(G+ticklength));E.setAttribute("stroke-width",0.5);E.setAttribute("stroke",axesstroke)}else{if(F=="-"){E.setAttribute("d"," M "+(A-ticklength)+" "+G+" L "+(A+ticklength)+" "+G)}else{E.setAttribute("d"," M "+A+" "+(G-ticklength)+" L "+A+" "+(G+ticklength))}E.setAttribute("stroke-width",strokewidth);E.setAttribute("stroke",stroke)}}else{if(E==null){E=myCreateElementSVG("circle");E.setAttribute("id",H);svgpicture.appendChild(E)}E.setAttribute("cx",A);E.setAttribute("cy",G);E.setAttribute("r",dotradius);E.setAttribute("stroke-width",strokewidth);E.setAttribute("stroke",stroke);E.setAttribute("fill",(F=="open"?"white":(F=="closed"?stroke:markerfill)))}if(D!=null){text(B,D,(I==null?"below":I),(H==null?H:H+"label"))}}point=dot;function arrowhead(H,G){var A;var D=[H[0]*xunitlength+origin[0],height-H[1]*yunitlength-origin[1]];var B=[G[0]*xunitlength+origin[0],height-G[1]*yunitlength-origin[1]];var E=[B[0]-D[0],B[1]-D[1]];var I=Math.sqrt(E[0]*E[0]+E[1]*E[1]);if(I>1e-8){E=[E[0]/I,E[1]/I];A=[-E[1],E[0]];var F=myCreateElementSVG("path");F.setAttribute("d","M "+(B[0]-15*E[0]-4*A[0])+" "+(B[1]-15*E[1]-4*A[1])+" L "+(B[0]-3*E[0])+" "+(B[1]-3*E[1])+" L "+(B[0]-15*E[0]+4*A[0])+" "+(B[1]-15*E[1]+4*A[1])+" z");F.setAttribute("stroke-width",markerstrokewidth);F.setAttribute("stroke",stroke);F.setAttribute("fill",stroke);F.setAttribute("stroke-opacity",strokeopacity);F.setAttribute("fill-opacity",fillopacity);svgpicture.appendChild(F)}}function chopZ(B){var A=B.indexOf(".");if(A==-1){return B}for(var D=B.length-1;D>A&&B.charAt(D)=="0";D--){}if(D==A){D--}return B.slice(0,D+1)}function grid(B,A){axes(B,A,null,B,A)}function noaxes(){if(!initialized){initPicture()}}function axes(dx,dy,labels,gdx,gdy){var x,y,ldx,ldy,lx,ly,lxp,lyp,pnode,st;if(!initialized){initPicture()}if(typeof dx=="string"){labels=dx;dx=null}if(typeof dy=="string"){gdx=dy;dy=null}if(xscl!=null){dx=xscl;gdx=xscl;labels=dx}if(yscl!=null){dy=yscl;gdy=yscl}if(xtick!=null){dx=xtick}if(ytick!=null){dy=ytick}dx=(dx==null?xunitlength:dx*xunitlength);dy=(dy==null?dx:dy*yunitlength);fontsize=Math.min(dx/2,dy/2,16);ticklength=fontsize/4;if(xgrid!=null){gdx=xgrid}if(ygrid!=null){gdy=ygrid}if(gdx!=null){gdx=(typeof gdx=="string"?dx:gdx*xunitlength);gdy=(gdy==null?dy:gdy*yunitlength);pnode=myCreateElementSVG("path");st="";for(x=origin[0];x<width;x=x+gdx){st+=" M"+x+",0 "+x+","+height}for(x=origin[0]-gdx;x>0;x=x-gdx){st+=" M"+x+",0 "+x+","+height}for(y=height-origin[1];y<height;y=y+gdy){st+=" M0,"+y+" "+width+","+y}for(y=height-origin[1]-gdy;y>0;y=y-gdy){st+=" M0,"+y+" "+width+","+y}pnode.setAttribute("d",st);pnode.setAttribute("stroke-width",0.5);pnode.setAttribute("stroke",gridstroke);pnode.setAttribute("fill",fill);svgpicture.appendChild(pnode)}pnode=myCreateElementSVG("path");st="M0,"+(height-origin[1])+" "+width+","+(height-origin[1])+" M"+origin[0]+",0 "+origin[0]+","+height;for(x=origin[0]+dx;x<width;x=x+dx){st+=" M"+x+","+(height-origin[1]+ticklength)+" "+x+","+(height-origin[1]-ticklength)}for(x=origin[0]-dx;x>0;x=x-dx){st+=" M"+x+","+(height-origin[1]+ticklength)+" "+x+","+(height-origin[1]-ticklength)}for(y=height-origin[1]+dy;y<height;y=y+dy){st+=" M"+(origin[0]+ticklength)+","+y+" "+(origin[0]-ticklength)+","+y}for(y=height-origin[1]-dy;y>0;y=y-dy){st+=" M"+(origin[0]+ticklength)+","+y+" "+(origin[0]-ticklength)+","+y}if(labels!=null){with(Math){ldx=dx/xunitlength;ldy=dy/yunitlength;lx=(xmin>0||xmax<0?xmin:0);ly=(ymin>0||ymax<0?ymin:0);lxp=(ly==0?"below":"above");lyp=(lx==0?"left":"right");var ddx=floor(1.1-log(ldx)/log(10))+1;var ddy=floor(1.1-log(ldy)/log(10))+1;for(x=ldx;x<=xmax;x=x+ldx){text([x,ly],chopZ(x.toFixed(ddx)),lxp)}for(x=-ldx;xmin<=x;x=x-ldx){text([x,ly],chopZ(x.toFixed(ddx)),lxp)}for(y=ldy;y<=ymax;y=y+ldy){text([lx,y],chopZ(y.toFixed(ddy)),lyp)}for(y=-ldy;ymin<=y;y=y-ldy){text([lx,y],chopZ(y.toFixed(ddy)),lyp)}}}fontsize=defaultfontsize;pnode.setAttribute("d",st);pnode.setAttribute("stroke-width",0.5);pnode.setAttribute("stroke",axesstroke);pnode.setAttribute("fill",fill);pnode.setAttribute("stroke-opacity",strokeopacity);pnode.setAttribute("fill-opacity",fillopacity);svgpicture.appendChild(pnode)}function mathjs(D){D=D.replace(/\s/g,"");if(D.indexOf("^-1")!=-1){D=D.replace(/sin\^-1/g,"arcsin");D=D.replace(/cos\^-1/g,"arccos");D=D.replace(/tan\^-1/g,"arctan");D=D.replace(/sec\^-1/g,"arcsec");D=D.replace(/csc\^-1/g,"arccsc");D=D.replace(/cot\^-1/g,"arccot");D=D.replace(/sinh\^-1/g,"arcsinh");D=D.replace(/cosh\^-1/g,"arccosh");D=D.replace(/tanh\^-1/g,"arctanh");D=D.replace(/sech\^-1/g,"arcsech");D=D.replace(/csch\^-1/g,"arccsch");D=D.replace(/coth\^-1/g,"arccoth")}D=D.replace(/^e$/g,"(Math.E)");D=D.replace(/^e([^a-zA-Z])/g,"(Math.E)$1");D=D.replace(/([^a-zA-Z])e/g,"$1(Math.E)");D=D.replace(/([0-9])([\(a-zA-Z])/g,"$1*$2");D=D.replace(/\)([\(0-9a-zA-Z])/g,")*$1");var E,B,A,F,G;while((E=D.indexOf("^"))!=-1){if(E==0){return"Error: missing argument"}B=E-1;F=D.charAt(B);if(F>="0"&&F<="9"){B--;while(B>=0&&(F=D.charAt(B))>="0"&&F<="9"){B--}if(F=="."){B--;while(B>=0&&(F=D.charAt(B))>="0"&&F<="9"){B--}}}else{if(F==")"){G=1;B--;while(B>=0&&G>0){F=D.charAt(B);if(F=="("){G--}else{if(F==")"){G++}}B--}while(B>=0&&(F=D.charAt(B))>="a"&&F<="z"||F>="A"&&F<="Z"){B--}}else{if(F>="a"&&F<="z"||F>="A"&&F<="Z"){B--;while(B>=0&&(F=D.charAt(B))>="a"&&F<="z"||F>="A"&&F<="Z"){B--}}else{return"Error: incorrect syntax in "+D+" at position "+B}}}if(E==D.length-1){return"Error: missing argument"}A=E+1;F=D.charAt(A);if(F>="0"&&F<="9"||F=="-"){A++;while(A<D.length&&(F=D.charAt(A))>="0"&&F<="9"){A++}if(F=="."){A++;while(A<D.length&&(F=D.charAt(A))>="0"&&F<="9"){A++}}}else{if(F=="("){G=1;A++;while(A<D.length&&G>0){F=D.charAt(A);if(F=="("){G++}else{if(F==")"){G--}}A++}}else{if(F>="a"&&F<="z"||F>="A"&&F<="Z"){A++;while(A<D.length&&(F=D.charAt(A))>="a"&&F<="z"||F>="A"&&F<="Z"){A++}}else{return"Error: incorrect syntax in "+D+" at position "+A}}}D=D.slice(0,B+1)+"Math.pow("+D.slice(B+1,E)+","+D.slice(E+1,A)+")"+D.slice(A)}while((E=D.indexOf("!"))!=-1){if(E==0){return"Error: missing argument"}B=E-1;F=D.charAt(B);if(F>="0"&&F<="9"){B--;while(B>=0&&(F=D.charAt(B))>="0"&&F<="9"){B--}if(F=="."){B--;while(B>=0&&(F=D.charAt(B))>="0"&&F<="9"){B--}}}else{if(F==")"){G=1;B--;while(B>=0&&G>0){F=D.charAt(B);if(F=="("){G--}else{if(F==")"){G++}}B--}while(B>=0&&(F=D.charAt(B))>="a"&&F<="z"||F>="A"&&F<="Z"){B--}}else{if(F>="a"&&F<="z"||F>="A"&&F<="Z"){B--;while(B>=0&&(F=D.charAt(B))>="a"&&F<="z"||F>="A"&&F<="Z"){B--}}else{return"Error: incorrect syntax in "+D+" at position "+B}}}D=D.slice(0,B+1)+"factorial("+D.slice(B+1,E)+")"+D.slice(E+1)}return D}function plot(fun,x_min,x_max,points,id,endpts){var pth=[];var f=function(x){return x},g=fun;var name=null;if(typeof fun=="string"){eval("g = function(x){ with(Math) return "+mathjs(fun)+" }")}else{if(typeof fun=="object"){eval("f = function(t){ with(Math) return "+mathjs(fun[0])+" }");eval("g = function(t){ with(Math) return "+mathjs(fun[1])+" }")}}if(typeof x_min=="string"){name=x_min;x_min=xmin}else{name=id}var min=(x_min==null?xmin:x_min);var max=(x_max==null?xmax:x_max);var inc=max-min-0.000001*(max-min);inc=(points==null?inc/200:inc/points);var gt;for(var t=min;t<=max;t+=inc){gt=g(t);if(!(isNaN(gt)||Math.abs(gt)=="Infinity")){pth[pth.length]=[f(t),gt]}}path(pth,name,null,endpts);return pth}function slopefield(fun,dx,dy){var g=fun;if(typeof fun=="string"){eval("g = function(x,y){ with(Math) return "+mathjs(fun)+" }")}var gxy,x,y,u,v,dz;if(dx==null){dx=1}if(dy==null){dy=1}dz=Math.sqrt(dx*dx+dy*dy)/6;var x_min=Math.ceil(xmin/dx);var y_min=Math.ceil(ymin/dy);for(x=x_min;x<=xmax;x+=dx){for(y=y_min;y<=ymax;y+=dy){gxy=g(x,y);if(!isNaN(gxy)){if(Math.abs(gxy)=="Infinity"){u=0;v=dz}else{u=dz/Math.sqrt(1+gxy*gxy);v=gxy*u}line([x-u,y-v],[x+u,y+v])}}}}function show_props(D){var A="";for(var B=0;B<D.childNodes.length;B++){A+=D.childNodes.item(B)+"\n"}return A}function displayCoord(B){if(showcoordinates){var E=B.target.parentNode;var A=E.childNodes;for(var D=0;D<A.length&&A.item(D).nodeName!="text";D++){}var F=A.item(D);F.mtext=mtext;F.mtext([E.getAttribute("width")-(-7),E.getAttribute("height")-7],"("+getX(B).toFixed(2)+", "+getY(B).toFixed(2)+")","left","","11")}}function removeCoord(B){var E=B.target.parentNode;var A=E.childNodes;for(var D=0;D<A.length&&A.item(D).nodeName!="text";D++){}var F=A.item(D);F.mtext=mtext;F.mtext([E.getAttribute("width")-0,E.getAttribute("height")-0],"","aboveleft","")}function initASCIIMathCalculators(li){var i;for(i=0;i<li.length;i++){li[i].innerHTML=calcstr;AMprocessNode(li[i])}li=document.getElementsByTagName("textarea");var st;for(i=0;i<li.length;i++){st=li[i].getAttribute("onkeyup");if(st!=null){eval(String(st).replace(/function anonymous\(\)/,""))}}}function calculate(inputId,outputId){var str=document.getElementById(inputId).value;var err="";var ind=str.lastIndexOf("\n");if(ind==str.length-1){str=str.slice(0,ind)}str=str.slice(str.lastIndexOf("\n")+1);try{var res=eval(mathjs(str))}catch(e){err="syntax incomplete"}if(!isNaN(res)&&res!="Infinity"){str="`"+str+" =` "+(Math.abs(res-Math.round(res*1000000)/1000000)<1e-15?Math.round(res*1000000)/1000000:res)+err}else{if(str!=""){str="`"+str+"` = undefined"}}var outnode=document.getElementById(outputId);var n=outnode.childNodes.length;for(var i=0;i<n;i++){outnode.removeChild(outnode.firstChild)}outnode.appendChild(document.createTextNode(str));AMprocessNode(outnode)}function append(A){document.getElementById("in").value+=A;calculate("in","out");document.getElementById("in").scrollTop=1000;document.getElementById("in").focus()}function clearTextArea(){document.getElementById("in").value="";calculate("in","out");document.getElementById("in").focus()}function ASpreprocess(){var E=document.getElementsByTagName("body")[0];pictures=E.getElementsByTagName("embed");var A=pictures.length;for(var D=A-1;D>=0;D--){picture=pictures[D];var B=picture.getAttribute("sscr");if(B!=""){if(noSVG){n=document.createElement("img");n.setAttribute("style",picture.getAttribute("style"));n.setAttribute("src",AScgiloc+"?sscr="+encodeURIComponent(picture.getAttribute("sscr")));pn=picture.parentNode;pn.replaceChild(n,picture)}else{com=parseShortScript(B);picture.setAttribute("script",com);picture.className="ASCIIsvg"}}}}function parseShortScript(sscript,gw,gh){var sa=sscript.split(",");if(gw&&gh){sa[9]=gw;sa[10]=gh;sscript=sa.join(",")}if(sa.length>10){commands="setBorder(5);";commands+="width="+sa[9]+"; height="+sa[10]+";";commands+="initPicture("+sa[0]+","+sa[1]+","+sa[2]+","+sa[3]+");";commands+="axes("+sa[4]+","+sa[5]+","+sa[6]+","+sa[7]+","+sa[8]+");";var inx=11;var eqnlist="Graphs: ";while(sa.length>inx+9){commands+='stroke="'+sa[inx+7]+'";';commands+='strokewidth="'+sa[inx+8]+'";';if(sa[inx+9]!=""){commands+='strokedasharray="'+sa[inx+9].replace(/\s+/g,",")+'";'}if(sa[inx]=="slope"){eqnlist+="dy/dx="+sa[inx+1]+"; ";commands+='slopefield("'+sa[inx+1]+'",'+sa[inx+2]+","+sa[inx+2]+");"}else{if(sa[inx]=="func"){eqnlist+="y="+sa[inx+1]+"; ";eqn='"'+sa[inx+1]+'"'}else{if(sa[inx]=="polar"){eqnlist+="r="+sa[inx+1]+"; ";eqn='["cos(t)*('+sa[inx+1]+')","sin(t)*('+sa[inx+1]+')"]'}else{if(sa[inx]=="param"){eqnlist+="[x,y]=["+sa[inx+1]+","+sa[inx+2]+"]; ";eqn='["'+sa[inx+1]+'","'+sa[inx+2]+'"]'}}}if(sa[inx+3]==0){ep="--"}else{if(sa[inx+3]==1){ep="<-"}else{if(sa[inx+3]==2){ep="o-"}else{if(sa[inx+3]==3){ep="*-"}}}}if(sa[inx+4]==0){ep+="--"}else{if(sa[inx+4]==1){ep+="->"}else{if(sa[inx+4]==2){ep+="-o"}else{if(sa[inx+4]==3){ep+="-*"}}}}if(typeof eval(sa[inx+5])=="number"){commands+="plot("+eqn+","+sa[inx+5]+","+sa[inx+6]+',null,null,"'+ep+'");'}else{commands+="plot("+eqn+',null,null,null,null,"'+ep+'");'}}inx+=10}return commands}}var calcstr='<table align="center">\n<tr><th>\nASCIIMath Scientific Calculator\n</th></tr>\n<tr><td>\nClick in the box to use your keyboard or use the buttons\n</td></tr>\n<tr><td>\n<textarea id="in" rows="3" cols="40" onkeyup="calculate(\'in\',\'out\')"></textarea></td></tr>\n<tr><td height="50">Result: &nbsp; &nbsp; <span id="out"></span></td></tr>\n</table>\n<table align="center" cellspacing="0" cellpadding="0">\n<tbody align="center">\n<tr>\n<td colspan="4">\n<button onclick="append(\'sin^-1(\')"><font size=2>`sin^-1`</font></button><button onclick="append(\'cos^-1(\')"><font size=2>`cos^-1`</font></button><button onclick="append(\'tan^-1(\')"><font size=2>`tan^-1`</font></button></td>\n<td><button onclick="clearTextArea()">&nbsp;`C`&nbsp;</button></td>\n\n</tr>\n<tr>\n<td><button onclick="append(\'pi\')">&nbsp;`pi` &nbsp;</button></td>\n<td><button onclick="append(\'sin(\')">&nbsp;`sin`</button></td>\n<td><button onclick="append(\'cos(\')">&nbsp;`cos`</button></td>\n<td><button onclick="append(\'tan(\')">&nbsp;`tan`</button></td>\n<td><button onclick="append(\'^\')">`x^y`</button></td>\n</tr>\n<tr>\n<td><button onclick="append(\'!\')">&nbsp; `!` &nbsp;</button></td>\n\n<td><button onclick="append(\'(\')"><font size=2>&nbsp;&nbsp;`(`&nbsp;&nbsp;</font></button></td>\n<td><button onclick="append(\')\')"><font size=2>&nbsp;&nbsp;`)`&nbsp;&nbsp;</font></button></td>\n<td><button onclick="append(\'sqrt(\')"><font size=2>`sqrt({::}^ )`</font></button></td>\n<td><button onclick="append(\'/\')">&nbsp;`-: `</button></td>\n</tr>\n<tr>\n<td><button onclick="append(\'log(\')">`log`</button></td>\n<td><button onclick="append(\'7\')">&nbsp; `7` &nbsp;</button></td>\n<td><button onclick="append(\'8\')">&nbsp; `8` &nbsp;</button></td>\n\n<td><button onclick="append(\'9\')">&nbsp; `9` &nbsp;</button></td>\n<td><button onclick="append(\'*\')">&nbsp;`times`&nbsp;</button></td>\n</tr>\n<tr>\n<td><button onclick="append(\'ln(\')">&nbsp;`ln`&nbsp;</button></td>\n<td><button onclick="append(\'4\')">&nbsp; `4` &nbsp;</button></td>\n<td><button onclick="append(\'5\')">&nbsp; `5` &nbsp;</button></td>\n<td><button onclick="append(\'6\')">&nbsp; `6` &nbsp;</button></td>\n\n<td><button onclick="append(\'-\')">&nbsp;`-{::}`&nbsp;</button></td>\n</tr>\n<tr>\n<td><button onclick="append(\'e\')">&nbsp; `e` &nbsp;</button></td>\n<td><button onclick="append(\'1\')">&nbsp;&nbsp;`1` &nbsp;</button></td>\n<td><button onclick="append(\'2\')">&nbsp; `2` &nbsp;</button></td>\n<td><button onclick="append(\'3\')">&nbsp; `3` &nbsp;</button></td>\n<td><button onclick="append(\'+\')">&nbsp;`+{::}`&nbsp;</button></td>\n\n</tr>\n<tr>\n<td> <!--button onclick="append(\'pi\')">&nbsp;`pi` &nbsp;</button--></td>\n<td><button onclick="append(\'0\')">&nbsp; `0` &nbsp;</button></td>\n<td><button onclick="append(\'.\')">&nbsp; `.` &nbsp;</button></td>\n<td><button onclick="append(\'\\n\')">&nbsp;`"ent"`</button></td>\n</tr>\n</tbody>\n</table>';function generic(){if(!init()){return}if(translateOnLoad){var B=document.getElementById("processasciimathinmoodle");if(B!=null){dsvglocation=B.className}if(B!=null||!checkforprocessasciimathinmoodle){translate();if(translateASCIIsvg){ASpreprocess()}if(!noSVG&&translateASCIIsvg){drawPictures()}}var A=getElementsByClass(document,"div","ASCIIMathCalculator");if(!noMathML&&A.length>0){initASCIIMathCalculators(A)}}}if(typeof window.addEventListener!="undefined"){window.addEventListener("load",generic,false)}else{if(typeof document.addEventListener!="undefined"){document.addEventListener("load",generic,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onload",generic)}else{if(typeof window.onload=="function"){var existing=onload;window.onload=function(){existing();generic()}}else{window.onload=generic}}}}Ext.ux.TabCloseMenu=function(){var A,D,B;this.init=function(F){A=F;A.on("contextmenu",E)};function E(H,G,I){if(!D){D=new Ext.menu.Menu([{id:A.id+"-close",text:Lars.close_tab,handler:function(){A.remove(B)}},{id:A.id+"-close-others",text:Lars.close_tab_others,handler:function(){A.items.each(function(K){if(K.closable&&K!=B){A.remove(K)}})}}])}B=G;var F=D.items;F.get(A.id+"-close").setDisabled(!G.closable);var J=true;A.items.each(function(){if(this!=G&&this.closable){J=false;return false}});F.get(A.id+"-close-others").setDisabled(J);D.showAt(I.getPoint())}};function copy(D){var B="flashcopier";if(!document.getElementById(B)){var E=document.createElement("div");E.id=B;document.body.appendChild(E);document.getElementById(B).innerHTML="";var A='<embed src="img/_clipboard.swf" FlashVars="clipboard='+escape(D)+'" width="0" height="0" type="application/x-shockwave-flash"></embed>';document.getElementById(B).innerHTML=A}}function copyToClipboard(D){if(window.clipboardData&&clipboardData.setData){clipboardData.setData("Text",D)}else{user_pref("signed.applets.codebase_principal_support",true);netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var E;Components.classes["@mozilla.org/widget/clipboard;[[[[1]]]]"].createInstance(Components.interfaces.nsIClipboard);if(!E){return}var B=Components.classes["@mozilla.org/widget/transferable;[[[[1]]]]"].createInstance(Components.interfaces.nsITransferable);if(!B){return}B.addDataFlavor("text/unicode");var G=new Object();var A=new Object();var G=Components.classes["@mozilla.org/supports-string;[[[[1]]]]"].createInstance(Components.interfaces.nsISupportsString);var H=meintext;G.data=H;B.setTransferData("text/unicode",G,H.length*[[[[2]]]]);var F=Components.interfaces.nsIClipboard;if(!E){return false}E.setData(B,null,F.kGlobalClipboard)}}function copy2(A){if(window.clipboardData){window.clipboardData.setData("Text",A)}else{var B=new SWFObject("img/_clipboard.swf","copy_contents","0","0","4");B.addVariable("clipboard",escape(A));B.write("flashcontent")}}function openCopyMessage(){document.getElementById("copyPopOver").style.display="block";document.getElementById("copyPopOver").style.top=mousey+"px";document.getElementById("copyPopOver").style.left=mousex+"px"}function closeCopyMessage(){document.getElementById("copyPopOver").style.display="none";return false}function copy3(A){if(window.clipboardData){window.clipboardData.setData("Text",A)}else{var D="flashcopier";if(!document.getElementById(D)){var E=document.createElement("div");E.id=D;document.body.appendChild(E)}document.getElementById(D).innerHTML="";var B='<embed src="img/_clipboard.swf" FlashVars="clipboard='+escape(A)+'" width="0" height="0" type="application/x-shockwave-flash"></embed>';document.getElementById(D).innerHTML=B}}(function(){var EV=Ext.lib.Event;Ext.ux.ManagedIFrame=function(){var args=Array.prototype.slice.call(arguments,0),el=Ext.get(args[0]),config=args[0];if(el&&el.dom&&el.dom.tagName=="IFRAME"){config=args[1]||{}}else{config=args[0]||args[1]||{};el=config.autoCreate?Ext.get(Ext.DomHelper.append(config.autoCreate.parent||document.body,Ext.apply({tag:"iframe",src:(Ext.isIE&&Ext.isSecure)?Ext.SSL_SECURE_URL:""},config.autoCreate))):null}if(!el||el.dom.tagName!="IFRAME"){return el}el.dom.name||(el.dom.name=el.dom.id);el.dom.mifId=el.dom.id;this.addEvents({focus:true,blur:true,unload:true,domready:true,documentloaded:true,exception:true,message:true});if(config.listeners){this.listeners=config.listeners;Ext.ux.ManagedIFrame.superclass.constructor.call(this)}Ext.apply(el,this);el.addClass("x-managed-iframe");if(config.style){el.applyStyles(config.style)}el._maskEl=el.parent(".x-managed-iframe-mask")||el.parent().addClass("x-managed-iframe-mask");Ext.apply(el,{disableMessaging:config.disableMessaging===true,loadMask:Ext.apply({msg:"Loading..",msgCls:"x-mask-loading",maskEl:el._maskEl,hideOnReady:true,disabled:!config.loadMask},config.loadMask),_eventName:Ext.isIE?"onreadystatechange":"onload",_windowContext:null,eventsFollowFrameLinks:typeof config.eventsFollowFrameLinks=="undefined"?true:config.eventsFollowFrameLinks});el.dom[el._eventName]=el.loadHandler.createDelegate(el);var um=el.updateManager=new Ext.UpdateManager(el,true);um.showLoadIndicator=config.showLoadIndicator||false;if(config.src){el.setSrc(config.src)}else{var content=config.html||config.content||false;if(content){el.update.defer(10,el,[content])}}return Ext.ux.ManagedIFrame.Manager.register(el)};var MIM=Ext.ux.ManagedIFrame.Manager=function(){var frames={};var readyHandler=function(e,target){try{var id=target?target.mifId:null,frame;if((frame=this.getFrameById(id||target.id))&&frame._frameAction){frame.loadHandler({type:"domready"})}}catch(rhEx){}};var implementation={shimCls:"x-frame-shim",register:function(frame){frame.manager=this;frames[frame.id]=frames[frame.dom.name]={ref:frame,elCache:{}};return frame},deRegister:function(frame){frame._unHook();delete frames[frame.id];delete frames[frame.dom.name]},hideShims:function(){if(!this.shimApplied){return}Ext.select("."+this.shimCls,true).removeClass(this.shimCls+"-on");this.shimApplied=false},showShims:function(){if(!this.shimApplied){this.shimApplied=true;Ext.select("."+this.shimCls,true).addClass(this.shimCls+"-on")}},getFrameById:function(id){return typeof id=="string"?(frames[id]?frames[id].ref||null:null):null},getFrameByName:function(name){return this.getFrameById(name)},getFrameHash:function(frame){return frame.id?frames[frame.id]:null},eventProxy:function(e){if(!e){return}e=Ext.EventObject.setEvent(e);var be=e.browserEvent||e;if(e.type=="unload"){this._unHook()}if(!be.eventPhase||(be.eventPhase==(be.AT_TARGET||2))){return this.fireEvent(e.type,e)}},_flyweights:{},destroy:function(){if(this._domreadySignature){Ext.EventManager.un.apply(Ext.EventManager,this._domreadySignature)}},removeNode:Ext.isIE?function(frame,n){frame=MIM.getFrameHash(frame);if(frame&&n&&n.tagName!="BODY"){d=frame.scratchDiv||(frame.scratchDiv=frame.getDocument().createElement("div"));d.appendChild(n);d.innerHTML=""}}:function(frame,n){if(n&&n.parentNode&&n.tagName!="BODY"){n.parentNode.removeChild(n)}}};if(document.addEventListener){Ext.EventManager.on.apply(Ext.EventManager,implementation._domreadySignature=[window,"DOMFrameContentLoaded",readyHandler,implementation])}Ext.EventManager.on(window,"beforeunload",implementation.destroy,implementation);return implementation}();MIM.showDragMask=MIM.showShims;MIM.hideDragMask=MIM.hideShims;MIM.El=function(frame,el,forceNew){var frameObj;frame=(frameObj=MIM.getFrameHash(frame))?frameObj.ref:null;if(!frame){return null}var elCache=frameObj.elCache||(frameObj.elCache={});var dom=frame.getDom(el);if(!dom){return null}var id=dom.id;if(forceNew!==true&&id&&elCache[id]){return elCache[id]}this.dom=dom;this.id=id||Ext.id(dom)};MIM.El.get=function(frame,el){var ex,elm,id,doc;if(!frame||!el){return null}var frameObj;frame=(frameObj=MIM.getFrameHash(frame))?frameObj.ref:null;if(!frame){return null}var elCache=frameObj.elCache||(frameObj.elCache={});if(!(doc=frame.getDocument())){return null}if(typeof el=="string"){if(!(elm=frame.getDom(el))){return null}if(ex=elCache[el]){ex.dom=elm}else{ex=elCache[el]=new MIM.El(frame,elm)}return ex}else{if(el.tagName){if(!(id=el.id)){id=Ext.id(el)}if(ex=elCache[id]){ex.dom=el}else{ex=elCache[id]=new MIM.El(frame,el)}return ex}else{if(el instanceof MIM.El){if(el!=frameObj.docEl){el.dom=frame.getDom(el.id)||el.dom;elCache[el.id]=el}return el}else{if(el.isComposite){return el}else{if(Ext.isArray(el)){return frame.select(el)}else{if(el==doc){if(!frameObj.docEl){var f=function(){};f.prototype=MIM.El.prototype;frameObj.docEl=new f();frameObj.docEl.dom=doc}return frameObj.docEl}}}}}}return null};Ext.apply(MIM.El.prototype,Ext.Element.prototype);Ext.extend(Ext.ux.ManagedIFrame,Ext.util.Observable,{src:null,resetUrl:Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:"about:blank",setSrc:function(url,discardUrl,callback){var src=url||this.src||this.resetUrl;this._windowContext=null;this._unHook();this._frameAction=this.frameInit=this._domReady=false;if(Ext.isOpera){this.reset()}this._callBack=callback||false;this.showMask();(function(){var s=typeof src=="function"?src()||"":src;try{this._frameAction=true;this.dom.src=s;this.frameInit=true;this.checkDOM()}catch(ex){this.fireEvent("exception",this,ex)}}).defer(100,this);if(discardUrl!==true){this.src=src}return this},reset:function(src,callback){this.dom.src=src||this.resetUrl;if(typeof callback=="function"){callback.defer(100)}return this},scriptRE:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,update:function(content,loadScripts,callback){loadScripts=loadScripts||this.getUpdateManager().loadScripts||false;content=Ext.DomHelper.markup(content||"");content=loadScripts===true?content:content.replace(this.scriptRE,"");var doc;if(doc=this.getDocument()){this._frameAction=!!content.length;this._windowContext=this.src=null;this._callBack=callback||false;this._unHook();this.showMask();doc.open();doc.write(content);doc.close();this.frameInit=true;if(this._frameAction){this.checkDOM()}else{this.hideMask(true);if(this._callBack){this._callBack()}}}else{this.hideMask(true);if(this._callBack){this._callBack()}}return this},disableMessaging:true,_XFrameMessaging:function(){var tagStack={"$":[]};var isEmpty=function(v,allowBlank){return v===null||v===undefined||(!allowBlank?v==="":false)};window.sendMessage=function(message,tag,origin){var MIF;if(MIF=arguments.callee.manager){if(message._fromHost){var fn,result;var compTag=message.tag||tag||null;var mstack=!isEmpty(compTag)?tagStack[compTag.toLowerCase()]||[]:tagStack["$"];for(var i=0,l=mstack.length;i<l;i++){if(fn=mstack[i]){result=fn.apply(fn.__scope,arguments)===false?false:result;if(fn.__single){mstack[i]=null}if(result===false){break}}}return result}else{message={type:isEmpty(tag)?"message":"message:"+tag.toLowerCase().replace(/^\s+|\s+$/g,""),data:message,domain:origin||document.domain,uri:document.documentURI,source:window,tag:isEmpty(tag)?null:tag.toLowerCase()};try{return MIF.disableMessaging!==true?MIF.fireEvent.call(MIF,message.type,MIF,message):null}catch(ex){}return null}}};window.onhostmessage=function(fn,scope,single,tag){if(typeof fn=="function"){if(!isEmpty(fn.__index)){throw"onhostmessage: duplicate handler definition"+(tag?" for tag:"+tag:"")}var k=isEmpty(tag)?"$":tag.toLowerCase();tagStack[k]||(tagStack[k]=[]);Ext.apply(fn,{__tag:k,__single:single||false,__scope:scope||window,__index:tagStack[k].length});tagStack[k].push(fn)}else{throw"onhostmessage: function required"}};window.unhostmessage=function(fn){if(typeof fn=="function"&&typeof fn.__index!="undefined"){var k=fn.__tag||"$";tagStack[k][fn.__index]=null}}},get:function(el){return MIM.El.get(this,el)},fly:function(el,named){named=named||"_global";el=this.getDom(el);if(!el){return null}if(!MIM._flyweights[named]){MIM._flyweights[named]=new Ext.Element.Flyweight()}MIM._flyweights[named].dom=el;return MIM._flyweights[named]},getDom:function(el){var d;if(!el||!(d=this.getDocument())){return null}return el.dom?el.dom:(typeof el=="string"?d.getElementById(el):el)},select:function(selector,unique){var d;return(d=this.getDocument())?Ext.Element.select(selector,unique,d):null},query:function(selector){var d;return(d=this.getDocument())?Ext.DomQuery.select(selector,d):null},getDoc:function(){return this.get(this.getDocument())},removeNode:function(node){MIM.removeNode(this,this.getDom(node))},_unHook:function(){var elcache,h=MIM.getFrameHash(this)||{};if(this._hooked&&h&&(elcache=h.elCache)){for(var id in elcache){var el=elcache[id];delete elcache[id];if(el.removeAllListeners){el.removeAllListeners()}}if(h.docEl){h.docEl.removeAllListeners();h.docEl=null;delete h.docEl}}this._hooked=this._domReady=this._domFired=false},_renderHook:function(){this._windowContext=this.CSS=null;this._hooked=false;try{if(this.writeScript('(function(){(window.hostMIF = parent.Ext.get("'+this.dom.id+'"))._windowContext='+(Ext.isIE?"window":"{eval:function(s){return eval(s);}}")+";})();")){this._frameProxy||(this._frameProxy=MIM.eventProxy.createDelegate(this));var w=this.getWindow();EV.doAdd(w,"focus",this._frameProxy);EV.doAdd(w,"blur",this._frameProxy);EV.doAdd(w,"unload",this._frameProxy);if(this.disableMessaging!==true){this.loadFunction({name:"XMessage",fn:this._XFrameMessaging},false,true);var sm;if(sm=w.sendMessage){sm.manager=this}}this.CSS=new CSSInterface(this.getDocument())}}catch(ex){}return this.domWritable()},sendMessage:function(message,tag,origin){var win;if(this.disableMessaging!==true&&(win=this.getWindow())){tag||(tag=message.tag||"");tag=tag.toLowerCase();message=Ext.applyIf(message.data?message:{data:message},{type:Ext.isEmpty(tag)?"message":"message:"+tag,domain:origin||document.domain,uri:document.documentURI,source:window,tag:tag||null,_fromHost:this});return win.sendMessage?win.sendMessage.call(null,message,tag,origin):null}return null},_windowContext:null,getDocument:function(){var win=this.getWindow(),doc=null;try{doc=(Ext.isIE&&win?win.document:null)||this.dom.contentDocument||window.frames[this.id].document||null}catch(gdEx){return false}return doc},getBody:function(){var d;return(d=this.getDocument())?d.body:null},getDocumentURI:function(){var URI,d;try{URI=this.src&&(d=this.getDocument())?d.location.href:null}catch(ex){}return URI||this.src},getWindow:function(){var dom=this.dom,win=null;try{win=dom.contentWindow||window.frames[dom.name]||null}catch(gwEx){}return win},print:function(){try{var win=this.getWindow();if(Ext.isIE){win.focus()}win.print()}catch(ex){throw"print exception: "+(ex.description||ex.message||ex)}},destroy:function(){this.removeAllListeners();if(this.dom){this.dom[this._eventName]=null;Ext.ux.ManagedIFrame.Manager.deRegister(this);this._windowContext=null;if(Ext.isIE&&this.dom.src){this.dom.src="javascript:false"}this._maskEl=null;this.remove()}if(this.loadMask){Ext.apply(this.loadMask,{masker:null,maskEl:null})}},domWritable:function(){return !!this._windowContext},execScript:function(block,useDOM){try{if(this.domWritable()){if(useDOM){this.writeScript(block)}else{return this._windowContext.eval(block)}}else{throw"execScript:non-secure context"}}catch(ex){this.fireEvent("exception",this,ex);return false}return true},writeScript:function(block,attributes){attributes=Ext.apply({},attributes||{},{type:"text/javascript",text:block});try{var head,script,doc=this.getDocument();if(doc&&typeof doc.getElementsByTagName!="undefined"){if(!(head=doc.getElementsByTagName("head")[0])){head=doc.createElement("head");doc.getElementsByTagName("html")[0].appendChild(head)}if(head&&(script=doc.createElement("script"))){for(var attrib in attributes){if(attributes.hasOwnProperty(attrib)&&attrib in script){script[attrib]=attributes[attrib]}}return !!head.appendChild(script)}}}catch(ex){this.fireEvent("exception",this,ex)}return false},loadFunction:function(fn,useDOM,invokeIt){var name=fn.name||fn;var fn=fn.fn||window[fn];this.execScript(name+"="+fn,useDOM);if(invokeIt){this.execScript(name+"()")}},showMask:function(msg,msgCls,forced){var lmask;if((lmask=this.loadMask)&&(!lmask.disabled||forced)){if(lmask._vis){return}lmask.masker||(lmask.masker=Ext.get(lmask.maskEl||this.dom.parentNode||this.wrap({tag:"div",style:{position:"relative"}})));lmask._vis=true;lmask.masker.mask.defer(lmask.delay||5,lmask.masker,[msg||lmask.msg,msgCls||lmask.msgCls])}},hideMask:function(forced){var tlm;if((tlm=this.loadMask)&&!tlm.disabled&&tlm.masker){if(!forced&&(tlm.hideOnReady!==true&&this._domReady)){return}tlm._vis=false;tlm.masker.unmask.defer(tlm.delay||5,tlm.masker)}},loadHandler:function(e,target){if(!this.frameInit||(!this._frameAction&&!this.eventsFollowFrameLinks)){return}target||(target={});var rstatus=(e&&typeof e.type!=="undefined"?e.type:this.dom.readyState);switch(rstatus){case"loading":case"interactive":break;case"domready":if(this._domReady){return}this._domReady=true;if(this._hooked=this._renderHook()){this._domFired=true;this.fireEvent("domready",this)}case"domfail":this._domReady=true;this.hideMask();break;case"load":case"complete":if(!this._domReady){this.loadHandler({type:"domready",id:this.id})}this.hideMask(true);if(this._frameAction||this.eventsFollowFrameLinks){this.fireEvent.defer(50,this,["documentloaded",this])}this._frameAction=this._frameInit=false;if(this.eventsFollowFrameLinks){this._domFired=this._domReady=false}if(this._callBack){this._callBack(this)}break;default:}this.frameState=rstatus},checkDOM:function(win){if(Ext.isOpera||Ext.isGecko||!this._frameAction){return}var n=0,win=win||this.getWindow(),manager=this,domReady=false,max=300;var poll=function(){try{var doc=manager.getDocument(),body=null;if(doc===false){throw"Document Access Denied"}if(!manager._domReady){domReady=!!(doc&&doc.getElementsByTagName);domReady=domReady&&(body=doc.getElementsByTagName("body")[0])&&!!body.innerHTML.length}}catch(ex){n=max}if(!manager._frameAction||manager._domReady){return}if((++n<max)&&!domReady){setTimeout(arguments.callee,10);return}manager.loadHandler({type:domReady?"domready":"domfail"})};setTimeout(poll,40)}});var styleCamelRe=/(-[a-z])/gi;var styleCamelFn=function(m,a){return a.charAt(1).toUpperCase()};var CSSInterface=function(hostDocument){var doc;if(hostDocument){doc=hostDocument;return{rules:null,createStyleSheet:function(cssText,id){var ss;if(!doc){return}var head=doc.getElementsByTagName("head")[0];var rules=doc.createElement("style");rules.setAttribute("type","text/css");if(id){rules.setAttribute("id",id)}if(Ext.isIE){head.appendChild(rules);ss=rules.styleSheet;ss.cssText=cssText}else{try{rules.appendChild(doc.createTextNode(cssText))}catch(e){rules.cssText=cssText}head.appendChild(rules);ss=rules.styleSheet?rules.styleSheet:(rules.sheet||doc.styleSheets[doc.styleSheets.length-1])}this.cacheStyleSheet(ss);return ss},removeStyleSheet:function(id){if(!doc){return}var existing=doc.getElementById(id);if(existing){existing.parentNode.removeChild(existing)}},swapStyleSheet:function(id,url){this.removeStyleSheet(id);if(!doc){return}var ss=doc.createElement("link");ss.setAttribute("rel","stylesheet");ss.setAttribute("type","text/css");ss.setAttribute("id",id);ss.setAttribute("href",url);doc.getElementsByTagName("head")[0].appendChild(ss)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(ss){if(this.rules){this.rules={}}try{var ssRules=ss.cssRules||ss.rules;for(var j=ssRules.length-1;j>=0;--j){this.rules[ssRules[j].selectorText]=ssRules[j]}}catch(e){}},getRules:function(refreshCache){if(this.rules==null||refreshCache){this.rules={};if(doc){var ds=doc.styleSheets;for(var i=0,len=ds.length;i<len;i++){try{this.cacheStyleSheet(ds[i])}catch(e){}}}}return this.rules},getRule:function(selector,refreshCache){var rs=this.getRules(refreshCache);if(!Ext.isArray(selector)){return rs[selector]}for(var i=0;i<selector.length;i++){if(rs[selector[i]]){return rs[selector[i]]}}return null},updateRule:function(selector,property,value){if(!Ext.isArray(selector)){var rule=this.getRule(selector);if(rule){rule.style[property.replace(styleCamelRe,styleCamelFn)]=value;return true}}else{for(var i=0;i<selector.length;i++){if(this.updateRule(selector[i],property,value)){return true}}}return false}}}};Ext.ux.ManagedIframePanel=Ext.extend(Ext.Panel,{defaultSrc:null,bodyStyle:{height:"100%",width:"100%",position:"relative"},frameStyle:{overflow:"auto"},frameConfig:null,hideMode:!Ext.isIE?"nosize":"display",shimCls:Ext.ux.ManagedIFrame.Manager.shimCls,shimUrl:null,loadMask:false,stateful:false,animCollapse:Ext.isIE&&Ext.enableFx,autoScroll:false,closable:true,ctype:"Ext.ux.ManagedIframePanel",showLoadIndicator:false,unsupportedText:"Inline frames are NOT enabled/supported by your browser.",initComponent:function(){this.bodyCfg||(this.bodyCfg={cls:"x-managed-iframe-mask",children:[Ext.apply({tag:"iframe",frameborder:0,cls:"x-managed-iframe",style:this.frameStyle||null,html:this.unsupportedText||null},this.frameConfig?this.frameConfig.autoCreate||{}:false,Ext.isIE&&Ext.isSecure?{src:Ext.SSL_SECURE_URL}:false),{tag:"img",src:this.shimUrl||Ext.BLANK_IMAGE_URL,cls:this.shimCls,galleryimg:"no"}]});this.autoScroll=false;this.items=null;if(this.stateful!==false){this.stateEvents||(this.stateEvents=["documentloaded"])}Ext.ux.ManagedIframePanel.superclass.initComponent.call(this);this.monitorResize||(this.monitorResize=this.fitToParent);this.addEvents({documentloaded:true,domready:true,message:true,exception:true});this.addListener=this.on},doLayout:function(){if(this.fitToParent&&!this.ownerCt){var pos=this.getPosition(),size=(Ext.get(this.fitToParent)||this.getEl().parent()).getViewSize();this.setSize(size.width-pos[0],size.height-pos[1])}Ext.ux.ManagedIframePanel.superclass.doLayout.apply(this,arguments)},beforeDestroy:function(){if(this.rendered){if(this.tools){for(var k in this.tools){Ext.destroy(this.tools[k])}}if(this.header&&this.headerAsText){var s;if(s=this.header.child("span")){s.remove()}this.header.update("")}Ext.each(["iframe","shim","header","topToolbar","bottomToolbar","footer","loadMask","body","bwrap"],function(elName){if(this[elName]){if(typeof this[elName].destroy=="function"){this[elName].destroy()}else{Ext.destroy(this[elName])}this[elName]=null;delete this[elName]}},this)}Ext.ux.ManagedIframePanel.superclass.beforeDestroy.call(this)},onDestroy:function(){Ext.Panel.superclass.onDestroy.call(this)},onRender:function(ct,position){Ext.ux.ManagedIframePanel.superclass.onRender.call(this,ct,position);if(this.iframe=this.body.child("iframe.x-managed-iframe")){this.iframe.ownerCt=this;var El=Ext.Element;var mode=El[this.hideMode.toUpperCase()]||"x-hide-nosize";Ext.each([this[this.collapseEl],this.floating?null:this.getActionEl(),this.iframe],function(el){if(el){el.setVisibilityMode(mode)}},this);if(this.loadMask){this.loadMask=Ext.apply({disabled:false,maskEl:this.body,hideOnReady:true},this.loadMask)}if(this.iframe=new Ext.ux.ManagedIFrame(this.iframe,{loadMask:this.loadMask,showLoadIndicator:this.showLoadIndicator,disableMessaging:this.disableMessaging,style:this.frameStyle})){this.loadMask=this.iframe.loadMask;this.relayEvents(this.iframe,["blur","focus","unload","documentloaded","domready","exception","message"].concat(this._msgTagHandlers||[]));delete this._msgTagHandlers}this.getUpdater().showLoadIndicator=this.showLoadIndicator||false;var ownerCt=this.ownerCt;while(ownerCt){ownerCt.on("afterlayout",function(container,layout){var MIM=Ext.ux.ManagedIFrame.Manager,st=false;Ext.each(["north","south","east","west"],function(region){var reg;if((reg=layout[region])&&reg.splitEl){st=true;if(!reg.split._splitTrapped){reg.split.on("beforeresize",MIM.showShims,MIM);reg.split._splitTrapped=true}}},this);if(st&&!this._splitTrapped){this.on("resize",MIM.hideShims,MIM);this._splitTrapped=true}},this,{single:true});ownerCt=ownerCt.ownerCt}}this.shim=Ext.get(this.body.child("."+this.shimCls))},toggleShim:function(){if(this.shim&&this.shimCls){this.shim.toggleClass(this.shimCls+"-on")}},afterRender:function(container){var html=this.html;delete this.html;Ext.ux.ManagedIframePanel.superclass.afterRender.call(this);if(this.iframe){if(this.defaultSrc){this.setSrc()}else{if(html){this.iframe.update(typeof html=="object"?Ext.DomHelper.markup(html):html)}}}},sendMessage:function(){if(this.iframe){this.iframe.sendMessage.apply(this.iframe,arguments)}},on:function(name){var tagRE=/^message\:/i,n=null;if(typeof name=="object"){for(var na in name){if(!this.filterOptRe.test(na)&&tagRE.test(na)){n||(n=[]);n.push(na.toLowerCase())}}}else{if(tagRE.test(name)){n=[name.toLowerCase()]}}if(this.getFrame()&&n){this.relayEvents(this.iframe,n)}else{this._msgTagHandlers||(this._msgTagHandlers=[]);if(n){this._msgTagHandlers=this._msgTagHandlers.concat(n)}}Ext.ux.ManagedIframePanel.superclass.on.apply(this,arguments)},setSrc:function(url,discardUrl,callback){url=url||this.defaultSrc||false;if(!url){return this}if(url.url){callback=url.callback||false;discardUrl=url.discardUrl||false;url=url.url||false}var src=url||(Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:"");if(this.rendered&&this.iframe){this.iframe.setSrc(src,discardUrl,callback)}return this},getState:function(){var URI=this.iframe?this.iframe.getDocumentURI()||null:null;return Ext.apply(Ext.ux.ManagedIframePanel.superclass.getState.call(this)||{},URI?{defaultSrc:typeof URI=="function"?URI():URI}:null)},getUpdater:function(){return this.rendered?(this.iframe||this.body).getUpdater():null},getFrame:function(){return this.rendered?this.iframe:null},getFrameWindow:function(){return this.rendered&&this.iframe?this.iframe.getWindow():null},getFrameDocument:function(){return this.rendered&&this.iframe?this.iframe.getDocument():null},getFrameDoc:function(){return this.rendered&&this.iframe?this.iframe.getDoc():null},getFrameBody:function(){return this.rendered&&this.iframe?this.iframe.getBody():null},load:function(loadCfg){var um;if(um=this.getUpdater()){if(loadCfg&&loadCfg.renderer){um.setRenderer(loadCfg.renderer);delete loadCfg.renderer}um.update.apply(um,arguments)}return this},doAutoLoad:function(){this.load(typeof this.autoLoad=="object"?this.autoLoad:{url:this.autoLoad})}});Ext.reg("iframepanel",Ext.ux.ManagedIframePanel);Ext.ux.ManagedIframePortlet=Ext.extend(Ext.ux.ManagedIframePanel,{anchor:"100%",frame:true,collapseEl:"bwrap",collapsible:true,draggable:true,cls:"x-portlet"});Ext.reg("iframeportlet",Ext.ux.ManagedIframePortlet);Ext.apply(Ext.Element.prototype,{setVisible:function(visible,animate){if(!animate||!Ext.lib.Anim){if(this.visibilityMode==Ext.Element.DISPLAY){this.setDisplayed(visible)}else{if(this.visibilityMode==Ext.Element.VISIBILITY){this.fixDisplay();this.dom.style.visibility=visible?"visible":"hidden"}else{this[visible?"removeClass":"addClass"](String(this.visibilityMode))}}}else{var dom=this.dom;var visMode=this.visibilityMode;if(visible){this.setOpacity(0.01);this.setVisible(true)}this.anim({opacity:{to:(visible?1:0)}},this.preanim(arguments,1),null,0.35,"easeIn",function(){if(!visible){if(visMode==Ext.Element.DISPLAY){dom.style.display="none"}else{if(visMode==Ext.Element.VISIBILITY){dom.style.visibility="hidden"}else{Ext.get(dom).addClass(String(visMode))}}Ext.get(dom).setOpacity(1)}})}return this},isVisible:function(deep){var vis=!(this.getStyle("visibility")=="hidden"||this.getStyle("display")=="none"||this.hasClass(this.visibilityMode));if(deep!==true||!vis){return vis}var p=this.dom.parentNode;while(p&&p.tagName.toLowerCase()!="body"){if(!Ext.fly(p,"_isVisible").isVisible()){return false}p=p.parentNode}return true}});Ext.onReady(function(){var CSS=Ext.util.CSS,rules=[];CSS.getRule(".x-managed-iframe")||(rules.push(".x-managed-iframe {height:100%;width:100%;overflow:auto;}"));CSS.getRule(".x-managed-iframe-mask")||(rules.push(".x-managed-iframe-mask{width:100%;height:100%;position:relative;}"));if(!CSS.getRule(".x-frame-shim")){rules.push(".x-frame-shim {z-index:8500;position:absolute;top:0px;left:0px;background:transparent!important;overflow:hidden;display:none;}");rules.push(".x-frame-shim-on{width:100%;height:100%;display:block;zoom:1;}");rules.push(".ext-ie6 .x-frame-shim{margin-left:5px;margin-top:3px;}")}CSS.getRule(".x-hide-nosize")||(rules.push(".x-hide-nosize,.x-hide-nosize *{height:0px!important;width:0px!important;border:none;}"));if(!!rules.length){CSS.createStyleSheet(rules.join(" "))}})})();(function(){Ext.namespace("Ext.ux");var D=false;Ext.ux.TinyMCE=Ext.extend(function(E){var F={tinymceSettings:{accessibility_focus:false}};Ext.apply(F,E);this.addEvents({editorcreated:true});Ext.ux.TinyMCE.superclass.constructor.call(this,F)},Ext.form.Field,{tinymceSettings:null,defaultAutoCreate:{tag:"div",style:{overflow:"hidden"},children:[{tag:"textarea"}]},width:200,height:200,initComponent:function(){this.tinymceSettings=this.tinymceSettings||{};Ext.ux.TinyMCE.initTinyMCE({language:this.tinymceSettings.language})},onRender:function(H,E){Ext.ux.TinyMCE.superclass.onRender.call(this,H,E);var G=this;var I=this.getEl();if(Ext.type(this.width)=="number"){I.setWidth(this.width);this.tinymceSettings.width=this.width}if(Ext.type(this.height)=="number"){I.setHeight(this.height);this.tinymceSettings.height=this.height}var F=I.child("textarea");this.textareaEl=F;if(this.name){F.set({name:this.name})}var J=F.id;this.ed=new tinymce.Editor(J,this.tinymceSettings);this.ed.onBeforeRenderUI.add(function(L,K){L.controlManager=new A(this,L)}.createDelegate(this));this.ed.onPostRender.add(function(L,K){L.windowManager=new B(this.ed)}.createDelegate(this));this.ed.onInit.add(function(){var L=Ext.get(Ext.DomQuery.selectNode("#"+this.ed.id+"_tbl td.mceToolbar"));var K=L.select("> table.mceToolbar");Ext.DomHelper.append(L,{tag:"div",style:{overflow:"hidden"}},true).appendChild(K)}.createDelegate(this));this.ed.render();tinyMCE.add(this.ed);this.fireEvent("editorcreated")},getName:function(){return this.rendered&&this.textareaEl.dom.name?this.textareaEl.dom.name:(this.name||"")},initValue:function(){if(this.value!==undefined){this.setValue(this.value)}else{var E=this.getEl().child("textarea",true);if(E.value.length>0){this.setValue(E.value)}}},onDestroy:function(){if(this.ed){tinyMCE.remove(this.ed)}Ext.ux.TinyMCE.superclass.onDestroy.call(this)},getValue:function(){if(!this.rendered||!this.ed.initialized){return this.value}var E=this.ed.getContent();if(E===this.emptyText||E===undefined){E=""}return E},setValue:function(E){this.value=E;if(this.rendered){this.withEd(function(){this.ed.undoManager.clear();this.ed.setContent(E===null||E===undefined?"":E);this.ed.startContent=this.ed.getContent({format:"raw"});this.validate()})}},isDirty:function(){if(this.disabled||!this.rendered){return false}return this.ed.isDirty()},syncValue:function(){if(this.rendered&&this.ed.initialized){this.ed.save()}},getEd:function(){return this.ed},onResize:function(F,E){if(this.rendered){this.withEd(function(){if(Ext.type(F)!="number"){F=this.el.getWidth()}if(Ext.type(E)!="number"){E=this.el.getHeight()}this.ed.theme.resizeTo(F,E)})}},focus:function(F,E){Ext.ux.TinyMCE.superclass.focus.call(this,F,E)},onFocus:function(){if(!this.hasFocus){this.hasFocus=true;this.startValue=this.getValue();this.withEd(function(){this.ed.focus();this.fireEvent("focus",this)})}},withEd:function(E){if(!this.ed){this.on("editorcreated",function(){this.withEd(E)},this)}else{if(this.ed.initialized){E.call(this)}else{this.ed.onInit.add(function(){E.defer(10,this)}.createDelegate(this))}}}});Ext.apply(Ext.ux.TinyMCE,{tinymcePlugins:"safari,pagebreak,style,layer,table,advhr,advimage,advlink,emotions,iespell,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,noneditable,visualchars,nonbreaking,xhtmlxtras,template",initTinyMCE:function(F){if(!D){var E={mode:"none",plugins:Ext.ux.TinyMCE.tinymcePlugins,theme:"advanced"};Ext.apply(E,F);tinyMCE.init(E);D=true}}});Ext.ComponentMgr.registerType("tinymce",Ext.ux.TinyMCE);var B=Ext.extend(function(E){B.superclass.constructor.call(this,E)},tinymce.WindowManager,{alert:function(F,E,G){Ext.MessageBox.alert("",F,function(){E.call(this)},G)},confirm:function(F,E,G){Ext.MessageBox.confirm("",F,function(H){E.call(this,H=="yes")},G)},open:function(E,G){E=E||{};G=G||{};if(!E.type){this.bookmark=this.editor.selection.getBookmark("simple")}E.width=parseInt(E.width||320);E.height=parseInt(E.height||240)+(tinymce.isIE?8:0);E.min_width=parseInt(E.min_width||150);E.min_height=parseInt(E.min_height||100);E.max_width=parseInt(E.max_width||2000);E.max_height=parseInt(E.max_height||2000);E.movable=E.resizable=true;G.mce_width=E.width;G.mce_height=E.height;G.mce_inline=true;this.features=E;this.params=G;var F=new Ext.Window({title:E.name,width:E.width,height:E.height,minWidth:E.min_width,minHeight:E.min_height,resizable:true,maximizable:E.maximizable==true,minimizable:E.minimizable==true,modal:true,layout:"fit",items:[{xtype:"iframepanel",defaultSrc:E.url||E.file}]});G.mce_window_id=F.getId();F.show(null,function(){if(E.left&&E.top){F.setPagePosition(E.left,E.top)}var H=F.getPosition();E.left=H[0];E.top=H[1];this.onOpen.dispatch(this,E,G)},this);F.setZIndex(89999);return F},close:function(F){if(!F.tinyMCEPopup||!F.tinyMCEPopup.id){B.superclass.close.call(this,F);return}var E=Ext.getCmp(F.tinyMCEPopup.id);if(E){this.onClose.dispatch(this);E.close()}},setTitle:function(G,F){if(!G.tinyMCEPopup||!G.tinyMCEPopup.id){B.superclass.setTitle.call(this,G,F);return}var E=Ext.getCmp(G.tinyMCEPopup.id);if(E){E.setTitle(F)}},resizeBy:function(F,H,I){var E=Ext.getCmp(I);if(E){var G=E.getSize();E.setSize(G.width+F,G.height+H)}},focus:function(F){var E=Ext.getCmp(F);if(E){E.setActive(true)}}});var A=Ext.extend(function(G,E,F){this.control=G;A.superclass.constructor.call(this,E,F)},tinymce.ControlManager,{control:null,createDropMenu:function(H,F){var E=A.superclass.createDropMenu.call(this,H,F);var G=E.showMenu;E.showMenu=function(I,K,J){G.call(this,I,K,J);Ext.fly("menu_"+this.id).setStyle("z-index",200001)};return E},createColorSplitButton:function(H,F){var E=A.superclass.createColorSplitButton.call(this,H,F);var G=E.showMenu;E.showMenu=function(I,K,J){G.call(this,I,K,J);Ext.fly(this.id+"_menu").setStyle("z-index",200001)};return E}})}());(function(){Ext.ux.Media=function(G){Ext.apply(this,G||{});this.toString=this.mediaMarkup;this.initMedia()};var B=Ext.ux.Media;B.mediaTypes={PDF:Ext.apply({tag:"object",cls:"x-media x-media-pdf",type:"application/pdf",data:"@url",autoSize:true,params:{src:"@url"}},Ext.isIE?{classid:"CLSID:CA8A9780-280D-11CF-A24D-444553540000"}:false),PDFFRAME:{tag:"iframe",cls:"x-media x-media-pdf-frame",frameBorder:0,style:{overflow:"none",width:"100%",height:"100%"},src:"@url",autoSize:true},WMV:Ext.apply({tag:"object",cls:"x-media x-media-wmv",type:"application/x-mplayer2",data:"@url",autoSize:false,params:{filename:"@url",displaysize:0,autostart:"@start",showControls:"@controls",showStatusBar:"@status",showaudiocontrols:true,stretchToFit:true,Volume:"@volume",PlayCount:1}},Ext.isIE?{classid:"CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95",codebase:"http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701",type:"application/x-oleobject"}:{src:"@url"}),SWF:Ext.apply({tag:"object",cls:"x-media x-media-swf",type:"application/x-shockwave-flash",scripting:"sameDomain",standby:"Loading..",loop:true,start:false,unsupportedText:{cn:["The Adobe Flash Player is required.",{tag:"br"},{tag:"a",cn:[{tag:"img",src:"http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif"}],href:"http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash",target:"_flash"}]},params:{movie:"@url",menu:"@controls",play:"@start",quality:"high",allowscriptaccess:"@scripting",bgcolor:"#FFFFFF",wmode:"opaque",loop:"@loop"}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"}:{data:"@url"}),JWP:Ext.apply({tag:"object",cls:"x-media x-media-swf x-media-flv",type:"application/x-shockwave-flash",data:"@url",loop:false,start:false,params:{movie:"@url",flashVars:{autostart:"@start",repeat:"@loop",height:"@height",width:"@width",id:"@id"}}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0"}:false),QT:Ext.apply({tag:"object",cls:"x-media x-media-quicktime",type:"video/quicktime",style:{position:"relative","z-index":1,behavior:"url(#qt_event_source)"},scale:"aspect",unsupportedText:'<a href="http://www.apple.com/quicktime/download/">Get QuickTime</a>',scripting:true,volume:"50%",data:"@url",params:{src:Ext.isIE?"@url":null,href:"http://quicktime.com",target:"_blank",autoplay:"@start",targetcache:true,cache:true,wmode:"transparent",controller:"@controls",enablejavascript:"@scripting",loop:"@loop",scale:"@scale",volume:"@volume",QTSRC:"@url"}},Ext.isIE?{classid:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",codebase:"http://www.apple.com/qtactivex/qtplugin.cab#version=7,2,1,0"}:{PLUGINSPAGE:"http://www.apple.com/quicktime/download/"}),QTEVENTS:{tag:"object",id:"qt_event_source",cls:"x-media x-media-qtevents",type:"video/quicktime",params:{},classid:"clsid:CB927D12-4FF7-4a9e-A169-56E4B8A75598",codebase:"http://www.apple.com/qtactivex/qtplugin.cab#version=7,2,1,0"},WPMP3:Ext.apply({tag:"object",cls:"x-media x-media-audio x-media-wordpress",type:"application/x-shockwave-flash",data:"@url",start:true,loop:false,params:{movie:"@url",width:"@width",flashVars:{autostart:"@start",controller:"@controls",enablejavascript:"@scripting",loop:"@loop",scale:"@scale",initialvolume:"@volume",width:"@width",encode:"no",soundFile:""}}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"}:false),REAL:Ext.apply({tag:"object",cls:"x-media x-media-real",type:"audio/x-pn-realaudio",data:"@url",controls:"imagewindow,all",start:false,standby:"Loading Real Media Player components...",params:{src:"@url",autostart:"@start",center:false,maintainaspect:true,controller:"@controls",controls:"@controls",volume:"@volume",loop:"@loop",console:"_master",backgroundcolor:"#000000"}},Ext.isIE?{classid:"clsid:CFCDAA03-8BE4-11CF-B84B-0020AFBBCCFA"}:false),SVG:{tag:"object",cls:"x-media x-media-img x-media-svg",type:"image/svg+xml",data:"@url",params:{src:"@url"}},GIF:{tag:"img",cls:"x-media x-media-img x-media-gif",src:"@url"},JPEG:{tag:"img",cls:"x-media x-media-img x-media-jpeg",src:"@url"},JP2:{tag:"object",cls:"x-media x-media-img x-media-jp2",type:"image/jpeg2000-image",data:"@url"},PNG:{tag:"img",cls:"x-media x-media-img x-media-png",src:"@url"},HTM:{tag:"iframe",cls:"x-media x-media-html",frameBorder:0,style:{overflow:"auto",width:"100%",height:"100%"},src:"@url"},TXT:{tag:"object",cls:"x-media x-media-text",type:"text/plain",style:{overflow:"auto",width:"100%",height:"100%"},data:"@url"},RTF:{tag:"object",cls:"x-media x-media-rtf",type:"application/rtf",style:{overflow:"auto",width:"100%",height:"100%"},data:"@url"},JS:{tag:"object",cls:"x-media x-media-js",type:"text/javascript",style:{overflow:"auto",width:"100%",height:"100%"},data:"@url"},CSS:{tag:"object",cls:"x-media x-media-css",type:"text/css",style:{overflow:"auto",width:"100%",height:"100%"},data:"@url"},SILVERLIGHT:{tag:"object",cls:"x-media x-media-silverlight",type:"application/ag-plugin",data:"@url",params:{MinRuntimeVersion:"1.0",source:"@url"}},SILVERLIGHT2:{tag:"object",cls:"x-media x-media-silverlight",type:"application/x-silverlight-2-b2",data:"data:application/x-silverlight-2-b2,",params:{MinRuntimeVersion:"2.0"},unsupportedText:'<a href="http://go2.microsoft.com/fwlink/?LinkID=114576&v=2.0"><img style="border-width: 0pt;" alt="Get Microsoft Silverlight" src="http://go2.microsoft.com/fwlink/?LinkID=108181"/></a>'},DATAVIEW:{tag:"object",cls:"x-media x-media-dataview",classid:"CLSID:0ECD9B64-23AA-11D0-B351-00A0C9055D8E",type:"application/x-oleobject",unsupportedText:"MS Dataview Control is not installed"},"OWC:XLS":Ext.apply({tag:"object",cls:"x-media x-media-xls",type:"application/vnd.ms-excel",controltype:"excel",params:{DataType:"CSVURL",CSVURL:"@url",DisplayTitleBar:true,AutoFit:true}},Ext.isIE?{codebase:"file:msowc.cab",classid:"CLSID:0002E510-0000-0000-C000-000000000046"}:false),"OWC:CHART":Ext.apply({tag:"object",cls:"x-media x-media-xls",type:"application/vnd.ms-excel",data:"@url",params:{DataType:"CSVURL"}},Ext.isIE?{classid:"CLSID:0002E500-0000-0000-C000-000000000046"}:false),OFFICE:{tag:"object",cls:"x-media x-media-office",type:"application/x-msoffice",data:"@url"},POWERPOINT:Ext.apply({tag:"object",cls:"x-media x-media-ppt",type:"application/vnd.ms-powerpoint",file:"@url"},Ext.isIE?{classid:"CLSID:EFBD14F0-6BFB-11CF-9177-00805F8813FF"}:false),XML:{tag:"iframe",cls:"x-media x-media-xml",style:{overflow:"auto"},src:"@url"},VLC:{tag:"object",cls:"x-media x-media-vlc",type:"application/x-vlc-plugin",version:"VideoLAN.VLCPlugin.2",pluginspage:"http://www.videolan.org",data:"@url"},RDP:Ext.apply({tag:"object",cls:"x-media x-media-rdp",type:"application/rds",unsupportedText:'Remote Desktop Web Connection ActiveX control is required. <a target="_msd" href="http://go.microsoft.com/fwlink/?linkid=44333">Download it here</a>.',params:{Server:"@url",Fullscreen:false,StartConnected:false,DesktopWidth:"@width",DesktopHeight:"@height"}},Ext.isIE?{classid:"CLSID:9059f30f-4eb1-4bd2-9fdc-36f43a218f4a",CODEBASE:"msrdp.cab#version=5,2,3790,0"}:false)};var D=/4$/i;var E=function(I,G,H){if(I&&typeof I.readyState!="undefined"){(H||D).test(I.readyState)?G({type:"load"}):E.defer(10,null,[I,G])}};if(parseFloat(Ext.version)<2.1){throw"Ext.ux.Media and sub-classes are not License-Compatible with your Ext release."}Ext.extend(B,Object,{mediaObject:null,mediaCfg:null,mediaVersion:null,requiredVersion:null,unsupportedText:null,init:function(G){if(G&&this.getEl===undefined){Ext.applyIf(G,this)}},initMedia:function(){if(!Ext.isIE&&this.initialConfig){new B.VisibilityFix({mode:this.visibilityCls,hideMode:this.hideMode,elements:this.visModeTargets||null}).init(this)}if(this.events){this.addEvents("mediarender","mediaload")}},getMediaType:function(G){return B.mediaTypes[G]},assert:function(G,H){G=typeof G==="function"?G.call(G.scope||null):G;return Ext.value(G,H)},mediaMarkup:function(G,I,S,N){G=G||this.mediaCfg;if(!G){return""}var K=Ext.apply({url:false,autoSize:false},G);K.url=this.assert(K.url,false);if(K.mediaType){var Q,H,L=Ext.Element;var J=Ext.apply({},this.getMediaType(this.assert(K.mediaType,false))||false);var M=Ext.apply(J.params||{},K.params||{});for(var R in M){if(M.hasOwnProperty(R)){K.children||(K.children=[]);H=this.assert(M[R],null);if(H!==null){K.children.push({tag:"param",name:R,value:typeof H==="object"?Ext.urlEncode(H):encodeURI(H)})}}}delete J.params;var O=this.assert(K.unsupportedText||this.unsupportedText||J.unsupportedText,null);if(O){K.children||(K.children=[]);K.children.push(O)}if(K.style&&typeof K.style!="object"){throw"Style must be JSON formatted"}K.style=this.assert(Ext.apply(J.style||{},K.style||{}),{});delete J.style;K.height=this.assert(S||K.height||J.height||K.style.height,null);K.width=this.assert(I||K.width||J.width||K.style.width,null);K=Ext.apply({tag:"object"},K,J);if(K.height||K.autoSize){Ext.apply(K.style,{height:L.addUnits(K.autoSize?"100%":K.height,L.prototype.defaultUnit)})}if(K.width||K.autoSize){Ext.apply(K.style,{width:L.addUnits(K.autoSize?"100%":K.width,L.prototype.defaultUnit)})}K.id||(K.id=Ext.id());K.name=this.assert(K.name,K.id);var P={url:K.url||"",height:(/%$/.test(K.height))?K.height:parseInt(K.height,10)||100,width:(/%$/.test(K.width))?K.width:parseInt(K.width,10)||100,scripting:this.assert(K.scripting,false),controls:this.assert(K.controls,false),scale:this.assert(K.scale,1),status:this.assert(K.status,false),start:this.assert(K.start,false),loop:this.assert(K.loop,false),volume:this.assert(K.volume,20),id:K.id};delete K.url;delete K.mediaType;delete K.controls;delete K.status;delete K.start;delete K.loop;delete K.scale;delete K.scripting;delete K.volume;delete K.autoSize;delete K.params;delete K.unsupportedText;delete K.renderOnResize;delete K.listeners;delete K.height;delete K.width;return Ext.DomHelper.markup(K).replace(/(%40url|@url)/g,P.url).replace(/(%40start|@start)/g,P.start+"").replace(/(%40controls|@controls)/g,P.controls+"").replace(/(%40scale|@scale)/g,P.scale+"").replace(/(%40status|@status)/g,P.status+"").replace(/(%40id|@id)/g,P.id+"").replace(/(%40loop|@loop)/g,P.loop+"").replace(/(%40volume|@volume)/g,P.volume+"").replace(/(%40scripting|@scripting)/g,P.scripting+"").replace(/(%40width|@width)/g,P.width+"").replace(/(%40height|@height)/g,P.height+"")}else{var O=this.assert(K.unsupportedText||this.unsupportedText||J.unsupportedText,null);O=O?Ext.DomHelper.markup(O):null;return String.format(O||"Media Configuration/Plugin Error"," "," ")}},setMask:function(G){if(this.mediaMask&&!this.mediaMask.enable){G=Ext.get(G);if(this.mediaMask=new Ext.ux.IntelliMask(G||this[this.mediaEl],Ext.apply({fixElementForMedia:true},this.mediaMask))){this.mediaMask.el.addClass("x-media-mask")}}},renderMedia:function(M,I,L,G,J){if(!Ext.isReady){Ext.onReady(this.renderMedia.createDelegate(this,Array.prototype.slice.call(arguments,0)));return}var K=(this.mediaCfg=M||this.mediaCfg);I=Ext.get(I||this.lastCt||(this.mediaObject?this.mediaObject.dom.parentNode:null));this.onBeforeMedia.call(this,K,I,L,G,J);if(I){this.lastCt=I;var H;if(K&&(H=this.mediaMarkup(K,G,J,I))){this.setMask(I);this.clearMedia();I.update(H);if(this.mediaMask&&this.autoMask){this.mediaMask.show()}}}this.onAfterMedia(I)},clearMedia:function(){if(Ext.isReady&&this.mediaObject){try{this.mediaObject.removeAllListeners();this.mediaObject.remove()}catch(G){}}this.mediaObject=null},onBeforeMedia:function(K,I,J){var G=K||this.mediaCfg,H;if(G&&(H=this.getMediaType(G.mediaType))){G.autoSize=G.autoSize||H.autoSize===true;if(G.autoSize&&(I=Ext.isReady?Ext.get(I||this.lastCt):null)){G.height=I.getHeight(true)||this.assert(G.height,"auto");G.width=I.getWidth(true)||this.assert(G.width,"auto")}}},onMediaLoad:function(G){if(G&&G.type=="load"){this.fireEvent("mediaload",this,this.mediaObject);if(this.mediaMask&&this.autoMask){this.mediaMask.hide()}}},onAfterMedia:function(H){if(this.mediaCfg&&H&&(this.mediaObject=H.child(".x-media"))){this.mediaObject.ownerCt=this;if(this.mediaCfg.tag!=="object"){this.mediaObject.on({load:this.onMediaLoad,scope:this,single:true})}E(this.mediaObject.dom,this.onMediaLoad.createDelegate(this));var G;if(G=this.mediaCfg.listeners||null){this.mediaObject.on(G)}this.fireEvent("mediarender",this,this.mediaObject)}},getInterface:function(){return this.mediaObject?this.mediaObject.dom||null:null},detectVersion:Ext.emptyFn,autoMask:Ext.isIE});var F=function(){};Ext.extend(F,Object,{hideMode:!Ext.isIE?"nosize":"display",animCollapse:false,visibilityCls:!Ext.isIE?"x-hide-nosize":null,autoScroll:true,shadow:false,bodyStyle:{position:"relative"},resizeMedia:function(H,G,I){var J=this.mediaCfg;if(J&&this.boxReady){if(arguments.length>3&&(!this.mediaObject||J.renderOnResize)){this.refreshMedia(this[this.mediaEl])}}},onAfterRender:function(G){if(this.mediaCfg.renderOnResize){this.on("resize",this.resizeMedia,this)}else{this.renderMedia(this.mediaCfg,this[this.mediaEl]||this.getEl())}},doAutoLoad:Ext.emptyFn,refreshMedia:function(G){if(this.mediaCfg){this.renderMedia(null,G)}},mediaMask:false});Ext.ux.MediaComponent=Ext.extend(Ext.BoxComponent,{ctype:"Ext.ux.MediaComponent",autoEl:"div",cls:"x-media-comp",mediaEl:"el",getId:function(){return this.id||(this.id="media-comp"+(++Ext.Component.AUTO_ID))},initComponent:function(){this.visModeTargets=[this.actionMode];this.initMedia();Ext.ux.MediaComponent.superclass.initComponent.apply(this,arguments)},onRender:function(){Ext.ux.MediaComponent.superclass.onRender.apply(this,arguments);this.onAfterRender()},afterRender:function(G){this.setAutoScroll();Ext.ux.MediaComponent.superclass.afterRender.apply(this,arguments)},beforeDestroy:function(){this.clearMedia();Ext.destroy(this.mediaMask,this.loadMask);Ext.ux.MediaComponent.superclass.beforeDestroy.call(this)},setAutoScroll:function(){if(this.rendered&&this.autoScroll){this.getEl().setOverflow("auto")}}});Ext.apply(Ext.ux.MediaComponent.prototype,Ext.ux.Media.prototype);Ext.apply(Ext.ux.MediaComponent.prototype,F.prototype);Ext.reg("media",Ext.ux.MediaComponent);B.Panel=Ext.extend(Ext.Panel,{ctype:"Ext.ux.Media.Panel",cls:"x-media-panel",mediaEl:"body",initComponent:function(){this.visModeTargets=[this.collapseEl,this.floating?null:this.actionMode];this.initMedia();this.html=this.contentEl=this.items=null;B.Panel.superclass.initComponent.call(this)},onRender:function(){B.Panel.superclass.onRender.apply(this,arguments);this.onAfterRender()},beforeDestroy:function(){this.clearMedia();B.Panel.superclass.beforeDestroy.call(this)}});Ext.apply(B.Panel.prototype,B.prototype);Ext.apply(B.Panel.prototype,F.prototype);Ext.reg("mediapanel",Ext.ux.MediaPanel=B.Panel);B.Window=Ext.extend(Ext.Window,{cls:"x-media-window",ctype:"Ext.ux.Media.Window",mediaEl:"body",initComponent:function(){this.visModeTargets=[this.collapseEl,this.floating?null:this.actionMode];this.initMedia();this.html=this.contentEl=this.items=null;B.Window.superclass.initComponent.call(this)},onRender:function(){B.Window.superclass.onRender.apply(this,arguments);this.onAfterRender()},beforeDestroy:function(){this.clearMedia();B.Window.superclass.beforeDestroy.call(this)}});Ext.apply(B.Window.prototype,B.prototype);Ext.apply(B.Window.prototype,F.prototype);Ext.reg("mediawindow",Ext.ux.MediaWindow=B.Window);Ext.onReady(function(){var G=Ext.util.CSS,H=[];G.getRule(".x-media")||(H.push(".x-media{width:100%;height:100%;display:block;overflow:none;outline:none;}"));G.getRule(".x-media-mask")||(H.push(".x-media-mask{width:100%;height:100%;position:relative;zoom:1;}"));G.getRule(".x-media-img")||(H.push(".x-media-img{background-color:transparent;width:auto;height:auto;zoom:1;}"));G.getRule(".x-hide-nosize")||(H.push(".x-hide-nosize,.x-hide-nosize *{height:0px!important;width:0px!important;border:none!important;}"));if(!!H.length){G.createStyleSheet(H.join(""))}});Ext.apply(Ext.Element.prototype,{setVisible:function(J,G){if(!G||!Ext.lib.Anim){if(this.visibilityMode===Ext.Element.DISPLAY){this.setDisplayed(J)}else{if(this.visibilityMode===Ext.Element.VISIBILITY){this.fixDisplay();this.dom.style.visibility=J?"visible":"hidden"}else{this[J?"removeClass":"addClass"](String(this.visibilityMode))}}}else{var I=this.dom;var H=this.visibilityMode;if(J){this.setOpacity(0.01);this.setVisible(true)}this.anim({opacity:{to:(J?1:0)}},this.preanim(arguments,1),null,0.35,"easeIn",function(){if(!J){if(H===Ext.Element.DISPLAY){I.style.display="none"}else{if(H===Ext.Element.VISIBILITY){I.style.visibility="hidden"}else{Ext.get(I).addClass(String(H))}}Ext.get(I).setOpacity(1)}})}return this},isVisible:function(G){var H=!(this.getStyle("visibility")==="hidden"||this.getStyle("display")==="none"||this.hasClass(this.visibilityMode));if(G!==true||!H){return H}var I=this.dom.parentNode;while(I&&I.tagName.toLowerCase()!=="body"){if(!Ext.fly(I,"_isVisible").isVisible()){return false}I=I.parentNode}return true}});var A={mask:function(K,I,H){if(this.getStyle("position")=="static"){this.setStyle("position","relative")}if(this._maskMsg){this._maskMsg.remove()}if(this._mask){}this._mask||(this._mask=Ext.DomHelper.append(this.dom,{cls:H||"ext-el-mask"},true));!Ext.isIE||this.addClass("x-masked");this._mask.setVisible(true);if(typeof K=="string"){var J=this._maskMsg=Ext.DomHelper.append(this.dom,{cls:"ext-el-mask-msg "+I||"",style:{visibility:"hidden"},cn:{tag:"div",html:K}},true);var G=this.dom;(function(){try{J.center(G).setVisible(true)}catch(L){}}).defer(4)}if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&this.getStyle("height")=="auto"){this._mask.setSize(this.dom.clientWidth,this.getHeight())}return this._mask},unmask:function(G){if(this._maskMsg){if(G){this._maskMsg.remove();delete this._maskMsg}else{this._maskMsg.setVisible.defer(4,this._maskMsg,[false])}}if(this._mask){if(G){this._mask.remove();delete this._mask}else{this._mask.setVisible(false)}}this.removeClass("x-masked")}};B.VisibilityFix=function(G){G||(G={});this.init=function(H){H.hideMode=G.hideMode||H.hideMode;H.on("render",function(L){var I=[L.collapseEl,(L.floating?null:L.actionMode)].concat(G.elements||[]);var J=Ext.Element;var K=G.mode||L.visibilityCls||J[L.hideMode.toUpperCase()]||J.VISIBILITY;Ext.each(I,function(M){var N=L[M]||M;if(N&&N.setVisibilityMode){N.setVisibilityMode(K)}})},H,{single:true})}};Ext.ux.IntelliMask=function(H,G){Ext.apply(this,G);this.el=Ext.get(H);this.removeMask=Ext.value(this.removeMask,true);if(H&&this.fixElementForMedia){Ext.apply(H,A)}};Ext.ux.IntelliMask.prototype={msg:"Loading Media...",msgCls:"x-mask-loading",zIndex:null,disabled:false,active:false,autoHide:false,disable:function(){this.disabled=true},enable:function(){this.disabled=false},show:function(M,L,K,I){if(this.disabled||!this.el){return null}var J={},G=this.autoHide;I=parseInt(I,10)||20;if(typeof M=="object"){J=M;M=J.msg;L=J.msgCls;K=J.fn;G=typeof J.autoHide!="undefined"?J.autoHide:G;I=J.fnDelay||I}var H=this.el.mask(M||this.msg,L||this.msgCls);this.active=!!this.el._mask;if(this.active){if(this.zIndex){this.el._mask.setStyle("z-index",this.zIndex);if(this.el._maskMsg){this.el._maskMsg.setStyle("z-index",this.zIndex+1)}}}if(typeof K==="function"){K.defer(I,J.scope||null)}else{I=0}if(G&&(G=parseInt(G,10)||2000)){this.hide.defer(G+(I||0),this)}return this.active?{mask:this.el._mask,maskMsg:this.el._maskMsg}:null},hide:function(G){if(this.el){this.el.unmask(G||this.removeMask)}this.active=false;return this},destroy:function(){this.hide(true);this.el=null}}})();(function(){var A=Ext.ux.Media;A.Flash=Ext.extend(A,{constructor:function(){A.Flash.superclass.constructor.apply(this,arguments)},SWFObject:null,varsName:"flashVars",hideMode:"nosize",mediaType:Ext.apply({tag:"object",cls:"x-media x-media-swf",type:"application/x-shockwave-flash",loop:null,scripting:"sameDomain",start:true,unsupportedText:{cn:["The Adobe Flash Player{0}is required.",{tag:"br"},{tag:"a",cn:[{tag:"img",src:"http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif"}],href:"http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash",target:"_flash"}]},params:{movie:"@url",play:"@start",loop:"@loop",quality:"high",bgcolor:"#FFFFFF",allowscriptaccess:"@scripting"}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"}:{data:"@url"}),getMediaType:function(){return this.mediaType},initMedia:function(){var K=Ext.apply({},this.mediaCfg||{});var I=(this.requiredVersion=K.requiredVersion||this.requiredVersion||false);var D=!!(this.playerVersion=this.detectVersion());var G=D&&(I?this.assertVersion(I):true);var F=this.assert(K.unsupportedText||this.unsupportedText||(this.getMediaType()||{}).unsupportedText,null);if(F){F=Ext.DomHelper.markup(F);F=K.unsupportedText=String.format(F,(I?" "+I+" ":" "),(this.playerVersion?" "+this.playerVersion+" ":" Not installed."))}if(!G){this.autoMask=false;var E=D&&this.assertVersion("6.0.65");if(E&&K.installUrl){K=K.installDescriptor||{tag:"object",cls:"x-media x-media-swf x-media-swfinstaller",id:"SWFInstaller",type:"application/x-shockwave-flash",data:"@url",url:K.installUrl,width:(/%$/.test(K.width))?K.width:((parseInt(K.width,10)||0)<310?310:K.width),height:(/%$/.test(K.height))?K.height:((parseInt(K.height,10)||0)<138?138:K.height),loop:false,start:true,unsupportedText:F,params:{quality:"high",movie:"@url",allowscriptacess:"always",align:"middle",bgcolor:"#3A6EA5",pluginspage:K.pluginsPage||this.pluginsPage||"http://www.adobe.com/go/getflashplayer"}};K.params[this.varsName]="MMredirectURL="+(K.installRedirect||window.location)+"&MMplayerType="+(Ext.isIE?"ActiveX":"Plugin")+"&MMdoctitle="+(document.title=document.title.slice(0,47)+" - Flash Player Installation")}else{K.mediaType=null}}if(K.eventSynch){K.params||(K.params={});var J=K.params[this.varsName]||(K.params[this.varsName]={});if(typeof J==="string"){J=Ext.urlDecode(J,true)}var H=(K.eventSynch===true?{allowedDomain:J.allowedDomain||document.location.hostname,elementID:K.id||(K.id=Ext.id()),eventHandler:"Ext.ux.Media.Flash.eventSynch"}:K.eventSynch);Ext.apply(K.params,{allowscriptaccess:"always"})[this.varsName]=Ext.applyIf(J,H)}delete K.requiredVersion;delete K.installUrl;delete K.installRedirect;delete K.installDescriptor;delete K.eventSynch;K.mediaType="SWF";this.mediaCfg=K;if(this.events){this.addEvents("flashinit","fscommand")}A.Flash.superclass.initMedia.call(this)},assertVersion:function(F){var E;F||(F=[]);if(Ext.isArray(F)){E=F}else{E=String(F).split(".")}E=(E.concat([0,0,0,0])).slice(0,3);var D;if(!(D=this.playerVersion||(this.playerVersion=this.detectVersion()))){return false}if(D.major>parseFloat(E[0])){return true}else{if(D.major==parseFloat(E[0])){if(D.minor>parseFloat(E[1])){return true}else{if(D.minor==parseFloat(E[1])){if(D.rev>=parseFloat(E[2])){return true}}}}}return false},detectVersion:function(){if(this.mediaVersion){return this.mediaVersion}var D=false;var E=function(J){return J&&!!J.length?{major:J[0]!==null?parseInt(J[0],10):0,minor:J[1]!==null?parseInt(J[1],10):0,rev:J[2]!==null?parseInt(J[2],10):0,toString:function(){return this.major+"."+this.minor+"."+this.rev}}:false};var H=null;if(Ext.isIE){try{H=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(I){try{H=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");D=[6,0,21];H.allowscriptaccess="always"}catch(F){if(D&&D[0]===6){return E(D)}}try{H=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(G){}}if(H){D=H.GetVariable("$version").split(" ")[1].split(",")}}else{if(navigator.plugins&&navigator.mimeTypes.length){H=navigator.plugins["Shockwave Flash"];if(H&&H.description){D=H.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".")}}}return(this.mediaVersion=E(D))},_applyFixes:function(){var E;if(Ext.isIE&&Ext.isWindows&&(E=this.SWFObject)){E.style.display="none";if(E.readyState==4){for(var D in E){if(typeof E[D]=="function"){E[D]=null}}}}},onAfterMedia:function(D){A.Flash.superclass.onAfterMedia.apply(this,arguments);this.SWFObject=this.getInterface();if(this.mediaObject){var E=this.mediaObject.id;if(Ext.isIE){if(!(Ext.query("script[for="+E+"]").length)){B('var c;if(c=Ext.getCmp("'+this.id+'")){c.onfsCommand.apply(c,arguments);}',{event:"FSCommand",htmlFor:E})}}else{window[E+"_DoFSCommand"]||(window[E+"_DoFSCommand"]=this.onfsCommand.createDelegate(this))}}},clearMedia:function(){if(this.mediaObject){var D=this.mediaObject.id;if(Ext.isIE){Ext.select("script[for="+D+"]",true).remove()}else{window[D+"_DoFSCommand"]=null;delete window[D+"_DoFSCommand"]}this._applyFixes()}A.Flash.superclass.clearMedia.call(this);this.SWFObject=null},getSWFObject:function(){return this.getInterface()},onfsCommand:function(E,D){if(this.events){this.fireEvent("fscommand",this,E,D)}},setVariable:function(E,F){var D=this.getInterface();if(D&&typeof D.SetVariable!="undefined"){D.SetVariable(E,F);return true}return false},getVariable:function(E){var D=this.getInterface();if(D&&typeof D.GetVariable!="undefined"){return D.GetVariable(E)}return undefined},onFlashInit:function(){if(this.mediaMask&&this.autoMask){this.mediaMask.hide()}this.fireEvent.defer(10,this,["flashinit",this,this.getInterface()])},_handleSWFEvent:function(E){var D=E.type||E||false;if(D){if(this.events&&!this.events[String(D)]){this.addEvents(String(D))}return this.fireEvent.apply(this,[String(D),this].concat(Array.prototype.slice.call(arguments,0)))}}});A.Flash.eventSynch=function(D,F){var E=Ext.get(D);if(E&&E.ownerCt){return E.ownerCt._handleSWFEvent.apply(E.ownerCt,Array.prototype.slice.call(arguments,1))}};Ext.ux.FlashComponent=Ext.extend(Ext.ux.MediaComponent,{ctype:"Ext.ux.FlashComponent",getId:function(){return this.id||(this.id="flash-comp"+(++Ext.Component.AUTO_ID))}});Ext.apply(Ext.ux.FlashComponent.prototype,A.Flash.prototype);Ext.reg("uxflash",Ext.ux.FlashComponent);A.Panel.Flash=Ext.extend(A.Panel,{ctype:"Ext.ux.Media.Panel.Flash"});Ext.apply(A.Panel.Flash.prototype,A.Flash.prototype);Ext.reg("flashpanel",Ext.ux.MediaPanel.Flash=Ext.ux.FlashPanel=A.Panel.Flash);Ext.reg("uxflashpanel",A.Panel.Flash);Ext.ux.FlashWindow=(A.Window.Flash=Ext.extend(A.Window,{ctype:"Ext.ux.FlashWindow",animCollpase:true}));Ext.apply(A.Window.Flash.prototype,A.Flash.prototype);var B=function(J,E){E=Ext.apply({},E||{},{type:"text/javascript",text:J});try{var G,D,I=document;if(I&&I.getElementsByTagName){if(!(G=I.getElementsByTagName("head")[0])){G=I.createElement("head");I.getElementsByTagName("html")[0].appendChild(G)}if(G&&(D=I.createElement("script"))){for(var H in E){if(E.hasOwnProperty(H)&&H in D){D[H]=E[H]}}return !!G.appendChild(D)}}}catch(F){}return false}})();Ext.menu.EditableItem=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-item",hideOnClick:false,initComponent:function(){Ext.menu.EditableItem.superclass.initComponent.call(this);this.addEvents("keyup");this.editor=this.editor||new Ext.form.TextField();if(this.text){this.editor.setValue(this.text)}},onRender:function(A){var B=A.createChild({cls:this.itemCls,html:'<img src="'+this.icon+'" class="x-menu-item-icon" style="margin: 3px 3px 2px 2px;" />'});Ext.apply(this.config,{width:125});this.editor.render(B);this.el=B;this.relayEvents(this.editor.el,["keyup"]);if(Ext.isGecko){B.setStyle("overflow","auto")}Ext.menu.EditableItem.superclass.onRender.call(this,A)},getValue:function(){return this.editor.getValue()},setValue:function(A){this.editor.setValue(A)},isValid:function(A){return this.editor.isValid(A)}});Ext.menu.RangeMenu=function(E){Ext.menu.RangeMenu.superclass.constructor.call(this,E);this.updateTask=new Ext.util.DelayedTask(this.fireUpdate,this);var D=this.fieldCfg;var B=this.fieldCls;var A=this.fields=Ext.applyIf(this.fields||{},{gt:new Ext.menu.EditableItem({icon:this.icons.gt,editor:new B(typeof D=="object"?D.gt||"":D)}),lt:new Ext.menu.EditableItem({icon:this.icons.lt,editor:new B(typeof D=="object"?D.lt||"":D)}),eq:new Ext.menu.EditableItem({icon:this.icons.eq,editor:new B(typeof D=="object"?D.gt||"":D)})});this.add(A.gt,A.lt,"-",A.eq);for(var F in A){A[F].on("keyup",this.onKeyUp.createDelegate(this,[A[F]],true),this)}this.addEvents("update")};Ext.extend(Ext.menu.RangeMenu,Ext.menu.Menu,{fieldCls:Ext.form.NumberField,fieldCfg:"",updateBuffer:500,icons:{gt:"/img/small_icons/greater_then.png",lt:"/img/small_icons/less_then.png",eq:"/img/small_icons/equals.png"},fireUpdate:function(){this.fireEvent("update",this)},setValue:function(B){for(var A in this.fields){this.fields[A].setValue(B[A]!==undefined?B[A]:"")}this.fireEvent("update",this)},getValue:function(){var A={};for(var B in this.fields){var D=this.fields[B];if(D.isValid()&&String(D.getValue()).length>0){A[B]=D.getValue()}}return A},onKeyUp:function(B,A,E,D){if(B.getKey()==B.ENTER&&D.isValid()){this.hide(true);return}if(D==this.fields.eq){this.fields.gt.setValue(null);this.fields.lt.setValue(null)}else{this.fields.eq.setValue(null)}this.updateTask.delay(this.updateBuffer)}});if("function"!==typeof RegExp.escape){RegExp.escape=function(A){if("string"!==typeof A){return A}return A.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}}Ext.ns("Ext.ux.grid");Ext.ux.grid.RowActions=function(A){Ext.apply(this,A);this.addEvents("beforeaction","action","beforegroupaction","groupaction");Ext.ux.grid.RowActions.superclass.constructor.call(this)};Ext.extend(Ext.ux.grid.RowActions,Ext.util.Observable,{actionEvent:"mousedown",autoWidth:true,dataIndex:"",header:"",menuDisabled:true,sortable:false,tplGroup:'<tpl for="actions"><div class="ux-grow-action-item<tpl if="\'right\'===align"> ux-action-right</tpl> {cls}" style="{style}" qtip="{qtip}">{text}</div></tpl>',tplRow:'<div class="ux-row-action"><tpl for="actions"><div class="ux-row-action-item {cls} <tpl if="text">ux-row-action-text</tpl>" style="{hide}{style}" qtip="{qtip}"><tpl if="text"><span qtip="{qtip}">{text}</span></tpl></div></tpl></div>',hideMode:"visiblity",widthIntercept:4,widthSlope:21,init:function(D){this.grid=D;if(!this.tpl){this.tpl=this.processActions(this.actions)}if(this.autoWidth){this.width=this.widthSlope*this.actions.length+this.widthIntercept;this.fixed=true}var B=D.getView();var A={scope:this};A[this.actionEvent]=this.onClick;D.afterRender=D.afterRender.createSequence(function(){B.mainBody.on(A)},this);if(!this.renderer){this.renderer=function(I,E,F,J,H,G){E.css+=(E.css?" ":"")+"ux-row-action-cell";return this.tpl.apply(this.getData(I,E,F,J,H,G))}.createDelegate(this)}if(B.groupTextTpl&&this.groupActions){B.interceptMouse=B.interceptMouse.createInterceptor(function(E){if(E.getTarget(".ux-grow-action-item")){return false}});B.groupTextTpl='<div class="ux-grow-action-text">'+B.groupTextTpl+"</div>"+this.processActions(this.groupActions,this.tplGroup).apply()}},getData:function(F,A,B,G,E,D){return B.data||{}},processActions:function(E,D){var A=[];Ext.each(E,function(F,G){if(F.iconCls&&"function"===typeof(F.callback||F.cb)){this.callbacks=this.callbacks||{};this.callbacks[F.iconCls]=F.callback||F.cb}var H={cls:F.iconIndex?"{"+F.iconIndex+"}":(F.iconCls?F.iconCls:""),qtip:F.qtipIndex?"{"+F.qtipIndex+"}":(F.tooltip||F.qtip?F.tooltip||F.qtip:""),text:F.textIndex?"{"+F.textIndex+"}":(F.text?F.text:""),hide:F.hideIndex?'<tpl if="'+F.hideIndex+'">'+("display"===this.hideMode?"display:none":"visibility:hidden")+";</tpl>":(F.hide?("display"===this.hideMode?"display:none":"visibility:hidden;"):""),align:F.align||"right",style:F.style?F.style:""};A.push(H)},this);var B=new Ext.XTemplate(D||this.tplRow);return new Ext.XTemplate(B.apply({actions:A}))},onClick:function(G,H){var I=this.grid.getView();var D=false;var M=G.getTarget(".x-grid3-row");var A=I.findCellIndex(H.parentNode.parentNode);var L=G.getTarget(".ux-row-action-item");if(L){D=L.className.replace(/ux-row-action-item /,"");if(D){D=D.replace(/ ux-row-action-text/,"");D=D.trim()}}if(false!==M&&false!==A&&false!==D){var F=this.grid.store.getAt(M.rowIndex);if(this.callbacks&&"function"===typeof this.callbacks[D]){this.callbacks[D](this.grid,F,D,M.rowIndex,A)}if(true!==this.eventsSuspended&&false===this.fireEvent("beforeaction",this.grid,F,D,M.rowIndex,A)){return}else{if(true!==this.eventsSuspended){this.fireEvent("action",this.grid,F,D,M.rowIndex,A)}}}L=G.getTarget(".ux-grow-action-item");if(L){var J=I.findGroup(H);var E=J?J.id.replace(/ext-gen[0-9]+-gp-/,""):null;var B;if(E){var K=new RegExp(RegExp.escape(E));B=this.grid.store.queryBy(function(N){return N._groupId.match(K)});B=B?B.items:[]}D=L.className.replace(/ux-grow-action-item (ux-action-right )*/,"");if("function"===typeof this.callbacks[D]){this.callbacks[D](this.grid,B,D,E)}if(true!==this.eventsSuspended&&false===this.fireEvent("beforegroupaction",this.grid,B,D,E)){return false}this.fireEvent("groupaction",this.grid,B,D,E)}}});Ext.reg("rowactions",Ext.ux.grid.RowActions);Ext.ns("Ext.ux.grid");Ext.ux.grid.Search=function(A){Ext.apply(this,A);Ext.ux.grid.Search.superclass.constructor.call(this)};Ext.extend(Ext.ux.grid.Search,Ext.util.Observable,{searchText:"Suche",searchTipText:"Gib einen Text ein und drück die Enter-Taste",selectAllText:"Alle auswählen",position:"bottom",iconCls:"icon-magnifier",checkIndexes:"all",disableIndexes:[],dateFormat:undefined,showSelectAll:true,mode:"remote",width:100,xtype:"gridsearch",paramNames:{fields:"fields",query:"query"},shortcutKey:"r",shortcutModifier:"alt",init:function(A){this.grid=A;if("string"===typeof this.toolbarContainer){this.toolbarContainer=Ext.getCmp(this.toolbarContainer)}A.onRender=A.onRender.createSequence(this.onRender,this);A.reconfigure=A.reconfigure.createSequence(this.reconfigure,this)},onRender:function(){var B=this.toolbarContainer||this.grid;var A="bottom"===this.position?B.bottomToolbar:B.topToolbar;this.menu=new Ext.menu.Menu();if("right"===this.align){A.addFill()}else{if(0<A.items.getCount()){A.addSeparator()}}A.add({text:this.searchText,menu:this.menu,iconCls:this.iconCls});this.field=new Ext.form.TwinTriggerField({width:this.width,selectOnFocus:undefined===this.selectOnFocus?true:this.selectOnFocus,trigger1Class:"x-form-clear-trigger",trigger2Class:"x-form-search-trigger",onTrigger1Click:this.onTriggerClear.createDelegate(this),onTrigger2Click:this.onTriggerSearch.createDelegate(this),minLength:this.minLength});this.field.on("render",function(){this.field.el.dom.qtip=this.searchTipText;var F=new Ext.KeyMap(this.field.el,[{key:Ext.EventObject.ENTER,scope:this,fn:this.onTriggerSearch},{key:Ext.EventObject.ESC,scope:this,fn:this.onTriggerClear}]);F.stopEvent=true},this,{single:true});A.add(this.field);this.reconfigure();if(this.shortcutKey&&this.shortcutModifier){var E=this.grid.getEl();var D=[{key:this.shortcutKey,scope:this,stopEvent:true,fn:function(){this.field.focus()}}];D[0][this.shortcutModifier]=true;this.keymap=new Ext.KeyMap(E,D)}},onTriggerClear:function(){if(this.field.getValue()){this.field.setValue("");this.field.focus();this.onTriggerSearch()}},onTriggerSearch:function(){if(!this.field.isValid()){return}var D=this.field.getValue();var B=this.grid.store;if("local"===this.mode){B.clearFilter();if(D){B.filterBy(function(F){var E=false;this.menu.items.each(function(H){if(!H.checked||E){return}var I=F.get(H.dataIndex);I=I instanceof Date?I.format(this.dateFormat||F.fields.get(H.dataIndex).dateFormat):I;var G=new RegExp(D,"gi");E=G.test(I)},this);if(E){return true}return E},this)}else{}}else{if(B.lastOptions&&B.lastOptions.params){B.lastOptions.params[B.paramNames.start]=0}var A=[];this.menu.items.each(function(E){if(E.checked){A.push(E.dataIndex)}});delete (B.baseParams[this.paramNames.fields]);delete (B.baseParams[this.paramNames.query]);if(B.lastOptions&&B.lastOptions.params){delete (B.lastOptions.params[this.paramNames.fields]);delete (B.lastOptions.params[this.paramNames.query])}if(A.length){B.baseParams[this.paramNames.fields]=Ext.encode(A);B.baseParams[this.paramNames.query]=D}B.reload()}},setDisabled:function(){this.field.setDisabled.apply(this.field,arguments)},enable:function(){this.setDisabled(false)},disable:function(){this.setDisabled(true)},reconfigure:function(){var B=this.menu;B.removeAll();if(this.showSelectAll){B.add(new Ext.menu.CheckItem({text:this.selectAllText,checked:!(this.checkIndexes instanceof Array),hideOnClick:false,handler:function(E){var D=!E.checked;E.parentMenu.items.each(function(F){if(E!==F&&F.setChecked&&!F.disabled){F.setChecked(D)}})}}),"-")}var A=this.grid.colModel;Ext.each(A.config,function(E){var D=false;if(E.header&&E.dataIndex){Ext.each(this.disableIndexes,function(F){D=D?D:F===E.dataIndex});if(!D){B.add(new Ext.menu.CheckItem({text:E.header,hideOnClick:false,checked:"all"===this.checkIndexes,dataIndex:E.dataIndex}))}}},this);if(this.checkIndexes instanceof Array){Ext.each(this.checkIndexes,function(E){var D=B.items.find(function(F){return F.dataIndex===E});if(D){D.setChecked(true,true)}},this)}if(this.readonlyIndexes instanceof Array){Ext.each(this.readonlyIndexes,function(E){var D=B.items.find(function(F){return F.dataIndex===E});if(D){D.disable()}},this)}}});Ext.grid.RowExpander=function(A){Ext.apply(this,A);this.addEvents({beforeexpand:true,expand:true,beforecollapse:true,collapse:true});Ext.grid.RowExpander.superclass.constructor.call(this);if(this.tpl){if(typeof this.tpl=="string"){this.tpl=new Ext.Template(this.tpl)}this.tpl.compile()}this.state={};this.bodyContent={}};Ext.extend(Ext.grid.RowExpander,Ext.util.Observable,{header:"",width:20,sortable:false,fixed:true,hidden:true,menuDisabled:true,dataIndex:"",id:"expander",lazyRender:true,enableCaching:false,getRowClass:function(A,F,E,D){E.cols=E.cols-1;var B=this.bodyContent[A.id];if(!B&&!this.lazyRender){B=this.getBodyContent(A,F)}if(B){E.body=B}return this.state[A.id]?"x-grid3-row-expanded":"x-grid3-row-collapsed"},init:function(B){this.grid=B;var A=B.getView();A.getRowClass=this.getRowClass.createDelegate(this);A.enableRowBody=true;B.on("render",function(){A.mainBody.on("mousedown",this.onMouseDown,this)},this)},getBodyContent:function(A,B){if(!this.enableCaching){return this.tpl.apply(A.data)}var D=this.bodyContent[A.id];if(!D){D=this.tpl.apply(A.data);this.bodyContent[A.id]=D}return D},onMouseDown:function(B,A){if(A.className=="x-grid3-row-expander"){B.stopEvent();var D=B.getTarget(".x-grid3-row");this.toggleRow(D)}},renderer:function(B,D,A){D.cellAttr='rowspan="2"';return'<div class="x-grid3-row-expander">&#160;</div>'},beforeExpand:function(B,A,D){if(this.fireEvent("beforeexpand",this,B,A,D)!==false){if(this.tpl&&this.lazyRender){A.innerHTML=this.getBodyContent(B,D)}return true}else{return false}},toggleRow:function(A){if(typeof A=="number"){A=this.grid.view.getRow(A)}this[Ext.fly(A).hasClass("x-grid3-row-collapsed")?"expandRow":"collapseRow"](A)},expandRow:function(D){if(typeof D=="number"){D=this.grid.view.getRow(D)}var B=this.grid.store.getAt(D.rowIndex);var A=Ext.DomQuery.selectNode("tr:nth(2) div.x-grid3-row-body",D);if(this.beforeExpand(B,A,D.rowIndex)){this.state[B.id]=true;Ext.fly(D).replaceClass("x-grid3-row-collapsed","x-grid3-row-expanded");this.fireEvent("expand",this,B,A,D.rowIndex)}},collapseRow:function(D){if(typeof D=="number"){D=this.grid.view.getRow(D)}var B=this.grid.store.getAt(D.rowIndex);var A=Ext.fly(D).child("tr:nth(1) div.x-grid3-row-body",true);if(this.fireEvent("beforecollapse",this,B,A,D.rowIndex)!==false){this.state[B.id]=false;Ext.fly(D).replaceClass("x-grid3-row-expanded","x-grid3-row-collapsed");this.fireEvent("collapse",this,B,A,D.rowIndex)}}});Ext.grid.CheckColumn=function(A){if(!this.id){this.id=Ext.id()}this.addEvents({click:true});Ext.grid.CheckColumn.superclass.constructor.call(this);Ext.apply(this,A,{init:function(B){this.grid=B;this.grid.on("render",function(){var D=this.grid.getView();D.mainBody.on("mousedown",this.onMouseDown,this)},this)},onMouseDown:function(G,J){if(J.className&&J.className.indexOf("x-grid3-cc-"+this.id)!=-1){var K=this.grid.view.findRowIndex(J);var D=this.grid.view.findCellIndex(J);var B=this.grid.store.getAt(K);var H=this.grid.colModel.getDataIndex(D);var I={grid:this.grid,record:B,field:H,value:B.data[H],row:K,column:D,cancel:false};if(this.grid.fireEvent("beforeedit",I,this.grid)!==false&&I.cancel!==true){G.stopEvent();var F=this.grid.getView().findRowIndex(J);var E=this.grid.store.getAt(F);E.set(this.dataIndex,!E.data[this.dataIndex]);I.value=E.data[this.dataIndex];this.grid.fireEvent("afteredit",I,this.grid)}}},renderer:function(D,E,B){E.css+=" x-grid3-check-col-td";return'<div class="x-grid3-check-col'+(D?"-on":"")+" x-grid3-cc-"+this.id+'">&#160;</div>'}});this.renderer=this.renderer.createDelegate(this)};Ext.extend(Ext.grid.CheckColumn,Ext.util.Observable);var Lars={tinyMceLanguage:"en",button_cancel:"Cancel",button_save:"Save",refresh:"Refresh",closedown:"Close",del:"Delete",copy_document:"Copy document.",copy_document_tt:"Copy this document.<br>Insert via the right mouse button into a folder within the resources or into a work package.",msg_success_new_content:"Successfully saved.",edit:"Edit",printer:"Print",today:"Today",close_tab:"Close this tab.",close_tab_others:"Close other tabs.",rename:"Rename",msg:{loading:"One moment please.",loading_data:"Transferring data.",connecting:"Connecting",warning:"Warning",attention:"Attention",attention_firefox:'Please use <a href="http://www.firefox-browser.de" target="_blank">Firefox Browser</a> for this application. <br> This browser is not supported; therefore, it may not be possible to execute all functions without errors.',failure:"Error",failure_delete:"Object has not been deleted.",failure_connection:"The connection to the server has failed.",failure_nothing_changed:"No changes have been made.",failure_no_response:"Server does not respond.",failure_redirect:"Automatic redirection has failed. No connection to server?",failure_login:"Login incorrect or connection to server cannot be established.",failure_response:"Error loading a request.",failure_copy:"Error while copying.",success_copy:"Successfully copied.",success:"Successful",success_changed_data:"Changes have been made successfully.",success_new_content:"New content has been saved.",success_login:"Login successful.",loading_editor:"Loading editor.",loading_app:"Loading application.",loading_folder:"Loading folders.",automatic_redirect_1:"Automatic redirection?",automatic_redirect_2:"If you have already been logged on to <b>bid-owl</b>, you will be <br>automatically redirected to your MokoDesk any moment.",dialog_updater_error:"An error has occured while performing automatic updates."},main:{desktop_title:"Overview",tree_title:"My MokoDesk",voice_chat:"Voice Chat",my_site:"My Site",edit:"Edit",item_s:"Entry",item_p:"Entries",show:"Show",show_as_package:"Show as work package.",refresh_here:"Refresh here.",logged_in_since:"Logged in since ",last_login:"Last Login ",news:"MokoDesk Changes",about:"About MokoDesk",help:"Help",desktop_grid:{tabTip:"Here you can find all the documents which have been added or altered since the last login.",loadMask:"Searching for new and altered documents, loading them afterwards.",title:"New documents",titleBeginning:"New documents",timeout_msg_1:"Connection error",timeout_msg_2:"The connection to the server is probably too slow to retrieve all new documents within the time limit."},bin:{trash:"Recycle Bin",empty_trash:"Empty the Recycle Bin.",empty_trash_confirm:"Are you sure you want to empty the recycle bin?",delete_irrevocable:"Delete permanently.",delete_confirm:"Delete this object?",del_failure_msg:"The selected object has not been deleted."},send_bug:{text:"Report errors.",text_tt:"If an error has occurred, you can forward an error message here."},chat:{title:"MokoChat",chat_home:"Start a chat session on your own MokoDesk.",chat_else:"Chat elsewhere."},tree:{package_moved_msg:"Work package has been moved.",package_not_moved_msg:"Work package has not been moved.",main_directory:"Main directory",root_directory:"Main directory of the server",home_directory:"Your own home directory",add_resource_folder:"Include a new folder in the resources.",add_to_resources:"Add to resources.",add_package_here:"Add work package here.",add_package:"Add work package.",add_package_advice:"If you create a workbook directly on another desk, no copy will be generated in the archive.<br><i>Copying</i> via Drag & Drop from the <i>linked folders</i> or via the right mouse button and <i>inserting</i> into the destination folder is the common way to simultaneously generate a copy in the archive.",add_folder_here:"Add folder here.",add_folder:"Add a new folder.",add_link:"Add a new link.",add_link_here:"Add a link here.",folder_properties:"Folder properties",folder_as_package:"Mark as work package.",folder_as_normal:"Mark as ordinary folder.",download:"Download",show_archive:"Show archive.",show_bin:"Show recycle bin.",set_rights:"Define access rights to your MokoDesk.",show_package:"Show work package.",copy_package:"Copy work package.",copy_folder:"Copy folder.",del_desktop_link:"Delete this MokoDesk-link.",del_desktop_link_confirm:"Are you sure you want to delete this MokoDesk-link?",del_link:"Delete link.",del_confirm_link:"Delete this link?",del_confirm_package:"Delete this work package?",del_confirm_object:"Delete this object?",del_failure_msg:"The selected work package has not been deleted.",del_failure_msg_folder:"The selected folder has not been deleted.",del_failure_msg_link:"The selected link has not been deleted.",move_to_archive:"Move to the archive.",move_to_archive_tt:"As soon as you have finished the work package, it can be moved to the archive.",open_learn_process:"Open display of learning progress.",delete_folder_confirm:"Delete this folder?",insert_here:"Insert here.",copy_confirm_1:"Insert?",copy_confirm_2_folder:"Would you like to insert the copied folder <b>",copy_confirm_2_document:"Would you like to insert the copied document entitled <b>",copy_confirm_2:"Would you like to insert the copied work package <b>",copy_confirm_3:"</b> in <b>",copy_confirm_3_in_package:"</b> in this work package?",copy_confirm_4:"</b>?",copy_confirm_5:"<br>An additional copy is filed in the archive.",copy_progress_1:"Copying the work package.",copy_progress_2:"One moment please...",copy_success_msg:"Successfully copied.",copy_failure_msg:"Error while copying.",copy_document:"Copy the document and insert it here.",load_mask_desktops:"Loading MokoDesks.",embed_desktop:"Include someone else's MokoDesk.",embed_desktop_group:"Include a group's MokoDesk.",package_convert_confirm_1:"Convert?",package_convert_confirm_2:"Would you like to assign the file as a work package to the user? <br>The original file will be preserved.",msg_failure_no_package:"Folder does not belong to the category work package.<br>Change beforehand via the menu opened by clicking the right mouse button.",resources_title:"Linked folders",internet_links_title:"Internet bookmarks",desktops_title:"Other MokoDesks"},grid:{emptyText:"There are no documents available here.",loadMask:"Loading documents.",count_new_documents:"",edit_tt:"Edit content.",del_tt:"Delete this document.",del_confirm:"Are you sure you want to delete this document?",del_failure_msg:"The selected document has not been deleted.",solution_attached:"(solution)",open_link_1:"Open link?",open_link_2:"Open link in a new window?",download_1:"Download",download_2:"Would you like to download the document?",package_append:" - work package",columns:{desc:"Name",content:"Content",folder:"Folder",type:"Type",valueNotFoundText:"Kein passender Wert gefunden",last_changed:"Last modified",created:"Created"},change_state:"Change state.",state_0:"Not yet started",state_1:"In progress",state_2:"Ready for submission",state_3:"Corrected",state_4:"Finished",add_text:"Add a new text to this work package.",add_text_title:"Write text.",add_document:"Add a document to this work package.",add_document_title:"Upload document.",solution:" (solution)",only_teacher:"Only a teacher can change the state to <b>Finished</b>."},discussion:{title:"Messages",loadMask:"Loading messages.",emptyText:"No messages.",write_new_message:"Write a message.",write_new_message_tt:"Write a new message.",show_preview:"Show a preview of the messages.",show_preview_tt:"The beginning of the message is shown below the heading.",show_preview_tt_title:"Preview",expand_preview:"Expand preview.",expand_preview_tt:"Content is displayed directly below the description.",expand_preview_tt_title:"Show entire content.",new_message_1:"Message",new_message_2:"A new message from ",save_send:"Save / Send",columns:{title:"Title",author:"Author",content:"Content",date:"Date"},created_of:"Created by ",menu:{edit:"Edit",edit_tt:"Edit content.",del:"Delete",del_tt:"Delete this message.",del_confirm_1:"Are you sure you want to delete this message?",del_confirm_2:"Heading:",del_success_msg:"The message has been deleted.",del_failure_msg:"The selected message has not been deleted."}},editor:{save_info_1:"Problem while saving.",save_info_2:"In the meantime, the content of the document has changed on the server. <br>You now have the possibility of saving the content in a new document.<br>If you do not save the changes in a new document, they will get lost.",document_not_available:"The selected document is not available."},notes:"Notes",north:{new_documents1:"New documents",new_documents:"New documents on my MokoDesk",new_documents_others:"New documents on other MokoDesks",new_mymessages:"My Messages",new_messages:"New messages on other MokoDesks",new_messages_packages:"New messages in my work packages",about:"About MokoDesk"},help_and_news_tt:"Help and news about the MokoDesk",document_subscription:"Show new documents of this?",group_or_user:"Group or user"},dialog:{assignment:{fieldLabel:"Enter the name of the work package.",emptyText:"New work package",title:"Add work package.",button_add:"Add work package."},addFolderLinks:{fieldLabel:"Name of the new folder",title:"Add folder.",button_add:"Add folder."},addFolder:{fieldLabel:"Name of the new folder, for example <i>German</i> or <i>English</i>",title:"Add folder.",button_add:"Add folder."},addLink:{fieldLabel:"Name of the new folder, for example <i>German</i> or <i>English</i>",title:"Add link.",button_add:"Add link.",adress:"URL",name:"Name"},addSchueler:{title:"Include someone's MokoDesk.",button_add:"Include MokoDesk.",msg_success:"MokoDesk has been included.",msg_failure:"MokoDesk has not been included.",usernameLabel:"Person's username"},browseFile:{description:"Description of the document",filePath:"Select document from your local hard disk.",title:"Upload document to ",button_add:"Add file.",msg_success:"File has been uploaded into the work package.",msg_failure:"No file has been uploaded."},changeDesc:{title:"Change title/name.",fieldLabel:"Title/Name",msg_success:"Changes have been made successfully.",msg_failure:"No changes have been made."},comment:{title_1:"Comment by ",title_2:" Change",fieldLabel:"Comment",button_save:"Save comment.",msg_success:"Changes have been made successfully.",msg_failure:"No changes have been made."},customPanelTextChange:{fieldLabel:"Name",title:"Change name."},groups:{username:"Person's username",add_to_favorites:"Add user to favourites.",add_user:"Add user.",user_added_msg:"Person has been added.",user_not_added_msg:"Person has not been added.",embed_desktop:"Include MokoDesk?",groupname:"Group name",other_desktops:"Other MokoDesks",add_group:"Add group.",add_group_tt:"Add group to allow access to your own MokoDesk.",add_user_tt:"Add user to allow access to your own MokoDesk.",allow_read:"Allow reading only?",allow_all:"Allow everything?",favorite:"Favourite",type:"Type",del_group_user_1:"Delete this person/group.",del_group_user_2:"Delete?",del_group_user_3:"Delete the person or group from the list?",define_rights:"Define access rights to your MokoDesk.",root_directory:"Main directory",add_group_to_list:"Add group to list.",add_group_to_selection:"Add group to selection."},rights:{fieldLabel_1:"Only you yourself are allowed to view and edit this folder.",fieldLabel_2:"You and your teachers can view and edit this folder.",title_1:"Access rights for",title_1:"Set",button_set:"Set access rights."},htmlMessage:{fieldLabel:"Heading of the message",title:"Create new message.",button_create:"Create message."},htmlText:{fieldLabel:"Heading of the new text",title_1:"New text in",title_2:"Create",button_add:"Create text."},htmlTextNew:{fieldLabel:"New heading",title:"Create text within the same work package?",button_add:"Create text. "},resourcesAddName:{fieldLabel:"Name of the resource",title:"Name of the link",button_add:"Add link.",msg_success:"New resource has been added."},resourcesAdd:"Add resources.",login:{username:"Username",password:"Password",button_login:"Login",title:"Login to your MokoDesk <i>("},link:{open_both:"Would you like to open this URL within the MokoDesk or download it in your browser?",open_browser:"Would you like to open this URL in a new window of your browser?",open_app:"Would you like to open this URL in a new tab of the MokoDesk?",button_app:"Within MokoDesk",button_browser:"Within the browser / download"},upload_image:{choose_hd:"Choose image from your local hard disk.",msg_failure:"Image has not been uploaded.",msg_success:"Image has been inserted.",upload:"Upload image."},imagePanel:{change_picture:"Upload a different image."},upload_file:{choose_hd:"Choose a document from your local hard disk.",msg_failure:"The file has not been uploaded.",msg_success:"The file has been uploaded.",upload_description:"Descripton of the document",button_upload:"Upload file.",title:"Upload document to "}}};Lars.copy_document_tt="Copy this document.<br>Insert via the right mouse button into a folder within the resources or into a workbook.";Lars.msg.automatic_redirect_2="If you have already been logged on to <b>bid-owl</b>, you will be <br>automatically redirected to your MokoDesk any moment.";Lars.main.show_as_package="Show as workbook.";Lars.main.tree.add_package_here="Add workbook here.";Lars.main.tree.add_package="Add workbook.";Lars.main.tree.add_package_advice="If you create a workbook directly on another desk, no copy will be generated in the archive.<br><i>Copying</i> via Drag & Drop from the <i>linked folders</i> or via the right mouse button and <i>inserting</i> into the destination folder is the common way to simultaneously generate a copy in the archive.";Lars.main.tree.folder_as_package="Mark as workbook.";Lars.main.tree.set_rights="Define access rights to your MokoDesk.";Lars.main.tree.show_package="Show workbook.";Lars.main.tree.copy_package="Copy workbook.";Lars.main.tree.del_confirm_package="Delete this workbook?";Lars.main.tree.del_failure_msg="Selected workbook has not been deleted.";Lars.main.tree.open_learn_process="Open display of learning progress.";Lars.main.tree.copy_progress_1="Copying the workbook.";Lars.main.tree.package_convert_confirm_2="Would you like to assign the file as a workbook to the user? <br>The original file will be preserved.";Lars.main.tree.msg_failure_no_package="Folder does not belong to the category 'workbook'.<br>Change beforehand via the menu opened by clicking the right mouse button.";Lars.main.grid.download_2="Would you like to download the document?";Lars.main.grid.package_append=" - workbook";Lars.main.grid.add_document="Add a document to this workbook.";Lars.main.discussion.menu.del_confirm_1="Are you sure you want to delete this message?";Lars.main.editor.save_info_2="In the meantime, the content of the document has changed on the server. <br>You now have the possibility of saving the content in a new document.<br>If you do not save the changes in a new document, they will get lost.";Lars.dialog.fieldLabel="Enter the name of the workbook.";Lars.dialog.emptyText="New workbook";Lars.dialog.title="Add workbook.";Lars.dialog.button_add="Add workbook.";Lars.dialog.addFolder.fieldLabel="Name of the new folder. Please select a generic term.";Lars.dialog.addLink.fieldLabel="Name of the new folder. Please select a generic term.";Lars.dialog.groups.define_rights="Define access rights to your MokoDesk.";Lars.dialog.rights.fieldLabel_1="Only you yourself are allowed to view and edit this folder.";Lars.dialog.rights.fieldLabel_2="You and group members can view and edit this folder.";Lars.dialog.htmlTextNew.title="Create the new text in the same workbook?";Lars.dialog.login.title="Login to your MokoDesk <i>(";Lars.dialog.link.open_both="Would you like to open this URL within the application or in your browser?";Lars.dialog.link.open_browser="Would you like to open this URL in a new window of your browser?";var version="V0.985 25.09.2012";var larsUpdater={};var larsUpdaterInterval=10000;var onlineStatusInterval=30000;var timeoutUpdateConnection=180000;LarsViewer={};eastCollapsed={};LarsGridConfig={};title={};larsDesktopId={};larsArchivId={};larsBinId={};loginInfo={};lastLogin={};var user={};var pass={};var larsVoiceChatAllowed=false;var larsVoiceChatEnabled=true;var packageNodeToCopy=false;var fileRecordToCopy=false;task={};var AScgiloc="http://www.imathas.com/imathas/filter/graph/svgimg.php";var AMTcgiloc="http://www.imathas.com/cgi-bin/mimetex.cgi";var larsNews='<font size="3"><b>Version 0.983:<br></b><ul><li>- Fehlerkorrekturen.<br><b>Version 0.972:<br></b><ul><li>- Neuer Login zum MokoDesk.<br><b>Version 0.970:<br></b><ul><li>- Englischer MokoDesk verfügbar.<br><b>Version 0.969:<br></b><ul><li>- Benachrichtigungen für "Eigene Mitteilungen" werden erst ausgeblendet, wenn mit dem Mauszeiger über die Nachricht bewegt wurde.<br><li>- Benachrichtigungen werden nicht angezeigt, wenn die "Eigenen Mitteilungen" geöffnet sind.<br><b>Version 0.967:<br></b><li>- Überarbeitung der Benachrichtigung bei neuen Mitteilungen auf der eigenen Seite.<br><b>Version 0.955:<br></b><li>- Überarbeitung der Oberfläche. Neue Icons auf der Hauptseite.<br><li>- Zwischen neuen Dokumenten und Nachrichten auf dem eigenen MokoDesk und anderen MokoDesks wird unterschieden<br><li>- Es werden nicht mehr standardmäßig Dokumente aller eingebundenen Schreibtische angezeigt. Hierzu muss der eigebundene Schreibtisch in einem Dialog ausgewählt werden. (Zusätzliches Icon unter "Andere MokoDesks")<br><li>- Weitere Änderungen sind demnächst in der Hilfe zu finden<br></ul>';Ext.onReady(function(){Ext.QuickTips.init();var A=0;Ext.Ajax.timeout=90000;if(A){}else{this.doLoginBid=function(){Ext.Ajax.request({url:"lars_login.php",params:{version:version},success:function(F,G){var H=Ext.util.JSON.decode(F.responseText);title=H.title;imageHeight=H.imageHeight?H.imageHeight:120;eastCollapsed=H.eastCollapsed?H.eastCollapsed:1;larsDesktopId=H.larsDesktop;larsArchivId=H.larsArchiv;larsBinId=H.larsBin;larsVoiceChatAllowed=H.vc;isTeacher=H.isTeacher;loginTime=H.loginTime;lastLoginUnix=H.lastLoginUnix;lastLogin=H.loginTimeLast;loginInfo=Lars.main.logged_in_since+loginTime+"<br>"+Lars.main.last_login+lastLogin;user=H.user;pass=H.pass;if(H.success){B()}else{if(H.version){Ext.Msg.show({title:Lars.msg.failure,msg:H.name,icon:Ext.MessageBox.ERROR,buttons:Ext.Msg.OK})}}},failure:function(F,G){if(G.failureType==="server"){obj=Ext.util.JSON.decode(G.response.responseText);Ext.Msg.alert(Lars.msg.failure,obj.errors.reason)}else{Ext.Msg.alert(Lars.msg.failure,Lars.msg.failure_redirect)}},scope:this})};this.doLoginBid.defer(10,this);var D=function(){if((!Ext.isGecko2&&!Ext.isGecko3)||(Ext.isSafari||Ext.isSafari2||Ext.isSafari3)){Ext.ux.ToastLars.msg('<font color="#DD0000">'+Lars.msg.attention,Lars.msg.attention_firefox,7)}};D.defer(1000,this);var E=new Ext.Window({id:"login-window",width:400,height:134,closable:false,animate:true,title:Lars.dialog.login.title+version+")</i>",keys:[{key:[10,13],scope:this,fn:this.doLogin}],});setTimeout(function(){Ext.get("loading").remove();Ext.get("loading-mask").fadeOut({remove:true})},100)}function B(){if(this.started){return}this.started=true;Ext.ux.ToastLars.msg(Lars.msg.success_login,Lars.msg.loading_data,2);var W=new LarsTreePanelFolderLinks();var S=new LarsTreePanelLinks();var Q=new LarsResourcesPanel(W,"center","resource-panel","8 8 4 0",Lars.main.tree.resources_title);var F=new LarsResourcesPanel(S,"south","links-panel","0 8 8 0",Lars.main.tree.internet_links_title);var G=new Ext.Panel({id:"main-east",region:"east",layout:"border",split:true,width:204,minSize:175,maxSize:400,border:false,layoutConfig:{animate:true},margins:"0 0 0 0",cmargins:"8 0 8 0",collapsible:true,items:[Q,F]});G.on("beforeexpand",LarsGridConfig.onCollapseExpand,this);G.on("beforecollapse",LarsGridConfig.onCollapseExpand,this);var Y={id:larsDesktopId};var J=new MainPanel();var K=new LarsDesktopGrid("");var R=new LarsDesktop();var P=new LarsDesktopDiscussion(Y);var L=new LarsDesktopNotes();var T=new LarsDesktopNorth();T.add(L);var I=new Ext.TabPanel({id:"lars-desktop-tab-panel",frame:false,region:"center",activeTab:1,margins:"0 0 0 0",frame:false,hideBorders:true,hideLabel:true,bodyBorder:false,border:false,resizeTabs:true,tabWidth:150,minTabWidth:90,enableTabScroll:true,viewConfig:{forceFit:true},listeners:LarsViewer.LinkInterceptor});I.add({xtype:"panel",id:"about-panel",title:Lars.main.about,iconCls:"wand",layout:"accordion",items:[{title:Lars.main.help,iconCls:"help",xtype:"iframepanel",id:"moko_about",tbar:["->",{iconCls:"error",text:Lars.main.send_bug.text,tooltip:Lars.main.send_bug.text_tt,handler:function(){this.win=new LarsDesktopErrorWindow();this.win.show();this.win.setZIndex(90001)},scope:this}],edit:false,layout:"fit",autoScroll:true,defaultSrc:"MokoDeskHelp/index.htm",listeners:{domready:LarsViewer.LinkInterceptorIFrame}},{collapsible:true,iconCls:"about",xtype:"panel",title:Lars.main.news,listeners:LarsViewer.LinkInterceptor,layout:"fit",split:true,autoScroll:true,html:larsNews}]});I.add(P);I.add(K);R.add(I);R.add(T);larsDesktopWrapper=new Ext.Panel({title:Lars.main.desktop_title,id:"lars-desktop",margins:"0 0 0 0",layout:"border",hideMode:!Ext.isIE?"nosize":"display",iconCls:"application-home",closable:false,autoScroll:false,});larsDesktopWrapper.add(R);if(larsVoiceChatAllowed&&larsVoiceChatEnabled){larsDesktopWrapper.add(larsVoiceChat)}K.getView().getRowClass=LarsGridConfig.applyRowClassWithout;J.add(larsDesktopWrapper);var O=new Ext.Panel({id:"main-center",frame:true,header:true,layout:"fit",region:"center",margins:"8 5 8 0",autoScroll:false,items:J});var M=new Ext.Panel({id:"center",header:false,layout:"border",region:"center",border:false,autoScroll:false,margins:"0 0 0 0",items:[O]});var H=new LarsTopicsPanel();var N=new LarsCustomImagePanel(title,imageHeight);var U=new Ext.Panel({id:"main-west",region:"west",layout:"border",split:true,width:204,minSize:175,maxSize:400,border:false,layoutConfig:{animate:true},margins:"0 0 0 0",cmargins:"8 5 8 0",collapsible:true,items:[N,H]});var V=new Ext.Viewport({layout:"border",items:[G,M,U]});if(eastCollapsed=="1"){G.collapse()}P.store.load({params:{start:0,limit:10}});K.store.load();larsUpdater=new LarsUpdater();function X(){larsUpdater.store.load({params:{task:"getUpdates",id:Ext.util.JSON.encode(larsUpdater.updateIds)}})}larsUpdater.store.proxy.on("loadexception",function(c,Z,g){if(g.responseText){var h=Ext.util.JSON.decode(g.responseText);Ext.ux.ToastLars.msg(Lars.msg.failure_connection,h.name,5)}X.defer(larsUpdaterInterval,this,[])},this);larsUpdater.store.on("load",function(g,Z,h){X.defer(larsUpdaterInterval,this,[])},this);X.defer(10000,this,[]);LarsUpdaterUsers.defer(30000,this,[]);P.startAutoUpdate("d"+larsDesktopId)}});LarsViewer.LinkInterceptor={render:function(A){A.body.on({mousedown:function(D,B){B.target="_blank"},click:function(D,B){if(String(B.target).toLowerCase()!="_blank"){D.stopEvent();window.open(B.href)}},delegate:"a"})}};LarsViewer.LinkInterceptorIFrame=function(A){A.getDoc().on({mousedown:function(D,B){if(B.href.match(window.location.host)){A.setSrc(B.href)}else{B.target="_blank"}},click:function(D,B){if(String(B.target).toLowerCase()!="_blank"){D.stopEvent();if(B.href.match(window.location.host)){A.setSrc(B.href)}else{window.open(B.href)}}},delegate:"a"})};LarsViewer.getKeyMap=function(D,B){var A={key:Ext.EventObject.ENTER,fn:D,scope:B};return A};LarsViewer.onLoadException=function(B,A,D){Ext.ux.ToastLars.msg(Lars.msg.failure_response,"",5)};LarsViewer.QuestionTabOrBrowserOpen=function(A){Ext.Msg.show({title:A.attributes.lars_ref,msg:Lars.dialog.link.open_both+"<br><i>"+A.attributes.lars_ref+"</i>",buttons:{ok:Lars.dialog.link.button_app,no:Lars.dialog.link.button_browser,cancel:Ext.MessageBox.buttonText.cancel},icon:Ext.MessageBox.QUESTION,animEl:"elId",fn:function(B){if(B=="ok"){Ext.getCmp("main-tabs").fireEvent("viewIFrameTabAll",A)}else{if(B=="no"){window.open(A.attributes.lars_ref)}}}})};LarsViewer.QuestionBrowserOpen=function(A){Ext.Msg.confirm(A.currentTarget.href,Lars.dialog.link.open_browser,function(B){if(B=="yes"){window.open(A.currentTarget.href)}},this)};LarsViewer.QuestionBrowserOpenNode=function(A){Ext.Msg.confirm(A.attributes.lars_ref,Lars.dialog.link.open_browser,function(B){if(B=="yes"){window.open(A.attributes.lars_ref)}},this)};LarsViewer.QuestionBrowserOpenPDF=function(A){Ext.Msg.show({title:A.attributes.lars_ref,msg:Lars.dialog.link.open_both+"<br><i>"+A.attributes.lars_ref+"</i>",buttons:{ok:Lars.dialog.link.button_app,no:Lars.dialog.link.button_browser,cancel:Ext.MessageBox.buttonText.cancel},icon:Ext.MessageBox.QUESTION,animEl:"elId",fn:function(B){if(B=="ok"){Ext.getCmp("main-tabs").fireEvent("viewIFrameTabAll",A)}else{if(B=="no"){window.open(A.attributes.lars_ref)}}}})};LarsGridConfig={larsObj:Ext.data.Record.create([{name:"id"},{name:"OBJ_NAME",type:"string"},{name:"LARS_CONTENT",type:"string"},{name:"LARS_COMMENT",type:"string"},{name:"OBJ_CREATION_TIME",type:"date",dateFormat:"U"},{name:"OBJ_LAST_CHANGED",type:"date",dateFormat:"U"},{name:"DOC_LAST_MODIFIED",type:"date",dateFormat:"U"},{name:"OBJ_DESC",type:"string"},{name:"OBJ_AUTHOR",type:"string"},{name:"type",type:"string"},{name:"LARS_TYPE",type:"string"},{name:"OBJ_TYPE",type:"string"},{name:"is_home",type:"boolean"},{name:"OBJ_PATH",type:"string"},{name:"LARS_FOLDER",type:"string"},{name:"action0",type:"string"},{name:"action1",type:"string"},{name:"action2",type:"string"},{name:"action3",type:"string"},{name:"action4",type:"string"},{name:"action5",type:"string"},{name:"qtip0",type:"string"},{name:"qtip1",type:"string"},{name:"qtip2",type:"string"},{name:"qtip3",type:"string"},{name:"qtip4",type:"string"},{name:"qtip5",type:"string"},{name:"hide1",type:"boolean"},{name:"hide2",type:"boolean"},{name:"hide3",type:"boolean"},{name:"hide4",type:"boolean"},{name:"hide5",type:"boolean"},{name:"container",type:"string"}]),dsType:new Ext.data.SimpleStore({id:0,fields:["id","text"],data:[[0,"-"],[1,"Aufgabe"],[2,"Lösung"],[3,"Info"]]}),expander:new Ext.grid.RowExpander({tpl:new Ext.Template("<p><b>Inhalt:</b><br>{LARS_CONTENT}<br></p>"),lazyRender:true,enableCaching:false}),applyRowClass:function(A,E,D,B){switch(A.data.LARS_TYPE){case"0":return"x-grid3-row-collapsed";break;case"1":return"pinkrow x-grid3-row-expanded";break;case"2":return"greenrow x-grid3-row-collapsed";break;case"3":return"x-grid3-row-expanded";break;default:return"x-grid3-row-collapsed";break}},applyRowClassWithout:function(A,E,D,B){switch(A.data.LARS_TYPE){case"0":return"x-grid3-row-collapsed";break;case"1":return"pinkrow x-grid3-row-collapsed";break;case"2":return"greenrow x-grid3-row-collapsed";break;case"3":return"x-grid3-row-collapsed";break;default:return"x-grid3-row-collapsed";break}},renderType:function(F,A,B,G,E,D){switch(F){case"Text":A.css="type-text";return;case"Bild":A.css="type-picture";return;case"Download":A.css="type-download";return;case"Link":A.css="type-link";return}},renderCell:function(A){switch(A){case 0:break;case 1:return"pinkrow";break;case 2:return"greenrow";break;default:}},downloadFile:function(A){var D=Ext.id();var B=document.createElement("iframe");B.id=D;B.name=D;B.className="x-hidden";B.src=A;document.body.appendChild(B)},changeAttribute:function(E,B,D,A){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"update",key:"id",keyValue:E,id:E,field:B,fieldValue:D,originalValue:A},failure:function(F,G){Ext.MessageBox.alert(Lars.msg.failure_connection,"")},success:function(F,G){var H=Ext.util.JSON.decode(F.responseText);if(H.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,H.name?H.name:" ",3)}else{Ext.ux.ToastLars.msg(LArs.msg.failure,Lars.msg.failure_nothing_changed+"<br>"+H.name,4)}}})},onCollapseExpand:function(A){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"update",key:123,keyValue:123,id:123,field:"LARS_EAST_COLLAPSED",fieldValue:A.collapsed?0:1,originalValue:A.collapsed?1:0},failure:function(B,D){},success:function(B,D){var E=Ext.util.JSON.decode(B.responseText)}})}};LarsUpdater=function(A){Ext.apply(this,A);this.myReader=new Ext.data.JsonReader({root:"data",id:"id"},["id","items"]);this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"lars_update.php",method:"POST",timeout:timeoutUpdateConnection}),reader:this.myReader});this.tmpMyReader=new Ext.data.JsonReader({id:"id"},LarsGridConfig.larsObj);this.tmpStore=new Ext.data.Store({reader:this.tmpMyReader});this.store.on("load",function(D,B,E){D.each(function(F){var G=F.id;this.tmpStore.loadData(F.data.items)},this)},this);this.tmpStore.on("load",function(F,E,G){var I=[];for(var H=0,D=E.length,B;H<D;H++){B=E[H];current=this.elements[B.data.container];if(!current){Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.dialog_updater_error,10);continue}if(oldRecord=current.store.getById(B.id)){var J=current.grid.view.getRow(current.store.indexOf(oldRecord));if(Ext.fly(J).hasClass("x-grid3-row-expanded")){Ext.apply(oldRecord,B);if(oldRecord.iFrame){oldRecord.iFrame.setSrc()}else{if(current.expander){current.grid.expander.toggleRow(J);current.grid.expander.toggleRow.defer(100,current.grid.expander,[J]);current.grid.view.refresh()}else{current.grid.view.refresh()}}}else{Ext.apply(oldRecord,B);current.grid.getView().refreshRow(oldRecord)}}else{I.push(B)}}for(var H=0,D=I.length,I;H<D;H++){current.store.addSorted(I[H])}},this)};Ext.extend(LarsUpdater,Ext.util.Observable,{elements:{},updateIds:new Array(),add:function(D,B,A){this.elements[D]={id:D,grid:B,store:A};this.updateIds.push(D);Ext.Ajax.request({url:"lars_update.php",params:{task:"updateIds",id:Ext.util.JSON.encode(this.updateIds)},success:function(E,F){},scope:this})},remove:function(D){if(this.elements[D]){delete this.elements[D]}for(var B=0,A=this.updateIds.length,D;B<A;B++){if(D==this.updateIds[B]){this.updateIds.splice(B,1)}}}});updateUsers=function(){LarsUpdaterUsers.defer(onlineStatusInterval,this,[])};LarsUpdaterUsers=function(){Ext.Ajax.request({url:"lars_update.php",params:{task:"getUsersLastLogin"},method:"POST",callback:updateUsers,timeout:timeoutUpdateConnection,success:function(D,J){var B=Ext.util.JSON.decode(D.responseText);if(B.success){var I=B.online;var H=B.offline;var E='<img class="online" unselectable="on" src="http://extjs.com/s.gif"/>';var A="";for(var G=0;G<I.length;G++){var F=Ext.getCmp("topics-tree-t").getNodeById(I[G]);if(F){if(!F.origText){F.origText=F.text;F.setText(F.text+E)}else{F.setText(F.origText+E)}}}for(var G=0;G<H.length;G++){var F=Ext.getCmp("topics-tree-t").getNodeById(H[G]);if(F){if(!F.origText){F.origText=F.text}else{if(F.origText!=F.text){F.setText(F.origText)}}}}}},scope:this})};Ext.override(Ext.grid.GridPanel,{startAutoUpdate:function(A){larsUpdater.add(A,this,this.store)},stopAutoUpdate:function(A){larsUpdater.remove(A)}});Ext.util.JSON.decode=function(json){if(!json){return{success:false,name:Lars.msg.failure_no_response}}if(json[0]=="{"){return eval("("+json+")")}else{return{success:false,name:Lars.msg.failure_no_response}}};Ext.decode=Ext.util.JSON.decode;Ext.override(Ext.Window,{focusFirst:function(A){A.form.items.items[0].focus(false,100)}});Ext.override(Ext.grid.GridView,{focusRow:function(A){}});Ext.override(Ext.grid.GroupingView,{focusRow:function(A){}});LarsBrowseFileWindow=function(B,A){this.browseField=B;this.node=A;this.id=new Ext.form.Hidden({id:"id",value:A.id,fieldLabel:"ID des Ordners",hidden:true});this.bidHidden=new Ext.form.Hidden({id:"bidHidden",value:true,fieldLabel:"Bild verstecken",hidden:true});this.description=new Ext.form.Field({id:"description",fieldLabel:Lars.dialog.browseFile.description,width:450,msgTarget:"under"});this.filePath=new Ext.form.Field({id:"file",fieldLabel:Lars.dialog.browseFile.filePath,inputType:"file",width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",fileUpload:true,url:"lars_upload_file.php",method:"post",id:"upload-form",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.description,this.filePath,this.id,this.bidHidden],border:false,timeout:1800000,bodyStyle:"background:transparent;padding:10px;"});LarsBrowseFileWindow.superclass.constructor.call(this,{title:Lars.dialog.browseFile.title+this.node.text,iconCls:"add-page",id:"add-download-win",autoHeight:true,width:500,resizable:false,modal:true,buttons:[{text:Lars.dialog.browseFile.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy();var D=Ext.getCmp("advimage");D.el.setZIndex(89999)},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsBrowseFileWindow,Ext.Window,{onAdd:function(A){this.el.mask(Lars.msg.loading,"x-mask-loading");Ext.getCmp("upload-form").getForm().submit({success:function(E,B){var D={};if(B.response.responseText){D=Ext.util.JSON.decode(B.response.responseText)}if(D.success){Ext.ux.ToastLars.msg(Lars.dialog.browseFile.msg_success,D.name?D.name:" ",5);if(Ext.getCmp(this.node.id+"Grid")){Ext.getCmp(this.node.id+"Grid").store.load()}var F=D.fileName;this.browseField.value=F;this.destroy()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.dialog.browseFile.msg_failure+"<br>"+(D.name?D.name:" ... "),10);this.el.unmask()}},failure:function(E,B){var D={};if(B.response.responseText){D=Ext.util.JSON.decode(B.response.responseText)}Ext.ux.ToastLars.msg(Lars.msg.failure,D.name?D.name:Lars.msg.failure_connection,10);this.el.unmask()},scope:this})}});LarsTreePanelFolderLinks=function(){LarsTreePanelFolderLinks.superclass.constructor.call(this,{id:"resources-tree",margins:"0 0 0 0",enableDD:true,dropConfig:{appendOnly:true},bodyBorder:false,animate:false,shim:false,rootVisible:false,lines:true,autoScroll:true,containerScroll:true,root:new Ext.tree.AsyncTreeNode({text:"ressources",loader:new Ext.tree.TreeLoader({dataUrl:"lars_folder.php",baseParams:{task:"getResources"}}),id:"folder"}),tbar:[{iconCls:"folder-add",text:"",tooltip:Lars.main.tree.add_resource_folder,handler:function(){this.win=new LarsResourcesAddWindow();this.win.show();this.win.setZIndex(90000)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){Ext.getCmp("resources-tree").root.reload()}}]});new Ext.tree.TreeSorter(this,{folderSort:true});this.expand();this.getSelectionModel().on({selectionchange:function(B,A){if(A){this.fireEvent("projectselect",A.attributes.id)}},scope:this});this.addEvents({schuelerEditTab:true});this.on("contextmenu",this.onContextMenu,this);this.on({dblClick:{fn:function(B,A){if(B.isLeaf()&&B.attributes.iconCls!="link"){Ext.getCmp("main-tabs").fireEvent("viewIFrameTab",B)}else{if(B.attributes.iconCls=="report"){Ext.getCmp("main-tabs").fireEvent("viewPackage",B)}else{if(B.attributes.lars_ref.match(window.location.host)){LarsViewer.QuestionTabOrBrowserOpen(B)}else{if(B.attributes.lars_ref.length>5&&!B.attributes.lars_ref.match(window.location.host)){LarsViewer.QuestionBrowserOpenNode(B)}}}}}}});this.on({click:{fn:function(B,A){B.toggle()}}});this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})});this.on("render",function(A){var B=new Ext.dd.DropZone(A.getEl(),{ddGroup:"resources",onDragDrop:function(D,E){alert("dragdrop")},notifyDrop:function(D,G,F){var E=G.getTarget("div.x-panel");this.win=new LarsResourcesAddNameWindow(F.node);this.win.show();this.win.setZIndex(90000)},onContainerOver:function(E,F,D){return this.dropAllowed}})})};Ext.extend(LarsTreePanelFolderLinks,Ext.tree.TreePanel,{onContextMenu:function(A,B){if(A.isLeaf()){this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.main.tree.download,id:"add23121",handler:function(){LarsGridConfig.downloadFile("tools/get.php?object="+rec.data.id)},iconCls:"page-save"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(A);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.del,id:"add13243",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.grid.del_confirm,function(D){if(D=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:A.id,name:A.attributes.origName,task:"deleteItem"},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){A.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}}})}},this)},iconCls:"delete"},{iconCls:"copy",text:Lars.copy_document,tooltip:Lars.copy_document_tt,handler:function(E,D,G,F){A.data={OBJ_DESC:A.text};fileRecordToCopy=A;packageNodeToCopy=false},scope:this}]});if(A.attributes.mimeType.match("text")){this.menu.add({text:Lars.main.show,id:"add2",handler:function(){Ext.getCmp("main-tabs").fireEvent("viewTab",A)},iconCls:"page"},{text:Lars.main.edit,id:"add1",handler:function(){Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",A)},iconCls:"editPage"})}}else{if(A.attributes.iconCls!="folder-link"){this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.main.show_as_package,id:"add23121",handler:function(){Ext.getCmp("main-tabs").fireEvent("viewPackage",A)},iconCls:"package-go"},{text:Lars.main.tree.add_package_here,id:"add3342344",handler:function(){this.win=new AssignmentWindow(A);this.win.show();this.win.setZIndex(90000)},iconCls:"report-add"},{iconCls:"folder-add",text:Lars.main.tree.add_folder_here,handler:function(){this.win=new LarsAddFolderLinksWindow(A.attributes.id);this.win.show();this.win.setZIndex(90000)},scope:this},{text:Lars.main.refresh_here,id:"add223453121",handler:function(){A.reload()},iconCls:"icon-refresh"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(A);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.main.tree.folder_properties,id:"add2314521",menu:{items:[{text:Lars.main.tree.folder_as_package,id:"add23516721",handler:function(){LarsGridConfig.changeAttribute(A.id,"OBJ_TYPE","ASSIGNMENT_PACKAGE",A.attributes.OBJ_TYPE);A.parentNode.reload()},iconCls:"report"},{text:Lars.main.tree.folder_as_normal,id:"add235121",handler:function(){LarsGridConfig.changeAttribute(A.id,"OBJ_TYPE","",A.attributes.OBJ_TYPE);A.parentNode.reload()},iconCls:"folder"}]},iconCls:"folder-config"},{text:Lars.del,id:"add13452443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.delete_folder_confirm,function(D){if(D=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:A.id,name:A.attributes.origName,task:"deleteItem"},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){A.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}}})}},this)},iconCls:"delete"}]});if(A.attributes.OBJ_TYPE=="ASSIGNMENT_PACKAGE"){this.menu.add({text:Lars.main.tree.copy_package,id:"add2334d514561",handler:function(){fileRecordToCopy=false;packageNodeToCopy=A},iconCls:"copy"})}else{this.menu.add({text:Lars.main.tree.copy_folder,id:"add2334d54514561",handler:function(){fileRecordToCopy=false;packageNodeToCopy=A},iconCls:"copy"})}}else{this.menu=new Ext.menu.Menu({})}}if(A.attributes.iconCls=="folder-link"){this.menu.add({text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(A);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.main.tree.add_package_here,id:"add54634",handler:function(){this.win=new AssignmentWindow(A);this.win.show();this.win.setZIndex(90000)},iconCls:"report-add"},{iconCls:"folder-add",text:Lars.main.tree.add_folder_here,handler:function(){this.win=new LarsAddFolderLinksWindow(A.attributes.id);this.win.show();this.win.setZIndex(90000)},scope:this},{text:Lars.main.refresh_here,id:"add223453121",handler:function(){A.reload()},iconCls:"icon-refresh"},{text:Lars.main.tree.del_link,id:"add231231",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_confirm_link,function(D){if(D=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:A.id,name:A.attributes.origName,task:"deleteItem"},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){A.parentNode.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}}})}},this)},iconCls:"delete"})}if(packageNodeToCopy&&!A.isLeaf()){this.menu.add({text:Lars.main.tree.insert_here,id:"add23141972340233",handler:function(){Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2_folder+packageNodeToCopy.attributes.text+Lars.main.tree.copy_confirm_3+A.attributes.text+Lars.main.tree.copy_confirm_4,function(D){if(D=="yes"){Ext.Ajax.request({url:"lars_json.php",params:{task:"copyFolder",sourceId:packageNodeToCopy.id,targetId:A.id},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){Ext.ux.ToastLars.msg(Lars.msg.success_copy,G.name?G.name:" ",3);A.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,G.name?G.name:" ",5)}},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})}},this)},iconCls:"paste"})}if(fileRecordToCopy&&!A.isLeaf()){this.menu.add({text:Lars.main.tree.copy_document,id:"add231419472340233",handler:function(){Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2_document+fileRecordToCopy.data.OBJ_DESC+Lars.main.tree.copy_confirm_3+A.attributes.text+Lars.main.tree.copy_confirm_4,function(D){if(D=="yes"){Ext.Ajax.request({url:"lars_json.php",params:{task:"copyFile",sourceId:fileRecordToCopy.id,targetId:A.id},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){Ext.ux.ToastLars.msg(Lars.msg.success_copy,G.name?G.name:" ",3);A.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,G.name?G.name:" ",5)}},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})}},this)},iconCls:"paste"})}if(A.attributes.lars_ref.match(window.location.host)){this.menu.add({text:Lars.main.grid.open_link_2,id:"add223453121",handler:function(){LarsViewer.QuestionTabOrBrowserOpen(A)},scope:this,iconCls:"link"})}else{if(A.attributes.lars_ref.length>5){this.menu.add({text:Lars.main.grid.open_link_2,id:"add223453121",handler:function(){LarsViewer.QuestionBrowserOpenNode(A)},scope:this,iconCls:"link"})}}this.menu.showAt(B.getXY())},afterRender:function(){LarsTreePanelFolderLinks.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsTreePanelLinks=function(){LarsTreePanelLinks.superclass.constructor.call(this,{id:"links-tree",margins:"0 0 0 0",bodyBorder:false,shim:false,ddGroup:"TreeDD",animate:false,enableDrag:true,rootVisible:false,lines:true,autoScroll:true,containerScroll:true,root:new Ext.tree.AsyncTreeNode({text:"",loader:new Ext.tree.TreeLoader({dataUrl:"lars_folder.php",baseParams:{task:"getResourcesLinks"}}),id:"links"}),tbar:[{iconCls:"link-add",text:"",tooltip:Lars.main.tree.add_link,handler:function(){this.win=new LarsAddLinkWindow();this.win.show();this.win.setZIndex(90000)},scope:this},{iconCls:"folder-add",text:"",tooltip:Lars.main.tree.add_folder,handler:function(){this.win=new LarsAddFolderLinksWindow("root");this.win.show();this.win.setZIndex(90000)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){Ext.getCmp("links-tree").root.reload()}}]});this.expand();this.getSelectionModel().on({selectionchange:function(B,A){if(A){this.fireEvent("projectselect",A.attributes.id)}},scope:this});this.addEvents({schuelerEditTab:true});this.on("contextmenu",this.onContextMenu,this);this.on({dblClick:{fn:function(B,A){if(B.isLeaf()&&B.attributes.lars_ref.match(window.location.host)){LarsViewer.QuestionTabOrBrowserOpen(B)}else{LarsViewer.QuestionBrowserOpenNode(B)}}}});this.on({click:{fn:function(B,A){B.toggle()}}});this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})})};Ext.extend(LarsTreePanelLinks,Ext.tree.TreePanel,{onContextMenu:function(A,B){if(!A.isLeaf()){this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.main.tree.add_link_here,id:"add142365",handler:function(){this.win=new LarsAddLinkWindow(A);this.win.show();this.win.setZIndex(90000)},iconCls:"link-add"},{iconCls:"folder-add",text:Lars.main.tree.add_folder_here,handler:function(){this.win=new LarsAddFolderLinksWindow(A.attributes.id);this.win.show();this.win.setZIndex(90000)},scope:this},{text:"Löschen",id:"add132443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.delete_folder_confirm,function(D){if(D=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:A.id,name:A.attributes.origName,task:"deleteItem"},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){Ext.getCmp("links-tree").root.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.del_failure_msg_folder,5)}}})}},this)},iconCls:"delete"}]})}if(A.isLeaf()){this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.del,id:"add13243",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_link,function(D){if(D=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:A.id,name:A.attributes.origName,task:"deleteItem"},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){Ext.getCmp("links-tree").root.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.del_failure_msg_link,5)}}})}},this)},iconCls:"delete"}]})}this.menu.add({text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(A);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"});this.menu.showAt(B.getXY())},afterRender:function(){LarsTreePanelLinks.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsResourcesPanel=function(A,E,B,D,F){LarsResourcesPanel.superclass.constructor.call(this,{defaults:{collapsible:true,split:true},layout:"fit",region:E,id:B,title:F,split:true,width:200,minSize:175,maxSize:400,height:200,minHeight:150,header:true,floating:true,shadow:true,border:true,frame:true,hideBorders:true,margins:D,cmargins:"8 0 8 0",layoutConfig:{animate:true},items:[A],tools:[{id:"right",handler:function(){Ext.getCmp("main-east").collapse(true)}}]})};Ext.extend(LarsResourcesPanel,Ext.Panel,{afterRender:function(){LarsResourcesPanel.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsResourcesAddWindow=function(A){this.node=A;this.treePanel=new LarsTreePanel(A);LarsResourcesAddWindow.superclass.constructor.call(this,{title:Lars.dialog.resourcesAdd,layout:"border",iconCls:"folder",id:"resources-explorer-win",width:250,height:350,autoScroll:true,items:this.treePanel})};Ext.extend(LarsResourcesAddWindow,Ext.Window,{});LarsResourcesAddNameWindow=function(A){this.node=A;this.name=new Ext.form.Field({id:"folder-link-name",fieldLabel:Lars.dialog.resourcesAddName.fieldLabel,width:450,value:this.node.attributes.text,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onSet,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsResourcesAddNameWindow.superclass.constructor.call(this,{title:Lars.dialog.resourcesAddName.title,iconCls:"folder-add",id:"add-folder-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.resourcesAddName.button_add,handler:this.onSet,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsResourcesAddNameWindow,Ext.Window,{onSet:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var A=this.name.getValue();Ext.Ajax.request({scope:this,url:"lars_folder.php",params:{node:this.node.id,name:A,task:"setResource"},success:function(B,D){var E=Ext.util.JSON.decode(B.responseText);if(E.success){Ext.ux.ToastLars.msg(Lars.dialog.resourcesAddName.msg_success,"",5);Ext.getCmp("resources-tree").root.reload();this.destroy()}},failure:function(B,D){Ext.ux.ToastLars.msg(Lars.msg.failure,"",5);this.destroy()}})}});LarsCommentWindow=function(A){this.primaryKey="id";this.record=A;this.name=new Ext.form.HtmlEditor({id:"document-comment",fieldLabel:Lars.dialog.comment.fieldLabel,height:200,width:350,value:(this.record.data.LARS_COMMENT==0)?"":this.record.data.LARS_COMMENT,msgTarget:"under",enableAlignments:false,enableColors:false,enableFont:false,enableFontSize:false,enableLinks:false,enableLists:false,enableSourceEdit:false});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsCommentWindow.superclass.constructor.call(this,{title:Lars.dialog.comment.title_1+A.data.OBJ_DESC+Lars.dialog.comment.title_2,iconCls:"comment-edit",id:"change-com-win",autoHeight:true,width:400,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.comment.button_save,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsCommentWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var A=this.name.getValue();Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"update",key:this.primaryKey,keyValue:this.record.data.id,id:this.record.data.id,field:"LARS_COMMENT",fieldValue:A,originalValue:this.record.LARS_COMMENT},failure:function(B,D){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection)},success:function(B,D){var E=Ext.util.JSON.decode(B.responseText);if(E.success==true){Ext.ux.ToastLars.msg(Lars.dialog.comment.msg_success,E.name?E.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.dialog.comment.msg_failure+"<br>"+E.name,4)}}});this.destroy()}});LarsDesktopDiscussion=function(D,B){this.primaryKey="id";D.parentElement=D.id+"discussion-grid";this.expander=new Ext.grid.RowExpander({tpl:new Ext.Template("<p> {LARS_CONTENT}</p>"),lazyRender:true,enableCaching:false});this.tbar=[{iconCls:"comments-add",text:Lars.main.discussion.write_new_message,tooltip:Lars.main.discussion.write_new_message_tt,handler:function(){D.parentElement=D.id+"discussion-grid";this.win=new LarsMessageWindow(D,"newMessage");this.win.show();this.win.setZIndex(90000)},scope:this},"->",{iconCls:"help",text:"",tooltip:Lars.main.help_and_news_tt,handler:function(){Ext.getCmp("lars-desktop-tab-panel").setActiveTab("about-panel")},scope:this}];var A=new Ext.data.JsonReader({root:"messages",id:this.primaryKey,totalProperty:"totalCount",remoteSort:true},[this.primaryKey,"OBJ_NAME","OBJ_DESC","OBJ_AUTHOR",{name:"DOC_LAST_MODIFIED",type:"date",dateFormat:"U"},"LARS_CONTENT"]);this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"lars_json.php",method:"POST"}),baseParams:{task:"getDiscussion",id:D.id},reader:A,sortInfo:{field:"DOC_LAST_MODIFIED",direction:"DESC"}});this.store.on("load",function(){var E=0;this.store.filterBy(function(G){var F=G.data.DOC_LAST_MODIFIED.getTime()/1000;if(F>lastLoginUnix){E++;return true}else{return true}},this);Ext.getDom("new-messages-count").innerHTML="<b>"+E+"</b> "},this);this.store.on("add",function(E,G,F){if(Ext.getCmp("lars-desktop-tab-panel").activeTab.id!=larsDesktopId+"discussion-grid"||Ext.getCmp("main-tabs").activeTab.id!="lars-desktop"){Ext.Ajax.request({url:"lars_json.php",params:{task:"getUserIcon",name:G[0].data.OBJ_AUTHOR},success:function(H,I){var J=Ext.util.JSON.decode(H.responseText);imageUri=J.imageUri;Ext.ux.ToastLarsDiscussion.msg(imageUri,'<font color="#578d00">'+G[0].data.OBJ_AUTHOR+"</font>: "+G[0].data.OBJ_DESC,G[0].data.LARS_CONTENT,10)},scope:this})}});this.store.setDefaultSort("DOC_LAST_MODIFIED","DESC");this.columns=[{id:"Titel",header:Lars.main.discussion.columns.title,dataIndex:"OBJ_DESC",sortable:true,width:300,renderer:this.formatTitle},{header:Lars.main.discussion.columns.author,dataIndex:"OBJ_AUTHOR",width:100,hidden:true,sortable:true},{header:Lars.main.discussion.columns.content,dataIndex:"LARS_CONTENT",width:10,hidden:true,sortable:false},{id:"last",header:Lars.main.discussion.columns.date,dataIndex:"DOC_LAST_MODIFIED",width:150,renderer:this.formatDate,sortable:true}];this.bbar=new Ext.PagingToolbar({pageSize:10,store:this.store,displayInfo:true});LarsDesktopDiscussion.superclass.constructor.call(this,{title:Lars.main.discussion.title,iconCls:"comments",split:true,listeners:LarsViewer.LinkInterceptor,frame:false,hideHeaders:true,height:"200",id:D.id+"discussion-grid",loadMask:{msg:Lars.main.discussion.loadMask},sm:new Ext.grid.RowSelectionModel({singleSelect:true}),view:new Ext.grid.GridView({forceFit:true,enableRowBody:true,showPreview:true,showAll:true,getRowClass:this.applyRowClass,emptyText:Lars.main.discussion.emptyText,deferEmptyText:true})});this.addEvents({schuelerEditTab:true});this.on("rowcontextmenu",this.onContextClick,this);this.on("rowdblclick",this.showContentWindow,this)};Ext.extend(LarsDesktopDiscussion,Ext.grid.GridPanel,{onContextClick:function(E,D,F){var G=E.getView().getRow(D);var A=E.store.getAt(D);var B={};B.id=A.data.id;B.text=A.data.OBJ_DESC;B.parentElement=E.id;this.menu=new Ext.menu.Menu({id:"grid-discussion-ctx",items:[{iconCls:"editPage",text:Lars.main.discussion.menu.edit,tooltip:Lars.main.discussion.menu.edit_tt,handler:function(){this.win=new LarsMessageWindow(A,"editMessage");this.win.show();this.win.setZIndex(90000)},scope:this},{iconCls:"delete",text:Lars.main.discussion.menu.del,tooltip:Lars.main.discussion.menu.del_tt,handler:function(){Ext.Msg.confirm(Lars.main.discussion.menu.del_confirm_1,Lars.main.discussion.menu.del_confirm_2+" "+this.ctxRecord.data.OBJ_DESC+"",function(H){if(H=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:this.ctxRecord.id,name:this.ctxRecord.data.OBJ_NAME,task:"deleteItem"},success:function(I,J){var K=Ext.util.JSON.decode(I.responseText);if(K.success){this.store.remove(this.store.getById(this.ctxRecord.id));Ext.ux.ToastLars.msg(Lars.main.discussion.menu.del_success_msg,"",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.discussion.menu.del_failure_msg,5)}}})}},this)},scope:this}]});this.menu.on("hide",this.onContextHide,this);F.stopEvent();if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}this.ctxRow=this.view.getRow(D);this.ctxRecord=this.store.getAt(D);Ext.fly(this.ctxRow).addClass("x-node-ctx");this.menu.showAt(F.getXY())},onContextHide:function(){if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}},togglePreview:function(A){this.view.showPreview=A;this.view.refresh()},applyRowClass:function(A,F,E,D){if(this.showPreview){var B=Ext.util.Format;if(this.showAll){E.body='<font size="2"><p>'+A.data.LARS_CONTENT+"</p>"}else{E.body="<p>"+B.ellipsis(B.stripTags(A.data.LARS_CONTENT),300)+"</p>"}return"x-grid3-row-expanded"}return"x-grid3-row-collapsed"},formatDate:function(B){if(!B){return""}var A=new Date();var E=A.clearTime(true);var D=B.clearTime(true).getTime();if(D==E.getTime()){return"Heute "+B.dateFormat("d-m-Y H:i")}E=E.add("d",-6);if(E.getTime()<=D){return B.dateFormat("d-m-Y H:i")}return B.dateFormat("d-m-Y H:i")},formatTitle:function(B,D,A){return String.format('<div class="comment"><b>{0}</b> <span class="author"> '+Lars.main.discussion.created_of+"{1}</span></div>",B,A.data.OBJ_AUTHOR,A.id,A.data.forumid)}});LarsDesktop=function(){LarsDesktop.superclass.constructor.call(this,{margins:"0 0 0 0",layout:"border",hideMode:!Ext.isIE?"nosize":"display",region:"center",autoScroll:false,})};Ext.extend(LarsDesktop,Ext.Panel,{});LarsDesktopNorth=function(){var A=function(E,D){return'<div id="hover-'+E+'" class="x-btn-navigation-div-bg"><div id="item-'+E+'" class="item clickable x-btn-navigation-div '+E+'"><span id="'+D+'"><div class="loading-indicator">&nbsp;</div></span></div></div>'};this.center=new Ext.Panel({id:"navigation-panel",layout:"table",region:"center",layoutConfig:{columns:5},defaults:{bodyStyle:"padding:10px 0px 0 0",height:70},items:[{html:A("nav-messages","new-messages-count"),},{html:A("nav-documents","new-documents-count"),},{html:A("nav-messages-documents","new-messages-documents-count")},{html:A("nav-documents_other","new-documents-other-count"),},{html:A("nav-messages-other","new-messages-other-count"),}],});this.center.on("afterlayout",function(){Ext.fly("navigation-panel").on({click:{stopEvent:true,fn:function(E,D){B(D)}}});Ext.fly("item-nav-documents").set({qtip:Lars.main.north.new_documents});Ext.fly("item-nav-messages").set({qtip:Lars.main.north.new_mymessages});Ext.fly("item-nav-messages-other").set({qtip:Lars.main.north.new_messages});Ext.fly("item-nav-documents_other").set({qtip:Lars.main.north.new_documents_others});Ext.fly("item-nav-messages-documents").set({qtip:Lars.main.north.new_messages_packages})},this);var B=function(E){var D=Ext.getCmp("lars-desktop-grid");switch(E.id){case"item-nav-documents":result="lars-desktop-grid";D.store.filterBy(function(I){var G=I.data.OBJ_TYPE;var J=new RegExp("LARS_MESSAGES","gi");var F=I.data.is_home;var H=new RegExp("true","gi");return !J.test(G)&&H.test(F)},this);break;case"item-nav-messages":result=larsDesktopId+"discussion-grid";break;case"item-nav-messages-other":result="lars-desktop-grid";D.store.filterBy(function(I){var G=I.data.OBJ_TYPE;var J=new RegExp("LARS_MESSAGES","gi");var F=I.data.is_home;var H=new RegExp("true","gi");return J.test(G)&&!H.test(F)},this);break;case"item-nav-documents_other":result="lars-desktop-grid";D.store.filterBy(function(I){var G=I.data.OBJ_TYPE;var J=new RegExp("LARS_MESSAGES","gi");var F=I.data.is_home;var H=new RegExp("true","gi");return !J.test(G)&&!H.test(F)},this);break;case"item-nav-messages-documents":result="lars-desktop-grid";D.store.filterBy(function(I){var G=I.data.OBJ_TYPE;var J=new RegExp("LARS_MESSAGES","gi");var F=I.data.is_home;var H=new RegExp("true","gi");return J.test(G)&&H.test(F)},this);break;case"item-nav-help":result="about-panel";break;default:result=null}if(result!=null){Ext.getCmp("lars-desktop-tab-panel").setActiveTab(result)}};this.top=new Ext.Panel({id:"navigation-top",height:70,region:"north",html:'<div id="mynavbla" style="text-align: right;"><table width="100%"><tr id="nav-top"><td width="60%" ><img style="margin-top: 0px;" src="moko/img/MokoDesk_shadow.png" /></td><td width="40%"><span id="login-info">'+loginInfo+"</span></td></tr></table></div>",border:false,bodyStyle:"background:transparent;padding:0px;"});this.all=new Ext.Panel({split:true,frame:false,layout:"border",region:"center",margins:"0 0 0 0",frame:false,bodyBorder:false,viewConfig:{forceFit:true},id:"lars-desktop-center-center",margins:"0 0 0 0",items:[this.center,this.top]});this.all.on("resize",function(E,D,F){},this);LarsDesktopNorth.superclass.constructor.call(this,{split:true,frame:false,layout:"border",height:150,region:"north",margins:"0 0 0 0",frame:false,bodyBorder:false,viewConfig:{forceFit:true},id:"lars-desktop-north",margins:"0 0 0 0",items:[this.all]})};Ext.extend(LarsDesktopNorth,Ext.Panel,{});LarsDesktopNotes=function(){this.content=new Ext.form.HtmlEditor({id:"desktop-calendar-form",name:Lars.main.notes,value:"",tbar:"",toolbar:"",enableAlignments:false,enableColors:false,hideLabel:true,enableFormat:false,enableFont:false,enableFontSize:false,enableLinks:false,enableLists:false,enableSourceEdit:false});this.getContent();this.form=new Ext.FormPanel({labelAlign:"top",buttonAlign:"center",layout:"fit",items:[this.content],buttons:[{align:"center",text:Lars.button_save,cls:"x-btn button",ctCls:"x-btn button",handler:this.onAdd,scope:this}],border:false,bodyStyle:"background:transparent;padding:4px 4px 0 0;"});LarsDesktopNotes.superclass.constructor.call(this,{collapsible:true,width:200,split:true,region:"east",layout:"fit",id:"lars-desktop-calendar",margins:"0 0 0 0",viewConfig:{forceFit:true},autoScroll:true,buttonAlign:"center",items:this.form})};Ext.extend(LarsDesktopNotes,Ext.Panel,{onAdd:function(){var A=this.content.getValue();Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"saveAppointments",content:A},failure:function(B,D){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection)},success:function(B,D){var E=Ext.util.JSON.decode(B.responseText);if(E.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,E.name?E.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+E.name,4)}}})},getContent:function(){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"getAppointments"},failure:function(A,B){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection)},success:function(A,B){var D=Ext.util.JSON.decode(A.responseText);if(D.success==true){this.content.setValue(D.content)}else{this.content.setValue(Lars.msg.failure_connection)}}})}});LarsDesktopGrid=function(G){this.primaryKey="id";this.tbar=[{text:"Rückschau",menu:[{text:"24 Stunden",handler:function(){this.changeTime(24)},scope:this},{text:"Eine Woche",handler:function(){this.changeTime(168)},scope:this}],scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.hideHeaders=false;this.view.renderHeaders();Ext.getCmp("lars-desktop-grid").store.load()},scope:this},"-"];this.action=new Ext.ux.grid.RowActions({header:"",actions:[{iconIndex:"action1",qtipIndex:"qtip1",hideIndex:"hide1",iconCls:"whiteIcon",tooltip:""},{iconIndex:"action3",qtipIndex:"qtip3",hideIndex:"hide3",iconCls:"whiteIcon",tooltip:""}]});this.action.on("action",this.onRowAction,this);this.actionFileTypeDesktop=new Ext.ux.grid.RowActions({header:"",actions:[{iconIndex:"action0",qtipIndex:"qtip0",iconCls:"file-dll"},{iconCls:"whiteIcon",qtipIndex:"qtip2",hideIndex:"hide2",iconIndex:"action2"},{iconCls:"whiteIcon",qtipIndex:"qtip5",hideIndex:"hide5",iconIndex:"action5"}]});this.expander=new Ext.grid.RowExpander({tpl:'<div id="desktop-grid-{id}"></div>'});this.expander.on("expand",function(K,J,H,L){switch(J.data.action2){case"page-save":var I=new Ext.Panel({id:"desktop-grid-row-"+J.data.id,html:J.data.LARS_CONTENT,autoHeight:true,renderTo:"desktop-grid-"+J.data.id});break;case"editPage":var I=new Ext.ux.ManagedIframePanel({id:"desktop-grid-row-"+J.data.id,defaultSrc:"tools/get.php?object="+J.data.id,loadMask:true,listeners:{domready:LarsViewer.LinkInterceptorIFrame},renderTo:"desktop-grid-"+J.data.id});I.on("documentloaded",function(){var M=I.getFrame();M.setHeight(M.getBody().scrollHeight)},this);break}});this.larsObj=LarsGridConfig.larsObj;var F=LarsGridConfig.dsState;var A=LarsGridConfig.dsType;var D=new Ext.data.JsonReader({root:"newItems",id:this.primaryKey},this.larsObj);var B=new Ext.data.GroupingStore({proxy:new Ext.data.HttpProxy({url:"lars_json.php",method:"POST",timeout:120000}),baseParams:{task:"getNewItems"},reader:D,groupField:"LARS_FOLDER",sortInfo:{field:"OBJ_DESC",direction:"ASC"}});B.on("loadexception",function(I,H,J){Ext.getDom("new-documents-count").innerHTML="<b>(?)</b> ";Ext.getDom("new-messages-documents-count").innerHTML="<b>(?)</b> ";Ext.getDom("new-documents-other-count").innerHTML="<b>(?)</b> ";Ext.getDom("new-messages-other-count").innerHTML="<b>(?)</b> ";Ext.ux.ToastLars.msg(Lars.main.desktop_grid.timeout_msg_1,Lars.main.desktop_grid.timeout_msg_2,5)},this);B.on("load",function(){var H=Ext.getCmp("lars-desktop-grid");count=0;H.store.filterBy(function(L){var J=L.data.OBJ_TYPE;var M=new RegExp("LARS_MESSAGES","gi");var I=L.data.is_home;var K=new RegExp("true","gi");if(!M.test(J)&&K.test(I)){count++;return true}else{return false}},this);Ext.getDom("new-documents-count").innerHTML=" <b>"+count+"</b>";count=0;H.store.filterBy(function(L){var J=L.data.OBJ_TYPE;var M=new RegExp("LARS_MESSAGES","gi");var I=L.data.is_home;var K=new RegExp("true","gi");if(M.test(J)&&!K.test(I)){count++;return true}else{return false}},this);Ext.getDom("new-messages-other-count").innerHTML="<b>"+count+"</b> ";count=0;H.store.filterBy(function(L){var J=L.data.OBJ_TYPE;var M=new RegExp("LARS_MESSAGES","gi");var I=L.data.is_home;var K=new RegExp("true","gi");if(!M.test(J)&&!K.test(I)){count++;return true}else{return false}},this);Ext.getDom("new-documents-other-count").innerHTML="<b>"+count+"</b> ";count=0;H.store.filterBy(function(L){var J=L.data.OBJ_TYPE;var M=new RegExp("LARS_MESSAGES","gi");var I=L.data.is_home;var K=new RegExp("true","gi");if(M.test(J)&&K.test(I)){count++;return true}else{return false}},this);Ext.getDom("new-messages-documents-count").innerHTML="<b>"+count+"</b> ";Ext.getCmp("lars-desktop-tab-panel").setActiveTab("about-panel")},this);var E=Ext.form;this.cm=new Ext.grid.ColumnModel([this.expander,{id:"id",header:"ID",dataIndex:this.primaryKey,width:20,readOnly:true,sortable:true,hidden:true},this.actionFileTypeDesktop,{header:Lars.main.grid.columns.desc,dataIndex:"OBJ_DESC",sortable:true,editor:new E.TextField({allowBlank:false})},{header:Lars.main.grid.columns.content,dataIndex:"LARS_CONTENT",readOnly:true,hidden:true,width:40},{header:Lars.main.grid.columns.folder,dataIndex:"LARS_FOLDER",hidden:true,readOnly:true,sortable:true,width:100},{header:Lars.main.grid.columns.type,dataIndex:"LARS_TYPE",sortable:true,fixed:true,width:80,hidden:true,editor:new Ext.form.ComboBox({mode:"local",editable:false,triggerAction:"all",store:A,displayField:"text",valueField:"id",valueNotFoundText:Lars.main.grid.columns.valueNotFoundText}),renderer:function(I,H){if(H){H.css=LarsGridConfig.renderCell(I)}record=A.getById(I);if(record){return record.data.text}else{return""}}},{header:Lars.main.grid.columns.last_changed,dataIndex:"OBJ_LAST_CHANGED",width:100,fixed:true,readOnly:true,sortable:true,renderer:function(H){return H.dateFormat("d-m-Y H:i")}},{header:Lars.main.grid.columns.created,dataIndex:"OBJ_CREATION_TIME",readOnly:true,width:100,hidden:true,sortable:true,renderer:function(H){return H.dateFormat("d-m-Y H:i")}},this.action]);LarsDesktopGrid.superclass.constructor.call(this,{collapsible:true,tabTip:Lars.main.desktop_grid.tabTip,loadMask:{msg:Lars.main.desktop_grid.loadMask},id:"lars-desktop-grid",hideHeaders:true,frame:false,height:200,title:Lars.main.desktop_grid.title,titleBeginning:Lars.main.desktop_grid.titleBeginning,iconCls:"table-go",split:true,autoScroll:true,store:B,cm:this.cm,autoSizeColumns:true,autoExpandColumn:"ID",clicksToEdit:1,listeners:LarsViewer.LinkInterceptor,stripeRows:true,margins:"0 0 0 0",cmargins:"0 0 0 0",plugins:[this.expander,this.action,this.actionFileTypeDesktop,new Ext.ux.grid.Search({mode:"local",align:"right",position:"top",iconCls:false,width:150,dateFormat:"d-m-Y H:i",minLength:2})],view:new Ext.grid.GroupingView({emptyText:Lars.main.grid.emptyText,deferEmptyText:true,forceFit:true,groupTextTpl:'{text} ({[values.rs.length]} {[values.rs.length > 1 ? "'+Lars.main.item_p+'" : "'+Lars.main.item_s+'"]})'})});this.addEvents({schuelerEditTab:true});this.addEvents({refreshTab:true});this.on("rowcontextmenu",this.onContextClick,this);this.on("afteredit",this.handleEdit,this);this.on("beforeadd",this.handleEdit,this)};Ext.extend(LarsDesktopGrid,Ext.grid.EditorGridPanel,{onContextClick:function(E,D,F){var G=E.getView().getRow(D);var A=E.store.getAt(D);var B={};B.id=A.data.id;B.text=A.data.OBJ_DESC;this.menu=new Ext.menu.Menu({id:"grid-ctx"});if(A.data.action2=="editPage"){this.menu.add({iconCls:"editPage",text:Lars.edit,tooltip:Lars.main.grid.edit_tt,handler:function(){Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",B)},scope:this})}this.menu.add({iconCls:"delete",text:Lars.del,tooltip:Lars.main.grid.del_tt,handler:function(){Ext.Msg.confirm(Lars.main.grid.del_confirm,B.text+"",function(H){if(H=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:B.id,name:B.text,task:"deleteItem"},success:function(I,J){var K=Ext.util.JSON.decode(I.responseText);if(K.success){E.store.remove(A)}else{Ext.ux.ToastLars.msg(Lasr.msg.failure,Lars.main.grid.del_failure_msg,5)}}})}},this)},scope:this});this.menu.on("hide",this.onContextHide,this);F.stopEvent();if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}this.ctxRow=this.view.getRow(D);this.ctxRecord=this.store.getAt(D);Ext.fly(this.ctxRow).addClass("x-node-ctx");this.menu.showAt(F.getXY())},onContextHide:function(){if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}},updateDB:function(A){if(A.value instanceof Date){var B=A.value.format("U")}else{var B=A.value}Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"update",key:this.primaryKey,keyValue:A.record.data.id,id:A.record.data.id,field:A.field,fieldValue:B,originalValue:A.record.modified},failure:function(D,E){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection);this.store.rejectChanges()},success:function(D,E){var F=Ext.util.JSON.decode(D.responseText);if(F.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,F.name?F.name:" ",3);this.store.commitChanges()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+F.name,4);this.store.rejectChanges()}}})},handleEdit:function(B){if(B){var A=B.field;this.updateDB(B)}else{Ext.Msg.alert(Lars.msg.failure_nothing_changed)}},onRowAction:function(D,G,E,F,B){var A={id:G.data.id,text:G.data.OBJ_DESC,attributes:{iconCls:E,lars_ref:G.data.LARS_CONTENT}};switch(E){case"cut":copy3(G.data.OBJ_PATH);break;case"add-page":this.win=new UploadWindow(this.node,2,G.data.OBJ_DESC+""+Lars.main.grid.solution_attached);this.win.show();this.win.setZIndex(90000);break;case"icon-edit-record":break;case"comment-edit":case"comments":this.win=new LarsCommentWindow(G);this.win.show();this.win.setZIndex(90000);break;case"file-link":if(A.attributes.lars_ref.match(window.location.host)){LarsViewer.QuestionTabOrBrowserOpen(A)}else{LarsViewer.QuestionBrowserOpenNode(A)}break;case"page-save":window.open("tools/get.php?object="+G.data.id);break;case"editPage":Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",A);break;case"tab-go":Ext.getCmp("main-tabs").fireEvent("viewIFrameTab",A);break;case"delete":Ext.Msg.confirm(Lars.main.grid.del_confirm,G.data.OBJ_DESC+"",function(H){if(H=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:G.id,name:G.data.OBJ_NAME,task:"deleteItem"},success:function(I,J){var K=Ext.util.JSON.decode(I.responseText);if(K.success){D.store.remove(G)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.grid.del_failure_msg,5)}}})}},this);break}if(E.match("file")){switch(G.data.action2){case"file-gif":case"file-tiff":case"file-jpeg":case"file-jpg":case"file-png":case"file-bmp":case"editPage":this.expander.toggleRow(F);break;case"pdf":A.attributes={lars_ref:"tools/get.php?object="+A.id,iconCls:A.attributes.iconCls};LarsViewer.QuestionBrowserOpenPDF(A);break;case"page-save":switch(E){case"file-gif":case"file-tiff":case"file-jpeg":case"file-jpg":case"file-png":case"file-bmp":case"file-pdf":this.expander.toggleRow(F);break;default:Ext.Msg.confirm(Lars.main.grid.download_1,Lars.main.grid.download_2,function(H){if(H=="yes"){LarsGridConfig.downloadFile("tools/get.php?object="+G.data.id)}},this);break}break}}},changeState:function(B,A){Ext.Ajax.request({url:"lars_json.php",params:{task:"changeState",id:A.id,state:B},success:function(){Ext.getCmp("topics-tree").root.reload()},scope:this})},changeTime:function(A){this.store.load({params:{task:"getNewItems",time:A}})}});LarsHtmlTextWindow=function(A){this.node=A;this.name=new Ext.form.Field({id:"message-name",fieldLabel:Lars.dialog.htmlText.fieldLabel,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsHtmlTextWindow.superclass.constructor.call(this,{title:Lars.dialog.htmlText.title_1+" "+A.text+" "+Lars.dialog.htmlText.title_2,iconCls:"page-text",id:"add-message-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.htmlText.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsHtmlTextWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var A=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newText",name:A,id:this.node.id},success:function(D,E){var G=Ext.util.JSON.decode(D.responseText);if(G.success==true){var B=G.newID;var F={};F.parentElement=this.node.parentElement;F.id=B;F.text=A;Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",F)}else{if(G.success==false){Ext.ux.ToastLars.msg(Lars.msg.failure,G.name,5)}}this.destroy()},failure:function(B,D){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});LarsNewHtmlTextWindowNew=function(B,D,A){this.messageId=B;this.oldName=D;this.htmlValue=A;this.name=new Ext.form.Field({id:"message-name",fieldLabel:Lars.dialog.htmlTextNew.fieldLabel,width:450,value:D,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsNewHtmlTextWindowNew.superclass.constructor.call(this,{title:Lars.dialog.htmlTextNew.title,iconCls:"page-text",id:"add-message-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.htmlTextNew.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsNewHtmlTextWindowNew,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var A=this.name.getValue();Ext.Ajax.request({url:"lars_edit.php",method:"POST",params:{task:"saveEditNewName",textField:this.htmlValue,name:A,id:this.messageId},success:function(B,D){var E=Ext.util.JSON.decode(B.responseText);if(E.success==true){}else{if(E.success==false){Ext.ux.ToastLars.msg(Lars.msg.failure,E.name,5)}}this.destroy()},failure:function(B,D){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});LarsSetPackageRightsWindow=function(A){this.node=A;this.lehrer=new Ext.form.Radio({id:"leherer",name:"rights",fieldLabel:Lars.dialog.rights.fieldLabel_1,width:20});this.schueler=new Ext.form.Radio({id:"schueler",name:"rights",fieldLabel:Lars.dialog.rights.fieldLabel_2,width:20});this.form=new Ext.FormPanel({labelAlign:"right",keys:LarsViewer.getKeyMap(this.onSet,this),items:[this.lehrer,this.schueler],labelWidth:200,border:false,autoWidth:true,bodyStyle:"background:transparent;padding:10px;"});LarsSetPackageRightsWindow.superclass.constructor.call(this,{title:Lars.dialog.rights.title_1+" "+A.text+" "+Lars.dialog.rights.title_2,iconCls:"key",id:"change-rights-win",autoHeight:true,width:300,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.rights.button_set,handler:this.onSet,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.addEvents({add:true})};Ext.extend(LarsSetPackageRightsWindow,Ext.Window,{onSet:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var B=this.lehrer.getValue();var A=this.schueler.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"changeRights",id:this.node.id,schueler:A,lehrer:B},success:this.refreshFolder,scope:this})},refreshFolder:function(A,B){Ext.getCmp("topics-tree").root.reload();this.destroy()}});LarsPackageDiscussion=function(E,D,B){this.groupColor=B;this.primaryKey="id";E.parentElement=E.id+"discussion-grid";this.expander=new Ext.grid.RowExpander({tpl:new Ext.Template("<p> {LARS_CONTENT}</p>"),lazyRender:true,enableCaching:false});var A=new Ext.data.JsonReader({root:"messages",id:this.primaryKey},[this.primaryKey,"OBJ_NAME","OBJ_DESC","OBJ_AUTHOR",{name:"DOC_LAST_MODIFIED",type:"date",dateFormat:"U"},"LARS_CONTENT"]);this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"lars_json.php",method:"POST"}),baseParams:{task:"getDiscussion",id:E.id,start:0,limit:10},reader:A,sortInfo:{field:"DOC_LAST_MODIFIED",direction:"DESC"}});this.store.setDefaultSort("DOC_LAST_MODIFIED","DESC");this.store.on("load",function(){if(this.store.data.length<1&&this.collapsible){this.collapse()}},this);if(!E.isLeaf()){this.bbar=new Ext.PagingToolbar({pageSize:10,store:this.store,displayInfo:true})}this.tbar=[{iconCls:"comments-add",text:Lars.main.discussion.write_new_message,tooltip:Lars.main.discussion.write_new_message_tt,handler:function(){E.parentElement=E.id+"discussion-grid";this.win=new LarsMessageWindow(E,"newMessage");this.win.show();this.win.setZIndex(90000)},scope:this},"->","-",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.store.load()},scope:this},"-"];this.columns=[{id:"Titel",header:Lars.main.discussion.columns.title,dataIndex:"OBJ_DESC",sortable:true,width:300,renderer:this.formatTitle},{header:Lars.main.discussion.columns.author,dataIndex:"OBJ_AUTHOR",width:100,hidden:true,sortable:true},{header:Lars.main.discussion.columns.content,dataIndex:"LARS_CONTENT",width:10,hidden:true,sortable:false},{id:"last",header:Lars.main.discussion.columns.date,dataIndex:"DOC_LAST_MODIFIED",width:150,renderer:this.formatDate,sortable:true}];LarsPackageDiscussion.superclass.constructor.call(this,{title:Lars.main.discussion.title,iconCls:"comments",region:D.region,collapsible:D.collapsible,hideHeaders:true,collapseMode:"mini",header:false,height:200,border:false,id:E.id+"discussion-grid",loadMask:{msg:Lars.main.discussion.loadMask},sm:new Ext.grid.RowSelectionModel({singleSelect:true}),viewConfig:{forceFit:true,enableRowBody:true,showPreview:true,showAll:true,getRowClass:this.applyRowClass}});this.addEvents({schuelerEditTab:true});this.on("rowcontextmenu",this.onContextClick,this);this.on("rowdblclick",this.showContentWindow,this)};Ext.extend(LarsPackageDiscussion,Ext.grid.GridPanel,{onContextClick:function(E,D,F){var G=E.getView().getRow(D);var A=E.store.getAt(D);var B={};B.id=A.data.id;B.text=A.data.OBJ_DESC;B.parentElement=E.id;this.menu=new Ext.menu.Menu({id:"grid-discussion-ctx",items:[{iconCls:"editPage",text:Lars.main.discussion.menu.edit,tooltip:Lars.main.discussion.menu.edit_tt,handler:function(){this.win=new LarsMessageWindow(A,"editMessage");this.win.show();this.win.setZIndex(90000)},scope:this},{iconCls:"delete",text:Lars.main.discussion.menu.del,tooltip:Lars.main.discussion.menu.del_tt,handler:function(){Ext.Msg.confirm(Lars.main.discussion.menu.del_confirm_1,Lars.main.discussion.menu.del_confirm_2+" "+this.ctxRecord.data.OBJ_DESC+"",function(H){if(H=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:this.ctxRecord.id,name:this.ctxRecord.data.OBJ_NAME,task:"deleteItem"},success:function(I,J){var K=Ext.util.JSON.decode(I.responseText);if(K.success){this.store.remove(this.store.getById(this.ctxRecord.id));Ext.ux.ToastLars.msg(Lars.main.discussion.menu.del_success_msg,"",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.discussion.menu.del_failure_msg,5)}}})}},this)},scope:this}]});this.menu.on("hide",this.onContextHide,this);F.stopEvent();if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}this.ctxRow=this.view.getRow(D);this.ctxRecord=this.store.getAt(D);Ext.fly(this.ctxRow).addClass("x-node-ctx");this.menu.showAt(F.getXY())},onContextHide:function(){if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}},togglePreview:function(A){this.view.showPreview=A;this.view.refresh()},applyRowClass:function(A,F,E,D){if(this.showPreview){var B=Ext.util.Format;if(this.showAll){E.body='<font size="2"><p>'+A.data.LARS_CONTENT+"</p>"}else{E.body="<p>"+B.ellipsis(B.stripTags(A.data.LARS_CONTENT),300)+"</p>"}return"x-grid3-row-expanded"}return"x-grid3-row-collapsed"},formatDate:function(B){if(!B){return""}var A=new Date();var E=A.clearTime(true);var D=B.clearTime(true).getTime();if(D==E.getTime()){return Lars.today+" "+B.dateFormat("d-m-Y H:i")}E=E.add("d",-6);if(E.getTime()<=D){return B.dateFormat("d-m-Y H:i")}return B.dateFormat("d-m-Y H:i")},formatTitle:function(B,D,A){return String.format('<div class="comment"><b>{0}</b> <span class="author">'+Lars.main.discussion.created_of+" {1}</span></div>",B,A.data.OBJ_AUTHOR,A.id,A.data.forumid)}});LarsHtmlMessageWindow=function(A){this.node=A;this.name=new Ext.form.Field({id:"message-name",fieldLabel:Lars.dialog.htmlMessage.fieldLabel,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsHtmlMessageWindow.superclass.constructor.call(this,{title:Lars.dialog.htmlMessage.title,iconCls:"comments-add",id:"add-message-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.htmlMessage.button_create,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsHtmlMessageWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var A=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newMessage",name:A,id:this.node.id},success:function(D,E){var G=Ext.util.JSON.decode(D.responseText);if(G.success==true){var B=G.newID;var F={};F.parentElement=this.node.parentElement;F.id=B;F.text=A;Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",F)}else{if(G.success==false){Ext.ux.ToastLars.msg(Lars.msg.failure,G.name,5)}}this.destroy()},failure:function(B,D){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});LarsCustomImagePanel=function(B,A){LarsCustomImagePanel.superclass.constructor.call(this,{id:"custom-image-panel",region:"north",autoLoad:{url:"lars_json.php",params:{task:"customImage"},timeout:Ext.Ajax.timeout},title:B,split:true,floating:true,border:false,frame:true,height:A,minHeight:5,margins:"8 4 4 8",tools:[{id:"help",handler:function(){Ext.getCmp("lars-desktop-tab-panel").setActiveTab("about-panel");Ext.getCmp("main-tabs").setActiveTab("lars-desktop")}},{id:"gear",handler:function(){this.win=new LarsCustomPanelTextChange(B);this.win.show();this.win.setZIndex(90000)}},{id:"left",handler:function(){Ext.getCmp("main-west").collapse(true)}}]});this.on("contextmenu",this.onContextMenu,this);this.on("resize",function(){Ext.Ajax.request({url:"lars_json.php",params:{task:"changeHeight",height:this.el.getHeight()},scope:this})},this)};Ext.extend(LarsCustomImagePanel,Ext.Panel,{afterRender:function(){LarsCustomImagePanel.superclass.afterRender.call(this);this.el.on("contextmenu",function(A){A.preventDefault();this.focus();this.menu=new Ext.menu.Menu({id:"custom-image-ctx",items:[{text:Lars.dialog.imagePanel.change_picture,id:"add23111",handler:function(){this.win=new UploadCustomImage();this.win.show();this.win.setZIndex(90000)},iconCls:"image-edit",scope:this}]});this.menu.showAt(A.getXY())});this.el.on("dblclick",function(A){this.win=new UploadCustomImage();this.win.show();this.win.setZIndex(90000)})}});LarsCustomPanelTextChange=function(A){this.name=new Ext.form.Field({id:"title-name",fieldLabel:Lars.dialog.customPanelTextChange.fieldLabel,value:A,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onSave,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsCustomPanelTextChange.superclass.constructor.call(this,{title:Lars.dialog.customPanelTextChange.title,iconCls:"page-text",id:"add-user-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.button_save,handler:this.onSave,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.addEvents({add:true})};Ext.extend(LarsCustomPanelTextChange,Ext.Window,{onSave:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var A=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"changeTitle",title:A},success:function(B,D){var E=Ext.util.JSON.decode(B.responseText);if(E.success){Ext.ux.ToastLars.msg(Lars.msg.success,E.name?E.name:" ",3);Ext.getCmp("custom-image-panel").setTitle(E.title)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,E.name?E.name:" ",3)}this.destroy()},failure:function(B,D){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});UploadCustomImage=function(){this.id=new Ext.form.Hidden({id:"aktion",value:"image",fieldLabel:"Action",hidden:true});this.filePath=new Ext.form.Field({id:"file",fieldLabel:Lars.dialog.upload_image.choose_hd,inputType:"file",width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",fileUpload:true,url:"lars_upload_file.php",method:"post",timeout:1800000,id:"upload-image-form",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.filePath,this.id],border:false,bodyStyle:"background:transparent;padding:10px;"});UploadCustomImage.superclass.constructor.call(this,{title:Lars.dialog.upload_image.upload,iconCls:"add-image",id:"add-image-win",autoHeight:true,width:500,resizable:false,modal:true,buttons:[{text:Lars.dialog.upload_image.upload,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(UploadCustomImage,Ext.Window,{onAdd:function(A){this.el.mask(Lars.msg.loading,"x-mask-loading");Ext.getCmp("upload-image-form").getForm().submit({success:function(E,B){var D={};if(B.response.responseText){D=Ext.util.JSON.decode(B.response.responseText)}if(D.success==true){Ext.ux.ToastLars.msg(Lars.dialog.upload_image.msg_success,D.name?D.name:" ",5);Ext.getCmp("custom-image-panel").getUpdater().update(Ext.getCmp("custom-image-panel").autoLoad);this.destroy()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.dialog.upload_image.msg_failure+"<br>"+(D.name?D.name:" "),10);this.el.unmask()}},failure:function(E,B){var D={};if(B.response.responseText){D=Ext.util.JSON.decode(B.response.responseText)}Ext.ux.ToastLars.msg(Lars.msg.failure,D.name?D.name:Lars.msg.failure_connection,10);this.el.unmask()},scope:this})}});LarsMessageWindow=function(A,B){this.editMessage=false;switch(B){case"newMessage":this.editMessage=false;this.folderId=A.id;break;case"editMessage":this.editMessage=true;break}this.primaryKey="id";this.record=A;this.name=new Ext.form.Field({id:"message-name",fieldLabel:Lars.dialog.htmlMessage.fieldLabel,value:(this.editMessage)?this.record.data.OBJ_DESC:"",width:350,msgTarget:"under"});this.message=new Ext.form.HtmlEditor({id:"message-text",fieldLabel:Lars.dialog.comment.fieldLabel,height:200,width:350,value:(this.editMessage)?this.record.data.LARS_CONTENT:"",msgTarget:"under",enableAlignments:false,enableColors:false,enableFont:false,enableLinks:false,enableSourceEdit:false});this.form=new Ext.FormPanel({labelAlign:"top",items:[this.name,this.message],border:false,bodyStyle:"background:transparent;padding:10px;"});if(this.editMessage){this.title=Lars.dialog.comment.title_1+A.data.OBJ_DESC+Lars.dialog.comment.title_2}else{this.title=Lars.main.discussion.write_new_message_tt}LarsMessageWindow.superclass.constructor.call(this,{title:this.title,iconCls:"comment-edit",id:"change-com-win",autoHeight:true,width:400,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.main.discussion.save_send,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsMessageWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var A=this.name.getValue();var B=this.message.getValue();Ext.Ajax.request({url:"lars_edit.php",params:{task:"saveTitleAndTextMessage",name:A,textField:B,id:this.record.id},success:function(D,E){var F=Ext.util.JSON.decode(D.responseText);if(F.success==true){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.success,F.name,5)}else{if(F.success==false){Ext.ux.ToastLars.msg(Lars.msg.failure,F.name,5)}}},failure:function(D,E){Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});LarsTreePanelDesk=function(){LarsTreePanelDesk.superclass.constructor.call(this,{id:"topics-tree",iconCls:"application-home",rootVisible:false,animate:false,autoScroll:true,title:Lars.main.tree_title,root:new Ext.tree.AsyncTreeNode({text:Lars.main.tree.main_directory,loader:new Ext.tree.TreeLoader({dataUrl:"lars_json.php",baseParams:{task:"getSchuelerTopics"}}),id:"source"}),tbar:[{iconCls:"folder-add",text:"",tooltip:Lars.main.tree.add_folder,handler:function(){this.win=new LarsAddFolderWindow();this.win.show();this.win.setZIndex(90000)},scope:this},{iconCls:"folder-archiv",text:"",tooltip:Lars.main.tree.show_archive,handler:function(){var B={text:"Archiv",id:larsArchivId};if(this.win=Ext.getCmp("custom-tree-win-"+B.id)){this.win.show();this.win.setZIndex(90000)}else{this.win=new LarsTreePanelArchivWindow(B);this.win.show();this.win.setZIndex(90000)}},scope:this},{iconCls:"bin",text:"",tooltip:Lars.main.tree.show_bin,handler:function(){if(this.win=Ext.getCmp("bin-explorer-win")){this.win.show();this.win.setZIndex(90000)}else{this.win=new LarsTreePanelBinWindow();this.win.show();this.win.setZIndex(90000)}},scope:this},{iconCls:"key",text:"",tooltip:Lars.main.tree.set_rights,handler:function(){this.win=new LarsGroupsRightsGridWindow();this.win.show();this.win.setZIndex(90000);this.win.items.items[0].store.load()},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){Ext.getCmp("topics-tree").root.reload()},scope:this}]});new Ext.tree.TreeSorter(this,{folderSort:true});var A=this.root;this.root.on("load",function(){this.onReload(this.root)},this);this.expand();this.getSelectionModel().on({selectionchange:function(D,B){if(B){this.fireEvent("projectselect",B.attributes.id)}},scope:this});this.addEvents({schuelerEditTab:true});this.on("contextmenu",this.onContextMenu,this);this.on({dblClick:{fn:function(D,B){if(D.attributes.iconCls=="folder-archiv"){if(this.win=Ext.getCmp("custom-tree-win-"+D.id)){this.win.setZIndex(90000)}else{this.win=new LarsTreePanelArchivWindow(D);this.win.show();this.win.setZIndex(90000)}}else{Ext.getCmp("main-tabs").fireEvent("viewPackage",D)}}}});this.on({click:{fn:function(D,B){D.toggle()}}});this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})})};Ext.extend(LarsTreePanelDesk,Ext.tree.TreePanel,{onContextMenu:function(A,B){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[]});if(A.attributes.iconCls=="folder-archiv"){this.menu.add({text:Lars.main.tree.show_archive,id:"add2311",handler:function(){if(this.win=Ext.getCmp("custom-tree-win-"+A.id)){this.win.setZIndex(90000)}else{this.win=new LarsTreePanelArchivWindow(A);this.win.show();this.win.setZIndex(90000)}},iconCls:"folder-archiv"})}else{if(A.isLeaf()){this.menu.add({text:Lars.main.tree.show_package,id:"add2311",handler:function(){Ext.getCmp("main-tabs").fireEvent("viewPackage",A)},iconCls:"table-go"},{text:Lars.main.tree.copy_package,id:"add2334514561",handler:function(){packageNodeToCopy=A},iconCls:"copy"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(A);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.del,id:"add132443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_confirm_package,function(D){if(D=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:A.id,name:A.attributes.origName,task:"deleteItem"},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){var H=A.id;if(Ext.getCmp(H)){Ext.getCmp("main-tabs").remove(Ext.getCmp(H))}A.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.del_failure_msg,5)}}})}},this)},iconCls:"delete"});if(parseInt(A.attributes.state)==4){this.menu.add({iconCls:"database-save",text:Lars.main.tree.move_to_archive,tooltip:Lars.main.tree.move_to_archive_tt,id:"add232453",handler:function(){Ext.getCmp("main-tabs").archivePackage(A);this.root.reload()},scope:this})}}else{this.menu.add({text:Lars.main.tree.add_package,id:"add34",handler:function(){this.win=new AssignmentWindow(A);this.win.show();this.win.setZIndex(90000)},iconCls:"folder-add"},{text:Lars.main.tree.open_learn_process,id:"add23141",handler:function(){Ext.getCmp("topics-tree").el.mask(Lars.msg.loading,"x-mask-loading");Ext.Ajax.request({url:"lars_json.php",params:{task:"getLernstand",id:A.id},success:function(D,F){var G=Ext.util.JSON.decode(D.responseText);htmlValue=G.html;if(G.success){var E={id:G.id,text:G.text};Ext.getCmp("main-tabs").fireEvent("viewTab",E)}Ext.getCmp("topics-tree").el.unmask()},failure:function(){this.el.unmask()},scope:this})},iconCls:"book-open"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(A);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.del,id:"add132443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.delete_folder_confirm,function(D){if(D=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:A.id,name:A.attributes.origName,task:"deleteItem"},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){A.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.del_failure_msg_folder,5)}}})}},this)},iconCls:"delete"});if(packageNodeToCopy){if(packageNodeToCopy.attributes.iconCls.match("report")){this.menu.add({text:Lars.main.tree.insert_here,id:"add23141972340233",handler:function(){Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2+" ("+packageNodeToCopy.attributes.text+") "+Lars.main.tree.copy_confirm_3+" "+A.attributes.text+" "+Lars.main.tree.copy_confirm_4,function(D){if(D=="yes"){Ext.Ajax.request({url:"lars_json.php",params:{task:"copyFolder",sourceId:packageNodeToCopy.id,targetId:A.id},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){newId=G.newId;newNode=new Ext.tree.TreeNode({id:newId,text:packageNodeToCopy.text,iconCls:packageNodeToCopy.attributes.iconCls,ownerTree:A.ownerTree,state:0});newNode.attributes.state=0;newNode.attributes.origName=G.origName;A.appendChild(newNode);Ext.ux.ToastLars.msg(Lars.msg.success_copy,G.name?G.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,G.name?G.name:" ",5)}},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})}},this)},iconCls:"paste"})}}}}this.menu.showAt(B.getXY())},afterRender:function(){LarsTreePanelDesk.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})},onReload:function(A){A.cascade(function(){this.expand(false,false,function(D){D.collapse(false,false)})});var B=Ext.getCmp("main-tabs").getActiveTab();B.fireEvent("activate",B)}});LarsTreePanelDeskOthers=function(){LarsTreePanelDeskOthers.superclass.constructor.call(this,{id:"topics-tree-t",rootVisible:false,autoScroll:true,animate:false,iconCls:"folder-table",title:Lars.main.tree.desktops_title,enableDD:true,enableDrop:true,dropConfig:{appendOnly:true},root:new Ext.tree.AsyncTreeNode({text:"root",loader:new Ext.tree.TreeLoader({loadMask:{msg:Lars.main.tree.load_mask_desktops},timeout:90000,dataUrl:"lars_json.php",baseParams:{task:"getOwnStudents"}}),id:"source"}),tbar:[{iconCls:"user-add",text:"",tooltip:Lars.main.tree.embed_desktop,handler:function(){this.win=new LarsAddSchuelerWindow();this.win.show();this.win.setZIndex(90000)},scope:this},{iconCls:"group-add",text:"",tooltip:Lars.main.tree.embed_desktop_group,handler:function(){this.win=new LarsGroupsDesktopsGridWindow();this.win.show();this.win.setZIndex(90000);this.win.items.items[0].store.load()},scope:this},{iconCls:"doc-others",text:"",tooltip:"Auswahl für die Anzeige neuer Dokumente und Nachrichten",handler:function(){this.win=new LarsDocumentsSubscriptionWindow();this.win.show();this.win.setZIndex(90000);this.win.items.items[0].store.load()},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){Ext.getCmp("topics-tree-t").root.reload(this.onManualReload)},scope:this}]});new Ext.tree.TreeSorter(this,{folderSort:true,sortType:function(B){return B.attributes.iconCls+" "+Ext.util.Format.stripTags(B.attributes.text).toUpperCase()}});var A=this.root;this.root.on("load",function(){this.onReload(this.root)},this);this.expand();this.getSelectionModel().on({selectionchange:function(D,B){if(B){this.fireEvent("projectselect",B.attributes.id)}},scope:this});this.addEvents({schuelerEditTab:true});this.on("contextmenu",this.onContextMenu,this);this.on({dblClick:{fn:function(D,B){if(D.attributes.iconCls=="folder-archiv"){if(this.win=Ext.getCmp("custom-tree-win-"+D.id)){this.win.setZIndex(90000)}else{this.win=new LarsTreePanelArchivWindow(D);this.win.show();this.win.setZIndex(90000)}}else{Ext.getCmp("main-tabs").fireEvent("viewPackage",D)}}}});this.on({click:{fn:function(D,B){D.toggle()}}});this.on("beforenodedrop",function(B){var D=B.dropNode.leaf;var E=new Ext.tree.TreeNode(Ext.apply({},B.dropNode.attributes));B.dropNode=E;B.dropNode.attributes.iconCls="report";B.dropNode.attributes.groupColor=B.target.attributes.groupColor;B.dropNode.leaf=true;B.dropNode.attributes.leaf=true;if(D){Ext.Msg.confirm(Lars.main.tree.package_convert_confirm_1,Lars.main.tree.package_convert_confirm_2,function(F){if(F=="yes"){Ext.Ajax.request({url:"lars_json.php",params:{task:"copyFilePackage",sourceId:B.dropNode.id,targetId:B.target.id},success:function(G,H){var I=Ext.util.JSON.decode(G.responseText);htmlValue=I.html;if(I.success){Ext.ux.ToastLars.msg(Lars.msg.success_copy,I.name?I.name:" ",3);B.dropNode.id=I.newId;B.dropNode.attributes.id=I.newId}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,I.name?I.name:" ",3);B.dropNode.remove()}Ext.getCmp("topics-tree-t").el.unmask()},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3);Ext.getCmp("topics-tree-t").el.unmask()},scope:this})}},this)}else{if(B.dropNode.attributes.OBJ_TYPE!="ASSIGNMENT_PACKAGE"){B.cancel=true;Ext.Msg.show({title:Lars.msg.failure_copy,msg:Lars.main.tree.msg_failure_no_package,buttons:Ext.Msg.OK,animEl:"elId",icon:Ext.MessageBox.ERROR})}else{Ext.Ajax.request({url:"lars_json.php",params:{task:"copyPackage",sourceId:B.dropNode.id,targetId:B.target.id},success:function(F,G){var H=Ext.util.JSON.decode(F.responseText);if(H.success){Ext.ux.ToastLars.msg(Lars.msg.success_copy,H.name?H.name:" ",3);B.dropNode.id=H.newId;B.dropNode.attributes.id=H.newId;B.dropNode.attributes.origName=H.origName}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,H.name?H.name:" ",3);B.dropNode.remove()}Ext.getCmp("topics-tree-t").el.unmask()},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3);Ext.getCmp("topics-tree-t").el.unmask()},scope:this})}}},this);this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})})};Ext.extend(LarsTreePanelDeskOthers,Ext.tree.TreePanel,{onContextMenu:function(A,B){if(A.attributes.iconCls=="folder-archiv"){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{text:Lars.main.tree.show_archive,id:"add231156",handler:function(){if(this.win=Ext.getCmp("custom-tree-win-"+A.id)){this.win.setZIndex(90000)}else{this.win=new LarsTreePanelArchivWindow(A);this.win.show();this.win.setZIndex(90000)}},iconCls:"folder-archiv"}]})}else{if(A.isLeaf()){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{text:Lars.main.tree.show_package,id:"add2311",handler:function(){Ext.getCmp("main-tabs").fireEvent("viewPackage",A)},iconCls:"table-go"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(A);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.main.tree.copy_package,id:"add23345324514561",handler:function(){packageNodeToCopy=A},iconCls:"copy"},{text:Lars.del,id:"add1324423",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_confirm_package,function(D){if(D=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:A.id,name:A.attributes.origName,task:"deleteItem"},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){var H=A.id;if(Ext.getCmp(H)){Ext.getCmp("main-tabs").remove(Ext.getCmp(H))}A.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}}})}},this)},iconCls:"delete"}]});if((parseInt(A.attributes.state)==4)&&A.attributes.archivable!="false"){this.menu.add({iconCls:"database-save",text:Lars.main.tree.move_to_archive,tooltip:Lars.main.tree.move_to_archive_tt,id:"add232453",handler:function(){Ext.getCmp("main-tabs").archiveGroupPackage(A,A.attributes.archiv);this.root.reload()},scope:this})}}else{if(A.attributes.iconCls!="user"&&A.attributes.iconCls!="group"){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{text:Lars.main.tree.add_package,id:"add34",handler:function(){this.win=new AssignmentWindow(A);this.win.show();this.win.setZIndex(90000);Ext.Msg.show({title:Lars.msg.attention,msg:Lars.main.tree.add_package_advice,buttons:Ext.Msg.OK,animEl:"elId",icon:Ext.MessageBox.INFO})},iconCls:"folder-add"},{text:Lars.main.tree.open_learn_process,id:"add231419703",handler:function(){Ext.getCmp("topics-tree-t").el.mask(Lars.msg.loading,"x-mask-loading");Ext.Ajax.request({url:"lars_json.php",params:{task:"getLernstand",id:A.id},success:function(D,F){var G=Ext.util.JSON.decode(D.responseText);htmlValue=G.html;if(G.success){var E={id:G.id,text:G.text};Ext.getCmp("main-tabs").fireEvent("viewTab",E)}Ext.getCmp("topics-tree-t").el.unmask()},failure:function(){Ext.getCmp("topics-tree-t").el.unmask()},scope:this})},iconCls:"book-open"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(A);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.del,id:"add132443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.delete_folder_confirm,function(D){if(D=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:A.id,name:A.attributes.origName,task:"deleteItem"},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){A.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}}})}},this)},iconCls:"delete"}]});if(packageNodeToCopy){if(packageNodeToCopy.attributes.iconCls.match("report")){this.menu.add({text:Lars.main.tree.insert_here,id:"add23141970233",handler:function(){Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2+packageNodeToCopy.attributes.text+Lars.main.tree.copy_confirm_3+A.attributes.text+Lars.main.tree.copy_confirm_4+Lars.main.tree.copy_confirm_5,function(D){if(D=="yes"){Ext.ux.ToastLars.msg(Lars.main.tree.copy_progress_1,Lars.main.tree.copy_progress_2,5);Ext.Ajax.request({url:"lars_json.php",params:{task:"copyPackage",sourceId:packageNodeToCopy.id,targetId:A.id},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){newId=G.newId;origName=G.origName;newNode=new Ext.tree.TreeNode({leaf:true,id:newId,text:packageNodeToCopy.text,iconCls:"report",ownerTree:A.ownerTree,state:0});newNode.attributes.state=0;newNode.attributes.origName=origName;A.appendChild(newNode);Ext.ux.ToastLars.msg(Lars.msg.success_copy,G.name?G.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,G.name?G.name:" ",5)}},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})}},this)},iconCls:"paste"})}}}else{if(A.attributes.iconCls=="user"||A.attributes.iconCls=="group"){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{iconCls:"folder-add",text:Lars.main.tree.add_folder,handler:function(){if(this.win=Ext.getCmp("custom-tree-win-"+A.id)){this.win.setZIndex(90000)}else{this.win=new LarsAddFolderWindow(A);this.win.show();this.win.setZIndex(90000)}},scope:this},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(A);this.win.show();this.win.setZIndex(90000)},iconCls:"rename"},{text:Lars.main.tree.del_desktop_link,id:"add23123413",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_desktop_link_confirm,function(D){if(D=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:A.id,name:A.attributes.origName,task:"deleteItem"},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){A.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}}})}},this)},iconCls:"delete"}]})}}}}this.menu.showAt(B.getXY())},afterRender:function(){LarsTreePanelDeskOthers.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})},onReload:function(A){A.cascade(function(){this.expand(false,false,function(D){D.collapse(false,false)})});var B=Ext.getCmp("main-tabs").getActiveTab();B.fireEvent("activate",B)}});var larsObj;PackageGrid=function(B,H){this.groupColor=H;this.primaryKey="id";B.parentElement=B.id+"Grid";this.stateAction=new Ext.Action({tooltip:Lars.main.grid.change_state,iconCls:this.getStateIcon(B.attributes.state),menu:[{iconCls:"redIcon",group:"lars-state",text:Lars.main.grid.state_0,handler:function(){this.changeState(0,this.node)},scope:this},{iconCls:"orangeIcon",group:"lars-state",text:Lars.main.grid.state_1,handler:function(){this.changeState(1,this.node)},scope:this},{iconCls:"greenIcon",group:"lars-state",text:Lars.main.grid.state_2,handler:function(){this.changeState(2,this.node)},scope:this},{iconCls:"blueIcon",group:"lars-state",text:Lars.main.grid.state_3,handler:function(){this.changeState(3,this.node)},scope:this},{iconCls:"yellowIcon",group:"lars-state",text:Lars.main.grid.state_4,handler:function(){this.changeState(4,this.node)},scope:this}],scope:this});if(B.isLeaf()){this.tobar=new Ext.Toolbar([this.stateAction,{iconCls:"add-page",text:Lars.main.grid.add_document_title,tooltip:Lars.main.grid.add_document,handler:function(){this.win=new UploadWindow(this.node);this.win.show();this.win.setZIndex(90000)},scope:this},{iconCls:"add-page-white",text:Lars.main.grid.add_text_title,tooltip:Lars.main.grid.add_text,handler:function(){this.win=new LarsHtmlTextWindow(this.node);this.win.show();this.win.setZIndex(90000)},scope:this},{text:"Dokument hier einfügen",id:"add23141494723340233",handler:function(){if(!fileRecordToCopy){Ext.Msg.alert("Fehler","Kein Dokument in der Zwischenablage vorhanden")}else{Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2_document+fileRecordToCopy.data.OBJ_DESC+Lars.main.tree.copy_confirm_3_in_package,function(I){if(I=="yes"){Ext.Ajax.request({url:"lars_json.php",params:{task:"copyFile",sourceId:fileRecordToCopy.id,targetId:B.id},success:function(J,K){var L=Ext.util.JSON.decode(J.responseText);if(L.success){Ext.ux.ToastLars.msg(Lars.msg.success_copy,L.name?L.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,L.name?L.name:" ",5)}},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})}},this)}},iconCls:"paste"},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.getView().getRowClass=LarsGridConfig.applyRowClassWithout;Ext.getCmp(this.node.id+"Grid").store.load()},scope:this}])}else{this.tobar=new Ext.Toolbar([{iconCls:"add-page",text:Lars.main.grid.add_document_title,tooltip:Lars.main.grid.add_document,handler:function(){this.win=new UploadWindow(this.node);this.win.show();this.win.setZIndex(90000)},scope:this},{iconCls:"add-page-white",text:Lars.main.grid.add_text_title,tooltip:Lars.main.grid.add_text,handler:function(){this.win=new LarsHtmlTextWindow(this.node);this.win.show();this.win.setZIndex(90000)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.getView().getRowClass=LarsGridConfig.applyRowClassWithout;Ext.getCmp(this.node.id+"Grid").store.load()},scope:this}])}this.actionPackage=new Ext.ux.grid.RowActions({header:"",actions:[{iconIndex:"action1",qtipIndex:"qtip1",hideIndex:"hide1",iconCls:"whiteIcon",tooltip:""},{iconIndex:"action3",qtipIndex:"qtip3",hideIndex:"hide3",iconCls:"whiteIcon",tooltip:""},{iconIndex:"action4",qtipIndex:"qtip4",hideIndex:"hide4",iconCls:"whiteIcon",tooltip:""}]});this.actionPackage.on("action",this.onRowActionPackage,this);this.actionFileType=new Ext.ux.grid.RowActions({header:"",actions:[{iconIndex:"action0",qtipIndex:"qtip0",iconCls:"file-dll"},{iconCls:"whiteIcon",qtipIndex:"qtip2",hideIndex:"hide2",iconIndex:"action2"},{iconCls:"whiteIcon",qtipIndex:"qtip5",hideIndex:"hide5",iconIndex:"action5"}]});this.expander=new Ext.grid.RowExpander({tpl:'<div id="desktop-grid-{id}"></div>'});this.expander.on("expand",function(L,K,I,M){switch(K.data.action2){case"page-save":var J=new Ext.Panel({id:"desktop-grid-row-"+K.data.id,html:K.data.LARS_CONTENT,autoHeight:true,renderTo:"desktop-grid-"+K.data.id});K.panel=J;break;case"editPage":case"pdf":var J=new Ext.ux.ManagedIframePanel({id:"desktop-grid-row-"+K.data.id,defaultSrc:"tools/get.php?object="+K.data.id,listeners:{domready:LarsViewer.LinkInterceptorIFrame},loadMask:true,renderTo:"desktop-grid-"+K.data.id});J.on("documentloaded",function(){var N=J.getFrame();N.setHeight(N.getBody().scrollHeight)},this);K.iFrame=J;break}});this.larsObj=LarsGridConfig.larsObj;var G=LarsGridConfig.dsState;var A=LarsGridConfig.dsType;var E=new Ext.data.JsonReader({root:"ass",id:this.primaryKey},this.larsObj);var D=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"lars_json.php",method:"POST"}),baseParams:{task:"getAssignment",id:B.id},reader:E,sortInfo:{field:"OBJ_DESC",direction:"ASC"}});var F=Ext.form;this.cm=new Ext.grid.ColumnModel([this.expander,{id:"ID",header:"ID",dataIndex:"id",width:20,readOnly:true,sortable:true,hidden:true},this.actionFileType,{header:Lars.main.grid.columns.desc,dataIndex:"OBJ_DESC",sortable:true,width:150,editor:new F.TextField({allowBlank:false})},{header:Lars.main.grid.columns.content,dataIndex:"LARS_CONTENT",readOnly:true,hidden:true,width:40},{header:Lars.main.grid.columns.type,dataIndex:"type",hidden:true,sortable:true,readOnly:true,width:60},{header:Lars.main.grid.columns.type,dataIndex:"LARS_TYPE",sortable:true,fixed:true,width:70,editor:new Ext.form.ComboBox({mode:"local",editable:false,triggerAction:"all",store:A,displayField:"text",valueField:"id",valueNotFoundText:Lars.main.grid.columns.valueNotFoundText}),renderer:function(J,I){if(I){I.css=LarsGridConfig.renderCell(J)}record=A.getById(J);if(record){return record.data.text}else{return""}}},{header:Lars.main.grid.columns.last_changed,dataIndex:"OBJ_LAST_CHANGED",width:70,fixed:true,readOnly:true,sortable:true,renderer:function(I){return I.dateFormat("d-m-Y")}},{header:Lars.main.grid.columns.created,dataIndex:"OBJ_CREATION_TIME",readOnly:true,width:100,hidden:true,sortable:true,renderer:function(I){return I.dateFormat("d-m-Y H:i")}},this.actionPackage]);PackageGrid.superclass.constructor.call(this,{region:"center",loadMask:{msg:Lars.main.grid.loadMask},id:B.id+"Grid",boder:false,bodyBorder:false,node:B,disableSelection:true,closable:true,autoScroll:true,hideHeaders:true,cm:this.cm,store:D,autoSizeColumns:true,autoExpandColumn:"ID",frame:false,tbar:this.tobar,view:new Ext.grid.GridView({forceFit:true,enableRowBody:true,emptyText:Lars.main.grid.emptyText,deferEmptyText:true}),clicksToEdit:1,stripeRows:true,plugins:[this.expander,this.actionPackage,this.actionFileType]});this.addEvents({schuelerEditTab:true});this.addEvents({refreshTab:true});this.on("rowcontextmenu",this.onContextClick,this);this.on("afteredit",this.handleEdit,this);this.on("beforeadd",this.handleEdit,this);this.on("render",function(I){var J=new Ext.dd.DropZone(I.getEl(),{ddGroup:"TreeDD",onDragDrop:function(K,L){alert("dragdrop")},notifyDrop:function(K,O,N){var M=O.getTarget("div.x-panel");var L=this.id;Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:N.node.id,folderId:L,task:"copyIntoPackage"},success:function(P,Q){var R=Ext.util.JSON.decode(P.responseText);if(R.success){Ext.getCmp(L).store.load()}}})},onContainerOver:function(L,M,K){if(K.node.leaf!=true){return this.dropNotAllowed}else{return this.dropAllowed}}})})};Ext.extend(PackageGrid,Ext.grid.EditorGridPanel,{onContextClick:function(E,D,F){var G=E.getView().getRow(D);var A=E.store.getAt(D);var B={};B.id=A.data.id;B.text=A.data.OBJ_NAME;B.parentElement=E.id;this.menu=new Ext.menu.Menu({id:"grid-ctx"});if(A.data.action2=="editPage"){this.menu.add({iconCls:"editPage",text:Lars.edit,tooltip:Lars.edit,handler:function(){Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",B,this.groupColor)},scope:this})}this.menu.add({iconCls:"delete",text:Lars.del,tooltip:Lars.main.grid.del_tt,handler:function(){Ext.Msg.confirm(Lars.main.grid.del_confirm,B.text+"",function(H){if(H=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:B.id,name:B.text,task:"deleteItem"},success:function(I,J){var K=Ext.util.JSON.decode(I.responseText);if(K.success){E.store.remove(A)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed,5)}}})}},this)},scope:this});this.menu.add({iconCls:"copy",text:Lars.copy_document,tooltip:Lars.copy_document_tt,handler:function(){fileRecordToCopy=A;packageNodeToCopy=false},scope:this});if(fileRecordToCopy){this.menu.add({text:Lars.main.tree.copy_document,id:"add2314194723340233",handler:function(){Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2_document+fileRecordToCopy.data.OBJ_DESC+Lars.main.tree.copy_confirm_3_in_package,function(H){if(H=="yes"){Ext.Ajax.request({url:"lars_json.php",params:{task:"copyFile",sourceId:fileRecordToCopy.id,targetId:B.id},success:function(I,J){var K=Ext.util.JSON.decode(I.responseText);if(K.success){Ext.ux.ToastLars.msg(Lars.msg.success_copy,K.name?K.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure_copy,K.name?K.name:" ",5)}},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})}},this)},iconCls:"paste"})}this.menu.on("hide",this.onContextHide,this);F.stopEvent();if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}this.ctxRow=this.view.getRow(D);this.ctxRecord=this.store.getAt(D);Ext.fly(this.ctxRow).addClass("x-node-ctx");this.menu.showAt(F.getXY())},onContextHide:function(){if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}},updateDB:function(A){if(A.value instanceof Date){var B=A.value.format("U")}else{var B=A.value}Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"update",key:this.primaryKey,keyValue:A.record.data.id,id:A.record.data.id,field:A.field,fieldValue:B,originalValue:A.record.modified},failure:function(D,E){Ext.MessageBox.alert(Lars.msg.failure,Lars.msg.failure_response);this.store.rejectChanges()},success:function(D,E){var F=Ext.util.JSON.decode(D.responseText);if(F.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,F.name?F.name:" ",3);if(A.field=="OBJ_DESC"){A.record.data.OBJ_NAME=B}this.store.commitChanges()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+"<br>"+F.name,4);this.store.rejectChanges()}}})},handleEdit:function(B){if(B){var A=B.field;this.updateDB(B)}else{Ext.Msg.alert(Lars.msg.failure_nothing_changed)}},onRowActionPackage:function(D,G,E,F,B){var A={id:G.data.id,text:G.data.OBJ_DESC,parentElement:this.node.parentElement,attributes:{iconCls:E,lars_ref:G.data.LARS_CONTENT}};switch(E){case"cut":copy3(G.data.OBJ_PATH);break;case"add-page":this.win=new UploadWindow(this.node,2,G.data.OBJ_DESC+Lars.main.grid.solution);this.win.show();this.win.setZIndex(90000);break;case"icon-edit-record":break;case"comment-edit":case"comments":this.win=new LarsCommentWindow(G);this.win.show();this.win.setZIndex(90000);break;case"file-link":if(A.attributes.lars_ref.match(window.location.host)){LarsViewer.QuestionTabOrBrowserOpen(A)}else{LarsViewer.QuestionBrowserOpenNode(A)}break;case"page-save":Ext.Msg.confirm(Lars.main.grid.open_link_1,Lars.main.grid.open_link_2,function(H){if(H=="yes"){window.open("tools/get.php?object="+G.data.id)}},this);break;case"editPage":Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",A,this.groupColor);break;case"tab-go":Ext.getCmp("main-tabs").fireEvent("viewIFrameTab",A,this.groupColor);break;case"delete":Ext.Msg.confirm(Lars.main.grid.del_confirm,G.data.OBJ_DESC+"",function(H){if(H=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:G.id,name:G.data.OBJ_NAME,task:"deleteItem"},success:function(I,J){var K=Ext.util.JSON.decode(I.responseText);if(K.success){D.store.remove(G)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.grid.del_failure_msg,5)}}})}},this);break}if(E.match("file")){switch(G.data.action2){case"file-gif":case"file-tiff":case"file-jpeg":case"file-jpg":case"file-png":case"file-bmp":case"editPage":this.expander.toggleRow(F);break;case"page-save":switch(E){case"file-gif":case"file-tiff":case"file-jpeg":case"file-jpg":case"file-png":case"file-bmp":this.expander.toggleRow(F);break;default:A.attributes={lars_ref:"tools/get.php?object="+A.id,iconCls:A.attributes.iconCls};LarsViewer.QuestionBrowserOpenPDF(A);break}break}}},changeState:function(B,A){if(B==4&&isTeacher!=1){Ext.Msg.alert("",Lars.main.grid.only_teacher)}else{Ext.Ajax.request({url:"lars_json.php",params:{task:"changeState",id:A.id,state:B},success:function(){var D=Ext.getCmp("topics-tree");var F=Ext.getCmp("topics-tree-t");var E=Ext.getCmp("resources-tree");if(D.getNodeById(A.id)){D.root.reload(D.onManualReload)}if(F.getNodeById(A.id)){F.root.reload(F.onManualReload)}this.stateAction.items[0].setIconClass(this.getStateIcon(B))},scope:this})}},getStateIcon:function(A){switch(parseInt(A)){case 0:return"redIcon";break;case 1:return"orangeIcon";break;case 2:return"greenIcon";break;case 3:return"blueIcon";break;case 4:return"yellowIcon";break;default:return"whiteIcon";break}},getStateText:function(A){switch(parseInt(A)){case 0:return Lars.main.grid.state_0;break;case 1:return Lars.main.grid.state_1;break;case 2:return Lars.main.grid.state_2;break;case 3:return Lars.main.grid.state_3;break;case 4:return Lars.main.grid.state_4;break}}});LarsPackagePanel=function(A){LarsPackagePanel.superclass.constructor.call(this,A);this.addEvents({schuelerEditTab:true})};Ext.extend(LarsPackagePanel,Ext.Panel,{});LarsGroupsDesktopsGrid=function(){this.primaryKey="id";this.larsObj=Ext.data.Record.create([{name:"id"},{name:"text",type:"string"},{name:"ABO",type:"boolean"}]);var B=new Ext.data.JsonReader({root:"groups",id:this.primaryKey},this.larsObj);var A=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"lars_json.php",method:"POST"}),baseParams:{task:"getAboGroups",id:"desktops"},reader:B});var E=Ext.form;var D=new Ext.grid.CheckColumn({header:Lars.dialog.groups.embed_desktop,dataIndex:"ABO",fixed:true,width:155});this.cm=new Ext.grid.ColumnModel([{id:"id",header:"ID",dataIndex:this.primaryKey,width:20,readOnly:true,sortable:true,hidden:true},{header:Lars.dialog.groups.groupname,dataIndex:"text",sortable:true},D]);LarsGroupsDesktopsGrid.superclass.constructor.call(this,{id:"lars-desktops-grid",loadMask:{msg:Lars.msg.loading},iconCls:"table-go",region:"center",autoScroll:true,store:A,cm:this.cm,autoSizeColumns:true,frame:false,autoHeight:true,viewConfig:{forceFit:true},plugins:[D],stripeRows:true});this.on("afteredit",this.handleEdit,this)};Ext.extend(LarsGroupsDesktopsGrid,Ext.grid.EditorGridPanel,{updateDB:function(A){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"updateGroup",key:this.primaryKey,keyValue:A.record.data.id,id:A.record.data.id,field:A.field,fieldValue:A.value,originalValue:A.record.modified},failure:function(B,D){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection);this.store.rejectChanges()},success:function(B,D){var E=Ext.util.JSON.decode(B.responseText);if(E.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,E.name?E.name:" ",3);this.store.commitChanges()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+E.name,4);this.store.rejectChanges()}}})},handleEdit:function(B){if(B){var A=B.field;this.updateDB(B)}else{Ext.Msg.alert(Lars.msg.failure_nothing_changed)}}});LarsGroupsDesktopsGridWindow=function(){LarsGroupsDesktopsGridWindow.superclass.constructor.call(this,{title:Lars.dialog.groups.other_dektops,layout:"border",iconCls:"comment-edit",id:"desktops-win",width:600,height:400,resizable:true,plain:true,modal:true,autoScroll:true,buttons:[{text:Lars.closedown,handler:function(){this.destroy()},scope:this}],items:new LarsGroupsDesktopsGrid()})};Ext.extend(LarsGroupsDesktopsGridWindow,Ext.Window,{});LarsGroupsRightsGrid=function(){this.primaryKey="id";this.tbar=[{iconCls:"group-add",text:Lars.dialog.groups.add_group,tooltip:Lars.dialog.groups.add_group_tt,handler:function(){this.win=new LarsGroupsTreePanelWindow();this.win.show();this.win.setZIndex(90001)},scope:this},{iconCls:"user-add",text:Lars.dialog.groups.add_user,tooltip:Lars.dialog.groups.add_user_tt,handler:function(){this.win=new LarsGroupsAddUserWindow();this.win.show();this.win.setZIndex(90001)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.hideHeaders=false;this.view.renderHeaders();Ext.getCmp("lars-rights-grid").store.load()},scope:this}];this.larsObj=Ext.data.Record.create([{name:"id"},{name:"group",type:"string"},{name:"fav",type:"string"},{name:"text",type:"string"},{name:"ACCESS_READ",type:"boolean"},{name:"ACCESS_WRITE",type:"boolean"}]);var D=new Ext.data.JsonReader({root:"groups",id:this.primaryKey},this.larsObj);var B=new Ext.data.GroupingStore({proxy:new Ext.data.HttpProxy({url:"lars_json.php",method:"POST"}),baseParams:{task:"getRightsGroups",id:"rights"},reader:D,sortInfo:{field:"text",direction:"ASC"},groupField:"group"});var F=Ext.form;var E=new Ext.grid.CheckColumn({header:Lars.dialog.groups.allow_read,dataIndex:"ACCESS_READ",width:130});var A=new Ext.grid.CheckColumn({header:Lars.dialog.groups.allow_all,dataIndex:"ACCESS_WRITE",width:100});this.cm=new Ext.grid.ColumnModel([{id:"id",header:"ID",dataIndex:this.primaryKey,width:20,readOnly:true,sortable:true,hidden:true},{header:Lars.dialog.groups.groupname,width:290,dataIndex:"text",sortable:true},E,A,{header:Lars.dialog.groups.favorite,width:50,dataIndex:"fav",sortable:true},{header:Lars.dialog.groups.type,width:50,hidden:true,dataIndex:"group",sortable:true}]);LarsGroupsRightsGrid.superclass.constructor.call(this,{id:"lars-rights-grid",loadMask:{msg:Lars.msg.loading},iconCls:"table-go",region:"center",autoScroll:true,store:B,cm:this.cm,autoSizeColumns:true,frame:false,autoHeight:true,viewConfig:{forceFit:true},plugins:[E,A],stripeRows:true,view:new Ext.grid.GroupingView({groupTextTpl:"{text}"})});this.on("afteredit",this.handleEdit,this);this.on("rowcontextmenu",this.onContextClick,this)};Ext.extend(LarsGroupsRightsGrid,Ext.grid.EditorGridPanel,{updateDB:function(A){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"updateGroup",key:this.primaryKey,keyValue:A.record.data.id,id:A.record.data.id,field:A.field,fieldValue:A.value,originalValue:A.record.modified},failure:function(B,D){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection);this.store.rejectChanges()},success:function(B,D){var E=Ext.util.JSON.decode(B.responseText);if(E.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,E.name?E.name:" ",3);this.store.commitChanges()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+E.name,4);this.store.rejectChanges()}}})},handleEdit:function(B){if(B){var A=B.field;this.updateDB(B)}else{Ext.Msg.alert(Lars.msg.failure_nothing_changed)}},onContextClick:function(D,B,E){var F=D.getView().getRow(B);var A=D.store.getAt(B);this.menu=new Ext.menu.Menu({id:"grid-ctx"});if(A.data.fav=="Ja"){this.menu.add({iconCls:"delete",text:Lars.del,tooltip:Lars.dialog.groups.del_group_user_1,handler:function(){Ext.Msg.confirm(Lars.dialog.groups.del_group_user_2,Lars.dialog.groups.del_group_user_3,function(G){if(G=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:A.id,name:A.text,task:"deleteBuddy"},success:function(H,I){var J=Ext.util.JSON.decode(H.responseText);if(J.success){D.store.remove(A)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,"---",5)}}})}},this)},scope:this})}this.menu.on("hide",this.onContextHide,this);E.stopEvent();if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}this.ctxRow=this.view.getRow(B);this.ctxRecord=this.store.getAt(B);Ext.fly(this.ctxRow).addClass("x-node-ctx");this.menu.showAt(E.getXY());this.menu.el.setZIndex(90010)},onContextHide:function(){if(this.ctxRow){Ext.fly(this.ctxRow).removeClass("x-node-ctx");this.ctxRow=null}},afterRender:function(){LarsGroupsRightsGrid.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsGroupsRightsGridWindow=function(){LarsGroupsRightsGridWindow.superclass.constructor.call(this,{title:Lars.dialog.groups.define_rights,layout:"border",iconCls:"comment-edit",id:"rights-win",width:600,height:400,resizable:true,plain:true,modal:true,autoScroll:true,buttons:[{text:Lars.closedown,handler:function(){this.destroy()},scope:this}],items:new LarsGroupsRightsGrid()})};Ext.extend(LarsGroupsRightsGridWindow,Ext.Window,{});LarsGroupsTreePanel=function(){LarsGroupsTreePanel.superclass.constructor.call(this,{id:"groups-tree",region:"center",rootVisible:false,autoScroll:true,root:new Ext.tree.AsyncTreeNode({text:Lars.dialog.groups.root_directory,loader:new Ext.tree.TreeLoader({dataUrl:"lars_json.php",baseParams:{task:"getGroupsTree"}}),id:"source"})});this.on({click:{fn:function(B,A){B.toggle()}}});this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})});this.on("contextmenu",this.onContextMenu,this)};Ext.extend(LarsGroupsTreePanel,Ext.tree.TreePanel,{onContextMenu:function(A,B){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{text:Lars.dialog.groups.add_group_to_list,id:"add2312341",handler:function(){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"addBuddy",id:A.id},failure:function(D,E){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection)},success:function(D,E){var F=Ext.util.JSON.decode(D.responseText);if(F.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,F.name?F.name:" ",3);Ext.getCmp("lars-rights-grid").store.load()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+F.name,4)}}})},iconCls:"group-add"}]});this.menu.showAt(B.getXY());this.menu.el.setZIndex(90010)},afterRender:function(){LarsTreePanelFolderLinks.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsGroupsTreePanelWindow=function(){this.treePanel=new LarsGroupsTreePanel();LarsGroupsTreePanelWindow.superclass.constructor.call(this,{title:Lars.dialog.groups.add_group_to_selection,layout:"border",iconCls:"group",id:"",width:200,height:300,autoScroll:true,items:this.treePanel})};Ext.extend(LarsGroupsTreePanelWindow,Ext.Window,{});LarsGroupsAddUserWindow=function(){this.name=new Ext.form.Field({id:"user-name",fieldLabel:Lars.dialog.groups.username,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsGroupsAddUserWindow.superclass.constructor.call(this,{title:Lars.dialog.groups.add_to_favorites,iconCls:"folder-add",id:"add-user-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.groups.add_user,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsGroupsAddUserWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var A=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"addBuddy",id:0,name:A},success:function(B,D){var E=Ext.util.JSON.decode(B.responseText);if(E.success){Ext.getCmp("lars-rights-grid").store.load();Ext.ux.ToastLars.msg(Lars.dialog.groups.user_added_msg,E.name?E.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.dialog.groups.user_not_added_msg,E.name?E.name:" ",3)}this.destroy()},failure:function(B,D){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});LarsDocumentsSubscriptionWindow=function(){LarsDocumentsSubscriptionWindow.superclass.constructor.call(this,{title:"Auswahl für die Anzeige neuer Dokumente und Nachrichten",layout:"border",iconCls:"doc-others",id:"desktops4-win",width:600,height:400,resizable:true,plain:true,modal:true,autoScroll:true,buttons:[{text:Lars.closedown,handler:function(){this.destroy()},scope:this}],items:new LarsDocumentsSubscriptionGrid()})};Ext.extend(LarsDocumentsSubscriptionWindow,Ext.Window,{});LarsDocumentsSubscriptionGrid=function(){this.primaryKey="id";this.larsObj=Ext.data.Record.create([{name:"id"},{name:"name",type:"string"},{name:"checked",type:"boolean"}]);var B=new Ext.data.JsonReader({id:this.primaryKey},this.larsObj);var A=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"lars_json.php",method:"POST"}),baseParams:{task:"getDesktopAbo",id:"desktops"},reader:B});var E=Ext.form;var D=new Ext.grid.CheckColumn({header:Lars.main.document_subscription,dataIndex:"checked",fixed:true,width:200});this.cm=new Ext.grid.ColumnModel([{id:"id",header:"ID",dataIndex:this.primaryKey,width:20,readOnly:true,sortable:true,hidden:true},{header:Lars.main.group_or_user,dataIndex:"name",sortable:true},D]);LarsDocumentsSubscriptionGrid.superclass.constructor.call(this,{id:"lars-desktops12-grid",loadMask:{msg:Lars.msg.loading},iconCls:"table-go",region:"center",autoScroll:true,store:A,cm:this.cm,autoSizeColumns:true,frame:false,autoHeight:true,viewConfig:{forceFit:true},plugins:[D],stripeRows:true});this.on("afteredit",this.handleEdit,this)};Ext.extend(LarsDocumentsSubscriptionGrid,Ext.grid.EditorGridPanel,{updateDB:function(A){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"updateSubscription",key:this.primaryKey,keyValue:A.record.data.id,id:A.record.data.id,field:A.field,fieldValue:A.value,originalValue:A.record.modified},failure:function(B,D){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection);this.store.rejectChanges()},success:function(B,D){var E=Ext.util.JSON.decode(B.responseText);if(E.success==true){Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,E.name?E.name:" ",3);this.store.commitChanges()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+E.name,4);this.store.rejectChanges()}}})},handleEdit:function(B){if(B){var A=B.field;this.updateDB(B)}else{Ext.Msg.alert(Lars.msg.failure_nothing_changed)}}});LarsAddFolderWindow=function(A){this.node=A;this.nodeId=A?A.id:0;this.name=new Ext.form.Field({id:"folder-name",fieldLabel:Lars.dialog.addFolder.fieldLabel,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsAddFolderWindow.superclass.constructor.call(this,{title:Lars.dialog.addFolder.title,iconCls:"folder-add",id:"add-folder-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.addFolder.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsAddFolderWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var A=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newFolder",name:A,type:"LARS_ASSIGNMENT_FOLDER",id:this.nodeId},success:this.refreshFolder,failure:function(B,D){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})},refreshFolder:function(A,B){if(this.nodeId){Ext.getCmp("topics-tree-t").root.reload()}else{Ext.getCmp("topics-tree").root.reload()}this.destroy()}});LarsAddFolderLinksWindow=function(A){this.nodeId=A;this.name=new Ext.form.Field({id:"folder-name",fieldLabel:Lars.dialog.addFolderLinks.fieldLabel,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsAddFolderLinksWindow.superclass.constructor.call(this,{title:Lars.dialog.addFolderLinks.title,iconCls:"folder-add",id:"add-folder-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.addFolderLinks.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsAddFolderLinksWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var A=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newFolderLinks",name:A,id:this.nodeId},success:this.refreshFolder,failure:function(B,D){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})},refreshFolder:function(A,B){Ext.getCmp("links-tree").root.reload();this.destroy()}});LarsAddSchuelerWindow=function(){this.name=new Ext.form.Field({id:"user-name",fieldLabel:Lars.dialog.addSchueler.usernameLabel,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsAddSchuelerWindow.superclass.constructor.call(this,{title:Lars.dialog.addSchueler.title,iconCls:"folder-add",id:"add-user-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.addSchueler.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsAddSchuelerWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var A=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newSchueler",name:A},success:function(B,D){if(!B.responseText){Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_response,5)}else{var E=Ext.util.JSON.decode(B.responseText);if(E.success){Ext.getCmp("topics-tree-t").root.reload();Ext.ux.ToastLars.msg(Lars.dialog.addSchueler.msg_success,E.name?E.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.dialog.addSchueler.msg_failure,E.name?E.name:" ",3)}}this.destroy()},failure:function(B,D){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});LarsAddLinkWindow=function(A){this.node={};if(A){this.node.id=A.id}else{this.node.id=""}this.name=new Ext.form.Field({id:"link-name",fieldLabel:Lars.dialog.addLink.name,width:450,msgTarget:"under"});this.url=new Ext.form.Field({id:"link-url",fieldLabel:Lars.dialog.addLink.adress,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name,this.url],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsAddLinkWindow.superclass.constructor.call(this,{title:Lars.dialog.addLink.title,iconCls:"link-add",id:"add-link-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,floating:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.addLink.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this)};Ext.extend(LarsAddLinkWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var B=this.name.getValue();var A=this.url.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newLink",name:B,url:A,id:this.node.id},success:function(D){var E=Ext.util.JSON.decode(D.responseText);if(E.success){Ext.ux.ToastLars.msg(Lars.msg.success,"",2);Ext.getCmp("links-tree").root.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,"",5)}this.destroy()},failure:function(D,E){Ext.ux.ToastLars.msg(Lars.msg.failure,"",2);this.el.unmask()},scope:this})}});UploadWindow=function(B,A,D){this.node=B;this.id=new Ext.form.Hidden({id:"id",value:B.id,fieldLabel:"ID des Ordners",hidden:true});this.larsType=new Ext.form.Hidden({id:"larsType",value:A,fieldLabel:"Aufgabentyp",hidden:true});this.description=new Ext.form.Field({id:"description",fieldLabel:Lars.dialog.upload_file.upload_description,value:D?D:"",width:450,msgTarget:"under"});this.filePath=new Ext.form.Field({id:"file",fieldLabel:Lars.dialog.upload_file.choose_hd,inputType:"file",width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",fileUpload:true,url:"lars_upload_file.php",method:"post",id:"upload-form",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.description,this.filePath,this.id,this.larsType],timeout:1800000,border:false,bodyStyle:"background:transparent;padding:10px;"});UploadWindow.superclass.constructor.call(this,{title:Lars.dialog.upload_file.title+this.node.text,iconCls:"add-page",id:"add-download-win",autoHeight:true,width:500,resizable:false,modal:true,buttons:[{text:Lars.dialog.upload_file.button_upload,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(UploadWindow,Ext.Window,{onAdd:function(A){this.el.mask(Lars.msg.loading,"x-mask-loading");Ext.getCmp("upload-form").getForm().submit({success:function(E,B){var D={};if(B.response.responseText){D=Ext.util.JSON.decode(B.response.responseText)}if(D.success==true){Ext.ux.ToastLars.msg(Lars.dialog.upload_file.msg_success,D.name?D.name:" ",5);if(Ext.getCmp(this.node.id+"Grid")){Ext.getCmp(this.node.id+"Grid").store.load()}this.destroy()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.dialog.upload_file.msg_failure+"<br>"+(D.name?D.name:" "),10);this.el.unmask()}},failure:function(E,B){var D={};if(B.response.responseText){D=Ext.util.JSON.decode(B.response.responseText)}Ext.ux.ToastLars.msg(Lars.msg.failure,D.name?D.name:Lars.msg.failure_connection,10);this.el.unmask()},scope:this})}});LarsHTMLPanel=function(A){this.tbar=[{iconCls:"editPage",text:Lars.edit,tooltip:Lars.edit,handler:function(){Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",this.node)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:this.reload,scope:this}];LarsHTMLPanel.superclass.constructor.call(this,A);b=this.getTopToolbar();this.addEvents({schuelerEditTab:true});this.addEvents({refreshTab:true})};Ext.extend(LarsHTMLPanel,Ext.Panel,{reload:function(){Ext.Ajax.request({scope:this,waitMsg:Lars.msg.loading_data,url:"lars_json.php",params:{id:this.node.id,task:"view"},success:function(A,B){var D=Ext.util.JSON.decode(A.responseText);if(D.success){this.html=D.html;this.body.dom.innerHTML=D.html}else{Ext.ux.ToastLars.msg(Lars.msg.failure,"",2)}},failure:function(A,B){Ext.ux.ToastLars.msg(Lars.msg.failure,"",2)}})}});LarsIFramePanel=function(A){this.tbar=[{iconCls:"editPage",text:"",tooltip:Lars.edit,handler:function(){Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",this.node,this.color)},scope:this},{iconCls:"printer",text:"",tooltip:Lars.printer,handler:function(){this.iframe.print()},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.setSrc()},scope:this}];LarsIFramePanel.superclass.constructor.call(this,A);this.addEvents({schuelerEditTab:true})};Ext.extend(LarsIFramePanel,Ext.ux.ManagedIframePanel,{});LarsIFramePanelInternet=function(A){this.tbar=[{iconCls:"printer",text:"",tooltip:Lars.printer,handler:function(){this.iframe.print()},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.setSrc()},scope:this}];LarsIFramePanelInternet.superclass.constructor.call(this,A);this.addEvents({schuelerEditTab:true})};Ext.extend(LarsIFramePanelInternet,Ext.ux.ManagedIframePanel,{});AssignmentWindow=function(A){this.node=A;this.name=new Ext.form.Field({id:"ass-name",fieldLabel:Lars.dialog.assignment.fieldLabel,emptyText:Lars.dialog.assignment.emptyText,width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});AssignmentWindow.superclass.constructor.call(this,{title:Lars.dialog.assignment.title,iconCls:"table-add",id:"add-ass-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.dialog.assignment.button_add,id:"myButton",handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.addEvents({add:true});this.on("show",this.focusFirst,this)};Ext.extend(AssignmentWindow,Ext.Window,{onAdd:function(){if(A){return}var A=true;this.el.mask(Lars.msg.loading,"x-mask-loading");var B=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newAssignment",id:this.node.id,name:B},success:function(D,E){var F=Ext.util.JSON.decode(D.responseText);if(F.success){newId=F.newId;newNode=new Ext.tree.TreeNode({leaf:true,id:newId,text:B,iconCls:"report",state:0});newNode.attributes.state=0;newNode.ownerTree=this.node.ownerTree;newNode.attributes.origName=F.origName;this.node.appendChild(newNode);Ext.getCmp("main-tabs").fireEvent("viewPackage",newNode)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,F.name?F.name:" ",5)}this.destroy()},failure:function(D,E){this.destroy();Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}});MainPanel=function(){MainPanel.superclass.constructor.call(this,{id:"main-tabs",activeTab:0,margins:"0 0 0 0",frame:false,bodyBorder:false,enableTabScroll:true,plain:true,resizeTabs:true,tabWidth:150,minTabWidth:120,enableTabScroll:true,plugins:new Ext.ux.TabCloseMenu()});this.on("schuelerEditTab",function(B,A){Ext.ux.ToastLars.msg(Lars.msg.loading,Lars.msg.loading_editor,2);this.openTabEdit(B,A)},this);this.on("viewTab",function(B,A){this.openTabView(B,A)});this.on("viewIFrameTab",function(B,A){this.openTabIFrame(B,A)});this.on("viewIFrameTabAll",function(B,A){this.openTabIFrameInternet(B,A)});this.on("viewPackage",this.openTabPackage,this)};Ext.extend(MainPanel,Ext.TabPanel,{openTabEdit:function(D,B){var E;var A;var F=D.id;if(!(E=this.getItem(F+"editorTab"))){Ext.Ajax.request({scope:this,url:"lars_edit.php",params:{id:D.id,task:"edit"},success:function(G,I){var H=Ext.util.JSON.decode(G.responseText);A=H.html;if(H.success){E=new Ext.form.FormPanel({iconCls:"editPage",layout:"fit",title:'<span style="color: '+B+';">'+D.text+"</span>",tabTip:D.text,id:F+"editorTab",height:500,minWidth:200,minHeight:200,autoScroll:true,bodyBorder:false,border:false,resizable:true,frame:false,closable:true,buttons:[{text:Lars.button_save,handler:function(){tinyMCE.triggerSave();var K=Ext.getCmp(D.id+"editor");K.syncValue();E.getForm().submit({url:"lars_edit.php",params:{id:F,task:"saveEdit",origValue:A?A:""},method:"POST",success:function(M,O){var P=Ext.util.JSON.decode(O.response.responseText);A=E.getForm().getValues().textField;if(P.success){Ext.ux.ToastLars.msg(Lars.msg_success_new_content,"",2);Ext.getCmp(F+"editor").destroy();Ext.getCmp("main-tabs").remove(Ext.getCmp(F+"editorTab"));if(Ext.getCmp(F+"view")){Ext.getCmp(F+"view").reload()}var N={};if(D.parentElement.match("Grid")){N=Ext.getCmp(D.parentElement);var L=N.store.getById(D.id);var Q=(N.store.indexOf(L)>=0)?N.getView().getRow(N.store.indexOf(L)):N.store.indexOf(L);if(Q<0){N.store.load()}else{if(Ext.fly(Q).hasClass("x-grid3-row-expanded")&&L.iFrame){L.iFrame.setSrc()}}}if(D.parentElement.match("discussion-grid")){N=Ext.getCmp(D.parentElement);N.store.load({params:Ext.apply({},N.store.lastOptions.params)})}}else{Ext.ux.ToastLars.msg(Lars.msg.failure,P.message,5)}},failure:function(L,M){var O=Ext.util.JSON.decode(M.response.responseText);Ext.ux.ToastLars.msg(Lars.msg.failure,O.message?O.message:"",5);A=E.getForm().getValues().textField;if(O.changed){var N=O.oldName;var P=O.oldId;this.winChanged=new LarsNewHtmlTextWindowNew(P,N,A);this.winChanged.show();this.winChanged.setZIndex(90003);Ext.getCmp(F+"editor").destroy();Ext.getCmp("main-tabs").remove(Ext.getCmp(F+"editorTab"));Ext.Msg.show({title:Lars.main.editor.save_info_1,msg:Lars.main.editor.save_info_2,buttons:Ext.Msg.OK,animEl:"elId",icon:Ext.MessageBox.INFO})}}})}},{text:Lars.closedown,handler:function(){Ext.getCmp(F+"editor").destroy();Ext.getCmp("main-tabs").remove(Ext.getCmp(F+"editorTab"))}}],items:[{xtype:"tinymce",width:300,height:500,id:D.id+"editor",name:"textField",tinymceSettings:{theme:"advanced",language:Lars.tinyMceLanguage,verify_html:true,content_css:"moko/css/tinyMCE.css",plugins:"table,emotions,searchreplace,asciimath,asciisvg,media,paste",theme_advanced_buttons1:"fontselect,formatselect,fontsizeselect,bold,italic,underline,sub,sup,separator,justifyleft,justifycenter,justifyright,separator,forecolor,backcolor",theme_advanced_buttons2:"hr,charmap,separator,emotions,image,media,link,unlink,separator,bullist,numlist,tablecontrols,visualaid,asciimath,asciimathcharmap,asciisvg",theme_advanced_buttons3:"undo,redo,separator,pasteword,separator,removeformat,separator,search,separator,fullscreen,code",theme_advanced_fonts:"Times New Roman=times new roman,times,serif;Arial=arial,helvetica,sans-serif;Courier New=courier new,courier,monospace;AkrutiKndPadmini=Akpdmi-n",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"none",theme_advanced_resizing:false,convert_urls:false,AScgiloc:"http://www.bid-owl.de/tools/asciisvg/svgimg.php",ASdloc:"http://www.bid-owl.de/mokodesk/moko/tiny_mce/plugins/asciisvg/js/d.svg",extended_valid_elements:"embed[*]",file_browser_callback:function J(M,K,L,N){this.win=new LarsBrowseFileWindow(N.document.forms[0].elements[M],D);this.win.show();this.win.setZIndex(90010)}},value:H.html}]});Ext.getCmp("main-tabs").add(E);Ext.getCmp("main-tabs").setActiveTab(E)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.editor.document_not_available,5)}},failure:function(G,H){Ext.ux.ToastLars.msg(Lars.msg.failure,"")}})}this.setActiveTab(E)},openTabIFrame:function(D,A){var B;var E=D.id+"viewIFrame";if(!(B=this.getItem(E))){B=new LarsIFramePanel({id:"desktop-grid-row-"+D.id,defaultSrc:"tools/get.php?object="+D.id,loadMask:true,id:E,iconCls:D.attributes.iconCls||"page",title:'<span style="color: '+A+';">'+D.text+"</span>",listeners:{domready:LarsViewer.LinkInterceptorIFrame},tabTip:D.text,layout:"fit",closable:true,autoScroll:true,node:D});Ext.getCmp("main-tabs").add(B);Ext.getCmp("main-tabs").setActiveTab(B)}this.setActiveTab(B)},openTabIFrameInternet:function(D,A){var B;var E=D.id+"viewIFrame";if(!(B=this.getItem(E))){B=new LarsIFramePanelInternet({id:"desktop-grid-row-"+D.id,defaultSrc:D.attributes.lars_ref,loadMask:true,id:E,edit:false,iconCls:D.attributes.iconCls,title:'<span style="color: '+A+';">'+D.text+"</span>",listeners:{domready:LarsViewer.LinkInterceptorIFrame},tabTip:D.text,layout:"fit",closable:true,autoScroll:true,node:D});B.on("documentloaded",function(M){var K=M.getWindow();for(var H=0,G=K.frames.length;H<G;H++){var J=K.frames[H].document.getElementsByTagName("a");for(var I=0,L=J[I],F=J.length;I<F;I++){L=J[I];L.target="_blank";L.addEventListener("click",function(O,N){if(O.currentTarget.href.match(window.location.host)){B.setSrc(O.currentTarget.href)}else{LarsViewer.QuestionBrowserOpen(O)}O.preventDefault();return false},false)}}});Ext.getCmp("main-tabs").add(B);Ext.getCmp("main-tabs").setActiveTab(B)}this.setActiveTab(B)},openTabView:function(E,B){var D;var A;var F=E.id+"view";if(!(D=this.getItem(F))){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:E.id,task:"view"},success:function(G,H){var I=Ext.util.JSON.decode(G.responseText);if(I.success){D=new LarsHTMLPanel({id:F,iconCls:"page",title:'<span style="color: '+B+';">'+E.text+"</span>",tabTip:E.text,bodyStyle:"padding:5px 5px 5px 5px; background:white; border-style:solid;border-color:#99bbe8;border-width:1;",layout:"fit",closable:true,html:I.html,autoScroll:true,node:E});Ext.getCmp("main-tabs").add(D);Ext.getCmp("main-tabs").setActiveTab(D)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.editor.document_not_available,5)}},failure:function(G,H){Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.editor.document_not_available,5)}})}this.setActiveTab(D)},openTabPackage:function(E){var D;var A;var G=E.id;if(!(D=this.getItem("package-panel-"+G))){if(E.ownerTree&&E.isLeaf()==false&&E.ownerTree.id.match("topics")&&!E.attributes.iconCls.match("report")){var F=new LarsPackageDiscussion(E,{region:"center",collapsible:false},E.attributes.groupColor);D=new LarsPackagePanel({iconCls:E.attributes.iconCls,border:false,bodyBorder:false,closable:true,id:"discussion-"+G,listeners:LarsViewer.LinkInterceptor,node:E,tabTip:E.text+Lars.main.grid.package_append,groupColor:E.attributes.groupColor,title:'<span style="color: '+E.attributes.groupColor+';">'+E.text+"</span>",layout:"border",margins:"0 0 0 0",items:[F]});F.startAutoUpdate("d"+E.id);F.on("destroy",function(){F.stopAutoUpdate("d"+E.id)},this)}else{var F=new LarsPackageDiscussion(E,{region:"south",collapsible:true},E.attributes.groupColor);var B=new PackageGrid(E,E.attributes.groupColor);B.getView().getRowClass=LarsGridConfig.applyRowClass;D=new LarsPackagePanel({defaults:{collapsible:true,split:true},iconCls:E.attributes.iconCls,border:false,bodyBorder:false,closable:true,id:"package-panel-"+E.id,node:E,listeners:LarsViewer.LinkInterceptor,node:E,tabTip:E.text+Lars.main.grid.package_append,groupColor:E.attributes.groupColor,title:'<span style="color: '+E.attributes.groupColor+';">'+E.text+"</span>",layout:"border",margins:"0 0 0 0",items:[B,F]});B.startAutoUpdate("p"+E.id);F.startAutoUpdate("d"+E.id);F.on("destroy",function(){F.stopAutoUpdate("d"+E.id)},this);B.on("destroy",function(){B.stopAutoUpdate("p"+E.id)},this)}D.on("activate",function(H){if(!H.node){return}var M=Ext.getCmp("topics-tree");var K=Ext.getCmp("topics-tree-t");var J=Ext.getCmp("resources-tree");var I=K.getNodeById(H.node.id);I=I?I:M.getNodeById(H.node.id);if(I){K.expandPath(I.getPath());M.expandPath(I.getPath());I.select()}var L=J.getNodeById(H.node.id);if(!L){return}J.expandPath(L.getPath());L.select()});Ext.getCmp("main-tabs").add(D);Ext.getCmp("main-tabs").setActiveTab(D);Ext.getCmp("main-tabs").syncSize();if(!(E.ownerTree&&E.isLeaf()==false&&E.ownerTree.id.match("topics"))){B.store.load({callback:function(){for(var H=0;H<B.store.data.length;H++){if(B.store.data.items[H].data.LARS_TYPE=="1"||B.store.data.items[H].data.LARS_TYPE=="3"){B.expander.expandRow.defer(500,B.expander,[H])}}}})}F.store.load()}this.setActiveTab(D)},archivePackage:function(A){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:A.id,task:"archivePackage"},success:function(B,D){var E=Ext.util.JSON.decode(B.responseText);if(E.success){Ext.ux.ToastLars.msg(Lars.main.tree.package_moved_msg,"",5)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.package_moved_msg,5)}}})},archiveGroupPackage:function(B,A){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:B.id,task:"archiveGroupPackage",archiveId:A},success:function(D,E){var F=Ext.util.JSON.decode(D.responseText);if(F.success){Ext.ux.ToastLars.msg(Lars.main.tree.package_moved_msg,"",5)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.package_moved_msg,5)}}})}});LarsTreePanelArchivWindow=function(A){this.node=A;this.treePanel=new LarsTreePanelArchiv(A);new Ext.tree.TreeSorter(this.treePanel,{folderSort:true,dir:"desc"});LarsTreePanelArchivWindow.superclass.constructor.call(this,{title:A.text,layout:"border",iconCls:"folder-archiv",id:"custom-tree-win-"+A.id,width:200,height:300,autoScroll:true,items:this.treePanel});this.addEvents({add:true})};Ext.extend(LarsTreePanelArchivWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var A=this.name.getValue();Ext.Ajax.request({url:"lars_json.php",params:{task:"newAssignment",id:this.node.id,name:A},success:this.refreshFolder,scope:this})},refreshFolder:function(A,B){Ext.getCmp("topics-tree").root.reload();this.destroy()}});LarsTreePanelArchiv=function(A){LarsTreePanelArchiv.superclass.constructor.call(this,{id:"tree-"+A.id,region:"center",rootVisible:false,autoScroll:true,border:false,root:new Ext.tree.AsyncTreeNode({text:"Hauptverzeichnis",loader:new Ext.tree.TreeLoader({loadMask:{msg:Lars.msg.loading_folder},dataUrl:"lars_json.php",baseParams:{task:"getSchuelerTopics",folder:A.id}}),id:"source"})});this.expand();this.addEvents({schuelerEditTab:true});this.on("contextmenu",this.onContextMenu,this);this.on({dblClick:{fn:function(D,B){if(D.isLeaf()){Ext.getCmp("main-tabs").fireEvent("viewPackage",D)}}}});this.on({click:{fn:function(D,B){D.toggle()}}});this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})})};Ext.extend(LarsTreePanelArchiv,Ext.tree.TreePanel,{onContextMenu:function(A,B){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{text:Lars.del,id:"add1345752443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_confirm_object,function(D){if(D=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:A.id,name:A.attributes.origName,task:"deleteItem"},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){A.remove()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}}})}},this)},iconCls:"delete"}]});if(A.isLeaf()){this.menu.add({text:Lars.main.tree.show_package,id:"add2311",handler:function(){Ext.getCmp("main-tabs").fireEvent("viewPackage",A)},iconCls:"table-go"},{text:Lars.main.tree.copy_package,id:"add2334514561",handler:function(){packageNodeToCopy=A},iconCls:"copy"})}this.menu.showAt(B.getXY());this.menu.el.setZIndex(90010)},afterRender:function(){LarsTreePanelArchiv.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsTreePanel=function(A){this.node={};if(A){this.node.id=A.id}else{this.node.id="root"}LarsTreePanel.superclass.constructor.call(this,{id:"tree",region:"center",width:225,minSize:175,maxSize:400,margins:"0 0 0 0",ddGroup:"resources",border:false,frame:true,collapseMode:"mini",enableDD:true,dropConfig:{appendOnly:true},rootVisible:false,lines:true,split:true,autoScroll:true,containerScroll:true,root:new Ext.tree.TreeNode({text:Lars.main.tree.main_directory,expanded:true})});this.root.appendChild([new Ext.tree.AsyncTreeNode({text:Lars.main.tree.root_directory,loader:new Ext.tree.TreeLoader({dataUrl:"lars_folder.php",baseParams:{task:"getRoot"}}),id:"root"}),new Ext.tree.AsyncTreeNode({text:Lars.main.tree.home_directory,loader:new Ext.tree.TreeLoader({dataUrl:"lars_folder.php",baseParams:{task:"getRoot"}}),id:"home"})]);new Ext.tree.TreeSorter(this,{folderSort:true});this.expand();this.on("contextmenu",this.onContextMenu,this);this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})});this.on({click:{fn:function(D,B){D.toggle()}}})};Ext.extend(LarsTreePanel,Ext.tree.TreePanel,{onContextMenu:function(A,B){if(!A.isLeaf()){this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.main.tree.add_to_resources,id:"add13452",handler:function(){this.win=new LarsResourcesAddNameWindow(A);this.win.show();this.win.setZIndex(90000)},iconCls:"link-add"}]});this.menu.showAt(B.getXY());this.menu.el.setZIndex(90010)}},afterRender:function(){LarsTreePanel.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsTreePanelBin=function(){LarsTreePanelBin.superclass.constructor.call(this,{id:"bin-tree",region:"center",margins:"0 0 0 0",bodyBorder:false,shim:false,rootVisible:false,lines:true,autoScroll:true,containerScroll:true,root:new Ext.tree.AsyncTreeNode({text:Lars.main.bin.trash,loader:new Ext.tree.TreeLoader({dataUrl:"lars_folder.php",baseParams:{task:"getResources"}}),id:larsBinId}),tbar:[{iconCls:"bin-empty",text:"",tooltip:Lars.main.bin.empty_trash,handler:function(){Ext.Msg.confirm(Lars.main.bin.trash,Lars.main.bin.empty_trash_confirm,function(A){if(A=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"emptyTrash"},success:function(B,D){var E=Ext.util.JSON.decode(B.responseText);if(E.success){Ext.ux.ToastLars.msg(Lars.msg.success,"",2);Ext.getCmp("bin-tree").root.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,"",2)}}})}},this)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){Ext.getCmp("bin-tree").root.reload()}}]});new Ext.tree.TreeSorter(this,{folderSort:true});this.expand();this.getSelectionModel().on({selectionchange:function(B,A){if(A){this.fireEvent("projectselect",A.attributes.id)}},scope:this});this.addEvents({schuelerEditTab:true});this.on("contextmenu",this.onContextMenu,this);this.on({dblClick:{fn:function(B,A){if(B.isLeaf()){window.open(B.attributes.lars_ref)}}}});this.on({click:{fn:function(B,A){B.toggle()}}});this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})})};Ext.extend(LarsTreePanelBin,Ext.tree.TreePanel,{onContextMenu:function(A,B){this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.main.bin.delete_irrevocable,id:"add132443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.bin.delete_confirm,function(D){if(D=="yes"){Ext.Ajax.request({scope:this,url:"lars_json.php",params:{id:A.id,name:A.attributes.origName,task:"deleteItem",irrevocable:"1"},success:function(E,F){var G=Ext.util.JSON.decode(E.responseText);if(G.success){A.parentNode.reload()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.bin.del_failure_msg,5)}}})}},this)},iconCls:"delete"}]});if(A.isLeaf()){this.menu.add({iconCls:"copy",text:Lars.copy_document,tooltip:Lars.copy_document_tt,handler:function(E,D,G,F){A.data={OBJ_DESC:A.text};fileRecordToCopy=A;packageNodeToCopy=false},scope:this})}else{if(A.attributes.iconCls!="folder-link"){this.menu.add({text:Lars.main.tree.copy_folder,id:"add2334d54514561",handler:function(){fileRecordToCopy=false;packageNodeToCopy=A},iconCls:"copy"})}}this.menu.showAt(B.getXY());this.menu.el.setZIndex(90010)},afterRender:function(){LarsTreePanelBin.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsTreePanelBinWindow=function(){this.treePanel=new LarsTreePanelBin();LarsTreePanelBinWindow.superclass.constructor.call(this,{title:Lars.main.bin.trash,layout:"border",iconCls:"bin",id:"bin-explorer-win",width:250,height:350,autoScroll:true,items:this.treePanel})};Ext.extend(LarsTreePanelBinWindow,Ext.Window,{});LarsTopicsPanel=function(){LarsTopicsPanel.superclass.constructor.call(this,{region:"center",id:"west-panel",title:"",split:true,layout:"accordion",floating:true,shadow:true,shim:false,frame:true,header:true,minSize:175,maxSize:400,margins:"0 4 8 8",cmargins:"8 0 8 8",items:[new LarsTreePanelDesk(),new LarsTreePanelDeskOthers()]})};Ext.extend(LarsTopicsPanel,Ext.Panel,{});LarsDesktopErrorWindow=function(){this.content=new Ext.form.HtmlEditor({id:"desktop-error-form",fieldLabel:"Fehlerbeschreibung",name:"Fehlerbeschreibung",height:300,value:"",msgTarget:"under",enableAlignments:false,enableColors:false,enableFont:false,enableFontSize:false,enableLinks:false,enableLists:false,enableSourceEdit:false});this.form=new Ext.FormPanel({labelAlign:"top",buttonAlign:"center",layout:"fit",items:[this.content],buttons:[{align:"center",text:"Abschicken",handler:this.onAdd,scope:this}],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsDesktopErrorWindow.superclass.constructor.call(this,{title:"Fehlerbericht schicken",width:300,split:true,id:"lars-desktop-error",iconCls:"error",viewConfig:{forceFit:true},autoScroll:true,buttonAlign:"center",items:this.form})};Ext.extend(LarsDesktopErrorWindow,Ext.Window,{onAdd:function(){var A=this.content.getValue();Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"errorReport",message:A},failure:function(B,D){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection)},success:function(B,D){var E=Ext.util.JSON.decode(B.responseText);if(E.success==true){Ext.ux.ToastLars.msg(Lars.msg.success,E.name?E.name:" ",3)}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure+" <br>"+E.name,4)}this.destroy()}})}});var larsVoiceChat={title:Lars.main.chat.title,iconCls:"webcam",collapsible:true,collapsed:true,id:"lars-voice-chat",region:"east",xtype:"flashpanel",split:true,autoScroll:true,cmargins:"0 0 0 0",tbar:[{iconCls:"house",tooltip:Lars.main.chat.chat_home,handler:function(){reloadVoiceChat(larsDesktopId)},scope:this},{iconCls:"user",tooltip:Lars.main.chat.chat_else,handler:function(){this.win=new LarsJoinChat();this.win.show();this.win.setZIndex(90005)},scope:this}],mediaCfg:{mediaType:"SWF",id:"flocsOne",renderOnResize:false,width:275}};reloadVoiceChat=function(A){Ext.getCmp("lars-voice-chat").renderMedia({mediaType:"SWF",url:"moko/ux/flocsLars.swf",id:"flocsOne",renderOnResize:false,visibility:"hidden",autoSize:true,start:true,loop:false,height:"100%",width:275,controls:true,params:{quality:"high",scale:"exactfit",start:true,loop:false,allowScriptAccess:"sameDomain",flashVars:{user:user,pass:pass,server:"www.bid-owl.de",port:"1900",environment:A}}})};LarsJoinChat=function(){this.name=new Ext.form.Field({id:"environment-id",fieldLabel:"ID des Raumes",width:450,msgTarget:"under"});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsJoinChat.superclass.constructor.call(this,{title:"Chat beitreten",iconCls:"webcam",id:"join-chat-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:"ok",handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this)};Ext.extend(LarsJoinChat,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var A=this.name.getValue();reloadVoiceChat(A);this.destroy()}});LarsTopicsPanelTeacher=function(){LarsTopicsPanelTeacher.superclass.constructor.call(this,{region:"center",id:"west-panel",title:"",split:true,layout:"accordion",floating:true,shadow:true,shim:false,frame:true,header:true,minSize:175,maxSize:400,margins:"0 4 8 8",cmargins:"8 0 8 8",items:[new LarsTreePanelDeskOthers(),new LarsTreePanelDesk()]});this.on("contextmenu",this.onContextMenu,this);this.on("nodeDrop",function(A,D,E,B){},this)};Ext.extend(LarsTopicsPanelTeacher,Ext.Panel,{afterRender:function(){LarsTopicsPanelTeacher.superclass.afterRender.call(this);this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}})}});LarsChangeDescWindow=function(A){this.node={};if(A){this.node=A}else{this.node.id=""}this.name=new Ext.form.Field({id:"title-name",fieldLabel:Lars.dialog.changeDesc.fieldLabel,width:450,msgTarget:"under",value:Ext.util.Format.stripTags(A.attributes.text)});this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onSave,this),items:[this.name],border:false,bodyStyle:"background:transparent;padding:10px;"});LarsChangeDescWindow.superclass.constructor.call(this,{title:Lars.dialog.changeDesc.title,iconCls:"page-text",id:"change-desc-win",autoHeight:true,width:500,resizable:false,plain:true,modal:true,y:100,autoScroll:true,buttons:[{text:Lars.button_save,handler:this.onSave,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form});this.on("show",this.focusFirst,this);this.addEvents({add:true})};Ext.extend(LarsChangeDescWindow,Ext.Window,{onSave:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var A=this.name.getValue();Ext.Ajax.request({scope:this,url:"lars_json.php",params:{task:"update",key:"id",keyValue:this.node.id,id:this.node.id,field:"OBJ_DESC",fieldValue:A,originalValue:this.node.text},failure:function(B,D){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection);this.el.unmask()},success:function(B,D){var E=Ext.util.JSON.decode(B.responseText);if(E.success==true){Ext.ux.ToastLars.msg(Lars.dialog.changeDesc.msg_success,E.name?E.name:" ",3);this.node.setText(A);this.destroy()}else{Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.dialog.changeDesc.msg_failure+"<br>"+E.name,4);this.el.unmask()}}})}});Ext.ux.ToastLars=function(){var B;function A(D,E){return['<div class="msg">','<div class="x-box-tl"><div class="x-box-tr"><div class="x-box-tc"></div></div></div>','<div class="x-box-ml"><div class="x-box-mr"><div class="x-box-mc"><h3>',D,"</h3>",E,"</div></div></div>",'<div class="x-box-bl"><div class="x-box-br"><div class="x-box-bc"></div></div></div>',"</div>"].join("")}return{msg:function(I,G,H){var F=H||2;if(!B){B=Ext.DomHelper.insertFirst(document.body,{id:"msg-div",style:"position:absolute;z-index:100000"},true)}var E=String.format.apply(String,Array.prototype.slice.call(arguments,1));var D=Ext.DomHelper.append(B,{html:A(I,E)},true);B.alignTo(document,"br-br",[-50,-5]);D.slideIn("b").pause(F).ghost("",{remove:true})}}}();Ext.ux.ToastLarsDiscussion=function(){var B;function A(D,E,F){return['<div class="msg">','<div class="x-box-tl"><div class="x-box-tr"><div class="x-box-tc"></div></div></div>','<div class="x-box-ml"><div class="x-box-mr"><div class="x-box-mc-discussion">',D,"<h3>",E,"</h3>",F,"</div></div></div>",'<div class="x-box-bl"><div class="x-box-br"><div class="x-box-bc"></div></div></div>',"</div>"].join("")}return{msg:function(G,J,H,I){var F=I||2;if(!B){B=Ext.DomHelper.insertFirst(document.body,{id:"msg-div",style:"position:absolute;z-index:100000"},true)}var E=String.format.apply(String,Array.prototype.slice.call(arguments,2));var D=Ext.DomHelper.append(B,{html:A(G,J,E)},true);B.alignTo(document,"br-br",[-50,-5]);D.slideIn("b").pause(F);D.on("mouseover",function(){D.ghost("",{remove:true})},D.dom)}}}();